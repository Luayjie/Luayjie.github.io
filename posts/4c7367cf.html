<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><div id="myscoll"></div><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Linux基础总结版 | 风筝上的猫</title><meta name="keywords" content="Java,MySQL,算法,代码,博客,Butterfly,Hexo,Luay🥝,Luay"><meta name="author" content="Luay🥝"><meta name="copyright" content="Luay🥝"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="基础东西都在这里了，学完彻底告别小白。">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux基础总结版">
<meta property="og:url" content="https://lukme.top/posts/4c7367cf.html">
<meta property="og:site_name" content="风筝上的猫">
<meta property="og:description" content="基础东西都在这里了，学完彻底告别小白。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cos.lukme.top/lukme/article_cover/cover_1.webp">
<meta property="article:published_time" content="2024-07-25T03:17:04.000Z">
<meta property="article:modified_time" content="2024-10-13T07:02:09.927Z">
<meta property="article:author" content="Luay🥝">
<meta property="article:tag" content="Java,MySQL,算法,代码,博客,Butterfly,Hexo,Luay🥝,Luay">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cos.lukme.top/lukme/article_cover/cover_1.webp"><link rel="shortcut icon" href="/"><link rel="canonical" href="https://lukme.top/posts/4c7367cf"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/6.0.0/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.staticfile.org/fancyapps-ui/4.0.31/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.js',
      css: 'https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Linux基础总结版',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-10-13 15:02:09'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="https://cdn1.tianli0.top/npm/element-ui@2.15.6/packages/theme-chalk/lib/index.css"><style id="themeColor"></style><style id="rightSide"></style><style id="transPercent"></style><style id="blurNum"></style><style id="settingStyle"></style><span id="fps"></span><style id="defineBg"></style><style id="menu_shadow"></style><svg aria-hidden="true" style="position:absolute; overflow:hidden; width:0; height:0"><symbol id="icon-sun" viewBox="0 0 1024 1024"><path d="M960 512l-128 128v192h-192l-128 128-128-128H192v-192l-128-128 128-128V192h192l128-128 128 128h192v192z" fill="#FFD878" p-id="8420"></path><path d="M736 512a224 224 0 1 0-448 0 224 224 0 1 0 448 0z" fill="#FFE4A9" p-id="8421"></path><path d="M512 109.248L626.752 224H800v173.248L914.752 512 800 626.752V800h-173.248L512 914.752 397.248 800H224v-173.248L109.248 512 224 397.248V224h173.248L512 109.248M512 64l-128 128H192v192l-128 128 128 128v192h192l128 128 128-128h192v-192l128-128-128-128V192h-192l-128-128z" fill="#4D5152" p-id="8422"></path><path d="M512 320c105.888 0 192 86.112 192 192s-86.112 192-192 192-192-86.112-192-192 86.112-192 192-192m0-32a224 224 0 1 0 0 448 224 224 0 0 0 0-448z" fill="#4D5152" p-id="8423"></path></symbol><symbol id="icon-moon" viewBox="0 0 1024 1024"><path d="M611.370667 167.082667a445.013333 445.013333 0 0 1-38.4 161.834666 477.824 477.824 0 0 1-244.736 244.394667 445.141333 445.141333 0 0 1-161.109334 38.058667 85.077333 85.077333 0 0 0-65.066666 135.722666A462.08 462.08 0 1 0 747.093333 102.058667a85.077333 85.077333 0 0 0-135.722666 65.024z" fill="#FFB531" p-id="11345"></path><path d="M329.728 274.133333l35.157333-35.157333a21.333333 21.333333 0 1 0-30.165333-30.165333l-35.157333 35.157333-35.114667-35.157333a21.333333 21.333333 0 0 0-30.165333 30.165333l35.114666 35.157333-35.114666 35.157334a21.333333 21.333333 0 1 0 30.165333 30.165333l35.114667-35.157333 35.157333 35.157333a21.333333 21.333333 0 1 0 30.165333-30.165333z" fill="#030835" p-id="11346"></path></symbol></svg><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload="this.media='screen'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="风筝上的猫" type="application/atom+xml">
</head><body><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><div class="loading-img"></div><div class="loading-image-dot"></div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://luay-1302975046.cos.ap-shanghai.myqcloud.com/lukme/touxiang.jpg" onerror="onerror=null;src='/assets/r1.jpg'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">55</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">11</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">10</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-home"></use></svg><span class="menu_word" style="font-size:17px"> 首页</span></a></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon--article"></use></svg><span class="menu_word" style="font-size:17px"> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-guidang1">                   </use></svg><span class="menu_word" style="font-size:17px"> 归档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-sekuaibiaoqian">                   </use></svg><span class="menu_word" style="font-size:17px"> 标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-fenlei">                   </use></svg><span class="menu_word" style="font-size:17px"> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-pinweishenghuo"></use></svg><span class="menu_word" style="font-size:17px"> 休闲</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/life/music/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-yinle">                   </use></svg><span class="menu_word" style="font-size:17px"> 八音盒</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/movies/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-dianying1">                   </use></svg><span class="menu_word" style="font-size:17px"> 影院</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/games/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-youxishoubing">                   </use></svg><span class="menu_word" style="font-size:17px"> 游戏</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-xiangzi"></use></svg><span class="menu_word" style="font-size:17px"> 八宝箱</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/box/gallery/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-tubiaozhizuomoban">                   </use></svg><span class="menu_word" style="font-size:17px"> 画廊</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/animation/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-nvwumao">                   </use></svg><span class="menu_word" style="font-size:17px"> 动画</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/nav/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-zhifengche">                   </use></svg><span class="menu_word" style="font-size:17px"> 网址导航</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shejiaoxinxi"></use></svg><span class="menu_word" style="font-size:17px"> 社交</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/comments/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-liuyan">                   </use></svg><span class="menu_word" style="font-size:17px"> 留言板</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/social/link/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-lianjie">                   </use></svg><span class="menu_word" style="font-size:17px"> 友人帐</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-wangye"></use></svg><span class="menu_word" style="font-size:17px"> 网站</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/site/census/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon--tongjibiao">                   </use></svg><span class="menu_word" style="font-size:17px"> 网站统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/echarts/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shujutongji1">                   </use></svg><span class="menu_word" style="font-size:17px"> 文章统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/time/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-xianxingshalou">                   </use></svg><span class="menu_word" style="font-size:17px"> 旧时光</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">风筝上的猫</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-home"></use></svg><span class="menu_word" style="font-size:17px"> 首页</span></a></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon--article"></use></svg><span class="menu_word" style="font-size:17px"> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-guidang1">                   </use></svg><span class="menu_word" style="font-size:17px"> 归档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-sekuaibiaoqian">                   </use></svg><span class="menu_word" style="font-size:17px"> 标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-fenlei">                   </use></svg><span class="menu_word" style="font-size:17px"> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-pinweishenghuo"></use></svg><span class="menu_word" style="font-size:17px"> 休闲</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/life/music/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-yinle">                   </use></svg><span class="menu_word" style="font-size:17px"> 八音盒</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/movies/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-dianying1">                   </use></svg><span class="menu_word" style="font-size:17px"> 影院</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/games/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-youxishoubing">                   </use></svg><span class="menu_word" style="font-size:17px"> 游戏</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-xiangzi"></use></svg><span class="menu_word" style="font-size:17px"> 八宝箱</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/box/gallery/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-tubiaozhizuomoban">                   </use></svg><span class="menu_word" style="font-size:17px"> 画廊</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/animation/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-nvwumao">                   </use></svg><span class="menu_word" style="font-size:17px"> 动画</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/nav/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-zhifengche">                   </use></svg><span class="menu_word" style="font-size:17px"> 网址导航</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shejiaoxinxi"></use></svg><span class="menu_word" style="font-size:17px"> 社交</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/comments/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-liuyan">                   </use></svg><span class="menu_word" style="font-size:17px"> 留言板</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/social/link/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-lianjie">                   </use></svg><span class="menu_word" style="font-size:17px"> 友人帐</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-wangye"></use></svg><span class="menu_word" style="font-size:17px"> 网站</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/site/census/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon--tongjibiao">                   </use></svg><span class="menu_word" style="font-size:17px"> 网站统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/echarts/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shujutongji1">                   </use></svg><span class="menu_word" style="font-size:17px"> 文章统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/time/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-xianxingshalou">                   </use></svg><span class="menu_word" style="font-size:17px"> 旧时光</span></a></li></ul></div></div><center id="name-container"><a id="page-name" href="javascript:scrollToTop()">PAGE_NAME</a></center><div id="nav-right"><div id="search-button"><a class="search faa-parent animated-hover" title="检索站内任何你想要的信息"><svg class="faa-tada icon" style="height:24px;width:24px;fill:currentColor;position:relative;top:6px" aria-hidden="true"><use xlink:href="#icon-valentine_-search-love-find-heart"></use></svg><span> 搜索</span></a></div><a class="meihua faa-parent animated-hover" onclick="toggleWinbox()" title="美化设置-自定义你的风格" id="meihua-button"><svg class="faa-tada icon" style="height:26px;width:26px;fill:currentColor;position:relative;top:8px" aria-hidden="true"><use xlink:href="#icon-tupian1"></use></svg></a><a class="sun_moon faa-parent animated-hover" onclick="switchNightMode()" title="浅色和深色模式转换" id="nightmode-button"><svg class="faa-tada" style="height:25px;width:25px;fill:currentColor;position:relative;top:7px" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon">       </use></svg></a><div id="toggle-menu"><a><i class="fas fa-bars fa-fw"></i></a></div></div></div></nav><div id="post-info"><h1 class="post-title">Linux基础总结版</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><svg class="meta_icon post-meta-icon" style="width:30px;height:30px;position:relative;top:10px"><use xlink:href="#icon-rili"></use></svg><span class="post-meta-label">发表于 </span><time class="post-meta-date-created" datetime="2024-07-25T03:17:04.000Z" title="发表于 2024-07-25 11:17:04">2024-07-25</time><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:18px;height:18px;position:relative;top:5px"><use xlink:href="#icon-gengxin1"></use></svg><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-10-13T07:02:09.927Z" title="更新于 2024-10-13 15:02:09">2024-10-13</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:18px;height:18px;position:relative;top:5px"><use xlink:href="#icon-biaoqian"></use></svg><a class="post-meta-categories" href="/categories/Linux%E6%95%B2%E9%97%A8/">Linux敲门</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><svg class="meta_icon post-meta-icon" style="width:25px;height:25px;position:relative;top:8px"><use xlink:href="#icon-charuword"></use></svg><span class="post-meta-label">字数总计:</span><span class="word-count">4.9w</span><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:20px;height:20px;position:relative;top:5px"><use xlink:href="#icon-shizhong"></use></svg><span class="post-meta-label">阅读时长:</span><span>209分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Linux基础总结版"><svg class="meta_icon post-meta-icon" style="width:25px;height:25px;position:relative;top:5px"><use xlink:href="#icon-eye"></use></svg><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="【1】Linux基础">【1】Linux基础</h2>
<h3 id="1-网络相关">1.网络相关</h3>
<figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ip地址：设备之间互相通信 xxx.xxx.xxx.xxx <span class="number">4</span>段 点分十进制 范围：<span class="number">0</span>-<span class="number">255</span> <span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span> -<span class="number">255</span>.<span class="number">255</span>.<span class="number">255</span>.<span class="number">255</span></span><br><span class="line">子网掩码：划分网段，判断ip是否在同一个局域网内 <span class="number">255</span>.<span class="number">255</span>.<span class="number">255</span>.<span class="number">0</span> 子网一样就是在同一网段</span><br><span class="line">网关：让设备上局域网以外的网站，需要出网关（出国的海关）网关地址就是路由器的IP</span><br><span class="line">DNS：domain name server 域名解析服务</span><br><span class="line">若子下面两个ip网掩码前三位一样，最后一位不一样，则前三位是网络位）</span><br><span class="line">子网掩码            网络位       主机位</span><br><span class="line"><span class="number">255.255.255.0</span>        <span class="number">192</span>.<span class="number">168</span>.<span class="number">0</span>.   <span class="number">69</span></span><br><span class="line"><span class="number">255.255.255.1</span>        <span class="number">192</span>.<span class="number">168</span>.<span class="number">0</span>.   <span class="number">37</span></span><br><span class="line">若子下面两个ip网掩码前两位一样，最后两位不一样，则前两位是网络位</span><br><span class="line">子网掩码            网络位       主机位</span><br><span class="line"><span class="number">255.255.0.241</span>      <span class="number">192</span>.<span class="number">168</span>.     <span class="number">1</span>.<span class="number">5</span>       </span><br><span class="line"><span class="number">255.255.1.67</span>       <span class="number">192</span>.<span class="number">168</span>.     <span class="number">0</span>.<span class="number">241</span></span><br><span class="line"></span><br><span class="line">Windows：cmd中  ipconfig -all查看ip</span><br></pre></td></tr></table></figure>
<h4 id="1-虚拟机的网络模式">1.虚拟机的网络模式</h4>
<figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">桥接模式：将物理机的网卡和虚拟机的网卡连接在一块（网桥）作用：共享物理机的网络，让虚拟机的IP和物理机的IP在同一个网段（局域网）</span><br><span class="line"><span class="number">192.168.10.142</span></span><br><span class="line"><span class="number">192</span>.<span class="number">168</span>.<span class="number">10</span>.xxx</span><br><span class="line">NAT模式：将物理机的IP地址，动态转换成虚拟机的私网IP，这个私网IP也可以自定义</span><br><span class="line">仅主机模式：将物理机看成是一个没有路由器的交换机，所有的虚拟机都连接在这个交换机上，所有虚拟机之间可以互相通信，但是无法上外网</span><br></pre></td></tr></table></figure>
<p><strong>NAT模式原理图</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240328140421320.png" alt="image-20240328140421320"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240328140752681.png" alt="image-20240328140752681"></p>
<h4 id="2-虚拟机网卡配置">2.虚拟机网卡配置</h4>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240328140923241.png" alt="image-20240328140923241"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240328141009976.png" alt="image-20240328141009976"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240328141241797.png" alt="image-20240328141241797"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240328141353938.png" alt="image-20240328141353938"></p>
<h4 id="3-系统内配置网卡">3.系统内配置网卡</h4>
<p><strong>nmtui命令</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/nmtui%E5%91%BD%E4%BB%A4%E6%AD%A5%E9%AA%A4.png" alt="image-20240328135426458"></p>
<p><strong>命令行配置</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240328142122532.png" alt="image-20240328142122532"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240328142637912.png" alt="image-20240328142637912"></p>
<h4 id="4-Xshell连接不上虚拟机排查">4.Xshell连接不上虚拟机排查</h4>
<p><strong>1.查看虚拟机网卡配置</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240401212405053.png" alt="image-20240401212405053"></p>
<p><strong>2.检查路由器 (虚拟网络编辑器)配置</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240401212612086.png" alt="image-20240401212612086"></p>
<p><strong>3.虚拟机网卡配置文件内容</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">TYPE=Ethernet</span><br><span class="line">PROXY_METHOD=none</span><br><span class="line">BROWSER_ONLY=no</span><br><span class="line">BOOTPROTO=none			none/dhcp/static</span><br><span class="line">DEFROUTE=<span class="built_in">yes</span></span><br><span class="line">IPV4_FAILURE_FATAL=no</span><br><span class="line">NAME=ens33</span><br><span class="line">DEVICE=ens33</span><br><span class="line">ONBOOT=<span class="built_in">yes</span>			开机启动网卡</span><br><span class="line">IPADDR=10.0.0.250		ip</span><br><span class="line">NETMASK=255.255.255.0	子网掩码</span><br><span class="line">GATEWAY=10.0.0.2		网关</span><br><span class="line">DNS1=223.5.5.5			首选DNS</span><br><span class="line">DNS2=223.6.6.6			备用DNS</span><br><span class="line">IPV6INIT=no</span><br><span class="line">UUID=c96bc909-188e-ec64-3a96-6a90982b08ad</span><br></pre></td></tr></table></figure>
<p><strong>4.测试虚拟机是否能上外网 ping <a target="_blank" rel="noopener" href="http://baidu.com">baidu.com</a></strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 测试虚拟机是否能上外网</span></span><br><span class="line">ping baidu.com</span><br><span class="line">在xshell里ping10.0.0.250，谁连接谁，就用谁去ping谁</span><br></pre></td></tr></table></figure>
<p>5.检查下端口是不是22（ssh协议端口22）</p>
<p>telnet 10.0.0.250 22 [c:~]$ telnet 10.0.0.250 22</p>
<p>Windows开启telnet</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240401213429309.png" alt="image-20240401213429309"></p>
<h3 id="2-C6-C7安装">2.C6 &amp; C7安装</h3>
<h4 id="1-Centos-6-安装">1. Centos 6 安装</h4>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240429164147100.png" alt="image-20240429164147100"></p>
<p><strong>1.选第一个，回车</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/202405202206220.png" alt="image-20240520220605042"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240429150439219.png" alt="image-20240429150439219"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240429150817328.png" alt="image-20240429150817328"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240429150932495.png" alt="image-20240429150932495"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240429151041651.png" alt="image-20240429151041651"></p>
<p><strong>选择时区和填写密码等省略</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240429151453854.png" alt="image-20240429151453854"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240429151714208.png" alt=""></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240429151940449.png" alt="image-20240429151940449"></p>
<p>选择base和develop工具</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240429152056178.png" alt="image-20240429152056178"></p>
<h4 id="2-配置CentOS6网卡">2.配置CentOS6网卡</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# vi /etc/sysconfig/network-scripts/ifcfg-eth0 </span><br><span class="line">DEVICE=eth0</span><br><span class="line">HWADDR=00:0C:29:5A:FC:82</span><br><span class="line">TYPE=Ethernet</span><br><span class="line">UUID=65c55f51-b929-49fa-b8c9-541e6230e11b</span><br><span class="line">ONBOOT=<span class="built_in">yes</span></span><br><span class="line">NM_CONTROLLED=<span class="built_in">yes</span></span><br><span class="line">BOOTPROTO=none</span><br><span class="line">IPADDR=10.0.0.10</span><br><span class="line">NETMASK=255.255.255.0</span><br><span class="line">GETEWAY=10.0.0.254</span><br><span class="line">DNS=223.5.5.5</span><br><span class="line">:wq</span><br><span class="line">重启网卡 </span><br><span class="line">1./etc/init.d/network restart</span><br><span class="line">2.service network restart</span><br></pre></td></tr></table></figure>
<h4 id="3-CentOS7安装">3.CentOS7安装</h4>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/%E8%99%9A%E6%8B%9F%E6%9C%BAstep01.png" alt="image-20240328135426458"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/%E8%99%9A%E6%8B%9F%E6%9C%BAstep02.png" alt="image-20240328135426458"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/%E8%99%9A%E6%8B%9F%E6%9C%BAstep03.png" alt="image-20240328135426458"></p>
<h3 id="3-变量">3.变量</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 如何定义变量</span></span><br><span class="line">变量名=变量值     age=18</span><br><span class="line">[root@localhost tmp]# <span class="built_in">echo</span> <span class="variable">$age</span>		<span class="comment">#调用变量</span></span><br><span class="line">18</span><br><span class="line"><span class="comment">##  name=oldboy</span></span><br><span class="line">1.<span class="built_in">echo</span> <span class="string">&#x27;$oldboy&#x27;</span> 结果是什么？ </span><br><span class="line"><span class="variable">$oldboy</span></span><br><span class="line">2.<span class="built_in">echo</span> <span class="string">&#x27;$name&#x27;</span> 结果是什么？</span><br><span class="line"><span class="variable">$name</span></span><br><span class="line">3.<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$name</span>&quot;</span> 结果是什么？</span><br><span class="line">oldboy </span><br><span class="line">4.1.<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$oldboy</span>&#x27; 结果是什么？ </span></span><br><span class="line"><span class="string">空值</span></span><br><span class="line"><span class="string">echo &#123;1..5..2&#125;每隔2个数在1-5取数</span></span><br></pre></td></tr></table></figure>
<p><strong>环境变量（系统变量）</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~] <span class="built_in">declare</span>    <span class="comment">#可以查看系统自带的所有变量 </span></span><br><span class="line">1.[root@localhost ~]# ll /root/.bashrc</span><br><span class="line">2.[root@localhost ~]# ll /etc/bashrc </span><br><span class="line">3.[root@localhost ~]# ll /etc/profile</span><br><span class="line">4.[root@localhost ~]# ll /etc/profile.d/</span><br></pre></td></tr></table></figure>
<p><strong>命令提示符变量</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# <span class="built_in">echo</span> <span class="variable">$PS1</span></span><br><span class="line">[\u@\h \W]\$</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240327165009589.png" alt="image-20240327165009589"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">修改环境变量文件永久生效</span><br><span class="line">[root@lb01 ~]# vi ~/.bashrc  	   /root/.bashrc</span><br><span class="line">[lgj@lb01 root]$ vi ~/.bashrc      /home/lgj/.bushrc</span><br><span class="line">若root用户修改</span><br><span class="line">超级用户和普通用户家目录：</span><br><span class="line">超级用户root：/root</span><br><span class="line">普通用户：/home/普通用户名</span><br></pre></td></tr></table></figure>
<h4 id="BASH特性">BASH特性</h4>
<p><strong>BASH特性——Tab补全</strong></p>
<p><strong>BASH特性——快捷键</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Ctrl + w <span class="comment"># 将光标所在字符前面的内容删除，一直删除到空格</span></span><br><span class="line">Ctrl + z <span class="comment"># 将一个进程放在后台运行</span></span><br><span class="line">Ctrl + k <span class="comment"># 将光标所在字符和后面所有内容，全部删除</span></span><br><span class="line">Ctrl + u <span class="comment"># 将光标所在字符前面的内容全部删除（光标所在字符不会删除）</span></span><br><span class="line">Ctrl + s <span class="comment"># 锁屏</span></span><br><span class="line">Ctrl + q <span class="comment"># 解锁</span></span><br><span class="line">Ctrl + 左右 <span class="comment"># 按照单词跳转光标</span></span><br><span class="line"><span class="comment">###########################################</span></span><br><span class="line">Ctrl + a <span class="comment"># 将光标移动到命令行首</span></span><br><span class="line">Ctrl + e <span class="comment"># 将光标移动到命令行末</span></span><br><span class="line">Ctrl + c <span class="comment"># 将命令终止</span></span><br><span class="line">Ctrl + l <span class="comment"># 清屏</span></span><br><span class="line">BASH特性——历史命令</span><br><span class="line">BASH特性——命令别名</span><br><span class="line">Ctrl + d <span class="comment"># 退出当前一个BASH终端 （注销当前用户）</span></span><br><span class="line">Ctrl + r <span class="comment"># 搜索历史命令</span></span><br><span class="line">ESC + . <span class="comment"># 将上一条命令最后一个空格 后面的内容，补全到当前命令行</span></span><br><span class="line"><span class="string">&#x27;井号&#x27;</span> <span class="comment"># :在BASH中代表注释，系统不认识，bash也不会翻译</span></span><br></pre></td></tr></table></figure>
<p><strong>BASH特性——历史命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 查看历史命令 </span></span><br><span class="line">[root@localhost ~]# <span class="built_in">history</span> </span><br><span class="line">    1  age=18</span><br><span class="line">    2  <span class="built_in">echo</span> age</span><br><span class="line">    3  <span class="built_in">echo</span> <span class="string">&quot;age&quot;</span></span><br><span class="line">    4  jjjsjsjsjsjsjjsjjsjsjjjsjss</span><br><span class="line">    5  <span class="built_in">history</span> </span><br><span class="line"><span class="comment">## 保存历史记录(write)     历史记录保存在 ~/.bash_history    普通用户/home/lgj/.bash_history</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">history</span> -w</span><br><span class="line"><span class="comment">## 清除所有历史记录（clear）</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">history</span> -c</span><br><span class="line"><span class="comment">## 删除指定的一条历史记录（delete）</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">history</span> -d 4</span><br><span class="line"></span><br><span class="line"><span class="comment">## 执行上一条开头是vi的命令</span></span><br><span class="line">[root@localhost ~]# !vi</span><br><span class="line"><span class="comment">## 执行上一条命令</span></span><br><span class="line">[root@localhost ~]# !!</span><br><span class="line"><span class="comment">## 使用!+编号，重新执行命令</span></span><br><span class="line">[root@localhost ~]# !10</span><br></pre></td></tr></table></figure>
<p><strong>BASH特性——命令别名</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 查看系统中的所有别名（查）    alias</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">alias</span></span><br><span class="line"><span class="built_in">alias</span> <span class="built_in">cp</span>=<span class="string">&#x27;cp -i&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> egrep=<span class="string">&#x27;egrep --color=auto</span></span><br><span class="line"><span class="string">alias ens33=&#x27;</span>ip address show ens33<span class="string">&#x27;</span></span><br><span class="line"><span class="string">alias fgrep=&#x27;</span>fgrep --color=auto<span class="string">&#x27;</span></span><br><span class="line"><span class="string">alias grep=&#x27;</span>grep --color=auto<span class="string">&#x27;</span></span><br><span class="line"><span class="string">alias l.=&#x27;</span><span class="built_in">ls</span> -d .* --color=auto<span class="string">&#x27;</span></span><br><span class="line"><span class="string">alias ll=&#x27;</span><span class="built_in">ls</span> -l --color=auto<span class="string">&#x27;</span></span><br><span class="line"><span class="string">alias ls=&#x27;</span><span class="built_in">ls</span> --color=auto<span class="string">&#x27;</span></span><br><span class="line"><span class="string">alias mv=&#x27;</span><span class="built_in">mv</span> -i<span class="string">&#x27;</span></span><br><span class="line"><span class="string">alias net=&#x27;</span>vi /etc/sysconfig/network-scripts/ifcfg-ens33<span class="string">&#x27;</span></span><br><span class="line"><span class="string">alias rm=&#x27;</span><span class="built_in">rm</span> -i<span class="string">&#x27;</span></span><br><span class="line"><span class="string">alias which=&#x27;</span><span class="built_in">alias</span> | /usr/bin/which --tty-only --read-alias --show-dot --showtilde<span class="string">&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">## 设置别名（增）临时</span></span><br><span class="line"><span class="string">alias 别名=&#x27;</span>命令<span class="string">&#x27;</span></span><br><span class="line"><span class="string">[root@localhost ~]# alias ens33=&#x27;</span>ip address show ens33<span class="string">&#x27;	</span></span><br><span class="line"><span class="string">## 删除别名（删）</span></span><br><span class="line"><span class="string">unalias 别名</span></span><br><span class="line"><span class="string">[root@localhost ~]# unalias ens33</span></span><br><span class="line"><span class="string">## 修改别名（改）</span></span><br><span class="line"><span class="string">alias 别名=&#x27;</span>命令<span class="string">&#x27;</span></span><br><span class="line"><span class="string">alias net=&#x27;</span>vi /etc/sysconfig/network-scripts/ifcfg-ens34</span><br><span class="line"><span class="comment">## 别名永久生效</span></span><br><span class="line">[root@localhost ~]# vi ~/.bashrc</span><br><span class="line"><span class="built_in">alias</span> net=<span class="string">&#x27;vi /etc/sysconfig/network-scripts/ifcfg-ens33&#x27;</span></span><br></pre></td></tr></table></figure>
<p><strong>BASH特性——获取命令帮助</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">man 命令</span><br><span class="line">命令 --<span class="built_in">help</span></span><br><span class="line">http://linux.51yip.com/</span><br></pre></td></tr></table></figure>
<h3 id="4-单用户模式">4.单用户模式</h3>
<ul>
<li>忘记root账户密码导致无法登陆系统时，只需要进入emergency mode（单用户模式）更新root账户的密码即可。</li>
<li>单用户模式可以用来修改文件系统损坏、还原配置文件、移动用户数据等。</li>
</ul>
<h4 id="1-修改密码">1.修改密码</h4>
<p><strong>CentOS6</strong></p>
<p><strong>1）重启系统，到grub菜单界面</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240429164346037.png" alt="image-20240429164346037"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240429164633863.png" alt="image-20240429164633863"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240429165101506.png" alt="image-20240429165101506"></p>
<p><strong>回车返回内核菜单</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240429164943845.png" alt="image-20240429164943845"></p>
<p><strong>进入后就可以重新设置密码了</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240429165410448.png" alt="image-20240429165410448"></p>
<p>密码设置好重启就OK了</p>
<p><strong>CentOs7</strong></p>
<p><strong>1.重启系统</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240429170437706.png" alt="image-20240429170437706"></p>
<p><strong>2.进入grub2菜单</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240429170649081.png" alt="image-20240429170649081"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在linux16行的末尾输入,然后按下   Ctrl+X引导   组合键来运行修改过的内核程序</span></span><br><span class="line">enforcing=0 init=/bin/bash</span><br><span class="line">enforcing=0   关闭selinux（临时的），进入单用户后配置文件里关闭selinux，否则重新开机后密码就不生效了</span><br></pre></td></tr></table></figure>
<p><strong>不挂载方式</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240429173119985.png" alt="image-20240429173119985"></p>
<p><strong>3.进入单用户模式</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.重新挂载/目录</span></span><br><span class="line">mount -o rw,remount /</span><br><span class="line"><span class="comment"># 2.修改密码</span></span><br><span class="line">passwd root</span><br><span class="line"><span class="comment"># 3.重新引导系统</span></span><br><span class="line"><span class="built_in">exec</span> /sbin/init</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240429171621119.png" alt="image-20240429171621119"></p>
<h4 id="2-修改运行级别">2.修改运行级别</h4>
<p><strong>如果centos7被设置为运行级别6，导致无限重启怎么解决？</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 查看</span></span><br><span class="line">[root@yum_repo ~]# systemctl get-default</span><br><span class="line">multi-user.target    <span class="comment">#完整多用户模式</span></span><br><span class="line"><span class="comment">## 修改</span></span><br><span class="line">[root@yum_repo ~]# systemctl set-default reboot.target     <span class="comment">#设置运行级别6重启（无限重启）</span></span><br></pre></td></tr></table></figure>
<p><strong>解决办法</strong></p>
<p>1.进入编辑模式</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240429173139767.png" alt="image-20240429173139767"></p>
<p>2.#在linux16行的末尾输入,然后按下   Ctrl+X   组合键来运行修改过的内核程序</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240429175105690.png" alt="image-20240429175105690"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240429180423234.png" alt="image-20240429180423234"></p>
<p>exit退出，reboot重启</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.重新挂载/sysroot目录</span></span><br><span class="line">mount -o rw,remount /sysroot</span><br><span class="line"><span class="comment"># 2.获取root权限</span></span><br><span class="line"><span class="built_in">chroot</span> /sysroot</span><br><span class="line"><span class="comment"># 3.修改密码</span></span><br><span class="line">passwd root</span><br><span class="line"><span class="comment"># 4.修改运行级别</span></span><br><span class="line">systemctl set-default multi-user.target</span><br><span class="line"><span class="comment"># 5.退出</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"><span class="comment"># 6.重启</span></span><br><span class="line">reboot</span><br><span class="line"><span class="comment">## 关闭selinux</span></span><br><span class="line"><span class="comment"># 临时关闭</span></span><br><span class="line">[root@yum_repo ~]# setenforce 0</span><br><span class="line"><span class="comment"># 永久关闭（重启系统生效）</span></span><br><span class="line">[root@yum_repo ~]# vi /etc/sysconfig/selinux</span><br><span class="line">SELINUX=disabled</span><br><span class="line"><span class="comment">## 两种进入单用户方法</span></span><br><span class="line">1）enforcing=0 init=/bin/bash // 修改密码</span><br><span class="line">2）rd.break // 修改运行级别</span><br></pre></td></tr></table></figure>
<h2 id="【2】文件和目录管理">【2】文件和目录管理</h2>
<h3 id="1-目录结构">1.目录结构</h3>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">  几乎所有的计算机操作系统都是使用目录结构组织文件。具体来说就是在一个目录中存放子目录和文件，而在子目录中又会进一步存放子目录和文件，以此类推形成一个树状的文件结构，由于其结构很像一棵树的分支，所以该结构又被称为目录树。</span><br><span class="line">windows：一多根的方式组织文件C:<span class="string">\</span> D:<span class="string">\</span></span><br><span class="line">Linux：以单根的方式组织文件 /</span><br></pre></td></tr></table></figure>
<p><strong>目录层次的标准FHS</strong></p>
<figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">FHS全称（<span class="keyword">File</span><span class="params">system</span> Hierarchy Standard），中文意思是目录层次标准，是Linux的目录规范标准。</span><br><span class="line">FHS定义了两次规范：</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>.“/”目录下的各个目录应该放什么文件数据。</span><br><span class="line"><span class="number">2</span>.针对/usr 和 /<span class="keyword">var</span> 这两个目录的子目录来定义。</span><br></pre></td></tr></table></figure>
<blockquote>
<p>bin -&gt; usr/bin   这个是usr/bin的快捷方式</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">-rw-r--r--.   1 root root    0 Mar 28 11:29 1.txt</span><br><span class="line">lrwxrwxrwx.   1 root root    7 Mar 27 12:07 bin -&gt; usr/bin</span><br><span class="line">dr-xr-xr-x.   5 root root 4096 Mar 27 12:11 boot</span><br><span class="line">-开头的是文件</span><br><span class="line">l开头的是快捷方式   -&gt;</span><br><span class="line">dr开头的是文件夹</span><br><span class="line"><span class="comment">## /目录下</span></span><br><span class="line"><span class="comment">###系统命令</span></span><br><span class="line">bin -&gt; usr/bin 			<span class="comment"># 存放系统命令（普通用户可以执行）</span></span><br><span class="line">sbin -&gt; usr/sbin 		<span class="comment"># 存放系统命令（大部分命令只能超级用户执行）</span></span><br><span class="line"><span class="comment">#系统库文件目录</span></span><br><span class="line">lib -&gt; usr/lib 			<span class="comment"># 库文件（操作系统需要用到的组件 插件...）</span></span><br><span class="line">lib64 -&gt; usr/lib64 		<span class="comment"># 库文件（64位操作系统库文件）</span></span><br><span class="line"><span class="comment"># 系统启动时文件目录</span></span><br><span class="line">boot 				   <span class="comment"># 存放系统启动文件</span></span><br><span class="line"><span class="comment">#空文件夹</span></span><br><span class="line">media				   <span class="comment"># 媒体库目录（可以存放视频，图片...）      //媒体库 存放视频，图片，音乐</span></span><br><span class="line">mnt 	 			   <span class="comment"># mount 如果有U盘 光驱以外的设备，挂载目录     //挂载目录   mount </span></span><br><span class="line"><span class="comment">#临时挂载的文件系统。比如cdrom,u盘等，直接插入光驱无法使用，要先挂载后使用  /dev/cdrom /mnt</span></span><br><span class="line"></span><br><span class="line">opt 			  	   <span class="comment"># 存放第三方应用安装包的目录</span></span><br><span class="line">srv 				   <span class="comment"># 网站数据存放目录</span></span><br><span class="line"></span><br><span class="line">*****重点*****</span><br><span class="line">1）root 				   <span class="comment"># 超级用户root的家目录</span></span><br><span class="line">2）home 				   <span class="comment"># 普通用户的家目录</span></span><br><span class="line">3）run 				   <span class="comment"># 存放系统中运行的所有进程PID文件(#系统启动后, 运行的程序产生的运行时数据, 包括进程的pid文件,锁文件等)</span></span><br><span class="line">4）sys 				   <span class="comment"># 操作系统相关文件存放目录</span></span><br><span class="line">5)tmp			 	  	   <span class="comment"># 所有用户都可以操作的目录（回收站）存放临时文件, 一般存放超过10天以上都会自动删除,可以更改删除临时文件的期限</span></span><br><span class="line">6)usr					   <span class="comment"># 用户文件存放目录</span></span><br><span class="line"> <span class="comment">#默认软件都会存于该目录下。用于存储只读用户数据的第二层次；包含绝大多数的(多)用户工具和应用程序。</span></span><br><span class="line">7)dev 				   <span class="comment"># 设备文件</span></span><br><span class="line">8)etc 				   <span class="comment"># 系统配置文件 .conf .cfg .configure .cnf 以及常用配置文件</span></span><br><span class="line">9)proc 				   <span class="comment"># 系统信息都存放这目录下（硬件信息，进程信息 变化信息)</span></span><br><span class="line">10)var 				   <span class="comment"># 存放一些系统中变量文件，和一些不断发生变化的可变文件</span></span><br></pre></td></tr></table></figure>
<h4 id="①-dev目录">① /dev目录</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/dev/sda 	<span class="comment"># 系统中的第一块硬盘</span></span><br><span class="line">/dev/sda1 	<span class="comment"># 系统中的第一块硬盘的第一个分区</span></span><br><span class="line">/dev/sda2 	<span class="comment"># 系统中的第一块硬盘的第二个分区</span></span><br><span class="line">/dev/sdb 	<span class="comment"># 系统中的第二块硬盘</span></span><br><span class="line">/dev/random 	<span class="comment"># 生成随机数的</span></span><br><span class="line">/dev/null 	<span class="comment"># 黑洞，将终端上输出的内容，放入黑洞</span></span><br><span class="line">/dev/cdrom 	<span class="comment"># 光驱</span></span><br><span class="line">/dev/pts/&#123;0 1 2 3&#125; 	<span class="comment"># 连接服务器的虚拟终端设备</span></span><br></pre></td></tr></table></figure>
<h4 id="②-etc目录">② /etc目录</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/etc/hosts <span class="comment"># 本地DNS解析文件      ip 域名</span></span><br><span class="line">/etc/passwd <span class="comment"># 存放用户信息文件</span></span><br><span class="line">/etc/sysconfig/network-scripts/ifcfg-网卡名 <span class="comment"># 网卡配置文件</span></span><br><span class="line">/etc/hostname <span class="comment"># 主机名配置文件</span></span><br><span class="line">/etc/resolv.conf <span class="comment"># DNS配置文件</span></span><br></pre></td></tr></table></figure>
<h4 id="③-etc其它目录-了解">③ /etc其它目录     *了解</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/etc/opt/       <span class="comment">#/opt/的配置文件</span></span><br><span class="line">/etc/X11/       <span class="comment">#X_Window系统(版本11)的配置文件</span></span><br><span class="line">/etc/sgml/      <span class="comment">#SGML的配置文件</span></span><br><span class="line">/etc/xml/       <span class="comment">#XML的配置文件</span></span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240328131046094.png" alt="image-20240328131046094"></p>
<h4 id="④-proc和-var目录">④ /proc和/var目录</h4>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/proc/m</span>eminfo <span class="comment"># 内存信息</span></span><br><span class="line"><span class="regexp">/proc/</span>cpuinfo <span class="comment"># CPU信息</span></span><br><span class="line">在Linux中，对应Procfs格式挂载。该目录下文件只能看不能改（包括root）</span><br></pre></td></tr></table></figure>
<p><strong>/var目录</strong></p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/var/<span class="built_in">log</span>/messages <span class="meta"># 系统日志</span></span><br><span class="line">/var/<span class="built_in">log</span>/secure <span class="meta"># 系统登录日志</span></span><br><span class="line"><span class="meta">#变量文件——在正常运行的系统中其内容不断变化的文件，如日志，脱机文件和临时电子邮件文件。有时是一个单独的分区。如果不单独分区，有可能会把整个分区充满。如果单独分区，给大给小都不合适。</span></span><br></pre></td></tr></table></figure>
<p><strong>文件的路径定位</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240328131213563.png" alt="image-20240328131213563"></p>
<p><strong>特殊目录’.’ 和’…’</strong></p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">.. </span>：当前目录的上一级目录</span><br><span class="line"><span class="bullet">. </span>：当前目录</span><br></pre></td></tr></table></figure>
<h4 id="⑤-其它目录">⑤ 其它目录</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/lost+found     <span class="comment">#在ext3文件系统中，当系统意外崩溃或机器意外关机，会产生一些文件碎片在这里。当系统在开机启动的过程中fsck工具会检查这里，并修复已经损坏的文件系统。当系统发生问题。可能会有文件被移动到这个目录中，可能需要用手工的方式来修复，或移到文件到原来的位置上。</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## /etc/目录</span></span><br><span class="line"></span><br><span class="line">/etc/rc /etc/rc.d   ***** <span class="comment">#/etc/rc*.d 启动、或改变运行级时运行的scripts或scripts的目录.</span></span><br><span class="line">/etc/hosts          ***** <span class="comment">#本地域名解析文件</span></span><br><span class="line">/etc/sysconfig/network  ***** <span class="comment">#IP、掩码、网关、主机名配置</span></span><br><span class="line">/etc/resolv.conf    ***** <span class="comment">#DNS服务器配置</span></span><br><span class="line">/etc/fstab          ***** <span class="comment">#开机自动挂载系统，所有分区开机都会自动挂载</span></span><br><span class="line">/etc/inittab        ***** <span class="comment">#设定系统启动时Init进程将把系统设置成什么样的runlevel及加载相关的启动文件配置</span></span><br><span class="line">/etc/exports        ***** <span class="comment">#设置NFS系统用的配置文件路径</span></span><br><span class="line">/etc/init.d/        ***** <span class="comment">#这个目录来存放系统启动脚本</span></span><br><span class="line">/etc/profile        ***** <span class="comment">#全局系统环境配置变量</span></span><br><span class="line">/etc/csh.login,  /etc/csh.cshrc</span><br><span class="line">/etc/issue          ***** <span class="comment">#认证前的输出信息，默认输出版本内核信息</span></span><br><span class="line">/etc/motd           <span class="comment">#设置认证后的输出信息</span></span><br><span class="line">/etc/mtab           <span class="comment">#当前安装的文件系统列表.由scripts初始化，并由mount 命令自动更新.需要一个当前安装的文件系统的列表时使用，例如df 命令</span></span><br><span class="line">/etc/group          ***** <span class="comment">#类似/etc/passwd ，但说明的不是用户而是组.</span></span><br><span class="line">/etc/passwd         ***** <span class="comment">#用户数据库，其中的域给出了用户名、真实姓名、家目录、加密的口令和用户的其他信息.</span></span><br><span class="line">/etc/shadow         ****** <span class="comment">#在安装了影子口令软件的系统上的影子口令文件.影子口令文件将/etc/passwd 文件中的加密口令移动到/etc/shadow 中，而后者只对root可读.这使破译口令更困难.</span></span><br><span class="line">/etc/sudoers        ***** <span class="comment">#可以sudo命令的配置文件</span></span><br><span class="line">/etc/syslog.conf    ***** <span class="comment">#系统日志参数配置</span></span><br><span class="line">/etc/login.defs     <span class="comment">#设置用户帐号限制的文件</span></span><br><span class="line">/etc/securetty      <span class="comment">#确认安全终端，即哪个终端允许root登录.一般只列出虚拟控制台，这样就不可能(至少很困难)通过modem或网络闯入系统并得到超级用户特权.</span></span><br><span class="line">/etc/printca        <span class="comment">#类似/etc/termcap ，但针对打印机.语法不同.</span></span><br><span class="line">/etc/shells         <span class="comment">#列出可信任的shell.chsh 命令允许用户在本文件指定范围内改变登录shell.提供一台机器FTP服务的服务进程ftpd 检查用户shell是否列在 /etc/shells 文件中，如果不是将不允许该用户登录.</span></span><br><span class="line">/etc/xinetd.d       <span class="comment">#如果服务器是通过xinetd模式运行的，它的脚本要放在这个目录下。有些系统没有这个目录，比如Slackware，有些老的版本也没有。在Redhat Fedora中比较新的版本中存在。</span></span><br><span class="line">/etc/opt/           <span class="comment">#/opt/的配置文件</span></span><br><span class="line">/etc/X11/           <span class="comment">#X_Window系统(版本11)的配置文件</span></span><br><span class="line">/etc/sgml/          <span class="comment">#SGML的配置文件</span></span><br><span class="line">/etc/xml/           <span class="comment">#XML的配置文件</span></span><br><span class="line">/etc/skel/          ***** <span class="comment">#默认创建用户时，把该目录拷贝到家目录下</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##usr/目录</span></span><br><span class="line"></span><br><span class="line">/usr/X11R6          <span class="comment">#存放X-Windows的目录；</span></span><br><span class="line">/usr/games          <span class="comment">#存放着XteamLinux自带的小游戏；</span></span><br><span class="line">/usr/doc            <span class="comment">#Linux技术文档；</span></span><br><span class="line">/usr/include        <span class="comment">#用来存放Linux下开发和编译应用程序所需要的头文件；</span></span><br><span class="line">/usr/lib            <span class="comment">#存放一些常用的动态链接共享库和静态档案库；</span></span><br><span class="line">/usr/man            <span class="comment">#帮助文档所在的目录；</span></span><br><span class="line">/usr/src            <span class="comment">#Linux开放的源代码，就存在这个目录，爱好者们别放过哦；</span></span><br><span class="line">/usr/bin/           <span class="comment">#非必要可执行文件 (在单用户模式中不需要)；面向所有用户。</span></span><br><span class="line">/usr/lib/           <span class="comment">#/usr/bin/和/usr/sbin/中二进制文件的库。</span></span><br><span class="line">/usr/sbin/          <span class="comment">#非必要的系统二进制文件，例如：大量网络服务的守护进程。</span></span><br><span class="line">/usr/share/         <span class="comment">#体系结构无关（共享）数据。</span></span><br><span class="line">/usr/src/           <span class="comment">#源代码,例如:内核源代码及其头文件。</span></span><br><span class="line">/usr/X11R6/         <span class="comment">#X Window系统版本 11, Release 6.</span></span><br><span class="line">/usr/local/         <span class="comment">#本地数据的第三层次，具体到本台主机。通常而言有进一步的子目录，例如：bin/、lib/、share/.这是提供给一般用户的/usr目录，在这里安装一般的应用软件；</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## /var/目录  </span></span><br><span class="line"></span><br><span class="line">/var/log/message            ***** <span class="comment">#系统日志信息，按周自动轮询</span></span><br><span class="line">/var/spool/cron/root        ***** <span class="comment">#定时器配置文件目录，默认按用户命名</span></span><br><span class="line">/var/log/secure             ***** <span class="comment">#记录登陆系统存取信息的文件，不管认证成功还是认证失败都会记录</span></span><br><span class="line">/var/log/wtmp               <span class="comment">#记录登陆者信息的文件，last,who,w命令信息来源于此</span></span><br><span class="line">/var/spool/clientmqueue/    <span class="comment">#当邮件服务未开启时，所有应发给系统管理员的邮件都将堆放在此</span></span><br><span class="line">/var/spool/mail/            <span class="comment">#邮件目录</span></span><br><span class="line">/var/tmp                    <span class="comment">#比/tmp 允许的大或需要存在较长时间的临时文件. (虽然系统管理员可能不允许/var/tmp 有很旧的文件.)</span></span><br><span class="line">/var/lib                    <span class="comment">#系统正常运行时要改变的文件.  </span></span><br><span class="line">/var/local                  <span class="comment">#/usr/local 中安装的程序的可变数据(即系统管理员安装的程序).注意，如果必要，即使本地安装的程序也会使用其他/var 目录，例如/var/lock .  </span></span><br><span class="line">/var/lock                   <span class="comment">#锁定文件.许多程序遵循在/var/lock 中产生一个锁定文件的约定，以支持他们正在使用某个特定的设备或文件.其他程序注意到这个锁定文件，将不试图使用这个设备或文件.</span></span><br><span class="line">/var/log/                   ***** <span class="comment">#各种程序的Log文件，特别是login   (/var/log/wtmp log所有到系统的登录和注销) 和syslog (/var/log/messages 里存储所有核心和系统程序信息. /var/log 里的文件经常不确定地增长，应该定期清除.  </span></span><br><span class="line">/var/run                    <span class="comment">#保存到下次引导前有效的关于系统的信息文件.例如， /var/run/utmp 包含当前登录的用户的信息.</span></span><br><span class="line">/var/cache/                 <span class="comment">#应用程序缓存数据。这些数据是在本地生成的一个耗时的I/O或计算结果。应用程序必须能够再生或恢复数据。缓存的文件可以被删除而不导致数据丢失。</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## /proc/目录</span></span><br><span class="line"></span><br><span class="line">/proc/meminfo           ***** <span class="comment">#查看内存信息</span></span><br><span class="line">/proc/loadavg           ***** <span class="comment">#还记得 top 以及 uptime 吧？没错！上头的三个平均数值就是记录在此！</span></span><br><span class="line">/proc/uptime            ***** <span class="comment">#就是用 uptime 的时候，会出现的资讯啦！</span></span><br><span class="line">/proc/cpuinfo           ***** <span class="comment">#关于处理器的信息，如类型、厂家、型号和性能等。</span></span><br><span class="line">/proc/cmdline           <span class="comment">#加载 kernel 时所下达的相关参数！查阅此文件，可了解系统是如何启动的！</span></span><br><span class="line">/proc/filesystems       <span class="comment">#目前系统已经加载的文件系统罗！</span></span><br><span class="line">/proc/interrupts        <span class="comment">#目前系统上面的 IRQ 分配状态。</span></span><br><span class="line">/proc/ioports           <span class="comment">#目前系统上面各个装置所配置的 I/O 位址。</span></span><br><span class="line">/proc/kcore             <span class="comment">#这个就是内存的大小啦！好大对吧！但是不要读他啦！</span></span><br><span class="line">/proc/modules           <span class="comment">#目前我们的 Linux 已经加载的模块列表，也可以想成是驱动程序啦！</span></span><br><span class="line">/proc/mounts            <span class="comment">#系统已经挂载的数据，就是用 mount 这个命令呼叫出来的数据啦！</span></span><br><span class="line">/proc/swaps             <span class="comment">#到底系统挂加载的内存在哪里？呵呵！使用掉的 partition 就记录在此啦！</span></span><br><span class="line">/proc/partitions        <span class="comment">#使用 fdisk -l 会出现目前所有的 partition 吧？在这个文件当中也有纪录喔！</span></span><br><span class="line">/proc/pci               <span class="comment">#在 PCI 汇流排上面，每个装置的详细情况！可用 lspci 来查阅！</span></span><br><span class="line">/proc/version           <span class="comment">#核心的版本，就是用 uname -a 显示的内容啦！</span></span><br><span class="line">/proc/bus/*             <span class="comment">#一些汇流排的装置，还有 U盘的装置也记录在此喔！</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#/dev/目录·</span></span><br><span class="line"></span><br><span class="line">/dev/hd[a-t]            <span class="comment">#IDE设备</span></span><br><span class="line">/dev/sd[a-z]            <span class="comment">#SCSI设备</span></span><br><span class="line">/dev/fd[0-7]            <span class="comment">#标准软驱</span></span><br><span class="line">/dev/md[0-31]           <span class="comment">#软raid设备</span></span><br><span class="line">/dev/loop[0-7]          <span class="comment">#本地回环设备</span></span><br><span class="line">/dev/ram[0-15]          <span class="comment">#内存</span></span><br><span class="line">/dev/null               <span class="comment">#无限数据接收设备,相当于黑洞</span></span><br><span class="line">/dev/zero               <span class="comment">#无限零资源</span></span><br><span class="line">/dev/tty[0-63]          <span class="comment">#虚拟终端</span></span><br><span class="line">/dev/ttyS[0-3]          <span class="comment">#串口</span></span><br><span class="line">/dev/lp[0-3]            <span class="comment">#并口</span></span><br><span class="line">/dev/console            <span class="comment">#控制台</span></span><br><span class="line">/dev/fb[0-31]           <span class="comment">#framebuffer</span></span><br><span class="line">/dev/cdrom              <span class="comment">#=&gt; /dev/hdc</span></span><br><span class="line">/dev/modem              <span class="comment">#=&gt; /dev/ttyS[0-9]</span></span><br><span class="line">/dev/pilot              <span class="comment">#=&gt; /dev/ttyS[0-9]</span></span><br><span class="line">/dev/random             <span class="comment">#随机数设备</span></span><br><span class="line">/dev/urandom            <span class="comment">#随机数设备</span></span><br></pre></td></tr></table></figure>
<h3 id="2-查看相关命令">2.查看相关命令</h3>
<h4 id="①-cat">① cat</h4>
<table>
<thead>
<tr>
<th>选项</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>-n</td>
<td>显示行号</td>
</tr>
<tr>
<td>-T</td>
<td>用来区分文件中是否有制表符</td>
</tr>
<tr>
<td>-E</td>
<td>判断文件中内容每一行结束位置</td>
</tr>
<tr>
<td>-A</td>
<td>相当于-E -T</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 语法</span></span><br><span class="line"><span class="built_in">cat</span> [选项]... [文件]...</span><br><span class="line"><span class="built_in">cat</span> [OPTION]... [FILE]...</span><br><span class="line"><span class="comment">## 查看/etc/passwd文件内容</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> /etc/passwd</span><br><span class="line"><span class="comment">## 查看多个文件内容</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> 1.txt 2.txt</span><br><span class="line">123</span><br><span class="line">abc</span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> 2.txt 1.txt</span><br><span class="line">abc</span><br><span class="line">123</span><br><span class="line"><span class="comment">## 标准输出：当执行一个命令后，命令执行正确，所产生的结果（在终端上能看到的输出结果）</span></span><br><span class="line">OOM： out of memory 内存溢出</span><br><span class="line">OOM killer</span><br><span class="line"><span class="comment">## -n：显示行号</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> -n /etc/passwd</span><br><span class="line">1 root:x:0:0:root:/root:/bin/bash</span><br><span class="line">2 bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">3 daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">4 adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">5 lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line">6 <span class="built_in">sync</span>:x:5:0:<span class="built_in">sync</span>:/sbin:/bin/sync</span><br><span class="line">7 shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line">8 halt:x:7:0:halt:/sbin:/sbin/halt</span><br><span class="line">9 mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</span><br><span class="line">10 operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line"><span class="comment">## -T：用来区分文件中是否有制表符（一个制表符用^I来表示）</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> -T 1.txt</span><br><span class="line">abc 123 789</span><br><span class="line">qwe^Iwww^I777</span><br><span class="line">a^I^I^I^I</span><br><span class="line">aaaaa</span><br><span class="line">bbbb</span><br><span class="line"><span class="comment">## -E：判断文件中内容每一行结束位置（查看是否有多余的空格）结尾用$表示</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> -E 1.txt</span><br><span class="line">abc 123 789$</span><br><span class="line">$</span><br><span class="line">qwe www 777 $</span><br><span class="line">aaaa$</span><br><span class="line">$</span><br><span class="line">$</span><br><span class="line"><span class="comment">## -A：相当于-E -T</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> -A 1.txt</span><br><span class="line">abc 123 789$</span><br><span class="line">$</span><br><span class="line">qwe^Iwww^I777 $</span><br><span class="line">aaaa$</span><br><span class="line">$</span><br><span class="line">Tab 制表符</span><br><span class="line">回车 换行符</span><br><span class="line"><span class="comment">## 往文件中写入内容</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> &gt;&gt; suibian.txt &lt;&lt;<span class="string">EOF(不一定是Eof，起到终止作用)</span></span><br><span class="line"><span class="string">但使龙城free将在</span></span><br><span class="line"><span class="string">xxx</span></span><br><span class="line"><span class="string">aaa</span></span><br><span class="line"><span class="string">ccc</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> &gt;&gt; gushi.txt &lt;&lt;<span class="string">zls （这里就不一定是Eof）</span></span><br><span class="line"><span class="string">&gt; 1111</span></span><br><span class="line"><span class="string">&gt; 2222</span></span><br><span class="line"><span class="string">&gt; 3333</span></span><br><span class="line"><span class="string">&gt; zls</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> &gt; 1.txt &lt;&lt;<span class="string">EOF	#一个 &gt; 是写入新内容并覆盖</span></span><br><span class="line"><span class="string">&gt; abc</span></span><br><span class="line"><span class="string">&gt; EOF</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> 1.txt</span><br><span class="line">abc</span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> &gt;&gt; 1.txt &lt;&lt;<span class="string">EOF  #两个&gt;&gt;是追加内容不覆盖</span></span><br><span class="line"><span class="string">&gt; 123</span></span><br><span class="line"><span class="string">&gt; 456</span></span><br><span class="line"><span class="string">&gt; EOF</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> 1.txt</span><br><span class="line">abc</span><br><span class="line">123</span><br><span class="line">456</span><br></pre></td></tr></table></figure>
<h4 id="②-tail-head">② tail &amp; head</h4>
<p><strong>==tail==</strong></p>
<table>
<thead>
<tr>
<th>选项</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>-n</td>
<td>指定查看多少行 number</td>
</tr>
<tr>
<td>-f</td>
<td>follow 跟随，跟踪文件末尾</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 默认情况下tail查看一个文件的后10行内容</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">tail</span> /etc/passwd</span><br><span class="line">ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin</span><br><span class="line">nobody:x:99:99:Nobody:/:/sbin/nologin</span><br><span class="line">systemd-network:x:192:192:systemd Network Management:/:/sbin/nologin</span><br><span class="line">dbus:x:81:81:System message bus:/:/sbin/nologin</span><br><span class="line">polkitd:x:999:998:User <span class="keyword">for</span> polkitd:/:/sbin/nologin</span><br><span class="line">sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin</span><br><span class="line">postfix:x:89:89::/var/spool/postfix:/sbin/nologin</span><br><span class="line">zls1:x:1000:1000::/home/zls1:/bin/bash</span><br><span class="line">apache:x:48:48:Apache:/usr/share/httpd:/sbin/nologin</span><br><span class="line">zls100:x:1001:1001::/home/zls100:/bin/bash</span><br><span class="line"><span class="comment">## 查看指定行数</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">tail</span> -n2 /etc/passwd</span><br><span class="line">apache:x:48:48:Apache:/usr/share/httpd:/sbin/nologin</span><br><span class="line">zls100:x:1001:1001::/home/zls100:/bin/bash</span><br><span class="line">[root@localhost ~]# <span class="built_in">tail</span> -2 /etc/passwd</span><br><span class="line">apache:x:48:48:Apache:/usr/share/httpd:/sbin/nologin</span><br><span class="line">zls100:x:1001:1001::/home/zls100:/bin/bash</span><br><span class="line"><span class="comment">## 实时追踪日志文件末尾tail -f == tailf</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">tail</span> -f 1.txt</span><br><span class="line">可以查看实时更新的日</span><br></pre></td></tr></table></figure>
<p><strong>==head==</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#选项：-n</span></span><br><span class="line">作用：指定查看多少行 number</span><br><span class="line"><span class="comment">## 默认情况下head查看一个文件的前10行内容</span></span><br><span class="line"></span><br><span class="line">[root@localhost ~]# <span class="built_in">head</span> /etc/passwd</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"><span class="built_in">sync</span>:x:5:0:<span class="built_in">sync</span>:/sbin:/bin/sync</span><br><span class="line">shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line">halt:x:7:0:halt:/sbin:/sbin/halt</span><br><span class="line">mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</span><br><span class="line">operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line"><span class="comment">## 查看指定行数	-n3/-n 3/-3都可以查看前三行内容  n也可省略</span></span><br><span class="line"></span><br><span class="line">[root@localhost ~]# <span class="built_in">head</span> -n3 /etc/passwd</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">[root@localhost ~]# <span class="built_in">head</span> -n 3 /etc/passwd</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# <span class="built_in">head</span> -3 /etc/passwd</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br></pre></td></tr></table></figure>
<h4 id="③-more-less">③ more &amp; less</h4>
<p><strong>==more==</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@db04 ~]# more /etc/services</span><br></pre></td></tr></table></figure>
<p><strong>==less==</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@db04 ~]# less /etc/services</span><br><span class="line"><span class="comment">#显示行号，缺陷：文件内容过多不能显示最后一行的内容，需要使用翻页键PageDown向后翻</span></span><br><span class="line">[root@db04 ~]# less -N /etc/services</span><br></pre></td></tr></table></figure>
<h4 id="④-grep">④ grep</h4>
<table>
<thead>
<tr>
<th>选项</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>-n</td>
<td>显示行号</td>
</tr>
<tr>
<td>-A</td>
<td>After 过滤关键字并打印出后N行</td>
</tr>
<tr>
<td>-B</td>
<td>Before 过滤关键字并打印出前N行</td>
</tr>
<tr>
<td>-C</td>
<td>Center 过滤关键字并打印出前后N行</td>
</tr>
<tr>
<td>-v</td>
<td>取反</td>
</tr>
<tr>
<td>-o</td>
<td>只显示关键字内容</td>
</tr>
<tr>
<td>-i</td>
<td>忽略大小写</td>
</tr>
<tr>
<td>-w</td>
<td>精确匹配,显示匹配的这一行</td>
</tr>
<tr>
<td>-c</td>
<td>相当于count，用于统计行数</td>
</tr>
<tr>
<td>-r/-R</td>
<td>递归搜索目录及目录下得文件</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>关键字可以使用的符号</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>^</td>
<td>以…开头</td>
</tr>
<tr>
<td>$</td>
<td>以…结尾     ^$可以表示空行</td>
</tr>
<tr>
<td>.</td>
<td>任意一个字符</td>
</tr>
<tr>
<td>*</td>
<td>*号前面的单个字符匹配0次或多次</td>
</tr>
<tr>
<td>|</td>
<td>正则表达式里面或者意思，grep默认不支持正则表达式，需要用-E</td>
</tr>
<tr>
<td>\b</td>
<td>边界符</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 语法：</span></span><br><span class="line">grep [选项]... <span class="string">&#x27;关键字&#x27;</span> [文件名]...</span><br><span class="line"></span><br><span class="line"><span class="comment">## 过滤关键字</span></span><br><span class="line">[root@localhost ~]# grep <span class="string">&#x27;风景&#x27;</span> zls.txt</span><br><span class="line">江山风景美如画，</span><br><span class="line"></span><br><span class="line"><span class="comment">## 过滤关键字并显示行号</span></span><br><span class="line">[root@localhost ~]# grep -n <span class="string">&#x27;root&#x27;</span> /etc/passwd</span><br><span class="line">1:root:x:0:0:root:/root:/bin/bash</span><br><span class="line">10:operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> zls.txt</span><br><span class="line">卧槽</span><br><span class="line">作者：曾老湿</span><br><span class="line">江山风景美如画，</span><br><span class="line">本想吟诗赠天下。</span><br><span class="line">奈何自己没文化，</span><br><span class="line">一句卧槽风好大。</span><br><span class="line">就这么地吧。</span><br><span class="line">谢谢大家。</span><br><span class="line">一二三四五六七，</span><br><span class="line">七六五四三二一。</span><br><span class="line"></span><br><span class="line"><span class="comment">## 过滤出zls.txt文件中 包含一的行</span></span><br><span class="line">[root@localhost ~]#grep <span class="string">&#x27;一&#x27;</span> zls.txt</span><br><span class="line">一句卧槽风好大。</span><br><span class="line">一二三四五六七，</span><br><span class="line">七六五四三二一。</span><br><span class="line"></span><br><span class="line"><span class="comment">## 过滤出zls.txt文件中以一开头的行</span></span><br><span class="line">[root@localhost ~]#grep <span class="string">&#x27;^一&#x27;</span> zls.txtt</span><br><span class="line">一句卧槽风好大。</span><br><span class="line">一二三四五六七，</span><br><span class="line"></span><br><span class="line"><span class="comment">## 过滤出zls.txt文件中以一开头的行，并显示行号</span></span><br><span class="line">[root@localhost ~]# grep -n <span class="string">&#x27;^一&#x27;</span> zls.txt</span><br><span class="line">6:一句卧槽风好大。</span><br><span class="line">9:一二三四五六七，</span><br><span class="line"></span><br><span class="line"><span class="comment">## 过滤出/etc/passwd文件中，以login结尾的行</span></span><br><span class="line">[root@localhost ~]# grep <span class="string">&#x27;login$&#x27;</span> /etc/passwd</span><br><span class="line"></span><br><span class="line"><span class="comment">## 过滤出mail关键字所在行及后两行内容</span></span><br><span class="line">[root@localhost ~]# grep <span class="string">&#x27;mail&#x27;</span> -A 2 /etc/passwd</span><br><span class="line">mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</span><br><span class="line">operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line">games:x:12:100:games:/usr/games:/sbin/nologin</span><br><span class="line"></span><br><span class="line"><span class="comment">## 过滤出mail关键字所在行及前两行内容</span></span><br><span class="line">[root@localhost ~]# grep -B 2 <span class="string">&#x27;mail&#x27;</span> /etc/passwd</span><br><span class="line">shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line">halt:x:7:0:halt:/sbin:/sbin/halt</span><br><span class="line">mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</span><br><span class="line"></span><br><span class="line"><span class="comment">## 过滤出mail关键字所在行及前两行内容和后三行内容</span></span><br><span class="line">[root@localhost ~]# grep -A3 -B2 <span class="string">&#x27;mail&#x27;</span> /etc/passwd</span><br><span class="line">shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line">halt:x:7:0:halt:/sbin:/sbin/halt</span><br><span class="line">mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</span><br><span class="line">operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line">games:x:12:100:games:/usr/games:/sbin/nologin</span><br><span class="line">ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin</span><br><span class="line"></span><br><span class="line"><span class="comment">## ## 过滤出mail关键字所在行及前两行内容和后两行内容</span></span><br><span class="line">[root@localhost ~]# grep -C2 <span class="string">&#x27;mail&#x27;</span> /etc/passwd</span><br><span class="line">shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line">halt:x:7:0:halt:/sbin:/sbin/halt</span><br><span class="line">mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</span><br><span class="line">operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line">games:x:12:100:games:/usr/games:/sbin/nologin</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="⑤-ls">⑤ ls</h4>
<table>
<thead>
<tr>
<th>选项</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>-l</td>
<td>查看目录下文件的名字和详细信息</td>
</tr>
<tr>
<td>-a</td>
<td>查看目录下所有文件包括隐藏文件</td>
</tr>
<tr>
<td>-h（一般配合-l使用）</td>
<td>以人类可读的方式查看文件详细信息</td>
</tr>
<tr>
<td>-t（一般配合-l使用）</td>
<td>按照文件修改日期排序，最新的在最上面</td>
</tr>
<tr>
<td>-r（一般配合-l使用）</td>
<td>reverse翻转（倒叙排序）</td>
</tr>
<tr>
<td>-d（一般配合-l使用）</td>
<td>只查看目录本身信息不查看文件</td>
</tr>
<tr>
<td>-i（一般配合-l使用）</td>
<td>显示inode号</td>
</tr>
<tr>
<td>-S(一般配合-l使用)</td>
<td>依据内容大小将文件排序显示</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">list <span class="comment">#列表</span></span><br><span class="line"><span class="comment">##  查看当前目录下所有文件名(不包含隐藏文件)</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">ls</span></span><br><span class="line">anaconda-ks.cfg  ip_host.sh  ip_host.sh~</span><br><span class="line"><span class="comment">##查看当前目录下所有文件的名和详细信息(不包含隐藏文件)</span></span><br><span class="line">-l use a long listing format 使用一个长的列表格式</span><br><span class="line">[root@lb02 ~]# <span class="built_in">ls</span> -l</span><br><span class="line">total 12</span><br><span class="line">-rw-------. 1 root root 1447 Mar 27 12:11 anaconda-ks.cfg</span><br><span class="line">-rw-r--r--. 1 root root  377 Mar 27 23:50 ip_host.sh</span><br><span class="line">-rw-r--r--. 1 root root  366 Mar 27 23:33 ip_host.sh~</span><br><span class="line"></span><br><span class="line">[root@lb02 ~]# ll</span><br><span class="line">total 12</span><br><span class="line">-rw-------. 1 root root 1447 Mar 27 12:11 anaconda-ks.cfg</span><br><span class="line">-rw-r--r--. 1 root root  377 Mar 27 23:50 ip_host.sh</span><br><span class="line">-rw-r--r--. 1 root root  366 Mar 27 23:33 ip_host.sh~</span><br><span class="line"></span><br><span class="line"><span class="comment">## 查看指定目录下的所有文件详细信息（不包含隐藏文件）</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">ls</span> -l /etc/sysconfig/</span><br><span class="line">total 84</span><br><span class="line">-rw-r--r--. 1 root root  379 Mar 27 12:11 anaconda</span><br><span class="line">-rw-r--r--. 1 root root  483 Mar 27 12:10 authconfig</span><br><span class="line">drwxr-xr-x. 2 root root   43 Mar 27 12:07 cbq</span><br><span class="line">drwxr-xr-x. 2 root root    6 Oct 31  2018 console</span><br><span class="line"></span><br><span class="line"><span class="comment">#在linux中，隐藏文件名字以&#x27;.&#x27;开头</span></span><br><span class="line"><span class="comment">## 查看所有文件包括隐藏文件（多个选项可以合并执行）</span></span><br><span class="line">-a，--all <span class="keyword">do</span> not ignore entries starting with . <span class="comment"># 不忽略以点开头的文件</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">ls</span> -l -a   或者[root@lb02 ~]# <span class="built_in">ls</span> -la/ls -al</span><br><span class="line">[root@lb02 ~]# <span class="built_in">ls</span> -l -a</span><br><span class="line">total 48</span><br><span class="line">dr-xr-x---.  2 root root   195 Mar 27 23:50 .</span><br><span class="line">dr-xr-xr-x. 17 root root   224 Mar 27 12:10 ..</span><br><span class="line">-rw-------.  1 root root  1447 Mar 27 12:11 anaconda-ks.cfg</span><br><span class="line"></span><br><span class="line"><span class="comment">## 以人类可读的方式查看文件详细信息（大小+单位 配合-l使用）</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">ls</span> -l /etc/sysconfig/ebtables-config </span><br><span class="line">-rw-------. 1 root root 1390 Apr 11  2018 /etc/sysconfig/ebtables-config</span><br><span class="line">[root@lb02 ~]# <span class="built_in">ls</span> -hl /etc/sysconfig/ebtables-config </span><br><span class="line">-rw-------. 1 root root 1.4K Apr 11  2018 /etc/sysconfig/ebtables-config</span><br><span class="line"></span><br><span class="line"><span class="comment">## 按照修改日期排序（最新的在最上面）</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">ls</span> -l    //不排序</span><br><span class="line">total 12</span><br><span class="line">-rw-------. 1 root root 1447 Mar 27 12:11 anaconda-ks.cfg</span><br><span class="line">-rw-r--r--. 1 root root  377 Mar 27 23:50 ip_host.sh</span><br><span class="line">-rw-r--r--. 1 root root  366 Mar 27 23:33 ip_host.sh~</span><br><span class="line">[root@lb02 ~]# <span class="built_in">ls</span> -lt</span><br><span class="line">total 12</span><br><span class="line">-rw-r--r--. 1 root root  377 Mar 27 23:50 ip_host.sh</span><br><span class="line">-rw-r--r--. 1 root root  366 Mar 27 23:33 ip_host.sh~</span><br><span class="line">-rw-------. 1 root root 1447 Mar 27 12:11 anaconda-ks.cfg</span><br><span class="line"></span><br><span class="line"><span class="comment">## 按照修改时间，倒叙排序（最新的在最下面）</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">ls</span> -ltr</span><br><span class="line">total 12</span><br><span class="line">-rw-------. 1 root root 1447 Mar 27 12:11 anaconda-ks.cfg</span><br><span class="line">-rw-r--r--. 1 root root  366 Mar 27 23:33 ip_host.sh~</span><br><span class="line">-rw-r--r--. 1 root root  377 Mar 27 23:50 ip_host.sh</span><br><span class="line"></span><br><span class="line"><span class="comment">## 只查看目录本身，不查看目录下面的所有文件</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">ls</span> -ld /etc/sysconfig</span><br><span class="line">drwxr-xr-x. 6 root root 4096 Mar 27 12:11 /etc/sysconfig</span><br></pre></td></tr></table></figure>
<h4 id="⑥-tree">⑥ tree</h4>
<table>
<thead>
<tr>
<th>选项</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>-L</td>
<td>指定层级显示结构</td>
</tr>
<tr>
<td>-d</td>
<td>只查看目录不查看文件</td>
</tr>
<tr>
<td>-a</td>
<td>显示所有文件和目录包括隐藏文件</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 命令找不到</span></span><br><span class="line">[root@localhost ~]# tree</span><br><span class="line">-bash: tree: <span class="built_in">command</span> not found</span><br><span class="line"><span class="comment">## 安装命令</span></span><br><span class="line">[root@localhost ~]# yum install -y tree</span><br><span class="line"><span class="comment">#tree功能：以树状结构显示文件和目录</span></span><br><span class="line"><span class="comment">## 查看目录结构   </span></span><br><span class="line">[root@lb01 ~]# tree /usr/local/</span><br><span class="line">/usr/local/</span><br><span class="line">├── bin</span><br><span class="line">├── etc</span><br><span class="line">│   ├── applications</span><br><span class="line">│   ├── info</span><br><span class="line">│   └── man</span><br><span class="line">│       ├── man1</span><br><span class="line">│       ├── man1x</span><br><span class="line">│       ├── man2</span><br><span class="line">│       ├── man2x</span><br><span class="line">│       ├── man3</span><br><span class="line">│       ├── man9x</span><br><span class="line">│       └── mann</span><br><span class="line">└── src</span><br><span class="line">32 directories, 0 files</span><br><span class="line"></span><br><span class="line"><span class="comment"># -L：level 查看指定层级的目录结构   如果目录层级太多，可以查看指定几层目录</span></span><br><span class="line">[root@lb01 ~]# tree -L 2 /usr/local/</span><br><span class="line"></span><br><span class="line"><span class="comment">## -d：只查看目录不查看文件，查看指定目录层级的所有目录</span></span><br><span class="line">[root@localhost ~]# tree -L 2 -d /etc/</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="3-增删改操作">3.增删改操作</h3>
<h4 id="①-cp">① cp</h4>
<table>
<thead>
<tr>
<th>选项</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>-r、-R</td>
<td>递归复制目录（包括目录下的所有内容）</td>
</tr>
<tr>
<td>-v</td>
<td>显示复制的详细信息，复制过程</td>
</tr>
<tr>
<td>-p</td>
<td>保持文件属性</td>
</tr>
<tr>
<td>-a</td>
<td>即保持目录属性，又可以递归拷贝目录</td>
</tr>
<tr>
<td>-i</td>
<td>询问 （是否覆盖）</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">copy 复制，拷贝</span><br><span class="line"><span class="comment">#语法</span></span><br><span class="line">1.<span class="built_in">cp</span> [选项]... [-T] 源文件 目标 （备份）</span><br><span class="line">2.<span class="built_in">cp</span> [选项]... 源文件... 目录</span><br><span class="line">3.<span class="built_in">cp</span> [选项]... -t 目录 源文件...</span><br><span class="line"></span><br><span class="line"><span class="comment">## 语法一：cp [选项]... [-T] 源文件 目标 （备份）</span></span><br><span class="line"><span class="built_in">cp</span> [OPTION]... [-T] SOURCE DEST</span><br><span class="line"><span class="comment">## 将saomiao.sh脚本复制到当前目录下并改名为123</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> saomiao.sh 123</span><br><span class="line"><span class="comment">## 将saomiao.sh脚本复制到/opt目录下并改名为abc</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> saomiao.sh /opt/abc</span><br><span class="line"></span><br><span class="line"><span class="comment">## 语法二：cp [选项]... 源文件... 目录</span></span><br><span class="line"><span class="built_in">cp</span> [OPTION]... SOURCE... DIRECTORY</span><br><span class="line"><span class="comment">## 将saomiao.sh脚本复制到/tmp目录下</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> saomiao.sh /tmp/</span><br><span class="line"><span class="comment">## 将saomiao.sh脚本拷贝到/tmp下并改名为2.txt，若2.txt文件已存在会询问，是否要覆盖</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> saomiao.sh /tmp/2.txt</span><br><span class="line"><span class="comment">## 一次性复制多个文件</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> 123 saomiao.sh cheak_student.sh anaconda-ks.cfg /opt/</span><br><span class="line"><span class="comment">## 报错示范</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> 123 saomiao.sh cheak_student.sh anaconda-ks.cfg abc（必须是目录，不能是文件）</span><br><span class="line"><span class="built_in">cp</span>: target ‘abc’ is not a directory</span><br><span class="line"><span class="comment">## 复制目录</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> -r /opt/ /tmp/	将opt目录下所有文件复制到tmp下，包括opt目录</span><br><span class="line"><span class="comment">## 改名</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> -r /opt/ /root/xxx</span><br><span class="line"><span class="comment">## 复制目录下的所有文件，但不复制目录本身</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> -r /opt/* /tmp/</span><br><span class="line"><span class="comment">## 复制多个文件    显示复制过程</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> -rv 123 anaconda-ks.cfg </span><br><span class="line">/tmp/</span><br><span class="line">‘123’ -&gt; ‘/tmp/123’</span><br><span class="line">‘anaconda-ks.cfg’ -&gt; ‘/tmp/anaconda-ks.cfg’</span><br><span class="line"></span><br><span class="line"><span class="comment">## 保持文件属性</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> -rp /home/zls1 /tmp/</span><br><span class="line"><span class="comment">## 语法二：cp [选项]... 源文件... 目录</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> -a /home/zls1 /tmp/</span><br><span class="line">----</span><br><span class="line"><span class="comment">## 语法三：cp [选项]... -t 目录 源文件... (反人类)</span></span><br><span class="line"><span class="built_in">cp</span> [OPTION]... -t DIRECTORY SOURCE...</span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> -t /tmp/ saomiao.sh</span><br><span class="line"></span><br><span class="line"><span class="comment">## 总结：</span></span><br><span class="line">1.当复制的目标不存在时，将源文件复制出来并改名为目标名</span><br><span class="line">2.当复制目标存在时，且是一个目录，则直接将文件复制到指定的目录下（名字不变）</span><br><span class="line">3.当复制目标存在时，且是一个普通文件，则提示是否要覆盖，输入y是覆盖，输入n是不覆盖</span><br><span class="line">4.当复制多个文件时，最后一个必须写已存在的目录，否则会报错</span><br><span class="line">5.<span class="built_in">cp</span>命令默认情况下无法拷贝目录，必须加-r选项，递归复制目录</span><br></pre></td></tr></table></figure>
<h4 id="②-mv">② mv</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">-i	询问（是否要覆盖）</span><br><span class="line">move 移动，剪切</span><br><span class="line">1.<span class="built_in">mv</span> [选项]... [-T] 源文件 目标（重命名）</span><br><span class="line">2.<span class="built_in">mv</span> [选项]... 源文件... 目录</span><br><span class="line">3.<span class="built_in">mv</span> [选项]... -t 目录 源文件... (反人类)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 语法一：mv [选项]... [-T] 源文件 目标（重命名）</span></span><br><span class="line"><span class="built_in">mv</span> [OPTION]... [-T] SOURCE DEST</span><br><span class="line"><span class="comment">## 给saomiao.sh文件改名	内容覆盖并改名，源文件消失</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">mv</span> saomiao.sh zls.sh</span><br><span class="line"><span class="comment">## 语法二：mv [选项]... 源文件... 目录</span></span><br><span class="line"><span class="built_in">mv</span> [OPTION]... SOURCE... DIRECTORY</span><br><span class="line">[root@localhost ~]# <span class="built_in">mv</span> zls.sh /opt/</span><br><span class="line"><span class="comment">## 覆盖文件</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">mv</span> nginx.conf 123</span><br><span class="line"><span class="built_in">mv</span>: overwrite ‘123’? y</span><br><span class="line"><span class="comment">## 移动多个文件    移动文件到当前目录</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">mv</span> /tmp/&#123;123,anaconda,ks.cfg,cheak_student.sh,nginx.conf.bak&#125; .</span><br><span class="line">[root@localhost ~]# ll</span><br><span class="line">total 8</span><br><span class="line">-rw-r--r--. 1 root root 0 Apr 1 19:18 123</span><br><span class="line">-rw-------. 1 root root 1379 Mar 21 20:58 anaconda-ks.cfg</span><br><span class="line">-rw-r--r--. 1 root root 392 Aug 11 2022 cheak_student.sh</span><br><span class="line">-rw-r--r--. 1 root root 0 Apr 1 19:18 nginx.conf.bak</span><br><span class="line"><span class="comment">## 错误演示</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">mv</span> 123 anaconda-ks.cfg cheak_student.sh nginx.conf.bak abc	同<span class="built_in">cp</span>，abc不是目录</span><br><span class="line"><span class="built_in">mv</span>: target ‘abc’ is not a directory</span><br><span class="line"></span><br><span class="line"><span class="comment">## 总结：</span></span><br><span class="line">1.当移动的目标不存在时，将源文件重命名</span><br><span class="line">2.当移动目标存在时，且是一个目录，则直接将文件剪切到指定的目录下（名字不变）</span><br><span class="line">3.当移动目标存在时，且是一个普通文件，则提示是否要覆盖，输入y是覆盖，输入n是不覆盖</span><br><span class="line">4.当移动多个文件时，最后一个必须写已存在的目录，否则会报错</span><br><span class="line"><span class="comment">## 语法三：mv [选项]... -t 目录 源文件... (反人类)</span></span><br><span class="line"><span class="built_in">mv</span> [OPTION]... -t DIRECTORY SOURCE...</span><br></pre></td></tr></table></figure>
<h4 id="③-rm">③ rm</h4>
<table>
<thead>
<tr>
<th>选项</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>-i</td>
<td>询问（是否要删除）</td>
</tr>
<tr>
<td>-r</td>
<td>递归删除</td>
</tr>
<tr>
<td>-f</td>
<td>force 强制删除</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">remove 删除（delete）</span><br><span class="line"><span class="comment">## 语法：rm [选项]... 文件...</span></span><br><span class="line"><span class="built_in">rm</span> [OPTION]... FILE...</span><br><span class="line"></span><br><span class="line"><span class="comment">## 删除文件</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">rm</span> 123</span><br><span class="line"></span><br><span class="line"><span class="comment">## 删除目录</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">rm</span> -r zls2</span><br><span class="line"></span><br><span class="line"><span class="comment">## 删除目录下的所有内容，不包括目录本身</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">rm</span> -r zls2/*</span><br><span class="line"><span class="built_in">rm</span>: remove regular empty file ‘123’? y</span><br><span class="line"></span><br><span class="line"><span class="comment">## 强制删除</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">rm</span> -rf zls2/</span><br><span class="line">[root@localhost ~]# <span class="built_in">rm</span> -fr /tmp/*</span><br><span class="line">1.<span class="built_in">rm</span>删除普通文件的命令，默认只能删除普通文件</span><br><span class="line">[root@localhost ~]# <span class="built_in">rm</span> zls1</span><br><span class="line"><span class="built_in">rm</span>: cannot remove ‘zls1’: Is a directory</span><br><span class="line">2.删除文件，不想询问，<span class="built_in">rm</span> -f</span><br><span class="line">3.删除目录，不想询问，<span class="built_in">rm</span> -fr 、 <span class="built_in">rm</span> -rf</span><br><span class="line"></span><br><span class="line"><span class="comment">## 两种让命令不走别名的方法：例如rm -i（提醒）别名是alias rm=&#x27;rm -i&#x27;，如果不想让rm走别名提醒</span></span><br><span class="line">1.在命令前面加\（转义符）[root@lb01 ~]# \<span class="built_in">rm</span> -r ac</span><br><span class="line">2.使用命令的绝对路径    查看命令的绝对路径在哪<span class="built_in">which</span> <span class="built_in">rm</span>    /usr/bin/rm </span><br><span class="line">使用绝对路径删除/usr/bin/rm -r ab  就没有提醒是否删除即不走别名</span><br></pre></td></tr></table></figure>
<h4 id="④-touch">④ touch</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建普通文件（可编辑文件）</span></span><br><span class="line"><span class="built_in">touch</span> 目标文件</span><br><span class="line"><span class="built_in">touch</span> [OPTION]... FILE...</span><br><span class="line"><span class="comment">## 创建多个文件</span></span><br><span class="line">[root@www ~]# <span class="built_in">touch</span> 1.txt abc/2.txt /tmp/3.txt</span><br><span class="line"><span class="comment">## 报错：创建文件前提，上一级目录必须存在</span></span><br><span class="line">[root@www ~]# <span class="built_in">touch</span> /iskshda/1.txt</span><br><span class="line"><span class="built_in">touch</span>: cannot <span class="built_in">touch</span> ‘/iskshda/1.txt’: No such file or directory</span><br><span class="line"><span class="comment">## 当创建的目标文件已经存在时，不会报错，但会更新修改时间</span></span><br><span class="line">[root@www ~]# <span class="built_in">touch</span> 1.txt</span><br><span class="line"></span><br><span class="line">1）当创建的目标文件不存在，则创建一个普通文件</span><br><span class="line">2）当创建的目标文件存在时，则修改该文件的时间</span><br><span class="line">3）当创建的目标是一个目录时，则修改目录的时间</span><br><span class="line"><span class="comment">#在linux系统中，严格区分大小写</span></span><br></pre></td></tr></table></figure>
<h4 id="⑤-mkdir">⑤ mkdir</h4>
<table>
<thead>
<tr>
<th>选项</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>-p</td>
<td>递归创建，如果目录已存在则不创建，如果目录不存在则创建</td>
</tr>
<tr>
<td>-v</td>
<td>显示创建的详细信息（创建的过程）</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">make directory</span><br><span class="line"><span class="comment">## 语法：</span></span><br><span class="line"><span class="built_in">mkdir</span> 目标目录</span><br><span class="line"><span class="comment">#同时创建多个目录</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">mkdir</span> /abc /123 /456  每个目录要有空格</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建层级目录</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">mkdir</span> -p /abc/123/456 789  789是在当前目录下创建的</span><br><span class="line"></span><br><span class="line"><span class="comment"># 当要创建的目标目录已经存在时 会报错</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">mkdir</span> a</span><br><span class="line"><span class="built_in">mkdir</span>: cannot create directory ‘a’: File exists</span><br><span class="line"></span><br><span class="line"><span class="comment">## 查看创建过程</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">mkdir</span> -pv a/b/c     </span><br><span class="line"><span class="built_in">mkdir</span>: created directory ‘a/b’   因为a已经存在，若不存在则会有<span class="built_in">mkdir</span>: created directory ‘a’</span><br><span class="line"><span class="built_in">mkdir</span>: created directory ‘a/b/c’</span><br><span class="line"></span><br><span class="line"><span class="comment">## 不能在文件下面创建目录</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">mkdir</span> /etc/passwd/123</span><br><span class="line"><span class="built_in">mkdir</span>: cannot create directory ‘/etc/passwd/123’: Not a directory     // 不是一个目录</span><br><span class="line"></span><br><span class="line"><span class="comment">## 创建多个序列目录</span></span><br><span class="line">[root@lb01 ~]# <span class="built_in">mkdir</span> &#123;a..c&#125;</span><br><span class="line">[root@lb01 ~]# <span class="built_in">ls</span></span><br><span class="line">a  b  c</span><br><span class="line"></span><br><span class="line"><span class="comment">## 指定目录下创建平级目录</span></span><br><span class="line">[root@lb01 ~]#  <span class="built_in">mkdir</span> /tmp/&#123;a,b,c,d&#125;在/tmp下创建a,b,c,d四个目录</span><br><span class="line"></span><br><span class="line"><span class="comment">#-p：递归创建目录，没报错（如果目录不存在，就创建，目录存在，就不执行命令）</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">mkdir</span> -p 111/&#123;2,3&#125;/abc	分别在111/2和111/3创建abc</span><br><span class="line">目录</span><br><span class="line"><span class="comment"># 创建目录：</span></span><br><span class="line">/tmp/a</span><br><span class="line">/tmp/b</span><br><span class="line">/tmp/1</span><br><span class="line">/tmp/2</span><br><span class="line">1.[root@www ~]# <span class="built_in">mkdir</span> &#123;/tmp/a,/tmp/b,/tmp/1,/tmp/2</span><br><span class="line"></span><br><span class="line">2.[root@www ~]# <span class="built_in">mkdir</span> /tmp/&#123;a,b,1,2&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="⑥-tr-替换">⑥ tr 替换</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## tr只能按照字符 一一对应取替换，如果出现相同的字符，那么后面的赋值会将前面的赋值覆盖</span></span><br><span class="line"><span class="built_in">tr</span> <span class="string">&#x27;被替换的内容&#x27;</span> <span class="string">&#x27;替换内容&#x27;</span> &lt; 文件名</span><br><span class="line">[root@localhost ~]# <span class="built_in">tr</span> <span class="string">&#x27;name&#x27;</span> <span class="string">&#x27;address&#x27;</span> &lt; 2.txt</span><br><span class="line">addr=10.0.0.100</span><br><span class="line">[root@localhost ~]# <span class="built_in">tr</span> <span class="string">&#x27;nameqws&#x27;</span> <span class="string">&#x27;address&#x27;</span> &lt; 2.txt</span><br><span class="line">address=10.0.0.100</span><br><span class="line"><span class="comment">## 语法</span></span><br><span class="line">sed <span class="string">&#x27;s/被替换内容/替换内容/g&#x27;</span> 文件名</span><br><span class="line">[root@localhost ~]# sed <span class="string">&#x27;s///g&#x27;</span> 2.txt</span><br><span class="line">[root@localhost ~]# sed <span class="string">&#x27;s/name/address/g&#x27;</span> 2.txt</span><br><span class="line">address=10.0.0.100</span><br></pre></td></tr></table></figure>
<h3 id="4-文件处理命令">4.文件处理命令</h3>
<h4 id="①-sort">① sort</h4>
<table>
<thead>
<tr>
<th>选项</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>-k</td>
<td>按照指定列进行排序（默认以空格为分隔符）</td>
</tr>
<tr>
<td>-t</td>
<td>指定文件的分隔符</td>
</tr>
<tr>
<td>-n</td>
<td>以阿拉伯数字的形式进行排序</td>
</tr>
<tr>
<td>-r</td>
<td>reverse 倒叙排序</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line"><span class="built_in">sort</span> [选项]... [文件]...</span><br><span class="line"><span class="comment">## 排序1.txt文件</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">sort</span> 1.txt</span><br><span class="line">a:4</span><br><span class="line">b:3</span><br><span class="line">c:2</span><br><span class="line">d:1</span><br><span class="line">e:5</span><br><span class="line">f:11</span><br><span class="line">总结：</span><br><span class="line">1）默认情况下 <span class="built_in">sort</span>按照文件每一行的首字母进行排序</span><br><span class="line">2）默认情况下 在<span class="built_in">sort</span>眼里分隔符只有空格</span><br><span class="line">3）在<span class="built_in">sort</span>命令中，分隔符，必须是一个字符，不能为空</span><br><span class="line"><span class="comment">## 如果第四列默认相同，还可以加一个-k2再以第二列排序</span></span><br><span class="line"><span class="built_in">sort</span> -k2 -k4 11.txt</span><br></pre></td></tr></table></figure>
<h4 id="②-uniq-去重">② uniq 去重</h4>
<table>
<thead>
<tr>
<th>选项</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>-c</td>
<td>统计重复次数，并显示</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">uniq</span> [选项]... [文件]...</span><br><span class="line">前提条件：重复行的内容，必须挨着，否则无法去重</span><br><span class="line"><span class="comment">## 无法去重</span></span><br><span class="line">abc</span><br><span class="line">123</span><br><span class="line">abc</span><br><span class="line">123</span><br><span class="line"><span class="comment">## 可以去重</span></span><br><span class="line">abc</span><br><span class="line">abc</span><br><span class="line">123</span><br><span class="line">123</span><br><span class="line"><span class="comment">## 只去重</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> uniq.txt</span><br><span class="line">abc</span><br><span class="line">123</span><br><span class="line">abc</span><br><span class="line">123</span><br><span class="line">[root@localhost ~]# <span class="built_in">sort</span> uniq.txt |<span class="built_in">uniq</span></span><br><span class="line">123</span><br><span class="line">abc</span><br><span class="line"><span class="comment">## 去重并统计重复次数</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">sort</span> uniq.txt|<span class="built_in">uniq</span> -c</span><br><span class="line">2 123</span><br><span class="line">2 abc</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="③-cut-截取">③ cut 截取</h4>
<table>
<thead>
<tr>
<th>选项</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>-d</td>
<td>指定分隔符</td>
</tr>
<tr>
<td>-f</td>
<td>指定区域</td>
</tr>
<tr>
<td>-n</td>
<td>指定行</td>
</tr>
<tr>
<td>-c</td>
<td>按照字符截取</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法</span></span><br><span class="line"><span class="built_in">cut</span> OPTION... [FILE]...</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# <span class="built_in">cut</span> -d <span class="string">&#x27; &#x27;</span> -f 6 4.txt  </span><br><span class="line"><span class="comment">#截取以空格为分隔符，第6列内容</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#-f可以截取多段，-f </span></span><br><span class="line">[root@lb01 ~]# ifconfig ens33|grep -w <span class="string">&#x27;inet&#x27;</span>|<span class="built_in">cut</span> -d <span class="string">&#x27; &#x27;</span> -f 10,13</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# <span class="built_in">cut</span> -c 9-10 4.txt</span><br><span class="line"><span class="comment">#截取以字符来算第9-10为内容（需要数字符数，不好用）</span></span><br><span class="line">使用awk命令截取使用示例</span><br><span class="line">[root@lb02 ~]# ip a|awk -F <span class="string">&#x27;[ /]&#x27;</span> <span class="string">&#x27;NR==9&#123;print $6&#125;&#x27;</span></span><br><span class="line">10.0.0.6</span><br><span class="line">注意：</span><br><span class="line">1）<span class="built_in">cut</span>默认没有分隔符，必须指定</span><br></pre></td></tr></table></figure>
<h4 id="④-wc-统计">④ wc 统计</h4>
<table>
<thead>
<tr>
<th>选项</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>-l</td>
<td>line 统计行数</td>
</tr>
<tr>
<td>-w</td>
<td>word 统计单词数量</td>
</tr>
<tr>
<td>-c</td>
<td>char 统计字符数量</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">wc</span> [option]... file...</span><br><span class="line"><span class="comment">## 统计文件的 行数 单词数 字符数</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">wc</span> /etc/services</span><br><span class="line">11176 61033 670293 /etc/services</span><br><span class="line">[root@localhost ~]# <span class="built_in">wc</span> -l /etc/services</span><br><span class="line">11176 /etc/services</span><br><span class="line">[root@localhost ~]# <span class="built_in">wc</span> -w /etc/services</span><br><span class="line">61033 /etc/services</span><br><span class="line">[root@localhost ~]# <span class="built_in">wc</span> -c /etc/services</span><br><span class="line">670293 /etc/services</span><br><span class="line"><span class="comment">## 需要统计的内容，不是一个文件的内容，左边是一个人命令输出结果可以需要使用管道符</span></span><br><span class="line">[root@localhost ~]# ifconfig |<span class="built_in">wc</span> -w</span><br><span class="line">108</span><br><span class="line">[root@localhost ~]# ip a |<span class="built_in">wc</span> -w</span><br></pre></td></tr></table></figure>
<h4 id="⑤-wget-curl-下载">⑤ wget &amp; curl 下载</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 下载</span></span><br><span class="line">- O 指定下载路径，也可以给下载的改名</span><br><span class="line"></span><br><span class="line">wget 可以用外网下载东西到服务器中</span><br><span class="line">-bash: wget: <span class="built_in">command</span> not found没有找到wget命令</span><br><span class="line">[root@localhost ~]# yum install -y wget</span><br><span class="line">[root@localhost ~]# wget https://dldir1.qq.com/qqfile/qq/QQNT/Linux/QQ_3.2.7_240401_x86_64_01.rpm</span><br><span class="line"></span><br><span class="line"><span class="comment">##服务器上传下载</span></span><br><span class="line">[root@localhost ~]# yum install -y lrzsz</span><br><span class="line"><span class="comment">## 虚拟机文件下载到物理机</span></span><br><span class="line">[root@localhost ~]# sz w700d1q75cms.jpg</span><br><span class="line"><span class="comment">## 物理机文件上传到虚拟机</span></span><br><span class="line">[root@localhost ~]# rz</span><br><span class="line"></span><br><span class="line">curl -o 链接 可以指定下载路径，还有可以给下载的文件改名</span><br></pre></td></tr></table></figure>
<h4 id="6-文件属性">6.文件属性</h4>
<table>
<thead>
<tr>
<th>文件字符类型</th>
<th>文件类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>-</td>
<td>file 普通文件</td>
</tr>
<tr>
<td>d</td>
<td>directory 目录</td>
</tr>
<tr>
<td>c</td>
<td>char 字符设备</td>
</tr>
<tr>
<td>b</td>
<td>block 块设备</td>
</tr>
<tr>
<td>l</td>
<td>link 链接文件</td>
</tr>
<tr>
<td>s</td>
<td>socket 安全 （套接字）文件</td>
</tr>
<tr>
<td>p</td>
<td>pipe 管道文件</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 文件类型 文件权限r：read 读 w：write 写 x：execute执行 </span></span><br><span class="line">             硬链接数 所属用户 所属用户组 文件大小      时间        文件名</span><br><span class="line">- rw-r--r--.    1     root     root       289    Apr 7 16:40     11.txt</span><br><span class="line">d rwxr-xr-x.    4     root     root       41     Apr 3 18:04     zls</span><br><span class="line"><span class="comment">## 文件类型</span></span><br><span class="line">[root@localhost ~]# ll /dev/null -d</span><br><span class="line">crw-rw-rw-. 1 root root 1, 3 Apr 7 16:21 /dev/null</span><br><span class="line">[root@localhost ~]# ll /dev/sda1</span><br><span class="line">brw-rw----. 1 root disk 8, 1 Apr 7 16:21 /dev/sda1</span><br><span class="line">[root@localhost ~]# ll /run/systemd/initctl/fifo</span><br><span class="line">prw-------. 1 root root 0 Apr 7 16:21 /run/systemd/initctl/fifo</span><br><span class="line">[root@localhost ~]# ll /dev/log</span><br><span class="line">srw-rw-rw-. 1 root root 0 Apr 7 16:21 /dev/log</span><br><span class="line">[root@localhost ~]# ll -d zls/</span><br><span class="line">drwxr-xr-x. 4 root root 41 Apr 3 18:04 zls/</span><br><span class="line">[root@localhost ~]# ll</span><br><span class="line">-rw-r--r--. 1 root root 289 Apr 7 16:40 11.txt</span><br></pre></td></tr></table></figure>
<h5 id="①-查看文件类型">① 查看文件类型</h5>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ll *.jpg</span><br><span class="line">-rw-r--r--. 1 root root 20735 Mar 13 09:08 w700d1q75cms.jpg</span><br><span class="line">-rw-r--r--. 1 root root 4 Apr 7 19:50 zls.jpg</span><br><span class="line">[root@localhost ~]# file w700d1q75cms.jpg</span><br><span class="line">w700d1q75cms.jpg: JPEG image data, EXIF standard</span><br><span class="line">[root@localhost ~]# file zls.jpg</span><br><span class="line">zls.jpg: empty</span><br><span class="line">[root@localhost ~]# <span class="built_in">echo</span> 111 &gt; zls.jpg</span><br><span class="line">[root@localhost ~]# file zls.jpg</span><br><span class="line">zls.jpg: ASCII text</span><br><span class="line"><span class="comment">## 查看文件类型</span></span><br><span class="line">[root@localhost ~]# file /dev/null</span><br><span class="line">/dev/null: character special</span><br><span class="line">[root@localhost ~]# file /dev/sda1</span><br><span class="line">/dev/sda1: block special</span><br><span class="line">[root@localhost ~]# file /run/systemd/initctl/fifo</span><br><span class="line">/run/systemd/initctl/fifo: fifo (named pipe)</span><br><span class="line">[root@localhost ~]# file /dev/log</span><br><span class="line">/dev/log: socket</span><br><span class="line">[root@localhost ~]# file /root/zls</span><br><span class="line">/root/zls: directory</span><br><span class="line"><span class="comment">##注意: Linux文件扩展名不代表任何含义, 仅仅是为了运维人员便于识别</span></span><br></pre></td></tr></table></figure>
<h5 id="②-系统链接文件">② 系统链接文件</h5>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">文件有文件名和数据，在Linux上被分成两个部分：用户数据(user data)与元数据(metadata)</span><br><span class="line"></span><br><span class="line">用户数据：文件数据块(data block),数据块是记录文件真实内容的地方，我们将其称为#Block</span><br><span class="line">元数据：文件的附加属性，例如：文件大小，创建时间，属组，属主等，我们称其为#Inode</span><br><span class="line">在Linux中，inode是文件元数据的一部分，但其并不包含文件名，inode号即索引节点号</span><br><span class="line">文件名仅是为了方便人们的记忆和使用，系统或者程序通过inode号寻找正确的文件数据块。</span><br><span class="line"></span><br><span class="line"><span class="comment">#inode描述</span></span><br><span class="line">在Linux中，inode（索引节点）是文件系统中的一个数据结构，用于存储文件或目录的元数据信息，包括文件类型、权限、所有者、大小、数据块的位置等。它通过一个唯一的标识符来标识文件或目录，并且在文件系统中具有固定的位置。简而言之，inode是文件系统中用于描述文件或目录属性的数据结构。</span><br><span class="line"></span><br><span class="line"><span class="comment">#元数据：用来描述数据的数据</span></span><br><span class="line"><span class="comment">#真实数据：用户产生的数据（文件内容）</span></span><br><span class="line"><span class="comment">#inode:用于存储文件或目录元数据信息的数据结构。</span></span><br><span class="line"><span class="comment">#block:用于存放用户真实数据的部分</span></span><br><span class="line"><span class="built_in">cat</span> 1.txt</span><br><span class="line">aaa</span><br><span class="line">-rw-r--r--. 1 root root   583919 Oct 29 02:33 1.txt  &gt;&gt;==元数据inode</span><br><span class="line">aaa 真实数据   Block</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="③-文件读取流程">③ 文件读取流程</h5>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240407164513997.png" alt="image-20240407164513997"></p>
<h5 id="④-block介绍">④ block介绍</h5>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240407164729805.png" alt="image-20240407164729805"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">block默认大小为4k</span><br><span class="line"></span><br><span class="line"><span class="comment"># 磁盘存储数据会被分为两个部分：</span></span><br><span class="line">一部分存储元数据，存储元数据的部分叫做inode，每个文件都有一个自己的inode号，这个inode号可以理解为文件存储在磁盘上的房间号</span><br><span class="line">一部分存储真实数据，存储真实数据的部分叫做block，一个block默认是4k</span><br><span class="line"></span><br><span class="line"><span class="comment">#  如上图，当存放的一个block不足4k时，再次存新文件不会占用上次不足4k的block</span></span><br></pre></td></tr></table></figure>
<h5 id="⑤-软链接">⑤ 软链接</h5>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 软链接的创建方式 ln（link）</span></span><br><span class="line">软链接 ==&gt; 符号链接</span><br><span class="line">soft_link symbolic <span class="built_in">link</span></span><br><span class="line"><span class="built_in">ln</span> -s 源文件（要给谁创建快捷方式） 目标文件（快捷方式的位置）</span><br><span class="line">[root@localhost ~]# ll -i zls111 1.txt</span><br><span class="line">16803484 -rw-r--r--. 1 root root 279 Apr 7 17:55 1.txt</span><br><span class="line">16799371 lrwxrwxrwx. 1 root root 11 Apr 7 22:34 zls111 -&gt; /root/1.txt</span><br><span class="line">[root@localhost ~]# <span class="built_in">ln</span> -s /root/1.txt /opt</span><br><span class="line">总结：</span><br><span class="line">1）创建软链接时，直接接一个已存在的目录，以源文件名字来命名新的文件名创建到指定目录下</span><br><span class="line">2）创建软链接时，指定一个目录下的文件，如果该文件不存在，则创建软链接并改名</span><br><span class="line">2）创建软链接时，指定一个目录下的文件，如果该文件存在，则报错，无法创建</span><br><span class="line">[root@localhost ~]# <span class="built_in">ln</span> -s /root/1.txt /tmp/1.txt</span><br><span class="line"><span class="built_in">ln</span>: failed to create symbolic <span class="built_in">link</span> ‘/tmp/1.txt’: File exists</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="⑥-硬链接">⑥ 硬链接</h5>
<p>若一个 inode 号对应多个文件名，则称这些文件为硬链接。换句话说，硬链接就是同一个文件使用了多 个别名，如下图所示 hard link 就是file的一个别名，他们有共同的 inode</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 创建硬链接方式</span></span><br><span class="line"><span class="built_in">ln</span> 源文件（要给谁创建硬链接） 目标文件（硬链接的位置）</span><br><span class="line">[root@localhost ~]# ll -i</span><br><span class="line">total 24</span><br><span class="line">16797812 lrwxrwxrwx. 1 root root 11 Apr 7 23:35 123 -&gt; /root/1.txt</span><br><span class="line">16797823 -rw-r--r--. 6 root root 4 Apr 7 23:37 1.txt</span><br><span class="line">16797823 -rw-r--r--. 6 root root 4 Apr 7 23:37 abc</span><br><span class="line">16797823 -rw-r--r--. 6 root root 4 Apr 7 23:37 abc1</span><br><span class="line">16797823 -rw-r--r--. 6 root root 4 Apr 7 23:37 abc2</span><br><span class="line">16797823 -rw-r--r--. 6 root root 4 Apr 7 23:37 abc3</span><br><span class="line">16797823 -rw-r--r--. 6 root root 4 Apr 7 23:37 abc4</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240407201426083.png" alt="image-20240407201426083"></p>
<h5 id="⑦-软硬链接区别">⑦ 软硬链接区别</h5>
<table>
<thead>
<tr>
<th>区别</th>
<th>硬链接</th>
<th>软链接</th>
</tr>
</thead>
<tbody>
<tr>
<td>命令</td>
<td>ln</td>
<td>ln -s</td>
</tr>
<tr>
<td>inode</td>
<td>和源文件inode号相同</td>
<td>和源文件inode号不同</td>
</tr>
<tr>
<td>源文件</td>
<td>删除源文件不影响链接文件</td>
<td>删除源文件影响链接文件</td>
</tr>
<tr>
<td>跨分区创建</td>
<td>不能</td>
<td>可以</td>
</tr>
<tr>
<td>目录创建</td>
<td>不能</td>
<td>可以</td>
</tr>
<tr>
<td>文件类型</td>
<td>普通文件</td>
<td>l 链接文件</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看磁盘命令</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">df</span></span><br><span class="line">Filesystem 1K-blocks Used Available Use% Mounted on</span><br><span class="line">/dev/sda3 8913920 1609880 7304040 19% /</span><br><span class="line">devtmpfs 487048 0 487048 0% /dev</span><br><span class="line">tmpfs 497948 0 497948 0% /dev/shm</span><br><span class="line">tmpfs 497948 7748 490200 2% /run</span><br><span class="line">tmpfs 497948 0 497948 0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1 508580 122216 386364 25% /boot</span><br><span class="line">tmpfs 99592 0 99592 0% /run/user/0</span><br><span class="line"><span class="comment"># -h以人类可读的方式显示，磁盘大小加上了单位</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">df</span> -h</span><br><span class="line">Filesystem Size Used Avail Use% Mounted on</span><br><span class="line">/dev/sda3 8.6G 1.6G 7.0G 19% /</span><br><span class="line">devtmpfs 476M 0 476M 0% /dev</span><br><span class="line">tmpfs 487M 0 487M 0% /dev/shm</span><br><span class="line">tmpfs 487M 7.6M 479M 2% /run</span><br><span class="line">tmpfs 487M 0 487M 0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1 497M 120M 378M 25% /boot</span><br><span class="line">tmpfs 98M 0 98M 0% /run/user/0</span><br><span class="line"><span class="comment"># -i 查看inode可用空间</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">df</span> -i</span><br><span class="line">Filesystem Inodes IUsed IFree IUse% Mounted on</span><br><span class="line">/dev/sda3 4462080 34791 4427289 1% /</span><br><span class="line">devtmpfs 121762 380 121382 1% /dev</span><br><span class="line">tmpfs 124487 1 124486 1% /dev/shm</span><br><span class="line">tmpfs 124487 699 123788 1% /run</span><br><span class="line">tmpfs 124487 16 124471 1% /sys/fs/cgroup</span><br><span class="line">/dev/sda1 256000 326 255674 1% /boot</span><br><span class="line">tmpfs 124487 1 124486 1% /run/user/0</span><br><span class="line">[root@localhost ~]# <span class="built_in">df</span> -ih</span><br><span class="line">Filesystem Inodes IUsed IFree IUse% Mounted on</span><br><span class="line">/dev/sda3 4.3M 34K 4.3M 1% /</span><br><span class="line">devtmpfs 119K 380 119K 1% /dev</span><br><span class="line">tmpfs 122K 1 122K 1% /dev/shm</span><br><span class="line">tmpfs 122K 699 121K 1% /run</span><br><span class="line">tmpfs 122K 16 122K 1% /sys/fs/cgroup</span><br><span class="line">/dev/sda1 250K 326 250K 1% /boot</span><br><span class="line">tmpfs 122K 1 122K 1% /run/user/0</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CentOS 6：默认使用的是ext4的文件系统13。</span><br><span class="line">CentOS 7：默认使用的是xfs（eXtended File System）文件系统类型</span><br></pre></td></tr></table></figure>
<p>当前磁盘空间还剩余500G，但是就无法往里面写入数据，报错，磁盘空间满了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.inode号储存磁盘空间不足</span><br><span class="line">2.block储存用户真实数据磁盘空间不足</span><br></pre></td></tr></table></figure>
<h3 id="3-vim编辑器">3.vim编辑器</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vi 和 vim 命令是linux中强大的文本编辑器, 由于Linux系统一切皆文件，而配置一个服务就是在修改其</span><br><span class="line">配置文件的参数。</span><br><span class="line">vim 编辑器是运维工程师必须掌握的一个工具, 没有它很多工作都无法完成。</span><br><span class="line">vim 其实是 vi 的升级版</span><br></pre></td></tr></table></figure>
<p><strong>vim三种工作模式</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Vim编辑器中设置了三种模式: 命令模式、编辑模式、末行模式，每种模式分别又支持多种不同的命令快捷键，大大提高了工作效率，而且用户在习惯之后也会觉得相当顺手。要想高效率地操作文本，就必须先搞清这三种模式的操作区别以及模式之间的切换方法。</span><br></pre></td></tr></table></figure>
<h4 id="1-命令模式">1.命令模式</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#进行快捷键操作</span></span><br><span class="line"><span class="comment">##光标的跳转</span></span><br><span class="line">Shift + g |G    //将光标跳转到文件最后一行</span><br><span class="line">gg              //将光标跳转到文件的第一行</span><br><span class="line">Ngg			   //将光标跳转到指定行(N为阿拉伯数字)</span><br><span class="line">Shift +4 |$	    //将光标跳转到当前所在行的行末</span><br><span class="line">Shift +6 |^  |0 // 将光标跳转到当前所在行的行首</span><br><span class="line"><span class="comment">## 复制粘贴</span></span><br><span class="line">yy			   //复制光标所在行的整行内容</span><br><span class="line">p(小写p)		  //将复制的内容粘贴到光标所在行的下一行</span><br><span class="line">P(大写P)		  //将复制的内容粘贴到光标所在行的上一行</span><br><span class="line">Nyy | yNy	    //将光标所在行整行内容及下面N-1行内容复制(N为阿拉伯数字)</span><br><span class="line"><span class="comment">## 剪切删除</span></span><br><span class="line"><span class="built_in">dd</span>			   // 将光标所在行一整行内容，剪切(删除)</span><br><span class="line">Ndd | dNd	    //将光标所在行及下面N-1行内容剪切(N为阿拉伯数字)</span><br><span class="line">Shift + d|D		// 将光标所在字符及后面整行内容剪切(删除)</span><br><span class="line">x			   // 删除当前光标所在字符</span><br><span class="line">Shift +x|X	    //将光标所在当前字符的前一个字符删除</span><br><span class="line">d+<span class="built_in">shift</span> +g|dG  //将光标所在行及后面所有行内容删除</span><br><span class="line"><span class="comment">## 撤销回滚替换</span></span><br><span class="line">U		        // 撤销上一次操作		</span><br><span class="line">Ctrl + r		//恢复上一次撤销的操作</span><br><span class="line">r				// 替换光标当前所在的一个字符</span><br><span class="line">Shift +r |R		//从光标所在字符开始进行替换直到按ESC结束</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 翻页</span></span><br><span class="line">Ctrl + b // 向前翻页</span><br><span class="line">Ctrl + f // 向后翻页</span><br></pre></td></tr></table></figure>
<h4 id="2-编辑模式">2.编辑模式</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-- INSERT --</span><br><span class="line">像正常的Windows文本编辑器一样，可以随意写入内容</span><br><span class="line"><span class="comment">## 从命令模式如何进入编辑模式</span></span><br><span class="line">i 			// 在光标所在位置进入编辑模式（输入内容在光标之前）</span><br><span class="line">I 			// 将光标跳转到光标所在行的行首并进入编辑模式（输入内容在光标之前）</span><br><span class="line">a 			// 将光标跳转到光标所在字符的后一个字符并进入编辑模式（输入内容在光标之前）</span><br><span class="line">A 			// 将光标跳转到光标所在行的行末并进入编辑模式（输入内容在光标之前）</span><br><span class="line">s 			// 将光标所在字符删除并进入编辑模式（输入内容在光标之前）</span><br><span class="line">S 			// 将光标所在行的整行内容删除并进入编辑模式</span><br><span class="line">o 			// 将光标移动到当前所在行的下一行并进入编辑模式</span><br><span class="line">O 			// 将光标移动到光标所在行的上一行并进入编辑模式</span><br><span class="line"><span class="comment">## 从编辑模式返回命令模式</span></span><br><span class="line">ESC</span><br></pre></td></tr></table></figure>
<h4 id="3-末行模式">3.末行模式</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在编辑器的左下角进行操作</span></span><br><span class="line">显示行号、搜索、替换、保存、退出 ...</span><br><span class="line"><span class="comment"># 进入末行模式的方法</span></span><br><span class="line">1）在命令模式下，输入冒号</span><br><span class="line">2）在命令模式下，输入/</span><br><span class="line"><span class="comment">## 保存退出</span></span><br><span class="line">w：write写入（保存</span><br><span class="line">q：quit退出</span><br><span class="line">:w // 只保存但是不退出</span><br><span class="line">:q // 退出但不保存 （没有改内容）</span><br><span class="line">:wq // 保存退出 快捷键 Shift + zz | ZZ</span><br><span class="line">:x // 保存退出 和:wq相等</span><br><span class="line">:q! // 强制退出</span><br><span class="line">:w! // 强制保存</span><br><span class="line">:wq! // 强制保存并退出</span><br><span class="line"><span class="comment">########### 错误 ###########</span></span><br><span class="line">:qw // 错误写法，先退出后保存</span><br><span class="line">E37: No write since last change (add ! to override) // 文件写入内容，没有保存，无法直接退出，除非强制退出</span><br><span class="line">E45: <span class="string">&#x27;readonly&#x27;</span> option is <span class="built_in">set</span> (add ! to override) // 只读文件，无法保存退出，只有root用户可以强制保存退出</span><br><span class="line">E212: Unable to open and write files // 文件无法写入</span><br><span class="line">E212: Can<span class="string">&#x27;t open file for writing // 文件无法写入，出现原因：1.没有写入权限2.文件写入到一个不存在的目录中</span></span><br></pre></td></tr></table></figure>
<p><strong>==末行模式—搜索==</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/想要搜索的内容</span><br><span class="line">n：下翻，查找下一个</span><br><span class="line">N：上翻，查找上一个</span><br></pre></td></tr></table></figure>
<p><strong>==末行模式—替换==</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">:%s#要被替换的内容#替换的内容#g</span><br><span class="line">%：所有行</span><br><span class="line">s：search 搜索</span><br><span class="line">g：全局替换</span><br></pre></td></tr></table></figure>
<p><strong>==末行模式—光标跳转及命令==</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 显示行号</span></span><br><span class="line">:<span class="built_in">set</span> number 简写 :<span class="built_in">set</span> nu</span><br><span class="line"><span class="comment">## 取消显示行号</span></span><br><span class="line">:<span class="built_in">set</span> nonumber 简写 :<span class="built_in">set</span> nonu</span><br><span class="line"><span class="comment">## 光标跳转到指定行</span></span><br><span class="line">:N (N为阿拉伯数字)</span><br><span class="line"><span class="comment">## 忽略大小写</span></span><br><span class="line">:<span class="built_in">set</span> ic</span><br><span class="line"><span class="comment">## 取消忽略大小写</span></span><br><span class="line">:<span class="built_in">set</span> noic</span><br><span class="line"><span class="comment">## 自动缩进</span></span><br><span class="line">:<span class="built_in">set</span> ai</span><br><span class="line"><span class="comment">## 取消自动缩进</span></span><br><span class="line">:<span class="built_in">set</span> noai</span><br><span class="line"><span class="comment">## 显示制表符，结束符...</span></span><br><span class="line">:<span class="built_in">set</span> list</span><br><span class="line"><span class="comment">## 取消</span></span><br><span class="line">:<span class="built_in">set</span> nolist</span><br><span class="line"><span class="comment">## 设置环境变量 在当前登录用户的家目录下 创建一个 .vimrc</span></span><br><span class="line"><span class="built_in">set</span> fenc=utf-8</span><br><span class="line"><span class="built_in">set</span> fencs=utf-8,usc-bom,euc-jp,gb18030,gbk,gb2312,cp936</span><br><span class="line"><span class="built_in">set</span> number</span><br><span class="line"><span class="built_in">set</span> autoindent</span><br><span class="line"><span class="built_in">set</span> smartindent</span><br><span class="line"><span class="built_in">set</span> tabstop=4</span><br><span class="line"><span class="built_in">set</span> shiftwidth=4</span><br><span class="line"><span class="built_in">set</span> ruler</span><br><span class="line"><span class="built_in">set</span> incsearch</span><br><span class="line"><span class="built_in">set</span> showmatch</span><br><span class="line"><span class="built_in">set</span> matchtime=10</span><br><span class="line"><span class="built_in">set</span> ignorecase</span><br><span class="line"><span class="built_in">set</span> cursorline</span><br><span class="line"><span class="built_in">set</span> t_Co=256</span><br><span class="line"><span class="comment">#设定默认解码</span></span><br><span class="line"><span class="built_in">set</span>?fenc=utf-8?</span><br><span class="line"><span class="built_in">set</span>?fencs=utf-8,usc-bom,euc-jp,gb18030,gbk,gb2312,cp936</span><br><span class="line"><span class="comment">#显示行号</span></span><br><span class="line"><span class="built_in">set</span> number</span><br><span class="line"><span class="comment">#vim使用自动对齐，也就是把当前行的对齐格式应用到下一行</span></span><br><span class="line"><span class="built_in">set</span> autoindent </span><br><span class="line"><span class="comment">#依据上面的对齐格式，智能的选择对齐方式</span></span><br><span class="line"><span class="built_in">set</span> smartindent </span><br><span class="line"><span class="comment">#设置tab键为4个空格</span></span><br><span class="line"><span class="built_in">set</span> tabstop=4</span><br><span class="line"><span class="comment">#设置当行之间交错时使用4个空格</span></span><br><span class="line"><span class="built_in">set</span> shiftwidth=4</span><br><span class="line"><span class="comment">#设置在编辑过程中,于右下角显示光标位置的状态行</span></span><br><span class="line"><span class="built_in">set</span> ruler</span><br><span class="line"><span class="comment">#设置增量搜索,这样的查询比较smart</span></span><br><span class="line"><span class="built_in">set</span> incsearch </span><br><span class="line"><span class="comment">#高亮显示匹配的括号</span></span><br><span class="line"><span class="built_in">set</span> showmatch </span><br><span class="line"><span class="comment">#匹配括号高亮时间(单位为 1/10 s)</span></span><br><span class="line"><span class="built_in">set</span> matchtime=10 </span><br><span class="line"><span class="comment">#在搜索的时候忽略大小写</span></span><br><span class="line"><span class="built_in">set</span> ignorecase </span><br><span class="line"><span class="comment">#禁止生成临时</span></span><br><span class="line"><span class="comment">#set nobackup </span></span><br><span class="line"><span class="comment">#当前行高亮</span></span><br><span class="line"><span class="built_in">set</span> cursorline </span><br><span class="line"><span class="comment">#支持256色</span></span><br><span class="line"><span class="built_in">set</span> t_Co=256</span><br></pre></td></tr></table></figure>
<h4 id="4-视图模式">4.视图模式</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">块视图模式 -- VISUAL BLOCK -- Ctrl + v</span><br><span class="line"><span class="comment"># 批量注释</span></span><br><span class="line">1）Ctrl + v 进入块视图模式</span><br><span class="line">2）按键盘的上下左右，选中想要的内容</span><br><span class="line">3）如果是在行前加入内容，Shift + i</span><br><span class="line">4）如果是在行后加入内容，Shift + a</span><br><span class="line">5）输入想要的内容后，返回命令模式（ESC）</span><br><span class="line">行视图模式 -- VISUAL LINE -- Shit + v</span><br></pre></td></tr></table></figure>
<h4 id="5-vim扩展知识">5.vim扩展知识</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 编辑文件直接跳转到指定行</span></span><br><span class="line">[root@localhost ~]# vim +N 1.txt // N为阿拉伯数字</span><br><span class="line">[root@localhost ~]# vim +3 1.txt</span><br><span class="line"><span class="comment">## 对比文件不同之处</span></span><br><span class="line">[root@localhost ~]# vimdiff 1.txt 2.txt</span><br><span class="line">[root@localhost ~]# diff 1.txt 3.txt</span><br><span class="line">3,6c3,6</span><br><span class="line">&lt; http://pxost.baidu.com/index.html</span><br><span class="line">&lt; http://mp3.baiadu.com/index.html</span><br><span class="line">&lt; http://www.baidu.com/3.html</span><br><span class="line">&lt; http://post.baidxu.com/2.html</span><br><span class="line">---</span><br><span class="line">&gt; http:aaaaa//pxost.baidu.com/index.html</span><br><span class="line">&gt; http://mp3xxx.baiadu.com/index.html</span><br><span class="line">&gt; http://www.baxxidu.com/3.html</span><br><span class="line">&gt; http://post.baixxdxu.com/2.html</span><br><span class="line"><span class="comment">## 同时编辑多个文件 （使用Ctrl + ww 进行切换）</span></span><br><span class="line">[root@localhost ~]# vim -o 1.txt 2.txt // 水平拆分</span><br><span class="line">[root@localhost ~]# vim -O 1.txt 2.txt // 垂直拆分</span><br></pre></td></tr></table></figure>
<h4 id="6-vim写入流程">6.vim写入流程</h4>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/aaa.jpg" alt="aaa"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">当我们在使用vim编辑文件时</span><br><span class="line">1）首先会在源文件目录下生成一个.swp的临时文件</span><br><span class="line">2）如果vim非正常退出的情况下，该临时文件一直存在</span><br><span class="line">3）下一次编辑则会提示</span><br><span class="line">[O]pen Read-Only, (E)dit anyway, (R)ecover, (Q)uit, (A)bort:</span><br><span class="line">只读模式打开 继续编辑 覆盖 退出</span><br><span class="line">解决方案：</span><br><span class="line">1）查看modified状态 如果是<span class="built_in">yes</span>，则需要覆盖源文件</span><br><span class="line">- vim -r /etc/sysconfig/network-scripts/ifcfg-ens33</span><br><span class="line">- vim /etc/sysconfig/network-scripts/ifcfg-ens3</span><br><span class="line">(R)ecover 按 r</span><br><span class="line">2）删除.swp临时文件即可</span><br><span class="line"><span class="built_in">rm</span> -f /etc/sysconfig/network-scripts/.ifcfg-ens33.swp</span><br><span class="line">1）查看modified状态 如果是no，则需要覆盖源文件</span><br><span class="line">(Q)uit 按q退出</span><br><span class="line">2）直接删除.swp临时文件</span><br><span class="line"><span class="built_in">rm</span> -f /etc/sysconfig/network-scripts/.ifcfg-ens33.swp</span><br></pre></td></tr></table></figure>
<h3 id="4-find命令">4. find命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1.忘了某个文件所在的位置，可以通过find来查找。</span><br><span class="line">2.可以查找某个目录下，所有小于1k的文件。</span><br><span class="line">3.可以查找某个目录下，7天之前创建的文件。</span><br><span class="line">4.可以查找某目录下所有以.sh结尾的脚本。</span><br><span class="line"></span><br><span class="line">它可以根据不同的条件来进行查找文件:例如权限、拥有者、修改日期/时间、文件大小等等。 同时find命令是Linux下必须掌握的。</span><br><span class="line"></span><br><span class="line">[root@lb01 code]# find /code/ -size -4k ! -<span class="built_in">type</span> d -delete</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>命令</th>
<th>路径</th>
<th>选项</th>
<th>表达式</th>
<th>动作</th>
</tr>
</thead>
<tbody>
<tr>
<td>find</td>
<td>[path…]</td>
<td>[options…]</td>
<td>[expression]</td>
<td>[action]</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>逻辑运算符</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>-a</td>
<td>且   &amp;&amp;</td>
</tr>
<tr>
<td>-o</td>
<td>或  ||</td>
</tr>
<tr>
<td>!</td>
<td>非</td>
</tr>
</tbody>
</table>
<p><strong>find的选项</strong></p>
<table>
<thead>
<tr>
<th>选项</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>-name<br />-iname</td>
<td>根据文件名查找<br />不区分文件名大小写查找</td>
</tr>
<tr>
<td>-type</td>
<td>根据文件类型查找</td>
</tr>
<tr>
<td>-size</td>
<td>根据文件大小找</td>
</tr>
<tr>
<td>-time</td>
<td>根据文件的时间找</td>
</tr>
<tr>
<td>-user <br />-group <br />-nouser <br />-nogroup</td>
<td>查找指定用户<br />查找指定用户组<br />查找没有用户的文件查找<br />没有用户组的文件</td>
</tr>
<tr>
<td>-perm</td>
<td>根据文件权限找</td>
</tr>
<tr>
<td>-maxdepth</td>
<td>根据句深度查找</td>
</tr>
<tr>
<td>-empty</td>
<td>查找空文件（和-type d配合可以指定空目录）</td>
</tr>
</tbody>
</table>
<h4 id="1-根据文件名查找">1.根据文件名查找</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">-name</span><br><span class="line"><span class="comment">## 找到/etc/目录下网卡信息配置文件在哪</span></span><br><span class="line">[root@localhost ~]# find /etc -name <span class="string">&#x27;*ens33*&#x27;</span>      加上*是模糊查找</span><br><span class="line"></span><br><span class="line"><span class="comment">## 在/etc/目录下找以.conf结尾的所有配置文件</span></span><br><span class="line">[root@localhost ~]# find /etc -name <span class="string">&#x27;*.conf&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 在/etc/目录下找到以.conf结尾的文件和.sh结尾的文件</span></span><br><span class="line">[root@localhost ~]# find /etc/ -name <span class="string">&#x27;*.conf&#x27;</span> &amp;&amp; find /etc/ -name <span class="string">&#x27;*.sh&#x27;</span></span><br><span class="line">[root@localhost ~]# find /etc/ -name <span class="string">&#x27;*.conf&#x27;</span>;find /etc/ -name <span class="string">&#x27;*.sh&#x27;</span></span><br><span class="line">[root@localhost ~]# find /etc/ -name <span class="string">&#x27;*.conf&#x27;</span> -o -name <span class="string">&#x27;*.sh&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 在/etc/目录下找到不是以.conf结尾的文件</span></span><br><span class="line">[root@localhost ~]# find /etc/ ! -name <span class="string">&#x27;*.conf&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 精确匹配</span></span><br><span class="line">[root@localhost ~]# find /etc/ -name <span class="string">&#x27;ifcfg-ens33&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 不区分大小写查找文件名</span></span><br><span class="line">[root@localhost ~]# find ./ -iname <span class="string">&#x27;*zls*&#x27;</span></span><br></pre></td></tr></table></figure>
<h4 id="2-根据文件类型查找">2.根据文件类型查找</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">-<span class="built_in">type</span></span><br><span class="line"><span class="comment">## 文件类型</span></span><br><span class="line">普通文件：f</span><br><span class="line">目录：	d</span><br><span class="line">软链接文件：l</span><br><span class="line">套接字文件：s</span><br><span class="line">字符设备文件：c</span><br><span class="line">块设备文件：b</span><br><span class="line">管道文件：p</span><br><span class="line">//f 文件</span><br><span class="line">[root@zls ~]# find /dev -<span class="built_in">type</span> f</span><br><span class="line">//d 目录</span><br><span class="line">[root@zls ~]# find /dev -<span class="built_in">type</span> d</span><br><span class="line">//l 链接</span><br><span class="line">[root@zls ~]# find /dev -<span class="built_in">type</span> l</span><br><span class="line">//b 块设备</span><br><span class="line">[root@zls ~]# find /dev -<span class="built_in">type</span> b</span><br><span class="line">//c 字符设备</span><br><span class="line">[root@zls ~]# find /dev -<span class="built_in">type</span> c</span><br><span class="line">//s 套接字</span><br><span class="line">[root@zls ~]# find /dev -<span class="built_in">type</span> s</span><br><span class="line">//p 管道文件</span><br><span class="line">[root@zls ~]# find /dev -<span class="built_in">type</span> p</span><br><span class="line"></span><br><span class="line"><span class="comment">## 查找/etc/目录下，文件名中包含conf的目录</span></span><br><span class="line">[root@localhost ~]# find /etc -name <span class="string">&#x27;*conf*&#x27;</span> -<span class="built_in">type</span> d</span><br><span class="line">[root@localhost ~]# find /etc -name <span class="string">&#x27;*conf*&#x27;</span> -<span class="built_in">type</span> d -<span class="built_in">ls</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="3-根据文件大小查找">3.根据文件大小查找</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">-size</span><br><span class="line">+：大于</span><br><span class="line">-：小于</span><br><span class="line"><span class="comment">## 找小于多少的文件</span></span><br><span class="line">[root@localhost ~]# find /tmp -size -4k</span><br><span class="line"><span class="comment">## 找大于多少的文件</span></span><br><span class="line">[root@localhost ~]# find /tmp -size +4k</span><br><span class="line"><span class="comment">## 找等于多少</span></span><br><span class="line">[root@localhost ~]# find /tmp -size 4k</span><br><span class="line"></span><br><span class="line"><span class="comment">## 找到/code目录下小于4k的文件并删除</span></span><br><span class="line">[root@localhost ~]# find /code -size -4k -delete</span><br><span class="line"></span><br><span class="line"><span class="comment">## 找到/code目录下小于4k的文件并删除（不删除目录）</span></span><br><span class="line">[root@localhost ~]# find /code -size -4k ! -<span class="built_in">type</span> d -delete   </span><br><span class="line"><span class="comment">##! -type d -delete非目录</span></span><br></pre></td></tr></table></figure>
<h4 id="4-根据文件的时间查找">4.根据文件的时间查找</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 一个文件的时间</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">stat</span> 1.txt</span><br><span class="line">File: ‘1.txt’</span><br><span class="line">Size: 4 Blocks: 8 IO Block: 4096 regular file</span><br><span class="line">Device: 803h/2051d Inode: 16797763 Links: 1</span><br><span class="line">Access: (0644/-rw-r--r--) Uid: ( 0/ root) Gid: ( 0/ root)</span><br><span class="line">Context: unconfined_u:object_r:admin_home_t:s0</span><br><span class="line">Access: 2024-04-17 19:25:18.951724354 +0800</span><br><span class="line">Modify: 2024-04-17 19:25:18.951724354 +0800</span><br><span class="line">Change: 2024-04-17 19:25:18.951724354 +0800</span><br><span class="line"></span><br><span class="line">-mtime：Modify	修改时间</span><br><span class="line">-atime：Access	访问时间</span><br><span class="line">-ctime：Change	时间戳修改时间</span><br><span class="line"></span><br><span class="line">+：查找N天之前的（不包含今天）</span><br><span class="line">-：查找N天之内的（包含今天）</span><br><span class="line">N：查找往前数第N天的（不包含今天）  （-mtime后只有数字的）</span><br><span class="line"></span><br><span class="line"><span class="comment">## 不加任何符号：查找不算今天往前数第7天的文件</span></span><br><span class="line">-mtime 7</span><br><span class="line">[root@localhost find]# find /root/find/ -mtime 7</span><br><span class="line"></span><br><span class="line"><span class="comment">## +7 不算今天往前数第七天之前的文件</span></span><br><span class="line">[root@localhost find]# find /root/find/ -mtime +7</span><br><span class="line"><span class="comment">## -7 算今天，最近7天的文件</span></span><br><span class="line">[root@localhost find]# find /root/find/ -mtime -7</span><br><span class="line"><span class="comment">## 需求：保留一周的数据</span></span><br><span class="line">[root@localhost find]# find /root/find/ ! -mtime -7 -delete</span><br></pre></td></tr></table></figure>
<h4 id="5-根据用户查找">5.根据用户查找</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">-user：查找指定用户</span><br><span class="line">-group：查找指定用户组</span><br><span class="line">-nouser：查找没有用户的文件</span><br><span class="line">-nogroup：查找没有用户组的文件</span><br><span class="line"><span class="comment">## 查找属于root用户adm组的文件</span></span><br><span class="line">[root@localhost ~]# find /root/ -user root -group adm -<span class="built_in">ls</span></span><br><span class="line"><span class="comment">## 查找user是zls，或group是adm组的文件</span></span><br><span class="line">[root@localhost ~]# find /root/ \( -group adm -o -user zls \) -<span class="built_in">ls</span></span><br><span class="line">16797763 4 -rw-r--r-- 1 zls root 4 Apr 17 2024 /root/1.txt</span><br><span class="line">16797778 4 -rw-r--r-- 1 zls root 4 Apr 16 2024 /root/2.txt</span><br><span class="line">16797816 4 -rw-r--r-- 1 root adm 4 Apr 17 2024</span><br><span class="line">/root/zls.txt</span><br><span class="line">16851189 4 -rw-r--r-- 1 root adm 4 Apr 16 2024</span><br><span class="line">/root/zls1.txt</span><br><span class="line">16851191 4 -rw-r--r-- 1 root adm 4 Apr 16 2024</span><br><span class="line">/root/zls2.txt</span><br><span class="line">16797780 4 -rw-r--r-- 1 root adm 4 Apr 16 2024</span><br><span class="line">/root/zls3.txt</span><br><span class="line">16797813 4 -rw-r--r-- 1 root adm 4 Apr 16 2024</span><br><span class="line">/root/zls4.txt</span><br><span class="line">[root@localhost ~]# find /root/ \( -user zls -o -group adm \)</span><br><span class="line">-rw-r--r--. 1 zls root 4 Apr 17 2024 /root/1.txt</span><br><span class="line">-rw-r--r--. 1 zls root 4 Apr 16 2024 /root/2.txt</span><br><span class="line">-rw-r--r--. 1 root adm 4 Apr 16 2024 /root/zls1.txt</span><br><span class="line">-rw-r--r--. 1 root adm 4 Apr 16 2024 /root/zls2.txt</span><br><span class="line">-rw-r--r--. 1 root adm 4 Apr 16 2024 /root/zls3.txt</span><br><span class="line">-rw-r--r--. 1 root adm 4 Apr 16 2024 /root/zls4.txt</span><br><span class="line">-rw-r--r--. 1 root adm 4 Apr 17 2024 /root/zls.txt</span><br><span class="line"><span class="comment">## 查找没有用户或者没有组的文件</span></span><br><span class="line">[root@localhost opt]# find /opt/ -nouser -o -nogroup</span><br></pre></td></tr></table></figure>
<h4 id="6-根据文件权限查找">6.根据文件权限查找</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">perm</span><br><span class="line"><span class="comment">## 精确查找文件的权限644</span></span><br><span class="line">[root@localhost opt]# find /opt/ -perm 644 -<span class="built_in">ls</span></span><br><span class="line">16851186 0 -rw-r--r-- 1 1000 oldboyedu 0 Apr 15 2024</span><br><span class="line">/opt/sbit/1.txt</span><br><span class="line">16851188 0 -rw-r--r-- 1 oldboy oldboyedu 0 Apr 15 2024</span><br><span class="line">/opt/sbit/2.txt</span><br><span class="line">8393463 0 -rw-r--r-- 1 1002 root 0 Mar 30 00:19 /opt/1.txt</span><br><span class="line">8393464 0 -rw-r--r-- 1 root 1000 0 Mar 30 00:19 /opt/2.txt</span><br><span class="line"><span class="comment">## -：代表该权限位上，必须包含该数字权限622 rw w w</span></span><br><span class="line">[root@localhost opt]# find /opt/ -perm -622 -<span class="built_in">ls</span></span><br><span class="line">16851181 0 drwxrwxrwt 2 root root 32 Apr 15 2024 /opt/sbit</span><br><span class="line"><span class="comment">## /：拥有者至少有r或w权限, 或者拥有组至少有w权限, 或者匿名至少有w权限</span></span><br><span class="line">[root@zls ~]# find /home -perm /622</span><br><span class="line">8405111 0 drwxr-xr-x 4 root root 77 Mar 30 00:19 /opt/</span><br><span class="line">16777 0 drwxr-sr-x 2 1000 root 19 Apr 15 2024 /opt/test</span><br><span class="line">16779 0 -rw-rw-r-- 1 1000 root 0 Apr 15 2024</span><br><span class="line">/opt/test/1.txt</span><br><span class="line">16851181 0 drwxrwxrwt 2 root root 32 Apr 15 2024 /opt/sbit</span><br><span class="line">16851186 0 -rw-r--r-- 1 1000 oldboyedu 0 Apr 15 2024</span><br><span class="line">/opt/sbit/1.txt</span><br><span class="line">16851188 0 -rw-r--r-- 1 oldboy oldboyedu 0 Apr 15 2024</span><br><span class="line">/opt/sbit/2.txt</span><br><span class="line">8393448 12 -rw------- 1 root root 9567 Apr 16 2024</span><br><span class="line">/opt/.bash_history</span><br><span class="line">8393463 0 -rw-r--r-- 1 1002 root 0 Mar 30 00:19 /opt/1.txt</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="7-根据深度查找">7.根据深度查找</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# find /etc/ -maxdepth 1 -<span class="built_in">type</span> d</span><br></pre></td></tr></table></figure>
<h4 id="8-动作">8.动作</h4>
<table>
<thead>
<tr>
<th>动作</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>-print</td>
<td>打印结果（find 默认就打印结果）</td>
</tr>
<tr>
<td>-ls</td>
<td>查看文件详细信息（如果有逻辑运算符，就只查看逻辑运算符后面文件详细信息，除非 使用小括号整体括起来）</td>
</tr>
<tr>
<td>- delete</td>
<td>删除查找到的文件（如果有逻辑运算符，就只查看逻辑运算符后面文件详细信息，除非 使用小括号整体括起来）</td>
</tr>
<tr>
<td>-ok</td>
<td>执行后面的shell命令（会询问）（如果有逻辑运算符，就只查看逻辑运算符后面文件详 细信息，除非使用小括号整体括起来）</td>
</tr>
<tr>
<td>-exec</td>
<td>执行后面的shell命令（不询问）（如果有逻辑运算符，就只查看逻辑运算符后面文件详 细信息，除非使用小括号整体括起来）</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# find /opt/ -<span class="built_in">type</span> f -o -name <span class="string">&#x27;*st&#x27;</span> -<span class="built_in">exec</span> <span class="built_in">rm</span> -fr &#123;&#125; \;</span><br><span class="line">[root@localhost ~]# find /opt/ -<span class="built_in">type</span> f -o -name <span class="string">&#x27;*st&#x27;</span> -ok <span class="built_in">rm</span> -fr &#123;&#125; \;</span><br><span class="line"><span class="comment">## 以后动作都改为xargs 后面加命令</span></span><br><span class="line">[root@localhost ~]# find /opt/ -<span class="built_in">type</span> f -o -name <span class="string">&#x27;*st&#x27;</span>|xargs <span class="built_in">rm</span> -fr</span><br><span class="line"><span class="comment">## 拷贝</span></span><br><span class="line">[root@localhost ~]# find /root/ -<span class="built_in">type</span> f|xargs <span class="built_in">cp</span> -t /tmp/</span><br><span class="line">[root@localhost ~]# find /root/ -<span class="built_in">type</span> d|xargs -I &#123;&#125; <span class="built_in">cp</span> -r &#123;&#125; /opt/</span><br></pre></td></tr></table></figure>
<h2 id="【3】用户管理">【3】用户管理</h2>
<h3 id="1-用户管理信息">1.用户管理信息</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##Linux下的用户有什么作用</span></span><br><span class="line">1）系统上的每一个进程(运行的程序)都需要特定的用户运行</span><br><span class="line">2）每一个文件都有特定的用户拥有，所以访问一个文件或目录受到用户的限制</span><br><span class="line">3）进程能够以何种方式访问某一个文件或目录, 与进程所关联的用户有关</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240409145014306.png" alt="image-20240409145014306"></p>
<h4 id="①-用户查看命令">① 用户查看命令</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法</span></span><br><span class="line"><span class="built_in">id</span> [option] [user]</span><br><span class="line"><span class="built_in">id</span> [选项] [用户名]</span><br><span class="line">[root@localhost ~]# <span class="built_in">id</span></span><br><span class="line">uid=0(root) gid=0(root) <span class="built_in">groups</span>=0(root)</span><br><span class="line">uid：user <span class="built_in">id</span>号</span><br><span class="line">gid：group <span class="built_in">id</span>号</span><br><span class="line"><span class="built_in">groups</span>：组名</span><br><span class="line"><span class="comment">## 只显示uid</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">id</span> -u root</span><br><span class="line">0</span><br><span class="line"><span class="comment">## 只显示gid</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">id</span> -g root</span><br><span class="line">0</span><br><span class="line">系统只认uid，用户名是给运维人员看的</span><br><span class="line">在Linux系统中，uid为0的用户才是超级用户</span><br><span class="line"><span class="comment">## 查看用户登录哪个终端，登录时间   who</span></span><br><span class="line">root     tty1         2024-04-09 14:54</span><br><span class="line">root     pts/0        2024-04-09 11:09 (10.0.0.1)</span><br><span class="line">root     pts/1        2024-04-09 11:33 (10.0.0.1)</span><br><span class="line"><span class="built_in">tty</span>	代表的是服务器终端登录</span><br><span class="line">pts代表的是远程链接工具登录</span><br><span class="line">[root@localhost ~]# <span class="built_in">whoami</span>		<span class="comment">## 查看当前登录的用户名</span></span><br><span class="line">root</span><br><span class="line"><span class="comment">## 查看用户信息文件</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> /etc/passwd</span><br></pre></td></tr></table></figure>
<h4 id="②-etc-passwd">② /etc/passwd</h4>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240409145743758.png" alt="image-20240409145743758"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 以冒号为分隔符的情况下，文件被分为7列</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">cat</span> /etc/passwd</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"><span class="built_in">sync</span>:x:5:0:<span class="built_in">sync</span>:/sbin:/bin/sync</span><br><span class="line"></span><br><span class="line">[zls@localhost ~]# useradd wyl -c <span class="string">&#x27;abc&#x27;</span>  添加备注</span><br><span class="line"></span><br><span class="line">第一列：用户名</span><br><span class="line">第二列：密码占位符</span><br><span class="line">第三列：用户的uid</span><br><span class="line">第四列：用户所在组的gid</span><br><span class="line">第五列：用户的描述信息（备注、注释）</span><br><span class="line">第六列：用户家目录所在路径</span><br><span class="line">第七列：用户登录使用的bash</span><br><span class="line"><span class="comment">##  /sbin/nologin 不允许登录的用户 bash</span></span><br></pre></td></tr></table></figure>
<h4 id="③-etc-shadow">③ etc/shadow</h4>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240409150039322.png" alt="image-20240409150039322"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">daemon:*:17834:0:99999:7:2:6627567:</span><br><span class="line">第一列：		用户名</span><br><span class="line">第二列：		密码   *和!! 代表没有密码</span><br><span class="line">第三列：		密码修改的时间 从1970年开始计算到上一次变更密码的时间过了多少天</span><br><span class="line">第四列：		密码最少使用天数 0代表无限制</span><br><span class="line">第五列：		密码最长使用天数 99999代表无限制</span><br><span class="line">第六列：		密码到期之前多少天开始提醒 提前7天提醒需要改密码了</span><br><span class="line">第七列：		密码过期后N天强制变更密码 密码过期后2天，强制改密码</span><br><span class="line">第八列：		账户失效时间，从1970年开始计算多少天</span><br><span class="line">第九列：		空 保留列</span><br></pre></td></tr></table></figure>
<h3 id="2-用户管理">2.用户管理</h3>
<h4 id="①-创建用户案例">① 创建用户案例</h4>
<p>练习创建1000个用户，密码都为1</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;1&#x27;</span> |passwd --stdin lgj</span><br><span class="line"></span><br><span class="line">；分号可以衔接多个命令执行，</span><br><span class="line">&amp;&amp;衔接多个命令，但是需要判断前面的命令执行成功后，再执行后面的命令</span><br><span class="line"><span class="comment">#衔接命令</span></span><br><span class="line">useradd lgj1;<span class="built_in">echo</span> <span class="string">&quot;1&quot;</span> | passwd --stdin lgj1  ==&gt;;分号两边分别执行结果</span><br><span class="line"></span><br><span class="line">[root@lb01 ~]# <span class="built_in">seq</span> 1000|awk <span class="string">&#x27;&#123;print &quot;useradd lgj&quot;$1&quot;;echo 1|passwd --stdin lgj&quot;$1&#125;&#x27;</span>|bash</span><br><span class="line"></span><br><span class="line"><span class="comment">#脚本</span></span><br><span class="line">vim useradd.sh</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..1000&#125;; <span class="keyword">do</span></span><br><span class="line">  username=<span class="string">&quot;lgj<span class="variable">$i</span>&quot;</span></span><br><span class="line">  useradd <span class="variable">$username</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;1&quot;</span> | passwd --stdin <span class="variable">$username</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">运行sh文件</span><br><span class="line">sh useradd.sh &gt; /dev/null</span><br></pre></td></tr></table></figure>
<h4 id="②-用户约定和规范">② 用户约定和规范</h4>
<p><strong>==Linux里用户规范==</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">centOS7</th>
<th style="text-align:center"></th>
<th style="text-align:center">centOS7</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">用户UID</td>
<td style="text-align:center">作用</td>
<td style="text-align:center">用户UID</td>
<td style="text-align:center">作用</td>
</tr>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">系统管理员（超级用户）</td>
<td style="text-align:center">0</td>
<td style="text-align:center">系统管理员（超级用户）</td>
</tr>
<tr>
<td style="text-align:center">1-200</td>
<td style="text-align:center">系统用户，由系统分配给进程使用</td>
<td style="text-align:center">1-500</td>
<td style="text-align:center">系统用户，由系统分配给进程使用运行服务，不需要登录系统</td>
</tr>
<tr>
<td style="text-align:center">201-999</td>
<td style="text-align:center">系统用户，运行服务，不需要登录系统</td>
<td style="text-align:center">500+</td>
<td style="text-align:center">常规的普通用户</td>
</tr>
<tr>
<td style="text-align:center">1000+</td>
<td style="text-align:center">常规的普通用户</td>
<td style="text-align:center"><strong>/</strong></td>
<td style="text-align:center"><strong>/</strong></td>
</tr>
</tbody>
</table>
<h4 id="③-修改密码-chage">③ 修改密码 chage</h4>
<p><strong>==了解==</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">bin:*:17834:0:99999:7:10::</span><br><span class="line">-d //设置最近一次更改密码时间, 0下次登陆系统强制修改密码 		// /etc/shadow 第三列</span><br><span class="line">-m //设置用户两次改变密码之间使用<span class="string">&quot;最小天数&quot;</span> 					// /etc/shadow 第四列</span><br><span class="line">-M //设置用户两次改变密码之间使用<span class="string">&quot;最大天数&quot;</span> 					// /etc/shadow 第五列</span><br><span class="line">-W //设置密码更改警告时间 将过期警告天数设为“警告天数” 		// /etc/shadow 第六列</span><br><span class="line">-I //设置密码过期天数后, 密码为失效状态 					// /etc/shadow 第七列</span><br><span class="line">-E //设置用户过期时间, 账户失效后无法登陆 					// /etc/shadow 第八列</span><br><span class="line">-l //显示用户信息</span><br><span class="line">[root@lgj ~]# chage -l lgj</span><br><span class="line">Last password change : Sep 01, 2014 					   //最近一次更改密码时间</span><br><span class="line">Password expires : Sep 16, 2014 						   //密码过期时间</span><br><span class="line">Password inactive : Sep 21, 2014 						   //密码失效时间</span><br><span class="line">Account expires : Aug 31, 2015 							  //用户失效时间</span><br><span class="line">Minimum number of days between password change : 2 			//密码最短使用时间</span><br><span class="line">Maximum number of days between password change : 15 		//密码最长使用时间</span><br><span class="line">Number of days of warning before password expires : 7 		//密码过期前警告天数</span><br></pre></td></tr></table></figure>
<h4 id="④-创建用户（增）">④ 创建用户（增）</h4>
<table>
<thead>
<tr>
<th style="text-align:center">选项</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">-u</td>
<td>指定uid</td>
</tr>
<tr>
<td style="text-align:center">-g</td>
<td>指定gid（必须指定一个已存在的组）</td>
</tr>
<tr>
<td style="text-align:center">-c</td>
<td>指定用户的备注（注释）</td>
</tr>
<tr>
<td style="text-align:center">-d</td>
<td>指定用户的家目录</td>
</tr>
<tr>
<td style="text-align:center">-M</td>
<td>不创建家目录</td>
</tr>
<tr>
<td style="text-align:center">-s</td>
<td>指定用户登录的shell</td>
</tr>
<tr>
<td style="text-align:center">-G</td>
<td>指定附加组</td>
</tr>
<tr>
<td style="text-align:center">-r</td>
<td>创建一个用户uid在200 - 999之间</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">使用useradd创建用户将影响到四个文件</span><br><span class="line">/etc/passwd		存放用户名等信息</span><br><span class="line">/etc/shadow		存放密码等信息</span><br><span class="line">/etc/group		存放组信息</span><br><span class="line">/etc/gshadow	存放组密码信息</span><br><span class="line"></span><br><span class="line">如果手动创建用户不使用命令，需要分别在1./etc/passwd  2./etc/shadow  3./etc/group  4./etc/gshadow创建用户名组等信息，5.创建用户名的家目录6.拷贝环境变量文件<span class="built_in">cp</span> /etc/skel/.bash* /home/abc111/</span><br><span class="line"></span><br><span class="line"><span class="comment">##创建用户命令 useradd</span></span><br><span class="line">useradd [选项]... 用户名</span><br><span class="line"></span><br><span class="line">创建用户名是lgj2 uid1004 用户组1001 备注-c是高杰大大   <span class="comment">#//其中-g指定gid需要指定已经存在的uid</span></span><br><span class="line">[root@lb01 ~]# useradd -u 1004 -g 1001 -c 高杰大大 lgj2</span><br><span class="line"></span><br><span class="line">-d创建用户lgj6并指定家目录（如果指定的家目录已经存在，如指定aaa（存在）为家目录，会报错目录家目录已经存在，但是还是会创建有lgj6用户，但是没有环境变量）</span><br><span class="line">[root@lb01 ~]# useradd lgj6 -d /root/aaa/lgj666</span><br><span class="line">[root@lb01 ~]# useradd lgj7 -M   不创建家目录</span><br><span class="line"></span><br><span class="line"><span class="comment">## 指定用户附加组</span></span><br><span class="line">[root@lb01 ~]# useradd lgj7 -G 1001,1005</span><br><span class="line">[root@lb01 ~]# useradd lgj8 -G lgj,lgj5    同样指定的组需要已存在</span><br><span class="line">[root@lb01 ~]# <span class="built_in">id</span> lgj7</span><br><span class="line">uid=1007(lgj7) gid=1007(lgj7) <span class="built_in">groups</span>=1007(lgj7),1001(lgj),1005(lgj5)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="⑤-修改用户信息-改）">⑤ 修改用户信息(改）</h4>
<table>
<thead>
<tr>
<th>用户</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>-u</td>
<td>指定用户的uid</td>
</tr>
<tr>
<td>-g</td>
<td>指定用户的gid，更换用户所在的主组（指定的组必须存在）</td>
</tr>
<tr>
<td>-c</td>
<td>修改备注信息</td>
</tr>
<tr>
<td>-d</td>
<td>修改用户家目录，修改/etc/passwd文件内容</td>
</tr>
<tr>
<td>-m</td>
<td>配合-d选项，修改完家目录后，迁移家目录</td>
</tr>
<tr>
<td>-s</td>
<td>修改用户登录的shell</td>
</tr>
<tr>
<td>-G</td>
<td>修改用户的附加组，会替换原来的附加组</td>
</tr>
<tr>
<td>-a</td>
<td>修改用户的附加组，配合-G使用，追加附加组</td>
</tr>
<tr>
<td>-L</td>
<td>锁定用户（封号）</td>
</tr>
<tr>
<td>-U</td>
<td>解锁用户（解封）</td>
</tr>
<tr>
<td>-l</td>
<td>修改用户名</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## user modify</span></span><br><span class="line">usermod [选项]... 用户名</span><br><span class="line"></span><br><span class="line">修改用户lgj2的uid为1002，gid为1000，备注信息是你好   <span class="comment">#指定的gid需要已存在</span></span><br><span class="line">[root@lb01 ~]# usermod  lgj2 -u 1002 -g 1000 -c 你好 </span><br><span class="line"></span><br><span class="line"><span class="comment">## 修改用户家目录 注意：不能只使用-d</span></span><br><span class="line">[root@localhost ~]# usermod zls000 -d /home/zls000	家目录下的环境变量不会迁移过去</span><br><span class="line">[root@localhost ~]# usermod zls66 -m -d /opt/zls666   需要配合-m使用</span><br><span class="line"></span><br><span class="line">如果lgj2主要组不在lgj2里（通过usermod修改了），那么使用userdel删除用户的时候lgj2用户组不会被删除，会提醒lgj2用户的现在用户组不是lgj2的主要组</span><br><span class="line"></span><br><span class="line">[root@lb01 ~]# usermod lgj -G 0   修改lgj的附加组（覆盖原有的）</span><br><span class="line">[root@lb01 ~]# usermod lgj -aG 100，110   修改lgj的附加组（追加用户组）</span><br><span class="line"></span><br><span class="line"><span class="comment">#修改用户登录的shell</span></span><br><span class="line">[root@lb01 ~]# usermod lgj -s /sbin/nologin</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#修改用户名</span></span><br><span class="line">[root@lb01 ~]# usermod lgj1 -l lgj2  </span><br><span class="line">如果修改完将提醒旧的邮箱lgj1将不属于lgj1用户了，var/spool/mail/</span><br></pre></td></tr></table></figure>
<h4 id="⑥-删除用户（删）">⑥ 删除用户（删）</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># user delete</span></span><br><span class="line">userdel [选项]... 用户名</span><br><span class="line"><span class="comment">## 直接删除用户，类似于在/etc/passwd文件中把该用户行信息删除（家目录还在和所有用户相关文件都在）</span></span><br><span class="line">[root@localhost ~]# userdel abd</span><br><span class="line"><span class="comment">## 递归删除用户及用户所有相关文件</span></span><br><span class="line">[root@localhost ~]# userdel -r wyl</span><br><span class="line"></span><br><span class="line"><span class="comment">## 因为用户创建时没有创建家目录，所以会有提示，但是用户实际上还是被删除了</span></span><br><span class="line">[root@localhost ~]# userdel -r zls888</span><br><span class="line">userdel: zls888 home directory (/home/zls888) not found</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="⑦-用户扩展知识">⑦ 用户扩展知识</h4>
<p>创建用户时候会以下两个文件作为参照物</p>
<p>/etc/login.defs</p>
<p>/etc/defaults/useradd</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 创建用户时，useradd命令需要读取的配置文件</span></span><br><span class="line">过滤不需要的空行</span><br><span class="line">[root@localhost ~]# grep -i <span class="string">&#x27;^[a-z]&#x27;</span> /etc/login.defs </span><br><span class="line">[root@localhost ~]# grep -Ev <span class="string">&#x27;^$|^#&#x27;</span> /etc/login.defs</span><br><span class="line"><span class="comment">## 用户存放邮件的目录</span></span><br><span class="line">MAIL_DIR				/var/spool/mail</span><br><span class="line"><span class="comment">## 用户默认密码最长使用天数</span></span><br><span class="line">PASS_MAX_DAYS 			99999</span><br><span class="line"><span class="comment">## 用户默认密码最短使用天数</span></span><br><span class="line">PASS_MIN_DAYS 			0</span><br><span class="line"><span class="comment">## 密码最小长度5位数</span></span><br><span class="line">PASS_MIN_LEN 			5</span><br><span class="line"><span class="comment">## 密码快过期后，提前7天提醒</span></span><br><span class="line">PASS_WARN_AGE 			7</span><br><span class="line"><span class="comment">## 普通用户最小UID</span></span><br><span class="line">UID_MIN 				1000</span><br><span class="line"><span class="comment">## 普通用户最大UID</span></span><br><span class="line">UID_MAX 				60000</span><br><span class="line"><span class="comment">## 系统用户最小UID</span></span><br><span class="line">SYS_UID_MIN 			201</span><br><span class="line"><span class="comment">## 系统用户最大UID</span></span><br><span class="line">SYS_UID_MAX 			999</span><br><span class="line"><span class="comment">## 组最小ID</span></span><br><span class="line">GID_MIN 				1000</span><br><span class="line"><span class="comment">## 组最大ID</span></span><br><span class="line">GID_MAX 				60000</span><br><span class="line"><span class="comment">## 系统组最小ID</span></span><br><span class="line">SYS_GID_MIN 			201</span><br><span class="line"><span class="comment">## 系统组最大ID</span></span><br><span class="line">SYS_GID_MAX 			999</span><br><span class="line"><span class="comment">## 默认情况下，创建用户会创建该用户的家目录</span></span><br><span class="line">CREATE_HOME 			<span class="built_in">yes</span></span><br><span class="line"><span class="comment">## 创建用户家目录时，权限的umask为077，也就是用户家目录的目录权限为700</span></span><br><span class="line">UMASK 					077</span><br><span class="line"><span class="comment">## 创建用户时，是否创建出用户的同名组 yes：创建 no：不创建</span></span><br><span class="line">USERGROUPS_ENAB 		<span class="built_in">yes</span></span><br><span class="line"><span class="comment">## 用户密码的加密算法</span></span><br><span class="line">ENCRYPT_METHOD 			SHA512</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 创建用户时，useradd命令需要读取的配置文件</span></span><br><span class="line">[root@localhost ~] <span class="built_in">cat</span> /etc/default/useradd</span><br><span class="line"><span class="comment">## 如果/etc/login.defs 中的USERGROUPS_ENAB是yes，那就不读取改行配置</span></span><br><span class="line"><span class="comment">## 如果/etc/login.defs 中的USERGROUPS_ENAB是no，那就走该行配置，把创建的用户加入gid为100的组</span></span><br><span class="line">GROUP=100</span><br><span class="line"><span class="comment">## 创建用户时，默认用户家目录放在/home下</span></span><br><span class="line">HOME=/home</span><br><span class="line"><span class="comment">## 用户账户有没有期限 -1表示不启用</span></span><br><span class="line">INACTIVE=-1</span><br><span class="line"><span class="comment">## 账号终止日期，不设置表示不启用</span></span><br><span class="line">EXPIRE=</span><br><span class="line"><span class="comment">## 用户登录时的shell</span></span><br><span class="line">SHELL=/bin/bash</span><br><span class="line"><span class="comment">## 用户家目录下的环境变量文件存放原始目录</span></span><br><span class="line">SKEL=/etc/skel</span><br><span class="line"><span class="comment">## 创建用户是否同时创建邮箱</span></span><br><span class="line">CREATE_MAIL_SPOOL=<span class="built_in">yes</span></span><br></pre></td></tr></table></figure>
<h4 id="⑧用户密码管理">⑧用户密码管理</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">passwd 用户名</span><br><span class="line"><span class="comment">## 默认修改当前登录用户的密码</span></span><br><span class="line">[root@localhost ~]# passwd</span><br><span class="line"></span><br><span class="line"><span class="comment">## 该命令只有超级用户可以执行</span></span><br><span class="line">[root@localhost ~]# passwd zls</span><br><span class="line"></span><br><span class="line"><span class="comment">## 普通用户只能修改自己的密码</span></span><br><span class="line">[zls@localhost ~]$ passwd</span><br><span class="line">Changing password <span class="keyword">for</span> user zls.</span><br><span class="line">Changing password <span class="keyword">for</span> zls.</span><br><span class="line">(current) UNIX password:</span><br><span class="line">原密码：</span><br><span class="line">新密码：</span><br><span class="line">确认密码：</span><br><span class="line"></span><br><span class="line"><span class="comment">## 免交互改密码</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;密码&#x27;</span>|passwd --stdin 用户名</span><br><span class="line">CMDB：资产管理系统</span><br><span class="line"></span><br><span class="line"><span class="comment">## 生成随机密码</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">echo</span> <span class="variable">$RANDOM</span>|<span class="built_in">md5sum</span>|<span class="built_in">cut</span> -c <span class="string">&#x27;1-10&#x27;</span></span><br><span class="line">be1e4bbb9b</span><br><span class="line">md5：校验文件完整性</span><br><span class="line"><span class="built_in">md5sum</span>：可以给一个字符串生成一段加密后的字符串</span><br><span class="line"><span class="comment"># -l：指定密码总长度</span></span><br><span class="line"><span class="comment"># -d：指定数字的个数</span></span><br><span class="line"><span class="comment"># -c：指定小写字母个数</span></span><br><span class="line"><span class="comment"># -C：指定大写字母个数</span></span><br><span class="line"><span class="comment"># -s：指定特殊符号个数</span></span><br><span class="line">[root@localhost ~]# mkpasswd -l 24 -d 3 -c 6 -C 7 -s 8</span><br><span class="line">%t[.xl5&amp;74<span class="string">&quot;LP&#x27;inQPr+_PWY</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>
<h3 id="3-用户组管理">3.用户组管理</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##相关文件</span></span><br><span class="line">/etc/group</span><br><span class="line">/etc/gshadow</span><br><span class="line"><span class="comment">#group每列作用</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">head</span> -1 /etc/group</span><br><span class="line">root:x:0:zls444444,zls666</span><br><span class="line">第一列：组名</span><br><span class="line">第二列：组密码占位符</span><br><span class="line">第三列：组GID</span><br><span class="line">第四列：组中的附加成员</span><br><span class="line"></span><br><span class="line"><span class="comment">#gshadow每列作用</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">head</span> -1 /etc/gshadow</span><br><span class="line">root:::zls444444,zls666</span><br><span class="line">root:$6<span class="variable">$q0sHS</span>/5GA2D/ARX<span class="variable">$KlEkprHkTddlN9tTej7</span>/ONeMswVmIFASVnhTQMfwN.ue2hDTmqlqXhiM</span><br><span class="line">b6oBz8vDCQ/zBzDU2gS88j3pNoIXO.::zls444444,zls666</span><br><span class="line">第一列：组名</span><br><span class="line">第二列：组密码</span><br><span class="line">第三列：组管理员</span><br><span class="line">第四列：组中的附加成员</span><br></pre></td></tr></table></figure>
<h4 id="组相关命令">组相关命令</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#增</span></span><br><span class="line">groupadd [选项] 组名</span><br><span class="line"><span class="comment">## 创建组</span></span><br><span class="line">[root@localhost ~]# groupadd ooo</span><br><span class="line"><span class="comment">## 创建组并指定GID</span></span><br><span class="line">[root@localhost ~]# groupadd ppp -g 666</span><br><span class="line"></span><br><span class="line"><span class="comment">#改</span></span><br><span class="line"><span class="comment">## 修改组的gid</span></span><br><span class="line">[root@localhost ~]# groupmod ooo -g 888</span><br><span class="line"><span class="comment">## 修改组名</span></span><br><span class="line">[root@localhost ~]# groupmod ooo -n xxx</span><br><span class="line"></span><br><span class="line"><span class="comment">#删</span></span><br><span class="line">[root@localhost ~]# groupdel xxx</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置组密码</span></span><br><span class="line">[root@localhost ~]# gpasswd ppp</span><br><span class="line">Changing the password <span class="keyword">for</span> group ppp</span><br><span class="line">New Password</span><br><span class="line"></span><br><span class="line"><span class="comment">#切换组身份</span></span><br><span class="line">[root@localhost ~]# newgrp 组名</span><br></pre></td></tr></table></figure>
<h3 id="4-用户切换-提权">4.用户切换 &amp; 提权</h3>
<h4 id="①用户切换">①用户切换</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">su 切换用户，使用普通用户登录，然后使用su命令切换到root。</span><br><span class="line">优点：简单，方便</span><br><span class="line">缺点：需要知道root密码,不安全，切换到root没有日志审计功能</span><br><span class="line"></span><br><span class="line">su - 用户名 -c <span class="string">&#x27;命令&#x27;</span>（<span class="string">&#x27;touch 1.txt&#x27;</span>） 可以不切换用户但是以普通用户执行命令</span><br><span class="line"></span><br><span class="line">su - 用户名		su 用户名，会少加载一个profile的全局变量</span><br><span class="line"><span class="comment">## 从root用户切换到其他用户，不需要输入密码</span></span><br><span class="line"><span class="comment">## 普通用户切换到其他用户，需要输入密码</span></span><br><span class="line"><span class="comment">## 加载顺序</span></span><br><span class="line">/etc/profile &gt; /etc/profile.d/1.sh &gt; /root/.bashrc &gt; /etc/bashrc</span><br><span class="line">/etc/profile</span><br><span class="line">/etc/profile.d/1.sh</span><br><span class="line">.bash_profile</span><br><span class="line">/root/.bashrc</span><br><span class="line">/etc/bashrc</span><br><span class="line">个人配置文件： ~/.bash_profile ~/.bashrc</span><br><span class="line">全局配置文件：/etc/profile /etc/profile.d/*.sh /etc/bashrc</span><br></pre></td></tr></table></figure>
<h4 id="②用户身份提权">②用户身份提权</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> 提权，当需要使用root权限时，进行提权，而无需切换至root用户。</span><br><span class="line">优点：安全，方便</span><br><span class="line">缺点：复杂</span><br><span class="line"></span><br><span class="line"><span class="comment">## 提权执行命令</span></span><br><span class="line">[zls@localhost ~]$ <span class="built_in">sudo</span> <span class="built_in">mkdir</span> /opt/abc</span><br><span class="line">We trust you have received the usual lecture from the <span class="built_in">local</span> System</span><br><span class="line">Administrator. It usually boils down to these three things:</span><br><span class="line"><span class="comment">#1) Respect the privacy of others.</span></span><br><span class="line"><span class="comment">#2) Think before you type.</span></span><br><span class="line"><span class="comment">#3) With great power comes great responsibility.</span></span><br><span class="line">[<span class="built_in">sudo</span>] password <span class="keyword">for</span> zls:</span><br><span class="line">zls is not <span class="keyword">in</span> the sudoers file. This incident will be reported.</span><br><span class="line"></span><br><span class="line"><span class="comment">## 颁发圣旨（提权配置文件）</span></span><br><span class="line">[root@localhost ~]# vim /etc/sudoers</span><br><span class="line">在里面添加lgj用户权限</span><br><span class="line">或者visudo命令添加，例如</span><br><span class="line"><span class="comment">## Allow root to run any commands anywhere</span></span><br><span class="line">root    ALL=(ALL)       ALL</span><br><span class="line">lgj     ALL=(ALL)       ALL</span><br><span class="line"></span><br><span class="line">上面注释的有别名，写上别名就可以设置权限，或者自己写某个命令的目录</span><br><span class="line">root    ALL=(ALL)       ALL</span><br><span class="line">lgj     ALL=(ALL)		/usr/bin/mkdir（这里也可也把上面某个别名注释去掉，写上别名即可使用那个权限）</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 设置命令别名</span></span><br><span class="line">Cmnd_Alias CREATE = /bin/mkdir,/bin/touch</span><br><span class="line"><span class="comment">## 用户提权方法：</span></span><br><span class="line">方法一：</span><br><span class="line"><span class="comment">### visudo不设置用户密码</span></span><br><span class="line">[root@localhost ~]# visudo</span><br><span class="line"></span><br><span class="line"><span class="comment">## Allow root to run any commands anywhere</span></span><br><span class="line">root 	ALL=(ALL) 	ALL</span><br><span class="line">zls 	ALL=(ALL) 	CREATE</span><br><span class="line">cls1 	ALL=(ALL) 	NOPASSWD: ALL</span><br><span class="line"></span><br><span class="line">方法二：只要给用户加入wheel组中，就有<span class="built_in">sudo</span>权限</span><br><span class="line"><span class="comment">## Allows people in group wheel to run all commands</span></span><br><span class="line">%wheel 	ALL=(ALL) 	ALL</span><br><span class="line">%lgj 	ALL=(ALL) 	NOPASSWD: ALL</span><br><span class="line">[root@localhost ~]# useradd lhq1 -G wheel</span><br><span class="line"></span><br><span class="line"><span class="comment">## 切换成普通用户可以查看我这个用户能执行哪些命令</span></span><br><span class="line">[lhq2@localhost ~]$ <span class="built_in">sudo</span> -l</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="【4】权限管理">【4】权限管理</h2>
<h3 id="1-基本权限">1.基本权限</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240413153515306.png" alt="image-20240413153515306"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">User</span><br><span class="line">Group</span><br><span class="line">Other</span><br><span class="line"><span class="comment">## 所属用户：属主</span></span><br><span class="line"><span class="comment">## 所属用户组：属组</span></span><br><span class="line"><span class="comment">## ugo权限</span></span><br><span class="line">//用户对资源来说, 有三种角色</span><br><span class="line">User(u): 属主用户(文件所有者)</span><br><span class="line">Group(g): 属组用户(包含组成员)</span><br><span class="line">Other(o): 其他用户</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>字母</th>
<th>含义</th>
<th>对应权限</th>
</tr>
</thead>
<tbody>
<tr>
<td>r(read)</td>
<td>读取权限</td>
<td>4</td>
</tr>
<tr>
<td>w(write)</td>
<td>写入权限</td>
<td>2</td>
</tr>
<tr>
<td>x(execute)</td>
<td>执行权限</td>
<td>1</td>
</tr>
<tr>
<td>-(没有权限)</td>
<td>没有权限</td>
<td>0</td>
</tr>
</tbody>
</table>
<h4 id="①-修改权限命令">① 修改权限命令</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># change mode</span></span><br><span class="line"><span class="built_in">chmod</span> [选项] 权限 文件名</span><br><span class="line"><span class="comment">## 数字修改方式</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> 777 test1.txt</span><br><span class="line">[root@localhost ~]# ll test1.txt</span><br><span class="line">-rwxrwxrwx. 1 root root 0 Apr 12 17:01 test1.txt</span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> 700 test1.txt</span><br><span class="line">[root@localhost ~]# ll test1.txt</span><br><span class="line">-rwx------. 1 root root 0 Apr 12 17:01 test1.txt</span><br><span class="line"><span class="comment">## ugo修改方式</span></span><br><span class="line"><span class="comment"># 加权限</span></span><br><span class="line"><span class="comment">## u+权限 rwx</span></span><br><span class="line"><span class="comment">## g+权限 w</span></span><br><span class="line"><span class="comment">## o+权限 x</span></span><br><span class="line"><span class="comment">## a+权限 即a是all   可省略a +x +r +w +rw +rx +rwx +wx</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> g+xw test1.txt</span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> +x test1.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#修改ugo三个权限</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> u=rwx,g=w,o=x test1.txt 不如直接修改数字方式</span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> 721 test1.txt</span><br><span class="line"><span class="comment">## 递归修改目录权限</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> -R 222 zls121</span><br><span class="line">[root@localhost ~]# ll -d zls121/</span><br><span class="line">d-w--w--w-. 3 zls121 zls121 139 Apr 12 18:31 zls121/</span><br><span class="line">[root@localhost ~]# ll zls121/</span><br><span class="line">total 0</span><br><span class="line">--w--w--w-. 1 root root 0 Apr 12 18:30 1.txt</span><br><span class="line">--w--w--w-. 1 root root 0 Apr 12 18:30 2.txt</span><br><span class="line">--w--w--w-. 1 root root 0 Apr 12 18:30 3.txt</span><br><span class="line">--w--w--w-. 1 root root 0 Apr 12 18:30 4.txt</span><br><span class="line">[root@localhost ~]# ll zls121/zls1/</span><br><span class="line">total 0</span><br><span class="line">--w--w--w-. 1 root root 0 Apr 12 18:31 1.txt</span><br></pre></td></tr></table></figure>
<h4 id="②-权限对文件的影响">② 权限对文件的影响</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">当文件只有r权限时，可以查看内容，不能写入（文件所属用户可以使用vi强制保存），不能执行</span><br><span class="line">当文件只有w权限时，不能查看，只能写入（使用vi会覆盖文件内容，使用<span class="built_in">echo</span> &gt;&gt;可以追加），不能执行</span><br><span class="line">当文件只有x权限时，不能查看，不能写入，不能执行(都看不了无法执行)</span><br><span class="line"></span><br><span class="line">当文件只有rw权限时，可以查看，可以写入，不能执行</span><br><span class="line">当文件只有rx权限时，可以查看，不能写入，可以执行</span><br><span class="line">当文件只有wx权限时，不能看，能写入，不能执行</span><br><span class="line"></span><br><span class="line">当文件有rwx权限时，可以查看，可以写入，可以执行</span><br><span class="line"></span><br><span class="line"><span class="comment">##总结：x权限不能单独出现，需要配合r权限使用，也不能配合w（因为没有读取权限，就不知道文件内容，所以没法执行）</span></span><br></pre></td></tr></table></figure>
<h4 id="③-权限对目录的影响">③ 权限对目录的影响</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[zls@localhost ~]$ ll /opt/</span><br><span class="line"><span class="built_in">ls</span>: cannot open directory /opt/: Permission denied</span><br><span class="line">[zls@localhost ~]$ <span class="built_in">mkdir</span> /opt/zls</span><br><span class="line"><span class="built_in">mkdir</span>: cannot create directory ‘/opt/zls’: Permission denied</span><br><span class="line">[zls@localhost ~]$ ./opt</span><br><span class="line">-bash: ./opt: No such file or directory</span><br><span class="line">当目录权限为---时，不能查看，不能进入，不能拷贝，不能移动，不能创建，不能删除</span><br><span class="line">当目录权限为r时，能查看目录下的文件名（看不到文件属性），不能进入，不能拷贝，不能移动，不能创建，不能删除</span><br><span class="line">当目录权限为w时，不能查看，不能进入，不能拷贝，不能移动，不能创建，不能删除</span><br><span class="line">当目录权限为x时，不能查看，能进入，不能拷贝，不能移动，不能创建，不能删除</span><br><span class="line"></span><br><span class="line">当目录权限为rw时，能查看目录下的文件名（看不到文件属性），不能进入，不能拷贝，不能移动，不能创建，不能删除</span><br><span class="line">当目录权限为rx时，可以查看，能进入，能拷贝，不能移动，不能创建，不能删除</span><br><span class="line">当目录权限为wx时，不能查看，能进入，能拷贝，能移动，能创建，能删除</span><br><span class="line"><span class="comment">## 只有x权限才能cd进入</span></span><br><span class="line"><span class="comment">## 目录权限，必须两两组合使用</span></span><br><span class="line"><span class="comment">## 目录权限，必须组合x权限使用</span></span><br><span class="line"><span class="comment">## 目录权限，一般情况下，普通用户，只给rx，超级用户 rwx</span></span><br></pre></td></tr></table></figure>
<h3 id="2-特殊权限">2.特殊权限</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">普通用户可以修改自己的密码，在于passwd命令，该命令拥有特殊权限，SetUID，也就是咱们看到的，在属主的权限位的执行权限上是 s.当...普通用户使用passwd命令来更改自己的密码时，实际上是在用passwd命令的所有者，所有者是谁？就是root的身份在执行passwd命令</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">在 Linux 系统中，有三种特殊权限，分别是 SUID 权限、SGID 权限和 SBIT 权限：</span><br><span class="line"><span class="comment">#sUID 权限（Set User ID）：</span></span><br><span class="line">允许用户在执行可执行文件时以文件所有者的身份运行。具有 SUID 权限的文件在执行时将继承文件所有者的权限，而不是执行者自己的权限。这对于需要特定权限才能执行的程序非常有用。</span><br><span class="line"></span><br><span class="line"><span class="comment">#SGID 权限（Set Group ID）：</span></span><br><span class="line">SGID 权限类似于 SUID 权限，但是它是针对群组而不是用户。具有 SGID 权限的文件在执行时将继承文件所属群组的权限，而不是执行者所属群组的权限。</span><br><span class="line"></span><br><span class="line"><span class="comment">#SBIT 权限（Sticky Bit）：</span></span><br><span class="line">主要用于目录。当目录具有 SBIT 权限时，只有目录所有者、文件所有者和 root 用户才能删除或移动该目录中的文件。这可以防止其他用户意外删除或移动他人的文件</span><br></pre></td></tr></table></figure>
<h4 id="SUID">SUID</h4>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240415143350501.png" alt="image-20240415143350501"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 修改密码的命令</span></span><br><span class="line">[root@localhost ~]# passwd</span><br><span class="line"><span class="comment">## 修改密码的命令位置</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">which</span> passwd</span><br><span class="line">/usr/bin/passwd</span><br><span class="line"><span class="comment">## 用户密码信息存放文件</span></span><br><span class="line">[root@localhost ~]# ll /etc/shadow</span><br><span class="line">----------. 1 root root 641 Apr 12 19:50 /etc/shadow</span><br><span class="line"><span class="comment">## 用户密码信息存放文件</span></span><br><span class="line">文件权限：000</span><br><span class="line">所有用户，没有读取权限，写入权限，执行权限</span><br><span class="line"><span class="comment">## 一个普通用户，是否可以修改密码？</span></span><br><span class="line">只能修改自己的密码</span><br><span class="line"><span class="comment">## 问题：为什么一个普通用户，对/etc/shadow文件没有任何操作权限，却可以修改自己的密码？</span></span><br><span class="line"><span class="comment">## 原因：因为passwd命令，属主权限位上有个s权限</span></span><br><span class="line">[zls@localhost ~]$ ll /usr/bin/passwd</span><br><span class="line">-rwsr-xr-x. 1 root root 27832 Jun 10 2014 /usr/bin/passwd</span><br><span class="line">suid授权方式</span><br><span class="line">特殊权限——setgid</span><br><span class="line">授权方式</span><br><span class="line">如果在一个文件的属主权限位上，出现s权限，代表，该文件具有<span class="built_in">set</span> uid权限</span><br><span class="line"><span class="built_in">set</span> uid（suid）权限作用：让使用该文件的用户，以该文件的属主身份执行</span><br><span class="line"><span class="comment">## 因为passwd命令有suid权限，那么普通用户可以以root身份执行该命令，但是为啥不能修改其他用户密码</span></span><br><span class="line">原因：普通用户在执行passwd命令时，有个判断，就是该命令后面不能加任何参数</span><br></pre></td></tr></table></figure>
<p><strong>==suid授权方式==</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">suid数字权限：4000</span><br><span class="line"><span class="comment">## 数字权限授权</span></span><br><span class="line"><span class="built_in">chmod</span> 4xxx 文件名</span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> 4644 cheak_student.sh</span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> 4755 /bin/passwd</span><br><span class="line"><span class="comment">## ugo方式</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> u+s student.txt</span><br><span class="line">s：代表该文件的属主权限位上，本身有x（执行）权限</span><br><span class="line">S：代表该文件的属主权限位上，本身没有x（执行）权限</span><br><span class="line"><span class="comment">## 总结：</span></span><br><span class="line">1.让普通用户对可执行的二进制文件，临时拥有二进制文件的所属权限</span><br><span class="line">2.如果设置的二进制文件没有执行权限，那么suid的权限显示就是S</span><br><span class="line">3.特殊权限suid仅对二进制可执行程序有效，其他文件或目录则无效</span><br><span class="line">注意：suid极其危险，不信可以尝试对vim或者<span class="built_in">rm</span>命令进行设定suid</span><br></pre></td></tr></table></figure>
<h4 id="SGID">SGID</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">将目录设置为SGID后，如果在该目录下创建文件，都将与该目录的所属组保持一致</span><br><span class="line"><span class="comment">## 在文件的属组权限位上出现s权限</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">mkdir</span> /opt/test</span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> g+s /opt/test/</span><br><span class="line">[root@localhost ~]# ll /opt/test/ -d</span><br><span class="line">drwxr-sr-x. 2 root root 6 Apr 15 18:40 /opt/test/</span><br></pre></td></tr></table></figure>
<p><strong>==授权方式==</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">sgid数字权限：2000</span><br><span class="line"><span class="comment">## 数字权限授权</span></span><br><span class="line"><span class="built_in">chmod</span> 2xxx 文件名</span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> 2644 dir1</span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> 2755 dir1</span><br><span class="line">小练习</span><br><span class="line"><span class="comment">## ugo方式</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> g+s dir1</span><br><span class="line">s：代表该文件的属组权限位上，本身有x（执行）权限</span><br><span class="line">S：代表该文件的属组权限位上，本身没有x（执行）权限</span><br><span class="line"><span class="comment">## 总结：</span></span><br><span class="line">1.针对用户组权限位修改，用户创建的目录或文件所属组和该目录的所属组一致。</span><br><span class="line">2.当某个目录设置了sgid后，在该目录中新建的文件不在是创建该文件的默认所属组</span><br><span class="line">3.使用sgid可以使得多个用户之间共享一个目录的所有文件变得简单。</span><br></pre></td></tr></table></figure>
<h4 id="SBIT">SBIT</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sticky（SI TI KI）粘滞，目前只对目录有效，作用如下：</span><br><span class="line">普通用户对该目录拥有w和x权限，即普通用户可以在此目录中拥有写入权限，如果没有粘滞位，那么普通用户拥有w权限，就可以删除此目录下的所有文件，包括其他用户简历的文件。但是一旦被赋予了粘滞位，除了root可以删除所有文件，普通用户就算有w权限也只能删除自己建立的文件，而不能删除其他用户简历的文件。系统中存在的/tmp目录是经典的粘滞位目录，谁都有写权限，因此安全成问题，常常是木马第一手跳板。</span><br></pre></td></tr></table></figure>
<p><strong>==授权方式==</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">SBIT数字权限：1000</span><br><span class="line">suid=4000</span><br><span class="line">sgid=2000</span><br><span class="line">sbit=1000</span><br><span class="line">r=4</span><br><span class="line">w=2</span><br><span class="line">x=1</span><br><span class="line">-=0</span><br><span class="line"><span class="comment">## 数字权限授权</span></span><br><span class="line"><span class="built_in">chmod</span> 1xxx 文件名</span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> 1644 dir1</span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> 1755 dir1</span><br><span class="line"><span class="comment">## ugo方式</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> o+t dir1</span><br><span class="line">t：代表该文件的其他用户权限位上，本身有x（执行）权限</span><br><span class="line">T：代表该文件的其他用户权限位上，本身没有x（执行）权限</span><br><span class="line"><span class="comment">## 总结：</span></span><br><span class="line">1.让多个用户都具有写权限的目录，并让每个用户只能删自己的文件（root除外）。</span><br><span class="line">2.特殊sticky目录表现在others的x位，用小t表示，如果没有执行权限是T</span><br><span class="line">3.一个目录即使它的权限为<span class="string">&quot;777&quot;</span>如果是设置了粘滞位，除了目录的属主和<span class="string">&quot;root&quot;</span>用户有权限删除，除此之</span><br><span class="line">外其他用户都不允许删除该目录下的所有文件</span><br></pre></td></tr></table></figure>
<h4 id="chattr权限">chattr权限</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">chattr只有root用户可以使用，用来修改文件系统的权限属性，建立凌驾于rwx基础权限之上的授权</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看有没有加chattr权限</span></span><br><span class="line">lsattr /etc/passwd </span><br><span class="line"></span><br><span class="line"><span class="comment"># 授权方式</span></span><br><span class="line">[root@localhost ~]# chattr +i /etc/passwd</span><br><span class="line">chattr命令格式：chattr [+-=][选项] 文件名或目录名</span><br><span class="line"><span class="comment">#i：不得任意更动文件或目录</span></span><br><span class="line"><span class="comment">#a：append可以追加，但无法更改文件内容</span></span><br><span class="line">[root@localhost ~]# chattr +a /etc/passwd /etc/shadow /etc/group /etc/gshadow</span><br></pre></td></tr></table></figure>
<h3 id="3-进程掩码umask">3.进程掩码umask</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">系统默认<span class="built_in">umask</span>为022，那么当我们创建一个目录时，正常情况下目录的权限应该是777，但是<span class="built_in">umask</span>表示要减</span><br><span class="line">去的值，所以新目录文件的权限应该是777-022=755。至于文件的权限也依次类推：666-022=644</span><br><span class="line"><span class="comment">## 查看系统默认umask</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">umask</span></span><br><span class="line">0022</span><br><span class="line"><span class="comment">## 目录权限使用777-umask</span></span><br><span class="line"><span class="comment">## 文件权限使用666-umask</span></span><br><span class="line">但是当<span class="built_in">umask</span>出现奇数位时，需要在该位上得到结果后+1</span><br><span class="line"><span class="comment">## umask 147</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">umask</span> 147</span><br><span class="line">[root@localhost ~]# <span class="built_in">mkdir</span> zls789 // 630</span><br><span class="line">[root@localhost ~]# <span class="built_in">touch</span> zls456 // 620</span><br><span class="line"><span class="comment">## 条件</span></span><br><span class="line">[root@localhost ~]# <span class="comment"># 1.uid &gt; 199</span></span><br><span class="line">[root@localhost ~]# <span class="comment"># 2.uid name = gid name</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cat</span> /etc/profile</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$UID</span> -gt 199 ] &amp;&amp; [ <span class="string">&quot;`/usr/bin/id -gn`&quot;</span> = <span class="string">&quot;`/usr/bin/id -un`&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line"><span class="built_in">umask</span> 002</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">umask</span> 022</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment"># UID大于199 并且 用户名和组名子一样 此时 ： umask=002    (平台用户)</span></span><br><span class="line"><span class="comment"># UID小于199时 此时 umask=022	（root用户）</span></span><br><span class="line"><span class="comment"># 用户名和组名不一样时 此时umask=022</span></span><br><span class="line"></span><br><span class="line">用户家目录<span class="built_in">umask</span> 077</span><br><span class="line">[root@lb01 ~]# <span class="built_in">cat</span> /etc/login.defs  </span><br><span class="line"></span><br><span class="line"><span class="comment">#查看文件的数字权限</span></span><br><span class="line"><span class="built_in">stat</span> -c a% 文件   </span><br><span class="line"><span class="built_in">stat</span> 文件</span><br></pre></td></tr></table></figure>
<h3 id="4-文件属主属组修改">4.文件属主属组修改</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## change owner</span></span><br><span class="line"><span class="built_in">chown</span> [选项] 属主:属组 文件名</span><br><span class="line"><span class="comment">## 修改属主和属组</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">chown</span> zls:zls student.txt</span><br><span class="line">[root@localhost ~]# <span class="built_in">chown</span> root.root student.txt</span><br><span class="line"><span class="comment">## 属主不变，修改属组</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">chown</span> :tls student.txt</span><br><span class="line"><span class="comment">## 属组不变，修改属主  只加一个默认就是修改属主</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">chown</span> zls student.txt    </span><br><span class="line"></span><br><span class="line">一个用户，创建出来的文件，不一定权限属于他的主组，newgrp只要切换过组，在哪个组工作，创建出的文件属组就属于哪个组</span><br><span class="line"><span class="comment">## 修改目录属主和属组下面文件权限不变</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">chown</span> www.www /code/</span><br><span class="line"><span class="comment">## 递归修改目录的属主和属组</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">chown</span> -R www.www /code/</span><br></pre></td></tr></table></figure>
<h2 id="【5】重定向">【5】重定向</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">将原本要输出到屏幕的数据信息，重新定向到指定的文件中。</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#使用重定向场景</span></span><br><span class="line">1.当屏幕输出的信息很重要，而且希望保存重要的信息时。</span><br><span class="line">2.后台执行中的程序，不希望他干扰屏幕正常的输出结果时。</span><br><span class="line">3.系统的例行命令，例如定时任务的执行结果，希望他可以存下来时。</span><br><span class="line">4.一些执行命令，我们已经知道他可能出现错误信息，想将他直接丢弃时。</span><br><span class="line">5.执行一个命令，可能报错和正确的输出并存，类似错误日志与标准正确日志需要分别输出至不同的文件。</span><br></pre></td></tr></table></figure>
<p>执行一个shell程序时通常会自动打开三个文件描述符</p>
<table>
<thead>
<tr>
<th style="text-align:center">名称</th>
<th style="text-align:center">文件描述符</th>
<th style="text-align:center">作用</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">标准输入 (stdin)</td>
<td style="text-align:center">0</td>
<td style="text-align:center">通常是键盘，也可以是其他文件或者命令的输出的内容可以作为标准输入</td>
</tr>
<tr>
<td style="text-align:center">标准输出 (stdout)</td>
<td style="text-align:center">1</td>
<td style="text-align:center">默认输出到屏幕</td>
</tr>
<tr>
<td style="text-align:center">错误输出 (stderr)</td>
<td style="text-align:center">2</td>
<td style="text-align:center">默认输出到屏幕</td>
</tr>
<tr>
<td style="text-align:center">文件名称 (filename)</td>
<td style="text-align:center">3+</td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">标准输入：stdin</span><br><span class="line">标准输出：stdout</span><br><span class="line">错误输出：stderr</span><br><span class="line">[root@localhost ~]# ll /dev/std*</span><br><span class="line">lrwxrwxrwx. 1 root root 15 Apr 16 15:52 /dev/stderr -&gt; /proc/self/fd/2</span><br><span class="line">lrwxrwxrwx. 1 root root 15 Apr 16 15:52 /dev/stdin -&gt; /proc/self/fd/0</span><br><span class="line">lrwxrwxrwx. 1 root root 15 Apr 16 15:52 /dev/stdout -&gt; /proc/self/fd/1</span><br><span class="line">文件描述符fd：一个命令或者程序在执行过程中，至少要打开4个文件描述符</span><br><span class="line">文件描述符0：标准输入</span><br><span class="line">文件描述符1：标准输出</span><br><span class="line">文件描述符2：错误输出</span><br><span class="line">文件描述符3+：文件名</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>输入输出</th>
<th>符号</th>
</tr>
</thead>
<tbody>
<tr>
<td>标准输入重定向</td>
<td>&lt; 或 0&lt;</td>
</tr>
<tr>
<td>标准输出重定向</td>
<td>&gt; 或 1&gt;</td>
</tr>
<tr>
<td>错误输出重定向</td>
<td>2&gt;</td>
</tr>
</tbody>
</table>
<p>查看标准输入输出设备</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@lb01 ~]# ll /dev/std*</span><br><span class="line">lrwxrwxrwx. 1 root root 15 Apr 16 08:16 /dev/stderr -&gt; /proc/self/fd/2		错误输出</span><br><span class="line">lrwxrwxrwx. 1 root root 15 Apr 16 08:16 /dev/stdin -&gt; /proc/self/fd/0		标准输入</span><br><span class="line">lrwxrwxrwx. 1 root root 15 Apr 16 08:16 /dev/stdout -&gt; /proc/self/fd/1		标准输出</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>类型</th>
<th>操作符</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td>标准覆盖输出重定向</td>
<td>1&gt;或&gt;</td>
<td>将命令的执行结果输出到指定的文件中, 而不是直接显示在屏幕上</td>
</tr>
<tr>
<td>标准追加输出重定向</td>
<td>&gt;&gt;1或1&gt;&gt;</td>
<td>将命令执行的结果追加输出到指定文件</td>
</tr>
<tr>
<td>错误覆盖输出重定向</td>
<td>2&gt;</td>
<td>将程序的错误结果输出到执行的文件中，会覆盖源文件内容</td>
</tr>
<tr>
<td>错误追加输出重定向</td>
<td>2&gt;&gt;</td>
<td>将程序输出的错误结果以追加的方式输出到指定文件中，不会覆盖源文件</td>
</tr>
<tr>
<td>标准输入重定向</td>
<td>&lt;&lt;</td>
<td>将命令中接收输入的途径由默认的键盘更改为指定的文件</td>
</tr>
</tbody>
</table>
<h3 id="1-重定向使用">1.重定向使用</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">标准输出追加重定向</span><br><span class="line">[root@lb01 ~]# <span class="built_in">echo</span> <span class="string">&quot;111&quot;</span> &gt;&gt;1.txt</span><br><span class="line">标准输出覆盖重定向</span><br><span class="line">[root@lb01 ~]# <span class="built_in">echo</span> <span class="string">&quot;111&quot;</span> &gt;1.txt</span><br><span class="line">错误输出覆盖重定向</span><br><span class="line">[root@lb01 ~]# nginx -V 2&gt;&gt; 1.txt</span><br><span class="line">错误输出追加重定向</span><br><span class="line">[root@lb01 ~]# nginx -V 2&gt; 1.txt</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>==1.错误输出和正确输出，都输出到同一个文件中==</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 方法一：</span></span><br><span class="line">[root@lb01 ~]# find /etc/ -<span class="built_in">type</span> d &gt; /tmp/1.<span class="built_in">log</span> 2&gt;/tmp/1.<span class="built_in">log</span></span><br><span class="line"><span class="comment">## 方法二：</span></span><br><span class="line">标准输出到2.<span class="built_in">log</span>文件里，错误输出到和标准输出一样位置</span><br><span class="line">[root@lb01 ~]# find /etc/ -<span class="built_in">type</span> d 1&gt; /tmp/2.<span class="built_in">log</span> 2&gt;&amp;1</span><br><span class="line">和上面相反</span><br><span class="line">[root@lb01 ~]# find /etc/ -<span class="built_in">type</span> d 2&gt; /tmp/6.<span class="built_in">log</span> 1&gt;&amp;2</span><br><span class="line"><span class="comment">## 方法三：</span></span><br><span class="line">[root@lb01 ~]# find /etc/ -<span class="built_in">type</span> d &amp;&gt; /tmp/11.<span class="built_in">log</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#将命令结果重定向到黑洞</span></span><br><span class="line">[zls@localhost ~]$ find /etc/ -<span class="built_in">type</span> d 1&gt; /tmp/6.<span class="built_in">log</span> 2&gt;/dev/null 标准输出到6.<span class="built_in">log</span>，错误输出到黑洞</span><br><span class="line">[zls@localhost ~]$ find /etc/ -<span class="built_in">type</span> d &amp;&gt;/dev/null  所有输出结果到黑洞</span><br></pre></td></tr></table></figure>
<p><strong>==2.标准输出和错误输出到两个文件==</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /etc -name <span class="string">&quot;*.conf&quot;</span> 1&gt;a 2&gt;b</span><br></pre></td></tr></table></figure>
<p><strong>==3.将标准输出和标准错误输出重定向到同一个文件, 混合输出==</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[zls@zls ~]$ find /etc -name <span class="string">&quot;*.conf&quot;</span> &amp;&gt;ab </span><br><span class="line">[zls@zls ~]$ find /etc -name <span class="string">&quot;*.conf&quot;</span> &gt;ab 2&amp;&gt;1</span><br><span class="line">[zls@zls ~]$ find /etc -name <span class="string">&quot;*.conf&quot;</span> &gt;ab 2&gt;&amp;1</span><br><span class="line">合并两个文件到一个文件</span><br><span class="line"><span class="built_in">cat</span> 1 2 &gt;3</span><br></pre></td></tr></table></figure>
<h3 id="2-输入重定向">2.输入重定向</h3>
<p>输入重定向，即原本从键盘等设备上获得的输入信息，重定向由命令的输出作为输入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# cat &gt;1.txt	等待键盘输入重定向到1.txt，Ctrl+c终止输入</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# cat &lt;&lt;EOF &gt; 1.txt   等待键盘输入，遇到Eof结束重定向到1.txt</span><br><span class="line">111</span><br><span class="line">222</span><br><span class="line">333</span><br><span class="line">EOF</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="3-两条命令重定向">3.两条命令重定向</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# (<span class="built_in">ls</span>;ifconfig) &gt; /tmp/1.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">## 将内容输出到文件，然后放后台执行 加个&amp;</span></span><br><span class="line">[root@localhost ~]# ping baidu.com &amp;&gt;/tmp/a.log &amp;</span><br><span class="line"></span><br><span class="line">扩展点: subshell</span><br><span class="line">[root@zls ~]# <span class="built_in">cd</span> /boot; <span class="built_in">ls</span></span><br><span class="line"><span class="comment">#subshell 中执行</span></span><br><span class="line">[root@zls ~]# (<span class="built_in">cd</span> /boot; <span class="built_in">ls</span>)</span><br><span class="line"><span class="comment">#如果不希望某些命令的执行对当前 shell 环境产生影响，请在subshell中执行</span></span><br></pre></td></tr></table></figure>
<h3 id="4-管道技术">4.管道技术</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">管道符作用：将管道符左边命令的标准输出交给管道符右边命令的标准输入来处理</span><br><span class="line">1）左边命令他得是标准输出 1&gt;</span><br><span class="line">2）右边命令必须有标准输入</span><br></pre></td></tr></table></figure>
<p><strong>==tee管道技术==</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240416145607541.png" alt="image-20240416145607541"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tee</span>相当于开个侧门输出重定向到某个文件，原理见上图</span><br><span class="line">[root@localhost ~]# <span class="built_in">echo</span> <span class="variable">$RANDOM</span>|<span class="built_in">tee</span> /dev/pts/3|passwd --stdin zls</span><br><span class="line">[root@localhost ~]# <span class="built_in">echo</span> <span class="variable">$RANDOM</span>|<span class="built_in">tee</span> /tmp/pass.txt|passwd --stdin zls</span><br><span class="line"><span class="comment">## -a：append 追加到文件中</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">echo</span> <span class="variable">$RANDOM</span>|<span class="built_in">tee</span> -a /tmp/pass.txt|passwd --stdin zls</span><br></pre></td></tr></table></figure>
<h3 id="5-xargs传参">5.xargs传参</h3>
<p><strong>xaras后面不识别别名</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">xargs将管道符前面命令的标准输出，当成结果，放到管道符右边xargs后面的命令的后面执行</span><br><span class="line">[root@localhost ~]# <span class="built_in">echo</span> &#123;1..10&#125;</span><br><span class="line">1 2 3 4 5 6 7 8 9 10</span><br><span class="line">[root@localhost ~]# <span class="built_in">echo</span> &#123;1..5&#125;|xargs -n1</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">[root@localhost ~]# <span class="built_in">echo</span> &#123;1..10&#125;|xargs -n2    -n2每两个一行 -n3每三个拍一行</span><br><span class="line">1 2</span><br><span class="line">3 4</span><br><span class="line">5 6</span><br><span class="line">7 8</span><br><span class="line">9 10</span><br><span class="line">[root@lb01 ~]# <span class="built_in">seq</span> 10|xargs -n3</span><br><span class="line">1 2 3</span><br><span class="line">4 5 6</span><br><span class="line">7 8 9</span><br><span class="line">10</span><br><span class="line"></span><br><span class="line"><span class="comment">## 找出来的文件拷贝到/tmp</span></span><br><span class="line">[root@localhost ~]# grep -rl <span class="string">&#x27;xxx&#x27;</span> ./|xargs <span class="built_in">cp</span> -t /tmp/</span><br><span class="line">[root@localhost ~]# grep -rl <span class="string">&#x27;xxx&#x27;</span> ./|xargs -I &#123;&#125; <span class="built_in">cp</span> &#123;&#125; /opt</span><br><span class="line"></span><br><span class="line">注意事项:</span><br><span class="line">1.在管道后面的命令，都不应该在写文件名</span><br><span class="line">2.在管道中只有标准输出才可以传递下一个命令, 标准错误输出会直接输出终端显示, 建议在使用管</span><br><span class="line">道前将标准错误输出重定向。</span><br><span class="line">例如: find /etc -name <span class="string">&quot;*.conf&quot;</span> 2&gt;/dev/null | grep rc</span><br><span class="line">3.有些命令不支持管道技术, 但是可以通过 xargs 来实现管道传递。</span><br><span class="line">例如: <span class="built_in">which</span> <span class="built_in">cat</span>|xargs ls-l</span><br><span class="line">例如: <span class="built_in">ls</span> |xargs <span class="built_in">rm</span> -rvf</span><br><span class="line">-I 选项作用是将前面输出结果打包到&#123;&#125;内</span><br><span class="line">例如: <span class="built_in">ls</span> |xargs <span class="built_in">cp</span> -rvft /tmp/ ==&gt; <span class="built_in">ls</span> | xargs -I &#123;&#125; <span class="built_in">cp</span> -rvf &#123;&#125; /tmp</span><br><span class="line">例如: <span class="built_in">ls</span> |xargs <span class="built_in">mv</span> -t /tmp/ ==&gt; <span class="built_in">ls</span> | xargs -I &#123;&#125; <span class="built_in">mv</span> &#123;&#125; /tmp</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>xargs选项</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>-a</td>
<td>设置从文件中读取数据</td>
</tr>
<tr>
<td>-d</td>
<td>设置自定义定界符</td>
</tr>
<tr>
<td>-l</td>
<td>设置替换字符串</td>
</tr>
<tr>
<td>-n</td>
<td>设置多行输出</td>
</tr>
<tr>
<td>-p</td>
<td>执行命令前询问用户是否确认</td>
</tr>
<tr>
<td>-r</td>
<td>如果输入数据为空，则不执行</td>
</tr>
<tr>
<td>-s</td>
<td>设置每条命令最大字符数</td>
</tr>
<tr>
<td>-t</td>
<td>显示xargs执行的命令</td>
</tr>
</tbody>
</table>
<h2 id="【6】文件解压缩">【6】文件解压缩</h2>
<h3 id="1-常见压缩包类型">1.常见压缩包类型</h3>
<table>
<thead>
<tr>
<th>格式</th>
<th>压缩工具</th>
</tr>
</thead>
<tbody>
<tr>
<td>.zip</td>
<td>zip压缩工具</td>
</tr>
<tr>
<td>.gz</td>
<td>gzip压缩工具，只能压缩文件，会删除源文件（通常配合tar使用）</td>
</tr>
<tr>
<td>bz2</td>
<td>bzip2压缩工具，只能压缩文件，会删除源文件（通常配合tar使用）</td>
</tr>
<tr>
<td>.tar.gz</td>
<td>先使用tar命令归档打包，然后使用gzip压缩</td>
</tr>
<tr>
<td>tar.bz2</td>
<td>先使用tar命令归档打包，然后使用bzip2压缩</td>
</tr>
</tbody>
</table>
<h3 id="2-压缩解压命令—gzip">2.压缩解压命令—gzip</h3>
<p>注意：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">使用打包压缩命令，最好到需要被打包目录的上级目录,</span><br><span class="line">解压时，-C最好不要指定/目录 可能会覆盖/下某些原文件</span><br><span class="line">[root@localhost ~]# tar xf mysql.tgz -C /  </span><br><span class="line">/etc/profile</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 压缩文件</span></span><br><span class="line">语法：gzip 文件名</span><br><span class="line">[root@localhost ~]# gzip file1</span><br><span class="line">[root@driver-zeng ~]# <span class="built_in">echo</span> 22222|gzip &gt; zls.txt.gz</span><br><span class="line"></span><br><span class="line"><span class="comment">## 解压    -d：解压文件</span></span><br><span class="line"></span><br><span class="line">[root@localhost ~]# gzip -d file1.gz</span><br><span class="line"><span class="comment">## 查看文件类型</span></span><br><span class="line">[root@localhost ~]# file file2.gz</span><br><span class="line">file2.gz: gzip compressed data, was <span class="string">&quot;file2&quot;</span>, from Unix, last modified: Thu Apr</span><br><span class="line">18 17:33:26 2024</span><br><span class="line"></span><br><span class="line"><span class="comment">## 可以直接查看压缩包中文件的内容</span></span><br><span class="line">[root@localhost ~]# zcat file4.gz</span><br><span class="line">xxx</span><br><span class="line"><span class="comment">## 特点：</span></span><br><span class="line">1.压缩包后缀.gz</span><br><span class="line">2.压缩后源文件不存在</span><br><span class="line">3.压缩率很高</span><br><span class="line">4.缺陷就是，不能压缩目录，不能压缩多个文件</span><br><span class="line">5.解压后，压缩包不在了，源文件出来了</span><br><span class="line">6.可以直接使用命令查看压缩包中文件的内容</span><br></pre></td></tr></table></figure>
<h3 id="3-压缩解压命令—zip">3.压缩解压命令—zip</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 安装</span></span><br><span class="line">[root@localhost ~]# yum install -y zip</span><br><span class="line"></span><br><span class="line"><span class="comment">## 语法：</span></span><br><span class="line">zip 包名 文件名...</span><br><span class="line"></span><br><span class="line"><span class="comment">## 压缩文件</span></span><br><span class="line">[root@localhost ~]# zip file1.zip file1</span><br><span class="line"></span><br><span class="line"><span class="comment">## 压缩多个文件</span></span><br><span class="line">[root@localhost ~]# zip file.zip file1 file10</span><br><span class="line"></span><br><span class="line"><span class="comment">## 查看文件类型</span></span><br><span class="line">[root@localhost ~]# file file.zip</span><br><span class="line">file.zip: Zip archive data, at least v1.0 to extract</span><br><span class="line"></span><br><span class="line"><span class="comment">## 压缩目录    -r 包含目录内容一起压缩</span></span><br><span class="line">[root@localhost ~]# zip -r dir1.zip dir1/</span><br><span class="line"></span><br><span class="line"><span class="comment">## 指定路径压缩    压缩test下所有文件到tmp下，文件名是test.zip</span></span><br><span class="line">[root@localhost ~]# zip -r /tmp/test.zip <span class="built_in">test</span>/</span><br><span class="line"></span><br><span class="line"><span class="comment">## 解压</span></span><br><span class="line">[root@localhost ~]# yum install -y unzip</span><br><span class="line">[root@localhost opt]# unzip dir1.zip</span><br><span class="line">[root@localhost tmp]# unzip /opt/dir1.zip	解压指定目录文件</span><br><span class="line"><span class="comment">## 查看包里有哪些文件或目录</span></span><br><span class="line">[root@localhost <span class="built_in">local</span>]# unzip -l /opt/dir1.zip</span><br><span class="line">Archive: /opt/dir1.zip</span><br><span class="line">Length Date Time Name</span><br><span class="line">--------- ---------- ----- ----</span><br><span class="line">0 04-18-2024 18:40 dir1/</span><br><span class="line">26 04-18-2024 18:40 dir1/file1.gz</span><br><span class="line">27 04-18-2024 18:40 dir1/file10.gz</span><br><span class="line">26 04-18-2024 18:40 dir1/file2.gz</span><br><span class="line">26 04-18-2024 18:40 dir1/file3.gz</span><br><span class="line">26 04-18-2024 18:40 dir1/file4.gz</span><br><span class="line">261 11 files</span><br><span class="line"><span class="comment">## 特点：</span></span><br><span class="line">1.压缩包后缀.zip</span><br><span class="line">2.压缩后源文件存在</span><br><span class="line">3.压缩率很高</span><br><span class="line">4.默认情况下不能压缩目录，能压缩多个文件，压缩目录需要选项</span><br><span class="line">5.压缩时可以指定压缩包的路径</span><br><span class="line">6.解压后，压缩包还在，源文件出来了</span><br><span class="line">7.不可以直接使用命令查看压缩包中文件的内容</span><br></pre></td></tr></table></figure>
<h3 id="4-压缩解压命令—tar">4.压缩解压命令—tar</h3>
<table>
<thead>
<tr>
<th>选项</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>c</td>
<td>创建归档文件</td>
</tr>
<tr>
<td>f</td>
<td>指定归档文件的包名</td>
</tr>
<tr>
<td>z</td>
<td>使用gzip来压缩归档后的文件，xf解压.tar.gz包</td>
</tr>
<tr>
<td>x</td>
<td>对归档文件进行解压</td>
</tr>
<tr>
<td>v</td>
<td>显示过程</td>
</tr>
<tr>
<td>t</td>
<td>查看压缩包中的所有文件和目录</td>
</tr>
<tr>
<td>X</td>
<td>可以排除多个不想打包的文件，指定文件名   (把不想打包的文件名写入一个文件，X指定这个文件就行，若排除的文件在嵌套目录，则把相对路径写上即可)</td>
</tr>
<tr>
<td>h</td>
<td>打包软链接的源文件</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td>J</td>
<td>使用xz压缩归档后的文件，xf 解压.tar.xz包</td>
</tr>
<tr>
<td>-P</td>
<td>使用绝对路径打包</td>
</tr>
<tr>
<td>j</td>
<td>使用bzip2压缩归档后的文件，xf解压 .tar.bz2包</td>
</tr>
<tr>
<td>-C</td>
<td>解压到指定目录</td>
</tr>
<tr>
<td>–exclude</td>
<td>排除不想要的文件</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## tar命令本身只是一个归档命令</span></span><br><span class="line"><span class="comment">## 语法：</span></span><br><span class="line">tar [选项] 包名 文件...</span><br><span class="line">[root@localhost ~]# file abc.tar</span><br><span class="line">abc.tar: POSIX tar archive (GNU)</span><br><span class="line">[root@localhost ~]# file nginx-1.22.1.tar.gz</span><br><span class="line">nginx-1.22.1.tar.gz: gzip compressed data, from Unix, last modified: Wed Oct 19</span><br><span class="line">16:02:28 2022</span><br><span class="line"><span class="comment">## 文件归档</span></span><br><span class="line">[root@localhost ~]# tar cf dir1.tar dir1</span><br><span class="line"><span class="comment">## 文件归档并指定路径</span></span><br><span class="line">[root@localhost ~]# tar cf /tmp/dir1_xxx.tar dir1</span><br><span class="line"><span class="comment">## 压缩目录</span></span><br><span class="line">[root@localhost ~]# tar zcf dir1.tgz dir1/</span><br><span class="line"><span class="comment">## 压缩并显示过程</span></span><br><span class="line">[root@localhost ~]# tar zcvf dir1.tgz dir1/</span><br><span class="line"><span class="comment">## 解压</span></span><br><span class="line">[root@localhost ~]# tar zxf dir1.tgz</span><br><span class="line"><span class="comment">## 查看</span></span><br><span class="line">[root@localhost ~]# tar tf nginx-1.22.1.tar.gz</span><br><span class="line"><span class="comment">## 解压到指定目录</span></span><br><span class="line">[root@localhost ~]# tar zxf nginx-1.22.1.tar.gz -C /tmp/</span><br><span class="line"><span class="comment">## 打包时排除不想要的文件</span></span><br><span class="line">[root@localhost tmp]# tar zcf root2.tgz --exclude=file6 --exclude=file7 /root</span><br><span class="line">1.归档包后缀.tar</span><br><span class="line">2.归档后源文件存在</span><br><span class="line">3.没有压缩率</span><br><span class="line">4.默认情况下能归档目录，能归档多个文件</span><br><span class="line">5.归档时可以指定归档的路径</span><br><span class="line">6.解压后，压缩包还在，源文件出来了</span><br><span class="line">7.不可以直接使用命令查看压缩包中文件的内容</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#移动海量小文件使用tar</span></span><br><span class="line">[root@localhost abc]# tar czf - ./ | tar xzf - -C /tmp</span><br></pre></td></tr></table></figure>
<h2 id="【7】软件安装">【7】软件安装</h2>
<h3 id="1-rpm包">1.rpm包</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># RPM全称 RPM Package Manager 缩写，由红帽开发用于软件包的安装，升级卸载与查询</span></span><br></pre></td></tr></table></figure>
<p><strong>==RPM包名==</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tree-  1.6.0  -  10        . el7      .     x86_64    .rpm</span><br><span class="line">包名   版本号   发布了10次   适用于7系系统    系统架构   文件后缀</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>分类</th>
<th>安装</th>
<th>版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>rpm包（需要安装）</td>
<td>预先编译打包,安装简单</td>
<td>软件版本偏低</td>
</tr>
<tr>
<td>源码包（需要编译、安装）</td>
<td>手动编译打包,安装繁琐</td>
<td>软件版本最新</td>
</tr>
<tr>
<td>二进制包(绿色免安装软件)</td>
<td>解压即可使用, 安装简单</td>
<td>版本跟官方保持一致，不能修改源码</td>
</tr>
</tbody>
</table>
<p>##注意: 不管是源码包，还是rpm包,安装时都可能会有依赖关系</p>
<h4 id="1-获取RPM包">1. 获取RPM包</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">1.RedHat光盘或官方网站 （通过挂载的方式访问）</span><br><span class="line">[root@localhost ~]# mount /dev/cdrom /mnt    mount挂载虚拟机设置镜像保持连接状态</span><br><span class="line">mount: /dev/sr0 is write-protected, mounting read-only</span><br><span class="line">[root@localhost ~]# <span class="built_in">ls</span> -1 /mnt/Packages/|<span class="built_in">wc</span> -l     <span class="built_in">ls</span> -1查看内容竖向排列</span><br><span class="line">4022</span><br><span class="line"><span class="built_in">df</span> -h   可以查看挂载情况</span><br><span class="line">[root@lb01 ~]# <span class="built_in">df</span> -h</span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/sda3        19G  1.6G   18G   9% /</span><br><span class="line">devtmpfs        476M     0  476M   0% /dev</span><br><span class="line">tmpfs           487M     0  487M   0% /dev/shm</span><br><span class="line">tmpfs           487M  7.6M  479M   2% /run</span><br><span class="line">tmpfs           487M     0  487M   0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1       497M  120M  378M  25% /boot</span><br><span class="line">tmpfs            98M     0   98M   0% /run/user/0</span><br><span class="line">/dev/sr0        4.3G  4.3G     0 100% /mnt</span><br><span class="line"></span><br><span class="line">2.RPM包官网 http://rpmfind.net/</span><br><span class="line">以后报错中，libCHARSET3-samba4.so .so结尾的文件不存在，需要安装，不知道输入哪个RPM包，去RPM官网查询即可</span><br><span class="line"></span><br><span class="line"><span class="comment">## 各大服务的官网</span></span><br><span class="line">mysql：https://www.mysql.com/</span><br><span class="line">nginx：https://www.nginx.org/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 各大镜像站（yum仓库，yum源）：</span></span><br><span class="line">阿里云：https://developer.aliyun.com/mirror/</span><br><span class="line">网易镜像站：https://mirrors.163.com/</span><br><span class="line">华为源：https://mirrors.huaweicloud.com/</span><br><span class="line">清华源：https://mirrors.tuna.tsinghua.edu.cn/</span><br><span class="line">中科大：https://mirrors.ustc.edu.cn/</span><br></pre></td></tr></table></figure>
<h4 id="2-RPM包管理">2.RPM包管理</h4>
<h5 id="①-安装">① 安装</h5>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 语法：</span></span><br><span class="line">rpm [选项] 安装包名</span><br><span class="line">i：install 安装</span><br><span class="line">v：显示安装过程</span><br><span class="line">h：显示进度条</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--<span class="built_in">test</span>：检测是否能安装成功</span><br><span class="line">--force：强制安装</span><br><span class="line">--nodeps：忽略依赖关系</span><br><span class="line"></span><br><span class="line"><span class="comment">## 本地安装    需要挂载镜像进入到Packages文件里</span></span><br><span class="line">[root@localhost Packages]# rpm -i tree-1.6.0-10.el7.x86_64.rpm  </span><br><span class="line">[root@localhost ~]# rpm -ivh /mnt/Packages/unzip-6.0-19.el7.x86_64.rpm</span><br><span class="line"></span><br><span class="line"><span class="comment">## 远程安装</span></span><br><span class="line">[root@localhost Packages]# rpm -i https://mirrors.aliyun.com/centos/7.9.2009/os/x86_64/Packages/tree-1.6.0-10.el7.x86_64.rpm</span><br><span class="line">[root@localhost Packages]# rpm -ivh https://mirrors.aliyun.com/centos/7.9.2009/os/x86_64/Packages/tree-1.6.0-10.el7.x86_64.rpm     </span><br><span class="line">显示进度条和安装过程</span><br></pre></td></tr></table></figure>
<h5 id="②-查询">② 查询</h5>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">-q： query 查询</span><br><span class="line">-qa：查询系统内所有安装过的包</span><br><span class="line">-ql：查询软件包安装完后，配置文件、帮助文档、程序....的所在目录（[# rpm -ql nginx）</span><br><span class="line">-qc：查询软件安装后配置文件  conf配置文件	（# rpm -qc nginx）</span><br><span class="line">-qf：逆向查询，根据文件名，可以查出该文件是安装了哪个RPM包   （需要完整目录）（# rpm -qf /usr/sbin/nginx）</span><br><span class="line"><span class="comment">## 这个文件/etc/redhat-release属于哪个RPM包，该包的相关信息打印出来</span></span><br><span class="line">1.[root@localhost ~]# rpm -qi $(rpm -qf /etc/redhat-release)</span><br><span class="line">2.[root@localhost ~]# rpm -qf /etc/redhat-release|xargs rpm -qi</span><br><span class="line">3.[root@localhost ~]# rpm -qif /etc/redhat-release</span><br><span class="line"></span><br><span class="line">----</span><br><span class="line"><span class="comment">## -q --scripts 查询安装时要执行的脚本</span></span><br><span class="line">[root@localhost ~]# rpm -q --scripts nginx</span><br><span class="line">----</span><br><span class="line"></span><br><span class="line">-qi：查看已安装安装包的详细信息   (后面跟包名)</span><br><span class="line">-qd：查看帮助文档位置</span><br><span class="line">-qip：可以查看未安装的包详细信息  前提：得有这个包</span><br><span class="line">[root@localhost ~]# rpm -qip /mnt/Packages/zip-3.0-11.el7.x86_64.rpm</span><br><span class="line">-qlp：可以查看未安装的包，安装后会产生哪些文件</span><br><span class="line">[root@localhost ~]# rpm -qlp /mnt/Packages/zip-3.0-11.el7.x86_64.rpm</span><br><span class="line">/usr/bin/zip</span><br><span class="line">/usr/bin/zipcloak</span><br><span class="line">/usr/bin/zipnote</span><br><span class="line">/usr/bin/zipsplit</span><br><span class="line">/usr/share/doc/zip-3.0</span><br><span class="line">/usr/share/doc/zip-3.0/CHANGES</span><br><span class="line">/usr/share/doc/zip-3.0/LICENSE</span><br><span class="line"></span><br><span class="line"><span class="comment">## -q后面接包名</span></span><br><span class="line">[root@localhost ~]# rpm -q tree // 安装过了</span><br><span class="line">tree-1.6.0-10.el7.x86_64</span><br><span class="line">[root@localhost ~]# rpm -q tree // 没有安装</span><br><span class="line">package tree is not installed</span><br><span class="line"><span class="comment">## 过滤查询是否安装</span></span><br><span class="line">[root@localhost ~]# rpm -qa|grep tree</span><br><span class="line">tree-1.6.0-10.el7.x86_64</span><br><span class="line">[root@localhost ~]# rpm -qa|grep mysql</span><br><span class="line">[root@localhost ~]# rpm -qa|grep nginx</span><br><span class="line"><span class="comment">## 查看详细信息</span></span><br><span class="line">[root@localhost ~]# rpm -qi tree</span><br><span class="line">Name : tree</span><br><span class="line">Version : 1.6.0</span><br><span class="line">Release : 10.el7</span><br><span class="line">Architecture: x86_64</span><br><span class="line">Install Date: Fri 19 Apr 2024 08:05:31 PM CST</span><br><span class="line">Group : Applications/File</span><br><span class="line">Size : 89505</span><br><span class="line">License : GPLv2+</span><br><span class="line">Signature : RSA/SHA256, Fri 04 Jul 2014 01:36:46 PM CST, Key ID</span><br><span class="line">24c6a8a7f4a80eb5</span><br><span class="line">Source RPM : tree-1.6.0-10.el7.src.rpm</span><br><span class="line">Build Date : Tue 10 Jun 2014 03:28:53 AM CST</span><br><span class="line">Build Host : worker1.bsys.centos.org</span><br><span class="line">Relocations : (not relocatable)</span><br><span class="line">Packager : CentOS BuildSystem &lt;http://bugs.centos.org&gt;</span><br><span class="line">Vendor : CentOS</span><br><span class="line">URL : http://mama.indstate.edu/users/ice/tree/</span><br><span class="line">Summary : File system tree viewer</span><br><span class="line">Description :</span><br><span class="line">The tree utility recursively displays the contents of directories <span class="keyword">in</span> a</span><br><span class="line">tree-like format. Tree is basically a UNIX port of the DOS tree</span><br><span class="line">utility.</span><br><span class="line"><span class="comment">## 查找安装后程序的配置文件</span></span><br><span class="line">[root@localhost ~]# rpm -qc nginx</span><br><span class="line">/etc/logrotate.d/nginx</span><br><span class="line">/etc/nginx/fastcgi.conf</span><br><span class="line">/etc/nginx/fastcgi.conf.default</span><br><span class="line">/etc/nginx/fastcgi_params</span><br><span class="line">/etc/nginx/fastcgi_params.default</span><br><span class="line">/etc/nginx/koi-utf</span><br><span class="line">/etc/nginx/koi-win</span><br><span class="line">/etc/nginx/mime.types</span><br><span class="line">/etc/nginx/mime.types.default</span><br><span class="line">/etc/nginx/nginx.conf</span><br><span class="line">/etc/nginx/nginx.conf.default</span><br><span class="line">/etc/nginx/scgi_params</span><br><span class="line">/etc/nginx/scgi_params.default</span><br><span class="line">/etc/nginx/uwsgi_params</span><br><span class="line">/etc/nginx/uwsgi_params.default</span><br><span class="line">/etc/nginx/win-utf</span><br><span class="line"><span class="comment">## 逆向查询</span></span><br><span class="line">[root@localhost ~]# rpm -qf /etc/hosts</span><br><span class="line">setup-2.8.71-10.el7.noarch</span><br><span class="line">[root@localhost ~]# rpm -qf /usr/sbin/ifconfig</span><br><span class="line">net-tools-2.0-0.25.20131004git.el7.x86_64</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="③卸载">③卸载</h5>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 卸载</span></span><br><span class="line">[root@localhost ~]# rpm -e tree</span><br></pre></td></tr></table></figure>
<h5 id="④升级RPM包">④升级RPM包</h5>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-U 如果老版本不存在，就全新安装，如果存在有新版即升级</span><br><span class="line">-f 老版本必须存在</span><br><span class="line">[root@localhost ~]# rpm -fvh tree-1.8.0-2.mga8.x86_64.rpm</span><br><span class="line">[root@localhost ~]# rpm -Uvh tree-1.8.0-2.mga8.x86_64.rpm</span><br></pre></td></tr></table></figure>
<p><strong>==总结==</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">缺陷</span><br><span class="line">1.rpm包管理无法解决包与包之间的依赖关系</span><br><span class="line">2.rpm包的查询，基本上都需要已经安装过的包</span><br><span class="line"></span><br><span class="line">优点：</span><br><span class="line">1.不需要网络安装</span><br><span class="line">2.安装速度快</span><br></pre></td></tr></table></figure>
<h3 id="2-yum工具">2.yum工具</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">1.联网获取软件</span><br><span class="line">2.基于RPM管理</span><br><span class="line">3.自动解决依赖（前提：1.yum仓库中必须有该依赖包 2.版本要一致）</span><br><span class="line">4.命令简单好记</span><br><span class="line">5.生产最佳实践</span><br><span class="line"></span><br><span class="line">yum是RedHat以及CentOS中的软件包管理器，能够通过互联网下载以rpm结尾的包，并且安装，并可以自动</span><br><span class="line">处理依赖性关系，无需繁琐的一次次下载安装。</span><br><span class="line">yum仓库 | yum源</span><br><span class="line"><span class="comment"># CentOS7和7之前所有版本：YUM</span></span><br><span class="line">yum install -y xx</span><br><span class="line"><span class="comment"># CentOS8以后：dnf</span></span><br><span class="line">dnf install xxx</span><br><span class="line"><span class="comment">## 系统自带的基础包仓库</span></span><br><span class="line">Base源</span><br><span class="line"><span class="comment">## 更换yum源，一定要至少换两个源</span></span><br><span class="line">- Base源 基础包</span><br><span class="line">- epel源 扩展包</span><br></pre></td></tr></table></figure>
<p><strong>==配置yum源==</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">各大镜像源：</span><br><span class="line">阿里云：https://opsx.alibaba.com/mirror</span><br><span class="line">清华源：https://mirrors.tuna.tsinghua.edu.cn/</span><br><span class="line">163源：http://mirrors.163.com/</span><br><span class="line">华为源：https://mirrors.huaweicloud.com/</span><br><span class="line">科大源：http://mirrors.ustc.edu.cn/</span><br></pre></td></tr></table></figure>
<p><strong>==配置Base源==</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@lb01 ~]# ll /etc/yum.repos.d/    yum源配置文件</span><br><span class="line"><span class="comment">## 注意：所有的配置文件，必须以repo结尾</span></span><br><span class="line">wget</span><br><span class="line">-O：指定保存的路径和文件名</span><br><span class="line">https://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class="line">curl -o = wget -O</span><br><span class="line"><span class="comment">## 换源步骤</span></span><br><span class="line">1）清空/etc/yum.repos.d下面所有源配置文件（<span class="built_in">mv</span> <span class="built_in">rm</span>）</span><br><span class="line">[root@localhost ~]# <span class="built_in">mv</span> /etc/yum.repos.d/*.repo /tmp/</span><br><span class="line">[root@localhost ~]# gzip /etc/yum.repos.d/*</span><br><span class="line">2）下载国内各大镜像站源</span><br><span class="line">wget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class="line">curl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="①-换源">① 换源</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##使用镜像站源</span></span><br><span class="line">wget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-vault-8.5.2111.repo</span><br><span class="line"></span><br><span class="line"><span class="comment">## 其他镜像站换源方式   （缺陷：1.麻烦2.如果不是默认的官方base源，这个替换就不成立）</span></span><br><span class="line">sed -e <span class="string">&#x27;s|^mirrorlist=|#mirrorlist=|g&#x27;</span> \</span><br><span class="line">    -e <span class="string">&#x27;s|^#baseurl=http://mirror.centos.org/centos|baseurl=https://mirrors.tuna.tsinghua.edu.cn/centos|g&#x27;</span> \</span><br><span class="line">    -i.bak \</span><br><span class="line">    /etc/yum.repos.d/CentOS-*.repo</span><br></pre></td></tr></table></figure>
<p><strong>==更换epel源==</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# curl -o /etc/yum.repos.d/epel.repo https://mirrors.aliyun.com/repo/epel-7.repo</span><br><span class="line">[root@localhost ~]# ll /etc/yum.repos.d/</span><br><span class="line">total 8</span><br><span class="line">-rw-r--r--. 1 root root 1759 Apr 22 18:55 CentOS-Base.repo</span><br><span class="line">-rw-r--r--. 1 root root 664 Apr 22 19:08 epel.repo</span><br></pre></td></tr></table></figure>
<h4 id="②-yum管理命令">② yum管理命令</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#根据命令搜索对应的包名</span></span><br><span class="line">[root@yum_repo ~]# yum provides pstree    注意：yum provides命令只能用于已经安装的软件包</span><br><span class="line">[root@yum_repo ~]# yum search pstree</span><br><span class="line"></span><br><span class="line"><span class="comment">## 查看我当前配置的所有仓库中的可以安装的包</span></span><br><span class="line">[root@localhost ~]# yum list</span><br><span class="line">[root@localhost ~]# yum list|grep net-tools</span><br><span class="line"></span><br><span class="line"><span class="comment">## 查看仓库中指定包的详细信息</span></span><br><span class="line">[root@localhost ~]# yum info 包名</span><br><span class="line">[root@localhost ~]# yum info tree</span><br><span class="line"></span><br><span class="line"><span class="comment">## 查看当前所有可用仓库</span></span><br><span class="line">[root@lb01 yum.repos.d]# yum repolist</span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">Loading mirror speeds from cached hostfile</span><br><span class="line"><span class="comment">## 仓库ID名字 .repo文件中 [仓库ID]		## 仓库描述信息 .repo文件中的name=							## 状态：该仓库中有多少rpm包</span></span><br><span class="line">repo <span class="built_in">id</span>                               repo name                                                          status</span><br><span class="line">base/7/x86_64                         CentOS-7 - Base - mirrors.huaweicloud.com                          10,072</span><br><span class="line">extras/7/x86_64                       CentOS-7 - Extras - mirrors.huaweicloud.com                           526</span><br><span class="line">updates/7/x86_64                      CentOS-7 - Updates - mirrors.huaweicloud.com                        5,802</span><br><span class="line">repolist: 16,400</span><br><span class="line">repolist: 30,679		<span class="comment">## 所有可用仓库总共包的数量</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看所有仓库信息，可用和不可用的都展示出来</span></span><br><span class="line">[root@localhost ~]# yum repolist all</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="③-yum安装命令">③ yum安装命令</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 安装指定软件</span></span><br><span class="line">[root@localhost ~]# yum install 包名</span><br><span class="line">[root@localhost ~]# yum install vim</span><br><span class="line">Is this ok [y/d/N]:</span><br><span class="line">输入y：<span class="built_in">yes</span>安装</span><br><span class="line">输入d：download 仅下载不安装</span><br><span class="line">输入N：No不安装</span><br><span class="line"><span class="comment">## 免交互安装</span></span><br><span class="line">[root@localhost ~]# yum install vim -y</span><br><span class="line">[root@localhost ~]# yum -y install vim</span><br><span class="line">[root@localhost ~]# yum install -y vim</span><br><span class="line"><span class="comment">## yum安装方式：</span></span><br><span class="line"><span class="comment"># 方式一：安装仓库中的包</span></span><br><span class="line">[root@localhost ~]# yum install vim</span><br><span class="line"><span class="comment"># 方式二：安装本地的包</span></span><br><span class="line">[root@localhost Packages]# yum localinstall -y wget-1.14-18.el7.x86_64.rpm</span><br><span class="line"><span class="comment"># 方式三：远程互联网安装</span></span><br><span class="line">[root@localhost Packages]# yum install -y http://test.driverzeng.com/MySQL_plugins/mha4mysql-node-0.56-0.el6.noarch.rpm</span><br><span class="line"></span><br><span class="line"><span class="comment">## 指定目录下载</span></span><br><span class="line">[root@localhost ~]# yum install --downloadonly --downloaddir=/opt/ nginx</span><br></pre></td></tr></table></figure>
<h4 id="④-yum重装-更新-删除">④ yum重装/更新/删除</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 误删除服务的相关文件重装</span></span><br><span class="line">[root@localhost nginx]# yum reinstall -y nginx</span><br><span class="line"></span><br><span class="line"><span class="comment">## yum查询可以更新的软件</span></span><br><span class="line">[root@localhost nginx]# yum check-update</span><br><span class="line"><span class="comment">## 更新指定软件</span></span><br><span class="line">[root@localhost nginx]# yum update acl -y</span><br><span class="line"><span class="comment">##全部软件都更新（Waring：慎用）</span></span><br><span class="line">[root@localhost nginx]# yum update -y</span><br><span class="line"></span><br><span class="line"><span class="comment">## 删除指定软件</span></span><br><span class="line">[root@localhost nginx]# yum remove -y tree</span><br><span class="line">[root@localhost nginx]# yum erase -y tree</span><br></pre></td></tr></table></figure>
<h4 id="④-yum逆向查询-缓存">④ yum逆向查询/缓存</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查询某个命令属于哪个包</span></span><br><span class="line">[root@localhost nginx]# yum provides */ifconfig</span><br><span class="line"></span><br><span class="line"><span class="comment">## 加载缓存</span></span><br><span class="line">[root@localhost nginx]# yum makecache</span><br><span class="line"><span class="comment">## 清除缓存</span></span><br><span class="line">[root@localhost nginx]# yum clean all</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="⑤-爬取rpm包">⑤ 爬取rpm包</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/7/x86_64/?spm=a2c6h.25603864.0.0.239b5d4a bvLbEB</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">1.指定下载目录</span><br><span class="line">[root@lb01 ~]# curl -s https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/7/x86_64/?spm=a2c6h.25603864.0.0.239b5d4a bvLbEB|awk -F <span class="string">&#x27;&quot;&#x27;</span> <span class="string">&#x27;/rpm/&#123;print &quot;mkdir -p /repo/zabbix/;wget -O /repo/zabbix/&quot;$4&quot; https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/7/x86_64/&quot;$4&#125;&#x27;</span>|bash</span><br><span class="line"></span><br><span class="line">2.下载到当前目录</span><br><span class="line">[root@lb01 ~]# curl -s https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/7/x86_64|awk -F <span class="string">&#x27;&quot;&#x27;</span> <span class="string">&#x27;/rpm/&#123;print $4&#125;&#x27;</span>|sed <span class="string">&#x27;s#zabbix#https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/7/x86_64/zabbix#g&#x27;</span>|xargs wget</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1.curl 网站获取网页内容</span><br><span class="line">[root@lb01 ~]# curl -s https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/7/x86_64</span><br><span class="line">2.截取所有rpm包名</span><br><span class="line">[root@lb01 ~]# curl -s https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/7/x86_64|awk -F <span class="string">&#x27;&quot;&#x27;</span> <span class="string">&#x27;/rpm/&#123;print $4&#125;&#x27;</span></span><br><span class="line">zabbix-agent-5.0.0-1.el7.x86_64.rpm</span><br><span class="line">zabbix-agent-5.0.1-1.el7.x86_64.rpm</span><br><span class="line">zabbix-agent-5.0.10-1.el7.x86_64.rpm</span><br><span class="line">zabbix-agent-5.0.11-1.el7.x86_64.rpm</span><br><span class="line">3.补全公共下载链接https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/7/x86_64/?spm=a2c6h.25603864.0.0.239b5d4a bvLbEB</span><br><span class="line">sed <span class="string">&#x27;s#zabbix#https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/7/x86_64/zabbix#g&#x27;</span></span><br><span class="line">4.拼接命令交给wget</span><br><span class="line">[root@lb01 ~]# curl -s https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/7/x86_64|awk -F <span class="string">&#x27;&quot;&#x27;</span> <span class="string">&#x27;/rpm/&#123;print $4&#125;&#x27;</span>|sed <span class="string">&#x27;s#zabbix#https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/7/x86_64/zabbix#g&#x27;</span>|xargs wget</span><br></pre></td></tr></table></figure>
<h3 id="3-yum文件-命令">3.yum文件&amp;命令</h3>
<h4 id="①-yum程序的配置文件">① yum程序的配置文件</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# <span class="built_in">cat</span> /etc/yum.conf</span><br><span class="line">cachedir=/var/cache/yum/<span class="variable">$basearch</span>/<span class="variable">$releasever</span> //缓存目录</span><br><span class="line">keepcache=0   //缓存软件包, 1启动 0 关闭</span><br><span class="line">debuglevel=2   //调试级别</span><br><span class="line">logfile=/var/log/yum.log //日志记录位置</span><br><span class="line">exactarch=1 //检查平台是否兼容</span><br><span class="line">obsoletes=1 //检查包是否废弃</span><br><span class="line">gpgcheck=1 //检查来源是否合法,需要有制作者的公钥信息</span><br><span class="line">plugins=1 //是否启用查询</span><br><span class="line">installonly_limit=5</span><br><span class="line">bugtracker_url</span><br><span class="line"><span class="comment"># metadata_expire=90m //每小时手动检查元数据</span></span><br><span class="line"><span class="comment"># in /etc/yum.repos.d //包含repos.d目录</span></span><br></pre></td></tr></table></figure>
<h4 id="②yum组命令">②yum组命令</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看有哪些包组</span></span><br><span class="line">[root@localhost ~]# yum <span class="built_in">groups</span> list</span><br><span class="line"><span class="comment"># 安装指定包组</span></span><br><span class="line">[root@localhost ~]# yum <span class="built_in">groups</span> install Development tools Compatibility libraries</span><br><span class="line">Base Debugging Tools</span><br><span class="line"><span class="comment"># 删除指定包组</span></span><br><span class="line">[root@localhost ~]# yum <span class="built_in">groups</span> remove -y Base</span><br></pre></td></tr></table></figure>
<h4 id="③-yum历史命令">③ yum历史命令</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 查看yum执行的历史</span></span><br><span class="line">[root@localhost ~]# yum <span class="built_in">history</span></span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">ID | Login user | Date and time | Action(s) | Altered</span><br><span class="line">-------------------------------------------------------------------------------</span><br><span class="line">6 | root &lt;root&gt; | 2024-04-23 18:05 | Install | 1</span><br><span class="line">5 | root &lt;root&gt; | 2024-04-23 17:09 | Update | 2</span><br><span class="line">4 | root &lt;root&gt; | 2024-03-26 17:36 | Install | 1</span><br><span class="line">3 | root &lt;root&gt; | 2024-03-26 17:31 | Install | 1</span><br><span class="line">2 | root &lt;root&gt; | 2024-03-22 15:55 | Install | 1</span><br><span class="line">1 | System &lt;<span class="built_in">unset</span>&gt; | 2024-03-21 20:50 | Install | 308</span><br><span class="line"><span class="comment">## 查看指定历史记录的详细信息</span></span><br><span class="line">[root@localhost ~]# yum <span class="built_in">history</span> info 6</span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">Transaction ID : 6</span><br><span class="line">Begin time : Tue Apr 23 18:05:41 2024</span><br><span class="line">Begin rpmdb : 311:bc74a8339d5853ce2035d376bffbbeeb40d44ae3</span><br><span class="line">End time : 18:05:42 2024 (1 seconds)</span><br><span class="line">End rpmdb : 312:44280ba9419b586ea77d5fa483785725fe7e9758</span><br><span class="line">User : root &lt;root&gt;</span><br><span class="line">Return-Code : Success</span><br><span class="line">Command Line : install -y tree</span><br><span class="line">Transaction performed with:</span><br><span class="line">Installed rpm-4.11.3-35.el7.x86_64 @anaconda</span><br><span class="line">Installed yum-3.4.3-161.el7.centos.noarch @anaconda</span><br><span class="line">Installed yum-plugin-fastestmirror-1.1.31-50.el7.noarch @anaconda</span><br><span class="line">Packages Altered:</span><br><span class="line">Install tree-1.6.0-10.el7.x86_64 @base</span><br><span class="line"><span class="built_in">history</span> info</span><br><span class="line"><span class="comment">## 回滚指定操作</span></span><br><span class="line">[root@localhost ~]# yum <span class="built_in">history</span> undo 6 -y</span><br></pre></td></tr></table></figure>
<h3 id="4-制作yum仓库">4.制作yum仓库</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">条件：</span><br><span class="line">1.制作仓库，一定要有存放rpm包的目录</span><br><span class="line">2.会配置repo仓库文件</span><br><span class="line"><span class="comment">## repo配置文件内容解析</span></span><br><span class="line"><span class="comment"># 仓库名</span></span><br><span class="line">[base]</span><br><span class="line"><span class="comment"># 描述信息</span></span><br><span class="line">name=CentOS-<span class="variable">$releasever</span> - Base - mirrors.aliyun.com</span><br><span class="line"><span class="comment"># 仓库地址</span></span><br><span class="line">baseurl=http://mirrors.aliyun.com/centos/<span class="variable">$releasever</span>/os/<span class="variable">$basearch</span>/</span><br><span class="line"><span class="comment"># 是否开启yum仓库签名机制检测</span></span><br><span class="line">gpgcheck=1 // 0 代表关闭，不检测 1 代表开启，检测</span><br><span class="line"><span class="comment"># gpg钥匙的地址</span></span><br><span class="line">gpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7</span><br><span class="line"><span class="comment">## 是否开启yum仓库</span></span><br><span class="line">enabled=0 // 是否开启该仓库，0代表关闭 1代表开启</span><br><span class="line"><span class="comment">## 密钥对</span></span><br><span class="line">钥匙</span><br><span class="line">锁</span><br><span class="line"><span class="comment">## 仓库地址支持的协议：</span></span><br><span class="line">- http:// 远程协议</span><br><span class="line">- https:// 远程协议</span><br><span class="line">- ftp:// 远程协议</span><br><span class="line">- file:// 本地协议，只能访问本机</span><br></pre></td></tr></table></figure>
<h4 id="①-制作本地yum仓库">① 制作本地yum仓库</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.安装createrepo命令</span></span><br><span class="line">[root@localhost ~]# yum install -y createrepo</span><br><span class="line"><span class="comment"># 2.让目录编程yum仓库 createrepo</span></span><br><span class="line">[root@localhost ~]# createrepo /repo/zabbix/</span><br><span class="line">Spawning worker 0 with 475 pkgs</span><br><span class="line"><span class="comment"># 3.配置仓库文件</span></span><br><span class="line">[root@localhost yum.repos.d]# vim zls.repo</span><br><span class="line">[zls_repo]</span><br><span class="line">name=zls<span class="string">&#x27;s yum repository xxxx</span></span><br><span class="line"><span class="string">baseurl=file:///repo/zabbix/</span></span><br><span class="line"><span class="string">gpgcheck=0</span></span><br><span class="line"><span class="string">enabled=1</span></span><br></pre></td></tr></table></figure>
<p><strong>==如何在仓库中新加RPM包==</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.将rpm放入仓库</span></span><br><span class="line">wget <span class="built_in">cp</span> <span class="built_in">mv</span> ...</span><br><span class="line"><span class="comment"># 2.重新更新仓库</span></span><br><span class="line">[root@localhost repo]# createrepo --update /repo</span><br><span class="line"><span class="comment"># 3.用户使用仓库时，需要重新加载缓存</span></span><br><span class="line">[root@localhost ~]# yum makecache</span><br></pre></td></tr></table></figure>
<p><strong>需求：将/dev/cdrom中的rpm包，拷贝到 /zls/base目录下，然后将该目录制作成本地的yum仓库</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.创建目录</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">mkdir</span> -p /zls/base</span><br><span class="line"><span class="comment"># 2.挂载镜像</span></span><br><span class="line">[root@localhost ~]# mount /dev/cdrom /mnt</span><br><span class="line"><span class="comment"># 3.拷贝rpm包</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> /mnt/Packages/*.rpm /zls/base/</span><br><span class="line"><span class="comment"># 4.制作仓库</span></span><br><span class="line">[root@localhost ~]# createrepo /zls/base/</span><br><span class="line"><span class="comment"># 5.编写repo文件</span></span><br><span class="line">[root@localhost ~]# vi /etc/yum.repos.d/zls.repo</span><br><span class="line">[zls_repo]</span><br><span class="line">name=zls<span class="string">&#x27;s yum repository xxxx</span></span><br><span class="line"><span class="string">baseurl=file:///repo/</span></span><br><span class="line"><span class="string">gpgcheck=0</span></span><br><span class="line"><span class="string">enabled=1</span></span><br></pre></td></tr></table></figure>
<h4 id="②-制作远程yum仓库">② 制作远程yum仓库</h4>
<p><strong>环境准备</strong></p>
<table>
<thead>
<tr>
<th>主机</th>
<th>ip</th>
<th>角色</th>
</tr>
</thead>
<tbody>
<tr>
<td>yum_repo</td>
<td>10.0.0.101</td>
<td>yum仓库</td>
</tr>
<tr>
<td>web01</td>
<td>10.0.0.102</td>
<td>使用yum仓库的机器</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 可选协议：</span></span><br><span class="line">- http:// 远程协议</span><br><span class="line">- https:// 远程协议（别考虑）</span><br><span class="line">- ftp:// 远程协议</span><br><span class="line"><span class="comment">## 克隆新的主机修改主机名和IP</span></span><br><span class="line"><span class="comment"># 修改主机名</span></span><br><span class="line">[root@web01 ~]# hostnamectl set-hostname yum_repo</span><br><span class="line">[root@web01 ~]# hostnamectl set-hostname web01</span><br><span class="line"><span class="comment"># 修改IP</span></span><br><span class="line"><span class="comment">## 关闭防火墙</span></span><br><span class="line">[root@yum_repo ~]# systemctl stop firewalld</span><br><span class="line">[root@web01 ~]# systemctl stop firewalld</span><br><span class="line"><span class="comment">## 关闭selinux</span></span><br><span class="line">[root@web01 ~]# setenforce 0</span><br><span class="line">[root@web01 ~]# getenforce</span><br><span class="line">Permissive</span><br></pre></td></tr></table></figure>
<h5 id="ftp制作远程仓库">ftp制作远程仓库</h5>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.安装ftp协议的软件</span></span><br><span class="line">[root@yum_repo ~]# yum install -y vsftpd</span><br><span class="line"><span class="comment"># 2.启动vsftpd</span></span><br><span class="line">[root@yum_repo ~]# systemctl start vsftpd</span><br><span class="line">[root@yum_repo ~]# systemctl <span class="built_in">enable</span> vsftpd</span><br><span class="line"><span class="comment"># 3.打开浏览器访问 ftp://10.0.0.101</span></span><br><span class="line"><span class="comment"># 4.查找ftp的目录所在</span></span><br><span class="line">[root@yum_repo pub]# rpm -ql vsftpd|grep pub</span><br><span class="line">/var/ftp/pub</span><br><span class="line"><span class="comment"># 5.pub目录就可以当做yum仓库</span></span><br><span class="line">[root@yum_repo pub]# mount /dev/cdrom /mnt/</span><br><span class="line">[root@yum_repo pub]# <span class="built_in">cp</span> /mnt/Packages/tree-1.6.0-10.el7.x86_64.rpm /mnt/Packages/wget-1.14-18.el7.x86_64.rpm base/</span><br><span class="line"><span class="comment"># 6.安装制作仓库的命令</span></span><br><span class="line">[root@yum_repo ~]# yum install -y createrepo</span><br><span class="line"><span class="comment"># 7.制作yum仓库</span></span><br><span class="line">[root@yum_repo ~]# createrepo /var/ftp/pub/base/</span><br><span class="line">Spawning worker 0 with 2 pkgs</span><br><span class="line">Workers Finished</span><br><span class="line">Saving Primary metadata</span><br><span class="line">Saving file lists metadata</span><br><span class="line">Saving other metadata</span><br><span class="line">Generating sqlite DBs</span><br><span class="line">Sqlite DBs complete</span><br><span class="line"><span class="comment"># 8.准备repo文件</span></span><br><span class="line">[root@yum_repo base]# vim zls_base.repo</span><br><span class="line">[zls_base_repo]</span><br><span class="line">name=<span class="built_in">test</span></span><br><span class="line">baseurl=ftp://10.0.0.101/pub/base/</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br><span class="line"><span class="comment">## 其他用户想要使用该yum源，只需要下载</span></span><br><span class="line">[root@web01 ~]# curl -o /etc/yum.repos.d/zls_base.repo</span><br><span class="line">ftp://10.0.0.101/pub/base/zls_base.repo</span><br><span class="line">[root@web01 ~]# vim /etc/yum.repos.d/xxx.repo</span><br><span class="line">[zls_base_repo]</span><br><span class="line">name=<span class="built_in">test</span></span><br><span class="line">baseurl=ftp://10.0.0.101/pub/base/</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br></pre></td></tr></table></figure>
<h5 id="nginx制作远程仓库">nginx制作远程仓库</h5>
<p><strong>环境准备</strong></p>
<table>
<thead>
<tr>
<th>主机</th>
<th>ip</th>
<th>角色</th>
</tr>
</thead>
<tbody>
<tr>
<td>yum_repo</td>
<td>10.0.0.101</td>
<td>yum仓库</td>
</tr>
<tr>
<td>web01</td>
<td>10.0.0.102</td>
<td>使用yum仓库的机器</td>
</tr>
</tbody>
</table>
<p><strong>前期准备</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#克隆虚拟机</span></span><br><span class="line"><span class="comment"># 克隆新的主机修改主机名和IP</span></span><br><span class="line">[root@web01 ~]# hostnamectl set-hostname yum_repo</span><br><span class="line">[root@web01 ~]# hostnamectl set-hostname web01</span><br><span class="line"><span class="comment"># 修改IP</span></span><br><span class="line"><span class="comment">## 关闭防火墙</span></span><br><span class="line">[root@yum_repo ~]# systemctl stop firewalld</span><br><span class="line">[root@web01 ~]# systemctl stop firewalld</span><br><span class="line"><span class="comment">## 关闭selinux</span></span><br><span class="line">[root@web01 ~]# setenforce 0</span><br><span class="line">[root@web01 ~]# getenforce</span><br><span class="line">Permissive</span><br></pre></td></tr></table></figure>
<p><strong>使用nginx制作yum仓库</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.安装nginx</span></span><br><span class="line">[root@yum_repo ~]# yum -y install nginx</span><br><span class="line"><span class="comment">#2.启动nginx</span></span><br><span class="line">[root@yum_repo ~]# systemctl start nginx</span><br><span class="line">[root@yum_repo ~]# systemctl <span class="built_in">enable</span> nginx</span><br><span class="line"><span class="comment">#3.创建base源和zabbix的yum库</span></span><br><span class="line">[root@yum_repo yum]# <span class="built_in">mkdir</span> /etc/repo/yum/&#123;base,zabbix&#125; -p</span><br><span class="line"></span><br><span class="line">[root@yum_repo yum]# <span class="built_in">mkdir</span> /etc/repo/yum/base/ -p</span><br><span class="line">[root@yum_repo yum]# <span class="built_in">mkdir</span> /etc/repo/yum/zabbix/ -p</span><br><span class="line"><span class="comment">#获取base包</span></span><br><span class="line">[root@web01 ~]# mount /dev/cdrom /mnt/</span><br><span class="line">[root@yum_repo yum]# <span class="built_in">cp</span> /mnt/Packages/* /etc/repo/yum/base/</span><br><span class="line">拷贝爬取的zabbix的包到/etc/repo/yum/zabbix下</span><br><span class="line">[root@lb01 nginx]# <span class="built_in">cp</span> /repo/zabbix/* /etc/repo/yum/zabbix</span><br><span class="line"><span class="comment">#4.安装制作仓库的命令</span></span><br><span class="line">[root@yum_repo ~]# yum install -y createrepo</span><br><span class="line"><span class="comment">#5.制作yum仓库</span></span><br><span class="line">[root@yum_repo yum]# createrepo /etc/repo/yum/base/</span><br><span class="line">[root@yum_repo yum]# createrepo /etc/repo/yum/zabbix/</span><br><span class="line"><span class="comment">#6.修改ngingx配置文件</span></span><br><span class="line">[root@yum_repo nginx]# vim /etc/nginx/nginx.conf</span><br><span class="line"></span><br><span class="line"><span class="comment">#在nginx.confp配置文件中添加以下内容，</span></span><br><span class="line">location / &#123;	</span><br><span class="line">    45	        autoindex on;</span><br><span class="line">    46	        root   /etc/repo/yum;	<span class="comment">#指定本地yum仓库位置</span></span><br><span class="line">    47	        &#125;</span><br><span class="line">    </span><br><span class="line">   <span class="comment"># 添加位置是在server&#123;	&#125;里		如下</span></span><br><span class="line">server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        listen       [::]:80;</span><br><span class="line">        server_name  _;</span><br><span class="line">       root         /usr/share/nginx/html;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">        autoindex on;</span><br><span class="line">        root   /etc/repo/yum;</span><br><span class="line">        		   &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line"><span class="comment">#或者[root@yum_repo ~]# cat /etc/nginx/conf.d/yum_repo.conf</span></span><br><span class="line">这个前提是，nginx.confp配置文件里没有server&#123; &#125;这个内容，相当于把这段命令写在conf.d配置文件里</span><br><span class="line">server&#123;</span><br><span class="line">	listen 80;</span><br><span class="line">	server_name _;</span><br><span class="line">	location /&#123;</span><br><span class="line">		autoindex on;</span><br><span class="line">		root /yum_repo;</span><br><span class="line">		index index.html;</span><br><span class="line">			&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#检测语法有没有问题</span></span><br><span class="line">[root@yum_repo ~]# nginx -t</span><br><span class="line">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /etc/nginx/nginx.conf <span class="built_in">test</span> is successful</span><br><span class="line"></span><br><span class="line"><span class="comment">#重启nginx</span></span><br><span class="line"> [root@yum_repo ~]# systemctl restart nginx</span><br><span class="line"><span class="comment">#7.准备repo文件</span></span><br><span class="line">[root@yum_repo base]# vim nginx.repo</span><br><span class="line">[nginx_repo]</span><br><span class="line">name=<span class="built_in">test</span></span><br><span class="line">baseurl=10.0.0.101/base/</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br><span class="line"></span><br><span class="line">[nginx_repo]</span><br><span class="line">name=<span class="built_in">test</span></span><br><span class="line">baseurl=10.0.0.101/zabbix/</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br><span class="line">可以将nginx.repo文件放在 /etc/repo/yum/目录下</span><br><span class="line"><span class="comment">#8.切换到web01客户端</span></span><br><span class="line">下载制作的nginx.repo源</span><br><span class="line">[root@web01 ~]# wget -O /etc/yum.repos.d/ http://10.0.0.101/nginx.repo</span><br><span class="line">删除web01客户端其它源，只留nginx.repo源，使用安装rpm包测试我们制作的yum源</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240423210955932.png" alt="image-20240423210955932"></p>
<h2 id="【8】进程管理">【8】进程管理</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">程序：它是一个静态的概念，开发人员写好的代码</span><br><span class="line">进程：它是一个动态的概念，将程序运行起来的过程，就叫做进程</span><br><span class="line">运行环境：能让程序正常运行的环境，对应开发语言写的代码，需要对应的环境来运行</span><br></pre></td></tr></table></figure>
<p><strong>注意:</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.当程序运行为进程后，系统会为该进程分配内存，以及运行的身份和权限。 </span><br><span class="line">2.在进程运行的过程中，服务器上会有各种状态来表示当前进程的指标信息。</span><br></pre></td></tr></table></figure>
<p><strong>进程的生命周期</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240424145131410.png" alt="image-20240424145131410"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#进程/父进程：</span></span><br><span class="line">- 等待：</span><br><span class="line">1）有没有用户的新请求来</span><br><span class="line">2）子进程是否处理完返回结果</span><br><span class="line"><span class="comment">#线程/子进程</span></span><br><span class="line">1）处理请求</span><br><span class="line">2）将结果返回给父进程</span><br><span class="line"><span class="comment">#进程状态：</span></span><br><span class="line">1）正常结束</span><br><span class="line">2）僵尸进程</span><br><span class="line">3）孤儿进程</span><br><span class="line"><span class="comment">#协程：python</span></span><br></pre></td></tr></table></figure>
<p><strong>僵尸进程</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#僵尸进程：</span></span><br><span class="line">子进程比父进程先结束,父进程没有回收子进程的资源,此时的子进程就称为<span class="string">&quot;僵尸进程&quot;</span></span><br><span class="line"><span class="comment">#产生原因：</span></span><br><span class="line">子进程的结束和父进程的运行是异步的,父进程永远不知道子进程什么时候结束,子进程在结束时，父进程繁忙来不及Wait子进程则会导致，子进程变成<span class="string">&quot;僵尸进程&quot;</span></span><br></pre></td></tr></table></figure>
<p><strong>孤儿进程</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#孤儿进程：</span></span><br><span class="line">父进程比子进程先结束,子进程还在执行任务，没有父进程管理,此时的子进程就称为<span class="string">&quot;孤儿进程&quot;</span></span><br><span class="line"><span class="comment">#产生原因：</span></span><br><span class="line">子进程的结束和父进程的运行是异步的,父进程永远不知道子进程什么时候结束,当父进程正常完成工作或其他原因被终止,则会导致，子进程变成<span class="string">&quot;孤儿进程&quot;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.当父进程接收到任务调度时，会通过fork派生子进程来处理，那么子进程会集成父进程的衣钵。</span><br><span class="line">2.子进程在处理任务代码时，父进程会进入等待的状态...</span><br><span class="line">3.如果子进程在处理任务过程中，父进程退出了，子进程没有退出，那么这些子进程就没有父进程来管理了，就变成了孤儿进程。</span><br><span class="line">4.每个进程都会有自己的PID号，（process <span class="built_in">id</span>）子进程则PPID</span><br></pre></td></tr></table></figure>
<h3 id="1-进程管理命令">1.进程管理命令</h3>
<blockquote>
<p>拓展：查看服务进程状态，可用于脚本中，检查进程状态<br>
[root@web01 ~]# systemctl is-active nginx<br>
active<br>
[root@web01 ~]# systemctl is-enabled nginx<br>
enabled</p>
</blockquote>
<h4 id="①-ps命令（静态）">① ps命令（静态）</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">[root@yum_repo ~]# ps aux	[root@yum_repo ~]# ps -ef也可以</span><br><span class="line">a：显示系统中所有和终端相关的进程</span><br><span class="line">u：显示每个进程运行的用户</span><br><span class="line">x：显示系统中所有和终端无关的进程</span><br><span class="line">[root@yum_repo ~]# ps aux|<span class="built_in">head</span></span><br><span class="line">USER        PID %CPU %MEM    VSZ   RSS   TTY    STAT START   TIME   COMMAND</span><br><span class="line">root         1  0.0  0.6 127864  6500    ?      Ss   08:38   0:01   /usr/lib/systemd/systemd --switched-root --system --deserialize 22</span><br><span class="line">root         2  0.0  0.0      0     0    ?      S    08:38   0:00   [kthreadd]</span><br><span class="line">root         3  0.0  0.0      0     0    ?      S    08:38   0:00   [ksoftirqd/0]</span><br><span class="line">root         5  0.0  0.0      0     0    ?      S&lt;   08:38   0:00   [kworker/0:0H]</span><br><span class="line">root         6  0.0  0.0      0     0    ?      S    08:38   0:00   [kworker/u256:0]</span><br><span class="line"></span><br><span class="line"><span class="comment">#个列代信息表意思</span></span><br><span class="line">USER：运行程序的用户</span><br><span class="line">PID：每个进程运行起来后，都会有自己的一个PID号，进程号Process ID</span><br><span class="line">%CPU：该进程占用CPU的百分比</span><br><span class="line">%MEM：该进程占用内存的百分比</span><br><span class="line">VSZ：该进程占用虚拟内存的大小</span><br><span class="line">RSS：该进程占用真实内存的大小</span><br><span class="line">TTY：终端</span><br><span class="line">- ?：由内核发起的终端</span><br><span class="line">- pts/0 pts/1：用户的虚拟终端</span><br><span class="line">- tty1：物理终端</span><br><span class="line">STAT：程序运行状态</span><br><span class="line">START：服务启动的时间</span><br><span class="line">TIME：该进程实际使用CPU的运行时间</span><br><span class="line">COMMAND：服务运行起来的命令</span><br><span class="line"></span><br><span class="line"><span class="comment">#STAT：状态</span></span><br><span class="line">D：无法中断的休眠状态（通IO的进程） 磁盘IO Input/Output 吞吐量（磁盘既写入又输出，例如tar打包数据时候）</span><br><span class="line">R：Running 正在运行的进程</span><br><span class="line">S：Sleeping 处于休眠状态的进程</span><br><span class="line">T：被暂停的进程状态  （Ctrl+z暂停进程）</span><br><span class="line">Z: 僵尸进程</span><br><span class="line">&lt;：优先级较高的进程</span><br><span class="line">N：优先级较低的进程</span><br><span class="line">s：父进程（并且它下面有子进程在运行）</span><br><span class="line">l：以线程的方式运行的进程</span><br><span class="line">|：多进程</span><br><span class="line">+：在前台运行的进程</span><br><span class="line">L：被锁进内存页的进程</span><br><span class="line">X:死掉的进程（少见）</span><br><span class="line">W:进入内存交换（从内核2.6开始无效）</span><br></pre></td></tr></table></figure>
<h4 id="②-stat命令">② stat命令</h4>
<p><strong>介绍</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##stat命令来自英文单词status的缩写，其功能是显示文件的状态信息。在Linux系统中，每个文件都有3个“历史时间”——最后访问时间（ATIME）、最后修改时间（MTIME）、最后更改时间（CTIME），用户可以使用stat命令查看到它们，进而判别有没有其他人修改过文件内容。</span></span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240505095811234.png" alt="image-20240505095811234"></p>
<p><strong>应用</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##[root@localhost ~]# stat /etc/passwd</span></span><br><span class="line">  File: ‘/etc/passwd’</span><br><span class="line">  Size: 945       	Blocks: 8          IO Block: 4096   regular file</span><br><span class="line">Device: fd00h/64768d	Inode: 8902609     Links: 1</span><br><span class="line">Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)</span><br><span class="line">Context: system_u:object_r:passwd_file_t:s0</span><br><span class="line">Access: 2024-04-21 21:52:14.512000577 +0800</span><br><span class="line">Modify: 2024-04-20 13:49:48.339236224 +0800</span><br><span class="line">Change: 2024-04-20 13:49:48.341236224 +0800</span><br><span class="line"> Birth: -</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## -c直接看权限</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">stat</span> -c%a /etc/passwd</span><br><span class="line">644</span><br><span class="line">[root@localhost ~]# <span class="built_in">stat</span> -c%A /etc/passwd</span><br><span class="line">-rw-r--r--</span><br><span class="line"></span><br><span class="line"><span class="comment">##-c直接看inode结点号</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">stat</span> -c%i /etc/passwd</span><br><span class="line">8902609</span><br><span class="line"></span><br><span class="line"><span class="comment">##-c直接看uid和属主</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">stat</span> -c%u /etc/passwd</span><br><span class="line">0</span><br><span class="line">[root@localhost ~]# <span class="built_in">stat</span> -c%U /etc/passwd</span><br><span class="line">root</span><br><span class="line"></span><br><span class="line"><span class="comment">##-c直接看gid和属组</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">stat</span> -c%g /etc/passwd</span><br><span class="line">0</span><br><span class="line">[root@localhost ~]# <span class="built_in">stat</span> -c%G /etc/passwd</span><br><span class="line">root</span><br><span class="line"></span><br><span class="line"><span class="comment">##-c直接看文件大小</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">stat</span> -c%s /etc/passwd</span><br><span class="line">945</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## -f</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">stat</span> -f /etc/passwd</span><br><span class="line">  File: <span class="string">&quot;/etc/passwd&quot;</span></span><br><span class="line">    ID: fd0000000000 Namelen: 255     Type: xfs</span><br><span class="line">Block size: 4096       Fundamental block size: 4096</span><br><span class="line">Blocks: Total: 2361856    Free: 1896798    Available: 1896798</span><br><span class="line">Inodes: Total: 4728832    Free: 4664790</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-c后可以跟哪些占位符</span><br><span class="line"><span class="built_in">stat</span> -c %a file	显示文件的八进制权限</span><br><span class="line"><span class="built_in">stat</span> -c %N file	显示完整路径</span><br><span class="line"><span class="built_in">stat</span> -c %n file	显示文件名。</span><br><span class="line"><span class="built_in">stat</span> -c %x file	显示最后访问时间</span><br><span class="line"><span class="built_in">stat</span> -c %y file	显示最后修改时间</span><br><span class="line"><span class="built_in">stat</span> -c <span class="string">&quot;%n %s %y&quot;</span> filename.txt	这将输出文件名、文件大小和最后修改时间。</span><br></pre></td></tr></table></figure>
<h4 id="③-内存-端口">③ 内存/端口</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># free 查看内存信息</span></span><br><span class="line">free -h  以人类可读方式读取显示内存信息</span><br><span class="line"></span><br><span class="line"><span class="comment"># 端口：</span></span><br><span class="line">[root@localhost ~]# netstat -lntup</span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address Foreign Address State</span><br><span class="line">PID/Program name</span><br><span class="line">tcp 0 0 0.0.0.0:22 0.0.0.0:* LISTEN</span><br><span class="line">6866/sshd</span><br><span class="line">tcp 0 0 127.0.0.1:25 0.0.0.0:* LISTEN</span><br><span class="line">6950/master</span><br><span class="line">tcp6 0 0 :::22 :::* LISTEN</span><br><span class="line">6866/sshd</span><br><span class="line">tcp6 0 0 ::1:25 :::* LISTEN</span><br><span class="line">6950/master</span><br></pre></td></tr></table></figure>
<h4 id="④-ps其他选项">④ ps其他选项</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看最占用内存的进程</span></span><br><span class="line">[root@yum_repo ~]# ps aux|<span class="built_in">sort</span> -k 4 -nr</span><br><span class="line">[root@yum_repo ~]# ps aux --<span class="built_in">sort</span> %mem   (默认占比最小的显示最前)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 自定义列</span></span><br><span class="line">[root@yum_repo ~]# ps axo user,pid,ppid,%mem,<span class="built_in">command</span>,%cpu</span><br><span class="line"></span><br><span class="line"><span class="comment">#如何检测服务是否启动成功？</span></span><br><span class="line">1.先查还有没有这个服务</span><br><span class="line">[root@localhost ~]# ps aux|grep nginx</span><br><span class="line">root 10021 0.0 0.0 39304 940 ? Ss 16:44 0:00 nginx: master</span><br><span class="line">process /usr/sbin/nginx</span><br><span class="line">nginx 10022 0.0 0.1 39692 1896 ? S 16:44 0:00 nginx: worker</span><br><span class="line">process</span><br><span class="line">2.使用端口号命令来查看该端口是否被监听。如果端口处于监听状态，则说明服务已经启动（nginx默认80端口，http协议）</span><br><span class="line"></span><br><span class="line">[root@lb01 ~]# netstat -lntup</span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    </span><br><span class="line">tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN      8752/nginx: master  </span><br><span class="line">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      6625/sshd           </span><br><span class="line">tcp        0      0 127.0.0.1:25            0.0.0.0:*               LISTEN      6708/master         </span><br><span class="line">tcp6       0      0 :::80                   :::*                    LISTEN      8752/nginx: master  </span><br><span class="line">tcp6       0      0 :::22                   :::*                    LISTEN      6625/sshd           </span><br><span class="line">tcp6       0      0 ::1:25                  :::*                    LISTEN      6708/master</span><br><span class="line">[root@lb01 ~]# netstat -tulun</span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State      </span><br><span class="line">tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN</span><br><span class="line"></span><br><span class="line"><span class="comment">## 写脚本用，判断服务是否存活</span></span><br><span class="line">[root@yum_repo ~]# ps aux |grep nginx|grep -v grep</span><br><span class="line">[root@yum_repo ~]# ps aux|grep nginx</span><br><span class="line">root 19740 0.0 0.1 39312 1044 ? Ss 12:00 0:00 nginx: master process /usr/sbin/nginx</span><br><span class="line">nginx 19741 0.0 0.1 39700 1816 ? S 12:00 0:00 nginx: worker process</span><br><span class="line">nginx 19742 0.0 0.1 39700 1816 ? S 12:00 0:00 nginx: worker process</span><br><span class="line">nginx 19759 0.0 0.1 39700 1816 ? S 12:00 0:00 nginx: worker process</span><br><span class="line">nginx 19760 0.0 0.1 39700 1556 ? S 12:00 0:00 nginx: worker process</span><br><span class="line">root 19823 0.0 0.0 112812 980 pts/2 R+ 12:05 0:00 grep -- color=auto nginx</span><br><span class="line"></span><br><span class="line">[root@yum_repo ~]# ps aux|grep [n]ginx grep nginx</span><br><span class="line">root 19823 0.0 0.0 112812 980 pts/2 R+ 12:05 0:00 grep --  color=auto [n]ginx</span><br><span class="line"></span><br><span class="line"><span class="comment">#检索pid号码 pgrep</span></span><br><span class="line"><span class="comment">#pgrep常用参数, -l -a</span></span><br><span class="line">[root@zls ~]# pgrep sshd</span><br><span class="line">869</span><br><span class="line">1194</span><br><span class="line">1307</span><br><span class="line">1574</span><br><span class="line">[root@zls ~]# pgrep -l sshd		显示进程名及ID</span><br><span class="line">869 sshd</span><br><span class="line">1194 sshd</span><br><span class="line">1307 sshd</span><br><span class="line">1574 sshd</span><br><span class="line">[root@zls ~]# pgrep -l -a sshd</span><br><span class="line">869 /usr/sbin/sshd -D</span><br><span class="line">1194 sshd: root@pts/0</span><br><span class="line">1307 sshd: root@pts/1</span><br><span class="line">1574 sshd: root@pts/2</span><br><span class="line"><span class="comment">#查看进程的pid</span></span><br><span class="line">[root@zls ~]# pidof sshd</span><br><span class="line">1574 1307 1194 869</span><br><span class="line"><span class="comment">## 树状形式显示进程    需要安装psmisc支持pstree</span></span><br><span class="line">[root@yum_repo ~]# pstree</span><br><span class="line">systemd─┬─NetworkManager───2*[&#123;NetworkManager&#125;]</span><br><span class="line">├─VGAuthService</span><br><span class="line">├─agetty</span><br><span class="line">├─auditd───&#123;auditd&#125;</span><br><span class="line">├─crond───crond───sh───ntpdate</span><br><span class="line">├─dbus-daemon</span><br><span class="line">├─gssproxy───5*[&#123;gssproxy&#125;]</span><br><span class="line">├─nginx───20*[nginx]</span><br><span class="line">├─polkitd───6*[&#123;polkitd&#125;]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="⑤-top（动态命令）">⑤ top（动态命令）</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 第一行</span></span><br><span class="line">top - 14:41:23 up  3:38,  1 user,  load average: 0.00, 0.01, 0.05</span><br><span class="line">top：命令</span><br><span class="line">-：分隔符</span><br><span class="line">09:32:57 ：当前系统时间</span><br><span class="line">up 1:23 ：服务器运行时间</span><br><span class="line">1 user ：当前登录系统的用户数量</span><br><span class="line">load average: 系统负载</span><br><span class="line">0.00：1分钟</span><br><span class="line">0.01：5分钟</span><br><span class="line">0.05：15分钟</span><br><span class="line"><span class="comment"># 第二行</span></span><br><span class="line">Tasks:  98 total,   1 running,  97 sleeping,   0 stopped,   0 zombie</span><br><span class="line">Tasks: 任务，进程数量</span><br><span class="line">116 total // 进程总量</span><br><span class="line">1 running // 1个正在运行的进程 R</span><br><span class="line">115 sleeping // 115处于休眠状态的进程 S</span><br><span class="line">0 stopped // 0个被暂停状态的进程 T</span><br><span class="line">0 zombie // 0个僵尸进程 Z</span><br><span class="line"><span class="comment"># 第三行</span></span><br><span class="line">%Cpu(s):  0.0 us,  0.3 sy,  0.0 ni, 99.7 <span class="built_in">id</span>,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st</span><br><span class="line">%Cpu(s):</span><br><span class="line">0.0 us：user 用户态 用户使用程序占用CPU的百分比</span><br><span class="line">0.3 sy：system 内核态 系统使用程序占用CPU的百分比</span><br><span class="line">0.0 ni：<span class="built_in">nice</span> 优先级 优先级调度的进程占用CPU的百分比</span><br><span class="line">99.7 <span class="built_in">id</span>：idle 空闲 CPU的空闲率</span><br><span class="line">0.0 wa： <span class="built_in">wait</span> 等待 处于等待状态的进程占用CPU的百分比</span><br><span class="line">0.0 hi： 硬中断 硬中断占用CPU的百分比</span><br><span class="line">0.0 si： 软中断 软终端占用CPU的百分比</span><br><span class="line">0.0 st： 虚拟化 虚拟化占用CPU的百分比</span><br><span class="line"><span class="comment"># 第四行</span></span><br><span class="line">KiB Mem :   995896 total,   425312 free,   108804 used,   461780 buff/cache</span><br><span class="line">KiB Mem : 内存</span><br><span class="line">995896 total：总内存大小</span><br><span class="line">748564 free：空闲内存大小</span><br><span class="line">107768 used：已使用内存大小</span><br><span class="line">139564 buff/cache：缓冲区/缓存区使用内存大小</span><br><span class="line"><span class="comment"># 第五行</span></span><br><span class="line">KiB Swap:  1048572 total,  1048572 free,        0 used.   700372 avail Mem</span><br><span class="line">KiB Swap: 交换分区swap （虚拟内存）</span><br><span class="line">1048572 total：虚拟内存总大小</span><br><span class="line">1048572 free：虚拟内存空闲大小</span><br><span class="line">0 used：虚拟内存使用大小</span><br><span class="line">729176 avail Mem：虚拟内存可用大小</span><br><span class="line">Windows：NTFS、FAT32</span><br><span class="line">Linux：</span><br><span class="line">CentOS7：xfs file system</span><br><span class="line">CentOS6：ext4</span><br><span class="line"><span class="comment"># 第六行</span></span><br><span class="line">PID USER      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND</span><br><span class="line">PID：进程ID号</span><br><span class="line">USER：进程启动用户</span><br><span class="line">PR NI：权重优先级 两者相差20，互斥</span><br><span class="line">VIRT：虚拟内存</span><br><span class="line">RES：真实物理内存</span><br><span class="line">SHR：闪存</span><br><span class="line">S：进程状态</span><br><span class="line">%CPU：CPU使用率</span><br><span class="line">%MEM：内存使用率</span><br><span class="line">TIME+ ：该进程在CPU内运行的时间</span><br><span class="line">COMMAND：服务启动的命令</span><br></pre></td></tr></table></figure>
<h4 id="⑥-top命令的使用">⑥ top命令的使用</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">[root@yum_repo ~]# yum install -y htop</span><br><span class="line">[root@yum_repo ~]# yum install -y glances</span><br><span class="line">[root@yum_repo ~]# top</span><br><span class="line">[root@yum_repo ~]# htop</span><br><span class="line">[root@yum_repo ~]# glances</span><br><span class="line"><span class="comment"># -n：指定查看几次结果</span></span><br><span class="line">[root@yum_repo ~]# top -n 5</span><br><span class="line"><span class="comment"># -d：指定更新时间（默认3s更新一次数据）</span></span><br><span class="line">[root@yum_repo ~]# top -d 1 -n 5</span><br><span class="line"><span class="comment"># -p：指定想查看的进程PID</span></span><br><span class="line">[root@yum_repo ~]# top -p 1278</span><br><span class="line">[root@yum_repo ~]# top -p $(pidof nginx|<span class="built_in">tr</span> <span class="string">&#x27; &#x27;</span> <span class="string">&#x27;,&#x27;</span>)</span><br><span class="line"><span class="comment"># -b：将多次结果保存到文件中</span></span><br><span class="line">[root@yum_repo ~]# top -d 1 -n 3 -b &gt; /tmp/1.txt</span><br><span class="line"></span><br><span class="line">注意：#不使用-b选项，只能写入最后一次的结果。top是动态的，只有结束才能够写入1.txt，结束的时候写入的也只是最后一次的结果</span><br><span class="line">top -n 3 &gt;1.txt   </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#top 常见指令</span></span><br><span class="line">h 查看帮出</span><br><span class="line">z 高亮显示</span><br><span class="line">1 显示所有CPU的负载</span><br><span class="line">s 设置刷新时间</span><br><span class="line">b 高亮现实处于R状态的进程</span><br><span class="line">M 按内存使用百分比排序输出</span><br><span class="line">P 按CPU使用百分比排序输出</span><br><span class="line">R 对排序进行反转</span><br><span class="line">f 自定义显示字段</span><br><span class="line">k <span class="built_in">kill</span>掉指定PID进程</span><br><span class="line">W 保存top环境设置 ~/.toprc</span><br><span class="line">q 退出</span><br></pre></td></tr></table></figure>
<h4 id="⑦-中断">⑦ 中断</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">中断是系统用来影响硬件设备请求的一种机制，它会打断进程的正常调度和执行，然后调用内核中的中断处理程序来影响设备的请求</span><br><span class="line"><span class="comment">#中断的作用：</span></span><br><span class="line">是为了让计算机可以处理更多的请求</span><br><span class="line"><span class="comment">#只有中断，存在的问题：</span></span><br><span class="line">会导致数据丢失</span><br><span class="line"><span class="comment">#解决办法：</span></span><br><span class="line">将中断，分为两个部分</span><br><span class="line">硬中断：快速处理任务，临时保存在内存里</span><br><span class="line">软中断：延迟处理未完成的任务</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="⑧-kill信号管理">⑧ kill信号管理</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -l</span><br><span class="line">1) SIGHUP 2) SIGINT 3) SIGQUIT 4) SIGILL 5) SIGTRAP</span><br><span class="line">6) SIGABRT 7) SIGBUS 8) SIGFPE 9) SIGKILL 10) SIGUSR1</span><br><span class="line">11) SIGSEGV 12) SIGUSR2 13) SIGPIPE 14) SIGALRM 15) SIGTERM</span><br><span class="line">16) SIGSTKFLT 17) SIGCHLD 18) SIGCONT 19) SIGSTOP 20) SIGTSTP</span><br><span class="line">21) SIGTTIN 22) SIGTTOU 23) SIGURG 24) SIGXCPU 25) SIGXFSZ</span><br><span class="line">26) SIGVTALRM 27) SIGPROF 28) SIGWINCH 29) SIGIO 30) SIGPWR</span><br><span class="line">31) SIGSYS 34) SIGRTMIN 35) SIGRTMIN+1 36) SIGRTMIN+2 37) SIGRTMIN+3</span><br><span class="line">38) SIGRTMIN+4 39) SIGRTMIN+5 40) SIGRTMIN+6 41) SIGRTMIN+7 42) SIGRTMIN+8</span><br><span class="line">43) SIGRTMIN+9 44) SIGRTMIN+10 45) SIGRTMIN+11 46) SIGRTMIN+12 47) SIGRTMIN+13</span><br><span class="line">48) SIGRTMIN+14 49) SIGRTMIN+15 50) SIGRTMAX-14 51) SIGRTMAX-13 52) SIGRTMAX-12</span><br><span class="line">53) SIGRTMAX-11 54) SIGRTMAX-10 55) SIGRTMAX-9 56) SIGRTMAX-8 57) SIGRTMAX-7</span><br><span class="line">58) SIGRTMAX-6 59) SIGRTMAX-5 60) SIGRTMAX-4 61) SIGRTMAX-3 62) SIGRTMAX-2</span><br><span class="line">63) SIGRTMAX-1 64) SIGRTMAX</span><br><span class="line"></span><br><span class="line"><span class="comment">## 重启 restart</span></span><br><span class="line">先关闭服务，再开启服务</span><br><span class="line"><span class="comment">## 重新加载 reload</span></span><br><span class="line">只重新读取配置文件，不会停止服务</span><br><span class="line"></span><br><span class="line"><span class="comment">## 重新加载服务配置文件</span></span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -1 8582</span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -HUP 8582</span><br><span class="line"></span><br><span class="line"><span class="comment">## 中断一个正在运行的程序 Ctrl + c</span></span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -2 8779</span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -INT 8779</span><br><span class="line"><span class="comment">## 退出程序</span></span><br><span class="line">[root@yum_repo ~]# systemctl stop nginx</span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -3 8582</span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -QUIT 8582</span><br><span class="line"><span class="comment">## 强制结束程序，该信号不能被捕获</span></span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -9 8847</span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -KILL 8847</span><br><span class="line"><span class="comment">## 默认退出信号</span></span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> 1122</span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -15 1122</span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -TERM 1122</span><br><span class="line"><span class="comment">## 让被暂停的程序恢复运行</span></span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -18 8870</span><br><span class="line"><span class="comment">## 让程序暂停 Ctrl + z</span></span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -19 8884</span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -20 8896</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="2-优先级-负载">2.优先级&amp;负载</h3>
<h4 id="1-进程优先级">1.进程优先级</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">作用：可以让优先级高的进程，优先使用系统资源，内存、CPU、磁盘、文件描述符...</span><br><span class="line"></span><br><span class="line"><span class="built_in">nice</span>值越高：表示优先级越低，例如19，该进程容易将CPU使用量让给其他进程。</span><br><span class="line"><span class="built_in">nice</span>值越低：表示优先级越高，例如-20，该进程更不倾向于让出CPU。</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 查看优先级</span></span><br><span class="line">[root@localhost ~]# top -n 1 -p 6884</span><br><span class="line">[root@localhost ~]# ps axo pid,user,<span class="built_in">nice</span>,<span class="built_in">command</span>|grep sshd</span><br><span class="line"><span class="comment">## 配置优先级</span></span><br><span class="line"><span class="comment"># 在进程启动命令之前，加上nice</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">nice</span> -n 优先级（-20 ~ 20） 程序启动命令（systemctl不行）</span><br><span class="line"><span class="comment">## 配置nginx优先级</span></span><br><span class="line"><span class="comment"># 1.正常启动nginx找到启动命令</span></span><br><span class="line">[root@localhost ~]# systemctl start nginx</span><br><span class="line">[root@localhost ~]# ps -ef|grep nginx</span><br><span class="line">root 10691 1 0 18:08 ? 00:00:00 nginx: master process</span><br><span class="line">/usr/sbin/nginx</span><br><span class="line"><span class="comment"># 2.先停止服务</span></span><br><span class="line">[root@localhost ~]# systemctl stop nginx</span><br><span class="line"><span class="comment"># 3.配置优先级启动</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">nice</span> -n -15 /usr/sbin/nginx</span><br><span class="line"><span class="comment"># 4.检查是否启动成功</span></span><br><span class="line">[root@localhost ~]# ps -ef|grep nginx</span><br><span class="line">[root@localhost ~]# netstat -lntup|grep nginx</span><br><span class="line">tcp 0 0 0.0.0.0:80 0.0.0.0:* LISTEN</span><br><span class="line">10770/nginx: master</span><br><span class="line">tcp6 0 0 :::80 :::* LISTEN</span><br><span class="line">10770/nginx: master</span><br><span class="line"><span class="comment"># 5.检查优先级</span></span><br><span class="line">[root@localhost ~]# top -p 10770</span><br><span class="line">PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND</span><br><span class="line">10770 root 5 -15</span><br><span class="line">39304 1068 124 S 0.0 0.1 0:00.00 nginx</span><br></pre></td></tr></table></figure>
<p><strong>Linux假死</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ping 通一台机器，一定能ssh连上这台机器吗？</span></span><br><span class="line">不一定 ping协议：icmp</span><br><span class="line">原因：ping 通，只能能说明icmp协议是通的，不能说明ssh协议是通的</span><br><span class="line"><span class="comment">#ping 不通一台机器，一定ssh连不上这台机器吗？</span></span><br><span class="line">不一定 ping协议：icmp</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="2-Linux后台进程管理">2.Linux后台进程管理</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如何将进程放入后台运行</span></span><br><span class="line"><span class="comment"># 1.方法一：在想要执行的命令后面加上&amp;</span></span><br><span class="line">[root@localhost ~]# ping baidu.com &amp;</span><br><span class="line">[root@localhost ~]# ping baidu.com &gt;&gt; /tmp/1.txt &amp;</span><br><span class="line"><span class="comment"># 2.方法二：在需要放入后台的命令前面加上nohup 后面加上 &amp;</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">nohup</span> ping baidu.com &amp; // 在当前目录下生成一个nohup.out文件，</span><br><span class="line">所有输出结果会放入该文件</span><br><span class="line"><span class="comment"># 3.方法三：将进程先暂停到后台 输入：bg 将程序放入后台运行（background）</span></span><br><span class="line">[root@localhost ~]# ping baidu.com</span><br><span class="line">Ctrl + Z // 将程序暂停到后台</span><br><span class="line"><span class="built_in">bg</span> // 将暂停的程序放入后台运行</span><br><span class="line"><span class="built_in">fg</span> // 将暂停的程序调到前台运行 根据编号，调用指定的进程到前台</span><br><span class="line"><span class="built_in">jobs</span> // 查看后台暂停的程序有哪些</span><br><span class="line"><span class="comment"># 4.方法四：使用screen，开启新屏幕</span></span><br><span class="line">[root@localhost ~]# yum install -y screen</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 查看screen后台运行任务</span></span><br><span class="line">[root@localhost ~]# screen -<span class="built_in">ls</span></span><br><span class="line">[root@localhost ~]# screen -list</span><br><span class="line">There are screens on:</span><br><span class="line">11050.sina (Detached)</span><br><span class="line"><span class="comment">## 创建卷轴</span></span><br><span class="line">[root@localhost ~]# screen // 没有命名的卷轴</span><br><span class="line">[root@localhost ~]# screen -S baidu // 指定名字</span><br><span class="line"><span class="comment">## 封印 回到前台界面</span></span><br><span class="line">Ctrl + a + d</span><br><span class="line"><span class="comment">## 删除窗口</span></span><br><span class="line">[root@localhost ~]# screen -S sina -X quit</span><br></pre></td></tr></table></figure>
<h4 id="3-系统平均负载">3.系统平均负载</h4>
<p>每次发现系统变慢时，我们通常做的第一件事，就是执行top或者uptime命令，来了解系统的负载情况。平均负载与CPU使用率并没有直接关系。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 查看系统负载情况</span></span><br><span class="line">[root@localhost ~]# w</span><br><span class="line">19:36:06 up 3:36, 3 <span class="built_in">users</span>, load average: 0.00, 0.01, 0.05</span><br><span class="line">[root@localhost ~]# <span class="built_in">uptime</span></span><br><span class="line">19:36:10 up 3:36, 3 <span class="built_in">users</span>, load average: 0.00, 0.01, 0.05</span><br><span class="line">[root@localhost ~]# top -n 1</span><br><span class="line">top - 19:36:15 up 3:36, 3 <span class="built_in">users</span>, load average: 0.00, 0.01, 0.05</span><br></pre></td></tr></table></figure>
<p><font color='red'><strong>平均负载是指，单位时间内，系统处于可运行状态和不可中断状态的平均进程数，也就是平均活跃进程数</strong></font></p>
<p><strong>可运行状态和不可中断状态是什么？</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.可运行状态进程，是指正在使用CPU或者正在等待CPU的进程，也就是我们用PS命令看的处于R状态的进程</span><br><span class="line">2.不可中断进程，（你在做什么事情的时候是不能被打断的呢？...不可描述）系统中最常见的是等待硬件设备的IO相应，也就是我们PS命令中看到的D状态（也成为Disk Sleep）的进程。平均负载其实就是单位时间内的活跃进程数</span><br></pre></td></tr></table></figure>
<p><strong>平均负载多少时合理？</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">最理想的状态是每个CPU上都刚还运行着一个进程，这样每个CPU都得到了充分利用。</span><br><span class="line">所以在评判负载时，首先你要知道系统有几个CPU，这可以通过top命令获取，或grep <span class="string">&#x27;model name&#x27;</span></span><br><span class="line">/proc/cpuinfo</span><br><span class="line"><span class="comment">## 如何查看当前系统CPU核心数</span></span><br><span class="line">[root@localhost ~]# top</span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> /proc/cpuinfo</span><br><span class="line">[root@localhost ~]# lscpu</span><br><span class="line">假设现在在4，2，1核的CPU上，如果平均负载为2时，意味着什么呢？</span><br><span class="line">1.在4个CPU的系统上，意味着CPU有50%空闲。</span><br><span class="line">2.在2个CPU的系统上，以为这所有的CPU都刚好完全被占用。</span><br><span class="line">3.在1个CPU的系统上，则意味着有一半的进程竞争不到CPU。</span><br><span class="line"></span><br><span class="line"><span class="comment">#三个值关注哪个合理</span></span><br><span class="line">1）三个值，不能只关注其中一个值（三个都要看）</span><br><span class="line">2）不能根据1分钟负载低情况来判断，当前负载处于下降状态（不关注服务器的问题）</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#计算方式</span></span><br><span class="line">假设我们在有2个CPU系统上看到平均负载为2.73，6.90，12.98那么说明在过去1分钟内，系统有136%的超载</span><br><span class="line">1分钟：（2.73/2*100%=136%）</span><br><span class="line">5分钟：（6.90/2*100%=345%）</span><br><span class="line">15分钟：(12.98/2*100%=649%)</span><br><span class="line">计算公式：（负载/核心数）*100%</span><br></pre></td></tr></table></figure>
<p><strong>负载过高排查</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">web01机器很卡，找出原因</span><br><span class="line"><span class="comment">### 压测命令</span></span><br><span class="line">stress （K8S）是Linux系统压力测试工具，这里我们用作异常进程模拟平均负载升高的场景</span><br><span class="line"><span class="comment">##################################################################</span></span><br><span class="line"><span class="comment">### 排查工具</span></span><br><span class="line">mpstat是多核CPU性能分析工具，用来实时检查每个CPU的性能指标，以及所有CPU的平均指标。</span><br><span class="line">pidstat是一个常用的进程性能分析工具，用来实时查看进程的CPU，内存，IO，以及上下文切换等性能指标。</span><br></pre></td></tr></table></figure>
<h4 id="4-CPU对负载影响">4.CPU对负载影响</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# yum intall -y sysstat</span><br><span class="line"><span class="comment">## 分析CPU</span></span><br><span class="line">[root@localhost ~]# mpstat -P ALL 1</span><br><span class="line">[root@localhost ~]# top</span><br><span class="line">%Cpu0 : 99.2 us, 0.0 sy, 0.0 ni, 0.0 <span class="built_in">id</span>, 0.0 wa, 0.0 hi, 0.8 si, 0.0 st</span><br><span class="line">%Cpu1 :100.0 us, 0.0 sy, 0.0 ni, 0.0 <span class="built_in">id</span>, 0.0 wa, 0.0 hi, 0.0 si, 0.0 st</span><br><span class="line">%Cpu2 : 0.0 us, 0.0 sy, 0.0 ni, 99.0 <span class="built_in">id</span>, 0.0 wa, 0.0 hi, 1.0 si, 0.0 st</span><br><span class="line">%Cpu3 :100.0 us, 0.0 sy, 0.0 ni, 0.0 <span class="built_in">id</span>, 0.0 wa, 0.0 hi, 0.0 si, 0.0 st</span><br><span class="line">[root@localhost ~]# pidstat -u 5 1</span><br><span class="line">Linux 3.10.0-957.el7.x86_64 (localhost.localdomain) 04/26/2024 _x86_64_(4 CPU)</span><br><span class="line">08:21:50 PM UID PID %usr %system %guest %CPU CPU Command</span><br><span class="line">08:21:55 PM 0 9 0.00 0.20 0.00 0.20 0 rcu_sched</span><br><span class="line">08:21:55 PM 0 60 0.00 0.20 0.00 0.20 0 kworker/0:1</span><br><span class="line">08:21:55 PM 0 6618 0.00 0.20 0.00 0.20 0 sshd</span><br><span class="line">08:21:55 PM 0 6803 99.60 0.20 0.00 99.80 3 java</span><br><span class="line">08:21:55 PM 0 6804 99.40 0.40 0.00 99.80 2 java</span><br><span class="line">08:21:55 PM 0 6805 99.60 0.40 0.00 100.00 1 java</span><br><span class="line">08:21:55 PM 0 6815 0.00 0.20 0.00 0.20 0 pidstat</span><br><span class="line">Average: UID PID %usr %system %guest %CPU CPU Command</span><br><span class="line">Average: 0 9 0.00 0.20 0.00 0.20 - rcu_sched</span><br><span class="line">Average: 0 60 0.00 0.20 0.00 0.20 - kworker/0:1</span><br><span class="line">Average: 0 6618 0.00 0.20 0.00 0.20 - sshd</span><br><span class="line">Average: 0 6803 99.60 0.20 0.00 99.80 - java</span><br><span class="line">Average: 0 6804 99.40 0.40 0.00 99.80 - java</span><br><span class="line">Average: 0 6805 99.60 0.40 0.00 100.00 - java</span><br><span class="line">Average: 0 6815 0.00 0.20 0.00 0.20 - pidstat</span><br><span class="line"><span class="comment">## 查找对应程序的日志</span></span><br><span class="line"><span class="built_in">tail</span> -f /var/log/nginx/access.log</span><br><span class="line">tial -f /var/log/java/xxxx.log</span><br><span class="line">error：找到报错</span><br><span class="line"><span class="comment">## 将日志交给开发处理/分析</span></span><br></pre></td></tr></table></figure>
<h4 id="5-磁盘IO对负载影响">5.磁盘IO对负载影响</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## IO对CPU的影响</span></span><br><span class="line">[root@localhost ~]# mpstat -P ALL 3</span><br><span class="line">Linux 3.10.0-957.el7.x86_64 (localhost.localdomain) 04/26/2024 _x86_64_(4 CPU)</span><br><span class="line">08:29:48 PM CPU %usr %<span class="built_in">nice</span> %sys %iowait %irq %soft %steal %guest %gnice %idle</span><br><span class="line">08:29:51 PM all 0.17 0.00 73.85 0.00 0.00 0.00 0.00 0.00 0.00 25.98</span><br><span class="line">08:29:51 PM 0 0.00 0.00 66.93 0.00 0.00 0.00 0.00 0.00 0.00 33.07</span><br><span class="line">08:29:51 PM 1 0.00 0.00 68.15 0.00 0.00 0.00 0.00 0.00 0.00 31.85</span><br><span class="line">08:29:51 PM 2 0.00 0.00 79.87 0.00 0.00 0.00 0.00 0.00 0.00 20.13</span><br><span class="line">08:29:51 PM 3 0.00 0.00 78.92 0.00 0.00 0.00 0.00 0.00 0.00 21.08</span><br><span class="line"><span class="comment">## iostat 查看磁盘IO信息</span></span><br><span class="line">[root@localhost ~]# iostat</span><br><span class="line">Linux 3.10.0-957.el7.x86_64 (localhost.localdomain) 04/26/2024 _x86_64_(4 CPU)</span><br><span class="line">avg-cpu: %user %<span class="built_in">nice</span> %system %iowait %steal %idle</span><br><span class="line">16.40 0.00 3.49 0.01 0.00 80.10</span><br><span class="line">Device: tps kB_read/s kB_wrtn/s kB_read kB_wrtn</span><br><span class="line">scd0 0.01 0.53 0.00 1028 0</span><br><span class="line">sda 6.23 283.56 8.79 548598 17015</span><br><span class="line">[root@localhost ~]# pidstat -u 5 1</span><br><span class="line">08:30:36 PM 0 6831 0.40 76.74 0.00 77.14 3 stress</span><br><span class="line">08:30:36 PM 0 6832 0.00 78.13 0.00 78.13 1 stress</span><br><span class="line">08:30:36 PM 0 6833 0.00 74.55 0.00 74.55 3 stress</span><br></pre></td></tr></table></figure>
<h4 id="6-多进程对负载影响">6.多进程对负载影响</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# mpstat -P ALL 3</span><br><span class="line">Linux 3.10.0-957.el7.x86_64 (localhost.localdomain) 04/26/2024 _x86_64_(4 CPU)</span><br><span class="line">08:33:45 PM CPU %usr %<span class="built_in">nice</span> %sys %iowait %irq %soft %steal %guest %gnice %idle</span><br><span class="line">08:33:48 PM all 53.94 0.00 0.25 0.00 0.00 0.25 0.00 0.00 0.00 45.57</span><br><span class="line">08:33:48 PM 0 53.00 0.00 0.50 0.00 0.00 0.00 0.00 0.00 0.00 46.50</span><br><span class="line">08:33:48 PM 1 54.41 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 45.59</span><br><span class="line">08:33:48 PM 2 52.50 0.00 0.50 0.00 0.00 0.50 0.00 0.00 0.00 46.50</span><br><span class="line">08:33:48 PM 3 55.02 0.00 0.00 0.00 0.00 0.48 0.00 0.00 0.00 44.50</span><br><span class="line">[root@localhost ~]# pidstat -u 5 1</span><br><span class="line">08:30:36 PM 0 6831 0.40 76.74 0.00 77.14 3 stress</span><br><span class="line">08:30:36 PM 0 6832 0.00 78.13 0.00 78.13 1 stress</span><br><span class="line">08:30:36 PM 0 6833 0.00 74.55 0.00 74.55 3 stress</span><br><span class="line"><span class="comment"># 总结：</span></span><br><span class="line">1.平均负载高有可能是CPU密集型进程导致的</span><br><span class="line">2.平均负载高并不一定代表CPU的使用率就一定高，还有可能是I/O繁忙</span><br><span class="line">3.当发现负载高时，可以使用mpstat、pidstat等工具，快速定位到，负载高的原因，从而做出处理</span><br></pre></td></tr></table></figure>
<p><strong>负载达到多少时候需要注意</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">当平均负载高于CPU数量70%的时候，你就应该分析排查负载高的问题了，一旦负载过高，就可能导致进程相应变慢，进而影响服务的正常功能。</span><br><span class="line">但70%这个数字并不是绝对的，最推荐的方法，还是把系统的平均负载监控起来，然后根据更多的历史数据，判断负载的变化趋势，当发现负载有明显升高的趋势时，比如说负载翻倍了，你再去做分析和调查。</span><br></pre></td></tr></table></figure>
<h3 id="3-系统启动流程">3.系统启动流程</h3>
<h4 id="1-Centos6启动流程">1.Centos6启动流程</h4>
<p><strong>==1.加电自检==</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Centos6</span><br><span class="line">1.BIOS加电自检</span><br><span class="line">2.内核引导</span><br><span class="line">3.读取GRUB菜单</span><br><span class="line">4.运行init，读取/etc/inittab默认运行级别</span><br><span class="line">5.按顺序启动其他服务/etc/rcN.d  </span><br><span class="line">6.建立终端</span><br><span class="line">7.用户登录</span><br></pre></td></tr></table></figure>
<p><strong>==2.内核引导==</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">打开电源，BiOS加电自检</span><br><span class="line">检测硬件是否损坏：CPU、内存、磁盘</span><br><span class="line">读取/boot目录下的文件，加载启动文件，GRUB菜单</span><br><span class="line">GRUB菜单提供已安装系统的选项，如果是多系统，选择要进入的系统</span><br></pre></td></tr></table></figure>
<p><strong>==3.运行init==</strong></p>
<p>init运行级别 init 在CentOS中，是系统所有进程的起点，如果进程想启动，那必须有init，如果没有init，系统中的任 何进程都不会启动，那就相当于这个系统打不开</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">init是CentOS6中PID为0的进程，是所有进程启动的起点</span><br><span class="line">[root@localhost ~]# pstree</span><br><span class="line">init─┬─abrtd</span><br><span class="line">     ├─acpid</span><br><span class="line">     ├─atd</span><br><span class="line">     ├─auditd───&#123;auditd&#125;</span><br><span class="line">     ├─console-kit-dae───63*[&#123;console-kit-da&#125;]</span><br><span class="line">     ├─sshd───sshd───bash───pstree</span><br><span class="line">     └─udevd───2*[udevd]</span><br><span class="line">    </span><br></pre></td></tr></table></figure>
<p><strong>==运行级别==</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">init程序首先是需要读取配置文件/etc/inittab</span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> /etc/inittab</span><br><span class="line"><span class="comment"># Default runlevel. The runlevels used are:</span></span><br><span class="line"><span class="comment"># 0 - halt (Do NOT set initdefault to this)</span></span><br><span class="line"><span class="comment"># 1 - Single user mode</span></span><br><span class="line"><span class="comment"># 2 - Multiuser, without NFS (The same as 3, if you do not have networking)</span></span><br><span class="line"><span class="comment"># 3 - Full multiuser mode</span></span><br><span class="line"><span class="comment"># 4 - unused</span></span><br><span class="line"><span class="comment"># 5 - X11</span></span><br><span class="line"><span class="comment"># 6 - reboot (Do NOT set initdefault to this)</span></span><br><span class="line"><span class="built_in">id</span>:3:initdefault:  <span class="comment">#设置运行级别为3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行级别：</span></span><br><span class="line">0：关机运行级别 <span class="comment">#开机即关机</span></span><br><span class="line">1：单用户模式运行级别</span><br><span class="line">2：多用户模式，但是没有文件系统，没有网络</span><br><span class="line">3：完整的多用户模式，有文件系统，有网络</span><br><span class="line">4：未被使用的运行级别</span><br><span class="line">5：图形化运行级别</span><br><span class="line">6：重启运行级别 <span class="comment">#默认运行级别不能设为6，否则不能正常启动</span></span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240429154944112.png" alt="image-20240429154944112"></p>
<p><strong>==查看当前运行级别==</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# runlevel</span><br><span class="line">N 3</span><br><span class="line"><span class="comment">#临时切换运行级别</span></span><br><span class="line">[root@localhost ~]# init 5</span><br><span class="line"><span class="comment">#永久切换运行级别</span></span><br><span class="line">[rootezls ~]vim /etc/inittab</span><br><span class="line"><span class="built_in">id</span>:3:initdefault</span><br></pre></td></tr></table></figure>
<p><strong>读取完配置文件，找到对应的运行级别 3</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">查询操作系统在每一个执行等级中会执行哪些系统服务，其中包括各类常驻服务。</span><br><span class="line">[root@localhost ~]# chkconfig</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# chkconfig |grep <span class="string">&#x27;3:on&#x27;</span></span><br><span class="line">auditd 0:off 1:off 2:on 3:on 4:on 5:on 6:off</span><br><span class="line">crond 0:off 1:off 2:on 3:on 4:on 5:on 6:off</span><br><span class="line">ip6tables 0:off 1:off 2:on 3:on 4:on 5:on 6:off</span><br><span class="line">iptables 0:off 1:off 2:on 3:on 4:on 5:on 6:off</span><br><span class="line">kdump 0:off 1:off 2:off 3:on 4:on 5:on 6:off</span><br><span class="line">mdmonitor 0:off 1:off 2:on 3:on 4:on 5:on 6:off</span><br><span class="line">netfs 0:off 1:off 2:off 3:on 4:on 5:on 6:off</span><br><span class="line">network 0:off 1:off 2:on 3:on 4:on 5:on 6:off</span><br><span class="line">postfix 0:off 1:off 2:on 3:on 4:on 5:on 6:off</span><br><span class="line">rsyslog 0:off 1:off 2:on 3:on 4:on 5:on 6:off</span><br><span class="line">sshd 0:off 1:off 2:on 3:on 4:on 5:on 6:off</span><br><span class="line">udev-post 0:off 1:on 2:on 3:on 4:on 5:on 6:off</span><br></pre></td></tr></table></figure>
<p><strong>==5.系统初始化==</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 读取3运行级别的服务启动顺序</span></span><br><span class="line"><span class="comment">##S开头的是关机服务停止顺序</span></span><br><span class="line">[root@localhost ~]# ll /etc/rc3.d/</span><br><span class="line">total 0</span><br><span class="line">lrwxrwxrwx. 1 root root 19 Apr 29 17:06 K10saslauthd -&gt; ../init.d/saslauthd</span><br><span class="line">lrwxrwxrwx. 1 root root 21 Apr 29 17:06 K87restorecond -&gt; ../init.d/restorecond</span><br><span class="line">lrwxrwxrwx. 1 root root 20 Apr 29 17:06 K89netconsole -&gt; ../init.d/netconsole</span><br><span class="line">lrwxrwxrwx. 1 root root 15 Apr 29 17:06 K89rdisc -&gt; ../init.d/rdisc</span><br><span class="line">lrwxrwxrwx. 1 root root 19 Apr 29 17:06 S08ip6tables -&gt; ../init.d/ip6tables</span><br><span class="line">lrwxrwxrwx. 1 root root 18 Apr 29 17:06 S08iptables -&gt; ../init.d/iptables</span><br><span class="line">lrwxrwxrwx. 1 root root 17 Apr 29 17:06 S10network -&gt; ../init.d/network</span><br><span class="line">lrwxrwxrwx. 1 root root 16 Apr 29 17:07 S11auditd -&gt; ../init.d/auditd</span><br><span class="line">lrwxrwxrwx. 1 root root 17 Apr 29 17:06 S12rsyslog -&gt; ../init.d/rsyslog</span><br><span class="line">lrwxrwxrwx. 1 root root 19 Apr 29 17:06 S15mdmonitor -&gt; ../init.d/mdmonitor</span><br><span class="line">lrwxrwxrwx. 1 root root 15 Apr 29 17:06 S25netfs -&gt; ../init.d/netfs</span><br><span class="line">lrwxrwxrwx. 1 root root 19 Apr 29 17:06 S26udev-post -&gt; ../init.d/udev-post</span><br><span class="line">lrwxrwxrwx. 1 root root 15 Apr 29 17:07 S50kdump -&gt; ../init.d/kdump</span><br><span class="line">lrwxrwxrwx. 1 root root 14 Apr 29 17:07 S55sshd -&gt; ../init.d/sshd</span><br><span class="line">lrwxrwxrwx. 1 root root 17 Apr 29 17:06 S80postfix -&gt; ../init.d/postfix</span><br><span class="line">lrwxrwxrwx. 1 root root 15 Apr 29 17:06 S90crond -&gt; ../init.d/crond</span><br><span class="line">lrwxrwxrwx. 1 root root 11 Apr 29 17:06 S99local -&gt; ../rc.local</span><br><span class="line"><span class="comment"># chkconfig: 2345 55 25</span></span><br><span class="line"><span class="comment"># CentOS6中所有脚本都是shell脚本</span></span><br><span class="line">[root@localhost ~]# ll /etc/init.d/      查看所有程序的启动脚本</span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> /etc/init.d/sshd</span><br><span class="line"><span class="comment"># chkconfig: 2345 55 25</span></span><br><span class="line">在2345运行级别上，默认开机自启</span><br><span class="line">55：开机第55个启动</span><br><span class="line">25：关机第25个关闭</span><br></pre></td></tr></table></figure>
<p><strong>==6.建立终端==</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">rc执行完毕后，返回init。这时基本系统环境已经设置好了，各种守护进程也已经启动了。 init接下来会打开6个终端，以便用户登录系统。在inittab中的以下6行就是定义了6个终端：</span><br><span class="line">1:2345:respawn:/sbin/mingetty tty1</span><br><span class="line">2:2345:respawn:/sbin/mingetty tty2</span><br><span class="line">3:2345:respawn:/sbin/mingetty tty3</span><br><span class="line">4:2345:respawn:/sbin/mingetty tty4</span><br><span class="line">5:2345:respawn:/sbin/mingetty tty5</span><br><span class="line">6:2345:respawn:/sbin/mingetty tty6</span><br><span class="line"></span><br><span class="line">远程连接工具</span><br><span class="line">pts/0</span><br></pre></td></tr></table></figure>
<p><strong>==7.用户登录系统==</strong></p>
<p>一般来说，用户的登录方式有三种：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">（1）命令行登录</span><br><span class="line">（2）ssh登录</span><br><span class="line">（3）图形界面登录</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240429161712973.png" alt="image-20240429161712973"></p>
<h4 id="2-系统关机命令">2.系统关机命令</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 关机</span></span><br><span class="line">halt</span><br><span class="line">shutdown -h now</span><br><span class="line">poweroff</span><br><span class="line"></span><br><span class="line"><span class="built_in">sync</span> 将数据由内存同步到硬盘中。</span><br><span class="line">shutdown 关机指令</span><br><span class="line">shutdown –h 10      <span class="comment">#计算机将在10分钟后关机，并且会显示在登陆用户的当前屏幕中。</span></span><br><span class="line">shutdown –h now      <span class="comment">#立马关机</span></span><br><span class="line">shutdown –h 20:25 	 <span class="comment">#系统会在今天20:25关机</span></span><br><span class="line">shutdown –h +10      <span class="comment">#十分钟后关机</span></span><br><span class="line">shutdown –r now 	 <span class="comment">#系统立马重启</span></span><br><span class="line">shutdown –r +10 	 <span class="comment">#系统十分钟后重启</span></span><br><span class="line">reboot 			    <span class="comment">#就是重启，等同于 shutdown –r now</span></span><br><span class="line">halt 			    <span class="comment">#关闭系统，等同于shutdown –h now 和 poweroff</span></span><br><span class="line"><span class="comment">## 重启</span></span><br><span class="line">reboot</span><br><span class="line">init 6</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240429162103002.png" alt="image-20240429162103002"></p>
<h4 id="3-单用户模式">3.单用户模式</h4>
<p><strong>==忘记密码进入单用户模式改密码==</strong></p>
<p><strong>1）重启系统，到grub菜单界面</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240429164346037.png" alt="image-20240429164346037"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240429164633863.png" alt="image-20240429164633863"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240429165101506.png" alt="image-20240429165101506"></p>
<p><strong>2）回车返回内核菜单</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240429164943845.png" alt="image-20240429164943845"></p>
<p><strong>3）进入后就可以重新设置密码了</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240429165410448.png" alt="image-20240429165410448"></p>
<p>密码设置好重启就OK了</p>
<p>reboot   init6</p>
<h4 id="4-CentOS7启动顺序">4.CentOS7启动顺序</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># C7</span></span><br><span class="line">1.BIOS(开机自检)</span><br><span class="line">2.MBR ( Master Boot Record 主引导记录)</span><br><span class="line">3.GRUB2 Bootloader（引导菜单）</span><br><span class="line">4.Kernel（内核引导）</span><br><span class="line">5.Systemd （不再使用init，改成了systemd）</span><br><span class="line">6.按顺序启动其他服务 systemctl list-unit-files</span><br><span class="line">[root@lb01 ~]# systemctl list-unit-files</span><br><span class="line">UNIT FILE                                     STATE   </span><br><span class="line">proc-sys-fs-binfmt_misc.automount             static  </span><br><span class="line">dev-hugepages.mount                           static  </span><br><span class="line">dev-mqueue.mount                              static  </span><br><span class="line">proc-sys-fs-binfmt_misc.mount                 static  </span><br><span class="line">sys-fs-fuse-connections.mount                 static  </span><br><span class="line">sys-kernel-config.mount                       static  </span><br><span class="line">sys-kernel-debug.mount                        static</span><br><span class="line">7.建立终端</span><br><span class="line">8.用户登录</span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行级别：</span></span><br><span class="line">/usr/lib/systemd/system/runlevel0.target -&gt; poweroff.target</span><br><span class="line">/usr/lib/systemd/system/runlevel1.target -&gt; rescue.target</span><br><span class="line">/usr/lib/systemd/system/runlevel2.target -&gt; multi-user.target</span><br><span class="line">/usr/lib/systemd/system/runlevel3.target -&gt; multi-user.target</span><br><span class="line">/usr/lib/systemd/system/runlevel4.target -&gt; multi-user.target</span><br><span class="line">/usr/lib/systemd/system/runlevel5.target -&gt; graphical.target</span><br><span class="line">/usr/lib/systemd/system/runlevel6.target -&gt; reboot.target</span><br><span class="line">0：关机运行级别 (Do NOT <span class="built_in">set</span> initdefault to this)</span><br><span class="line">1：单用户模式运行级别</span><br><span class="line">2，3，4：完整的多用户模式，有文件系统，有网络</span><br><span class="line">5：图形化运行级别</span><br><span class="line">6：重启运行级别 (Do NOT <span class="built_in">set</span> initdefault to this)</span><br><span class="line"><span class="comment">#查看当前运行级别：</span></span><br><span class="line">[root@yum_repo ~]# systemctl get-default</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# systemctl list-unit-files|grep <span class="string">&#x27;enabled&#x27;</span></span><br><span class="line"><span class="comment">## CentOS7中启动服务，所有服务的启动脚本</span></span><br><span class="line">/usr/lib/systemd/system/</span><br><span class="line"><span class="comment">#修改运行级别</span></span><br><span class="line">[root@yum_repo ~]# systemctl set-default multi-user.target    </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 注意：centos7中所有服务的启动脚本，都不是shell且必须以.service结尾</span></span><br><span class="line"><span class="comment">## 开机自启动服务</span></span><br><span class="line">[root@localhost ~]# ll /etc/systemd/system/multi-user.target.wants/</span><br><span class="line">auditd.service -&gt; /usr/lib/systemd/system/auditd.service</span><br><span class="line">nginx.service -&gt; /usr/lib/systemd/system/nginx.service</span><br><span class="line">firewalld.service -&gt; /usr/lib/systemd/system/firewalld.service</span><br><span class="line">irqbalance.service -&gt; /usr/lib/systemd/system/irqbalance.service</span><br><span class="line">NetworkManager.service -&gt; /usr/lib/systemd/system/NetworkManager.service</span><br><span class="line">postfix.service -&gt; /usr/lib/systemd/system/postfix.service</span><br><span class="line">remote-fs.target -&gt; /usr/lib/systemd/system/remote-fs.target</span><br><span class="line">rhel-configure.service -&gt; /usr/lib/systemd/system/rhel-configure.service</span><br><span class="line">rsyslog.service -&gt; /usr/lib/systemd/system/rsyslog.service</span><br><span class="line">sshd.service -&gt; /usr/lib/systemd/system/sshd.service</span><br><span class="line">tuned.service -&gt; /usr/lib/systemd/system/tuned.service</span><br><span class="line">vmtoolsd.service -&gt; /usr/lib/systemd/system/vmtoolsd.service</span><br></pre></td></tr></table></figure>
<h4 id="5-CentOS7单用户模式">5.CentOS7单用户模式</h4>
<p><strong>1.重启系统</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240429170437706.png" alt="image-20240429170437706"></p>
<p><strong>2.进入grub2菜单</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240429170649081.png" alt="image-20240429170649081"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在linux16行的末尾输入,然后按下   Ctrl+X引导   组合键来运行修改过的内核程序</span></span><br><span class="line">enforcing=0 init=/bin/bash</span><br><span class="line">enforcing=0   关闭selinux（临时的），进入单用户后配置文件里关闭selinux，否则重新开机后密码就不生效了</span><br></pre></td></tr></table></figure>
<p><strong>不挂载方式</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240429173119985.png" alt="image-20240429173119985"></p>
<p><strong>3.进入单用户模式</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.重新挂载/目录</span></span><br><span class="line">mount -o rw,remount /</span><br><span class="line"><span class="comment"># 2.修改密码</span></span><br><span class="line">passwd root</span><br><span class="line"><span class="comment"># 3.重新引导系统</span></span><br><span class="line"><span class="built_in">exec</span> /sbin/init</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240429171621119.png" alt="image-20240429171621119"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">进入配置文件永久关闭selinux</span><br><span class="line">[root@lb01 ~]# vi /etc/selinux/config</span><br><span class="line">SELINUX=disabled    将permissive改为disabled</span><br><span class="line">SELINUXTYPE=targeted</span><br><span class="line"></span><br><span class="line">查看selinux开启状态</span><br><span class="line">[root@lb01 ~]# getenforce</span><br><span class="line">Disabled</span><br></pre></td></tr></table></figure>
<h4 id="6-修改默认运行级别">6.修改默认运行级别</h4>
<p><strong>如果centos7被设置为运行级别6，导致无限重启怎么解决？</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 查看</span></span><br><span class="line">[root@yum_repo ~]# systemctl get-default</span><br><span class="line">multi-user.target    <span class="comment">#完整多用户模式</span></span><br><span class="line"><span class="comment">## 修改</span></span><br><span class="line">[root@yum_repo ~]# systemctl set-default reboot.target     <span class="comment">#设置运行级别6重启（无限重启）</span></span><br></pre></td></tr></table></figure>
<p><strong>解决办法</strong></p>
<p>1.进入编辑模式</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240429173139767.png" alt="image-20240429173139767"></p>
<p>2.#在linux16行的末尾输入,然后按下   Ctrl+X   组合键来运行修改过的内核程序</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240429175105690.png" alt="image-20240429175105690"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240429180423234.png" alt="image-20240429180423234"></p>
<p>exit退出，reboot重启</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.重新挂载/sysroot目录</span></span><br><span class="line">mount -o rw,remount /sysroot</span><br><span class="line"><span class="comment"># 2.获取root权限</span></span><br><span class="line"><span class="built_in">chroot</span> /sysroot</span><br><span class="line"><span class="comment"># 3.修改密码</span></span><br><span class="line">passwd root</span><br><span class="line"><span class="comment"># 4.修改运行级别</span></span><br><span class="line">systemctl set-default multi-user.target</span><br><span class="line"><span class="comment"># 5.退出</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"><span class="comment"># 6.重启</span></span><br><span class="line">reboot</span><br><span class="line"><span class="comment">## 关闭selinux</span></span><br><span class="line"><span class="comment"># 临时关闭</span></span><br><span class="line">[root@yum_repo ~]# setenforce 0</span><br><span class="line"><span class="comment"># 永久关闭（重启系统生效）</span></span><br><span class="line">[root@yum_repo ~]# vi /etc/sysconfig/selinux</span><br><span class="line">SELINUX=disabled</span><br><span class="line"><span class="comment">## 两种进入单用户方法</span></span><br><span class="line">1）enforcing=0 init=/bin/bash // 修改密码</span><br><span class="line">2）rd.break // 修改运行级别</span><br></pre></td></tr></table></figure>
<h3 id="4-救援模式">4.救援模式</h3>
<p>前提：虚拟机设置已经挂载iso镜像</p>
<h4 id="1-MBR引导被破坏解决">1.MBR引导被破坏解决</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#注：仅演示救援模式清空MBR！！！！！！！！！！！！！</span></span><br><span class="line"><span class="built_in">dd</span> &lt; /dev/zero &gt;/dev/sda bs=1 count=446</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#解决办法</span></span><br><span class="line"><span class="comment"># 1.获取root环境</span></span><br><span class="line"><span class="built_in">chroot</span> /mnt/sysimage</span><br><span class="line"><span class="comment"># 2.修复MBR</span></span><br><span class="line">grub2-install /dev/sda</span><br><span class="line"><span class="comment"># 3.退出</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"><span class="comment"># 4.重启</span></span><br><span class="line">reboo</span><br><span class="line">过程如下↓</span><br></pre></td></tr></table></figure>
<p><strong>MBR破坏后启动自动跳到这里</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240501105112668.png" alt="image-20240501105112668"></p>
<p>进入救援模式前进入BISO,修改优先CD-ROM启动加载</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240501102743250.png" alt="image-20240501102743250"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240501094910948.png" alt="image-20240501094910948"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240501105511762.png" alt="image-20240501105511762"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240501105829470.png" alt="image-20240501105829470"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240501111423160.png" alt="image-20240501111423160"></p>
<h4 id="2-grub菜单误删解决">2.grub菜单误删解决</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#仅做演示删除gruub菜单！！！！！！！！！！！！</span></span><br><span class="line">[root@lb01 ~]# <span class="built_in">rm</span> -fr /boot/grub2</span><br><span class="line">[root@lb01 ~]# reboot</span><br></pre></td></tr></table></figure>
<p><strong>解决过程</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.获取root环境</span></span><br><span class="line"><span class="built_in">chroot</span> /mnt/sysimage</span><br><span class="line"><span class="comment"># 2.修复磁盘MBR</span></span><br><span class="line">grub2-install /dev/sda</span><br><span class="line"><span class="comment"># 3.修复grub菜单配置文件</span></span><br><span class="line">grub2-mkconfig -o /boot/grub2/grub.cfg</span><br><span class="line"><span class="comment"># 4.退出</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"><span class="comment"># 5.重启</span></span><br><span class="line">reboot</span><br><span class="line">过程图如下</span><br></pre></td></tr></table></figure>
<p><strong>grub菜单被删启动界面</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240501112106766.png" alt="image-20240501112106766"></p>
<p><strong>同样进入救援模式</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240501113156619.png" alt="image-20240501113156619"></p>
<h4 id="3-系统损坏拷贝文件">3.系统损坏拷贝文件</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bash-4.2# mkfs.xfs -f /dev/sdc</span><br><span class="line">bash-4.2# <span class="built_in">mkdir</span> /data</span><br><span class="line">bash-4.2# mount /dev/sdc /data</span><br><span class="line">bash-4.2# <span class="built_in">cp</span> -a /raid0 /data</span><br><span class="line">bash-4.2# umount /dev/sdb</span><br></pre></td></tr></table></figure>
<h3 id="5-Systemd-进程管理">5.Systemd 进程管理</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemd即为system daemon守护进程，systemd主要解决上文的问题而诞生，systemd的目标是，为系统的启动和管理提供一套完整的解决方案。</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#CentOS6启动</span></span><br><span class="line">1.启动时间长，init进程是串行启动，只有前一个进程启动完，才会启动下一个进程。</span><br><span class="line">2.启动脚本复杂，初始化完成后，系统会加载很多脚本，脚本都会处理各自的情况，这回让脚本多而复杂。</span><br><span class="line"><span class="comment">#CentOS7启动</span></span><br><span class="line">CtOS7所有进程无论有无依赖关系，都并行启动，当然有很多时候进程并没有真正的启动而是只有一个信号或者说是标记，在真正利用的时候，才会真正启动</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240501114955720.png" alt="image-20240501114955720"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#systemd优势</span></span><br><span class="line">1.最新系统都采用systemd管理（RedHat7，CentOS7，Ubuntu15...）</span><br><span class="line">2.CentOS7 支持开机并行启动服务,显著提高开机启动效率</span><br><span class="line">3.CentOS7关机只关闭正在运行的服务，而CentOS6，全部都关闭一次。</span><br><span class="line">4.CentOS7服务的启动与停止不在使用脚本进行管理，也就是/etc/init.d下不在有脚本。</span><br><span class="line">5.CentOS7使用systemd解决原有模式缺陷，比如原有service不会关闭程序产生的子进程。</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>相关配置文件</th>
<th>CentOS6</th>
<th>CentOS7</th>
</tr>
</thead>
<tbody>
<tr>
<td>服务启动脚本</td>
<td>/etc/init.d/</td>
<td>/usr/lib/systemd/system/</td>
</tr>
<tr>
<td>开机启动服务</td>
<td>/etc/rcN.d/</td>
<td>/etc/systemd/system/</td>
</tr>
</tbody>
</table>
<h4 id="systemd相关命令">systemd相关命令</h4>
<p><strong>启动重启服务</strong></p>
<table>
<thead>
<tr>
<th>System V init（6系统）</th>
<th>systemctl命令（7系统）</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>service nginx start <br />/etc/init.d/nginx start</td>
<td>systemctl start nginx.service</td>
<td>启动服务</td>
</tr>
<tr>
<td>service nginx stop <br />/etc/init.d/nginx stop</td>
<td>systemctl stop nginx.service</td>
<td>停止服务</td>
</tr>
<tr>
<td>service nginx restart <br />/etc/init.d/nginx restart</td>
<td>systemctl restart nginx.service</td>
<td>重启服务</td>
</tr>
<tr>
<td>service nginx reload <br />/etc/init.d/nginx reload</td>
<td>systemctl reload nginx.service</td>
<td>重新加载配置(不终止服务)</td>
</tr>
<tr>
<td>service nginx status <br />/etc/init.d/nginx status</td>
<td>systemctl status nginx.servre</td>
<td>查看服务运行状态</td>
</tr>
<tr>
<td></td>
<td>systemctl is-active sshd.service</td>
<td>查看服务是否在运行中</td>
</tr>
<tr>
<td></td>
<td>systemctl mask nginx.servre</td>
<td>禁止服务运行</td>
</tr>
<tr>
<td></td>
<td>systemctl unmask nginx.servre</td>
<td>取消禁止服务运行</td>
</tr>
</tbody>
</table>
<p><strong>设置服务开机自启，查看各级别下服务启动状态</strong></p>
<table>
<thead>
<tr>
<th>System V init（6系 统）</th>
<th>systemctl命令（7系统）</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>chkconfig nginx on</td>
<td>systemctl enable nginx.service</td>
<td>开机自动启动</td>
</tr>
<tr>
<td>chkconfig nginx off</td>
<td>systemctl disable nginx.service</td>
<td>开机不自动启动</td>
</tr>
<tr>
<td>chkconfig --list</td>
<td>systemctl list-unit-files</td>
<td>查看各个级别下服务的启动与禁 用</td>
</tr>
<tr>
<td>chkconfig --list nginx</td>
<td>systemctl is-enabled nginx.service</td>
<td>查看特定服务是否为开机自启动</td>
</tr>
<tr>
<td>chkconfig–add nginx</td>
<td>systemctl daemon-reload</td>
<td>创建新服务文件或者变更设置</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">设置开机自启相当于给启动脚本做个软链接</span><br><span class="line"><span class="comment"># CentOS7中开机自启</span></span><br><span class="line">[root@localhost ~]# systemctl <span class="built_in">enable</span> sshd</span><br><span class="line"><span class="built_in">ln</span> -s /usr/lib/systemd/system/sshd.service /etc/systemd/system/multiuser.target.wants/</span><br><span class="line"><span class="comment"># 取消开机自启</span></span><br><span class="line">[root@localhost ~]# systemctl <span class="built_in">disable</span> sshd</span><br><span class="line">Removed symlink /etc/systemd/system/multi-user.target.wants/sshd.service</span><br><span class="line"><span class="built_in">rm</span> -f /etc/systemd/system/multi-user.target.wants/sshd.service</span><br></pre></td></tr></table></figure>
<p><strong>systemctl服务状态说明</strong></p>
<table>
<thead>
<tr>
<th>服务状态</th>
<th>状态说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>loaded</td>
<td>服务单元的配置文件已经被处理</td>
</tr>
<tr>
<td>active(running)</td>
<td>服务的一个或多个进程在运行中</td>
</tr>
<tr>
<td>active(exited)</td>
<td>一次性运行的服务成功被执行并退出(服务运行后完成任务,相关进程会自动退出)</td>
</tr>
<tr>
<td>active(waiting)</td>
<td>服务已经运行但在等待某个事件</td>
</tr>
<tr>
<td>inactive</td>
<td>服务没有在运行</td>
</tr>
<tr>
<td>enable</td>
<td>服务设定为开机运行</td>
</tr>
<tr>
<td>disabled</td>
<td>服务设定为开机不运行</td>
</tr>
<tr>
<td>static</td>
<td>服务不能被设定开机启动,但可以由其他服务启动该服务</td>
</tr>
</tbody>
</table>
<h3 id="6-定时任务">6.定时任务</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#什么是crond</span></span><br><span class="line">crond就是计划任务，类似于我们平时生活中的闹钟，定点执行。</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# ps aux|grep crond</span><br><span class="line">root 6349 0.0 0.1 126284 1612 ? Ss 16:00 0:00 /usr/sbin/crond -n</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#free 查看内存情况</span></span><br><span class="line">[root@lb01 ~]# free -m（以m显示内存多少）</span><br><span class="line">			总内存		 已使用		空闲							可使用内存</span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:            972          89         760           7         123         737</span><br><span class="line">Swap:          1023           0        1023</span><br><span class="line"></span><br><span class="line"><span class="comment">#Centos6可使用内存</span></span><br><span class="line">[root@localhost ~]# free</span><br><span class="line">			总内存		 已使用	空闲</span><br><span class="line">             total       used       free     shared    buffers     cached</span><br><span class="line">Mem:       1004768     170984     833784        220      13336      48440</span><br><span class="line">-/+ buffers/cache:     109208     895560(可使用内存) </span><br><span class="line">Swap:      1048572          0    1048572</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#截取需要的内存信息</span></span><br><span class="line">总内存：free -m|awk <span class="string">&#x27;/^Mem/&#123;print $2&#125;&#x27;</span></span><br><span class="line">已使用内存：free -m|awk <span class="string">&#x27;/^Mem/&#123;print $3&#125;&#x27;</span></span><br><span class="line">可用内存：free -m|awk <span class="string">&#x27;/^Mem/&#123;print $NF&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#写进脚本</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line">mem_total=`free -m|awk <span class="string">&#x27;/^Mem/&#123;print $2&#125;&#x27;</span>`</span><br><span class="line">mem_used=`free -m|awk <span class="string">&#x27;/^Mem/&#123;print $3&#125;&#x27;</span>`</span><br><span class="line">mem_ava=`free -m|awk <span class="string">&#x27;/^Mem/&#123;print $NF&#125;&#x27;</span>`</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;------ 内存信息 ------&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;总内存：<span class="variable">$&#123;mem_total&#125;</span>M&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;已使用内存：<span class="variable">$&#123;mem_used&#125;</span>M&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;可用内存：<span class="variable">$&#123;mem_ava&#125;</span>M&quot;</span></span><br></pre></td></tr></table></figure>
<h4 id="1-定时任务语法">1.定时任务语法</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#！！定时任务最小只能达到分钟级</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 定时任务配置文件</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> /etc/crontab</span><br><span class="line"><span class="comment">## 定时任务编写的语法</span></span><br><span class="line">SHELL=/bin/bash</span><br><span class="line"><span class="comment">## 可直接执行的命令（以后写在定时任务中的命令，最好加上绝对路径）</span></span><br><span class="line">PATH=/sbin:/bin:/usr/sbin:/usr/bin</span><br><span class="line"><span class="comment">## 定时任务输出的内容，会以邮件的形式发给root用户</span></span><br><span class="line">MAILTO=root</span><br><span class="line"><span class="comment"># For details see man 4 crontabs</span></span><br><span class="line"><span class="comment"># Example of job definition:</span></span><br><span class="line"><span class="comment"># .---------------- minute (0 - 59)</span></span><br><span class="line"><span class="comment"># | .------------- hour (0 - 23)</span></span><br><span class="line"><span class="comment"># | | .---------- day of month (1 - 31)</span></span><br><span class="line"><span class="comment"># | | | .------- month (1 - 12) OR jan,feb,mar,apr ...</span></span><br><span class="line"><span class="comment"># | | | | .---- day of week (0 - 6) (Sunday=0 or 7) OR</span></span><br><span class="line">sun,mon,tue,wed,thu,fri,sat</span><br><span class="line"><span class="comment"># | | | | |</span></span><br><span class="line"><span class="comment"># * * * * * user-name command to be executed</span></span><br><span class="line"><span class="comment"># PATH的作用：是一个环境变量，所有的可执行文件，可以不加路径直接执行</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">echo</span> <span class="variable">$PATH</span></span><br><span class="line">/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin</span><br><span class="line">* * * * * [用户] 可执行的命令</span><br><span class="line"></span><br><span class="line">分 时 日 月 周</span><br><span class="line">00 02 * * * <span class="built_in">ls</span> <span class="comment"># 每天凌晨两点整执行 ls 命令</span></span><br><span class="line"></span><br><span class="line">00 02 1 * * <span class="built_in">ls</span> <span class="comment"># 每月的1号凌晨两点执行 ls 命令</span></span><br><span class="line"></span><br><span class="line">00 02 14 2 * <span class="built_in">ls</span> <span class="comment"># 每年的2月14号凌晨2点执行 ls 命令</span></span><br><span class="line"></span><br><span class="line">00 02 * * 7 <span class="built_in">ls</span> <span class="comment"># 每周周日凌晨2点执行 ls 命令</span></span><br><span class="line"></span><br><span class="line">00 02 * 6 5 <span class="built_in">ls</span> <span class="comment"># 每个6月份的周五凌晨2点执行 ls 命令</span></span><br><span class="line"></span><br><span class="line">00 02 14 * 7 <span class="built_in">ls</span> <span class="comment"># 每个月的14号恰巧是周日时凌晨2点执行 ls 命令</span></span><br><span class="line"></span><br><span class="line">00 02 14 2 7 <span class="built_in">ls</span> <span class="comment"># 每年2月14日恰巧是周日的凌晨2点执行 ls 命令</span></span><br><span class="line"></span><br><span class="line">*/10 02 * * * <span class="built_in">ls</span> <span class="comment"># 每天凌晨2点开始每隔10分钟执行一次 ls 命令</span></span><br><span class="line"></span><br><span class="line">* * * * * <span class="built_in">ls</span> <span class="comment"># 每分钟执行一次ls命令</span></span><br><span class="line">*/1 * * * * <span class="built_in">ls</span> <span class="comment"># 每分钟执行一次ls命令</span></span><br><span class="line"></span><br><span class="line">00 00 14 2 * <span class="built_in">ls</span> <span class="comment"># 每个2月14日零点执行一次 ls 命令</span></span><br><span class="line"></span><br><span class="line">*/5 * * * * <span class="built_in">ls</span> <span class="comment"># 每隔五分钟执行一次 ls 命令</span></span><br><span class="line"></span><br><span class="line">00 02 * 1,5,8 * <span class="built_in">ls</span> <span class="comment"># 每年的1月5月8月的每天凌晨2点执行一次 ls 命令</span></span><br><span class="line"></span><br><span class="line">00 02 1-8 * * <span class="built_in">ls</span> <span class="comment"># 每个月的1号到8号的凌晨2点执行一次 ls 命令</span></span><br><span class="line"></span><br><span class="line">0 21 * * * <span class="built_in">ls</span> <span class="comment"># 每天晚上9点执行一次 ls 命令</span></span><br><span class="line">* 21 * * * <span class="built_in">ls</span> <span class="comment"># 每天晚上9点开始每一分钟都执行一次 ls 命令</span></span><br><span class="line"></span><br><span class="line">45 4 1,10,22 * * <span class="built_in">ls</span> <span class="comment"># 每个月的1号 10号 22号的凌晨4点45分执行一次 ls 命令</span></span><br><span class="line"></span><br><span class="line">45 4 1-10 * * <span class="built_in">ls</span> <span class="comment"># 每个月的1号到10号的凌晨4点45分执行一次 ls 命令</span></span><br><span class="line"></span><br><span class="line">3,15 8-11 */2 * * <span class="built_in">ls</span> <span class="comment"># 每隔两天的8点03 8点15 ... 11点03 11点15执行一次 ls 命令</span></span><br><span class="line"></span><br><span class="line">0 23-7/1 * * * <span class="built_in">ls</span> <span class="comment"># 每天的0点到7点和23点到0点整执行一次 ls 命令</span></span><br><span class="line"></span><br><span class="line">15 21 * * 1-5 <span class="built_in">ls</span> <span class="comment"># 每周一到周五晚上9点15分执行一次 ls 命令</span></span><br></pre></td></tr></table></figure>
<h4 id="2-crontab命令选项">2.crontab命令选项</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">-e：edit 编辑</span><br><span class="line">-l：查看当前登录用户都有哪些定时任务</span><br><span class="line">-u：指定用户查看定时任务</span><br><span class="line">-r：清空所有定时任务</span><br><span class="line"><span class="comment">## 每分钟，同步一下系统时间</span></span><br><span class="line">[root@localhost ~]# crontab -e</span><br><span class="line"><span class="comment"># By: zls Date: 2024-05-06 Name: sync system time</span></span><br><span class="line">* * * * * /usr/sbin/ntpdate ntp1.aliyun.com &amp;&gt;/dev/null</span><br><span class="line"><span class="comment"># 注意：</span></span><br><span class="line">1）命令绝对路径</span><br><span class="line">2）输出定向到空</span><br><span class="line">3）定时任务加注释</span><br><span class="line"><span class="comment">## 每天做备份，将/etc目录打包为：2024-05-06_hostname_etc.tar.gz</span></span><br><span class="line">[root@web01 /]# <span class="built_in">cd</span> / &amp;&amp; tar zcf /tmp/$(<span class="built_in">date</span> +%F)_$(hostname -s)_etc.tar.gz etc</span><br><span class="line">[root@web01 ~]# vi /opt/backup.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="built_in">cd</span> / &amp;&amp; tar zcf /tmp/$(<span class="built_in">date</span> +%F)_$(hostname -s)_etc.tar.gz etc</span><br><span class="line"></span><br><span class="line"><span class="comment">#实时查看定时任务执行结果</span></span><br><span class="line">[root@lb01 ~]# <span class="built_in">tail</span> -f /var/log/cron</span><br><span class="line"></span><br><span class="line"><span class="comment"># 时间格式化输出：</span></span><br><span class="line"></span><br><span class="line">[root@localhost ~]# <span class="built_in">date</span> +%F-%H:%M:%S</span><br><span class="line">2024-05-13-17:35:25</span><br><span class="line"></span><br><span class="line">%F：年月日</span><br><span class="line">%Y：year 年</span><br><span class="line">%m：mouth 月</span><br><span class="line">%d：day 日</span><br><span class="line">%H：hour时</span><br><span class="line">%M：minute分</span><br><span class="line">%S：seconds秒</span><br><span class="line">%A:星期</span><br><span class="line">%w：星期（阿拉伯数字显示）</span><br></pre></td></tr></table></figure>
<h4 id="3-crontab注意事项">3.crontab注意事项</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1) 给定时任务注释</span><br><span class="line">2) 将需要定期执行的任务写入Shell脚本中，避免直接使用命令无法执行的情况tar <span class="built_in">date</span></span><br><span class="line">3) 定时任务的结尾一定要有&amp;&gt;/dev/null或者将结果追加重定向&gt;&gt;/tmp/date.log文件</span><br><span class="line">4) 注意有些命令是无法成功执行的 <span class="built_in">echo</span> <span class="string">&quot;123&quot;</span> &gt;&gt;/tmp/test.log &amp;&gt;/dev/null</span><br><span class="line">5.如果一定要是用命令，命令必须使用绝对路径</span><br></pre></td></tr></table></figure>
<h4 id="4-定时任务—做备份">4.定时任务—做备份</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@web01 ~]# ll /var/spool/cron/</span><br><span class="line">total 8</span><br><span class="line">-rw------- 1 root root 165 May 6 11:32 root</span><br><span class="line">-rw------- 1 zls zls 27 May 6 2024 zls</span><br><span class="line"></span><br><span class="line"><span class="comment">#拒绝用户使用定时任务</span></span><br><span class="line">[root@web01 ~]# <span class="built_in">echo</span> <span class="string">&#x27;username&#x27;</span> &gt; /etc/cron.deny</span><br></pre></td></tr></table></figure>
<h4 id="5-计划任务调试思路">5.计划任务调试思路</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">1.crond调试</span><br><span class="line">1) 调整任务每分钟执行的频率, 以便做后续的调试。</span><br><span class="line">2) 如果使用cron运行脚本，请将脚本执行的结果写入指定日志文件, 观察日志内容是否正常。</span><br><span class="line">3) 命令使用绝对路径, 防止无法找到命令导致定时任务执行产生故障。</span><br><span class="line">4) 通过查看/var/log/cron日志，以便检查我们执行的结果，方便进行调试。</span><br><span class="line">2.crond编写思路</span><br><span class="line">1.手动执行命令，然后保留执行成功的结果。</span><br><span class="line">2.编写脚本</span><br><span class="line">脚本需要统一路径/scripts</span><br><span class="line">脚本内容复制执行成功的命令(减少每个环节出错几率)</span><br><span class="line">脚本内容尽可能的优化, 使用一些变量或使用简单的判断语句</span><br><span class="line">脚本执行的输出信息可以重定向至其他位置保留或写入/dev/null</span><br><span class="line">3.执行脚本</span><br><span class="line">使用bash命令执行, 防止脚本没有增加执行权限(/usr/bin/bash)</span><br><span class="line">执行脚本成功后，复制该执行的命令，以便写入cron</span><br><span class="line">4.编写计划任务</span><br><span class="line">加上必要的注释信息, 人、时间、任务</span><br><span class="line">设定计划任务执行的周期</span><br><span class="line">粘贴执行脚本的命令(不要手敲)</span><br><span class="line">5.调试计划任务</span><br><span class="line">增加任务频率测试</span><br><span class="line">检查环境变量问题</span><br><span class="line">检查crond服务日志</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="6-使用定时任务发邮件">6.使用定时任务发邮件</h4>
<p><strong>配置邮箱</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.安装发送邮件的工具</span></span><br><span class="line"></span><br><span class="line">[root@web01 ~]# yum install -y mailx</span><br><span class="line"><span class="comment"># 2.配置邮箱</span></span><br><span class="line">[root@web01 ~]# vi /etc/mail.rc</span><br><span class="line"><span class="built_in">set</span> from=邮箱							<span class="comment">#发件人</span></span><br><span class="line"><span class="built_in">set</span> smtp=smtps://smtp.qq.com:465	    <span class="comment">#邮箱协议，端口</span></span><br><span class="line"><span class="built_in">set</span> smtp-auth-user=邮箱				 <span class="comment">#登录邮箱账号</span></span><br><span class="line"><span class="built_in">set</span> smtp-auth-password=客户端授权码	   <span class="comment">#邮箱授权码</span></span><br><span class="line"><span class="built_in">set</span> smtp-auth=login</span><br><span class="line"><span class="built_in">set</span> ssl-verify=ignore</span><br><span class="line"><span class="built_in">set</span> nss-config-dir=/etc/pki/nssdb/</span><br></pre></td></tr></table></figure>
<p><strong>邮箱生成授权码</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240506170025656.png" alt="image-20240506170025656"></p>
<p><strong>发邮件</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@web01 ~]# <span class="built_in">echo</span> <span class="string">&#x27;邮件内容&#x27;</span> |mail -s <span class="string">&#x27;邮件标题&#x27;</span> 3078155561@qq.com</span><br><span class="line">[root@web01 ~]# <span class="built_in">cat</span> /etc/passwd|mail -s <span class="string">&#x27;test&#x27;</span> 3078155561@qq.com</span><br><span class="line"><span class="built_in">cat</span> /root/backup.log.txt|mail -s <span class="string">&#x27;备份文件&#x27;</span> 3078155561@qq.com</span><br></pre></td></tr></table></figure>
<h4 id="7-定时任务实例">7.定时任务实例</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">需求：将备份命令写入一个脚本中 </span><br><span class="line">1.每天备份文件名要求格式：2018-0220_hostname_etc.tar.gz </span><br><span class="line">2.存放备份内容的目录要求只保留3天的数据 </span><br><span class="line">3.在执行计划任务时，不要输出任务信息 </span><br><span class="line">4.备份是否成功结果，发送邮件 </span><br><span class="line"><span class="comment">## 邮件内容：</span></span><br><span class="line">备份时间：精确到秒</span><br><span class="line">备份文件名：2024-05-06_web01_etc.tar.gz </span><br><span class="line">备份路径：/tmp </span><br><span class="line">是否成功：</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">vim backup.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment">#找到最近三天文件并打包</span></span><br><span class="line">find /etc/* -<span class="built_in">type</span> d -mtime -3|xargs tar zcf /tmp/$(<span class="built_in">date</span> +%F)_$(hostname -s)_etc.tar.gz</span><br><span class="line"><span class="comment">#echo &#x27;Backup Success!!!!&#x27;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;备份时间：<span class="subst">$(date +%Y/%m/%d\ %H:%M:%S)</span>&quot;</span> &gt;&gt;backuplog.txt</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;备份文件名：<span class="subst">$(date +%F)</span>_<span class="subst">$(hostname -s)</span>_etc.tar.gz&quot;</span> &gt;&gt;backuplog.txt</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;备份路径：/tmp&quot;</span> &gt;&gt;backuplog.txt</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;是否备份成功：是&quot;</span> &gt;&gt;backuplog.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建定时任务并发邮件</span></span><br><span class="line">[root@lb01 ~]# crontab -e</span><br><span class="line"><span class="comment"># By: lgj Date: 2024-05-06 Name:Backup</span></span><br><span class="line"></span><br><span class="line">0 23 * * * /usr/bin/sh backup.sh  &amp;&gt;/dev/null</span><br><span class="line">0 00 * * * /usr/bin/cat /root/backup.log.txt|mail -s <span class="string">&#x27;备份文件&#x27;</span> 3078155561@qq.com</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">需求：将备份命令写入一个脚本中</span><br><span class="line">任务：</span><br><span class="line">1.每天备份文件名要求格式：2018-02-20_hostname_etc.tar.gz</span><br><span class="line">2.存放备份内容的目录要求只保留3天的数据</span><br><span class="line">3.在执行计划任务时，不要输出任务信息</span><br><span class="line">4.备份是否成功结果，发送邮件</span><br><span class="line"><span class="comment">## 邮件内容：</span></span><br><span class="line">备份文件名：2024-05-06_web01_etc.tar.gz</span><br><span class="line">备份路径：/tmp</span><br><span class="line">是否成功：</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> / &amp;&amp; tar zcf $(<span class="built_in">date</span> +%F)_$(hostname -s)_etc.tar.gz</span><br><span class="line"></span><br><span class="line">find /etc/* -<span class="built_in">type</span> d -mtime -3</span><br><span class="line"></span><br><span class="line">tar zcf /tmp/$(<span class="built_in">date</span> +%F)_$(hostname -s)_etc.tar.gz /etc/*</span><br><span class="line"></span><br><span class="line">find /etc/* -<span class="built_in">type</span> d -mtime -3|xargs tar zcf /tmp/$(<span class="built_in">date</span> +%F)_$(hostname -s)_etc.tar.gz</span><br></pre></td></tr></table></figure>
<h3 id="7-修改网卡名">7.修改网卡名</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240501114139869.png" alt="image-20240501114139869"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/Pic/image-20240501114157577.png" alt="image-20240501114157577"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">biosdevname=0 net.ifnames=0</span><br><span class="line">net.ifnames=0	<span class="comment">#不是dell物理机环境</span></span><br></pre></td></tr></table></figure>
<h2 id="【9】三剑客">【9】三剑客</h2>
<h3 id="正则表达式">正则表达式</h3>
<h4 id="1-正则符号">1. 正则符号</h4>
<table>
<thead>
<tr>
<th>分类</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>基础正则  Basic RE (BRE)</td>
<td>^   $   ^$  .   *  .*   [a-z]   [^abc  ]</td>
</tr>
<tr>
<td>扩展正则 Extended RE (ERE)</td>
<td>+   |    ()     ?</td>
</tr>
</tbody>
</table>
<h4 id="扩展正则">扩展正则</h4>
<table>
<thead>
<tr>
<th>符号</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>+</td>
<td>前一个字连续出现1次或者1次以上</td>
</tr>
<tr>
<td>|</td>
<td>表示或者</td>
</tr>
<tr>
<td>()</td>
<td>（）里面的内容可以看成是一个整体</td>
</tr>
<tr>
<td>{}</td>
<td>指定出现的次数</td>
</tr>
<tr>
<td>？</td>
<td>前一个字符出现了0次或1次</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[a-z]+   匹配连续出现的单词，贪婪匹配</span><br><span class="line">[0-9]+   匹配连续出现的数字，贪婪匹配</span><br><span class="line"><span class="comment">#（）</span></span><br><span class="line">过滤出oldboy或者oldbey</span><br><span class="line">[root@lb01 ~s]#egrep <span class="string">&#x27;oldb(o|e)y&#x27;</span> oldboy.txt</span><br><span class="line">[root@lb01 ~s]#egrep <span class="string">&#x27;oldb[oe]y&#x27;</span> oldboy.txt</span><br><span class="line"><span class="comment">#&#123;&#125;</span></span><br><span class="line">0&#123;m,n&#125;  0至少出现m次，至多出现n次 </span><br><span class="line">0&#123;3&#125;0出现了3次</span><br><span class="line">0&#123;m,&#125;0至少出现m次，最多出现次数不限</span><br><span class="line">0&#123;,n&#125;0至多出现n次，最少出现次数不限</span><br><span class="line"><span class="comment">#?</span></span><br><span class="line">[root@lb01 ~s]#egrep <span class="string">&#x27;go?d&#x27;</span> oldboy.txt</span><br><span class="line">god</span><br><span class="line">gd</span><br></pre></td></tr></table></figure>
<h4 id="2-正则-通配符">2.正则&amp;通配符</h4>
<table>
<thead>
<tr>
<th>分类</th>
<th>用途</th>
<th>支持的命令</th>
</tr>
</thead>
<tbody>
<tr>
<td>正则(re)</td>
<td>三剑客，高级语言，进行过滤（匹配字符）</td>
<td>三剑客grep sed，awk，find，rename，expr</td>
</tr>
<tr>
<td>通配符(pathname extension 或 glob)</td>
<td>匹配文件/文件名   *.txt</td>
<td>linux下大部分都支持</td>
</tr>
</tbody>
</table>
<h3 id="三剑客">三剑客</h3>
<table>
<thead>
<tr>
<th>命令</th>
<th>特点</th>
<th>场景</th>
</tr>
</thead>
<tbody>
<tr>
<td>grep</td>
<td>过滤</td>
<td>grep命令过滤速度是最快的</td>
</tr>
<tr>
<td>sed</td>
<td>替换，修改文件内容，取行</td>
<td>如果要进行替换/修改文件内容取<br />取出某个范围的内容(从早上10:00到11:00)</td>
</tr>
<tr>
<td>awk</td>
<td>取列，统计</td>
<td>取列，对比，比较<br />统计，计算</td>
</tr>
</tbody>
</table>
<h4 id="grep专区">grep专区</h4>
<table>
<thead>
<tr>
<th>选项</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>-n</td>
<td>显示行号</td>
</tr>
<tr>
<td>-A</td>
<td>After 过滤关键字并打印出后N行</td>
</tr>
<tr>
<td>-B</td>
<td>Before 过滤关键字并打印出前N行</td>
</tr>
<tr>
<td>-C</td>
<td>Center 过滤关键字并打印出前后N行</td>
</tr>
<tr>
<td>-v</td>
<td>取反</td>
</tr>
<tr>
<td>-o</td>
<td>只显示关键字内容</td>
</tr>
<tr>
<td>-i</td>
<td>忽略大小写</td>
</tr>
<tr>
<td>-w</td>
<td>精确匹配</td>
</tr>
<tr>
<td>-c</td>
<td>相当于count，用于统计行数</td>
</tr>
<tr>
<td>-r/-R</td>
<td>递归搜索目录及目录下得文件</td>
</tr>
</tbody>
</table>
<h5 id="字符">字符</h5>
<table>
<thead>
<tr>
<th>关键字可以使用的符号</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>^</td>
<td>以…开头    [^ abc]表示非abc的内容</td>
</tr>
<tr>
<td>$</td>
<td>以…结尾     ^$可以表示空行</td>
</tr>
<tr>
<td>.</td>
<td>任意一个字符</td>
</tr>
<tr>
<td>*</td>
<td>*号前面的单个字符匹配0次或多次</td>
</tr>
<tr>
<td>|</td>
<td>正则表达式里面或者意思，grep默认不支持正则表达式，需要用-E</td>
</tr>
<tr>
<td>\b</td>
<td>边界符  例:\boldboy\b</td>
</tr>
<tr>
<td>注意:[]里的内容一般都会去掉特殊含义，做自己</td>
<td></td>
</tr>
</tbody>
</table>
<blockquote>
<p>转义字符  \</p>
<p>\n  回车换行</p>
<p>\t  tab键</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;/K.*D/ &#123;print $6&#125;&#x27;</span>  /K.*D/这是搜索A开头D开头的字符</span><br><span class="line">如果搜索内容里面含有/，需要使用转义符，例如awk <span class="string">&#x27;/\/sbin\/nologin/ &#123;print $6&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line">grep -r逐级搜索</span><br><span class="line">[root@lb01 ~]# grep -r <span class="string">&#x27;K.*D&#x27;</span> /root</span><br><span class="line">/root/11.txt:47 Oct 3ZL1998 LPSX 43.00 KVM9D 512</span><br><span class="line">/root/11.txt:483 may 5PA1998 USP 37.00 KVM9D 644</span><br><span class="line"></span><br><span class="line">grep -rl只显示文件名</span><br><span class="line">[root@lb01 ~]# grep -rl <span class="string">&#x27;K.*D&#x27;</span> /root</span><br><span class="line">/root/anaconda-ks.cfg</span><br><span class="line">/root/11.txt</span><br></pre></td></tr></table></figure>
<p><strong>grep专区</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">KabcD  过滤K开头D结尾的内容  .*代表任意字符</span><br><span class="line">[root@lb02 ~]# grep <span class="string">&#x27;K.*D&#x27;</span> 1.txt </span><br><span class="line"></span><br><span class="line">过滤至少以一个空白字符开头的行，+代表贪婪匹配</span><br><span class="line">[root@lb02 ~]# grep -E <span class="string">&#x27;^[ ]+&#x27;</span> 1.txt</span><br><span class="line"><span class="comment"># ^&amp;可以表示空行</span></span><br><span class="line"></span><br><span class="line">过滤以a或者b开头的行</span><br><span class="line">1.[root@lb02 ~]# grep <span class="string">&#x27;^[ab]&#x27;</span> 1.txt </span><br><span class="line">2.[root@lb02 ~]# grep -E <span class="string">&#x27;^(a|b)&#x27;</span> 1.txt    grep -E <span class="string">&#x27;^a|^b&#x27;</span> 1.txt </span><br><span class="line"></span><br><span class="line">过滤a11ab类型的内容（字母 数字 数字 字母 字母）</span><br><span class="line">[root@lb02 ~]# grep -E <span class="string">&#x27;[a-z][0-9][0-9][a-z][a-z]&#x27;</span> 1.txt</span><br><span class="line">[root@lb02 ~]# grep -E <span class="string">&#x27;[a-z][0-9]&#123;2&#125;[a-z]&#123;2&#125;&#x27;</span> 1.txt 	&#123;2&#125;表示前面的出现了2次</span><br><span class="line"></span><br><span class="line">过滤 字母开头且后面跟至少2个到4个数字的内容</span><br><span class="line">[root@lb02 ~]# grep -Eo <span class="string">&#x27;^[a-z][0-9]&#123;2,4&#125;&#x27;</span> 1.txt </span><br><span class="line">a11</span><br><span class="line">b1232</span><br><span class="line"><span class="comment">##利用扩展正则表达式分别表示</span></span><br><span class="line">0-9、   10-99、      100-199、    200-249、    250-255</span><br><span class="line">[0-9]  [1-9][0-9]   1[0-9][0-9]   2[0-4][0-9]  25[0-5]</span><br><span class="line">过滤非字母开头的内容</span><br><span class="line">[root@lb02 ~]# grep <span class="string">&#x27;^[^a-zA-Z]&#x27;</span> 1.txt</span><br></pre></td></tr></table></figure>
<h5 id="和-表或者的区别">| 和[ ]表或者的区别</h5>
<table>
<thead>
<tr>
<th>符合</th>
<th>区别</th>
</tr>
</thead>
<tbody>
<tr>
<td>|</td>
<td>1次匹配1个字符    [abc] ==&gt; 或者a或者b或者c</td>
</tr>
<tr>
<td>[ ]</td>
<td>匹配1个或多个字符  a|b|c    abc|bcd</td>
</tr>
</tbody>
</table>
<h5 id="使用">( )使用</h5>
<ul>
<li>被括起来的内容，表示一个整体（一个字符）</li>
<li>后向引用（反向引用sed）</li>
</ul>
<h4 id="sed命令">sed命令</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">作用:</span><br><span class="line">1.模糊过滤文件的内容</span><br><span class="line">2.查找指定的行</span><br><span class="line">3.对文件进行增删改查</span><br><span class="line">4.替换</span><br><span class="line">5.格式化输出内容,后向引用</span><br><span class="line">sed 语法格式:</span><br><span class="line">	grep <span class="string">&#x27;过滤内容&#x27;</span> 文件</span><br><span class="line">	sed <span class="string">&#x27;/过滤内容/&#x27;</span> 文件</span><br><span class="line">	sed <span class="string">&#x27;模式 动作&#x27;</span> 文件</span><br><span class="line">	sed <span class="string">&#x27;找谁 干啥&#x27;</span> 文件</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>功能</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>s</td>
<td>替换substitute</td>
</tr>
<tr>
<td>p</td>
<td>显示print</td>
</tr>
<tr>
<td>d</td>
<td>删除delete</td>
</tr>
<tr>
<td>cai</td>
<td>增加c/a/i</td>
</tr>
</tbody>
</table>
<h5 id="sed-查找p">sed-查找p</h5>
<table>
<thead>
<tr>
<th>‘2p’</th>
<th>指定行号进行查找</th>
</tr>
</thead>
<tbody>
<tr>
<td>‘1,5p’</td>
<td>指定行号范围查找</td>
</tr>
<tr>
<td>‘/oldboy/p’</td>
<td>类似于grep过滤，//里面可以写正则</td>
</tr>
<tr>
<td>‘/10:00/,/11:00/p’</td>
<td>表示范围的过滤</td>
</tr>
</tbody>
</table>
<p><strong>==查找显示==</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">语法格式：</span><br><span class="line">sed -n <span class="string">&#x27;3p&#x27;</span> 文件 <span class="comment"># print 打印输出</span></span><br><span class="line"><span class="built_in">cat</span> 文件|sed -n <span class="string">&#x27;3p&#x27;</span></span><br><span class="line">[root@db01 ~]# <span class="built_in">head</span> -5 /etc/passwd &gt; test.txt</span><br><span class="line">[root@db01 ~]# sed -n <span class="string">&#x27;3p&#x27;</span> test.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#显示文件的最后一行:</span></span><br><span class="line">[root@db01 ~]# sed -n <span class="string">&#x27;$p&#x27;</span> test.txt</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"></span><br><span class="line"><span class="comment">#过滤文件的2-4行</span></span><br><span class="line">[root@db01 ~]# sed -n <span class="string">&#x27;2,4p&#x27;</span> test.txt</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line"></span><br><span class="line"><span class="comment">#显示文件的第2行到最后一行</span></span><br><span class="line">[root@db01 ~]# sed -n <span class="string">&#x27;2,$p&#x27;</span> test.txt</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"></span><br><span class="line"><span class="comment">#处理屏幕上显示的内容</span></span><br><span class="line">[root@db01 ~]# ifconfig eth0|sed -n <span class="string">&#x27;2p&#x27;</span></span><br><span class="line">inet 10.0.0.200 netmask 255.255.255.0 broadcast 10.0.0.255</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>==过滤==</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">语法结构: sed -n <span class="string">&#x27;/过滤的内容/p&#x27;</span> file</span><br><span class="line">[root@db01 ~]# sed -n <span class="string">&#x27;/root/p&#x27;</span> test.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line"></span><br><span class="line">使用正则:</span><br><span class="line">[root@db01 ~]# sed -n <span class="string">&#x27;/^r/p&#x27;</span> test.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line"></span><br><span class="line">过滤以a或b或c开头的行</span><br><span class="line">[root@db01 ~]# sed -n <span class="string">&#x27;/^[a-c]/p&#x27;</span> test.txt</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line"></span><br><span class="line">过滤以什么结尾的行</span><br><span class="line">[root@db01 ~]# sed -n <span class="string">&#x27;/h$/p&#x27;</span> test.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# sed -n <span class="string">&#x27;/n$/p&#x27;</span> test.txt</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"></span><br><span class="line">过滤区间范围:</span><br><span class="line">sed -n <span class="string">&#x27;//,//p&#x27;</span> 文件</span><br><span class="line">sed -n <span class="string">&#x27;2,4p&#x27;</span> 文件</span><br><span class="line">过滤字符串区间范围:</span><br><span class="line">[root@db01 ~]# sed -n <span class="string">&#x27;/^bin/,/^a/p&#x27;</span> test.txt</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line"></span><br><span class="line">案例: 过滤时间 统计上午8点到中午12点中间数据</span><br><span class="line">[root@linuxnc ~]# sed -n <span class="string">&#x27;/2024:08:00:15/,/2024:09:30:42/p&#x27;</span> /var/log/nginx/access.log</span><br><span class="line"></span><br><span class="line">注意匹配方式:</span><br><span class="line">[root@db01 ~]# <span class="built_in">cat</span> a.txt</span><br><span class="line">aaa</span><br><span class="line">bbb</span><br><span class="line">ccc</span><br><span class="line">bbb</span><br><span class="line">uuu</span><br><span class="line">ddd</span><br><span class="line">eee</span><br><span class="line">fff</span><br><span class="line">ddd</span><br><span class="line">xxx</span><br><span class="line">[root@db01 ~]# sed -n <span class="string">&#x27;/bbb/,/ddd/p&#x27;</span> a.txt</span><br><span class="line">bbb</span><br><span class="line">ccc</span><br><span class="line">bbb</span><br><span class="line">uuu</span><br><span class="line">ddd</span><br></pre></td></tr></table></figure>
<h5 id="sed-删除d">sed-删除d</h5>
<table>
<thead>
<tr>
<th>‘1,5d’</th>
<th>指定行号范围查找</th>
</tr>
</thead>
<tbody>
<tr>
<td>‘/oldboy/d’</td>
<td>类似于grep过滤，//里面可以写正则</td>
</tr>
<tr>
<td>‘2d’</td>
<td>指定行号进行查找</td>
</tr>
<tr>
<td>‘/10:00/,/11:00/d’</td>
<td>表示范围的过滤</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">指定行删除:</span><br><span class="line">语法格式: sed <span class="string">&#x27;3d&#x27;</span> file <span class="comment"># 默认不会修改源文件</span></span><br><span class="line">修改源文件 sed -i <span class="string">&#x27;3d&#x27;</span> file</span><br><span class="line"></span><br><span class="line">案例1.删除文件的第3行</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;3d&#x27;</span> test.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"></span><br><span class="line">案例2.删除2到4行</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;2,4d&#x27;</span> test.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line"></span><br><span class="line">案例3.删除2到最后一行</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;2,$d&#x27;</span> test.txt</span><br><span class="line"></span><br><span class="line">模糊过滤内容，然后删除</span><br><span class="line">语法结构: sed <span class="string">&#x27;/字符串/d&#x27;</span> file</span><br><span class="line">删除包含root的行</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;/root/d&#x27;</span> test.txt</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"></span><br><span class="line">删除b开头的行</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;/^b/d&#x27;</span> test.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"></span><br><span class="line">-r 支持扩展正则 |或者的意思</span><br><span class="line">[root@db01 ~]# sed -rn <span class="string">&#x27;/^bin|^p/p&#x27;</span> test.txt</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">p:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"></span><br><span class="line">删除bin开头或者lp开头的行</span><br><span class="line">[root@db01 ~]# sed -r <span class="string">&#x27;/^bin|^lp/d&#x27;</span> test.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line"></span><br><span class="line">匹配区间范围进行删除:</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;/^bin/,/^adm/d&#x27;</span> test.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"></span><br><span class="line"><span class="comment"># !妙用</span></span><br><span class="line">sed -nr <span class="string">&#x27;/^&amp;|#/!p&#x27;</span> /etc/ssh/sshd_config   遇到空行和#行不显示</span><br></pre></td></tr></table></figure>
<h5 id="sed-增加">sed-增加</h5>
<table>
<thead>
<tr>
<th>功能</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>c</td>
<td>replace替代这一行</td>
</tr>
<tr>
<td>a</td>
<td>append追加，向指定的行或每一行插入内容（行后）</td>
</tr>
<tr>
<td>i</td>
<td>insert插入，向指定的行或每一行插入内容（行前）</td>
</tr>
<tr>
<td>w</td>
<td>将找到的内容保存到新文件内</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">&#x27;3a root&#x27;</span> /text.txt    <span class="comment">#向第三行后面追加root这一行</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#向文件最后一行中追内容</span></span><br><span class="line">1.</span><br><span class="line"><span class="built_in">cat</span> &gt;&gt;test.txt&lt;&lt;<span class="string">&#x27;EOF&#x27;</span></span><br><span class="line">abc</span><br><span class="line">cdf</span><br><span class="line">EOF</span><br><span class="line">2.</span><br><span class="line">sed <span class="string">&#x27;$a abc\nsdf&#x27;</span> test.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#使用方法</span></span><br><span class="line">1. i 插入 在第3行前写入aaa</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;3i aaa&#x27;</span> test.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">aaa</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"></span><br><span class="line">2. a追加 在第3行的下一行 在第4行写入aaa</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;3a aaa&#x27;</span> test.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">aaa</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"></span><br><span class="line">3. c替换 替换整行内容</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;3c aaa&#x27;</span> test.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">aaa</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"></span><br><span class="line">替换第7行的内容关闭selinux</span><br><span class="line">[root@db01 ~]# sed -i <span class="string">&#x27;7c SELINUX=disabled&#x27;</span> /etc/selinux/config</span><br><span class="line"></span><br><span class="line">4. w 保存 将找到的行保存到新的文件中</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;4w new.txt&#x27;</span> test.txt</span><br><span class="line">保存2到4行的内容到new.txt</span><br><span class="line">[root@db01 ~]# sed -n <span class="string">&#x27;2,4w new.txt&#x27;</span> test.txt</span><br><span class="line">[root@db01 ~]# <span class="built_in">cat</span> new.txt</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="sed-替换s">sed-替换s</h5>
<ul>
<li>
<p>s --&gt; sub substitute 替换</p>
</li>
<li>
<p>g --&gt; global 全局替换，替换所有的匹配的sed默认只替换每行第一个匹配的</p>
</li>
<li>
<p><code>sed中   \u表示大写     \l表示小写</code></p>
</li>
</ul>
<blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1. 把每个单词的第一个小写字母变大写：</span><br><span class="line">sed <span class="string">&#x27;s/\b[a-z]/\u&amp;/g&#x27;</span> filename</span><br><span class="line"></span><br><span class="line">2. 把所有小写变大写：</span><br><span class="line">sed <span class="string">&#x27;s/[a-z]/\u&amp;/g&#x27;</span> filename</span><br><span class="line"></span><br><span class="line">3. 大写变小写：</span><br><span class="line">sed <span class="string">&#x27;s/[A-Z]/\l&amp;/g&#x27;</span> filename</span><br></pre></td></tr></table></figure>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">语法结构：</span><br><span class="line">sed <span class="string">&#x27;s#将谁#替换成谁#g&#x27;</span> 文件</span><br><span class="line">sed <span class="string">&#x27;s@@@g&#x27;</span> 文件</span><br><span class="line">sed <span class="string">&#x27;s///g&#x27;</span> 文件</span><br><span class="line">案例: 只替换每行的第一个单词 root为oldboy</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;s#root#oldboy#&#x27;</span> test.txt</span><br><span class="line">oldboy:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line"></span><br><span class="line">案例: 替换所有的root为oldboy</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;s#root#oldboy#g&#x27;</span> test.txt</span><br><span class="line">oldboy:x:0:0:oldboy:/oldboy:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line"></span><br><span class="line">案例: 将root替换成空</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;s#root##g&#x27;</span> test.txt</span><br><span class="line">:x:0:0::/:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line"></span><br><span class="line">案例: 删除所有的数字</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;s#[0-9]##g&#x27;</span> test.txt</span><br><span class="line">root:x:::root:/root:/bin/bash</span><br><span class="line">bin:x:::bin:/bin:/sbin/nologin</span><br><span class="line"></span><br><span class="line">案例: 删除所有的字符串</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;s#[a-z]##g&#x27;</span> test.txt</span><br><span class="line">::0:0::/://</span><br><span class="line">::1:1::/://</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;s#[0-z]##g&#x27;</span> test.txt</span><br><span class="line">:::::/://</span><br><span class="line">:::::/://</span><br><span class="line"></span><br><span class="line">案例: 统计passwd中每个单词出现的次数 top10</span><br><span class="line">将特殊符号替换成空</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;s#[:/0-9x]# #g&#x27;</span> test.txt</span><br><span class="line">root root root bin bash</span><br><span class="line">bin bin bin sbin nologin</span><br><span class="line">daemon daemon sbin sbin nologin</span><br><span class="line">adm adm var adm sbin nologin</span><br><span class="line">root root root bin bash</span><br><span class="line">lp lp var spool lpd sbin nologin</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;s#[:/0-9x]# #g&#x27;</span> test.txt |xargs -n1|<span class="built_in">sort</span> |<span class="built_in">uniq</span> -c|<span class="built_in">sort</span> -rn|<span class="built_in">head</span></span><br><span class="line">6 root</span><br><span class="line">5 sbin</span><br><span class="line">5 bin</span><br><span class="line">4 nologin</span><br><span class="line">3 adm</span><br><span class="line">2 var</span><br><span class="line">2 lp</span><br><span class="line">2 daemon</span><br><span class="line">2 bash</span><br><span class="line">1 spool</span><br><span class="line"></span><br><span class="line">边界符:</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;s#\bbin\b#oldboy#g&#x27;</span> test.txt</span><br><span class="line">或者:</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;s#\&lt;bin\&gt;#oldboy#g&#x27;</span> test.txt</span><br><span class="line">root:x:0:0:root:/root:/oldboy/bash</span><br><span class="line">oldboy:x:1:1:oldboy:/oldboy:/sbin/nologin</span><br><span class="line"></span><br><span class="line">注意: 语法冲突需要使用撬棍\ 或者换个语法</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;s/\/root/\/oldboy/g&#x27;</span> test.txt</span><br><span class="line">或者</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;s#/root#/oldboy#g&#x27;</span> test.txt</span><br><span class="line"></span><br><span class="line">动作:</span><br><span class="line">sed -n <span class="string">&#x27;3p&#x27;</span> 文件</span><br><span class="line">sed <span class="string">&#x27;s###g&#x27;</span> 文件</span><br><span class="line">模式+动作</span><br><span class="line">模式: 找谁，如何找</span><br><span class="line">sed -n <span class="string">&#x27;3p&#x27;</span> <span class="comment"># 找第3行</span></span><br><span class="line">演变: 将p输出动作 修改为替换动作</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;3s#sbin#oldboy#g&#x27;</span> test.txt <span class="comment"># 将第3行的sbin替换成oldboy</span></span><br><span class="line"></span><br><span class="line">案例: 将2到4行的nologin替换成oldboy</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;2,4s#nologin#oldboy#g&#x27;</span> test.txt</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/oldboy</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/oldboy</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/oldboy</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;/adm/s#adm#oldboy#g&#x27;</span> test.txt</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/oldboy</span><br><span class="line">	↓          ↘         ↘</span><br><span class="line">oldboy:x:3:4:oldboy:/var/oldboy:/sbin/nologin</span><br><span class="line"></span><br><span class="line">区间范围:</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;/adm/,/lp/s#[a-z]##g&#x27;</span> test.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">::3:4:://://</span><br><span class="line">::0:0::/://</span><br><span class="line">::4:7::///://</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="sed-后向引用">sed-后向引用</h5>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">sed后向引用:</span><br><span class="line">语法结构: sed s#()()()#\1\2\3#g     -r支持扩展正则</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# <span class="built_in">echo</span> oldboy|sed -r <span class="string">&#x27;s#(.*)#\1#g&#x27;</span></span><br><span class="line">oldboy</span><br><span class="line">[root@db01 ~]#</span><br><span class="line">[root@db01 ~]# <span class="built_in">echo</span> oldboy|sed -r <span class="string">&#x27;s#ol(.*)oy#\1#g&#x27;</span></span><br><span class="line">db</span><br><span class="line">[root@db01 ~]# <span class="built_in">echo</span> oldboy|sed -r <span class="string">&#x27;s#ol(.*)(oy)#\2#g&#x27;</span></span><br><span class="line">oy</span><br><span class="line">[root@db01 ~]# <span class="built_in">echo</span> oldboy|sed -r <span class="string">&#x27;s#(ol)(.*)(oy)#\1#g&#x27;</span></span><br><span class="line">ol</span><br><span class="line">[root@db01 ~]# <span class="built_in">echo</span> oldboy <span class="built_in">test</span>|sed -r <span class="string">&#x27;s#(.*)#\1#g&#x27;</span></span><br><span class="line">oldboy <span class="built_in">test</span></span><br><span class="line">[root@db01 ~]# <span class="built_in">echo</span> oldboy <span class="built_in">test</span>|sed -r <span class="string">&#x27;s#(.*) test#\1#g&#x27;</span></span><br><span class="line">oldboy</span><br><span class="line"></span><br><span class="line">案例: 取出IP地址</span><br><span class="line">[root@db01 ~]# ifconfig eth0|sed -n <span class="string">&#x27;2p&#x27;</span>|sed -r <span class="string">&#x27;s#^.*t (.*)  netm.*$#\1#g&#x27;</span></span><br><span class="line">10.0.0.200</span><br><span class="line"></span><br><span class="line">第二种用法: 命令拼接后交给bash执行</span><br><span class="line">[root@db01 ~]# <span class="built_in">seq</span> 5|sed -r <span class="string">&#x27;s#(.*)#touch \1.txt#g&#x27;</span></span><br><span class="line"><span class="built_in">touch</span> 1.txt</span><br><span class="line"><span class="built_in">touch</span> 2.txt</span><br><span class="line"><span class="built_in">touch</span> 3.txt</span><br><span class="line"><span class="built_in">touch</span> 4.txt</span><br><span class="line"><span class="built_in">touch</span> 5.txt</span><br><span class="line">[root@db01 ~]# <span class="built_in">seq</span> 5|sed -r <span class="string">&#x27;s#(.*)#touch \1.txt#g&#x27;</span>|bash</span><br><span class="line">-rw-r--r-- 1 root root 18 Mar 18 11:46 1.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar 18 11:46 2.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar 18 11:46 3.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar 18 11:46 4.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar 18 11:46 5.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 批量创建用户</span></span><br><span class="line">[root@db01 ~]# <span class="built_in">echo</span> <span class="built_in">test</span>&#123;1..3&#125;</span><br><span class="line">test1 test2 test3</span><br><span class="line">[root@db01 ~]# <span class="built_in">echo</span> <span class="built_in">test</span>&#123;1..3&#125;|xargs -n1</span><br><span class="line">test1</span><br><span class="line">test2 </span><br><span class="line">test3</span><br><span class="line">[root@db01 ~]# <span class="built_in">echo</span> <span class="built_in">test</span>&#123;1..3&#125;|xargs -n1|sed -r <span class="string">&#x27;s#(.*)#\1#g&#x27;</span></span><br><span class="line">test1</span><br><span class="line">test2</span><br><span class="line">test3</span><br><span class="line">[root@db01 ~]# <span class="built_in">echo</span> <span class="built_in">test</span>&#123;1..3&#125;|xargs -n1|sed -r <span class="string">&#x27;s#(.*)#useradd \1#g&#x27;</span></span><br><span class="line">useradd test1</span><br><span class="line">useradd test2</span><br><span class="line">useradd test3</span><br><span class="line">[root@db01 ~]# <span class="built_in">echo</span> <span class="built_in">test</span>&#123;1..3&#125;|xargs -n1|sed -r <span class="string">&#x27;s#(.*)#useradd \1#g&#x27;</span>|bash</span><br><span class="line"></span><br><span class="line"><span class="comment">#取出/etc/passwd文件权限</span></span><br><span class="line"><span class="built_in">stat</span> /etc/passwd|sed -n <span class="string">&#x27;4p&#x27;</span>|sed -r <span class="string">&#x27;s#^.*(\(0)(.*)/-.*$#\2#g&#x27;</span></span><br><span class="line">或者</span><br><span class="line"><span class="built_in">stat</span> /etc/passwd|sed -nr <span class="string">&#x27;4s#^.*(\(0)(.*)/-.*$#\2#pg&#x27;</span></span><br><span class="line">644</span><br></pre></td></tr></table></figure>
<h3 id="awk命令">awk命令</h3>
<table>
<thead>
<tr>
<th>内置变量</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td>NR</td>
<td>Number of Record记录行号</td>
</tr>
<tr>
<td>NF</td>
<td>Number of Field每行有多少子字段（列）$NF表示最后一列</td>
</tr>
<tr>
<td>FS</td>
<td>-F：字段分隔符，每个字段结束标记</td>
</tr>
<tr>
<td>OFS</td>
<td>Output Field Separator 输出字段分隔符（awk显示每一列的时候通过什么来分割，默认是空格）</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">awk: 编程语言 GNU/awk</span><br><span class="line">作用:</span><br><span class="line">1.取行</span><br><span class="line">2.取列</span><br><span class="line">3.模糊过滤</span><br><span class="line">4.数据统计 数据运算</span><br><span class="line">5.支持<span class="keyword">for</span>循环 <span class="keyword">if</span>判断 数组..</span><br><span class="line">6.格式化输出 sed后向引用</span><br><span class="line">语法结构:</span><br><span class="line">awk <span class="string">&#x27;模式&#x27;</span> file <span class="comment"># 不加任何动作，默认为输出的动作</span></span><br><span class="line">awk <span class="string">&#x27;模式&#123;print&#125;&#x27;</span> file <span class="comment"># 模式+动作</span></span><br><span class="line">其他的命令输出|awk <span class="string">&#x27;模式&#x27;</span></span><br><span class="line">模式: 找谁，怎么找</span><br><span class="line">指定行，指定列找，模糊过滤的找</span><br><span class="line"></span><br><span class="line"><span class="comment">#OFS指定分隔符  -v OFS=:   或者OFS=:    (-v修改参数)</span></span><br><span class="line">[root@web01 ~]# awk -F: <span class="string">&#x27;&#123;print $1,$3,$4&#125;&#x27;</span> OFS=:  /etc/passwd</span><br><span class="line">root:0:0</span><br><span class="line">bin:1:1</span><br></pre></td></tr></table></figure>
<h4 id="1-查找-过滤">1.查找/过滤</h4>
<p><strong>==1.awk按照行进行查找==</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#正则搜索某一列</span></span><br><span class="line">//</span><br><span class="line"><span class="variable">$1</span> ~//  匹配第一列的内容</span><br><span class="line"></span><br><span class="line">语法结构:</span><br><span class="line">sed -n <span class="string">&#x27;3p&#x27;</span> file <span class="comment"># sed 输出指定的行</span></span><br><span class="line">awk <span class="string">&#x27;NR==3&#x27;</span> file <span class="comment"># awk输出指定的行</span></span><br><span class="line">awk的内置变量:</span><br><span class="line">NR存放着文件中每行的行号</span><br><span class="line">NR的表达式:</span><br><span class="line">== 等于第几行</span><br><span class="line">&gt; 大于第几行</span><br><span class="line">&lt; 小于第几行</span><br><span class="line">&gt;= 等于等于第几行</span><br><span class="line">&lt;= 小于等于第几行</span><br><span class="line">!= 不等于</span><br><span class="line">&amp;&amp; 并且</span><br><span class="line">|| 或者</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# <span class="built_in">cat</span> 1.txt</span><br><span class="line">1 root:x:0:0:root:/root:/bin/bash</span><br><span class="line">2 bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">3 daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">4 adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">5 lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"></span><br><span class="line">只显示文件的第3行</span><br><span class="line">[root@db01 ~]# awk <span class="string">&#x27;NR==3&#x27;</span> 1.txt</span><br><span class="line">3 daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line"></span><br><span class="line"><span class="comment">#为什么要加两个等号？</span></span><br><span class="line">一个等号在系统中称为定义变量</span><br><span class="line"></span><br><span class="line">只显示文件中小于3的行</span><br><span class="line">[root@db01 ~]# awk <span class="string">&#x27;NR&lt;3&#x27;</span> 1.txt</span><br><span class="line">1 root:x:0:0:root:/root:/bin/bash</span><br><span class="line">2 bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line"></span><br><span class="line">只显示文件中大于3的行</span><br><span class="line">[root@db01 ~]# awk <span class="string">&#x27;NR&gt;3&#x27;</span> 1.txt</span><br><span class="line">4 adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">5 lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# awk <span class="string">&#x27;NR&lt;=3&#x27;</span> 1.txt</span><br><span class="line">1 root:x:0:0:root:/root:/bin/bash</span><br><span class="line">2 bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">3 daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line"></span><br><span class="line">显示文件中不等于3的行</span><br><span class="line">[root@db01 ~]# awk <span class="string">&#x27;NR!=3&#x27;</span> 1.txt</span><br><span class="line">1 root:x:0:0:root:/root:/bin/bash</span><br><span class="line">2 bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">4 adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">5 lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"></span><br><span class="line">并且和或者:</span><br><span class="line">&amp;&amp; 并且</span><br><span class="line">案例: 查找大于第2行 并且小于5的行</span><br><span class="line">[root@db01 ~]# awk <span class="string">&#x27;NR&gt;2&amp;&amp;NR&lt;5&#x27;</span> 1.txt</span><br><span class="line">3 daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">4 adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line"></span><br><span class="line">|| 或者</span><br><span class="line">案例: 查找小于第2行，或者大于第4行</span><br><span class="line">[root@db01 ~]# awk <span class="string">&#x27;NR&lt;2||NR&gt;4&#x27;</span> 1.txt</span><br><span class="line">1 root:x:0:0:root:/root:/bin/bash</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>==2.模糊过滤文件内容==</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">语法结构:</span><br><span class="line">grep <span class="string">&#x27;&#x27;</span> 文件</span><br><span class="line">sed -n <span class="string">&#x27;/内容/p&#x27;</span> 文件</span><br><span class="line">awk <span class="string">&#x27;/内容/&#x27;</span> 文件</span><br><span class="line">awk <span class="string">&#x27;//,//&#x27;</span> 文件</span><br><span class="line"></span><br><span class="line"><span class="comment">#awk表示范围</span></span><br><span class="line">awk <span class="string">&#x27;/10:00/,/11:00/&#x27;</span> access.log</span><br><span class="line"></span><br><span class="line">案例1.查找包含root的行</span><br><span class="line">[root@db01 ~]# awk <span class="string">&#x27;/root/&#x27;</span> 1.txt</span><br><span class="line">1 root:x:0:0:root:/root:/bin/bash</span><br><span class="line"></span><br><span class="line">案例2.查找以1开头的行</span><br><span class="line">[root@db01 ~]# awk <span class="string">&#x27;/^r/&#x27;</span> 1.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# awk <span class="string">&#x27;/h$/&#x27;</span> 1.txt</span><br><span class="line">1 root:x:0:0:root:/root:/bin/bash</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# awk <span class="string">&#x27;/^[1-3]/&#x27;</span> 1.txt</span><br><span class="line">1 root:x:0:0:root:/root:/bin/bash</span><br><span class="line">2 bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">3 daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line"></span><br><span class="line">案例3.区间范围 工作中取时间范围较多</span><br><span class="line">[root@db01 ~]# awk <span class="string">&#x27;/^2/,/^4/&#x27;</span> 1.txt</span><br><span class="line">2 bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">3 daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">4 adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">注意: 三剑客支持扩展正则写法</span><br><span class="line">grep -E 或者egrep</span><br><span class="line">sed -r</span><br><span class="line">awk 默认支持扩展正则</span><br></pre></td></tr></table></figure>
<h4 id="2-awk取列">2.awk取列</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br></pre></td><td class="code"><pre><span class="line">语法结构:</span><br><span class="line">awk <span class="string">&#x27;&#123;print $n&#125;&#x27;</span> file</span><br><span class="line"><span class="variable">$0</span> awk的内置变量里面存放着每行的内容,(可以判断awk执行的哪些行内容)</span><br><span class="line"><span class="variable">$1</span> 表示第1列 默认以空格和tab键为分隔符，如果文件中没有空格和tab键则文件内容被当做第一列</span><br><span class="line"><span class="variable">$2</span> 表示第2列</span><br><span class="line">，逗号 内置变量，表示空格</span><br><span class="line">NF 表示最后一列的列号</span><br><span class="line"><span class="variable">$NF</span> 表示最后一列的内容</span><br><span class="line">注意: 所有的字符串在awk中被识别为变量，所以输出字符串必须加双引号</span><br><span class="line"></span><br><span class="line">awk指定分隔符: 默认以tab键或空格分隔</span><br><span class="line">-F</span><br><span class="line">awk -F: <span class="comment"># 方法1</span></span><br><span class="line">awk -F <span class="string">&quot;:&quot;</span> <span class="comment"># 方法2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#$0用法，加上$0就可以看awk取的是哪些内容</span></span><br><span class="line">[root@web01 zzz]# <span class="built_in">cat</span> /etc/passwd|awk -F <span class="string">&#x27;[ :]+&#x27;</span> <span class="string">&#x27;NR&gt;5&amp;&amp;NR&lt;8&#123;print $1,$2&#125;&#x27;</span></span><br><span class="line"><span class="built_in">sync</span> x</span><br><span class="line">shutdown x</span><br><span class="line">[root@web01 zzz]# <span class="built_in">cat</span> /etc/passwd|awk -F <span class="string">&#x27;[ :]+&#x27;</span> <span class="string">&#x27;NR&gt;5&amp;&amp;NR&lt;8&#123;print $1,$2,$0&#125;&#x27;</span></span><br><span class="line"><span class="built_in">sync</span> x <span class="built_in">sync</span>:x:5:0:<span class="built_in">sync</span>:/sbin:/bin/sync</span><br><span class="line">shutdown x shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#如何查看每一行有多少列</span></span><br><span class="line">[root@web01 zzz]# awk -F: <span class="string">&#x27;&#123;print NF&#125;&#x27;</span> 1.txt </span><br><span class="line">7</span><br><span class="line">7</span><br><span class="line">7</span><br><span class="line">7</span><br><span class="line"></span><br><span class="line">案例1.显示文件的第一列</span><br><span class="line">[root@db01 ~]# <span class="built_in">cat</span> 1.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"><span class="built_in">sync</span>:x:5:0:<span class="built_in">sync</span>:/sbin:/bin/sync</span><br><span class="line"></span><br><span class="line">案例1.打印出第一列</span><br><span class="line">[root@db01 ~]# awk -F: <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> 1.txt</span><br><span class="line">root</span><br><span class="line">bin</span><br><span class="line">daemon</span><br><span class="line">adm</span><br><span class="line">lp</span><br><span class="line"><span class="built_in">sync</span></span><br><span class="line"></span><br><span class="line">案例2.显示文件的第1列和第3列</span><br><span class="line">[root@db01 ~]# awk -F: <span class="string">&#x27;&#123;print $1,$3&#125;&#x27;</span> 1.txt</span><br><span class="line">root 0</span><br><span class="line">bin 1</span><br><span class="line">daemon 2</span><br><span class="line">adm 3</span><br><span class="line">lp 4</span><br><span class="line"><span class="built_in">sync</span> 5</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# awk -F: <span class="string">&#x27;&#123;print $1&quot;---&quot;$3&#125;&#x27;</span> 1.txt</span><br><span class="line">root---0</span><br><span class="line">bin---1</span><br><span class="line">daemon---2</span><br><span class="line">adm---3</span><br><span class="line">lp---4</span><br><span class="line">sync---5</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">案例.先输出第3列 后面输出第1列</span><br><span class="line">[root@db01 ~]# awk -F: <span class="string">&#x27;&#123;print $3&quot; &quot;$1&#125;&#x27;</span> 1.txt</span><br><span class="line">0 root</span><br><span class="line">1 bin</span><br><span class="line">2 daemon</span><br><span class="line">3 adm</span><br><span class="line">4 lp</span><br><span class="line">5 <span class="built_in">sync</span></span><br><span class="line"></span><br><span class="line">案例: 取出最后一列的内容:</span><br><span class="line">[root@db01 ~]# awk -F: <span class="string">&#x27;&#123;print $NF&#125;&#x27;</span> 1.txt</span><br><span class="line">/bin/bash</span><br><span class="line">/sbin/nologin</span><br><span class="line">/sbin/nologin</span><br><span class="line">/sbin/nologin</span><br><span class="line">/sbin/nologin</span><br><span class="line">/bin/sync</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@web01 zzz]# <span class="built_in">df</span> -h</span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/sda3        19G  1.9G   17G  11% /</span><br><span class="line">devtmpfs        476M     0  476M   0% /dev</span><br><span class="line">tmpfs           487M     0  487M   0% /dev/shm</span><br><span class="line">tmpfs           487M   20M  467M   5% /run</span><br><span class="line">tmpfs           487M     0  487M   0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1       497M  120M  378M  25% /boot</span><br><span class="line">tmpfs            98M     0   98M   0% /run/user/0</span><br><span class="line"></span><br><span class="line">案例: 取出磁盘中的第5列</span><br><span class="line">[root@db01 ~]# <span class="built_in">df</span> -h|awk <span class="string">&#x27;&#123;print $5&#125;&#x27;</span></span><br><span class="line">Use%</span><br><span class="line">11%</span><br><span class="line">0%</span><br><span class="line">0%</span><br><span class="line">5%</span><br><span class="line">0%</span><br><span class="line">25%</span><br><span class="line">0%</span><br><span class="line"></span><br><span class="line">案例: 取出sda3的行的方法</span><br><span class="line">[root@db01 ~]# <span class="built_in">df</span> -h|grep <span class="string">&#x27;/$&#x27;</span></span><br><span class="line">/dev/sda3        19G  1.9G   17G  11% /</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# <span class="built_in">df</span> -h|grep <span class="string">&#x27;sda3&#x27;</span></span><br><span class="line">/dev/sda3        19G  1.9G   17G  11% /</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# <span class="built_in">df</span> -h|sed -n <span class="string">&#x27;2p&#x27;</span></span><br><span class="line">/dev/sda3        19G  1.9G   17G  11% /</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# <span class="built_in">df</span> -h|sed -n <span class="string">&#x27;/sda3/p&#x27;</span></span><br><span class="line">/dev/sda3        19G  1.9G   17G  11% /</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# <span class="built_in">df</span> -h|sed -n <span class="string">&#x27;/\/$/p&#x27;</span></span><br><span class="line">/dev/sda3        19G  1.9G   17G  11% /</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# <span class="built_in">df</span> -h|awk <span class="string">&#x27;NR==2&#x27;</span></span><br><span class="line">/dev/sda3        19G  1.9G   17G  11% /</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# <span class="built_in">df</span> -h|awk <span class="string">&#x27;/\/$/&#x27;</span></span><br><span class="line">/dev/sda3        19G  1.9G   17G  11% /</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# <span class="built_in">df</span> -h|awk <span class="string">&#x27;/sda3/&#x27;</span></span><br><span class="line">/dev/sda3        19G  1.9G   17G  11% /</span><br><span class="line"></span><br><span class="line"><span class="comment">#案例：取出倒数第二列</span></span><br><span class="line">[root@db01 ~]# <span class="built_in">df</span> -h|awk <span class="string">&#x27;&#123;print $(NF-1)&#125;&#x27;</span></span><br><span class="line">Mounted</span><br><span class="line">11%</span><br><span class="line">0%</span><br><span class="line">0%</span><br><span class="line">5%</span><br><span class="line">0%</span><br><span class="line">25%</span><br><span class="line">0%</span><br><span class="line"></span><br><span class="line">取出每行的倒数第2列的内容</span><br><span class="line">[root@db01 ~]# <span class="built_in">cat</span> 1.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"><span class="built_in">sync</span>:x:5:0:<span class="built_in">sync</span>:/sbin:/bin/sync</span><br><span class="line"></span><br><span class="line">[root@web01 zzz]# awk -F: <span class="string">&#x27;&#123;print $(NF-1)&#125;&#x27;</span> 1.txt</span><br><span class="line">/root</span><br><span class="line">/bin</span><br><span class="line">/sbin</span><br><span class="line">/var/adm</span><br><span class="line">/var/spool/lpd</span><br><span class="line">/sbin</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">案例.指定多分隔符</span><br><span class="line">[root@db01 ~]# <span class="built_in">cat</span> 2.txt</span><br><span class="line">root:x:0:0:root:/oldboy:/bin/bash</span><br><span class="line">[root@db01 ~]# awk -F <span class="string">&quot;:/&quot;</span> <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> 2.txt</span><br><span class="line">oldboy</span><br><span class="line"></span><br><span class="line">案例.取出<span class="built_in">test</span>和oldboy</span><br><span class="line">案例.+连续出现1次及1次以上的作为1个整体</span><br><span class="line">[root@db01 ~]# <span class="built_in">cat</span> 2.txt</span><br><span class="line">root:x:0:0:<span class="built_in">test</span>:/oldboy:/bin/bash</span><br><span class="line">[root@db01 ~]# awk -F <span class="string">&quot;[:/]+&quot;</span> <span class="string">&#x27;&#123;print $5,$6&#125;&#x27;</span> 2.txt</span><br><span class="line"><span class="built_in">test</span> oldboy</span><br><span class="line"></span><br><span class="line">理解正则表达式+</span><br><span class="line">[root@db01 ~]# <span class="built_in">echo</span> ---<span class="built_in">test</span>-+oldboy++::|awk -F <span class="string">&quot;-&quot;</span> <span class="string">&#x27;&#123;print $4&#125;&#x27;</span></span><br><span class="line"><span class="built_in">test</span></span><br><span class="line">[root@db01 ~]# <span class="built_in">echo</span> ---<span class="built_in">test</span>-+oldboy++::|awk -F <span class="string">&quot;[-]+&quot;</span> <span class="string">&#x27;&#123;print $2&#125;&#x27;</span></span><br><span class="line"><span class="built_in">test</span></span><br><span class="line"></span><br><span class="line">[root@db01 ~]# <span class="built_in">echo</span> ---<span class="built_in">test</span>-+oldboy++::|awk -F <span class="string">&quot;[-+]&quot;</span> <span class="string">&#x27;&#123;print $6&#125;&#x27;</span></span><br><span class="line">oldboy</span><br><span class="line">[root@db01 ~]# <span class="built_in">echo</span> ---<span class="built_in">test</span>-+oldboy++::|awk -F <span class="string">&quot;[-+]+&quot;</span> <span class="string">&#x27;&#123;print $3&#125;&#x27;</span></span><br><span class="line">oldboy</span><br><span class="line"></span><br><span class="line"><span class="comment">#不加+不会贪婪匹配，要数分隔符（字符串后跟的第一个分隔符不数量，再有分隔符要数）</span></span><br><span class="line">[root@web01 ~]# <span class="built_in">echo</span> ---<span class="built_in">test</span>-+--oldboy++::|awk -F <span class="string">&quot;[-+]&quot;</span> <span class="string">&#x27;&#123;print $4&#125;&#x27;</span></span><br><span class="line"><span class="built_in">test</span></span><br><span class="line">[root@web01 ~]# <span class="built_in">echo</span> ---<span class="built_in">test</span>-+--oldboy++::|awk -F <span class="string">&quot;[-+]&quot;</span> <span class="string">&#x27;&#123;print $8&#125;&#x27;</span></span><br><span class="line">oldboy</span><br><span class="line">[root@web01 ~]# <span class="built_in">echo</span> ---<span class="built_in">test</span>-+--oldboy++::|awk -F <span class="string">&quot;[-+]&quot;</span> <span class="string">&#x27;&#123;print $10&#125;&#x27;</span></span><br><span class="line">::</span><br><span class="line">[root@web01 ~]# <span class="built_in">echo</span> ---<span class="built_in">test</span>-+--oldboy++::|awk -F <span class="string">&quot;[-+]+&quot;</span> <span class="string">&#x27;&#123;print $2,$3,$4&#125;&#x27;</span></span><br><span class="line"><span class="built_in">test</span> oldboy ::</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">扩展：让取出的列排列整齐  column -t</span><br><span class="line">[root@web01 ~]# awk -F: <span class="string">&#x27;&#123;print $1,$3&#125;&#x27;</span>  /etc/passwd|column -t</span><br><span class="line">root             0</span><br><span class="line">bin              1</span><br><span class="line">daemon           2</span><br><span class="line">adm              3</span><br><span class="line">lp               4</span><br><span class="line"><span class="built_in">sync</span>             5</span><br><span class="line">shutdown         6</span><br></pre></td></tr></table></figure>
<h4 id="3-awk模式-动作">3.awk模式+动作</h4>
<ul>
<li>print</li>
<li>gsub</li>
<li>变量赋值</li>
<li>统计计算</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#统计 /etc/services有多少行</span></span><br><span class="line">[root@web01 ~]# <span class="built_in">cat</span> /etc/services |<span class="built_in">wc</span> -l</span><br><span class="line">11176</span><br><span class="line"></span><br><span class="line">[root@web01 ~]# awk <span class="string">&#x27;&#123;i++&#125;END&#123;print i&#125;&#x27;</span> /etc/services </span><br><span class="line">11176</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">[root@db01 ~]# <span class="built_in">cat</span> 1.txt</span><br><span class="line">1 root:x:0:0:root:/root:/bin/bash</span><br><span class="line">2 bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">3 daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">4 adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">:5 lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# awk <span class="string">&#x27;NR==3&#x27;</span> 1.txt</span><br><span class="line">3 daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">[root@db01 ~]# awk -F: <span class="string">&#x27;NR==3&#123;print $3 &#125;&#x27;</span> 1.txt</span><br><span class="line">2</span><br><span class="line"></span><br><span class="line">案例2.取出用户名和最后一列</span><br><span class="line">[root@db01 ~]# <span class="built_in">cat</span> 1.txt</span><br><span class="line">1 root:x:0:0:root:/root:/bin/bash</span><br><span class="line">2 bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">3 daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">4 adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">5 lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# awk -F <span class="string">&quot;[ :]&quot;</span> <span class="string">&#x27;&#123;print $2,$NF &#125;&#x27;</span> 1.txt</span><br><span class="line">root /bin/bash</span><br><span class="line">bin /sbin/nologin</span><br><span class="line">daemon /sbin/nologin</span><br><span class="line">adm /sbin/nologin</span><br><span class="line">lp /sbin/nologin</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# awk -F <span class="string">&quot;[ :]&quot;</span> <span class="string">&#x27;&#123;print $2&quot;\t&quot;$NF &#125;&#x27;</span> 1.txt</span><br><span class="line">root /bin/bash</span><br><span class="line">bin /sbin/nologin</span><br><span class="line">daemon /sbin/nologin</span><br><span class="line">adm /sbin/nologin</span><br><span class="line">lp /sbin/nologin</span><br><span class="line"></span><br><span class="line">案例.取出/磁盘使用行的 第4列</span><br><span class="line">指定行+动作</span><br><span class="line">[root@web01 zzz]# <span class="built_in">df</span> -h</span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/sda3        19G  1.9G   17G  11% /</span><br><span class="line">devtmpfs        476M     0  476M   0% /dev</span><br><span class="line">tmpfs           487M     0  487M   0% /dev/shm</span><br><span class="line">tmpfs           487M   20M  467M   5% /run</span><br><span class="line">tmpfs           487M     0  487M   0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1       497M  120M  378M  25% /boot</span><br><span class="line">tmpfs            98M     0   98M   0% /run/user/0</span><br><span class="line"></span><br><span class="line">[root@web01 zzz]# <span class="built_in">df</span> -h|awk <span class="string">&#x27;NR==2&#x27;</span></span><br><span class="line">/dev/sda3        19G  1.9G   17G  11% /</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">模糊过滤+动作</span><br><span class="line">[root@db01 ~]# <span class="built_in">df</span> -h|awk <span class="string">&#x27;/\/$/&#123;print $4,$1&#125;&#x27;</span></span><br><span class="line">17G /dev/sda3</span><br><span class="line">[root@db01 ~]# <span class="built_in">df</span> -h|awk <span class="string">&#x27;/sda3/&#123;print $4,$1&#125;&#x27;</span></span><br><span class="line">17G /dev/sda3</span><br><span class="line"></span><br><span class="line">案例.取出dev相关的行的第1行和第2行</span><br><span class="line">[root@web01 zzz]# <span class="built_in">df</span> -h|awk <span class="string">&#x27;/sda3/,/devtmpfs/&#x27;</span></span><br><span class="line">/dev/sda3        19G  1.9G   17G  11% /</span><br><span class="line">devtmpfs        476M     0  476M   0% /dev</span><br><span class="line"></span><br><span class="line"><span class="comment">#取出第6列和第7列</span></span><br><span class="line"><span class="built_in">cat</span> -n /etc/passwd|awk <span class="string">&#x27;NR&gt;5&amp;&amp;NR&lt;8&#x27;</span></span><br><span class="line">     6  <span class="built_in">sync</span>:x:5:0:<span class="built_in">sync</span>:/sbin:/bin/sync</span><br><span class="line">     7  shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line"></span><br><span class="line"><span class="comment">#取出第6行和第七行的 第1列和第2列</span></span><br><span class="line">[root@web01 zzz]# <span class="built_in">cat</span> /etc/passwd|awk -F <span class="string">&#x27;[ :]+&#x27;</span> <span class="string">&#x27;NR&gt;5&amp;&amp;NR&lt;8&#123;print $1,$2&#125;&#x27;</span></span><br><span class="line"><span class="built_in">sync</span> x</span><br><span class="line">shutdown x</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="4-字符串对比">4.字符串对比</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">扩展: 字符串比对</span><br><span class="line">[root@db01 ~]# <span class="built_in">cat</span> 1.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">root:hehe:xx</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# awk -F: <span class="string">&#x27;$NF==&quot;/bin/bash&quot;&#x27;</span> 1.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line"></span><br><span class="line">查找出以ro开头的行</span><br><span class="line">[root@db01 ~]# awk -F: <span class="string">&#x27;/^ro/&#x27;</span> 1.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">root:hehe:xx</span><br><span class="line"></span><br><span class="line"><span class="comment">#匹配第5列是r开头的内容</span></span><br><span class="line">[root@web01 zzz]# awk -F: <span class="string">&#x27;$5 ~ /^r/&#x27;</span> 1.txt </span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line"></span><br><span class="line"><span class="comment">#匹配第5列是t结尾的内容</span></span><br><span class="line">[root@web01 zzz]# awk -F: <span class="string">&#x27;$5 ~ /t$/&#x27;</span> 1.txt </span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line"></span><br><span class="line">数字比较:</span><br><span class="line">[root@db01 ~]# awk -F: <span class="string">&#x27;$3&gt;0&#x27;</span> 1.txt</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# awk -F: <span class="string">&#x27;$3&lt;2&#x27;</span> 1.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# awk -F: <span class="string">&#x27;$3&lt;=2&#x27;</span> 1.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line"></span><br><span class="line">[root@db01 ~]#</span><br><span class="line">成绩单统计:（假定第二列是成绩）</span><br><span class="line">案例。大于等于90的人数</span><br><span class="line">[root@db01 ~]# awk <span class="string">&#x27;$2&gt;=90&#x27;</span> 1.txt|<span class="built_in">wc</span> -l</span><br><span class="line">16</span><br><span class="line">案例. 大于等于80并且小于90的人数</span><br><span class="line">[root@db01 ~]# awk <span class="string">&#x27;$2&gt;=80&amp;&amp;$2&lt;90&#x27;</span> 1.txt |<span class="built_in">wc</span> -l</span><br><span class="line">29</span><br><span class="line">案例.小于60分的人数</span><br><span class="line">[root@db01 ~]# awk <span class="string">&#x27;$2&lt;60&#x27;</span> 1.txt|<span class="built_in">wc</span> -l</span><br></pre></td></tr></table></figure>
<h4 id="5-awk替换">5.awk替换</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#只替换匹配到以一个内容</span></span><br><span class="line">awk <span class="string">&#x27;&#123; sub(/apple/, &quot;pear&quot;, $1); print &#125;&#x27;</span> file.txt</span><br><span class="line"><span class="comment">#全局替换</span></span><br><span class="line">awk <span class="string">&#x27;&#123; gsub(/apple/, &quot;pear&quot;, $1); print &#125;&#x27;</span> file.txt</span><br><span class="line"><span class="comment">#替换完毕之后保存到新文件</span></span><br><span class="line">awk <span class="string">&#x27;&#123; sub(/apple/, &quot;pear&quot;, $1); print &#125;&#x27;</span> file.txt &gt; new_file.txt</span><br></pre></td></tr></table></figure>
<h4 id="总结">==总结==</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">1.awk取行</span><br><span class="line">awk <span class="string">&#x27;NR==3&#x27;</span> file</span><br><span class="line">NR==</span><br><span class="line">NR!=</span><br><span class="line">NR&gt;=</span><br><span class="line">NR&lt;=</span><br><span class="line">NR&gt;</span><br><span class="line">NR&lt;</span><br><span class="line">&amp;&amp;</span><br><span class="line">||</span><br><span class="line">2.awk模糊过滤</span><br><span class="line">awk <span class="string">&#x27;/过滤的内容/&#x27;</span> file</span><br><span class="line">awk <span class="string">&#x27;//,//&#x27;</span> file</span><br><span class="line">支持正则</span><br><span class="line">3.awk取列</span><br><span class="line">awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> file</span><br><span class="line">awk <span class="string">&#x27;&#123;print $NF&#125;&#x27;</span> file 最后一列</span><br><span class="line">4.awk指定分隔符</span><br><span class="line">awk -F:</span><br><span class="line">awk -F <span class="string">&quot;:&quot;</span></span><br><span class="line">awk -F <span class="string">&quot;[:/]+&quot;</span></span><br><span class="line">5.awk模式+动作</span><br><span class="line">awk <span class="string">&#x27;NR==6&#123;print $3&#125;&#x27;</span></span><br><span class="line">awk <span class="string">&#x27;//&#123;print $3&#125;&#x27;</span></span><br><span class="line">6.字符串比较</span><br><span class="line">awk <span class="string">&#x27;$3==&quot;root&quot;&#x27;</span> file</span><br><span class="line">awk <span class="string">&#x27;$3!=&quot;root&quot;&#x27;</span> file 不等于</span><br><span class="line">7.awk数值比较</span><br><span class="line">awk <span class="string">&#x27;$3==0&#x27;</span> file</span><br><span class="line">awk <span class="string">&#x27;$3&gt;90&#x27;</span> file</span><br><span class="line">awk <span class="string">&#x27;$3&gt;80&amp;&amp;$3&lt;90&#x27;</span> file</span><br><span class="line">|| 或者</span><br></pre></td></tr></table></figure>
<h4 id="循环-判断">循环&amp;判断</h4>
<p><strong>==for循环==</strong></p>
<blockquote>
<p>for i in 1 2 3</p>
<p>do</p>
<p>echo $i</p>
<p>done</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#shell编程c语言for循环</span></span><br><span class="line"><span class="keyword">for</span>(i=1;i&lt;10;i++)</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#awk for循环  ,  用来循环每个字段</span></span><br><span class="line"><span class="keyword">for</span>(i=1;i&lt;10;i++)</span><br><span class="line"><span class="built_in">print</span> i</span><br><span class="line"></span><br><span class="line">案例 1+...+100</span><br><span class="line">[root@web01 zzz]# awk <span class="string">&#x27;BEGIN&#123;for(i=1;i&lt;=100;i++)sum+=i;print sum&#125;&#x27;</span></span><br><span class="line">5050</span><br><span class="line"></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;</span></span><br><span class="line"><span class="string">for(i=1;i&lt;=100;i++)</span></span><br><span class="line"><span class="string">  sum+=i;</span></span><br><span class="line"><span class="string">print sum</span></span><br><span class="line"><span class="string">&#125;&#x27;</span></span><br></pre></td></tr></table></figure>
<p><strong>==if判断==</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#shell if 判断</span></span><br><span class="line"><span class="keyword">if</span> &#123; $? -eq 0 &#125;;<span class="keyword">then</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;正常&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;命令执行错误&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment">#awk if 判断</span></span><br><span class="line"><span class="keyword">if</span>(条件)</span><br><span class="line">  <span class="built_in">print</span> <span class="string">&quot;abc&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="built_in">print</span> <span class="string">&quot;cc&quot;</span></span><br><span class="line">awk -F: <span class="string">&#x27;&#123; if ($3 &gt; 100) &#123; print &quot;大于100: &quot; $0 &#125; else &#123; print &quot;小于等于100: &quot; $0 &#125; &#125;&#x27;</span> /etc/passwd</span><br></pre></td></tr></table></figure>
<h4 id="awk正则">awk正则</h4>
<ul>
<li>支持扩展正则</li>
<li>awk可以精确到某一列 ，某一列包含的内容/不包含的内容</li>
<li>~ 包含</li>
<li>!~不包含</li>
</ul>
<table>
<thead>
<tr>
<th>正则</th>
<th>awk正则</th>
</tr>
</thead>
<tbody>
<tr>
<td>^表示以…开头的行</td>
<td>某一列开的行 $3~/^root/</td>
</tr>
<tr>
<td>$表示以…结尾的行</td>
<td>某一列开的行 $3~/bash$/</td>
</tr>
<tr>
<td>^$表示空行</td>
<td></td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#找出第一列以root开头的行</span></span><br><span class="line">[root@web01 ~]# awk -F: <span class="string">&#x27;$1~/^root/&#x27;</span> /etc/passwd</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line"><span class="comment">#找出第一列以root开头的行，并输出第1列，第3列，第5列</span></span><br><span class="line">[root@web01 ~]# awk -F: <span class="string">&#x27;$1~/root/&#123;print $1,$3,$5&#125;&#x27;</span> /etc/passwd</span><br><span class="line">root 0 root</span><br><span class="line"><span class="comment">#找出第3列以1或者3开头的行，</span></span><br><span class="line">[root@web01 ~]# awk -F: <span class="string">&#x27;$3~/^[13]/&#x27;</span> /etc/passwd</span><br><span class="line">[root@web01 ~]# awk -F: <span class="string">&#x27;$3~/^(1|3)/&#x27;</span> /etc/passwd</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">operator:x:11:0:operator:/root:/sbin/nologin</span><br></pre></td></tr></table></figure>
<h4 id="特殊模式BEGIN-END">特殊模式BEGIN{} END{}</h4>
<table>
<thead>
<tr>
<th>模式</th>
<th>含义</th>
<th>应用场景</th>
</tr>
</thead>
<tbody>
<tr>
<td>BEGIN{}</td>
<td>里面内容会在awk<strong>读取文件之前</strong>执行</td>
<td>1)进行简单统计，不涉及读取文件<br />2)用来处理文件之前，添加个表头<br />3)用来定义awk变量</td>
</tr>
<tr>
<td>END{}</td>
<td>里面内容会在awk<strong>读取文件之后</strong>执行</td>
<td>1)awk进行统计，<font color=red>一般过程，先进行计算，最后END里面输出</font>&gt;结果<br />3)awk使用数组，用来输出数组结果</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>统计方法</th>
<th>简写</th>
<th>应用场景</th>
</tr>
</thead>
<tbody>
<tr>
<td>i=i+1</td>
<td>i++</td>
<td>计数，统计次数</td>
</tr>
<tr>
<td>sum=sum+i</td>
<td>sum+=i</td>
<td>求和，累加</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#使用awk统计有多少空行</span></span><br><span class="line">[root@web01 ~]# awk <span class="string">&#x27;/^$/&#123;i++&#125;END&#123;print i&#125;&#x27;</span> /etc/services</span><br><span class="line">17</span><br></pre></td></tr></table></figure>
<h4 id="awk数组">awk数组</h4>
<table>
<thead>
<tr>
<th></th>
<th>shell数组</th>
<th>awk数组</th>
</tr>
</thead>
<tbody>
<tr>
<td>形式</td>
<td>array[0]=oldboy array[1]=996</td>
<td>array[0]=oldboy array[1]=996</td>
</tr>
<tr>
<td>使用</td>
<td>echo $array[0]   $array[1]</td>
<td>print $array[0]   $array[1]</td>
</tr>
<tr>
<td>批量输出数组内容</td>
<td>for i in ${array[*]}<br />do<br />  echo $i<br />done</td>
<td>for(i in array)<br />print array[i]</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">awk数组专用循环，变量获取到的是数组的下标，想要获取数组内容，array[i]</span><br><span class="line">[root@web01 ~]# awk <span class="string">&#x27;BEGIN&#123;a[0]=123;a[1]=&quot;creat&quot;; for(i in a) print i,a[i]&#125;&#x27;</span></span><br><span class="line">0 123</span><br><span class="line">1 creat</span><br><span class="line"></span><br><span class="line">[root@web01 ~]# <span class="built_in">cat</span> 1.txt</span><br><span class="line">http://www.driverzeng.com/index.html</span><br><span class="line">http://www.driverzeng.com/1.html</span><br><span class="line">http://post.driverzeng.com/index.html</span><br><span class="line">http://mp3.driverzeng.com/index.html</span><br><span class="line">http://www.driverzeng.com/3.html</span><br><span class="line">http://post.driverzeng.com/2.html</span><br><span class="line"></span><br><span class="line">[root@web01 ~]# awk -F <span class="string">&#x27;[./]+&#x27;</span> <span class="string">&#x27;&#123;array[$2]++&#125;END&#123;for(i in array)print i,array[i]&#x27;</span> 1.txt </span><br><span class="line">www 3</span><br><span class="line">mp3 1</span><br><span class="line">post 2</span><br><span class="line"><span class="comment">####</span></span><br><span class="line">array[<span class="variable">$2</span>]++  ==&gt;[ ]里是数组想要统计的内容</span><br><span class="line">&#123;<span class="keyword">for</span>(i <span class="keyword">in</span> array) ==&gt;循环数组</span><br><span class="line"><span class="built_in">print</span> i  ==&gt;这里的i是[ ]里的内容</span><br><span class="line">array[i] ==&gt;数组+下标表示的是内容，这里的内容表示的是次数</span><br><span class="line"></span><br><span class="line">[root@web02 ~]# awk <span class="string">&#x27;&#123;array[$10]++&#125;END&#123;for(i in array)print $1,i,array[i]&#125;&#x27;</span> access.log|<span class="built_in">sort</span> -nrk3</span><br><span class="line">115.223.23.182 200 710</span><br><span class="line">115.223.23.182 304 250</span><br><span class="line">115.223.23.182 302 223</span><br><span class="line">115.223.23.182 404 186</span><br><span class="line">115.223.23.182 301 65</span><br><span class="line">115.223.23.182 403 45</span><br><span class="line">115.223.23.182 503 4</span><br></pre></td></tr></table></figure>
<p><strong>==案例==</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">[root@web01 ~]# <span class="built_in">cat</span> 123.txt </span><br><span class="line">Zeng Laoshi       133411023        :110:100:75</span><br><span class="line">Deng Ziqi            44002231        :250:10:88</span><br><span class="line">Zhang Xinyu      877623568      :120:300:200</span><br><span class="line">Gu Linazha         11029987         :120:30:79</span><br><span class="line">Di Lireba             253097001      :220:100:200</span><br><span class="line">Jiang Shuying    535432779       :309:10:2</span><br><span class="line">Ju Jingyi             68005178         :130:280:385</span><br><span class="line">Zhang Yuqi         376788757       :500:290:33</span><br><span class="line">Wen Zhang         259872003      :100:200:300</span><br><span class="line"></span><br><span class="line"><span class="comment">#找出所有姓Zhang的人，显示他们的名字还有第二次捐款数</span></span><br><span class="line">[root@web01 ~]# awk -F <span class="string">&#x27;[ :]+&#x27;</span> <span class="string">&#x27;/^Zhang/&#123;print $1,$2&quot; 第二次捐款：&quot;$5&#125;&#x27;</span> 123.txt </span><br><span class="line">Zhang Xinyu 第二次捐款：300</span><br><span class="line">Zhang Yuqi 第二次捐款：290</span><br><span class="line"></span><br><span class="line"><span class="comment">#找出所有25开头的联系方式，并且输出他们的姓名</span></span><br><span class="line">[root@web01 ~]# awk <span class="string">&#x27;$3~ /^25/&#123;print $1,$2,$3&#125;&#x27;</span> 123.txt </span><br><span class="line">Di Lireba 253097001</span><br><span class="line">Wen Zhang 259872003</span><br><span class="line"></span><br><span class="line"><span class="comment">#显示QQ号是1或3结尾的姓名和QQ号</span></span><br><span class="line">[root@web01 ~]# awk <span class="string">&#x27;$3~ /(1|3)$/&#123;print $1,$2,$3&#125;&#x27;</span> 123.txt </span><br><span class="line">Zeng Laoshi 133411023</span><br><span class="line">Deng Ziqi 44002231</span><br><span class="line">Di Lireba 253097001</span><br><span class="line">Wen Zhang 259872003</span><br><span class="line"></span><br><span class="line"><span class="comment">#捐款数显示以$为分割</span></span><br><span class="line">[root@web01 ~]# awk <span class="string">&#x27;&#123;gsub(&quot;:&quot;,&quot;$&quot;);print $0 &#125;&#x27;</span> 123.txt </span><br><span class="line">Zeng Laoshi       133411023        $110$100<span class="variable">$75</span></span><br><span class="line">Deng Ziqi            44002231        $250$10<span class="variable">$88</span></span><br><span class="line">Zhang Xinyu      877623568      $120$300<span class="variable">$200</span></span><br><span class="line">Gu Linazha         11029987         $120$30<span class="variable">$79</span></span><br><span class="line">Di Lireba             253097001      $220$100<span class="variable">$200</span></span><br><span class="line">Jiang Shuying    535432779       $309$10<span class="variable">$2</span></span><br><span class="line">Ju Jingyi             68005178         $130$280<span class="variable">$385</span></span><br><span class="line">Zhang Yuqi         376788757       $500$290<span class="variable">$33</span></span><br><span class="line">Wen Zhang         259872003      $100$200<span class="variable">$300</span></span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>Linux基础总结版</h></span></div><div class="post-copyright__type"><span class="post-copyright-info"><a href="https://lukme.top/posts/4c7367cf.html">https://lukme.top/posts/4c7367cf.html</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a"><h>作者</h><div class="post-copyright-cc-info"><h>Luay🥝</h></div></div><div class="post-copyright-c"><h>发布于</h><div class="post-copyright-cc-info"><h>2024-07-25</h></div></div><div class="post-copyright-u"><h>更新于</h><div class="post-copyright-cc-info"><h>2024-10-13</h></div></div><div class="post-copyright-c"><h>许可协议</h><div class="post-copyright-cc-info"><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY-NC-SA 4.0" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></div></div></div></div></div><div class="tag_share"><div class="post-meta__tag-list"></div></div><link rel="stylesheet" href="/css/coin.css" media="defer" onload="this.media='all'"/><div class="post-reward"><button class="tip-button reward-button"><span class="tip-button__text">投喂作者</span><div class="coin-wrapper"><div class="coin"><div class="coin__middle"></div><div class="coin__back"></div><div class="coin__front"></div></div></div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://cos.lukme.top/lukme/wechat.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/lukme/wechat.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://cos.lukme.top/lukme/alipay.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/lukme/alipay.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></button></div><audio id="coinAudio" src="https://npm.elemecdn.com/akilar-candyassets@1.0.36/audio/aowu.m4a"></audio><script defer="defer" src="/js/coin.js"></script><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/d58f4e80.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/lukme/article_cover/cover_7.webp" onerror="onerror=null;src='/assets/r2.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">22.定时任务</div></div></a></div><div class="next-post pull-right"><a href="/posts/2013454d.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/lukme/article_cover/cover_1.webp" onerror="onerror=null;src='/assets/r2.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Markdown语法与外挂标签写法汇总</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><svg class="meta_icon" style="width:22px;height:22px;position:relative;top:5px"><use xlink:href="#icon-mulu1"></use></svg><span style="font-weight:bold">目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%80%901%E3%80%91Linux%E5%9F%BA%E7%A1%80"><span class="toc-text">【1】Linux基础</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%BD%91%E7%BB%9C%E7%9B%B8%E5%85%B3"><span class="toc-text">1.网络相关</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%9A%84%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%BC%8F"><span class="toc-text">1.虚拟机的网络模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%BD%91%E5%8D%A1%E9%85%8D%E7%BD%AE"><span class="toc-text">2.虚拟机网卡配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E7%B3%BB%E7%BB%9F%E5%86%85%E9%85%8D%E7%BD%AE%E7%BD%91%E5%8D%A1"><span class="toc-text">3.系统内配置网卡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-Xshell%E8%BF%9E%E6%8E%A5%E4%B8%8D%E4%B8%8A%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%8E%92%E6%9F%A5"><span class="toc-text">4.Xshell连接不上虚拟机排查</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-C6-C7%E5%AE%89%E8%A3%85"><span class="toc-text">2.C6 &amp; C7安装</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-Centos-6-%E5%AE%89%E8%A3%85"><span class="toc-text">1. Centos 6 安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E9%85%8D%E7%BD%AECentOS6%E7%BD%91%E5%8D%A1"><span class="toc-text">2.配置CentOS6网卡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-CentOS7%E5%AE%89%E8%A3%85"><span class="toc-text">3.CentOS7安装</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%8F%98%E9%87%8F"><span class="toc-text">3.变量</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#BASH%E7%89%B9%E6%80%A7"><span class="toc-text">BASH特性</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%8D%95%E7%94%A8%E6%88%B7%E6%A8%A1%E5%BC%8F"><span class="toc-text">4.单用户模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%BF%AE%E6%94%B9%E5%AF%86%E7%A0%81"><span class="toc-text">1.修改密码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%BF%AE%E6%94%B9%E8%BF%90%E8%A1%8C%E7%BA%A7%E5%88%AB"><span class="toc-text">2.修改运行级别</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%80%902%E3%80%91%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95%E7%AE%A1%E7%90%86"><span class="toc-text">【2】文件和目录管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-text">1.目录结构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0-dev%E7%9B%AE%E5%BD%95"><span class="toc-text">① &#x2F;dev目录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1-etc%E7%9B%AE%E5%BD%95"><span class="toc-text">② &#x2F;etc目录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A2-etc%E5%85%B6%E5%AE%83%E7%9B%AE%E5%BD%95-%E4%BA%86%E8%A7%A3"><span class="toc-text">③ &#x2F;etc其它目录     *了解</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A3-proc%E5%92%8C-var%E7%9B%AE%E5%BD%95"><span class="toc-text">④ &#x2F;proc和&#x2F;var目录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A4-%E5%85%B6%E5%AE%83%E7%9B%AE%E5%BD%95"><span class="toc-text">⑤ 其它目录</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%9F%A5%E7%9C%8B%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4"><span class="toc-text">2.查看相关命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0-cat"><span class="toc-text">① cat</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1-tail-head"><span class="toc-text">② tail &amp; head</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A2-more-less"><span class="toc-text">③ more &amp; less</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A3-grep"><span class="toc-text">④ grep</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A4-ls"><span class="toc-text">⑤ ls</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A5-tree"><span class="toc-text">⑥ tree</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%A2%9E%E5%88%A0%E6%94%B9%E6%93%8D%E4%BD%9C"><span class="toc-text">3.增删改操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0-cp"><span class="toc-text">① cp</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1-mv"><span class="toc-text">② mv</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A2-rm"><span class="toc-text">③ rm</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A3-touch"><span class="toc-text">④ touch</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A4-mkdir"><span class="toc-text">⑤ mkdir</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A5-tr-%E6%9B%BF%E6%8D%A2"><span class="toc-text">⑥ tr 替换</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86%E5%91%BD%E4%BB%A4"><span class="toc-text">4.文件处理命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0-sort"><span class="toc-text">① sort</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1-uniq-%E5%8E%BB%E9%87%8D"><span class="toc-text">② uniq 去重</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A2-cut-%E6%88%AA%E5%8F%96"><span class="toc-text">③ cut 截取</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A3-wc-%E7%BB%9F%E8%AE%A1"><span class="toc-text">④ wc 统计</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A4-wget-curl-%E4%B8%8B%E8%BD%BD"><span class="toc-text">⑤ wget &amp; curl 下载</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E6%96%87%E4%BB%B6%E5%B1%9E%E6%80%A7"><span class="toc-text">6.文件属性</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0-%E6%9F%A5%E7%9C%8B%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B"><span class="toc-text">① 查看文件类型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1-%E7%B3%BB%E7%BB%9F%E9%93%BE%E6%8E%A5%E6%96%87%E4%BB%B6"><span class="toc-text">② 系统链接文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A2-%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96%E6%B5%81%E7%A8%8B"><span class="toc-text">③ 文件读取流程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A3-block%E4%BB%8B%E7%BB%8D"><span class="toc-text">④ block介绍</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A4-%E8%BD%AF%E9%93%BE%E6%8E%A5"><span class="toc-text">⑤ 软链接</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A5-%E7%A1%AC%E9%93%BE%E6%8E%A5"><span class="toc-text">⑥ 硬链接</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A6-%E8%BD%AF%E7%A1%AC%E9%93%BE%E6%8E%A5%E5%8C%BA%E5%88%AB"><span class="toc-text">⑦ 软硬链接区别</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-vim%E7%BC%96%E8%BE%91%E5%99%A8"><span class="toc-text">3.vim编辑器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F"><span class="toc-text">1.命令模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%BC%96%E8%BE%91%E6%A8%A1%E5%BC%8F"><span class="toc-text">2.编辑模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%9C%AB%E8%A1%8C%E6%A8%A1%E5%BC%8F"><span class="toc-text">3.末行模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E8%A7%86%E5%9B%BE%E6%A8%A1%E5%BC%8F"><span class="toc-text">4.视图模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-vim%E6%89%A9%E5%B1%95%E7%9F%A5%E8%AF%86"><span class="toc-text">5.vim扩展知识</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-vim%E5%86%99%E5%85%A5%E6%B5%81%E7%A8%8B"><span class="toc-text">6.vim写入流程</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-find%E5%91%BD%E4%BB%A4"><span class="toc-text">4. find命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%A0%B9%E6%8D%AE%E6%96%87%E4%BB%B6%E5%90%8D%E6%9F%A5%E6%89%BE"><span class="toc-text">1.根据文件名查找</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%A0%B9%E6%8D%AE%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B%E6%9F%A5%E6%89%BE"><span class="toc-text">2.根据文件类型查找</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%A0%B9%E6%8D%AE%E6%96%87%E4%BB%B6%E5%A4%A7%E5%B0%8F%E6%9F%A5%E6%89%BE"><span class="toc-text">3.根据文件大小查找</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E6%A0%B9%E6%8D%AE%E6%96%87%E4%BB%B6%E7%9A%84%E6%97%B6%E9%97%B4%E6%9F%A5%E6%89%BE"><span class="toc-text">4.根据文件的时间查找</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E6%A0%B9%E6%8D%AE%E7%94%A8%E6%88%B7%E6%9F%A5%E6%89%BE"><span class="toc-text">5.根据用户查找</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E6%A0%B9%E6%8D%AE%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90%E6%9F%A5%E6%89%BE"><span class="toc-text">6.根据文件权限查找</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-%E6%A0%B9%E6%8D%AE%E6%B7%B1%E5%BA%A6%E6%9F%A5%E6%89%BE"><span class="toc-text">7.根据深度查找</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-%E5%8A%A8%E4%BD%9C"><span class="toc-text">8.动作</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%80%903%E3%80%91%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86"><span class="toc-text">【3】用户管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86%E4%BF%A1%E6%81%AF"><span class="toc-text">1.用户管理信息</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0-%E7%94%A8%E6%88%B7%E6%9F%A5%E7%9C%8B%E5%91%BD%E4%BB%A4"><span class="toc-text">① 用户查看命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1-etc-passwd"><span class="toc-text">② &#x2F;etc&#x2F;passwd</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A2-etc-shadow"><span class="toc-text">③ etc&#x2F;shadow</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86"><span class="toc-text">2.用户管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0-%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E6%A1%88%E4%BE%8B"><span class="toc-text">① 创建用户案例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1-%E7%94%A8%E6%88%B7%E7%BA%A6%E5%AE%9A%E5%92%8C%E8%A7%84%E8%8C%83"><span class="toc-text">② 用户约定和规范</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A2-%E4%BF%AE%E6%94%B9%E5%AF%86%E7%A0%81-chage"><span class="toc-text">③ 修改密码 chage</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A3-%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%EF%BC%88%E5%A2%9E%EF%BC%89"><span class="toc-text">④ 创建用户（增）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A4-%E4%BF%AE%E6%94%B9%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF-%E6%94%B9%EF%BC%89"><span class="toc-text">⑤ 修改用户信息(改）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A5-%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7%EF%BC%88%E5%88%A0%EF%BC%89"><span class="toc-text">⑥ 删除用户（删）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A6-%E7%94%A8%E6%88%B7%E6%89%A9%E5%B1%95%E7%9F%A5%E8%AF%86"><span class="toc-text">⑦ 用户扩展知识</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A7%E7%94%A8%E6%88%B7%E5%AF%86%E7%A0%81%E7%AE%A1%E7%90%86"><span class="toc-text">⑧用户密码管理</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%94%A8%E6%88%B7%E7%BB%84%E7%AE%A1%E7%90%86"><span class="toc-text">3.用户组管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%84%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4"><span class="toc-text">组相关命令</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E7%94%A8%E6%88%B7%E5%88%87%E6%8D%A2-%E6%8F%90%E6%9D%83"><span class="toc-text">4.用户切换 &amp; 提权</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0%E7%94%A8%E6%88%B7%E5%88%87%E6%8D%A2"><span class="toc-text">①用户切换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1%E7%94%A8%E6%88%B7%E8%BA%AB%E4%BB%BD%E6%8F%90%E6%9D%83"><span class="toc-text">②用户身份提权</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%80%904%E3%80%91%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86"><span class="toc-text">【4】权限管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%9F%BA%E6%9C%AC%E6%9D%83%E9%99%90"><span class="toc-text">1.基本权限</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0-%E4%BF%AE%E6%94%B9%E6%9D%83%E9%99%90%E5%91%BD%E4%BB%A4"><span class="toc-text">① 修改权限命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1-%E6%9D%83%E9%99%90%E5%AF%B9%E6%96%87%E4%BB%B6%E7%9A%84%E5%BD%B1%E5%93%8D"><span class="toc-text">② 权限对文件的影响</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A2-%E6%9D%83%E9%99%90%E5%AF%B9%E7%9B%AE%E5%BD%95%E7%9A%84%E5%BD%B1%E5%93%8D"><span class="toc-text">③ 权限对目录的影响</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%89%B9%E6%AE%8A%E6%9D%83%E9%99%90"><span class="toc-text">2.特殊权限</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#SUID"><span class="toc-text">SUID</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SGID"><span class="toc-text">SGID</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SBIT"><span class="toc-text">SBIT</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#chattr%E6%9D%83%E9%99%90"><span class="toc-text">chattr权限</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E8%BF%9B%E7%A8%8B%E6%8E%A9%E7%A0%81umask"><span class="toc-text">3.进程掩码umask</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%96%87%E4%BB%B6%E5%B1%9E%E4%B8%BB%E5%B1%9E%E7%BB%84%E4%BF%AE%E6%94%B9"><span class="toc-text">4.文件属主属组修改</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%80%905%E3%80%91%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-text">【5】重定向</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%87%8D%E5%AE%9A%E5%90%91%E4%BD%BF%E7%94%A8"><span class="toc-text">1.重定向使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%BE%93%E5%85%A5%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-text">2.输入重定向</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E4%B8%A4%E6%9D%A1%E5%91%BD%E4%BB%A4%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-text">3.两条命令重定向</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E7%AE%A1%E9%81%93%E6%8A%80%E6%9C%AF"><span class="toc-text">4.管道技术</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-xargs%E4%BC%A0%E5%8F%82"><span class="toc-text">5.xargs传参</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%80%906%E3%80%91%E6%96%87%E4%BB%B6%E8%A7%A3%E5%8E%8B%E7%BC%A9"><span class="toc-text">【6】文件解压缩</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%B8%B8%E8%A7%81%E5%8E%8B%E7%BC%A9%E5%8C%85%E7%B1%BB%E5%9E%8B"><span class="toc-text">1.常见压缩包类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%8E%8B%E7%BC%A9%E8%A7%A3%E5%8E%8B%E5%91%BD%E4%BB%A4%E2%80%94gzip"><span class="toc-text">2.压缩解压命令—gzip</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%8E%8B%E7%BC%A9%E8%A7%A3%E5%8E%8B%E5%91%BD%E4%BB%A4%E2%80%94zip"><span class="toc-text">3.压缩解压命令—zip</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%8E%8B%E7%BC%A9%E8%A7%A3%E5%8E%8B%E5%91%BD%E4%BB%A4%E2%80%94tar"><span class="toc-text">4.压缩解压命令—tar</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%80%907%E3%80%91%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85"><span class="toc-text">【7】软件安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-rpm%E5%8C%85"><span class="toc-text">1.rpm包</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E8%8E%B7%E5%8F%96RPM%E5%8C%85"><span class="toc-text">1. 获取RPM包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-RPM%E5%8C%85%E7%AE%A1%E7%90%86"><span class="toc-text">2.RPM包管理</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0-%E5%AE%89%E8%A3%85"><span class="toc-text">① 安装</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1-%E6%9F%A5%E8%AF%A2"><span class="toc-text">② 查询</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A2%E5%8D%B8%E8%BD%BD"><span class="toc-text">③卸载</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A3%E5%8D%87%E7%BA%A7RPM%E5%8C%85"><span class="toc-text">④升级RPM包</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-yum%E5%B7%A5%E5%85%B7"><span class="toc-text">2.yum工具</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0-%E6%8D%A2%E6%BA%90"><span class="toc-text">① 换源</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1-yum%E7%AE%A1%E7%90%86%E5%91%BD%E4%BB%A4"><span class="toc-text">② yum管理命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A2-yum%E5%AE%89%E8%A3%85%E5%91%BD%E4%BB%A4"><span class="toc-text">③ yum安装命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A3-yum%E9%87%8D%E8%A3%85-%E6%9B%B4%E6%96%B0-%E5%88%A0%E9%99%A4"><span class="toc-text">④ yum重装&#x2F;更新&#x2F;删除</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A3-yum%E9%80%86%E5%90%91%E6%9F%A5%E8%AF%A2-%E7%BC%93%E5%AD%98"><span class="toc-text">④ yum逆向查询&#x2F;缓存</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A4-%E7%88%AC%E5%8F%96rpm%E5%8C%85"><span class="toc-text">⑤ 爬取rpm包</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-yum%E6%96%87%E4%BB%B6-%E5%91%BD%E4%BB%A4"><span class="toc-text">3.yum文件&amp;命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0-yum%E7%A8%8B%E5%BA%8F%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">① yum程序的配置文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1yum%E7%BB%84%E5%91%BD%E4%BB%A4"><span class="toc-text">②yum组命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A2-yum%E5%8E%86%E5%8F%B2%E5%91%BD%E4%BB%A4"><span class="toc-text">③ yum历史命令</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%88%B6%E4%BD%9Cyum%E4%BB%93%E5%BA%93"><span class="toc-text">4.制作yum仓库</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0-%E5%88%B6%E4%BD%9C%E6%9C%AC%E5%9C%B0yum%E4%BB%93%E5%BA%93"><span class="toc-text">① 制作本地yum仓库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1-%E5%88%B6%E4%BD%9C%E8%BF%9C%E7%A8%8Byum%E4%BB%93%E5%BA%93"><span class="toc-text">② 制作远程yum仓库</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#ftp%E5%88%B6%E4%BD%9C%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93"><span class="toc-text">ftp制作远程仓库</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#nginx%E5%88%B6%E4%BD%9C%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93"><span class="toc-text">nginx制作远程仓库</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%80%908%E3%80%91%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86"><span class="toc-text">【8】进程管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86%E5%91%BD%E4%BB%A4"><span class="toc-text">1.进程管理命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0-ps%E5%91%BD%E4%BB%A4%EF%BC%88%E9%9D%99%E6%80%81%EF%BC%89"><span class="toc-text">① ps命令（静态）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1-stat%E5%91%BD%E4%BB%A4"><span class="toc-text">② stat命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A2-%E5%86%85%E5%AD%98-%E7%AB%AF%E5%8F%A3"><span class="toc-text">③ 内存&#x2F;端口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A3-ps%E5%85%B6%E4%BB%96%E9%80%89%E9%A1%B9"><span class="toc-text">④ ps其他选项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A4-top%EF%BC%88%E5%8A%A8%E6%80%81%E5%91%BD%E4%BB%A4%EF%BC%89"><span class="toc-text">⑤ top（动态命令）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A5-top%E5%91%BD%E4%BB%A4%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">⑥ top命令的使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A6-%E4%B8%AD%E6%96%AD"><span class="toc-text">⑦ 中断</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A7-kill%E4%BF%A1%E5%8F%B7%E7%AE%A1%E7%90%86"><span class="toc-text">⑧ kill信号管理</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%BC%98%E5%85%88%E7%BA%A7-%E8%B4%9F%E8%BD%BD"><span class="toc-text">2.优先级&amp;负载</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E8%BF%9B%E7%A8%8B%E4%BC%98%E5%85%88%E7%BA%A7"><span class="toc-text">1.进程优先级</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-Linux%E5%90%8E%E5%8F%B0%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86"><span class="toc-text">2.Linux后台进程管理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E7%B3%BB%E7%BB%9F%E5%B9%B3%E5%9D%87%E8%B4%9F%E8%BD%BD"><span class="toc-text">3.系统平均负载</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-CPU%E5%AF%B9%E8%B4%9F%E8%BD%BD%E5%BD%B1%E5%93%8D"><span class="toc-text">4.CPU对负载影响</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E7%A3%81%E7%9B%98IO%E5%AF%B9%E8%B4%9F%E8%BD%BD%E5%BD%B1%E5%93%8D"><span class="toc-text">5.磁盘IO对负载影响</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%AF%B9%E8%B4%9F%E8%BD%BD%E5%BD%B1%E5%93%8D"><span class="toc-text">6.多进程对负载影响</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%B3%BB%E7%BB%9F%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B"><span class="toc-text">3.系统启动流程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-Centos6%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B"><span class="toc-text">1.Centos6启动流程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%B3%BB%E7%BB%9F%E5%85%B3%E6%9C%BA%E5%91%BD%E4%BB%A4"><span class="toc-text">2.系统关机命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%8D%95%E7%94%A8%E6%88%B7%E6%A8%A1%E5%BC%8F"><span class="toc-text">3.单用户模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-CentOS7%E5%90%AF%E5%8A%A8%E9%A1%BA%E5%BA%8F"><span class="toc-text">4.CentOS7启动顺序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-CentOS7%E5%8D%95%E7%94%A8%E6%88%B7%E6%A8%A1%E5%BC%8F"><span class="toc-text">5.CentOS7单用户模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E4%BF%AE%E6%94%B9%E9%BB%98%E8%AE%A4%E8%BF%90%E8%A1%8C%E7%BA%A7%E5%88%AB"><span class="toc-text">6.修改默认运行级别</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%95%91%E6%8F%B4%E6%A8%A1%E5%BC%8F"><span class="toc-text">4.救援模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-MBR%E5%BC%95%E5%AF%BC%E8%A2%AB%E7%A0%B4%E5%9D%8F%E8%A7%A3%E5%86%B3"><span class="toc-text">1.MBR引导被破坏解决</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-grub%E8%8F%9C%E5%8D%95%E8%AF%AF%E5%88%A0%E8%A7%A3%E5%86%B3"><span class="toc-text">2.grub菜单误删解决</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E7%B3%BB%E7%BB%9F%E6%8D%9F%E5%9D%8F%E6%8B%B7%E8%B4%9D%E6%96%87%E4%BB%B6"><span class="toc-text">3.系统损坏拷贝文件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-Systemd-%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86"><span class="toc-text">5.Systemd 进程管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#systemd%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4"><span class="toc-text">systemd相关命令</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1"><span class="toc-text">6.定时任务</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E8%AF%AD%E6%B3%95"><span class="toc-text">1.定时任务语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-crontab%E5%91%BD%E4%BB%A4%E9%80%89%E9%A1%B9"><span class="toc-text">2.crontab命令选项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-crontab%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">3.crontab注意事项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E2%80%94%E5%81%9A%E5%A4%87%E4%BB%BD"><span class="toc-text">4.定时任务—做备份</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1%E8%B0%83%E8%AF%95%E6%80%9D%E8%B7%AF"><span class="toc-text">5.计划任务调试思路</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E4%BD%BF%E7%94%A8%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E5%8F%91%E9%82%AE%E4%BB%B6"><span class="toc-text">6.使用定时任务发邮件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E5%AE%9E%E4%BE%8B"><span class="toc-text">7.定时任务实例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E4%BF%AE%E6%94%B9%E7%BD%91%E5%8D%A1%E5%90%8D"><span class="toc-text">7.修改网卡名</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%80%909%E3%80%91%E4%B8%89%E5%89%91%E5%AE%A2"><span class="toc-text">【9】三剑客</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-text">正则表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%AD%A3%E5%88%99%E7%AC%A6%E5%8F%B7"><span class="toc-text">1. 正则符号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%A9%E5%B1%95%E6%AD%A3%E5%88%99"><span class="toc-text">扩展正则</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%AD%A3%E5%88%99-%E9%80%9A%E9%85%8D%E7%AC%A6"><span class="toc-text">2.正则&amp;通配符</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E5%89%91%E5%AE%A2"><span class="toc-text">三剑客</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#grep%E4%B8%93%E5%8C%BA"><span class="toc-text">grep专区</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6"><span class="toc-text">字符</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%92%8C-%E8%A1%A8%E6%88%96%E8%80%85%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">| 和[ ]表或者的区别</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-text">( )使用</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sed%E5%91%BD%E4%BB%A4"><span class="toc-text">sed命令</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#sed-%E6%9F%A5%E6%89%BEp"><span class="toc-text">sed-查找p</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#sed-%E5%88%A0%E9%99%A4d"><span class="toc-text">sed-删除d</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#sed-%E5%A2%9E%E5%8A%A0"><span class="toc-text">sed-增加</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#sed-%E6%9B%BF%E6%8D%A2s"><span class="toc-text">sed-替换s</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#sed-%E5%90%8E%E5%90%91%E5%BC%95%E7%94%A8"><span class="toc-text">sed-后向引用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#awk%E5%91%BD%E4%BB%A4"><span class="toc-text">awk命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%9F%A5%E6%89%BE-%E8%BF%87%E6%BB%A4"><span class="toc-text">1.查找&#x2F;过滤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-awk%E5%8F%96%E5%88%97"><span class="toc-text">2.awk取列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-awk%E6%A8%A1%E5%BC%8F-%E5%8A%A8%E4%BD%9C"><span class="toc-text">3.awk模式+动作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%AF%B9%E6%AF%94"><span class="toc-text">4.字符串对比</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-awk%E6%9B%BF%E6%8D%A2"><span class="toc-text">5.awk替换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-text">&#x3D;&#x3D;总结&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF-%E5%88%A4%E6%96%AD"><span class="toc-text">循环&amp;判断</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#awk%E6%AD%A3%E5%88%99"><span class="toc-text">awk正则</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A%E6%A8%A1%E5%BC%8FBEGIN-END"><span class="toc-text">特殊模式BEGIN{} END{}</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#awk%E6%95%B0%E7%BB%84"><span class="toc-text">awk数组</span></a></li></ol></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background-color: transparent;"><div id="footer-wrap"><div id="ft"><div class="ft-item-1"><div class="t-top"><div class="t-t-l"><p class="ft-t t-l-t">格言🧬</p><div class="bg-ad"><div>再看看那个光点，它就在这里，这是家园，这是我们 —— 你所爱的每一个人，你认识的一个人，你听说过的每一个人，曾经有过的每一个人，都在它上面度过他们的一生✨</div><div class="btn-xz-box"><a class="btn-xz" target="_blank" rel="noopener" href="https://stellarium.org/">点击开启星辰之旅</a></div></div></div><div class="t-t-r"><p class="ft-t t-l-t">猜你想看💡</p><ul class="ft-links"><li><a href="/posts/eec9786.html">魔改指南</a><a href="/box/nav/">网址导航</a></li><li><a href="/social/link/">我的朋友</a><a href="/comments/">留点什么</a></li><li><a href="/personal/about/">关于作者</a><a href="/archives/">文章归档</a></li><li><a href="/categories/">文章分类</a><a href="/tags/">文章标签</a></li><li><a href="/box/Gallery/">我的画廊</a><a href="/personal/bb/">我的唠叨</a></li><li><a href="/site/time/">建设进程</a><a href="/site/census/">网站统计</a></li></ul></div></div></div><div class="ft-item-2"><p class="ft-t">推荐友链⌛</p><div class="ft-img-group"><div class="img-group-item"><a target="_blank" rel="noopener" href="https://www.fomal.cc/" title="Fomalhaut🥝"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.bitiful.net/img/avatar.webp" alt=""/></a></div></div></div></div><div class="copyright"><span><b>&copy;2024</b></span><span><b>&nbsp;&nbsp;By Luay🥝</b></span></div><div id="workboard"></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" title="博客框架为Hexo_v6.3.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.bitiful.net/badge/Frame-Hexo-blue.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" title="主题版本Butterfly_v4.3.1"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.bitiful.net/badge/Theme-Butterfly-6513df.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px" title="本站采用多线部署，主线路托管于Vercel"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.bitiful.com/badge/Hosted-Vercel-brightgreen.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://user.51.la/" style="margin-inline:5px" title="本站数据分析得益于51la技术支持"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.bitiful.com/badge/Analytics-51la-3db1eb.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://beian.miit.gov.cn/" style="margin-inline:5px" title="本站已加入豫ICP豪华套餐，豫ICP备2024091397号"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://luay-1302975046.cos.ap-shanghai.myqcloud.com/lukme/ICP.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" title="本网站源码由Github提供存储仓库"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=" https://sourcebucket.s3.bitiful.net/badge/Source-Github-d021d6.svg" alt=""/></a></p></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><a class="icon-V hidden" onclick="switchNightMode()" title="浅色和深色模式转换"><svg width="25" height="25" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon"></use></svg></a><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button><button class="share" type="button" title="右键模式" onclick="changeMouseMode()"><i class="fas fa-mouse"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog right_side"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button class="share" type="button" title="分享链接" onclick="share()"><i class="fas fa-share-nodes"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i><span id="percent">0<span>%</span></span></button><button id="go-down" type="button" title="直达底部" onclick="btf.scrollToDest(document.body.scrollHeight, 500)"><i class="fas fa-arrow-down"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div class="js-pjax" id="rightMenu"><div class="rightMenu-group rightMenu-small"><a class="rightMenu-item" href="javascript:window.history.back();"><i class="fa fa-arrow-left"></i></a><a class="rightMenu-item" href="javascript:window.history.forward();"><i class="fa fa-arrow-right"></i></a><a class="rightMenu-item" href="javascript:window.location.reload();"><i class="fa fa-refresh"></i></a><a class="rightMenu-item" href="javascript:rmf.scrollToTop();"><i class="fa fa-arrow-up"></i></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-text"><a class="rightMenu-item" href="javascript:rmf.copySelect();"><i class="fa fa-copy"></i><span>复制</span></a><a class="rightMenu-item" href="javascript:window.open(&quot;https://www.baidu.com/s?wd=&quot;+window.getSelection().toString());window.location.reload();"><i class="fa fa-search"></i><span>百度搜索</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-too"><a class="rightMenu-item" href="javascript:window.open(window.getSelection().toString());window.location.reload();"><i class="fa fa-link"></i><span>转到链接</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-paste"><a class="rightMenu-item" href="javascript:rmf.paste()"><i class="fa fa-copy"></i><span>粘贴</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-post"><a class="rightMenu-item" href="#post-comment"><i class="fas fa-comment"></i><span>空降评论</span></a><a class="rightMenu-item" href="javascript:rmf.copyWordsLink()"><i class="fa fa-link"></i><span>复制本文地址</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-to"><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>新窗口打开</span></a><a class="rightMenu-item" id="menu-too" href="javascript:rmf.open()"><i class="fa fa-link"></i><span>转到链接</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>复制链接</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-img"><a class="rightMenu-item" href="javascript:rmf.saveAs()"><i class="fa fa-download"></i><span>保存图片</span></a><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>在新窗口打开</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>复制图片链接</span></a></div><div class="rightMenu-group rightMenu-line"><a class="rightMenu-item" href="javascript:randomPost()"><i class="fa fa-paper-plane"></i><span>随便逛逛</span></a><a class="rightMenu-item" href="javascript:switchNightMode();"><i class="fa fa-moon"></i><span>昼夜切换</span></a><a class="rightMenu-item" href="/personal/about/"><i class="fa fa-info-circle"></i><span>关于博客</span></a><a class="rightMenu-item" href="javascript:toggleWinbox();"><i class="fas fa-cog"></i><span>美化设置</span></a><a class="rightMenu-item" href="javascript:rmf.fullScreen();"><i class="fas fa-expand"></i><span>切换全屏</span></a><a class="rightMenu-item" href="javascript:window.print();"><i class="fa-solid fa-print"></i><span>打印页面</span></a></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.staticfile.org/fancyapps-ui/4.0.31/fancybox.umd.min.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/instant.page/5.1.0/instantpage.min.js" type="module"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/vanilla-lazyload/17.3.1/lazyload.iife.min.js"></script><script src="/js/search/local-search.js"></script><script async="async">var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())
setTimeout(function(){preloader.endLoading();}, 5000);
document.getElementById('loading-box').addEventListener('click',()=> {preloader.endLoading()})</script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.2
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        insertScript: [200, () => {
          document.querySelectorAll('mjx-container:not\([display]\)').forEach(node => {
            const target = node.parentNode
            if (target.nodeName.toLowerCase() === 'li') {
              target.parentNode.classList.add('has-jax')
            } else {
              target.classList.add('has-jax')
            }
          });
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script><script>(()=>{
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://luay.lukeme.top/',
      region: '',
      onCommentLoaded: function () {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://luay.lukeme.top/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      countELement.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const runFn = () => {
    init()
    
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') {
      setTimeout(runFn,0)
      return
    } 
    getScript('https://cdn.staticfile.org/twikoo/1.6.8/twikoo.all.min.js').then(runFn)
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><script src="https://cdn.staticfile.org/jquery/3.6.3/jquery.min.js"></script><script async src="https://cdn1.tianli0.top/npm/vue@2.6.14/dist/vue.min.js"></script><script async src="https://cdn1.tianli0.top/npm/element-ui@2.15.6/lib/index.js"></script><script async src="https://cdn.bootcdn.net/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script><script defer type="text/javascript" src="https://cdn1.tianli0.top/npm/sweetalert2@8.19.0/dist/sweetalert2.all.js"></script><script async src="//npm.elemecdn.com/pace-js@1.2.4/pace.min.js"></script><script defer src="https://cdn1.tianli0.top/gh/nextapps-de/winbox/dist/winbox.bundle.min.js"></script><script async src="//at.alicdn.com/t/c/font_3586335_hsivh70x0fm.js"></script><script async src="//at.alicdn.com/t/c/font_3636804_gr02jmjr3y9.js"></script><script async src="//at.alicdn.com/t/c/font_3612150_kfv55xn3u2g.js"></script><script async src="https://cdn.wpon.cn/2022-sucai/Gold-ingot.js"></script><canvas id="universe"></canvas><canvas id="snow"></canvas><script defer src="/js/fomal.js"></script><script id="click-heart" src="https://cdnjs.cloudflare.com/ajax/libs/butterfly-extsrc/1.1.3/click-heart.min.js" async="async" mobile="false"></script><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.js"></script><script src="https://cdn1.tianli0.top/npm/js-heo@1.0.12/metingjs/Meting.min.js"></script><script src="https://lib.baomitu.com/pjax/0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show","#web_bg",".js-pjax","#bibi","body > title","#app","#tag-echarts","#posts-echart","#categories-echarts"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --> <script data-pjax>if(document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    var parent = document.getElementById('recent-posts');
    var child = '<div class="recent-post-item" style="width:100%;height: auto"><div id="catalog_magnet"><div class="magnet_item"><a class="magnet_link" href="https://lukme.top/categories/监控/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">🍡 Luayの系统监控 (9)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://lukme.top/categories/MySQL/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">🍼 Luayの数据库资源 (12)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://lukme.top/categories/kubernetes/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">🍉 Luayのk8s集合 (3)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://lukme.top/categories/ELK日志收集/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">🍟 Luayの日志收集分析 (3)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item" style="visibility: hidden"></div><div class="magnet_item" style="visibility: hidden"></div><a class="magnet_link_more"  href="https://lukme.top/categories/" style="flex:1;text-align: center;margin-bottom: 10px;">查看更多...</a></div></div>';
    console.log('已挂载magnet')
    parent.insertAdjacentHTML("afterbegin",child)}
     </script><style>#catalog_magnet{flex-wrap: wrap;display: flex;width:100%;justify-content:space-between;padding: 10px 10px 0 10px;align-content: flex-start;}.magnet_item{flex-basis: calc(33.333333333333336% - 5px);background: #e9e9e9;margin-bottom: 10px;border-radius: 8px;transition: all 0.2s ease-in-out;}.magnet_item:hover{background: var(--text-bg-hover)}.magnet_link_more{color:#555}.magnet_link{color:black}.magnet_link:hover{color:white}@media screen and (max-width: 600px) {.magnet_item {flex-basis: 100%;}}.magnet_link_context{display:flex;padding: 10px;font-size:16px;transition: all 0.2s ease-in-out;}.magnet_link_context:hover{padding: 10px 20px;}</style>
    <style></style><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/24d869a6.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/lukme/article_cover/cover_9.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-08-03</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/24d869a6.html&quot;);" href="javascript:void(0);" alt="">MySQL语句命令</a><div class="blog-slider__text">MySQL客户端及结构查询语句使用</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/24d869a6.html&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/2013454d.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/lukme/article_cover/cover_1.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-06-06</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/2013454d.html&quot;);" href="javascript:void(0);" alt="">Markdown语法与外挂标签写法汇总</a><div class="blog-slider__text">Markdown语法与外挂标签写法汇总</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/2013454d.html&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/4c7367cf.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/lukme/article_cover/cover_1.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-07-25</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/4c7367cf.html&quot;);" href="javascript:void(0);" alt="">Linux基础总结版</a><div class="blog-slider__text">基础东西都在这里了，学完彻底告别小白。</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/4c7367cf.html&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/f007732d.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cos.lukme.top/lukme/article_cover/cover_8.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-08-31</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/f007732d.html&quot;);" href="javascript:void(0);" alt="">测试</a><div class="blog-slider__text">仅为测试文章</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/f007732d.html&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('已挂载butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = '/';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><div class="js-pjax"><script async="async">var arr = document.getElementsByClassName('recent-post-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '30');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('card-widget');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '30');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script></div><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js"></script><script data-pjax src="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.js"></script><script data-pjax>
  function gitcalendar_injector_config(){
      var parent_div_git = document.getElementById('gitZone');
      var item_html = '<div class="recent-post-item" id="gitcalendarBar" style="width:100%;height:auto;padding:10px;"><style>#git_container{min-height: 320px}@media screen and (max-width:650px) {#git_container{min-height: 0px}}</style><div id="git_loading" style="width:10%;height:100%;margin:0 auto;display: block;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animatetransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animatetransform></path></svg><style>#git_container{display: none;}</style></div><div id="git_container"></div></div>';
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      console.log('已挂载gitcalendar')
      }

    if( document.getElementById('gitZone') && (location.pathname ==='/site/census/'|| '/site/census/' ==='all')){
        gitcalendar_injector_config()
        GitCalendarInit("/api?null",['#d9e0df', '#c6e0dc', '#a8dcd4', '#9adcd2', '#89ded1', '#77e0d0', '#5fdecb', '#47dcc6', '#39dcc3', '#1fdabe', '#00dab9'],'null')
    }
  </script><!-- hexo injector body_end end --></body></html>