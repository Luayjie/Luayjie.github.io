<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>æ­å»ºä¸ªäººäº‘ç›˜</title>
      <link href="/posts/aca79867.html"/>
      <url>/posts/aca79867.html</url>
      
        <content type="html"><![CDATA[<h2 id="ç³»ç»Ÿä»‹ç»">ç³»ç»Ÿä»‹ç»</h2><p>ownCloudæ˜¯ä¸€ä¸ªåŸºäºäº‘è®¡ç®—çš„å¼€æºæ–‡ä»¶å…±äº«å’Œåä½œå¹³å°ï¼Œå®ƒå…è®¸ç”¨æˆ·åœ¨å¤šä¸ªè®¾å¤‡ä¸ŠåŒæ­¥ã€å…±äº«å’Œåä½œæ–‡ä»¶ã€‚</p><p><strong>ä¸»è¦ç‰¹ç‚¹</strong></p><ul><li>ç”¨æˆ·å¯ä»¥å°†ownCloudç§æœ‰äº‘ç›˜ä¸å…¶ä»–è®¾å¤‡åŒæ­¥ï¼Œéšæ—¶éšåœ°è®¿é—®å’Œç®¡ç†æ–‡ä»¶ã€‚</li><li>æ”¯æŒè·¨å¹³å°è®¿é—®ï¼ŒåŒ…æ‹¬Windowsã€Macã€Androidã€iOSã€Linuxç­‰ã€‚</li><li>æä¾›å…¬å…±é“¾æ¥åˆ†äº«åŠŸèƒ½ï¼Œå¯ä»¥è®¾ç½®å¯†ç å’Œè¿‡æœŸæ—¥æœŸï¼Œç¡®ä¿æ–‡ä»¶åˆ†äº«çš„å®‰å…¨æ€§ã€‚</li><li>å›¢é˜Ÿæˆå‘˜å¯ä»¥åœ¨åŒä¸€ä¸ªownCloudç§æœ‰äº‘ç›˜ä¸­å…±äº«å’Œåä½œæ–‡ä»¶ï¼Œæé«˜å›¢é˜Ÿæ•ˆç‡ã€‚</li><li>æ”¯æŒå®æ—¶åä½œï¼Œå¦‚åŒæ—¶ç¼–è¾‘æ–‡æ¡£ã€åˆ›å»ºæ¼”ç¤ºæ–‡ç¨¿ç­‰ã€‚</li><li>ownCloudå¯ä»¥ä½œä¸ºä¸€ä¸ªå¤‡ä»½è§£å†³æ–¹æ¡ˆï¼Œå°†ç”¨æˆ·çš„é‡è¦æ•°æ®å¤‡ä»½åˆ°ç§æœ‰äº‘ç›˜ä¸­ã€‚</li><li>æä¾›ç‰ˆæœ¬æ§åˆ¶åŠŸèƒ½ï¼Œå¯ä»¥æ¢å¤ä¹‹å‰çš„æ–‡ä»¶ç‰ˆæœ¬ï¼Œé˜²æ­¢æ•°æ®ä¸¢å¤±ã€‚</li><li>ownCloudå¯ä»¥ä¸å¤šç§åº”ç”¨ç¨‹åºé›†æˆï¼Œå¦‚OnlyOfficeã€Microsoft 365ã€Collabora Onlineç­‰ï¼Œæ»¡è¶³ç”¨æˆ·çš„ä¸ªæ€§åŒ–éœ€æ±‚ã€‚</li><li>æ”¯æŒHTTPSå’ŒSSLåŠ å¯†ï¼Œç¡®ä¿æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­çš„å®‰å…¨æ€§ã€‚</li><li>æä¾›å¤šå› ç´ è®¤è¯ã€æ–‡ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç†ç­‰å®‰å…¨åŠŸèƒ½ã€‚</li></ul><p><strong>ä½¿ç”¨åœºæ™¯</strong></p><ul><li>ç”¨äºä¸ªäººæ–‡ä»¶åŒæ­¥ã€å¤‡ä»½å’Œåˆ†äº«ã€‚è·¨å¹³å°è®¿é—®ï¼Œæ–¹ä¾¿åœ¨ä¸åŒè®¾å¤‡ä¹‹é—´åˆ‡æ¢ã€‚</li><li>ç”¨äºå›¢é˜Ÿåä½œã€æ–‡ä»¶å…±äº«å’Œç‰ˆæœ¬æ§åˆ¶ã€‚æé«˜å›¢é˜Ÿæ•ˆç‡ï¼Œé™ä½ITæˆæœ¬ã€‚</li><li>ç”¨äºå­¦ç”Ÿä½œä¸šæäº¤ã€æ•™å¸ˆèµ„æºå…±äº«ç­‰ã€‚æä¾›å®‰å…¨ã€å¯é çš„æ–‡ä»¶å­˜å‚¨å’Œåˆ†äº«ç¯å¢ƒ</li></ul><p><strong>æŠ€æœ¯æ¶æ„</strong></p><p>ownCloudé‡‡ç”¨ä¸‰å±‚æ¶æ„ï¼Œå°†å­˜å‚¨ã€åç«¯å’Œå‰ç«¯ç»„ä»¶åˆ†ç¦»ï¼Œé€šè¿‡å®‰å…¨ã€æ˜ç¡®çš„APIè¿›è¡Œé€šä¿¡ã€‚è¿™ç§æ¶æ„ä½¿å¾—ownCloudå…·æœ‰é«˜å¯æ‰©å±•æ€§å’Œçµæ´»æ€§ã€‚</p><p>å¦‚éœ€äº†è§£æ›´å¤šä¿¡æ¯ï¼Œå¯ä»¥è®¿é—®å…¶å®˜æ–¹ç½‘ç«™æˆ–æŸ¥é˜…ç›¸å…³çš„æŠ€æœ¯æ–‡æ¡£ã€‚</p><blockquote><p>å®˜æ–¹ç½‘ç«™</p><p><a href="https://owncloud.com/">https://owncloud.com/</a></p></blockquote><blockquote><p>Dockeré•œåƒ</p><p><a href="https://hub.docker.com/_/owncloud">https://hub.docker.com/_/owncloud</a></p></blockquote><blockquote><p>GitHubåœ°å€</p><p><a href="https://github.com/owncloud/core">https://github.com/owncloud/core</a></p></blockquote><h2 id="å®‰è£…æ•™ç¨‹">å®‰è£…æ•™ç¨‹</h2><p>Dockeréƒ¨ç½²æ“ä½œæ­¥éª¤ï¼šå®‰è£…Dockerã€æ‹‰å–é•œåƒã€å¯åŠ¨å®¹å™¨ã€‚æœ¬ç¯‡åŸºäºCentos7ç³»ç»Ÿæ“ä½œå®‰è£…</p><h3 id="å®‰è£…docker">å®‰è£…docker</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.æ·»åŠ å®˜æ–¹dockeræº</span></span><br><span class="line">[root@docker01 ~]# vim /etc/yum.repos.d/docker-ce.repo </span><br><span class="line">[docker-ce-stable]</span><br><span class="line">name=Docker CE Stable - <span class="variable">$basearch</span></span><br><span class="line">baseurl=https://download.docker.com/linux/centos/<span class="variable">$releasever</span>/<span class="variable">$basearch</span>/stable</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=https://download.docker.com/linux/centos/gpg</span><br><span class="line"></span><br><span class="line"><span class="comment">#2.æ›¿æ¢åä¸ºæºï¼ˆdockerå®˜æ–¹ä¼—æ‰€å‘¨åŸå› ä¸èƒ½è®¿é—®ä»¥åŠä¸‹è½½æ…¢ï¼Œè¿™é‡Œä½¿ç”¨åä¸ºé•œåƒæºï¼‰</span></span><br><span class="line"><span class="built_in">sudo</span> sed -i <span class="string">&#x27;s+download.docker.com+mirrors.huaweicloud.com/docker-ce+&#x27;</span> /etc/yum.repos.d/docker-ce.repo</span><br><span class="line"></span><br><span class="line"><span class="comment">#3.å®‰è£…docker</span></span><br><span class="line">[root@docker01 ~]# yum install -y docker-ce docker-ce-cli containerd.io</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#4.æ›´æ”¹é•œåƒåŠ é€Ÿï¼ˆå¦‚æœå¤±æ•ˆï¼Œä¹Ÿå¯å¾€ä¸Šæ‰¾å…¶ä»–åŠ é€Ÿåœ°å€ï¼‰</span></span><br><span class="line">[root@docker01 ~]# <span class="built_in">tee</span> /etc/docker/daemon.json &lt;&lt;-<span class="string">&#x27;EOF&#x27;</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;dns&quot;</span>: [<span class="string">&quot;8.8.8.8&quot;</span>, <span class="string">&quot;8.8.4.4&quot;</span>],</span><br><span class="line">  <span class="string">&quot;registry-mirrors&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;https://docker.m.daocloud.io&quot;</span>,</span><br><span class="line">    <span class="string">&quot;https://dockerproxy.com&quot;</span>,</span><br><span class="line">    <span class="string">&quot;https://docker.mirrors.ustc.edu.cn&quot;</span>,</span><br><span class="line">    <span class="string">&quot;https://docker.nju.edu.cn&quot;</span>,</span><br><span class="line">    <span class="string">&quot;https://registry.docker-cn.com&quot;</span>,</span><br><span class="line">    <span class="string">&quot;https://docker.mirrors.ustc.edu.cn&quot;</span>,</span><br><span class="line">    <span class="string">&quot;https://hub-mirror.c.163.com&quot;</span>,</span><br><span class="line">    <span class="string">&quot;https://mirror.baidubce.com&quot;</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">[root@docker01 ~]# systemctl daemon-reload</span><br><span class="line">[root@docker01 ~]# systemctl restart docker</span><br></pre></td></tr></table></figure><h3 id="æ‹‰å–é•œåƒ">æ‹‰å–é•œåƒ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ‹‰å–æ•°æ®åº“é•œåƒ</span></span><br><span class="line">[root@docker01 ~]# docker pull mysql</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‹‰å–owncloudé•œåƒ</span></span><br><span class="line">[root@docker01 ~]# docker pull owncloud</span><br></pre></td></tr></table></figure><h3 id="å¯åŠ¨å®¹å™¨">å¯åŠ¨å®¹å™¨</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.åˆ›å»ºmysqlæœåŠ¡ï¼ˆè¿™é‡Œçš„æ•°æ®åº“å¯†ç ä¹Ÿæ˜¯ä½ è®¿é—®äº‘ç›˜çš„å¯†ç ï¼‰</span></span><br><span class="line">[root@docker01 ~]# docker run --name db --<span class="built_in">env</span> MYSQL_ROOT_PASSWORD=luay123 -d --restart=always mysql</span><br><span class="line"></span><br><span class="line">-name  db         ç»™å®¹å™¨èµ·ä¸ªåå­—ï¼Œå¯è‡ªå®šä¹‰</span><br><span class="line">--restart=always  dockeræ¯æ¬¡é‡å¯éƒ½ä¼šå¯åŠ¨è¿™ä¸ªå®¹å™¨</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.åˆ›å»ºä¸€ä¸ªè½¯ä»¶ç›®å½•ï¼Œæ–¹ä¾¿ç®¡ç†owncloudçš„æ•°æ®ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºä½ ä¸Šä¼ çš„å›¾ç‰‡ï¼Œæ–‡ä»¶ç­‰</span></span><br><span class="line">[root@docker01 ~]# <span class="built_in">mkdir</span> /app/owncloud/ -p</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. åˆ›å»ºowncloudæœåŠ¡</span></span><br><span class="line"><span class="comment"># --link mydb:mydbè¡¨ç¤ºè¿æ¥çš„å¦å¤–ä¸€ä¸ªå®¹å™¨mydb</span></span><br><span class="line">[root@docker01 ~]# docker run --name mycloud -p 8081:80 --<span class="built_in">link</span> mydb:mydb -d -v /app/owncloud/:/var/www/html --restart=always owncloud</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.æŸ¥çœ‹è¿è¡ŒçŠ¶æ€  ï¼ˆæ˜¯å¦éƒ½æ˜¯upçŠ¶æ€ï¼Œä¸è¦æœ‰ç«¯å£å†²çªï¼‰</span></span><br><span class="line">[root@web01 ~]# docker ps -a </span><br><span class="line">CONTAINER ID   IMAGE         CREATED          STATUS          PORTS                                   NAMES</span><br><span class="line">273ee893d887   owncloud    6 seconds ago    Up 4 seconds    0.0.0.0:8081-&gt;80/tcp, :::8081-&gt;80/tcp   mycloud</span><br><span class="line">a614a95ec067   mysql       33 minutes ago   Up 33 minutes   3306/tcp, 33060/tcp                     mydb</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.æµè§ˆå™¨è®¿é—®   ä½ çš„ip:8081   ä¾‹å¦‚æˆ‘çš„ipæ˜¯10.0.0.7     é‚£å°±è®¿é—®10.0.0.7:8081    </span></span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ›å»ºç®¡ç†å‘˜è´¦å·</span></span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/image-20241015190649471.png" alt="image-20241015190649471"></p><p><strong>ä½¿ç”¨åˆ›å»ºçš„ç®¡ç†å‘˜è´¦å·ç™»å½•</strong></p><p><img src="https://cos.lukme.top/Pic/image-20241015191024034.png" alt="image-20241015191024034"></p><p><img src="https://cos.lukme.top/Pic/image-20241015191332027.png" alt="image-20241015191332027"></p><h3 id="ç®¡ç†æ–‡ä»¶">ç®¡ç†æ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">è¿˜è®°å¾—æˆ‘ä»¬åˆ›å»ºçš„æ•°æ®æ–‡ä»¶ç›®å½•å—ï¼Ÿ  çœ‹çœ‹æˆ‘ä»¬ä¸Šä¼ çš„å›¾ç‰‡æ˜¯ä¸æ˜¯å°±åœ¨è¿™ğŸ˜</span><br><span class="line"></span><br><span class="line">[root@web01 ~]# ll /app/owncloud/data/admin/files/</span><br><span class="line">-rw-r--r-- 1 33 tape  529735 May  6 14:09 8CE7E8A4D305671B267848D4E720CAE3.jpg</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> çˆ±è°ƒç ” </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¸ªäººäº‘ç›˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>zabbixå¾®ä¿¡å‘Šè­¦</title>
      <link href="/posts/96fcc157.html"/>
      <url>/posts/96fcc157.html</url>
      
        <content type="html"><![CDATA[<p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://developer.work.weixin.qq.com/document/path/99110">https://developer.work.weixin.qq.com/document/path/99110</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">åœ¨ç»ˆç«¯æŸä¸ªç¾¤ç»„æ·»åŠ æœºå™¨äººä¹‹åï¼Œåˆ›å»ºè€…å¯ä»¥åœ¨æœºå™¨äººè¯¦æƒ…é¡µçœ‹åˆ°è¯¥æœºå™¨äººç‰¹æœ‰çš„webhookurlã€‚å¼€å‘è€…å¯ä»¥æŒ‰ä»¥ä¸‹è¯´æ˜å‘è¿™ä¸ªåœ°å€å‘èµ·HTTP POST è¯·æ±‚ï¼Œå³å¯å®ç°ç»™è¯¥ç¾¤ç»„å‘é€æ¶ˆæ¯</span><br><span class="line"><span class="comment">#å‡è®¾webhookæ˜¯   https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=693a91f6-7xxx-4bc4-97a0-0ec2sifa5aaa</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä½¿ç”¨curlå‘½ä»¤å‘æ¶ˆæ¯</span></span><br><span class="line">curl <span class="string">&#x27;https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=693axxx6-7aoc-4bc4-97a0-0ec2sifa5aaa&#x27;</span> \</span><br><span class="line">   -H <span class="string">&#x27;Content-Type: application/json&#x27;</span> \</span><br><span class="line">   -d <span class="string">&#x27;</span></span><br><span class="line"><span class="string">   &#123;</span></span><br><span class="line"><span class="string">    &quot;msgtype&quot;: &quot;text&quot;,</span></span><br><span class="line"><span class="string">    &quot;text&quot;: &#123;</span></span><br><span class="line"><span class="string">        &quot;content&quot;: &quot;hello world&quot;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">   &#125;&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>æ–‡æœ¬ç±»å‹</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;msgtype&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;å¹¿å·ä»Šæ—¥å¤©æ°”ï¼š29åº¦ï¼Œå¤§éƒ¨åˆ†å¤šäº‘ï¼Œé™é›¨æ¦‚ç‡ï¼š60%&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;mentioned_list&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="string">&quot;wangqing&quot;</span><span class="punctuation">,</span><span class="string">&quot;@all&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;mentioned_mobile_list&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="string">&quot;13800001111&quot;</span><span class="punctuation">,</span><span class="string">&quot;@all&quot;</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>å‚æ•°</th><th>æ˜¯å¦å¿…å¡«</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>msgtype</td><td>æ˜¯</td><td>æ¶ˆæ¯ç±»å‹ï¼Œæ­¤æ—¶å›ºå®šä¸ºtext</td></tr><tr><td>content</td><td>æ˜¯</td><td>æ–‡æœ¬å†…å®¹ï¼Œæœ€é•¿ä¸è¶…è¿‡2048ä¸ªå­—èŠ‚ï¼Œå¿…é¡»æ˜¯utf8ç¼–ç </td></tr><tr><td>mentioned_list</td><td>å¦</td><td>useridçš„åˆ—è¡¨ï¼Œæé†’ç¾¤ä¸­çš„æŒ‡å®šæˆå‘˜(@æŸä¸ªæˆå‘˜)ï¼Œ@allè¡¨ç¤ºæé†’æ‰€æœ‰äººï¼Œå¦‚æœå¼€å‘è€…è·å–ä¸åˆ°useridï¼Œå¯ä»¥ä½¿ç”¨mentioned_mobile_list</td></tr><tr><td>mentioned_mobile_list</td><td>å¦</td><td>æ‰‹æœºå·åˆ—è¡¨ï¼Œæé†’æ‰‹æœºå·å¯¹åº”çš„ç¾¤æˆå‘˜(@æŸä¸ªæˆå‘˜)ï¼Œ@allè¡¨ç¤ºæé†’æ‰€æœ‰äºº</td></tr></tbody></table><h3 id="ä½¿ç”¨pythonè°ƒç”¨æ¥å£">ä½¿ç”¨pythonè°ƒç”¨æ¥å£</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.å®‰è£…pythonç¯å¢ƒ</span></span><br><span class="line">[root@zabbix5-server alertscripts]# yum install -y python36-devel</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.å®‰è£…Pythonçš„requestsæ¨¡å—</span></span><br><span class="line">[root@zabbix5-server alertscripts]# pip3 install requests -i https://pypi.tuna.tsinghua.edu.cn/simple</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.ç¼–å†™pythonè„šæœ¬</span></span><br><span class="line">[root@web01 ~]# vim wechat.py</span><br><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"><span class="comment">#-*- coding: utf-8 -*-</span></span><br><span class="line">import requests</span><br><span class="line">import json</span><br><span class="line">import sys</span><br><span class="line">import os</span><br><span class="line">headers = &#123;<span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json;charset=utf-8&#x27;</span>&#125;</span><br><span class="line">api_url = <span class="string">&quot;webhookåœ°å€&quot;</span></span><br><span class="line">def msg(text):</span><br><span class="line">json_text= &#123;</span><br><span class="line"><span class="string">&quot;msgtype&quot;</span>: <span class="string">&quot;text&quot;</span>,</span><br><span class="line"><span class="string">&quot;text&quot;</span>: &#123;</span><br><span class="line"><span class="string">&quot;content&quot;</span>: text</span><br><span class="line">&#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(requests.post(api_url,json.dumps(json_text),headers=headers).content)</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">text = sys.argv[1]</span><br><span class="line">msg(text)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.å°†è„šæœ¬æ”¾åœ¨/usr/lib/zabbix/alertscripts</span></span><br><span class="line">[root@zabbix5-server ~]# vim /usr/lib/zabbix/alertscripts/wechat.py</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.æˆæƒæ‰§è¡Œæƒé™</span></span><br><span class="line">[root@zabbix5-server ~]# <span class="built_in">chmod</span> +x /usr/lib/zabbix/alertscripts/wechat.py</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>æ·»åŠ æŠ¥è­¦åª’ä»‹</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#webç«¯é…ç½®</span></span><br><span class="line">ç®¡ç†&gt;æŠ¥è­¦åª’ä»‹ç±»å‹&gt;åˆ›å»ºåª’ä½“ç±»å‹</span><br><span class="line"></span><br><span class="line">è„šæœ¬å‚æ•°ï¼š&#123;ALERT.MESSAGE&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/QQ_1722843581583.png" alt="QQ_1722843581583"></p><p><img src="https://cos.lukme.top/Pic/QQ_1722843667085.png" alt="QQ_1722843667085"></p><p><strong>æ·»åŠ åŠ¨ä½œ</strong></p><p><img src="https://cos.lukme.top/Pic/QQ_1722843783104.png" alt="QQ_1722843783104"></p><p><img src="https://cos.lukme.top/Pic/QQ_1722843908351.png" alt="QQ_1722843908351"></p><p><img src="https://cos.lukme.top/Pic/QQ_1722844043228.png" alt="QQ_1722844043228"></p><p><img src="https://cos.lukme.top/Pic/QQ_1722844217316.png" alt="QQ_1722844217316"></p><p><strong>æ·»åŠ æ”¶ä»¶äºº</strong></p><p><img src="https://cos.lukme.top/Pic/QQ_1722844455876.png" alt="QQ_1722844455876"></p><h3 id="ä½¿ç”¨shellè„šæœ¬è°ƒç”¨æ¥å£">ä½¿ç”¨shellè„šæœ¬è°ƒç”¨æ¥å£</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.ç¼–å†™shellè„šæœ¬åœ¨æŒ‡å®šç›®å½•ä¸‹</span></span><br><span class="line">[root@zabbix5-server alertscripts]# vim /usr/lib/zabbix/alertscripts/wechat.sh</span><br><span class="line">[root@zabbix5-server alertscripts]# <span class="built_in">cat</span> wechat.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line">web_hook=<span class="string">&quot;https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=96462ac7-122d-4f51-946e-694a4c11d2ed&quot;</span></span><br><span class="line">headers=<span class="string">&quot;Content-Type: application/json&quot;</span></span><br><span class="line">json_file=<span class="string">&quot;/usr/lib/zabbix/alertscripts/msg.json&quot;</span></span><br><span class="line">/bin/cat &gt; <span class="variable">$&#123;json_file&#125;</span> &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">&quot;msgtype&quot;: &quot;text&quot;,</span></span><br><span class="line"><span class="string">&quot;text&quot;: &#123;</span></span><br><span class="line"><span class="string">&quot;content&quot;: &quot;$1&quot;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line">/usr/bin/curl <span class="string">&quot;<span class="variable">$&#123;web_hook&#125;</span>&quot;</span> \</span><br><span class="line">-H <span class="string">&quot;<span class="variable">$&#123;headers&#125;</span>&quot;</span> \</span><br><span class="line">-d <span class="string">&quot;<span class="subst">$(cat $&#123;json_file&#125;)</span>&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#2.åˆ›å»ºä¸€ä¸ªjsonæ–‡ä»¶</span></span><br><span class="line">[root@zabbix5 ~]#vim /usr/lib/zabbix/alertscripts/msg.json</span><br><span class="line">&#123;</span><br><span class="line"><span class="string">&quot;msgtype&quot;</span>: <span class="string">&quot;text&quot;</span>,</span><br><span class="line"><span class="string">&quot;text&quot;</span>: &#123;</span><br><span class="line"><span class="string">&quot;content&quot;</span>: <span class="string">&quot;<span class="variable">$1</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.æˆæƒæ‰§è¡Œæƒé™</span></span><br><span class="line"><span class="built_in">chmod</span> +x /usr/lib/zabbix/alertscripts/wechat.sh</span><br><span class="line"></span><br><span class="line"><span class="comment">#3.æ›´æ”¹å±ä¸»å±ç»„ï¼ˆzabbixå¯åŠ¨ç”¨æˆ·æ˜¯zabbixï¼Œä¸æ”¹åˆ™æ²¡æœ‰æƒé™è°ƒç”¨ï¼‰</span></span><br><span class="line"><span class="built_in">chown</span> zabbix.zabbix /usr/lib/zabbix/alertscripts/wechat.sh</span><br><span class="line"><span class="built_in">chown</span> zabbix.zabbix /usr/lib/zabbix/alertscripts/msg.json</span><br></pre></td></tr></table></figure><p><strong>webç•Œé¢æ·»åŠ æŠ¥è­¦ç±»å‹</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ç®¡ç†&gt;æŠ¥è­¦åª’ä»‹ç±»å‹&gt;åˆ›å»ºåª’ä»‹ç±»å‹</span><br><span class="line"></span><br><span class="line">è„šæœ¬å‚æ•°ï¼š&#123;ALERT.MESSAGE&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/QQ_1722845658579.png" alt="QQ_1722845658579"></p><p><img src="https://cos.lukme.top/Pic/QQ_1722845826346.png" alt="QQ_1722845826346"></p><p><strong>æ·»åŠ åŠ¨ä½œ</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">é…ç½®&gt;åŠ¨ä½œ&gt;åˆ›å»ºåŠ¨ä½œ</span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/QQ_1722845872056.png" alt="QQ_1722845872056"></p><p><img src="https://cos.lukme.top/Pic/QQ_1722846012723.png" alt="QQ_1722846012723"></p><p><strong>æ·»åŠ ä¿å­˜</strong></p><p><img src="https://cos.lukme.top/Pic/QQ_1722846086534.png" alt="QQ_1722846086534"></p><p><strong>æ·»åŠ æ¥æ”¶äºº</strong></p><p><code>æ·»åŠ å®Œè®°å¾—ç‚¹æ›´æ–°</code></p><p><img src="https://cos.lukme.top/Pic/QQ_1722846168458.png" alt="QQ_1722846168458"></p>]]></content>
      
      
      <categories>
          
          <category> ç›‘æ§ </category>
          
          <category> zabbix </category>
          
      </categories>
      
      
        <tags>
            
            <tag> zabbix </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>filebeatæ¨¡å—åŒ–åˆ†ææ—¥å¿—</title>
      <link href="/posts/907ae385.html"/>
      <url>/posts/907ae385.html</url>
      
        <content type="html"><![CDATA[<h2 id="filebeaté‡‡é›†dockeræ—¥å¿—">filebeaté‡‡é›†dockeræ—¥å¿—</h2><p><strong>1.è¿è¡Œä¸€ä¸ªnginxçš„dockerå®¹å™¨</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@elk01:2 ~]# docker run --name nginx -d -p 88:80 nginx:alpine</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ³¨ï¼šdockerçš„å®‰è£…ä¸å†èµ˜è¿°</span></span><br></pre></td></tr></table></figure><p><strong>2.è®¿é—®æµ‹è¯•</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@elk01:2 ~]# curl 10.0.0.211:88</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹æ˜¯å¦è¿”å›nginxç•Œé¢ï¼Œæ³¨æ„ç«¯å£æ˜¯å¦æœ‰å†²çª</span></span><br></pre></td></tr></table></figure><p><strong>3.ç¼–å†™filebeatå®ä¾‹</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@elk01:0 ~]# <span class="built_in">cat</span> /etc/filebeat/08-docker-log.yaml </span><br><span class="line">filebeat.inputs:</span><br><span class="line">- <span class="built_in">type</span>: docker</span><br><span class="line">  tags: <span class="string">&#x27;docker&#x27;</span></span><br><span class="line">  <span class="comment">#ä¸‹é¢å†™å®¹å™¨çš„idå·ï¼Œå†™*ä»£è¡¨æ”¶é›†æ‰€æœ‰å®¹å™¨æ—¥å¿—</span></span><br><span class="line">  containers.ids:   </span><br><span class="line">  - <span class="string">&quot;*&quot;</span></span><br><span class="line">output.elasticsearch:</span><br><span class="line">  hosts: [<span class="string">&quot;http://10.0.0.211:9200&quot;</span>,<span class="string">&quot;http://10.0.0.212:9200&quot;</span>,<span class="string">&quot;http://10.0.0.213:9200&quot;</span>]</span><br><span class="line">  indices:</span><br><span class="line">    - index: <span class="string">&quot;filebeat-docker-%&#123;+yyyy.MM.dd&#125;&quot;</span></span><br><span class="line">      when.contains:</span><br><span class="line">        tags: <span class="string">&quot;docker&quot;</span></span><br><span class="line"></span><br><span class="line">setup.ilm.enabled: <span class="literal">false</span></span><br><span class="line">setup.template.name: <span class="string">&quot;filebeat&quot;</span></span><br><span class="line">setup.template.pattern: <span class="string">&quot;filebeat*&quot;</span></span><br><span class="line">setup.template.overwrite: <span class="literal">false</span></span><br><span class="line">setup.template.settings:</span><br><span class="line">  index.number_of_shards: 5</span><br><span class="line">  index.number_of_replicas: 0</span><br><span class="line">  </span><br><span class="line"><span class="comment">#å¯åŠ¨filebeatå®ä¾‹</span></span><br><span class="line">[root@elk01:2 ~]# filebeat -e -c /etc/filebeat/08-docker-log.yaml</span><br></pre></td></tr></table></figure><p><strong>3.è®¿é—®nginxä½¿ä¹‹äº§ç”Ÿæ—¥å¿—</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@elk01:2 ~]# curl 10.0.0.211:88</span><br><span class="line"><span class="comment">#dockerå·²ç»æ˜ å°„æœ¬åœ°88ç«¯å£</span></span><br></pre></td></tr></table></figure><h2 id="filebeatæ¨¡å—">filebeatæ¨¡å—</h2><p>æ¨¡å—æ˜¯filebeatå†…ç½®çš„ä¸€äº›ä¸­é—´ä»¶æ—¥å¿—ç›‘æ§æ–¹æ¡ˆï¼Œæ¯”å¦‚å¸¸è§çš„nginxï¼Œtomcatï¼Œmysqlï¼Œzookeeperç­‰æ—¥å¿—ç›‘æ§ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">filebeatå†…ç½®æ¨¡å—åœ¨ /etc/filebeat/modules.d/ä¸‹ã€‚</span><br><span class="line">è¢«ç¦ç”¨çš„æ¨¡å—åç¼€å¸¦.disabled</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹æ¨¡å—åˆ—è¡¨</span></span><br><span class="line">[root@elk01:2 ~]#  filebeat modules list</span><br></pre></td></tr></table></figure><p><strong>å¯ç¦ç”¨æ¨¡å—</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@elk01:2 ~]# filebeat modules <span class="built_in">enable</span> nginx tomcat</span><br><span class="line"></span><br><span class="line">[root@elk01:2 ~]# filebeat modules <span class="built_in">disable</span> tomcat</span><br></pre></td></tr></table></figure><h2 id="æ¨¡å—åˆ†ænginxè®¿é—®æ—¥å¿—">æ¨¡å—åˆ†ænginxè®¿é—®æ—¥å¿—</h2><h3 id="å‰æå‡†å¤‡">å‰æå‡†å¤‡</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1.é˜²æ­¢ç´¢å¼•å†²çªï¼Œåˆ é™¤æ‰€æœ‰ç´¢å¼•å’Œç´¢å¼•æ¨¡å¼</span><br><span class="line">2.è¿˜åŸnginxæ—¥å¿—æ ¼å¼ï¼ˆå¦‚æœä¹‹å‰ä½ åšè¿‡nginxè¾“å‡ºæ ¼å¼ä¸ºjsonæ ¼å¼çš„è¯å°±å°†nginxé…ç½®æ–‡ä»¶è¿˜åŸä¸ºåŸæ ¼å¼ï¼‰</span><br><span class="line">3.æ£€æŸ¥nginxæ˜¯å¦å¯ç”¨ï¼Œé…ç½®æ–‡ä»¶æ˜¯å¦OKï¼ˆnginx -tï¼‰ï¼Œå¯ç”¨nginxæ¨¡å—ï¼ˆfilebeat modules <span class="built_in">enable</span> nginxï¼‰</span><br><span class="line">4.å¦‚æœä½ çš„nginxæ—¥å¿—æ–‡ä»¶ä¸åœ¨é»˜è®¤çš„ç›®å½•åˆ™ä¿®æ”¹å®ä¾‹nginxæ–‡ä»¶ï¼Œå¦‚æœé»˜è®¤ç›®å½•åˆ™è·³è¿‡</span><br><span class="line">[root@elk01:2 ~]#  vim /etc/filebeat/modules.d/nginx.yml </span><br><span class="line">Â·Â·Â·#ä¿®æ”¹ä½ çš„æ—¥å¿—æ–‡ä»¶ç›®å½•</span><br><span class="line">var.paths: [<span class="string">&quot;/yourpath/nginx/access.log*&quot;</span>]</span><br><span class="line">Â·Â·Â·</span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™filebeatçš„é…ç½®æ–‡ä»¶">ç¼–å†™filebeatçš„é…ç½®æ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@elk01:0 ~]# <span class="built_in">cat</span> /etc/filebeat/10-nginx-modules.yaml </span><br><span class="line"><span class="comment"># é…ç½®filebeatçš„å¯ç”¨æ¨¡å—</span></span><br><span class="line">filebeat.config.modules:</span><br><span class="line">  <span class="comment"># é»˜è®¤ä¼šå»æ‰¾filebeatå®‰è£…ç›®å½•ä¸‹çš„&quot;modules.d&quot;æ‰€æœ‰ä»¥&quot;.yml&quot;ç»“å°¾çš„æ–‡ä»¶</span></span><br><span class="line">  path: <span class="variable">$&#123;path.config&#125;</span>/modules.d/*.yml</span><br><span class="line">  <span class="comment"># æ˜¯å¦æ”¯æŒçƒ­åŠ è½½</span></span><br><span class="line">  reload.enabled: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">output.elasticsearch:</span><br><span class="line">  hosts: [<span class="string">&quot;http://10.0.0.211:9200&quot;</span>,<span class="string">&quot;http://10.0.0.212:9200&quot;</span>,<span class="string">&quot;http://10.0.0.213:9200&quot;</span>] </span><br><span class="line">  index: <span class="string">&quot;filebeat-nginx-%&#123;+yyyy.MM.dd&#125;&quot;</span></span><br><span class="line"></span><br><span class="line">setup.ilm.enabled: <span class="literal">false</span></span><br><span class="line">setup.template.name: <span class="string">&quot;filebeat-nginx&quot;</span></span><br><span class="line">setup.template.pattern: <span class="string">&quot;filebeat-nginx*&quot;</span></span><br><span class="line">setup.template.overwrite: <span class="literal">false</span></span><br><span class="line">setup.template.settings:</span><br><span class="line">  index.number_of_shards: 5</span><br><span class="line">  index.number_of_replicas: 0</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¯åŠ¨filebeatå®ä¾‹</span></span><br><span class="line">[root@elk01:1 ~]# filebeat -e -c /etc/filebeat/10-nginx-modules.yaml</span><br></pre></td></tr></table></figure><p><img src="C:/Users/Dell/AppData/Roaming/Typora/typora-user-images/image-20241004102923489.png" alt="image-20241004102923489"></p><blockquote><p>æ—¥åä¾¿å¯ä»¥åœ¨  èœå•æ â€“&gt;Discoveré‡ŒæŸ¥è¯¢åˆ†ænginxæ—¥å¿—  å¦‚ä¸‹å›¾</p></blockquote><p><img src="C:/Users/Dell/AppData/Roaming/Typora/typora-user-images/image-20241004103225591.png" alt="image-20241004103225591"></p><h3 id="ç»Ÿè®¡ç½‘ç«™æ—¥PVé‡">ç»Ÿè®¡ç½‘ç«™æ—¥PVé‡</h3><blockquote><p>å¯ä»¥ç†è§£ä¸º  ä¸€ä¸ªé¡µé¢å°±æ˜¯ä¸€æ¡PVï¼Œfilebeatæ˜¯æŒ‰è¡Œç»Ÿè®¡ï¼Œnginxçš„æ¯ä¸ªè®¿é—®è®°å½•éƒ½ä¸ºä¸€è¡Œï¼Œä»¥è®¡æ•°æ–¹å¼ç»Ÿè®¡ä¸ºæ—¥PV</p><p>ç‚¹å‡»ä¿å­˜å³å¯ä¿å­˜å¯è§†åŒ–åº“</p></blockquote><p><img src="C:/Users/Dell/AppData/Roaming/Typora/typora-user-images/image-20241004103908465.png" alt="image-20241004103908465"></p><h3 id="ç»Ÿè®¡ç½‘ç«™æ—¥UV">ç»Ÿè®¡ç½‘ç«™æ—¥UV</h3><blockquote><p>è¿™ä¸ªç»Ÿè®¡ä¸å¤ªå‡†ç¡®ï¼Œè·å–çš„ipæ˜¯æ—¥å¿—é‡Œæ¯è¡Œç¬¬ä¸€ä¸ªçš„ipï¼Œè¿™ä¸ªipå…¶å®æ˜¯è´Ÿè½½å‡è¡¡çš„ipï¼Œå¦‚æœæƒ³è¦è·å–æ¯ä¸ªç”¨æˆ·çœŸå®ipï¼Œnginxé…ç½®æ–‡ä»¶éœ€è¦è®¾ç½®è·å–ç”¨æˆ·çœŸå®ipæ‰ç®—æ˜¯æ—¥UVé‡ï¼Œä¿å­˜uvåº“</p></blockquote><p><img src="C:/Users/Dell/AppData/Roaming/Typora/typora-user-images/image-20241004111335927.png" alt="image-20241004111335927"></p><h3 id="ç»Ÿè®¡å¸¦å®½">ç»Ÿè®¡å¸¦å®½</h3><p><img src="C:/Users/Dell/AppData/Roaming/Typora/typora-user-images/image-20241004112012078.png" alt="image-20241004112012078"></p><p><img src="C:/Users/Dell/AppData/Roaming/Typora/typora-user-images/image-20241004112552478.png" alt="image-20241004112552478"></p><h3 id="ç»Ÿè®¡è®¾å¤‡ç±»å‹">ç»Ÿè®¡è®¾å¤‡ç±»å‹</h3><p><img src="C:/Users/Dell/AppData/Roaming/Typora/typora-user-images/image-20241004112842696.png" alt="image-20241004112842696"></p><h3 id="ç»Ÿè®¡è®¾å¤‡æ“ä½œç³»ç»Ÿ">ç»Ÿè®¡è®¾å¤‡æ“ä½œç³»ç»Ÿ</h3><p><img src="C:/Users/Dell/AppData/Roaming/Typora/typora-user-images/image-20241004120352348.png" alt="image-20241004120352348"></p><h3 id="å…¨çƒæµé‡ç»Ÿè®¡">å…¨çƒæµé‡ç»Ÿè®¡</h3><p><img src="C:/Users/Dell/AppData/Roaming/Typora/typora-user-images/image-20241004115735265.png" alt="image-20241004115735265"></p><p><img src="C:/Users/Dell/AppData/Roaming/Typora/typora-user-images/global-traffic.gif" alt="recording"></p><h3 id="åˆ›å»ºä»ªè¡¨æ¿">åˆ›å»ºä»ªè¡¨æ¿</h3><blockquote><p>èœå•æ â€“&gt;Dashboard   æ–°å»ºä»ªè¡¨æ¿ï¼Œæ•°æ®ä»å‰é¢ä¿å­˜çš„åº“ä¸­æ·»åŠ </p><p>åˆ·æ–°å¯æ˜¾ç¤ºåœ¨çº¿å®æ—¶æ•°æ®</p></blockquote><p><img src="C:/Users/Dell/AppData/Roaming/Typora/typora-user-images/image-20241004121524063.png" alt="image-20241004121524063"></p><h2 id="filebeatçš„å¤šè¡Œå¤„ç†">filebeatçš„å¤šè¡Œå¤„ç†</h2><blockquote><p>filestreamæ–‡ä»¶æµä¹Ÿæ˜¯é‡‡é›†æ–‡ä»¶çš„ï¼Œlogçš„æ›¿ä»£</p></blockquote><p><a href="https://www.elastic.co/guide/en/beats/filebeat/7.17/multiline-examples.html">å®˜ç½‘</a></p><p><strong>multilineçš„countç±»å‹</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[root@elk01:0 ~]# <span class="built_in">cat</span> /etc/filebeat/11-filestream_multiline.yaml </span><br><span class="line">filebeat.inputs:</span><br><span class="line">- <span class="built_in">type</span>: filestream</span><br><span class="line">  paths:</span><br><span class="line">    - /tmp/student.info</span><br><span class="line">  parsers:</span><br><span class="line">  - multiline:</span><br><span class="line">      <span class="built_in">type</span>: count</span><br><span class="line">      count_lines: 4</span><br><span class="line">output.console:</span><br><span class="line">  pretty: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ³¨é‡Š</span></span><br><span class="line">      <span class="comment"># typeæŒ‡å®šç±»å‹ï¼Œæœ‰æ•ˆå€¼ä¸º: patternå’Œcount</span></span><br><span class="line">      <span class="comment">#  pattern:      åŸºäºæ­£åˆ™åŒ¹é…äº‹ä»¶ã€‚</span></span><br><span class="line">      <span class="comment">#  count:         å°†å‡ è¡Œæ•°æ®ä½œä¸ºä¸€ä¸ªäº‹ä»¶</span></span><br><span class="line">      <span class="comment">#count_lines:  å°†æŒ‡å®šçš„è¡Œæ•°åˆå¹¶ä¸ºä¸€ä¸ªäº‹ä»¶</span></span><br><span class="line">      </span><br><span class="line"><span class="comment">#æç¤º ï¼šcountç±»å‹è¿™ç§ï¼Œéœ€è¦è¢«æ”¶é›†çš„ä¿¡æ¯æ ¼å¼æ˜¯æœ‰è§„å¾‹çš„</span></span><br><span class="line">ä¾‹å¦‚ï¼š   count: 2  ï¼ˆæ•°æ®éƒ½æ˜¯4è¡Œ4è¡Œçš„æˆ–Nè¡ŒNè¡Œçš„ï¼‰</span><br><span class="line">[root@elk01:0 ~]# <span class="built_in">cat</span> /tmp/student.info </span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;å¼ ä¸‰&quot;</span>,</span><br><span class="line">  <span class="string">&quot;hobby&quot;</span>: [<span class="string">&quot;å­¦ä¹ &quot;</span>,<span class="string">&quot;è·‘æ­¥&quot;</span>]</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;æå››&quot;</span>,</span><br><span class="line">  <span class="string">&quot;hobby&quot;</span>: [<span class="string">&quot;å­¦ä¹ &quot;</span>,<span class="string">&quot;çœ‹ä¹¦&quot;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> [root@elk01:0 ~]# filebeat -e -c /etc/filebeat/11-filestream_multiline-.yaml</span><br><span class="line"> &#125;,</span><br><span class="line">  <span class="string">&quot;log&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;offset&quot;</span>: 384,</span><br><span class="line">    <span class="string">&quot;file&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;path&quot;</span>: <span class="string">&quot;/tmp/student.info&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;flags&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;multiline&quot;</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;message&quot;</span>: <span class="string">&quot;&#123;\n  \&quot;name\&quot;: \&quot;å¼ ä¸‰\&quot;,\n  \&quot;hobby\&quot;: [\&quot;å­¦ä¹ \&quot;,\&quot;è·‘æ­¥\&quot;]\n&#125;&quot;</span>,</span><br><span class="line">  <span class="string">&quot;input&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;type&quot;</span>: <span class="string">&quot;filestream&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#å°†å¤šè¡Œæ•°æ®é‡‡é›†ä¸ºä¸€è¡Œï¼Œä½†å¿…é¡»æ˜¯æœ‰è§„å¾‹çš„ï¼Œé‡‡é›†çš„æ˜¯ä¸Šé¢æ–‡ä»¶æ¯4è¡Œä¸ºä¸€ç»„æ•°æ®</span></span><br></pre></td></tr></table></figure><p><strong>multilineçš„patternç±»å‹</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@elk01:0 ~]# <span class="built_in">cat</span> /etc/filebeat/12-filestream_multiline_pattern.yaml </span><br><span class="line">filebeat.inputs:</span><br><span class="line">- <span class="built_in">type</span>: filestream</span><br><span class="line">  paths:</span><br><span class="line">    - /tmp/student.info</span><br><span class="line">  parsers:</span><br><span class="line">  - multiline:</span><br><span class="line">      <span class="built_in">type</span>: pattern</span><br><span class="line">      pattern: <span class="string">&#x27;^\&#123;&#x27;</span></span><br><span class="line">      negate: <span class="literal">true</span></span><br><span class="line">      match: after</span><br><span class="line">output.console:</span><br><span class="line">  pretty: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ³¨é‡Š</span></span><br><span class="line">patternï¼š <span class="string">&#x27;^\&#123;&#x27;</span> åŒ¹é…ä»¥&#123;å¼€å¤´çš„</span><br><span class="line">negate: åŒ¹é…è§„åˆ™</span><br><span class="line">match: åŒ¹é…è§„åˆ™   è§ä¸‹å›¾</span><br></pre></td></tr></table></figure><p><img src="C:/Users/Dell/AppData/Roaming/Typora/typora-user-images/image-20241004212526358.png" alt="image-20241004212526358"></p><h2 id="filebeaté‡‡é›†tomcatæ—¥å¿—">filebeaté‡‡é›†tomcatæ—¥å¿—</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">1.éƒ¨ç½²tomcat</span><br><span class="line">[root@elk01:0 app]# wget https://dlcdn.apache.org/tomcat/tomcat-10/v10.1.30/bin/apache-tomcat-10.1.30.tar.gz</span><br><span class="line"></span><br><span class="line">2.è§£å‹å®‰è£…tomcat(æå‰åˆ›å»ºå®‰è£…ç›®å½•)</span><br><span class="line">[root@elk01:0 app]# tar xf apache-tomcat-10.1.30.tar.gz -C /app</span><br><span class="line">[root@elk01:0 app]# <span class="built_in">ln</span> -s /app/apache-tomcat-10.1.30/ /app/tomcat</span><br><span class="line"></span><br><span class="line">3.é…ç½®tomatoçš„jdkç¯å¢ƒï¼Œä½¿ç”¨elasticsearchçš„jdkå³å¯ï¼ŒæŸ¥çœ‹javaç‰ˆæœ¬</span><br><span class="line">[root@elk01:0 app]#  /usr/share/elasticsearch/jdk/bin/java --version</span><br><span class="line">openjdk 22.0.1 2024-04-16</span><br><span class="line">OpenJDK Runtime Environment (build 22.0.1+8-16)</span><br><span class="line">OpenJDK 64-Bit Server VM (build 22.0.1+8-16, mixed mode, sharing)</span><br><span class="line"></span><br><span class="line"><span class="comment">#é…ç½®ç¯å¢ƒå˜é‡</span></span><br><span class="line">[root@elk01:0 app]# <span class="built_in">cat</span> /etc/profile.d/jdk.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/share/elasticsearch/jdk</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin</span><br><span class="line"></span><br><span class="line"><span class="comment">#é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡</span></span><br><span class="line">[root@elk01:0 app]# <span class="built_in">source</span> /etc/profile.d/jdk.sh </span><br><span class="line">[root@elk01:0 app]# java --version</span><br><span class="line">openjdk 22.0.1 2024-04-16</span><br><span class="line">OpenJDK Runtime Environment (build 22.0.1+8-16)</span><br><span class="line">OpenJDK 64-Bit Server VM (build 22.0.1+8-16, mixed mode, sharing)</span><br><span class="line"></span><br><span class="line">4.å¯åŠ¨tomcat</span><br><span class="line">[root@elk01:0 app]# /app/tomcat/bin/startup.sh </span><br></pre></td></tr></table></figure><p><strong>ç¼–å†™filebeatå®ä¾‹</strong>   ä½¿ç”¨tomcaté‡‡é›†æ—¥å¿—</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">1.å¯ç”¨tomcatæ¨¡å—</span><br><span class="line">[root@elk01:0 app]# filebeat modules <span class="built_in">enable</span> tomcat</span><br><span class="line"></span><br><span class="line">2.ä¿®æ”¹tomcatæ¨¡å—é‡Œæ—¥å¿—è·¯å¾„</span><br><span class="line">[root@elk01:0 app]# vim /etc/filebeat/modules.d/tomcat.yml </span><br><span class="line">Â·Â·Â·</span><br><span class="line">    <span class="comment">## é»˜è®¤æ˜¯udpç±»å‹ï¼Œæœ‰æ•ˆå€¼: udp,tcp,file</span></span><br><span class="line">    <span class="comment"># å½“ç±»å‹ä¸ºfileæ—¶ï¼Œä¸‹é¢å®šä¹‰çš„è·¯å¾„æ‰ä¼šç”Ÿæ•ˆ</span></span><br><span class="line">    var.input: file</span><br><span class="line">    var.paths:</span><br><span class="line">      - /app/tomcat/logs/localhost_access_log.* </span><br><span class="line">Â·Â·Â·</span><br><span class="line"></span><br><span class="line">3.ç¼–å†™filebeatå®ä¾‹</span><br><span class="line">[root@elk01:0 app]# <span class="built_in">cat</span> /etc/filebeat/13.modules_tomcat.yaml </span><br><span class="line">filebeat.config.modules:</span><br><span class="line">  path: <span class="variable">$&#123;path.config&#125;</span>/modules.d/*.yml</span><br><span class="line">  reload.enabled: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">output:</span><br><span class="line">  elasticsearch:</span><br><span class="line">    hosts: </span><br><span class="line">    - <span class="string">&quot;http://10.0.0.211:9200&quot;</span></span><br><span class="line">    - <span class="string">&quot;http://10.0.0.212:9200&quot;</span></span><br><span class="line">    - <span class="string">&quot;http://10.0.0.213:9200&quot;</span></span><br><span class="line">    index: <span class="string">&quot;modules-tomcat-%&#123;+yyyy.MM.dd&#125;&quot;</span></span><br><span class="line"></span><br><span class="line">setup.ilm.enabled: <span class="literal">false</span></span><br><span class="line">setup.template.name: <span class="string">&quot;modules-tomcat&quot;</span></span><br><span class="line">setup.template.pattern: <span class="string">&quot;modules-tomcat*&quot;</span></span><br><span class="line">setup.template.overwrite: <span class="literal">false</span></span><br><span class="line">setup.template.settings:</span><br><span class="line">  index.number_of_shards: 3</span><br><span class="line">  index.number_of_replicas: 0</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¯åŠ¨å®ä¾‹</span></span><br><span class="line">[root@elk01:0 ~]# filebeat -e -c /etc/filebeat/13.modules_tomcat.yaml </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ELKæ—¥å¿—æ”¶é›† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ELK </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>filebeatå¤šå®ä¾‹</title>
      <link href="/posts/29cf1fa5.html"/>
      <url>/posts/29cf1fa5.html</url>
      
        <content type="html"><![CDATA[<h2 id="æŒ‡å®šESçš„åˆ†ç‰‡å’Œå‰¯æœ¬æ•°é‡">æŒ‡å®šESçš„åˆ†ç‰‡å’Œå‰¯æœ¬æ•°é‡</h2><p><strong>ESç´¢å¼•åç§°çš„åˆ›å»ºè§„èŒƒ</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.åç§°æœ€å¥½è§åçŸ¥æ„ï¼Œæœ€å¥½å’Œä½ å®é™…å†™å…¥çš„ä¸šåŠ¡æœ‰å…³;</span><br><span class="line">2.åç§°ä¸è¦ä»¥<span class="string">&quot;.&quot;</span>å¼€å¤´ï¼Œä»¥<span class="string">&quot;.&quot;</span>å¼€å¤´å¤šç´¢å¼•æˆ‘ä»¬ç§°ä¹‹ä¸º<span class="string">&quot;éšè—ç´¢å¼•&quot;</span>;</span><br><span class="line">3.ä¸€èˆ¬éšè—ç´¢å¼•éƒ½æ˜¯ç»„ä»¶å»åˆ›å»ºï¼Œå»ºè®®ä¸è¦äººä¸ºåˆ›å»ºï¼Œé»˜è®¤kibanaå°±éšè—äº†ä»¥<span class="string">&quot;.&quot;</span>å¼€å¤´çš„ç´¢å¼•</span><br><span class="line">4.å­—ç¬¦æ”¯æŒå°å†™å­—æ¯ï¼Œæ•°å­—åŠè¿å­—ç¬¦(-)ï¼Œå’Œå†…ç½®ä¸€äº›å˜é‡æ¯”å¦‚<span class="string">&quot;%&#123;...&#125;&quot;</span>;</span><br><span class="line">5.ä¸è¦å‡ºç°ç‰¹æ®Šå­—ç¬¦;</span><br></pre></td></tr></table></figure><p><strong>1.é€šè¿‡ESçš„APIæ“ä½œå‰¯æœ¬å’Œåˆ†ç‰‡</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">curl -X PUT <span class="string">&#x27;http://10.0.0.211:9200/school&#x27;</span> \</span><br><span class="line">-H <span class="string">&#x27;Content-Type: application/json&#x27;</span> \</span><br><span class="line">-d <span class="string">&#x27;&#123;</span></span><br><span class="line"><span class="string">  &quot;settings&quot;: &#123;</span></span><br><span class="line"><span class="string">      &quot;number_of_shards&quot;: 5,</span></span><br><span class="line"><span class="string">      &quot;number_of_replicas&quot;: 0</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ›å»ºç´¢å¼•schoolï¼Œä¸»åˆ†ç‰‡5ï¼Œå‰¯æœ¬0</span></span><br></pre></td></tr></table></figure><p><strong>2.é€šè¿‡ç´¢å¼•æ¨¡æ¿æ“ä½œå‰¯æœ¬å’Œåˆ†ç‰‡</strong></p><blockquote><p>ç´¢å¼•æ¨¡æ¿ï¼šåˆ›å»ºç´¢å¼•æ—¶ï¼Œä¼šè‡ªåŠ¨åŒ¹é…æ˜¯å¦æœ‰å¯¹åº”çš„ç´¢å¼•æ¨¡æ¿ï¼Œè‹¥åŒ¹é…åˆ™æ ¹æ®ç´¢å¼•æ¨¡æ¿åˆ›å»ºã€‚</p></blockquote><p>â€‹    <strong>2.1åˆ›å»ºç´¢å¼•æ¨¡æ¿</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">curl -X PUT <span class="string">&#x27;http://10.0.0.211:9200/_index_template/linux-school&#x27;</span> \</span><br><span class="line">-H <span class="string">&#x27;Content-Type: application/json&#x27;</span> \</span><br><span class="line">-d <span class="string">&#x27;&#123;</span></span><br><span class="line"><span class="string">  &quot;template&quot;: &#123;</span></span><br><span class="line"><span class="string">    &quot;settings&quot;: &#123;</span></span><br><span class="line"><span class="string">      &quot;number_of_replicas&quot;: 0,</span></span><br><span class="line"><span class="string">      &quot;number_of_shards&quot;: 5</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;,</span></span><br><span class="line"><span class="string">  &quot;index_patterns&quot;: [</span></span><br><span class="line"><span class="string">    &quot;linux-school*&quot;</span></span><br><span class="line"><span class="string">  ]</span></span><br><span class="line"><span class="string">&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ³¨é‡Šï¼šindex_patternsï¼Œè¿™é‡Œæ˜¯ç”¨äºåŒ¹é…ç´¢å¼•çš„ï¼Œå‡¡æ˜¯ç´¢å¼•æ˜¯linux-schoolçš„éƒ½ä¼šå…³è”æ­¤æ¨¡æ¿</span></span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/image-20241002233116968.png" alt="image-20241002233116968"></p><p><strong>éªŒè¯æ¨¡æ¿</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@elk01:2 ~]# curl -X PUT <span class="string">&#x27;http://10.0.0.211:9200/linux-school-01&#x27;</span></span><br><span class="line">&#123;<span class="string">&quot;acknowledged&quot;</span>:<span class="literal">true</span>,<span class="string">&quot;shards_acknowledged&quot;</span>:<span class="literal">true</span>,<span class="string">&quot;index&quot;</span>:<span class="string">&quot;linux-school-01&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#é‡æ–°åŠ è½½ç´¢å¼•ç®¡ç†ï¼Œå‘ç°åˆ›å»ºçš„ç´¢å¼•å…³è”äº†æ¨¡æ¿ï¼Œåˆ›å»ºäº†5ä¸ªåˆ†ç‰‡</span></span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/image-20241002233631403.png" alt="image-20241002233631403"></p><p>2.2å›¾å½¢åŒ–åˆ›å»ºç´¢å¼•æ¨¡æ¿</p><p><img src="https://cos.lukme.top/Pic/index.gif" alt="recording"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">éªŒè¯ç´¢å¼•æ¨¡æ¿ï¼š</span><br><span class="line">[root@elk01:2 ~]# curl -X PUT <span class="string">&#x27;http://10.0.0.211:9200/student01&#x27;</span></span><br><span class="line">&#123;<span class="string">&quot;acknowledged&quot;</span>:<span class="literal">true</span>,<span class="string">&quot;shards_acknowledged&quot;</span>:<span class="literal">true</span>,<span class="string">&quot;index&quot;</span>:<span class="string">&quot;student01&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">ç´¢å¼•ç®¡ç†é‡ŒæŸ¥çœ‹æ–°åˆ›å»ºçš„student-01ç´¢å¼•æ˜¯å¦æ˜¯  3åˆ†ç‰‡ï¼Œ0å‰¯æœ¬ è‡ªç„¶æ˜¯OKçš„</span><br></pre></td></tr></table></figure><p><strong>3.é€šè¿‡filebeatç»„ä»¶æ“ä½œå‰¯æœ¬å’Œåˆ†ç‰‡</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[root@elk01:2 ~]# <span class="built_in">cat</span> /etc/filebeat/06-nginx-es.yaml </span><br><span class="line">filebeat.inputs:</span><br><span class="line">- <span class="built_in">type</span>: <span class="built_in">log</span></span><br><span class="line">  json:</span><br><span class="line">    keys_under_root: <span class="literal">true</span></span><br><span class="line">    add_error_key: <span class="literal">true</span></span><br><span class="line">    overwirte_keys: <span class="literal">true</span></span><br><span class="line">  paths:</span><br><span class="line">    - /var/log/nginx/access.log* </span><br><span class="line"></span><br><span class="line">output.elasticsearch:</span><br><span class="line">  hosts: [<span class="string">&quot;http://10.0.0.211:9200&quot;</span>,<span class="string">&quot;http://10.0.0.212:9200&quot;</span>,<span class="string">&quot;http://10.0.0.213:9200&quot;</span>] </span><br><span class="line">  <span class="comment"># è‡ªå®šä¹‰ç´¢å¼•åç§°  ,å‰ææ˜¯å…³é—­ç´¢å¼•çš„ç”Ÿå‘½å‘¨æœŸ  </span></span><br><span class="line">  index: <span class="string">&quot;test-filebeat-%&#123;+yyyy.MM.dd&#125;&quot;</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">#å…³é—­ç´¢å¼•ç”Ÿå‘½å‘¨æœŸ</span></span><br><span class="line">setup.ilm.enabled: <span class="literal">false</span></span><br><span class="line"><span class="comment">#å®šä¹‰ç´¢å¼•æ¨¡æ¿çš„åç§°</span></span><br><span class="line">setup.template.name: <span class="string">&quot;test-filebeat&quot;</span></span><br><span class="line"><span class="comment">#å®šä¹‰æ¨¡æ¿çš„åŒ¹é…æ¨¡å¼</span></span><br><span class="line">setup.template.pattern: <span class="string">&quot;test-filebeat*&quot;</span></span><br><span class="line"><span class="comment">#è‹¥ç´¢å¼•æ¨¡å¼æ¨¡æ¿å­˜åœ¨ï¼Œæ˜¯å¦è¦†ç›–  </span></span><br><span class="line">setup.template.overwrite: <span class="literal">false</span></span><br><span class="line"><span class="comment">#å®šä¹‰ç´¢å¼•æ¨¡æ¿è®¾ç½®</span></span><br><span class="line">setup.template.settings:</span><br><span class="line">  index.number_of_shards: 5</span><br><span class="line">  index.number_of_replicas: 0</span><br><span class="line">  </span><br><span class="line"><span class="comment">#å¦‚ä¸‹ç´¢å¼•ç®¡ç†é‡Œä¾¿åˆ›å»ºäº†ä¸€ä¸ªåä¸ºtest-filebeatçš„ç´¢å¼•å’Œtest-filebeatçš„æ¨¡æ¿</span></span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/image-20241003002143618.png" alt="image-20241003002143618"></p><blockquote><p>æç¤ºï¼šåŸºäºfilebeaté…ç½®çš„ESé›†ç¾¤çš„ç´¢å¼•åŠåˆ†ç‰‡ï¼Œå‰¯æœ¬ä¿¡æ¯ï¼Œæœ¬è´¨ä¸Šåˆ›å»ºæ—¶ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºESçš„httpè¯·æ±‚è¿›è¡Œåˆ›å»ºç´¢å¼•ã€‚</p></blockquote><h2 id="å¤šä¸ªintputå†™åˆ°ä¸åŒç´¢å¼•">å¤šä¸ªintputå†™åˆ°ä¸åŒç´¢å¼•</h2><blockquote><p>éœ€æ±‚ï¼šå¤šä¸ªinputså†™å…¥åˆ°ESé›†ç¾¤é‡Œçš„ä¸åŒç´¢å¼•é‡Œ</p></blockquote><p><strong>1.ç¼–å†™é…ç½®æ–‡ä»¶</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">[root@elk01:1 ~]# <span class="built_in">cat</span> /etc/filebeat/07-nginx-es.yaml </span><br><span class="line">filebeat.inputs:</span><br><span class="line">- <span class="built_in">type</span>: <span class="built_in">log</span></span><br><span class="line">  <span class="comment">#ç»™äº‹ä»¶æ‰“æ ‡ç­¾ä¸ºfile</span></span><br><span class="line">  tags: <span class="string">&quot;file&quot;</span></span><br><span class="line">  paths:</span><br><span class="line">  - /tmp/test.log </span><br><span class="line">  </span><br><span class="line">- <span class="built_in">type</span>: tcp</span><br><span class="line">  tags: <span class="string">&quot;tcp&quot;</span></span><br><span class="line">  host: <span class="string">&quot;0.0.0.0:9000&quot;</span></span><br><span class="line">  </span><br><span class="line">- <span class="built_in">type</span>: <span class="built_in">log</span></span><br><span class="line">  tags: <span class="string">&quot;nginx&quot;</span></span><br><span class="line">  json:</span><br><span class="line">    keys_under_root: <span class="literal">true</span></span><br><span class="line">    add_error_key: <span class="literal">true</span></span><br><span class="line">    overwirte_keys: <span class="literal">true</span></span><br><span class="line">  paths:</span><br><span class="line">    - /var/log/nginx/access.log* </span><br><span class="line"></span><br><span class="line">output.elasticsearch:</span><br><span class="line">  hosts: [<span class="string">&quot;http://10.0.0.211:9200&quot;</span>,<span class="string">&quot;http://10.0.0.212:9200&quot;</span>,<span class="string">&quot;http://10.0.0.213:9200&quot;</span>]</span><br><span class="line">  <span class="comment">#index: &quot;student-%&#123;+yyyy.MM.dd&#125;&quot;</span></span><br><span class="line">  <span class="comment">#å¤šä¸ªç´¢å¼•æ¨¡å¼</span></span><br><span class="line">  indices:</span><br><span class="line">    - index: <span class="string">&quot;study-file-%&#123;+yyyy.MM.dd&#125;&quot;</span></span><br><span class="line">      when.contains:</span><br><span class="line">        tags: <span class="string">&quot;file&quot;</span></span><br><span class="line">    - index: <span class="string">&quot;study-tcp-%&#123;+yyyy.MM.dd&#125;&quot;</span></span><br><span class="line">      when.contains:</span><br><span class="line">        tags: <span class="string">&quot;tcp&quot;</span></span><br><span class="line">    - index: <span class="string">&quot;study-nginx-%&#123;+yyyy.MM.dd&#125;&quot;</span></span><br><span class="line">      when.contains:</span><br><span class="line">        tags: <span class="string">&quot;nginx&quot;</span></span><br><span class="line"></span><br><span class="line">setup.ilm.enabled: <span class="literal">false</span></span><br><span class="line">setup.template.name: <span class="string">&quot;study&quot;</span></span><br><span class="line">setup.template.pattern: <span class="string">&quot;study*&quot;</span></span><br><span class="line">setup.template.overwrite: <span class="literal">false</span></span><br><span class="line">setup.template.settings:</span><br><span class="line">  index.number_of_shards: 8</span><br><span class="line">  index.number_of_replicas: 0</span><br><span class="line"></span><br><span class="line"><span class="comment">#ç»™æ¯ä¸ªäº‹ä»¶æ‰“ä¸Šä¸“å±æ ‡ç­¾ï¼Œç´¢å¼•é‡Œæ ¹æ®æ ‡ç­¾åˆ¤æ–­å†™å…¥å“ªé‡Œ</span></span><br></pre></td></tr></table></figure><p><strong>2.å¯åŠ¨filebeatå®ä¾‹</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@elk01:0 ~]# filebeat -e -c /etc/filebeat/07-nginx-es.yaml </span><br></pre></td></tr></table></figure><p><strong>3.æµ‹è¯•tcpæ•°æ®</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@elk01:0 ~]# <span class="built_in">echo</span> <span class="string">&quot;999&quot;</span> | nc 10.0.0.211 9000</span><br><span class="line">[root@elk01:0 ~]# <span class="built_in">echo</span> <span class="string">&quot;666&quot;</span> | nc 10.0.0.211 9000</span><br><span class="line">[root@elk01:0 ~]# <span class="built_in">echo</span> <span class="string">&quot;000&quot;</span> | nc 10.0.0.211 9000</span><br></pre></td></tr></table></figure><p><strong>4.æµ‹è¯•nginx</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@elk01:0 ~]# <span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span> curl 10.0.0.211;<span class="built_in">sleep</span> 0.5;<span class="keyword">done</span></span><br></pre></td></tr></table></figure><p><strong>5.æµ‹è¯•æœ¬åœ°æ–‡ä»¶</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@elk01:0 ~]# <span class="built_in">echo</span> â€˜hello world<span class="string">&#x27; &gt;/tmp/test.log</span></span><br></pre></td></tr></table></figure><p><strong>6.kibanaåŸºäºDiscoveråˆ†ææ•°æ®</strong></p><p>â€‹    6.1æŸ¥çœ‹ç´¢å¼•æ˜¯å¦éƒ½åˆ›å»ºå®Œæˆ</p><p><img src="https://cos.lukme.top/Pic/image-20241003114353521.png" alt="image-20241003114353521"></p><p>6.2åˆ›å»ºç´¢å¼•æ¨¡å¼ä¸º     study*</p><p>6.3 è¿›å…¥Discoverï¼Œé€‰æ‹©ç›¸åº”å­—æ®µï¼ŒæŸ¥çœ‹åˆ†ææ•°æ®</p><p><img src="https://cos.lukme.top/Pic/image-20241003114810243.png" alt="image-20241003114810243"></p><h2 id="æ§åˆ¶å¤šä¸ªinputæºçš„æ˜¯å¦å¯ç”¨">æ§åˆ¶å¤šä¸ªinputæºçš„æ˜¯å¦å¯ç”¨</h2><blockquote><p>ä½¿ç”¨enabledï¼Œæ§åˆ¶inputså¤šä¸ªæºæ˜¯å¦å¯ç”¨ï¼Œtrue / false</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">filebeat.inputs:</span><br><span class="line">- <span class="built_in">type</span>: <span class="built_in">log</span></span><br><span class="line">  <span class="comment"># é…ç½®è¯¥ä»£ç å—æ˜¯å¦æ‰§è¡Œï¼Œé»˜è®¤å€¼ä¸ºtrueï¼Œè‹¥ä¸æƒ³è¦åŠ è½½ï¼Œåˆ™è®¾ç½®ä¸ºfalseå³å¯</span></span><br><span class="line">  enabled: <span class="literal">false</span></span><br><span class="line">  tags: <span class="string">&quot;nginx&quot;</span></span><br><span class="line">  json:</span><br><span class="line">    keys_under_root: <span class="literal">true</span></span><br><span class="line">    add_error_key: <span class="literal">true</span></span><br><span class="line">    overwirte_keys: <span class="literal">true</span></span><br><span class="line">  paths:</span><br><span class="line">    - /var/log/nginx/access.log*</span><br></pre></td></tr></table></figure><h2 id="filebeat-å¤šå®ä¾‹">filebeat å¤šå®ä¾‹</h2><p><strong>1.å¯åŠ¨ç¬¬ä¸€ä¸ªå®ä¾‹</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@elk01:0 ~]# <span class="built_in">cat</span> /etc/filebeat/02-tcp-console.yaml </span><br><span class="line">filebeat.inputs:</span><br><span class="line">- <span class="built_in">type</span>: tcp</span><br><span class="line">  host: <span class="string">&quot;0.0.0.0:9000&quot;</span></span><br><span class="line"></span><br><span class="line">output.console:</span><br><span class="line">  pretty: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">[root@elk01:1 ~]# filebeat -e -c /etc/filebeat/02-tcp-console.yaml </span><br></pre></td></tr></table></figure><p><strong>2.å¯åŠ¨ç¬¬äºŒä¸ªå®ä¾‹</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@elk01:2 ~]# <span class="built_in">cat</span> /etc/filebeat/04-nginx-console.yaml </span><br><span class="line">filebeat.inputs:</span><br><span class="line">- <span class="built_in">type</span>: <span class="built_in">log</span></span><br><span class="line">  json:</span><br><span class="line">    keys_under_root: <span class="literal">true</span></span><br><span class="line">    add_error_key: <span class="literal">true</span></span><br><span class="line">    overwirte_keys: <span class="literal">true</span></span><br><span class="line">  paths:</span><br><span class="line">    - /var/log/nginx/access.log* </span><br><span class="line"></span><br><span class="line">output.console:</span><br><span class="line">  pretty: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">[root@elk01:1 ~]# filebeat -e -c /etc/filebeat/04-nginx-console.yaml</span><br><span class="line">2024-10-03T12:15:44.735+0800    INFO    instance/beat.go:698    Home path: [/usr/share/filebeat] Config path: [/etc/filebeat] Data path: [/var/lib/filebeat] Logs path: [/var/log/filebeat] Hostfs Path: [/]</span><br><span class="line">2024-10-03T12:15:44.737+0800    ERROR   instance/beat.go:1027   Exiting: <span class="string">&#x27;data path already locked by another beat&#x27;</span>. Please make sure that multiple beats are not sharing the same data path (path.data).</span><br><span class="line">Exiting: data path already locked by another beat. Please make sure that multiple beats are not sharing the same data path (path.data).</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¯åŠ¨ç¬¬äºŒä¸ªçš„å®ä¾‹æ—¶å€™æç¤ºï¼Œæ•°æ®ç›®å½•å·²ç»è¢«å…¶ä»–çš„å®ä¾‹é”å®šäº†ï¼ŒæŸ¥çœ‹/var/lib/filebeat/ç›®å½•é‡Œå­˜åœ¨ä¸€ä¸ªé”æ–‡ä»¶</span></span><br><span class="line"><span class="comment">#ä¸èƒ½å…±ç”¨æ•°æ®ç›®å½•ï¼Œå½“é€€å‡ºè¿™ä¸ªå®ä¾‹ï¼Œè¿™ä¸ªé”æ–‡ä»¶ä¹Ÿä¼šæ¶ˆå¤±</span></span><br><span class="line">[root@elk01:1 ~]# ll /var/lib/filebeat/</span><br><span class="line">-rw------- 1 root root    0 Oct  3 12:15 filebeat.lock</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¯åŠ¨ç¬¬äºŒä¸ªå®ä¾‹ï¼Œéœ€è¦æŒ‡å®šæ•°æ®ç›®å½•</span></span><br><span class="line">[root@elk01:2 ~]# filebeat -e -c /etc/filebeat/04-nginx-console.yaml --path.data /tmp/nginx-filebeat</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">æ€»ç»“:</span><br><span class="line">- 1.åŒä¸€ä¸ªèŠ‚ç‚¹å¯ä»¥å¯åŠ¨å¤šä¸ªfilebeatå®ä¾‹ï¼Œä½†éœ€è¦æŒ‡å®šä¸åŒçš„æ•°æ®ç›®å½•;</span><br><span class="line">- 2.å¦‚æœfilebeaté‡‡é›†å¤šä¸ªæ•°æ®æºæœ‰ä¸¤ç§å¸¸è§çš„è§£å†³æ–¹æ¡ˆï¼Œè¦ä¹ˆé…ç½®å¤šä¸ªinputï¼Œè¦ä¹ˆä½¿ç”¨å¤šå®ä¾‹;</span><br><span class="line"></span><br><span class="line">å¦‚æœæ‰€æœ‰é…ç½®éƒ½æ”¾åœ¨åŒä¸€ä¸ªfilebeatä¼˜ç¼ºç‚¹:</span><br><span class="line">ä¼˜ç‚¹:</span><br><span class="line">éƒ¨ç½²æ–¹ä¾¿ï¼Œå¯åŠ¨ä¸€ä¸ªå®ä¾‹å³å¯ã€‚</span><br><span class="line">ç¼ºç‚¹:</span><br><span class="line">-1.å½“å¤šä¸ªinputä¸­æœ‰ä»»æ„ä¸€ä¸ªéœ€è¦ä¿®æ”¹æ—¶ï¼Œåœ¨é‡å¯æœŸé—´ï¼Œå…¶ä»–çš„inputéƒ½ä¼šå—åˆ°å½±å“ã€‚</span><br><span class="line">-2.å½“é…ç½®å¤šäº‹ï¼Œå¤šä¸ªinputé…ç½®æ¯”è¾ƒç¹ç;</span><br><span class="line"></span><br><span class="line">å¦‚æœæ‰€æœ‰é…ç½®éƒ½ä½¿ç”¨ä¸åŒfilebeatï¼Œå¤šå®ä¾‹ä¼˜ç¼ºç‚¹:</span><br><span class="line">ä¼˜ç‚¹:</span><br><span class="line">- 1.å®ç°äº†é…ç½®æ–‡ä»¶å’Œç¨‹åºçš„è§£è€¦ï¼Œè¯´ç™½äº†ï¼Œå°±æ˜¯ä¸€ä¸ªå®ä¾‹æŒ‚æ‰ï¼Œä¸ä¼šå½±å“åˆ°å…¶ä»–å®ä¾‹;</span><br><span class="line">- 2.é…ç½®ç®€å•</span><br><span class="line">ç¼ºç‚¹:</span><br><span class="line">- 1.éƒ¨ç½²ä¸æ–¹ä¾¿ï¼Œè¦åŒæ—¶éƒ¨ç½²å¤šä¸ªfilebeatï¼Œä¸”æ•°æ®ç›®å½•éœ€è¦å•ç‹¬æŒ‡å®šç»´æŠ¤;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ELKæ—¥å¿—æ”¶é›† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ELK </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>EFKæ¶æ„éƒ¨ç½²</title>
      <link href="/posts/fab536ab.html"/>
      <url>/posts/fab536ab.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>è¯´æ˜ï¼šå…¨ç¯‡elasticæ˜¯åŸºäºUbuntuç³»ç»Ÿå®‰è£…çš„ï¼Œä¸Centoså·®åˆ«ä¸æ˜¯å¤ªå¤§ï¼Œä¸‹è½½è½¯ä»¶è¿æ¥å¯å»å®˜ç½‘ä¸‹è½½</p></blockquote><h2 id="ElasitcStackæ¦‚è¿°">ElasitcStackæ¦‚è¿°</h2><h3 id="1-ä»€ä¹ˆæ˜¯ElasticStackï¼Ÿ">1.ä»€ä¹ˆæ˜¯ElasticStackï¼Ÿ</h3><p>æ‰€è°“çš„ElasticStackåˆ«åä¸ºelk stackã€‚</p><p>ELKæŒ‡çš„æ˜¯ä¸‰ä¸ªæŠ€æœ¯æ ˆ:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- ElasticSearchï¼Œç®€ç§°ï¼š es</span><br><span class="line">æ•°æ®åº“ï¼Œåº”ç”¨åœºæ™¯ä¸ºæ•°æ®çš„å¿«é€Ÿæ£€ç´¢ã€‚ä½†å‡¡å’Œæœç´¢æ¡†ç›¸å…³çš„ï¼Œéƒ½ä¼šç”¨ESè¿›è¡Œæ•°æ®çš„æŸ¥è¯¢ã€‚</span><br><span class="line"></span><br><span class="line">- Logstash:</span><br><span class="line">é‡‡é›†æ•°æ®ï¼Œæ—¥å¿—èšåˆï¼Œå¤„ç†æ•°æ®ï¼Œå°†æ•°æ®å†™å…¥åˆ°ESå­˜å‚¨åº“ã€‚</span><br><span class="line"></span><br><span class="line">- Kibana:</span><br><span class="line">ç”¨äºå‡ºå›¾å±•ç¤ºæ•°æ®ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ç”±äºLogstashæ¯”è¾ƒé‡é‡çº§ï¼Œé‡‡é›†æ—¥å¿—æ—¶å¯åŠ¨è¾ƒæ…¢ï¼Œä½¿ç”¨JRubyè¯­è¨€ç ”å‘ï¼Œå¯åŠ¨æ—¶éœ€è¦å…ˆå¯åŠ¨è™šæ‹Ÿæœºã€‚å› æ­¤å®˜æ–¹å¼€å‘äº†beatsç»„ä»¶ï¼Œbeatsç»„ä»¶æ˜¯ä¸€ç³»åˆ—beatçš„é›†åˆï¼Œæ¯”å¦‚filebeatå°±æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„beatç»„ä»¶ï¼Œå¤šç”¨äºæ–‡æœ¬æ—¥å¿—é‡‡é›†ã€‚</span><br></pre></td></tr></table></figure><h3 id="2-å¸¸ç”¨çš„æ¶æ„">2.å¸¸ç”¨çš„æ¶æ„</h3><p>EFK:<br>- ElasticSearch<br>- Filebeat:<br>é‡‡é›†æ•°æ®å†™å…¥ESé›†ç¾¤ã€‚<br>- Kibana</p><p>ELFK:<br>- ElasticSearch<br>- Filebeat:<br>- Logstash<br>- Kibana</p><p>ELKF+KAFKA:<br>- zookeeper<br>- kafka</p><h2 id="ElasticSearch">ElasticSearch</h2><h3 id="1-ä»€ä¹ˆæ˜¯ElasticSearch">1.ä»€ä¹ˆæ˜¯ElasticSearch</h3><p>Elasticsearch æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ã€RESTful é£æ ¼çš„æœç´¢å’Œæ•°æ®åˆ†æå¼•æ“ï¼Œèƒ½å¤Ÿè§£å†³ä¸æ–­æ¶Œç°å‡ºçš„å„ç§ç”¨ä¾‹ã€‚ä½œä¸º Elastic Stack çš„æ ¸å¿ƒï¼ŒElasticsearch ä¼šé›†ä¸­å­˜å‚¨æ‚¨çš„æ•°æ®ï¼Œè®©æ‚¨é£å¿«å®Œæˆæœç´¢ï¼Œå¾®è°ƒç›¸å…³æ€§ï¼Œè¿›è¡Œå¼ºå¤§çš„åˆ†æï¼Œå¹¶è½»æ¾ç¼©æ”¾è§„æ¨¡ã€‚ESçš„æ ¸å¿ƒä½œç”¨å°±æ˜¯å­˜å‚¨æ•°æ®å’Œå¿«é€Ÿè¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢ã€‚</p><h3 id="2-å®‰è£…éƒ¨ç½²ES">2.å®‰è£…éƒ¨ç½²ES</h3><p><strong>å•ç‚¹éƒ¨ç½²ES</strong>   ä¸€èˆ¬ç”¨äºæµ‹è¯•</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">`æœ¬æœºipï¼š10.0.0.211`</span><br><span class="line">1.ä¸‹è½½ES</span><br><span class="line">[root@elk01 ~]# wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.17.23-amd64.deb</span><br><span class="line"></span><br><span class="line">2.å®‰è£…ES</span><br><span class="line">[root@elk01 ~]# dpkg -i elasticsearch-7.17.23-amd64.deb</span><br><span class="line"></span><br><span class="line">3.ä¿®æ”¹é…ç½®æ–‡ä»¶</span><br><span class="line">[root@elk01 ~]# vim /etc/elasticsearch/elasticsearch.yml </span><br><span class="line">cluster.name: elk</span><br><span class="line">path.data: /var/lib/elasticsearch</span><br><span class="line">path.logs: /var/log/elasticsearch</span><br><span class="line">network.host: 0.0.0.0</span><br><span class="line">http.port: 9200</span><br><span class="line">transport.port: 9300</span><br><span class="line">discovery.type: single-node</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">`ç›¸å…³å‚æ•°è¯´æ˜:`</span><br><span class="line">cluster.name: <span class="comment">#æŒ‡å®šESé›†ç¾¤çš„åç§°</span></span><br><span class="line">path.data: <span class="comment">#æŒ‡å®šæ•°æ®ç›®å½•</span></span><br><span class="line">path.logs: <span class="comment">#æŒ‡å®šæ—¥å¿—ç›®å½•</span></span><br><span class="line">network.host: <span class="comment">#æŒ‡å®šå®¿ä¸»æœºçš„ç›‘å¬IPã€‚</span></span><br><span class="line">http.port: 9200<span class="comment">#å¯¹å¤–æä¾›http|httpsæ¥å£çš„ç«¯å£ã€‚</span></span><br><span class="line">transport.port: 9300<span class="comment">#é›†ç¾¤å†…éƒ¨æ•°æ®ä¼ è¾“çš„ç«¯å£ï¼Œä¼šä¼˜å…ˆå¯åŠ¨è¯¥ç«¯å£é€‰ä¸¾masterååœ¨å¯åŠ¨9200ç«¯å£ã€‚</span></span><br><span class="line">discovery.type: <span class="comment">#æŒ‡å®šESé›†ç¾¤çš„ç±»å‹ï¼Œsingle-nodeè¡¨ç¤ºçš„æ˜¯å•ç‚¹ã€‚</span></span><br><span class="line"></span><br><span class="line">4.å¯åŠ¨ESå¹¶è®¾ç½®å¼€æœºè‡ªå¯</span><br><span class="line">[root@elk01 ~]# systemctl <span class="built_in">enable</span> --now elasticsearch</span><br><span class="line"></span><br><span class="line">5.æ£€æŸ¥ç›‘å¬çš„ç«¯å£å·</span><br><span class="line">[root@elk01 ~]# ss -lntup |egrep <span class="string">&#x27;9[23]00&#x27;</span></span><br><span class="line">tcp6       0      0 :::9200        :::*       LISTEN      6431/java</span><br><span class="line">tcp6       0      0 :::9300        :::*       LISTEN      6431/java</span><br><span class="line"></span><br><span class="line">6.æµ‹è¯•è®¿é—®</span><br><span class="line">[root@elk01:0 ~]# curl 10.0.0.211:9200</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span> : <span class="string">&quot;elk01&quot;</span>,</span><br><span class="line">  <span class="string">&quot;cluster_name&quot;</span> : <span class="string">&quot;elk&quot;</span>,</span><br><span class="line">  <span class="string">&quot;cluster_uuid&quot;</span> : <span class="string">&quot;vV46E9vqRK-MxDs6I-3ceg&quot;</span>,</span><br><span class="line">  <span class="string">&quot;version&quot;</span> : &#123;</span><br><span class="line">    <span class="string">&quot;number&quot;</span> : <span class="string">&quot;7.17.23&quot;</span>,</span><br><span class="line">    <span class="string">&quot;build_flavor&quot;</span> : <span class="string">&quot;default&quot;</span>,</span><br><span class="line">    <span class="string">&quot;build_type&quot;</span> : <span class="string">&quot;deb&quot;</span>,</span><br><span class="line">    <span class="string">&quot;build_hash&quot;</span> : <span class="string">&quot;61d76462eecaf09ada684d1b5d319b5ff6865a83&quot;</span>,</span><br><span class="line">    <span class="string">&quot;build_date&quot;</span> : <span class="string">&quot;2024-07-25T14:37:42.448799567Z&quot;</span>,</span><br><span class="line">    <span class="string">&quot;build_snapshot&quot;</span> : <span class="literal">false</span>,</span><br><span class="line">    <span class="string">&quot;lucene_version&quot;</span> : <span class="string">&quot;8.11.3&quot;</span>,</span><br><span class="line">    <span class="string">&quot;minimum_wire_compatibility_version&quot;</span> : <span class="string">&quot;6.8.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;minimum_index_compatibility_version&quot;</span> : <span class="string">&quot;6.0.0-beta1&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;tagline&quot;</span> : <span class="string">&quot;You Know, for Search&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹é›†ç¾¤èŠ‚ç‚¹</span></span><br><span class="line">[root@elk01:0 ~]# curl 10.0.0.211:9200/_cat/nodes</span><br><span class="line">10.0.0.211 19 91 11 0.10 0.23 0.11 cdfhilmrstw * elk01</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ˜¾ç¤ºè¡¨å¤´ä¿¡æ¯    *ä»£è¡¨masterèŠ‚ç‚¹</span></span><br><span class="line">[root@elk01:0 ~]# curl 10.0.0.211:9200/_cat/nodes?v</span><br><span class="line">ip         heap.percent ram.percent cpu load_1m load_5m load_15m node.role   master name</span><br><span class="line">10.0.0.211           20          91   0    0.06    0.21     0.11 cdfhilmrstw *      elk01</span><br></pre></td></tr></table></figure><p><strong>å¦‚ä½•å¸è½½ESï¼Ÿ</strong></p><pre><code>1.åœæ­¢ESæœåŠ¡[root@elk91 ~]# systemctl disable --now elasticsearch.service 2.åˆ é™¤æ•°æ®[root@elk91 ~]# \rm -rf  /var/&#123;lib,log&#125;/elasticsearch/ /tmp/*  /etc/elasticsearch3.åˆ é™¤è½¯ä»¶[root@elk91 ~]# sudo yum remove elasticsearch[root@elk91 ~]# sudo rpm -e elasticsearch</code></pre><h3 id="3-éƒ¨ç½²ESé›†ç¾¤">3.éƒ¨ç½²ESé›†ç¾¤</h3><table><thead><tr><th>ä¸»æœºå</th><th>WanIP</th><th>LanIP</th></tr></thead><tbody><tr><td>elk01</td><td>10.0.0.211</td><td>172.16.1.211</td></tr><tr><td>elk02</td><td>10.0.0.222</td><td>172.16.1.222</td></tr><tr><td>elk03</td><td>10.0.0.233</td><td>172.16.1.233</td></tr></tbody></table><p><strong>1.æ‰€æœ‰èŠ‚ç‚¹å®‰è£…ElasticSearch</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.ä¸‹è½½ES</span><br><span class="line">[root@elk01 ~]# wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.17.23-amd64.deb</span><br><span class="line">[root@elk01 ~]# <span class="keyword">for</span> i <span class="keyword">in</span> 212 213;<span class="keyword">do</span> scp elasticsearch-7.17.23-x86_64.rpm root@172.16.1.<span class="variable">$i</span>:/root ;<span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">2.å®‰è£…ES</span><br><span class="line">[root@elk01 ~]#dpkg -i elasticsearch-7.17.23-amd64.deb</span><br></pre></td></tr></table></figure><p><strong>2.ä¿®æ”¹é…ç½®æ–‡ä»¶</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@elk01 ~]# vim /etc/elasticsearch/elasticsearch.yml </span><br><span class="line">cluster.name: elk</span><br><span class="line">path.data: /var/lib/elasticsearch</span><br><span class="line">path.logs: /var/log/elasticsearch</span><br><span class="line">network.host: 0.0.0.0</span><br><span class="line">http.port: 9200</span><br><span class="line">transport.port: 9300</span><br><span class="line">discovery.seed_hosts: [<span class="string">&quot;10.0.0.211&quot;</span>, <span class="string">&quot;10.0.0.212&quot;</span>,<span class="string">&quot;10.0.0.213&quot;</span>]</span><br><span class="line">cluster.initial_master_nodes: [<span class="string">&quot;10.0.0.211&quot;</span>, <span class="string">&quot;10.0.0.212&quot;</span>,<span class="string">&quot;10.0.0.213&quot;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">`ç›¸å…³å‚æ•°è¯´æ˜:`</span><br><span class="line">discovery.seed_hosts:<span class="comment">#å½“å‰ESé›†ç¾¤çš„ä¸»æœºåˆ—è¡¨ã€‚</span></span><br><span class="line">cluster.initial_master_nodes:<span class="comment">#é›†ç¾¤å¯åŠ¨æ—¶é¦–æ¬¡å‚ä¸masteré€‰ä¸¾çš„èŠ‚ç‚¹åˆ—è¡¨ã€‚</span></span><br></pre></td></tr></table></figure><p><strong>3.å°†é…ç½®æ–‡ä»¶æ‹·è´åˆ°å…¶ä»–èŠ‚ç‚¹</strong></p><pre><code>[root@elk01 ~]# scp /etc/elasticsearch/elasticsearch.yml root@172.16.1.212:/etc/elasticsearch/[root@elk01 ~]# scp /etc/elasticsearch/elasticsearch.yml root@172.16.1.213:/etc/elasticsearch/</code></pre><p>**4.å¯åŠ¨ESé›†ç¾¤ **</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@elk01 ~]# systemctl <span class="built_in">enable</span> --now elasticsearch.service </span><br><span class="line">[root@elk02 ~]# systemctl <span class="built_in">enable</span> --now elasticsearch.service </span><br><span class="line">[root@elk03 ~]# systemctl <span class="built_in">enable</span> --now elasticsearch.service </span><br></pre></td></tr></table></figure><p><strong>5.æŸ¥çœ‹ç«¯å£æ˜¯å¦ç›‘å¬é›†ç¾¤</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@elk01 ~]# ss -lntup |egrep <span class="string">&#x27;9[23]00&#x27;</span></span><br><span class="line">tcp6       0      0 :::9200        :::*       LISTEN      6431/java</span><br><span class="line">tcp6       0      0 :::9300        :::*       LISTEN      6431/java</span><br></pre></td></tr></table></figure><p><strong>6.æŸ¥çœ‹é›†ç¾¤èŠ‚ç‚¹ä¿¡æ¯</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@elk01:0 ~]# curl 10.0.0.213:9200/_cat/nodes</span><br><span class="line">10.0.0.212  9 94  8 0.46 0.49 0.31 cdfhilmrstw - elk02</span><br><span class="line">10.0.0.211 25 95 21 0.56 0.47 0.25 cdfhilmrstw * elk01</span><br><span class="line">10.0.0.213 28 90 25 1.21 0.78 0.43 cdfhilmrstw - elk03</span><br><span class="line"></span><br><span class="line"><span class="comment">#elk02æ˜¯ä¸»èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">#æŸ¥çœ‹nameå’Œuuid</span></span><br><span class="line">[root@elk01 ~]# curl -s 10.0.0.211:9200|egrep <span class="string">&#x27;_name|_uuid&#x27;</span></span><br><span class="line">  <span class="string">&quot;cluster_name&quot;</span> : <span class="string">&quot;my-elk&quot;</span>,</span><br><span class="line">  <span class="string">&quot;cluster_uuid&quot;</span> : <span class="string">&quot;pI91AngOTf2G4LYIUzd9FA&quot;</span></span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment">#æŸ¥çœ‹æ‰€æœ‰èŠ‚ç‚¹ï¼Ÿ</span></span><br><span class="line">[root@elk01 ~]# <span class="keyword">for</span> i <span class="keyword">in</span> `<span class="built_in">seq</span> 211 213`;<span class="keyword">do</span> curl -s 10.0.0.<span class="variable">$i</span>:9200|egrep <span class="string">&#x27;_name|_uuid&#x27;</span>;<span class="keyword">done</span></span><br><span class="line">  <span class="string">&quot;cluster_name&quot;</span> : <span class="string">&quot;my-elk&quot;</span>,</span><br><span class="line">  <span class="string">&quot;cluster_uuid&quot;</span> : <span class="string">&quot;pI91AngOTf2G4LYIUzd9FA&quot;</span>,</span><br><span class="line">  <span class="string">&quot;cluster_name&quot;</span> : <span class="string">&quot;my-elk&quot;</span>,</span><br><span class="line">  <span class="string">&quot;cluster_uuid&quot;</span> : <span class="string">&quot;pI91AngOTf2G4LYIUzd9FA&quot;</span>,</span><br><span class="line">  <span class="string">&quot;cluster_name&quot;</span> : <span class="string">&quot;my-elk&quot;</span>,</span><br><span class="line">  <span class="string">&quot;cluster_uuid&quot;</span> : <span class="string">&quot;pI91AngOTf2G4LYIUzd9FA&quot;</span>,</span><br></pre></td></tr></table></figure><p><strong>7.ESé›†ç¾¤å†™å…¥å’Œè¯»å–æ•°æ®</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å†™å…¥æ•°æ®  ï¼ˆtestæ˜¯ç´¢å¼•ï¼Œè‡ªå®šä¹‰ï¼‰</span></span><br><span class="line">curl -X POST -H <span class="string">&quot;Content-Type:application/json&quot;</span> 10.0.0.211:9200/test/_doc -d <span class="string">&#x27;&#123;&quot;name&quot;:&quot;zhang3&quot;,&quot;age&quot;:&quot;18&quot;&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#è¯»å–æ•°æ®ï¼ˆjqéœ€è¦å®‰è£…ï¼Œæ ¼å¼åŒ–è¾“å‡ºï¼Œ212/213ä¹Ÿèƒ½è¯»å–åˆ°æ•°æ®ï¼Œå› ä¸ºæ˜¯esé›†ç¾¤ï¼‰</span></span><br><span class="line">[root@elk01 ~]# curl -s 10.0.0.211:9200/test/_search | jq .hits</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;total&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;value&quot;</span>: 1,</span><br><span class="line">    <span class="string">&quot;relation&quot;</span>: <span class="string">&quot;eq&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;max_score&quot;</span>: 1,</span><br><span class="line">  <span class="string">&quot;hits&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;_index&quot;</span>: <span class="string">&quot;test&quot;</span>,</span><br><span class="line">      <span class="string">&quot;_type&quot;</span>: <span class="string">&quot;_doc&quot;</span>,</span><br><span class="line">      <span class="string">&quot;_id&quot;</span>: <span class="string">&quot;ppKQ0ZEB6pCPlAoKbzPE&quot;</span>,</span><br><span class="line">      <span class="string">&quot;_score&quot;</span>: 1,</span><br><span class="line">      <span class="string">&quot;_source&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;zhang3&quot;</span>,</span><br><span class="line">        <span class="string">&quot;age&quot;</span>: <span class="string">&quot;18&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="kibanaè¯»å–æ•°æ®">kibanaè¯»å–æ•°æ®</h2><h3 id="1-kibanaæ¦‚è¿°">1.kibanaæ¦‚è¿°</h3><p>ä½¿ç”¨ Kibana é’ˆå¯¹å¤§è§„æ¨¡æ•°æ®å¿«é€Ÿè¿è¡Œæ•°æ®åˆ†æï¼Œä»¥å®ç°å¯è§‚æµ‹æ€§ã€å®‰å…¨å’Œæœç´¢ã€‚å¯¹æ¥è‡ªä»»ä½•æ¥æºçš„ä»»ä½•æ•°æ®è¿›è¡Œå…¨é¢é€å½»çš„åˆ†æï¼Œä»å¨èƒæƒ…æŠ¥åˆ°æœç´¢åˆ†æï¼Œä»æ—¥å¿—åˆ°åº”ç”¨ç¨‹åºç›‘æµ‹ï¼Œä¸ä¸€è€Œè¶³ã€‚è¯´ç™½äº†ï¼Œkibanaå°±æ˜¯ä»ESæŸ¥è¯¢æ•°æ®å¹¶å±•ç¤ºæ•°æ®ã€‚</p><h3 id="2-éƒ¨ç½²kibana">2.éƒ¨ç½²kibana</h3><p><strong>1.ä¸‹è½½ &amp; å®‰è£…kibana</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@elk01 ~]# wget https://artifacts.elastic.co/downloads/kibana/kibana-7.17.23-amd64.deb</span><br><span class="line"></span><br><span class="line">[root@elk01 ~]# dpkg -i kibana-7.17.23-amd64.deb </span><br></pre></td></tr></table></figure><p><strong>2.ä¿®æ”¹é…ç½®æ–‡ä»¶</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@elk91 ~]# vim /etc/kibana/kibana.yml </span><br><span class="line">server.port: 5601</span><br><span class="line">server.host: <span class="string">&quot;0.0.0.0&quot;</span></span><br><span class="line">server.name: <span class="string">&quot;kibana&quot;</span></span><br><span class="line">elasticsearch.hosts: [<span class="string">&quot;http://10.0.0.211:9200&quot;</span>,<span class="string">&quot;http://10.0.0.212:9200&quot;</span>,<span class="string">&quot;http://10.0.0.213:9200&quot;</span>]</span><br><span class="line">i18n.locale: <span class="string">&quot;zh-CN&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-å¯åŠ¨kibana">3.å¯åŠ¨kibana</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@elk01 ~]# systemctl <span class="built_in">enable</span> --now kibana</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹ç«¯å£æ˜¯å¦å¯åŠ¨</span></span><br><span class="line">[root@elk01 ~]# ss  -lntup|grep 5601</span><br><span class="line">tcp        0      0 0.0.0.0:5601      0.0.0.0:*     LISTEN      9696/node  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æµè§ˆå™¨è®¿é—®</span></span><br><span class="line">10.0.0.211:5601</span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/QQ_1725800433992.png" alt="QQ_1725800433992"></p><p><strong>ç´¢å¼•ç®¡ç†å°±æœ‰æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„æ•°æ®</strong></p><p><img src="https://cos.lukme.top/Pic/image-20241002121943290.png" alt="image-20241002121943290"></p><p><strong>å¦‚ä½•æŸ¥è¯¢é‚£ä¸ªæ•°æ®å‘¢ï¼Ÿ</strong></p><p><img src="https://cos.lukme.top/Pic/QQ_1725800690692.png" alt="QQ_1725800690692"></p><p><img src="https://cos.lukme.top/Pic/QQ_1725800736873.png" alt="QQ_1725800736873"></p><p><img src="https://cos.lukme.top/Pic/QQ_1725800780918.png" alt="QQ_1725800780918"></p><h3 id="4-kibanaæŸ¥è¯¢ESæ•°æ®">4.kibanaæŸ¥è¯¢ESæ•°æ®</h3><p><strong>1.å‡†å¤‡æµ‹è¯•æ•°æ®</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST -H <span class="string">&quot;Content-Type:application/json&quot;</span> 10.0.0.211:9200/_bulk -d <span class="string">&#x27;</span></span><br><span class="line"><span class="string">&#123; &quot;index&quot; : &#123; &quot;_index&quot; : &quot;student1&quot;&#125; &#125;</span></span><br><span class="line"><span class="string">&#123;&quot;name&quot;:&quot;æå››&quot;,&quot;hobby&quot;:[&quot;å­¦ä¹ &quot;,&quot;ç©æ‰‹æœº&quot;,&quot;çœ‹ç¾å¥³&quot;]&#125;</span></span><br><span class="line"><span class="string">&#123; &quot;index&quot; : &#123; &quot;_index&quot; : &quot;student2&quot;&#125; &#125;</span></span><br><span class="line"><span class="string">&#123;&quot;name&quot;:&quot;å¼ ä¸‰&quot;,&quot;hobby&quot;:[&quot;å¤§é•¿è…¿&quot;,&quot;å­¦ä¹ &quot;]&#125;</span></span><br><span class="line"><span class="string">&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ç»ˆç«¯è¾“å‡ºå¦‚ä¸‹å³OK</span></span><br><span class="line">&#123;<span class="string">&quot;took&quot;</span>:780,<span class="string">&quot;errors&quot;</span>:<span class="literal">false</span>,<span class="string">&quot;items&quot;</span>:[&#123;<span class="string">&quot;index&quot;</span>:&#123;<span class="string">&quot;_index&quot;</span>:<span class="string">&quot;student&quot;</span>,<span class="string">&quot;_type&quot;</span>:<span class="string">&quot;_doc&quot;</span>,<span class="string">&quot;_id&quot;</span>:<span class="string">&quot;YWacOJIBCijr5nh3GosC&quot;</span>,<span class="string">&quot;_version&quot;</span>:1,<span class="string">&quot;result&quot;</span>:<span class="string">&quot;created&quot;</span>,<span class="string">&quot;_shards&quot;</span>:&#123;<span class="string">&quot;total&quot;</span>:2,<span class="string">&quot;successful&quot;</span>:2,<span class="string">&quot;failed&quot;</span>:0&#125;,<span class="string">&quot;_seq_no&quot;</span>:0,<span class="string">&quot;_primary_term&quot;</span>:1,<span class="string">&quot;status&quot;</span>:201&#125;&#125;,&#123;<span class="string">&quot;index&quot;</span>:&#123;<span class="string">&quot;_index&quot;</span>:<span class="string">&quot;student&quot;</span>,<span class="string">&quot;_type&quot;</span>:<span class="string">&quot;_doc&quot;</span>,<span class="string">&quot;_id&quot;</span>:<span class="string">&quot;YmacOJIBCijr5nh3GosC&quot;</span>,<span class="string">&quot;_version&quot;</span>:1,<span class="string">&quot;result&quot;</span>:<span class="string">&quot;created&quot;</span>,<span class="string">&quot;_shards&quot;</span>:&#123;<span class="string">&quot;total&quot;</span>:2,<span class="string">&quot;successful&quot;</span>:2,<span class="string">&quot;failed&quot;</span>:0&#125;,<span class="string">&quot;_seq_no&quot;</span>:1,<span class="string">&quot;_primary_term&quot;</span>:1,<span class="string">&quot;status&quot;</span>:201&#125;&#125;]&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#apiè°ƒå–æ–¹æ³•--å®˜æ–¹æ–‡æ¡£ï¼šhttps://www.elastic.co/guide/en/elasticsearch/reference/7.17/docs-bulk.html</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æµè§ˆå™¨å†æ¬¡è®¿é—®  kibana  ï¼Œå‘ç°ç´¢å¼•ç®¡ç†ä¼šå¤šå‡ºæ¥ä¸€ä¸ªæˆ‘ä»¬åˆ›å»ºçš„studentç´¢å¼•</span></span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/image-20241002122102175.png" alt="image-20241002122102175"></p><p><strong>2.åˆ›å»ºç´¢å¼•æ¨¡å¼</strong></p><p>kibanaçš„ç´¢å¼•æ¨¡å¼ç”¨äºåŒ¹é…ESé›†ç¾¤çš„ä¸€ä¸ªæˆ–å¤šä¸ªç´¢å¼•ã€‚     student*</p><p><img src="https://cos.lukme.top/Pic/image-20241002122146329.png" alt="image-20241002122146329"></p><p><strong>3.kibanaæŸ¥è¯¢æ•°æ®</strong></p><p><img src="https://cos.lukme.top/Pic/image-20241002122628647.png" alt="image-20241002122628647"></p><p><strong>ä»¥å­—æ®µæŸ¥è¯¢</strong></p><p><img src="https://cos.lukme.top/Pic/image-20241002122712583.png" alt="image-20241002122712583"></p><p><img src="https://cos.lukme.top/Pic/image-20241002122754986.png" alt="image-20241002122754986"></p><p><strong>ä½¿ç”¨jsonæ ¼å¼æŸ¥è¯¢</strong></p><p><img src="https://cos.lukme.top/Pic/image-20241002122306868.png" alt="image-20241002122306868"></p><p><strong>å…¶å®ƒæ–¹å¼æŸ¥è¯¢é›†ç¾¤é¢œè‰²</strong></p><p>1.é€šè¿‡es-headç»„ä»¶æŸ¥è¯¢ï¼ˆä¸€ä¸ªæ’ä»¶ï¼‰</p><p>2.åŸºäºå®˜æ–¹çš„APIæŸ¥è¯¢</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@elk01:1 ~]# curl -s 10.0.0.211:9200/_cat/indices?v</span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/image-20241002122830955.png" alt="image-20241002122830955"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@elk01:1 ~]# curl -s 10.0.0.211:9200/_cat/indices|awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span></span><br><span class="line">green</span><br><span class="line">green</span><br><span class="line">green</span><br><span class="line">green</span><br><span class="line">green</span><br></pre></td></tr></table></figure><h2 id="Filebeaté‡‡é›†æ•°æ®">Filebeaté‡‡é›†æ•°æ®</h2><p><strong>filebeat</strong><br>æ— è®ºæ‚¨æ˜¯ä»å®‰å…¨è®¾å¤‡ã€äº‘ã€å®¹å™¨ã€ä¸»æœºè¿˜æ˜¯ OT è¿›è¡Œæ•°æ®æ”¶é›†ï¼ŒFilebeat éƒ½å°†ä¸ºæ‚¨æä¾›ä¸€ç§è½»é‡å‹æ–¹æ³•ï¼Œç”¨äºè½¬å‘å’Œæ±‡æ€»æ—¥å¿—ä¸æ–‡ä»¶ï¼Œè®©ç®€å•çš„äº‹æƒ…ä¸å†ç¹æ‚ã€‚è¯´ç™½äº†ï¼Œfilebeatçš„æ ¸å¿ƒå°±æ˜¯é‡‡é›†æ—¥å¿—å¹¶å°†æ—¥å¿—å‘é€åˆ°æˆ‘ä»¬æœŸæœ›çš„ç›®çš„ç«¯ã€‚æœ¬è´¨æ ¸å¿ƒå°±æ˜¯input(æ•°æ®ä»å“ªæ¥)å’Œoutput(æ•°æ®åˆ°å“ªå»)ã€‚</p><p><strong>==filebeaté»˜è®¤æ˜¯æŒ‰è¡Œè¯»å–æ•°æ®==</strong></p><p><img src="https://cos.lukme.top/Pic/elkmassage.png" alt="elkmassage"></p><h3 id="éƒ¨ç½²filebeat">éƒ¨ç½²filebeat</h3><p><a href="https://www.elastic.co/guide/en/beats/filebeat/7.17/configuring-howto-filebeat.html">Filebeat Reference å®˜æ–¹æ–‡æ¡£</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.ä¸‹è½½filebeatåŒ…</span><br><span class="line">[root@elk01 ~]# wget https://artifacts.elastic.co/downloads/beats/filebeat/filebeat-7.17.23-amd64.deb</span><br><span class="line"></span><br><span class="line">2.å®‰è£…filebeat </span><br><span class="line">[root@elk01 ~]# dpkg -i filebeat-7.17.23-amd64.deb </span><br></pre></td></tr></table></figure><h3 id="é‡‡é›†æ•°æ®ç»ˆç«¯åˆ°ç»ˆç«¯">é‡‡é›†æ•°æ®ç»ˆç«¯åˆ°ç»ˆç«¯</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å†™æ³•è§å®˜æ–¹ï¼Œç›´æ¥å¤åˆ¶ä½¿ç”¨  (åœ¨ inputs å’Œ Output é‡Œé€‰æ‹©ç›¸åº”çš„æ–¹å¼)</span></span><br><span class="line"><span class="string">&#x27;https://www.elastic.co/guide/en/beats/filebeat/7.17/configuring-howto-filebeat.html&#x27;</span></span><br><span class="line">1.ç¼–å†™filebeatçš„é…ç½®æ–‡ä»¶      ï¼ˆinputs&gt;Stdin  æ ‡å‡†è¾“å…¥    output&gt;Console  ç»ˆç«¯è¾“å‡ºï¼‰</span><br><span class="line">[root@elk01 ~]# <span class="built_in">cat</span> /etc/filebeat/01-stdin-stdout.yaml </span><br><span class="line"><span class="comment"># æ•°æ®ä»æ ‡å‡†è¾“å…¥æ¥</span></span><br><span class="line">filebeat.inputs:</span><br><span class="line">- <span class="built_in">type</span>: stdin</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ•°æ®åˆ°ç»ˆç‚¹</span></span><br><span class="line">output.console:</span><br><span class="line">  pretty: <span class="literal">true</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">#2.å¯åŠ¨filebeatå®ä¾‹</span></span><br><span class="line">ç›¸å…³å‚æ•°è¯´ ï¼š</span><br><span class="line">-c &lt;config&gt;:</span><br><span class="line">æŒ‡å®šçš„æ˜¯é…ç½®æ–‡ä»¶ </span><br><span class="line">-e :</span><br><span class="line">å¼€å¯è°ƒè¯•æ¨¡å¼ï¼Œå°†æ—¥å¿—è¾“å‡ºåˆ°ç»ˆç«¯ã€‚</span><br><span class="line"></span><br><span class="line">[root@elk01:1 ~]# filebeat -e -c /etc/filebeat/01-stdin-stdout.yaml </span><br><span class="line"><span class="comment">#ç»ˆç«¯æˆ‘è¾“å…¥çš„</span></span><br><span class="line">66666666666666666666666666666666</span><br><span class="line"></span><br><span class="line"><span class="comment">#è¾“å‡ºå†…å®¹ï¼šå¾ˆæ˜æ˜¾ï¼Œæ•°æ®è¢«å°è£…åˆ°äº†ä¸€ä¸ª&quot;message&quot;å­—æ®µä¸­ã€‚</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;@timestamp&quot;</span>: <span class="string">&quot;2024-09-28T13:23:12.146Z&quot;</span>,</span><br><span class="line">  <span class="string">&quot;@metadata&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;beat&quot;</span>: <span class="string">&quot;filebeat&quot;</span>,</span><br><span class="line">    <span class="string">&quot;type&quot;</span>: <span class="string">&quot;_doc&quot;</span>,</span><br><span class="line">    <span class="string">&quot;version&quot;</span>: <span class="string">&quot;7.17.23&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;input&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;type&quot;</span>: <span class="string">&quot;stdin&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;ecs&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;version&quot;</span>: <span class="string">&quot;1.12.0&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;host&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;elk01&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;agent&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;type&quot;</span>: <span class="string">&quot;filebeat&quot;</span>,</span><br><span class="line">    <span class="string">&quot;version&quot;</span>: <span class="string">&quot;7.17.23&quot;</span>,</span><br><span class="line">    <span class="string">&quot;hostname&quot;</span>: <span class="string">&quot;elk01&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ephemeral_id&quot;</span>: <span class="string">&quot;13686d12-e255-4c48-a609-dcc4b8331c44&quot;</span>,</span><br><span class="line">    <span class="string">&quot;id&quot;</span>: <span class="string">&quot;9e9b0f4e-cbe0-4e5b-bab2-501e50f67620&quot;</span>,</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;elk01&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;log&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;offset&quot;</span>: 0,</span><br><span class="line">    <span class="string">&quot;file&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;path&quot;</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;message&quot;</span>: <span class="string">&quot;66666666666666666666666666666666&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">2024-09-28T21:23:13.147+0800    ERROR   file/states.go:125      State <span class="keyword">for</span>  should have been dropped, but couldn<span class="string">&#x27;t as state is not finished.</span></span><br></pre></td></tr></table></figure><h3 id="filebeatç›‘å¬tcpç«¯å£">filebeatç›‘å¬tcpç«¯å£</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1ã€‚ç¼–å†™filebeaté…ç½®æ–‡ä»¶       ï¼ˆinputs&gt;tcp   æŒ‡å®štcpç«¯å£ï¼‰</span></span><br><span class="line">[root@elk01 ~]# <span class="built_in">cat</span> /etc/filebeat/02-tcp-console.yaml </span><br><span class="line"><span class="comment"># æ•°æ®ä»ç›‘å¬çš„æŒ‡å®štcpç«¯å£æ¥</span></span><br><span class="line">filebeat.inputs:</span><br><span class="line">- <span class="built_in">type</span>: tcp</span><br><span class="line">  host: <span class="string">&quot;0.0.0.0:9000&quot;</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">#æ•°æ®åˆ°ç»ˆç‚¹</span></span><br><span class="line">output.console:</span><br><span class="line">  pretty: <span class="literal">true</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">#2.å¯åŠ¨filebeatå®ä¾‹</span></span><br><span class="line">[root@elk01:1 ~]# filebeat -e -c /etc/filebeat/02-tcp-console.yaml </span><br><span class="line"></span><br><span class="line"><span class="comment">#3.å‘é€æµ‹è¯•æ•°æ®</span></span><br><span class="line">[root@elk03:0 ~]# <span class="built_in">echo</span> <span class="string">&quot;hello world&quot;</span> | nc 10.0.0.211 9000</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#4.è§‚å¯Ÿfilebeatæ˜¯å¦é‡‡é›†åˆ°æ•°æ®</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;@timestamp&quot;</span>: <span class="string">&quot;2024-09-28T13:33:01.962Z&quot;</span>,</span><br><span class="line">  <span class="string">&quot;@metadata&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;beat&quot;</span>: <span class="string">&quot;filebeat&quot;</span>,</span><br><span class="line">    <span class="string">&quot;type&quot;</span>: <span class="string">&quot;_doc&quot;</span>,</span><br><span class="line">    <span class="string">&quot;version&quot;</span>: <span class="string">&quot;7.17.23&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;input&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;type&quot;</span>: <span class="string">&quot;tcp&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;ecs&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;version&quot;</span>: <span class="string">&quot;1.12.0&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;host&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;elk01&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;agent&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;elk01&quot;</span>,</span><br><span class="line">    <span class="string">&quot;type&quot;</span>: <span class="string">&quot;filebeat&quot;</span>,</span><br><span class="line">    <span class="string">&quot;version&quot;</span>: <span class="string">&quot;7.17.23&quot;</span>,</span><br><span class="line">    <span class="string">&quot;hostname&quot;</span>: <span class="string">&quot;elk01&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ephemeral_id&quot;</span>: <span class="string">&quot;a43721b4-8160-4985-9f6f-67c0178affa7&quot;</span>,</span><br><span class="line">    <span class="string">&quot;id&quot;</span>: <span class="string">&quot;9e9b0f4e-cbe0-4e5b-bab2-501e50f67620&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;message&quot;</span>: <span class="string">&quot;hello world&quot;</span>,</span><br><span class="line">  <span class="string">&quot;log&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;source&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;address&quot;</span>: <span class="string">&quot;10.0.0.213:47174&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é‡‡é›†æœ¬åœ°æ–‡ä»¶è¾“å‡ºæ•°æ®åˆ°ç»ˆç«¯">é‡‡é›†æœ¬åœ°æ–‡ä»¶è¾“å‡ºæ•°æ®åˆ°ç»ˆç«¯</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">1.ç¼–å†™filebeaté…ç½®æ–‡ä»¶    ï¼ˆinputs&gt;<span class="built_in">log</span>ï¼‰</span><br><span class="line">[root@elk01 ~]# <span class="built_in">cat</span> /etc/filebeat/03-log-console.yaml</span><br><span class="line"><span class="comment"># æ•°æ®ä»ç›‘å¬çš„æŒ‡å®šæ–‡ä»¶æ¥</span></span><br><span class="line">filebeat.inputs:</span><br><span class="line">- <span class="built_in">type</span>: <span class="built_in">log</span></span><br><span class="line">  paths:</span><br><span class="line">    - /tmp/test.log</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ•°æ®åˆ°ç»ˆç‚¹</span></span><br><span class="line">output.console:</span><br><span class="line">  pretty: <span class="literal">true</span></span><br><span class="line">  </span><br><span class="line">2.å¯åŠ¨filebeatå®ä¾‹</span><br><span class="line">[root@elk01:1 ~]# filebeat -e -c /etc/filebeat/03-log-console.yaml</span><br><span class="line"></span><br><span class="line">3.å†™å…¥æµ‹è¯•æ•°æ®(å¦å¼€ä¸€ä¸ªç»ˆç«¯å†™å…¥)</span><br><span class="line">[root@elk01:0 ~]# <span class="built_in">echo</span> <span class="string">&#x27;999&#x27;</span> &gt; /tmp/test.log</span><br><span class="line"></span><br><span class="line">4.è§‚å¯Ÿç»ˆç«¯è¾“å‡º</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;@timestamp&quot;</span>: <span class="string">&quot;2024-09-28T13:48:53.645Z&quot;</span>,</span><br><span class="line">  <span class="string">&quot;@metadata&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;beat&quot;</span>: <span class="string">&quot;filebeat&quot;</span>,</span><br><span class="line">    <span class="string">&quot;type&quot;</span>: <span class="string">&quot;_doc&quot;</span>,</span><br><span class="line">    <span class="string">&quot;version&quot;</span>: <span class="string">&quot;7.17.23&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;log&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;offset&quot;</span>: 0,           <span class="comment">#æ³¨æ„è¿™ä¸ªå­—æ®µ</span></span><br><span class="line">    <span class="string">&quot;file&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;path&quot;</span>: <span class="string">&quot;/tmp/test.log&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;message&quot;</span>: <span class="string">&quot;hello world&quot;</span>,</span><br><span class="line">  <span class="string">&quot;input&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;type&quot;</span>: <span class="string">&quot;log&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;agent&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;id&quot;</span>: <span class="string">&quot;9e9b0f4e-cbe0-4e5b-bab2-501e50f67620&quot;</span>,</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;elk01&quot;</span>,</span><br><span class="line">    <span class="string">&quot;type&quot;</span>: <span class="string">&quot;filebeat&quot;</span>,</span><br><span class="line">    <span class="string">&quot;version&quot;</span>: <span class="string">&quot;7.17.23&quot;</span>,</span><br><span class="line">    <span class="string">&quot;hostname&quot;</span>: <span class="string">&quot;elk01&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ephemeral_id&quot;</span>: <span class="string">&quot;10485e22-a3e8-40f0-bbb9-c194f9541bf4&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;ecs&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;version&quot;</span>: <span class="string">&quot;1.12.0&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;host&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;elk01&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>5.éªŒè¯filebeaté‡‡é›†æ•°æ®æ˜¯æŒ‰è¡Œè¯»å–    (æ³¨æ„offset å­—æ®µå˜åŒ–)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å†æ¬¡å†™å…¥æ•°æ®è§‚å¯Ÿé‡‡é›†æƒ…å†µ</span></span><br><span class="line">[root@elk01:0 ~]# <span class="built_in">echo</span> <span class="string">&#x27;hello world&#x27;</span> &gt;&gt; /tmp/test.log</span><br><span class="line"></span><br><span class="line"><span class="comment">#è§‚å¯Ÿoffsetï¼ˆåç§»é‡ï¼‰</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;@timestamp&quot;</span>: <span class="string">&quot;2024-09-28T13:54:03.721Z&quot;</span>,</span><br><span class="line">  <span class="string">&quot;@metadata&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;beat&quot;</span>: <span class="string">&quot;filebeat&quot;</span>,</span><br><span class="line">    <span class="string">&quot;type&quot;</span>: <span class="string">&quot;_doc&quot;</span>,</span><br><span class="line">    <span class="string">&quot;version&quot;</span>: <span class="string">&quot;7.17.23&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;log&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;offset&quot;</span>: 4,    <span class="comment">#ä¸ºå•¥æ˜¯å››ä¸ªåç§»é‡ï¼Ÿ</span></span><br><span class="line">    <span class="string">&quot;file&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;path&quot;</span>: <span class="string">&quot;/tmp/test.log&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;message&quot;</span>: <span class="string">&quot;999hello world&quot;</span>,</span><br><span class="line">  <span class="string">&quot;input&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;type&quot;</span>: <span class="string">&quot;log&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;agent&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;hostname&quot;</span>: <span class="string">&quot;elk01&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ephemeral_id&quot;</span>: <span class="string">&quot;10485e22-a3e8-40f0-bbb9-c194f9541bf4&quot;</span>,</span><br><span class="line">    <span class="string">&quot;id&quot;</span>: <span class="string">&quot;9e9b0f4e-cbe0-4e5b-bab2-501e50f67620&quot;</span>,</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;elk01&quot;</span>,</span><br><span class="line">    <span class="string">&quot;type&quot;</span>: <span class="string">&quot;filebeat&quot;</span>,</span><br><span class="line">    <span class="string">&quot;version&quot;</span>: <span class="string">&quot;7.17.23&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;ecs&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;version&quot;</span>: <span class="string">&quot;1.12.0&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;host&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;elk01&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#å› ä¸ºä¸Šæ¬¡999ä¸‰ä¸ªä¹‹åæœ‰ä¸ªç‰¹æ®Šå­—ç¬¦--æ¢è¡Œç¬¦ï¼Œæ‰€ä»¥offsetä¹‹å‰é‡‡é›†çš„åç§»é‡æ˜¯4ä¸ª</span></span><br></pre></td></tr></table></figure><p><strong>å¦‚ä½•éªŒè¯filebeatæ˜¯æŒ‰è¡Œé‡‡é›†æ•°æ®çš„ï¼Ÿ</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@elk01:0 ~]# <span class="built_in">echo</span> -n <span class="string">&#x27;ABCD&#x27;</span> &gt;&gt; /tmp/test.log      -n ä¸æ¢è¡Œ</span><br><span class="line"></span><br><span class="line">è§‚å¯Ÿç»ˆç«¯æ˜¯å¦æœ‰é‡‡é›†æ•°æ®,å¾ˆæ˜æ˜¾æ²¡æœ‰é‡‡é›†</span><br></pre></td></tr></table></figure><p><strong>6.é‡å¯filebeatå®ä¾‹</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">åœæ­¢filebeat   Ctrl+c</span><br><span class="line">å†æ¬¡æ‰§è¡Œå®ä¾‹    filebeat -e -c /etc/filebeat/03-log-console.yaml</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ­¤æ—¶æˆ‘ä»¬å‘ç°filebeatå¹¶ä¸ä¼šé‡‡é›†æ•°æ®ï¼Œå› ä¸ºfilebeatå·²ç»é‡‡é›†è¿‡äº†ï¼Œ</span></span><br><span class="line"><span class="comment">#filebeatæ˜¯å¦‚ä½•çŸ¥é“æœ‰æ²¡æœ‰é‡‡é›†è¿‡æ•°æ®ï¼Ÿå¾€ä¸Šç¿»çœ‹åŠ è½½ä¿¡æ¯å¦‚ä¸‹å›¾</span></span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/image-20241002105509955.png" alt="image-20241002105509955"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Finished loading transaction <span class="built_in">log</span> file <span class="keyword">for</span> <span class="string">&#x27;/var/lib/filebeat/registry/filebeat&#x27;</span>. Active transaction <span class="built_in">id</span>=63</span><br><span class="line"></span><br><span class="line">è¿™ä¸ªè¡¨ç¤ºçš„æ˜¯ï¼Œåœ¨é‡‡é›†æ•°æ®ä¹‹å‰å…ˆåŠ è½½<span class="string">&#x27;/var/lib/filebeat/registry/filebeat&#x27;</span>ä¸‹çš„äº‹åŠ¡æ—¥å¿—log.jsonï¼Œé‡Œé¢è®°å½•äº†å·²ç»é‡‡é›†è¿‡çš„ä¿¡æ¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å‰å»æŸ¥çœ‹ä¸‹ï¼Œ</span><br><span class="line"></span><br><span class="line">è¿™é‡Œæˆ‘ä»¬æŸ¥çœ‹ä¸‹æœ€åä¸€æ¡æ•°æ®</span><br><span class="line">[root@elk01:1 ~]# <span class="built_in">tail</span> -1 /var/lib/filebeat/registry/filebeat/log.json </span><br><span class="line">&#123;<span class="string">&quot;k&quot;</span>:<span class="string">&quot;filebeat::logs::native::788078-64768&quot;</span>,<span class="string">&quot;v&quot;</span>:&#123;<span class="string">&quot;id&quot;</span>:<span class="string">&quot;native::788078-64768&quot;</span>,<span class="string">&quot;offset&quot;</span>:24,<span class="string">&quot;timestamp&quot;</span>:[2061673550511,1727837342],<span class="string">&quot;ttl&quot;</span>:-1,<span class="string">&quot;prev_id&quot;</span>:<span class="string">&quot;&quot;</span>,<span class="string">&quot;source&quot;</span>:<span class="string">&quot;/tmp/test.log&quot;</span>,<span class="string">&quot;type&quot;</span>:<span class="string">&quot;log&quot;</span>,<span class="string">&quot;FileStateOS&quot;</span>:&#123;<span class="string">&quot;inode&quot;</span>:788078,<span class="string">&quot;device&quot;</span>:64768&#125;,<span class="string">&quot;identifier_name&quot;</span>:<span class="string">&quot;native&quot;</span>&#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ•°æ®æœ‰ä¸ªoffsetå­—æ®µï¼Œè¿™é‡Œè®°å½•çš„æ˜¯ä¸Šä¸€æ¬¡é‡‡é›†è¿‡çš„åç§»é‡ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ¥æŸ¥çœ‹ä¸‹è¿™ä¸ªæ—¥å¿—çš„åç§»é‡æ˜¯ä¸æ˜¯24</span></span><br><span class="line">[root@elk01:1 ~]# <span class="built_in">cat</span> /tmp/test.log </span><br><span class="line">999</span><br><span class="line">hello world</span><br><span class="line">ABCD666</span><br><span class="line"></span><br><span class="line"><span class="comment">#å…¶ä¸­æ¯ä¸ªæ¢è¡Œä¹‹åéƒ½æœ‰ä¸€ä¸ªæ¢è¡Œç¬¦å ä¸€ä¸ªåç§»é‡ï¼Œæ‰€ä»¥æ€»è¿‡æ˜¯24ï¼Œé‚£ä¹ˆè¿™ä¸ªäº‹åŠ¡æ—¥å¿—è®°å½•çš„æ˜¯æ²¡æœ‰é”™çš„ã€‚å½“æˆ‘ä»¬åˆ é™¤è¿™ä¸ªäº‹åŠ¡æ—¥å¿—log.jsonæ—¶å€™ï¼Œé‡æ–°æ‰§è¡Œfilebeatå®ä¾‹ï¼Œä¾¿ä¼šé‡æ–°é‡‡é›†æ•°æ®</span></span><br></pre></td></tr></table></figure><p><strong>7.è‡ªå®šä¹‰é‡‡é›†</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ ¹æ®æ­¥éª¤6ä¸­é‡æ–°filebeatå®ä¾‹æ‰€è¿°ï¼Œæˆ‘ä»¬è‡ªå®šä¹‰é‡‡é›†ä¾¿å¯ä»¥æ ¹æ®è®¾ç½®åç§»é‡æ¥è¾¾åˆ°è‡ªå®šä¹‰é‡‡é›†æ•°æ®</span></span><br><span class="line"><span class="comment">#ä¿®æ”¹äº‹åŠ¡æ—¥å¿—æ–‡ä»¶å¦‚ä¸‹ï¼Œåªä¿®æ”¹åç§»é‡ï¼Œéœ€æ±‚æ˜¯åªé‡‡é›†ABCD666åŠä»¥åçš„æ•°æ®</span></span><br><span class="line">[root@elk01:1 ~]# <span class="built_in">cat</span> /tmp/test.log </span><br><span class="line">999</span><br><span class="line">hello world</span><br><span class="line">ABCD666  <span class="comment">#å°†offsetè®¾ç½®ä¸º16ï¼Œè®°å¾—æ•°æ¢è¡Œç¬¦</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@elk01:1 ~]# vim /var/lib/filebeat/registry/filebeat/log.json </span><br><span class="line">&#123;<span class="string">&quot;op&quot;</span>:<span class="string">&quot;set&quot;</span>,<span class="string">&quot;id&quot;</span>:65&#125;</span><br><span class="line">&#123;<span class="string">&quot;k&quot;</span>:<span class="string">&quot;filebeat::logs::native::788078-64768&quot;</span>,<span class="string">&quot;v&quot;</span>:&#123;<span class="string">&quot;id&quot;</span>:<span class="string">&quot;native::788078-64768&quot;</span>,<span class="string">&quot;offset&quot;</span>:16,<span class="string">&quot;timestamp&quot;</span>:[2061673550511,1727837342],<span class="string">&quot;ttl&quot;</span>:-1,<span class="string">&quot;prev_id&quot;</span>:<span class="string">&quot;&quot;</span>,<span class="string">&quot;source&quot;</span>:<span class="string">&quot;/tmp/test.log&quot;</span>,<span class="string">&quot;type&quot;</span>:<span class="string">&quot;log&quot;</span>,<span class="string">&quot;FileStateOS&quot;</span>:&#123;<span class="string">&quot;inode&quot;</span>:788078,<span class="string">&quot;device&quot;</span>:64768&#125;,<span class="string">&quot;identifier_name&quot;</span>:<span class="string">&quot;native&quot;</span>&#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#é‡æ–°æ‰§è¡Œå®ä¾‹</span></span><br><span class="line">[root@elk01:0 ~]# filebeat -e -c /etc/filebeat/03-log-console.yaml </span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;@timestamp&quot;</span>: <span class="string">&quot;2024-10-02T03:12:45.360Z&quot;</span>,</span><br><span class="line">  <span class="string">&quot;@metadata&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;beat&quot;</span>: <span class="string">&quot;filebeat&quot;</span>,</span><br><span class="line">    <span class="string">&quot;type&quot;</span>: <span class="string">&quot;_doc&quot;</span>,</span><br><span class="line">    <span class="string">&quot;version&quot;</span>: <span class="string">&quot;7.17.23&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;agent&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;version&quot;</span>: <span class="string">&quot;7.17.23&quot;</span>,</span><br><span class="line">    <span class="string">&quot;hostname&quot;</span>: <span class="string">&quot;elk01&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ephemeral_id&quot;</span>: <span class="string">&quot;c8d05474-6175-4dd1-93e8-933cb7760b92&quot;</span>,</span><br><span class="line">    <span class="string">&quot;id&quot;</span>: <span class="string">&quot;9e9b0f4e-cbe0-4e5b-bab2-501e50f67620&quot;</span>,</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;elk01&quot;</span>,</span><br><span class="line">    <span class="string">&quot;type&quot;</span>: <span class="string">&quot;filebeat&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;log&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;offset&quot;</span>: 16,</span><br><span class="line">    <span class="string">&quot;file&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;path&quot;</span>: <span class="string">&quot;/tmp/test.log&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;message&quot;</span>: <span class="string">&quot;ABCD666&quot;</span>,</span><br><span class="line">  <span class="string">&quot;input&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;type&quot;</span>: <span class="string">&quot;log&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;ecs&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;version&quot;</span>: <span class="string">&quot;1.12.0&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;host&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;elk01&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ¡ˆä¾‹">æ¡ˆä¾‹</h2><h3 id="é‡‡é›†nginxæ—¥å¿—æ¡ˆä¾‹">é‡‡é›†nginxæ—¥å¿—æ¡ˆä¾‹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">1.å®‰è£…nginx   ï¼ˆå¯ä»¥å…ˆå°è¯•è·³è¿‡2æ­¥éª¤ï¼Œçœ‹çœ‹ä¸ä¿®æ”¹é…ç½®æ–‡ä»¶çš„è¾“å‡ºï¼Œå’Œä¿®æ”¹ä¹‹åçš„åŒºåˆ«ï¼‰</span><br><span class="line">[root@elk01:1 ~]# apt -y install nginx</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2.å°†nginxé‡‡é›†çš„æ•°æ®ä»¥jsonæ ¼å¼å±•ç¤ºï¼Œä¿®æ”¹nginxçš„é…ç½®æ–‡ä»¶ï¼ˆæ ¼å¼åŒ–å±•ç¤ºï¼Œæ–¹ä¾¿åˆ†ææ•°æ®ï¼Œè®¿é—®ipï¼ŒçŠ¶æ€ç ç­‰ï¼‰</span><br><span class="line">[root@elk01:1 ~]# vim /etc/nginx/nginx.conf </span><br><span class="line"><span class="comment">#httpæ¨¡å—é‡Œæ·»åŠ å¦‚ä¸‹ï¼Œæ³¨é‡Šå®˜æ–¹çš„   access_log /var/log/nginx/access.log</span></span><br><span class="line">Â·Â·Â·</span><br><span class="line">  log_format nginx_json <span class="string">&#x27;&#123;&quot;timestamp&quot;:&quot;$time_iso8601&quot;,&#x27;</span></span><br><span class="line">       <span class="string">&#x27;&quot;vhost&quot;:&quot;$server_addr&quot;,&#x27;</span></span><br><span class="line">       <span class="string">&#x27;&quot;clientip&quot;:&quot;$remote_addr&quot;,&#x27;</span></span><br><span class="line">       <span class="string">&#x27;&quot;SendBytes&quot;:$body_bytes_sent,&#x27;</span></span><br><span class="line">       <span class="string">&#x27;&quot;responsetime&quot;:$request_time,&#x27;</span></span><br><span class="line">       <span class="string">&#x27;&quot;upstreamtime&quot;:&quot;$upstream_response_time&quot;,&#x27;</span></span><br><span class="line">       <span class="string">&#x27;&quot;upstreamhost&quot;:&quot;$upstream_addr&quot;,&#x27;</span></span><br><span class="line">       <span class="string">&#x27;&quot;http_host&quot;:&quot;$host&quot;,&#x27;</span></span><br><span class="line">       <span class="string">&#x27;&quot;uri&quot;:&quot;$uri&quot;,&#x27;</span></span><br><span class="line">       <span class="string">&#x27;&quot;domain&quot;:&quot;$host&quot;,&#x27;</span></span><br><span class="line">       <span class="string">&#x27;&quot;xff&quot;:&quot;$http_x_forwarded_for&quot;,&#x27;</span></span><br><span class="line">       <span class="string">&#x27;&quot;referer&quot;:&quot;$http_referer&quot;,&#x27;</span></span><br><span class="line">       <span class="string">&#x27;&quot;tcp_xff&quot;:&quot;$proxy_protocol_addr&quot;,&#x27;</span></span><br><span class="line">       <span class="string">&#x27;&quot;http_user_agent&quot;:&quot;$http_user_agent&quot;,&#x27;</span></span><br><span class="line">       <span class="string">&#x27;&quot;status&quot;:&quot;$status&quot;&#125;&#x27;</span>;</span><br><span class="line"> access_log /var/log/nginx/access.log nginx_json;</span><br><span class="line"><span class="comment">#2.1 æ£€æŸ¥nginxè¯­æ³•æ˜¯å¦æœ‰é—®é¢˜</span></span><br><span class="line">[root@elk01:1 ~]# nginx -t </span><br><span class="line">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /etc/nginx/nginx.conf <span class="built_in">test</span> is successful</span><br><span class="line"><span class="comment">#2.2 é‡æ–°nginx</span></span><br><span class="line">[root@elk01:1 ~]# systemctl restart nginx</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">3.ç¼–å†™filebeaté…ç½®æ–‡ä»¶    ï¼ˆinputs&gt;<span class="built_in">log</span>ï¼‰</span><br><span class="line">[root@elk01:1 ~]# <span class="built_in">cat</span> /etc/filebeat/04-nginx-es.yaml </span><br><span class="line">filebeat.inputs:</span><br><span class="line">- <span class="built_in">type</span>: <span class="built_in">log</span></span><br><span class="line">  json:</span><br><span class="line">    <span class="comment">#å½“json.keys_under_rootçš„å€¼ä¸ºtrueæ—¶ï¼Œä¼šè‡ªåŠ¨è§£æjsonæ ¼å¼ï¼Œå¹¶å°†å­—æ®µæ”¾åœ¨é¡¶çº§å­—æ®µä¸­</span></span><br><span class="line">    keys_under_root: <span class="literal">true</span></span><br><span class="line">    <span class="comment">#å½“jsonæ ¼å¼è§£æé”™è¯¯æ—¶ï¼Œå¯ä»¥å°†é”™è¯¯ä¿¡æ¯å†™å…¥åˆ°eventäº‹ä»¶(æŒ‡çš„æ˜¯filebeaté‡‡é›†çš„æ¯ä¸€æ¡æ•°æ®)ä¸­ã€‚</span></span><br><span class="line">    add_error_key: <span class="literal">true</span></span><br><span class="line">    <span class="comment">#å¦‚æœé‡‡é›†çš„å­—æ®µå’Œfilebeatè‡ªå·±çš„å­—æ®µå†²çªï¼Œåˆ™è¦†ç›–æ•°æ®</span></span><br><span class="line">    overwirte_kes: <span class="literal">true</span></span><br><span class="line">  paths:</span><br><span class="line">    - /var/log/nginx/access.log* </span><br><span class="line"></span><br><span class="line">output.console:</span><br><span class="line">  pretty: <span class="literal">true</span></span><br><span class="line">  </span><br><span class="line">2.å¯åŠ¨filebeatå®ä¾‹</span><br><span class="line">[root@elk01:1 ~]# filebeat -e -c /etc/filebeat/03-log-console.yaml</span><br><span class="line">3.å¦å¼€ä¸€ä¸ªç»ˆç«¯æµ‹è¯•</span><br><span class="line">[root@elk01:1 ~]# curl 10.0.0.211</span><br><span class="line"><span class="comment">#æŸ¥çœ‹filebeatæ”¶é›†æ—¥å¿—</span></span><br><span class="line">1.è¿™æ˜¯æœªé…ç½®  json.keys_under_root: <span class="literal">true</span>  çš„å±•ç¤º</span><br><span class="line">  <span class="string">&quot;message&quot;</span>: <span class="string">&quot;&#123;\&quot;timestamp\&quot;:\&quot;2024-10-02T11:40:24+08:00\&quot;,\&quot;vhost\&quot;:\&quot;10.0.0.211\&quot;,\&quot;clientip\&quot;:\&quot;10.0.0.211\&quot;,\&quot;SendBytes\&quot;:612,\&quot;responsetime\&quot;:0.000,\&quot;upstreamtime\&quot;:\&quot;-\&quot;,\&quot;upstreamhost\&quot;:\&quot;-\&quot;,\&quot;http_host\&quot;:\&quot;10.0.0.211\&quot;,\&quot;uri\&quot;:\&quot;/index.nginx-debian.html\&quot;,\&quot;domain\&quot;:\&quot;10.0.0.211\&quot;,\&quot;xff\&quot;:\&quot;-\&quot;,\&quot;referer\&quot;:\&quot;-\&quot;,\&quot;tcp_xff\&quot;:\&quot;-\&quot;,\&quot;http_user_agent\&quot;:\&quot;curl/7.81.0\&quot;,\&quot;status\&quot;:\&quot;200\&quot;&#125;&quot;</span>,</span><br><span class="line">  </span><br><span class="line">2.è¿™æ˜¯é…ç½®json.keys_under_root: <span class="literal">true</span>çš„å±•ç¤º  ï¼ˆipï¼ŒçŠ¶æ€ç ï¼Œæ—¶é—´æˆ³éƒ½ä»¥é¡¶çº§å­—æ®µå±•ç¤ºäº†ï¼Œæ›´åŠ æ–¹ä¾¿è¯»å–åˆ†ææ•°æ®ï¼‰</span><br><span class="line">  <span class="string">&quot;json&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;clientip&quot;</span>: <span class="string">&quot;10.0.0.211&quot;</span>,</span><br><span class="line">    <span class="string">&quot;domain&quot;</span>: <span class="string">&quot;10.0.0.211&quot;</span>,</span><br><span class="line">    <span class="string">&quot;timestamp&quot;</span>: <span class="string">&quot;2024-10-02T11:55:24+08:00&quot;</span>,</span><br><span class="line">    <span class="string">&quot;referer&quot;</span>: <span class="string">&quot;-&quot;</span>,</span><br><span class="line">    <span class="string">&quot;vhost&quot;</span>: <span class="string">&quot;10.0.0.211&quot;</span>,</span><br><span class="line">    <span class="string">&quot;http_host&quot;</span>: <span class="string">&quot;10.0.0.211&quot;</span>,</span><br><span class="line">    <span class="string">&quot;tcp_xff&quot;</span>: <span class="string">&quot;-&quot;</span>,</span><br><span class="line">    <span class="string">&quot;xff&quot;</span>: <span class="string">&quot;-&quot;</span>,</span><br><span class="line">    <span class="string">&quot;uri&quot;</span>: <span class="string">&quot;/index.nginx-debian.html&quot;</span>,</span><br><span class="line">    <span class="string">&quot;http_user_agent&quot;</span>: <span class="string">&quot;curl/7.81.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;responsetime&quot;</span>: 0,</span><br><span class="line">    <span class="string">&quot;upstreamhost&quot;</span>: <span class="string">&quot;-&quot;</span>,</span><br><span class="line">    <span class="string">&quot;SendBytes&quot;</span>: 612,</span><br><span class="line">    <span class="string">&quot;upstreamtime&quot;</span>: <span class="string">&quot;-&quot;</span>,</span><br><span class="line">    <span class="string">&quot;status&quot;</span>: <span class="string">&quot;200&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ESæ¶æ„é‡‡é›†nginxæ—¥å¿—å¹¶åˆ†æ">ESæ¶æ„é‡‡é›†nginxæ—¥å¿—å¹¶åˆ†æ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.ç¼–å†™filebeatå¸å…¥ESé›†ç¾¤é…ç½®æ–‡ä»¶   ï¼ˆé€‰æ‹©output&gt;Elasticsearchå¤åˆ¶å®˜æ–¹æ¡ˆä¾‹ä¿®æ”¹ï¼‰</span></span><br><span class="line">[root@elk01:1 ~]# <span class="built_in">cat</span> /etc/filebeat/05-nginx-es.yaml </span><br><span class="line">filebeat.inputs:</span><br><span class="line">- <span class="built_in">type</span>: <span class="built_in">log</span></span><br><span class="line">  json:</span><br><span class="line">    keys_under_root: <span class="literal">true</span></span><br><span class="line">    add_error_key: <span class="literal">true</span></span><br><span class="line">    overwirte_kes: <span class="literal">true</span></span><br><span class="line">  paths:</span><br><span class="line">    - /var/log/nginx/access.log* </span><br><span class="line"></span><br><span class="line">output.elasticsearch:</span><br><span class="line">  hosts: [<span class="string">&quot;http://10.0.0.211:9200&quot;</span>,<span class="string">&quot;http://10.0.0.212:9200&quot;</span>,<span class="string">&quot;http://10.0.0.213:9200&quot;</span>] </span><br><span class="line">  </span><br><span class="line"><span class="comment">#2.å¯åŠ¨filebeatå®ä¾‹</span></span><br><span class="line">[root@elk01:1 ~]# filebeat -e -c /etc/filebeat/05-nginx-es.yaml </span><br><span class="line"></span><br><span class="line"><span class="comment">#3.è®¿é—®nginxæœåŠ¡</span></span><br><span class="line">[root@elk01:1 ~]# <span class="keyword">while</span> <span class="literal">true</span>;<span class="keyword">do</span> curl 10.0.0.211; <span class="built_in">sleep</span> 1 ;<span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>æµè§ˆå™¨è®¿é—®ï¼š10.0.0.211:5601</p><p><img src="https://cos.lukme.top/Pic/image-20241002155103512.png" alt="image-20241002155103512"></p><p><strong>åˆ›å»ºç´¢å¼•</strong></p><p><img src="https://cos.lukme.top/Pic/image-20241002160236505.png" alt="image-20241002160236505"></p><p><strong>è¿›å…¥èœå•æ é€‰æ‹©Discover</strong></p><p><strong>æŸ¥çœ‹æ•°æ®ï¼ˆæ”¯æŒå¤šæ¡ä»¶æŸ¥è¯¢ï¼‰</strong></p><p><img src="https://cos.lukme.top/Pic/image-20241002160129138.png" alt="image-20241002160129138"></p><p><img src="https://cos.lukme.top/Pic/image-20241002161758175.png" alt="image-20241002161758175"></p><h2 id="ESçš„å¸¸è§æœ¯è¯­-åˆ†ç‰‡">ESçš„å¸¸è§æœ¯è¯­-åˆ†ç‰‡</h2><p><img src="https://cos.lukme.top/Pic/image-20241002160849403.png" alt="image-20241002160849403"></p><p><strong>index</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- index: ç´¢å¼•</span><br><span class="line">ç´¢å¼•æ˜¯ä¸€ä¸ªé€»è¾‘çš„å­˜å‚¨å•å…ƒï¼Œä¸€èˆ¬ç”¨äºæ ‡è¯†ä¸åŒçš„ä¸šåŠ¡ç±»å‹ï¼Œå› æ­¤ç´¢å¼•çš„åç§°å¤§å®¶å¯ä»¥è‡ªå®šä¹‰ã€‚</span><br><span class="line">ç”¨æˆ·åŸºäºç´¢å¼•è¿›è¡Œæ•°æ®çš„è¯»å†™ã€‚</span><br></pre></td></tr></table></figure><p><strong>shard</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- shard: åˆ†ç‰‡</span><br><span class="line">ä¸€ä¸ªç´¢å¼•æœ€å°‘æœ‰ä¸€ä¸ªåˆ†ç‰‡ï¼Œæ•°æ®å­˜å‚¨åœ¨åˆ†ç‰‡ä¸­ã€‚</span><br><span class="line">å½“ç´¢å¼•çš„åˆ†ç‰‡æ•°é‡å¤§äº1æ—¶ï¼ŒESé›†ç¾¤è‡ªåŠ¨å°†åˆ†ç‰‡åˆ†æ•£åœ°å­˜å‚¨åœ¨ä¸åŒçš„æ•°æ®èŠ‚ç‚¹ï¼Œè€Œæ˜¯å®ç°äº†æ•°æ®çš„åˆ†å¸ƒå¼å­˜å‚¨ã€‚</span><br></pre></td></tr></table></figure><blockquote><p>â€‹    ä¸€ä¸ª åˆ†ç‰‡ æ˜¯ä¸€ä¸ªåº•å±‚çš„ å·¥ä½œå•å…ƒ ï¼Œå®ƒä»…ä¿å­˜äº†å…¨éƒ¨æ•°æ®ä¸­çš„ä¸€éƒ¨åˆ†ã€‚ åœ¨åˆ†ç‰‡å†…éƒ¨æœºåˆ¶ä¸­ï¼Œæˆ‘ä»¬å°†è¯¦ç»†ä»‹ç»åˆ†ç‰‡æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œè€Œç°åœ¨æˆ‘ä»¬åªéœ€çŸ¥é“ä¸€ä¸ªåˆ†ç‰‡æ˜¯ä¸€ä¸ª Lucene çš„å®ä¾‹ï¼Œä»¥åŠå®ƒæœ¬èº«å°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„æœç´¢å¼•æ“ã€‚ æˆ‘ä»¬çš„æ–‡æ¡£è¢«å­˜å‚¨å’Œç´¢å¼•åˆ°åˆ†ç‰‡å†…ï¼Œä½†æ˜¯åº”ç”¨ç¨‹åºæ˜¯ç›´æ¥ä¸ç´¢å¼•è€Œä¸æ˜¯ä¸åˆ†ç‰‡è¿›è¡Œäº¤äº’ã€‚<br>â€‹     Elasticsearch æ˜¯åˆ©ç”¨åˆ†ç‰‡å°†æ•°æ®åˆ†å‘åˆ°é›†ç¾¤å†…å„å¤„çš„ã€‚åˆ†ç‰‡æ˜¯æ•°æ®çš„å®¹å™¨ï¼Œæ–‡æ¡£ä¿å­˜åœ¨åˆ†ç‰‡å†…ï¼Œåˆ†ç‰‡åˆè¢«åˆ†é…åˆ°é›†ç¾¤å†…çš„å„ä¸ªèŠ‚ç‚¹é‡Œã€‚ å½“ä½ çš„é›†ç¾¤è§„æ¨¡æ‰©å¤§æˆ–è€…ç¼©å°æ—¶ï¼Œ Elasticsearch ä¼šè‡ªåŠ¨çš„åœ¨å„èŠ‚ç‚¹ä¸­è¿ç§»åˆ†ç‰‡ï¼Œä½¿å¾—æ•°æ®ä»ç„¶å‡åŒ€åˆ†å¸ƒåœ¨é›†ç¾¤é‡Œã€‚</p><p>â€‹    ä¸€ä¸ªåˆ†ç‰‡å¯ä»¥æ˜¯ ä¸» åˆ†ç‰‡æˆ–è€… å‰¯æœ¬ åˆ†ç‰‡ã€‚ ç´¢å¼•å†…ä»»æ„ä¸€ä¸ªæ–‡æ¡£éƒ½å½’å±äºä¸€ä¸ªä¸»åˆ†ç‰‡ï¼Œæ‰€ä»¥ä¸»åˆ†ç‰‡çš„æ•°ç›®å†³å®šç€ç´¢å¼•èƒ½å¤Ÿä¿å­˜çš„æœ€å¤§æ•°æ®é‡ã€‚</p></blockquote><p><strong>replica</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- replica: å‰¯æœ¬</span><br><span class="line">æ¯ä¸ªåˆ†ç‰‡æœ‰0ä¸ªæˆ–å¤šä¸ªå‰¯æœ¬ï¼Œè‹¥å‰¯æœ¬æ•°é‡å¤§äº0æ—¶ï¼Œåˆ™å¯ä»¥å®ç°å¯¹ä¸»åˆ†ç‰‡çš„å¤‡ä»½ã€‚ä¸ºäº†æ–¹ä¾¿ç†è§£å°†å…¶åˆ†ç‰‡ä¸»åˆ†ç‰‡(primary shard)å’Œå‰¯æœ¬åˆ†ç‰‡(replica shard)ã€‚</span><br><span class="line">ä¸»åˆ†ç‰‡(primary shard)å’Œå‰¯æœ¬åˆ†ç‰‡(replica shard)ä¸èƒ½åœ¨åŒä¸€å°èŠ‚ç‚¹ã€‚</span><br><span class="line">ä¸»åˆ†ç‰‡è´Ÿè´£æ•°æ®çš„è¯»å†™ï¼Œè€Œå‰¯æœ¬åˆ†ç‰‡åªè´Ÿè´£æ•°æ®çš„è¯»å–å’ŒåŒæ­¥ã€‚</span><br><span class="line">å½“ä¸»åˆ†ç‰‡å’Œå‰¯æœ¬åˆ†ç‰‡è¾ƒå¤šæ—¶ï¼Œé»˜è®¤çš„å†™å…¥ç­–ç•¥ä¸ºï¼š <span class="string">&quot;(ä¸»åˆ†ç‰‡æ•°é‡ + å‰¯æœ¬åˆ†ç‰‡æ•°é‡) / 2 + 1&quot;</span>ï¼Œè¯´ç™½äº†ï¼Œå°±æ˜¯åŠæ•°ä»¥ä¸Šå†™å…¥æœºåˆ¶ã€‚</span><br><span class="line"></span><br><span class="line">æ¯”å¦‚1ä¸ªä¸»åˆ†ç‰‡ï¼Œå’Œ1ä¸ªå‰¯æœ¬åˆ†ç‰‡æ€»å…±2ä¸ªåˆ†ç‰‡çš„æ•°æ®ç›¸åŒï¼Œå…¶å†™å…¥ç­–ç•¥ä¸ºï¼š (1 + 1) / 2 + 1ï¼Œç»“æœä¸ºï¼š2ï¼Œè¡¨ç¤ºä¸»åˆ†ç‰‡å’Œå‰¯æœ¬åˆ†ç‰‡éƒ½å¿…é¡»å†™å…¥æˆåŠŸåˆ™åˆ¤å®šæˆåŠŸã€‚</span><br></pre></td></tr></table></figure><blockquote><p>â€‹    ä¸€ä¸ªå‰¯æœ¬åˆ†ç‰‡åªæ˜¯ä¸€ä¸ªä¸»åˆ†ç‰‡çš„æ‹·è´ã€‚å‰¯æœ¬åˆ†ç‰‡ä½œä¸ºç¡¬ä»¶æ•…éšœæ—¶ä¿æŠ¤æ•°æ®ä¸ä¸¢å¤±çš„å†—ä½™å¤‡ä»½ï¼Œå¹¶ä¸ºæœç´¢å’Œè¿”å›æ–‡æ¡£ç­‰è¯»æ“ä½œæä¾›æœåŠ¡ã€‚<br>å‰¯æœ¬åˆ†ç‰‡çš„ä¸»è¦ç›®çš„å°±æ˜¯ä¸ºäº†æ•…éšœè½¬ç§»ï¼Œå¦‚æœæŒæœ‰ä¸»åˆ†ç‰‡çš„èŠ‚ç‚¹æŒ‚æ‰äº†ï¼Œä¸€ä¸ªå‰¯æœ¬åˆ†ç‰‡å°±ä¼šæ™‹å‡ä¸ºä¸»åˆ†ç‰‡çš„è§’è‰²ã€‚åœ¨ç´¢å¼•å†™å…¥æ—¶ï¼Œå‰¯æœ¬åˆ†ç‰‡åšç€ä¸ä¸»åˆ†ç‰‡ç›¸åŒçš„å·¥ä½œã€‚æ–°æ–‡æ¡£é¦–å…ˆè¢«ç´¢å¼•è¿›ä¸»åˆ†ç‰‡ç„¶åå†åŒæ­¥åˆ°å…¶å®ƒæ‰€æœ‰çš„å‰¯æœ¬åˆ†ç‰‡ã€‚</p><p>â€‹    å¢åŠ å‰¯æœ¬æ•°å¹¶ä¸ä¼šå¢åŠ ç´¢å¼•å®¹é‡ï¼Œåœ¨ç´¢å¼•å»ºç«‹çš„æ—¶å€™å°±å·²ç»ç¡®å®šäº†ä¸»åˆ†ç‰‡æ•°ï¼Œä½†æ˜¯å‰¯æœ¬åˆ†ç‰‡æ•°å¯ä»¥éšæ—¶ä¿®æ”¹</p></blockquote><p>é€šä¿—ç†è§£</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">åˆ†ç‰‡æ•°ï¼ˆnumber_of_shardsï¼‰å°±æ˜¯ä¸»åˆ†ç‰‡ä¸ªæ•°</span><br><span class="line">å‰¯æœ¬æ•°ï¼ˆnumber_of_replicasï¼‰ å¯ä»¥ç†è§£æˆä¸»åˆ†ç‰‡çš„æ‹·è´ä¸ªæ•°</span><br><span class="line">å¦‚æœä¸»åˆ†ç‰‡æ•°æ˜¯5ï¼Œåˆ™æ¯ä¸ªå‰¯æœ¬éƒ½æœ‰5ä¸ªåˆ†ç‰‡</span><br><span class="line">å› æ­¤ESé›†ç¾¤æ€»çš„åˆ†ç‰‡æ•° = åˆ†ç‰‡æ•° * (å‰¯æœ¬æ•° + 1)</span><br></pre></td></tr></table></figure><p><strong>å‰¯æœ¬æ•°åˆ†é…ç®—æ³•ï¼š</strong></p><blockquote><p>å‰¯æœ¬æ•° &lt;= ESé›†ç¾¤çš„æœåŠ¡å™¨ä¸ªæ•° - 1</p></blockquote><p>å‰¯æœ¬é™¤äº†æå‡æŸ¥è¯¢æ•ˆç‡ï¼Œä¸»è¦ç›®çš„ä¸ºäº†å®¹ç¾ï¼Œæ•°æ®å†—ä½™å­˜å‚¨ï¼Œä¿è¯æ•°æ®å®‰å…¨ï¼Œå› æ­¤ï¼Œå‰¯æœ¬æ•°åº”è·Ÿæ®ESé›†ç¾¤ä¸­çš„æ•°æ®åº“æ•°é‡ï¼ˆN-1ï¼‰è¿›è¡Œé…ç½®ï¼Œå¦‚æœESé›†ç¾¤ä¸­æœ‰3å°æœåŠ¡å™¨ï¼Œåˆ™å‰¯æœ¬æ•°è®¾ç½®ä¸º2ï¼Œå‡ 1 å› ä¸ºä¸»åˆ†ç‰‡æœ¬èº«ä¹Ÿç®—ä¸€ä»½ã€‚å‰¯æœ¬æ•°è®¾ç½®ä¸º2ï¼Œæ•°æ®å®é™…ä¸Šæœ‰3ä»½ï¼Œåˆ†æ•£åˆ°3å°æœåŠ¡å™¨ä¸­ã€‚</p><blockquote><p>é¢„ä¼°è¦å­˜å…¥ESæ€»æ•°æ®é‡ * (å‰¯æœ¬æ•°+1) &lt;= ESé›†ç¾¤çš„æ€»å†…å­˜ / 2</p></blockquote><p>å­˜å…¥ESæœç´¢å¼•æ“ çš„æ•°æ®å¯ä»¥é¢„ä¼°ï¼Œæ¯”å¦‚é¢„ä¼°å­˜å…¥çš„æ•°æ®æœ‰ 100Gï¼Œåˆ™å®é™…ä¸Šä¼šå ç”¨çš„å†…å­˜ä¸º 100G * (å‰¯æœ¬æ•°+1) åŠ  1 å› ä¸ºè®¡å…¥äº†ä¸»åˆ†ç‰‡ï¼Œæ•°é‡é‡Œè¶…é™äº†ä¹Ÿå¯ä»¥å­˜å…¥ï¼Œåªè¦ç£ç›˜å¤Ÿå¤§ï¼Œä½†æ˜¯è®¡ç®—æ—¶å°±å¯èƒ½ç”¨åˆ°äº†ç£ç›˜ï¼Œç£ç›˜çš„IOæ€§èƒ½ä¼šè®©æ•´ä¸ªESé›†ç¾¤æ€§èƒ½å¤§å‰¯ä¸‹é™ã€‚</p><p>ESé›†ç¾¤çš„æ€»å†…å­˜åªå–äº†ä¸€åŠï¼Œå› ä¸ºè€ƒè™š ES çš„ java. ç¨‹åºæœ¬èº«å ç”¨çš„å†…å­˜ï¼Œæ•°æ®èšåˆè¿ç®—æ¶ˆè€—çš„å†…å­˜ï¼Œå¦‚æœå®é™…é¡¹ç›®ä¸­å¤§é‡å¤æ‚è¿ç®—ï¼Œå ç”¨çš„å†…å­˜éœ€è¦æ›´å¤šã€‚</p><p><strong>åˆ†ç‰‡æ•°åˆ†é…ç®—æ³•ï¼š</strong></p><blockquote><p>åˆ†ç‰‡æ•° * (å‰¯æœ¬æ•° + 1) &lt;= ESé›†ç¾¤çš„æ€»CPUæ ¸å¿ƒä¸ªæ•°</p></blockquote><p>åˆ†ç‰‡å†…çš„æ£€ç´¢è¿ç®—èšåˆéœ€è¦ CPUï¼Œ ä¸ºäº†å……åˆ†å‘æŒ¥å¤šæ ¸CPUçš„æ€§èƒ½ï¼Œä¸”åˆé¿å…CPUé¢‘ç¹è°ƒåº¦ï¼Œå› æ­¤ï¼ŒESé›†ç¾¤å†…æ€»çš„åˆ†ç‰‡æ•°åº”å°äºç­‰äºæ€»çš„CPUæ ¸å¿ƒä¸ªæ•°ã€‚</p><p><strong>document</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">- document: æ–‡æ¡£</span><br><span class="line">ESæœ¬èº«å°±æ˜¯ä¸€ä¸ªæ–‡æ¡£å‹æ•°æ®åº“ï¼Œå’ŒmangoDBç±»ä¼¼ã€‚</span><br><span class="line">æ¯ä¸ªæ–‡ä»¶çš„æ•°æ®åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š å…ƒæ•°æ®å’Œæºæ•°æ®ã€‚</span><br><span class="line"></span><br><span class="line">1.å…ƒæ•°æ®(metadata):</span><br><span class="line">ç”¨äºæè¿°æºæ•°æ®çš„æ•°æ®ã€‚</span><br><span class="line">å¸¸è§çš„å­—æ®µå¦‚ä¸‹:</span><br><span class="line">_index:</span><br><span class="line">è¡¨ç¤ºæ–‡æ¡£éš¶å±äºå“ªä¸ªç´¢å¼•ã€‚</span><br><span class="line">_id:</span><br><span class="line">è¡¨ç¤ºæ–‡æ¡£çš„å”¯ä¸€æ ‡è¯†ã€‚</span><br><span class="line">_source:</span><br><span class="line">ä»£è¡¨ç”¨æˆ·å®é™…å­˜å‚¨çš„æ•°æ®ã€‚</span><br><span class="line"></span><br><span class="line">2.æºæ•°æ®(<span class="built_in">source</span> data):</span><br><span class="line">ç”¨æˆ·å®é™…å†™å…¥çš„æ•°æ®ã€‚</span><br><span class="line"></span><br><span class="line">- allocation(åˆ†é…):</span><br><span class="line">  æŒ‡çš„æ˜¯å°†ç´¢å¼•çš„ä¸åŒåˆ†ç‰‡å’Œå‰¯æœ¬åˆ†é…åˆ°æ•´ä¸ªESé›†ç¾¤çš„è¿‡ç¨‹ï¼Œè¿™ä¸ªåˆ†é…è¿‡ç¨‹ç”±ESé›†ç¾¤è‡ªå·±å®ç°ã€‚</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ELKæ—¥å¿—æ”¶é›† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ELK </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>03-k8sPODèµ„æº</title>
      <link href="/posts/df6c32c8.html"/>
      <url>/posts/df6c32c8.html</url>
      
        <content type="html"><![CDATA[<h2 id="k8sèµ„æºæ¸…å•æè¿°">k8sèµ„æºæ¸…å•æè¿°</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">ApiVersion:</span><br><span class="line">èµ„æºçš„ç‰ˆæœ¬ï¼Œå®˜æ–¹å¯¹æ¯ä¸ªèµ„æºè§„å®šäº†ä¸åŒçš„ç‰ˆæœ¬ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®èµ„æºçš„ç‰ˆæœ¬è¿›è¡Œä¹¦å†™ã€‚</span><br><span class="line">ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œèµ„æºçš„ç‰ˆæœ¬å¾ˆå°‘å˜åŠ¨ï¼Œé™¤éåœ¨å‡çº§è¿‡ç¨‹ä¸­ï¼Œéšç€åŠŸèƒ½çš„å¢å¼ºï¼Œç‰ˆæœ¬å¯èƒ½ä¹Ÿä¼šå¾®è°ƒã€‚</span><br><span class="line"></span><br><span class="line">kind:</span><br><span class="line">èµ„æºçš„ç±»å‹ï¼ŒK8Sé›†ç¾¤ä¸­ä¸€åˆ‡çš†èµ„æºã€‚</span><br><span class="line"></span><br><span class="line">metadata:</span><br><span class="line">èµ„æºçš„å…ƒæ•°æ®ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š </span><br><span class="line">- èµ„æºçš„åç§°;(å¸¸ç”¨)</span><br><span class="line">- èµ„æºæ‰€å±çš„åç§°ç©ºé—´;(å¸¸ç”¨)</span><br><span class="line">- èµ„æºçš„æ ‡ç­¾;(å¸¸ç”¨)</span><br><span class="line">- èµ„æºçš„æ³¨è§£;(æ—©æœŸç‰ˆæœ¬å¸¸ç”¨)</span><br><span class="line">- èµ„æºçš„åˆ›å»ºæ—¶é—´;</span><br><span class="line">- ...</span><br><span class="line"></span><br><span class="line">spec:</span><br><span class="line">å®šä¹‰äº†ç”¨æˆ·å¯¹Podçš„æœŸæœ›çŠ¶æ€ã€‚ç”¨æˆ·å¯ä»¥åšå¦‚ä¸‹æ“ä½œ:</span><br><span class="line">- æŒ‡å®šèŠ‚ç‚¹è°ƒåº¦;</span><br><span class="line">- æŒ‡å®šè°ƒåº¦çš„äº²å’Œæ€§æˆ–åäº²å’Œæ€§;</span><br><span class="line">- èµ„æºçš„æ•°æ®æ˜¯å¦è¿›è¡ŒæŒä¹…åŒ–;</span><br><span class="line">- èµ„æºçš„é…ç½®æ–‡ä»¶æ˜¯å¦éœ€è¦ä¿®æ”¹;</span><br><span class="line">- èµ„æºçš„å®¹å™¨ä½¿ç”¨å…·ä½“çš„é•œåƒ;</span><br><span class="line">- èµ„æºçš„é™åˆ¶</span><br><span class="line">- èµ„æºçš„è®¤è¯ä¿¡æ¯</span><br><span class="line">- èµ„æºçš„å®‰å…¨ä¿¡æ¯</span><br><span class="line">- ...</span><br><span class="line"></span><br><span class="line">status:</span><br><span class="line">èµ„æºå®é™…çš„çŠ¶æ€ï¼Œæ¯”å¦‚è°ƒåº¦åˆ°å“ªä¸ªworkerèŠ‚ç‚¹ï¼Œå®é™…åˆ†é…çš„IPåœ°å€ï¼Œè¿è¡Œå‘¨æœŸï¼Œé‡å¯æ¬¡æ•°ç­‰ã€‚</span><br><span class="line">è¯¥èµ„æºä¸€èˆ¬ä¸éœ€è¦äººä¸ºå®šä¹‰ï¼Œè€Œæ˜¯æœ‰K8Sé›†ç¾¤è‡ªèº«ç»´æŠ¤ã€‚</span><br></pre></td></tr></table></figure><h2 id="podèµ„æºåŠèµ„æºæ¸…å•">podèµ„æºåŠèµ„æºæ¸…å•</h2><p><strong>1.PODèµ„æº</strong></p><p><strong>kubernetesèµ„æºå¯¹è±¡æ“ä½œ</strong></p><table><thead><tr><th>èµ„æºå¯¹è±¡</th><th>å¢</th><th>åˆ </th><th>æ”¹</th><th>æŸ¥</th></tr></thead><tbody><tr><td>node</td><td></td><td>kubectl delete node</td><td></td><td>kubectl get nodes</td></tr><tr><td>namespace</td><td>kubectl create ns [èµ„æºå]</td><td>kubectl delete ns [èµ„æºå]</td><td>kubectl edit ns [èµ„æºå]</td><td>kubectl get ns</td></tr><tr><td>pod</td><td></td><td>kubectl delete pod [èµ„æºå]</td><td>kubectl edit pod[èµ„æºå]</td><td>kubectl get pod</td></tr></tbody></table><p><strong>æŸ¥çœ‹é›†ç¾¤èŠ‚ç‚¹çŠ¶æ€</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# kubectl get nodes</span><br><span class="line">NAME     STATUS   ROLES    AGE     VERSION</span><br><span class="line">master   Ready    master   4d13h   v1.19.3</span><br><span class="line">node01   Ready    &lt;none&gt;   4d13h   v1.19.3</span><br><span class="line">node02   Ready    &lt;none&gt;   4d13h   v1.19.3</span><br><span class="line">node03   Ready    &lt;none&gt;   4d13h   v1.19.3</span><br></pre></td></tr></table></figure><p><strong>æŸ¥çœ‹åç§°ç©ºé—´</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# kubectl get ns</span><br><span class="line">NAME              STATUS   AGE</span><br><span class="line">default           Active   4d13h</span><br><span class="line">kube-flannel      Active   4d12h</span><br><span class="line">kube-node-lease   Active   4d13h</span><br><span class="line">kube-public       Active   4d13h</span><br><span class="line">kube-system       Active   4d13h</span><br><span class="line">luay              Active   4h17m</span><br></pre></td></tr></table></figure><p><strong>æŸ¥çœ‹pod  (é»˜è®¤defaultåç§°ç©ºé—´)</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# kubectl get pod</span><br><span class="line">NAME                     READY   STATUS    RESTARTS   AGE</span><br><span class="line">nginx-565785f75c-tpjmj   1/1     Running   0          6h8m</span><br><span class="line">nginx-pod                1/1     Running   0          5h43m</span><br></pre></td></tr></table></figure><p><strong>æŸ¥çœ‹pod  (æŒ‡å®šåç§°ç©ºé—´)</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# kubectl get pods -n luay</span><br><span class="line">NAME          READY   STATUS    RESTARTS   AGE</span><br><span class="line">busybox-pod   2/2     Running   0          3m30s</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@master ~]# kubectl get pod -n luay -o wide</span><br><span class="line">NAME          READY   STATUS    RESTARTS   AGE     IP         NODE     NOMINATED NODE   READINESS GATES</span><br><span class="line">busybox-pod   2/2     Running   0          4m14s   10.2.2.6   node03   &lt;none&gt;           &lt;none&gt;</span><br><span class="line"></span><br><span class="line">-n æŒ‡å®šå‘½åç©ºé—´</span><br><span class="line">-o æŒ‡å®šè¾“å‡ºæ–¹å¼</span><br><span class="line">jsonï¼šè¾“å‡ºjsonæ ¼å¼</span><br><span class="line">yamlï¼šè¾“å‡ºyamlæ ¼å¼</span><br><span class="line">wideï¼šè¾“å‡ºè¯¦ç»†ä¿¡æ¯</span><br></pre></td></tr></table></figure><p><strong>2.podçš„èµ„æºæ¸…å•</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">[root@master01 ~]# vim nginx.yaml</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Pod</span><br><span class="line">metadata:</span><br><span class="line">  name: nginx-pod</span><br><span class="line">  namespace: default</span><br><span class="line">spec:</span><br><span class="line">  containers:</span><br><span class="line">  - image: nginx:alpine</span><br><span class="line">    imagePullPolicy: IfNotPresent</span><br><span class="line">    name: nginx-containers</span><br><span class="line"></span><br><span class="line">`æ³¨é‡Š`</span><br><span class="line">apiVersion: v1       <span class="comment"># K8Sèµ„æºæ¥å£</span></span><br><span class="line">kind: Pod            <span class="comment"># èµ„æºç±»å‹</span></span><br><span class="line">metadata:            <span class="comment">#èµ„æºçš„å…ƒæ•°æ®</span></span><br><span class="line">  name: nginx-pod    <span class="comment"># PODåå­—</span></span><br><span class="line">  namespace: default <span class="comment"># æŒ‡å®šèµ„æºå¯åŠ¨åœ¨å“ªä¸ªåç§°ç©ºé—´ï¼Œé»˜è®¤default</span></span><br><span class="line">spec:                <span class="comment">#å®¹å™¨ç›¸å…³ä¿¡æ¯</span></span><br><span class="line">  containers:        <span class="comment">#å®¹å™¨ä¿¡æ¯</span></span><br><span class="line">  - image: nginx:alpine           <span class="comment">#æŒ‡å®šå®¹å™¨é•œåƒ</span></span><br><span class="line">    imagePullPolicy: IfNotPresent <span class="comment">#æŒ‡å®šé•œåƒæ‹‰å–è§„åˆ™</span></span><br><span class="line">    name: nginx-containers        <span class="comment">#å®¹å™¨åå­—</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Alwaysï¼šæ€»æ˜¯æ‹‰å–é•œåƒï¼Œä¸ç®¡å½“å‰æœºå™¨ä¸Šæ˜¯å¦æœ‰è¯¥é•œåƒéƒ½æ‹‰å– nginx:latest</span><br><span class="line">Neverï¼šä»ä¸æ‹‰å–é•œåƒï¼Œéœ€è¦æå‰docker pull</span><br><span class="line">IfNotPresentï¼šå¦‚æœé•œåƒä¸å­˜åœ¨ï¼Œåˆ™æ‹‰å–</span><br></pre></td></tr></table></figure><h2 id="podæŠ¥é”™åŠå¯èƒ½åŸå› ">podæŠ¥é”™åŠå¯èƒ½åŸå› </h2><pre><code>1.ImagePullBackOff  é—®é¢˜åŸå› :  é•œåƒæ‹‰å–å¤±è´¥ã€‚  å¯èƒ½åŸå› ï¼š  1.å¯èƒ½æ˜¯ç½‘ç»œé—®é¢˜å¯¼è‡´ï¼Œæ£€æŸ¥Podæ‰€åœ¨èŠ‚ç‚¹æ˜¯å¦èƒ½å¤Ÿæ­£å¸¸è®¿é—®ç½‘ç»œ;  2.é•œåƒåç§°å†™é”™ï¼Œä¹Ÿå¯èƒ½ä¼šå¯¼è‡´è¿™ä¸ªé”™è¯¯;  3.é•œåƒæ˜¯ç§æœ‰ä»“åº“ï¼Œé•œåƒæ— æƒé™æ‹‰å–;  2.ContainerCreatingé—®é¢˜åˆ†æ:å®¹å™¨æ­£åœ¨åˆ›å»ºé˜¶æ®µï¼Œç­‰å¾…å®¹å™¨åˆ›å»ºï¼Œè¯¥è¿‡ç¨‹åŒ…å«æ‹‰å–é•œåƒçš„æ—¶é—´ã€‚3.Pendingé—®é¢˜åˆ†æ:ä»»åŠ¡å·²ç»è¢«K8Sé›†ç¾¤æ¥å—ï¼Œä½†æ˜¯æœªè°ƒåº¦åˆ°æŒ‡å®šèŠ‚ç‚¹ã€‚å¯èƒ½åŸå› :1.å½“å‰é›†ç¾¤ä¸æ­£å¸¸å·¥ä½œï¼Œè¯·æ£€æŸ¥é›†ç¾¤çŠ¶æ€ï¼Œæ¯”å¦‚CNIç»„ä»¶æœªå®‰è£…;2.æŒ‡å®šçš„è°ƒåº¦çš„èŠ‚ç‚¹ä¸å­˜åœ¨æ—¶ä¹Ÿä¼šå‡ºç°è¿™æ ·çš„é—®é¢˜;3.ç«¯å£å†²çªï¼Œæ— æ³•å®Œæˆè°ƒåº¦;4.æ‰€æœ‰èŠ‚ç‚¹éƒ½è¢«æ‰“ä¸Šæ±¡ç‚¹ï¼Œä¸”podæ²¡æœ‰é…ç½®æ±¡ç‚¹å®¹å¿ä¹Ÿä¼šå¯¼è‡´è¯¥çŠ¶æ€;4.CrashLoopBackOffé—®é¢˜åˆ†æ:å¤„äºè¯¥çŠ¶æ€ï¼Œè¯´æ˜Podå†…è‡³å°‘æœ‰ä¸€ä¸ªå®¹å™¨æ­£åœ¨é‡å¯ã€‚å¯èƒ½åŸå› :1.å¯èƒ½æ˜¯å®¹å™¨çš„å®ˆæŠ¤è¿›ç¨‹è¿è¡Œå‘½ä»¤ç»“æŸå¯¼è‡´çš„;5.Completedé—®é¢˜åˆ†æ:å®¹å™¨æ­£å¸¸é€€å‡ºï¼Œå®¹å™¨æ²¡æœ‰è¢«å¼ºåˆ¶ä¸­æ–­ã€‚6.Runningé—®é¢˜åˆ†æ:è‡³å°‘æœ‰ä¸€ä¸ªå®¹å™¨å¤„äºæ­£å¸¸è¿è¡ŒçŠ¶æ€ã€‚7.Init:1/2 é—®é¢˜åˆ†æ:å½“å‰çš„Podå¤„äºåˆå§‹åŒ–å®¹å™¨é˜¶æ®µï¼Œç›®å‰å·²ç»å®Œæˆä¸€ä¸ªåˆå§‹åŒ–å®¹å™¨ï¼Œæ­£åœ¨è¿›è¡Œç¬¬äºŒä¸ªå®¹å™¨åˆå§‹åŒ–ã€‚8.PodInitializingé—®é¢˜åˆ†æ:Podæ­£å¤„äºåˆå§‹åŒ–é˜¶æ®µã€‚9.ErrImageNeverPull é—®é¢˜åˆ†æ:å°†é•œåƒä¸‹è½½ç­–ç•¥è®¾ç½®ä¸ºNeverï¼Œä¸”æœ¬åœ°ä¹Ÿæ²¡æœ‰ç¼“å­˜é•œåƒï¼Œå› æ­¤å¯åŠ¨å®¹å™¨å¤±è´¥ã€‚10.OutOfcpué—®é¢˜åˆ†æ:ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ç”±äºCPUèµ„æºä¸è¶³å¯¼è‡´çš„ã€‚11.OutOfmemoryé—®é¢˜åˆ†æ:ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ç”±äºå†…å­˜ä¸è¶³æ— æ³•åˆ†é…å¯¼è‡´çš„ã€‚12.NodePortsé—®é¢˜åˆ†æ:å½“å‰çš„workerèŠ‚ç‚¹çš„ç«¯å£å¯èƒ½å­˜åœ¨å†²çªã€‚13.RunContainerErroré—®é¢˜åˆ†æ:è¿è¡Œå®¹å™¨æ—¶å‡ºé”™ï¼Œå¯ä»¥é€šè¿‡kubectl describe pods &lt;POD_NAME&gt;æŸ¥çœ‹è¯¦ç»†çš„ä¿¡æ¯ã€‚14.ErrImagePullé—®é¢˜åˆ†æ:æ‹‰å–é•œåƒæ˜¯å¤±è´¥ã€‚å¯èƒ½åŸå› :1.é•œåƒåç§°å†™é”™äº†;2.æ²¡æœ‰è®¿é—®æƒé™;15.Terminatingé—®é¢˜åˆ†æ:Podçš„å®¹å™¨æ­£åœ¨åˆ é™¤ï¼Œæ­¤è¿‡ç¨‹å¯èƒ½éœ€è¦ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸ä¼šè¶…è¿‡30sã€‚16.CreateContainerConfigErroré—®é¢˜åˆ†æ:è¿è¡Œå®¹å™¨å‡ºé”™ï¼Œä¸€èˆ¬æƒ…ä¸‹ï¼Œæ˜¯é…ç½®å‡ºé”™ã€‚17.ContainerStatusUnknowné—®é¢˜åˆ†æ:å®¹å™¨é‡å¯ç­–ç•¥ä¸ºNerverï¼Œä¸”æˆ‘ä»¬æµ‹è¯•æ—¶å°†å·¥ä½œèŠ‚ç‚¹çš„å®¹å™¨ç›´æ¥åˆ é™¤å•¦ã€‚æ— æ³•è·å–</code></pre><h2 id="èµ„æºæ¸…å•ç¼–å†™æ¡ˆä¾‹">èµ„æºæ¸…å•ç¼–å†™æ¡ˆä¾‹</h2><p><strong>åŸºäºä¸€ä¸ªpodéƒ¨ç½²wordpress</strong></p><p><strong>1.ç¼–å†™èµ„æºæ¸…å•</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">[root@master kubernetes]# <span class="built_in">cat</span> wordpress.yaml </span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Pod</span><br><span class="line">metadata:</span><br><span class="line">  name: wordpress-pod</span><br><span class="line">spec:</span><br><span class="line"> <span class="comment"># ä½¿ç”¨å®¿ä¸»æœºç½‘ç»œåç§°ç©ºé—´</span></span><br><span class="line">  hostNetwork: <span class="literal">true</span></span><br><span class="line">  containers:</span><br><span class="line">  - name: db</span><br><span class="line">    image: mysql:8.0</span><br><span class="line">    imagePullPolicy: IfNotPresent</span><br><span class="line">    <span class="built_in">env</span>:</span><br><span class="line">    - name: MYSQL_ALLOW_EMPTY_PASSWORD</span><br><span class="line">      value: <span class="string">&quot;yes&quot;</span></span><br><span class="line">    - name: MYSQL_DATABASE</span><br><span class="line">      value: wp</span><br><span class="line">    - name: MYSQL_USER</span><br><span class="line">      value: wp_usre</span><br><span class="line">    - name: MYSQL_PASSWORD</span><br><span class="line">      value: <span class="string">&#x27;123&#x27;</span></span><br><span class="line">  - name: wp</span><br><span class="line">    image: wordpress:latest</span><br><span class="line">    imagePullPolicy: IfNotPresent</span><br><span class="line">    <span class="built_in">env</span>:</span><br><span class="line">    - name: WORDPRESS_DB_HOST</span><br><span class="line">      value: <span class="string">&quot;127.0.0.1&quot;</span></span><br><span class="line">    - name: WORDPRESS_DB_NAME</span><br><span class="line">      value: wp</span><br><span class="line">    - name: WORDPRESS_DB_USER</span><br><span class="line">      value: wp_usre</span><br><span class="line">    - name: WORDPRESS_DB_PASSWORD</span><br><span class="line">      value: <span class="string">&#x27;123&#x27;</span></span><br></pre></td></tr></table></figure><p><strong>2.æ ¹æ®èµ„æºæ¸…å•åˆ›å»ºpod</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@master kubernetes]# kubectl apply -f wordpress.yaml</span><br><span class="line"></span><br><span class="line">`å› ä¸ºä½¿ç”¨çš„å®¿ä¸»æœºç½‘ç»œåç§°ç©ºé—´ï¼Œéœ€ä¿è¯80ç«¯å£ä¸è¢«å ç”¨`</span><br></pre></td></tr></table></figure><p><strong>3.æŸ¥çœ‹podèŠ‚ç‚¹ä¿¡æ¯</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@master kubernetes]# kubectl get pod -o wide</span><br><span class="line">NAME                     READY   STATUS    RESTARTS   AGE   IP           NODE    </span><br><span class="line">nginx-565785f75c-tpjmj   1/1     Running   0          8h    10.2.2.2     node03  </span><br><span class="line">nginx-pod                1/1     Running   0          8h    10.2.2.3     node03  </span><br><span class="line">wordpress-pod            2/2     Running   0          36m   10.0.0.203   node03  </span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ›å»ºèŠ‚ç‚¹node03   ip 10.0.0.203</span></span><br><span class="line">æµè§ˆå™¨è®¿é—®10.0.0.203</span><br></pre></td></tr></table></figure><p><strong>åŸºäºä¸€ä¸ªpodèµ·wordpressï¼ŒåšæŒä¹…åŒ–</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">[root@master kubernetes]# <span class="built_in">cat</span> wordpress.yaml </span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Pod</span><br><span class="line">metadata:</span><br><span class="line">  name: wordpress-pod</span><br><span class="line">  namespace: default</span><br><span class="line">  labels:</span><br><span class="line">    app: mysql</span><br><span class="line">    run: mysql</span><br><span class="line">spec:</span><br><span class="line"><span class="comment">#å¦‚æœä½¿ç”¨ä¸‹é¢portsï¼Œè¿™ä¸ªå¯ä»¥ä¸ä½¿ç”¨å®¿ä¸»æœºç½‘ç»œ</span></span><br><span class="line">  hostNetwork: <span class="literal">true</span></span><br><span class="line">  volumes:</span><br><span class="line">  - name: mysql-data</span><br><span class="line">    hostPath:</span><br><span class="line">      path: /data/mysql</span><br><span class="line">  containers:</span><br><span class="line">  - name: db</span><br><span class="line">    image: mysql:8.0</span><br><span class="line">    imagePullPolicy: IfNotPresent</span><br><span class="line">    <span class="built_in">env</span>:</span><br><span class="line">    - name: MYSQL_ALLOW_EMPTY_PASSWORD</span><br><span class="line">      value: <span class="string">&quot;yes&quot;</span></span><br><span class="line">    - name: MYSQL_DATABASE</span><br><span class="line">      value: wp</span><br><span class="line">    - name: MYSQL_USER</span><br><span class="line">      value: wp_usre</span><br><span class="line">    - name: MYSQL_PASSWORD</span><br><span class="line">      value: <span class="string">&#x27;123&#x27;</span></span><br><span class="line">    volumeMounts:</span><br><span class="line">    - name: mysql-data</span><br><span class="line">      mountPath: /var/lib/mysql</span><br><span class="line">      </span><br><span class="line">  - name: wp</span><br><span class="line">    image: wordpress:latest</span><br><span class="line">    imagePullPolicy: IfNotPresent</span><br><span class="line">    <span class="comment">#ç›¸å½“äºæš´éœ²ç«¯å£ï¼Œç›´æ¥ä½¿ç”¨èŠ‚ç‚¹çš„å®¿ä¸»æœºipè®¿é—®å³å¯Â·</span></span><br><span class="line">    ports:</span><br><span class="line">    - containerPort: 80</span><br><span class="line">      hostPort: 80</span><br><span class="line">    <span class="built_in">env</span>:</span><br><span class="line">    - name: WORDPRESS_DB_HOST</span><br><span class="line">      value: <span class="string">&quot;127.0.0.1&quot;</span></span><br><span class="line">    - name: WORDPRESS_DB_NAME</span><br><span class="line">      value: wp</span><br><span class="line">    - name: WORDPRESS_DB_USER</span><br><span class="line">      value: wp_usre</span><br><span class="line">    - name: WORDPRESS_DB_PASSWORD</span><br><span class="line">      value: <span class="string">&#x27;123&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="è¿æ¥pod">è¿æ¥pod</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## è¿æ¥åˆ°POD</span></span><br><span class="line">[root@master01 kubernetes]# kubectl <span class="built_in">exec</span> -it nginx-pod -- /bin/sh</span><br><span class="line"></span><br><span class="line"><span class="comment">## å½“ä¸€ä¸ªPODä¸­æœ‰å¤šä¸ªå®¹å™¨æ—¶ï¼Œä½¿ç”¨-cæŒ‡å®šå®¹å™¨åï¼Œè¿æ¥åˆ°æŒ‡å®šçš„å®¹å™¨</span></span><br><span class="line">[root@master01 kubernetes]# kubectl <span class="built_in">exec</span> -it nginx-busybox -c busybox-container -- /bin/sh</span><br></pre></td></tr></table></figure><h2 id="podçš„ç½‘ç»œå…±äº«">podçš„ç½‘ç»œå…±äº«</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.PODå†…çš„å®¹å™¨ä½¿ç”¨Containeræ¨¡å¼å…±äº«æ ¹å®¹å™¨çš„ç½‘ç»œ</span><br><span class="line">2.å®¹å™¨çœ‹åˆ°çš„ç½‘ç»œè®¾å¤‡ä¿¡æ¯å’Œæ ¹å®¹å™¨å®Œå…¨ç›¸åŒ</span><br><span class="line">3.PODå†…çš„å¤šä¸ªå®¹å™¨å¯ä»¥ä½¿ç”¨localhostè¿›è¡Œç½‘ç»œé€šè®¯</span><br><span class="line">4.PODå†…çš„å¤šä¸ªå®¹å™¨ä¸èƒ½ç»‘å®šç›¸åŒçš„ç«¯å£</span><br><span class="line">5.PODçš„ç”Ÿå‘½å‘¨æœŸå’Œæ ¹å®¹å™¨ä¸€æ ·ï¼Œå¦‚æœæ ¹å®¹å™¨é€€å‡ºäº†ï¼ŒPODå°±é€€å‡ºäº†</span><br></pre></td></tr></table></figure><h2 id="podçš„æ–‡ä»¶å…±äº«">podçš„æ–‡ä»¶å…±äº«</h2><p><img src="C:/Users/Dell/AppData/Roaming/Typora/typora-user-images/image-20241002101149735.png" alt="image-20241002101149735"></p><h3 id="æŒ‚è½½æ–¹å¼hostPath">æŒ‚è½½æ–¹å¼hostPath</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">[root@master01 kubernetes]# <span class="built_in">cat</span> mysql.yaml</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Pod</span><br><span class="line">metadata:</span><br><span class="line">  name: mysql57-pod</span><br><span class="line">  namespace: default</span><br><span class="line">  labels:</span><br><span class="line">    app: mysql</span><br><span class="line">    run: mysql</span><br><span class="line">spec:</span><br><span class="line">  volumes:</span><br><span class="line">  - name: mysql-data</span><br><span class="line">  <span class="comment">#å®¿ä¸»æœºæŒ‚è½½çš„ç›®å½•</span></span><br><span class="line">    hostPath:</span><br><span class="line">      path: /data/mysql</span><br><span class="line">  containers:</span><br><span class="line">  - name: mysql57-container</span><br><span class="line">    image: mysql:5.7</span><br><span class="line">    imagePullPolicy: IfNotPresent</span><br><span class="line">  <span class="built_in">env</span>:</span><br><span class="line">  - name: MYSQL_ROOT_PASSWORD</span><br><span class="line">    value: <span class="string">&#x27;123&#x27;</span></span><br><span class="line">  - name: MYSQL_DATABASE</span><br><span class="line">    value: <span class="string">&#x27;wordpress&#x27;</span></span><br><span class="line">  - name: MYSQL_USER</span><br><span class="line">    value: <span class="string">&#x27;wp_user&#x27;</span></span><br><span class="line">  - name: MYSQL_PASSWORD</span><br><span class="line">    value: <span class="string">&#x27;123&#x27;</span></span><br><span class="line">  <span class="comment">#ä¼ é€’å‘½ä»¤æŒ‡å®šå­—ç¬¦é›†</span></span><br><span class="line">  args:</span><br><span class="line">  - --character-set-server=utf8mb4</span><br><span class="line">  - --collation-server=utf8mb4_unicode_ci</span><br><span class="line">  volumeMounts:</span><br><span class="line">  <span class="comment">#nameè¦å’Œä¸Šé¢æŒ‚è½½ç›®å½•çš„nameä¸€è‡´ï¼ŒmountPathæ˜¯å®¹å™¨å†…çš„è¦æŒ‚è½½çš„ç›®å½•</span></span><br><span class="line">  - name: mysql-data</span><br><span class="line">    mountPath: /var/lib/mysql</span><br></pre></td></tr></table></figure><h3 id="hostPathçš„typeç±»å‹">hostPathçš„typeç±»å‹</h3><blockquote><p>hostPath:<br>path: string<br>type : string</p><p>type ä¸ºç©ºæ—¶ä¸ºé»˜è®¤ç±»å‹</p><p><code>å®˜æ–¹ï¼šhttps://kubernetes.io/docs/concepts/storage/volumes/#hostpath</code></p></blockquote><table><thead><tr><th>typeç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>â€œâ€</td><td>ä¸ºç©ºæ—¶   é»˜è®¤</td></tr><tr><td>DirectoryOrCreate</td><td>ç›®å½•å¿…é¡»å­˜åœ¨ï¼Œæƒé™å¿…é¡»æ˜¯755</td></tr><tr><td>Directory</td><td>ç›®å½•å¿…é¡»å­˜åœ¨</td></tr><tr><td>FileOrCreate</td><td>æ–‡ä»¶å¿…é¡»å­˜åœ¨ï¼Œæƒé™å¿…é¡»æ˜¯644</td></tr><tr><td>File</td><td>æ–‡ä»¶å¿…é¡»å­˜åœ¨</td></tr><tr><td>Socket</td><td>æŒ‚è½½socketæ–‡ä»¶</td></tr><tr><td>CharDevice</td><td>æŒ‚è½½å­—ç¬¦è®¾å¤‡æ–‡ä»¶ï¼ˆé”®ç›˜ï¼Œç»ˆç«¯â€¦ï¼‰</td></tr><tr><td>BlockDevice</td><td>æŒ‚è½½å¿«è®¾å¤‡æ–‡ä»¶ï¼ˆç£ç›˜ï¼ŒUç›˜ï¼Œç§»åŠ¨ç¡¬ç›˜â€¦ï¼‰</td></tr></tbody></table><h3 id="æŒ‚è½½æ–¹å¼emptyDir">æŒ‚è½½æ–¹å¼emptyDir</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## å°†podå†…å®¹å™¨ç›®å½•æ˜ å°„åˆ°å®¿ä¸»æœºä¸Šçš„ä¸€ä¸ªä¸´æ—¶ç›®å½•ä¸­ï¼Œå¦‚æœPODç»“æŸï¼Œç›®å½•ä¹Ÿä¼šè¢«åˆ é™¤</span></span><br><span class="line">[root@master01 kubernetes]# <span class="built_in">cat</span> mysql.yaml</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Pod</span><br><span class="line">metadata:</span><br><span class="line">  name: mysql57-pod</span><br><span class="line">  namespace: default</span><br><span class="line">  labels:</span><br><span class="line">    app: mysql</span><br><span class="line">    run: mysql</span><br><span class="line">spec:</span><br><span class="line">  volumes:</span><br><span class="line">  - name: mysql-data</span><br><span class="line">    hostPath:</span><br><span class="line">      path: /data/mysql</span><br><span class="line">  - name: empty-data</span><br><span class="line">    emptyDir: &#123;&#125;</span><br><span class="line">  containers:</span><br><span class="line">  - name: mysql57-container</span><br><span class="line">    image: mysql:5.7</span><br><span class="line">    imagePullPolicy: IfNotPresent</span><br><span class="line">  <span class="built_in">env</span>:</span><br><span class="line">  - name: MYSQL_ROOT_PASSWORD</span><br><span class="line">    value: <span class="string">&#x27;123&#x27;</span></span><br><span class="line">  - name: MYSQL_DATABASE</span><br><span class="line">    value: <span class="string">&#x27;wordpress&#x27;</span></span><br><span class="line">  - name: MYSQL_USER</span><br><span class="line">    value: <span class="string">&#x27;wp_user&#x27;</span></span><br><span class="line">  - name: MYSQL_PASSWORD</span><br><span class="line">    value: <span class="string">&#x27;123&#x27;</span></span><br><span class="line">  args:</span><br><span class="line">  - --character-set-server=utf8mb4</span><br><span class="line">  - --collation-server=utf8mb4_unicode_ci</span><br><span class="line">  volumeMounts:</span><br><span class="line">  - name: empty-data</span><br><span class="line">    mountPath: /var/lib/mysql</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment">## å°†ä¸€ä¸ªPODå†…çš„ä¸¤ä¸ªå®¹å™¨å…±äº«ç›®å½•</span></span><br><span class="line">[root@master01 kubernetes]# <span class="built_in">cat</span> busybox.yaml</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Pod</span><br><span class="line">metadata:</span><br><span class="line">  name: nginx-busybox</span><br><span class="line">  namespace: default</span><br><span class="line">spec:</span><br><span class="line">  volumes:</span><br><span class="line">  - name: empty-data</span><br><span class="line">    emptyDir: &#123;&#125;</span><br><span class="line">  containers:</span><br><span class="line">  - name: nginx-container</span><br><span class="line">    image: nginx:alpine</span><br><span class="line">    imagePullPolicy: IfNotPresent</span><br><span class="line">    volumeMounts:</span><br><span class="line">    - name: empty-data</span><br><span class="line">      mountPath: /usr/share/nginx/html</span><br><span class="line">  - name: c7-container</span><br><span class="line">    image: centos:7</span><br><span class="line">    imagePullPolicy: IfNotPresent</span><br><span class="line">    <span class="built_in">command</span>: [<span class="string">&quot;/bin/sh&quot;</span>,<span class="string">&quot;-c&quot;</span>,<span class="string">&quot;tail -f /etc/hosts&quot;</span>]</span><br><span class="line">    volumeMounts:</span><br><span class="line">    - name: empty-data</span><br><span class="line">      mountPath: /opt/ html</span><br></pre></td></tr></table></figure><h2 id="æ ‡ç­¾çš„ä½¿ç”¨åŠè®¾ç½®">æ ‡ç­¾çš„ä½¿ç”¨åŠè®¾ç½®</h2><h3 id="nodeèŠ‚ç‚¹æ‰“æ ‡ç­¾">nodeèŠ‚ç‚¹æ‰“æ ‡ç­¾</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">kubectl get [èµ„æº] -n åç§°ç©ºé—´ --show-labels</span><br><span class="line"><span class="comment">## æŸ¥çœ‹nodeæ ‡ç­¾</span></span><br><span class="line">[root@master01 ~]# kubectl get nodes --show-labels</span><br><span class="line"></span><br><span class="line"><span class="comment">#ç»™nodeæ‰“æ ‡ç­¾</span></span><br><span class="line">[root@master01 ~]# kubectl label node node01 MEM=16g</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹nodeè§’è‰²æ ‡ç­¾role</span></span><br><span class="line">[root@master kubernetes]# kubectl get nodes </span><br><span class="line">NAME     STATUS   ROLES    AGE     VERSION</span><br><span class="line">master   Ready    master   5d15h   v1.19.3</span><br><span class="line">node01   Ready    None     5d15h   v1.19.3</span><br><span class="line">node02   Ready    None     5d15h   v1.19.3</span><br><span class="line">node03   Ready    None     5d15h   v1.19.3</span><br><span class="line"></span><br><span class="line"><span class="comment">#ç»™nodeè§’è‰²æ ‡ç­¾role</span></span><br><span class="line">[root@master kubernetes]# kubectl label node node01 node-role.kubernetes.io/node=</span><br><span class="line">[root@master kubernetes]# kubectl get nodes</span><br><span class="line">NAME     STATUS   ROLES        AGE     VERSION</span><br><span class="line">master   Ready    master       5d15h   v1.19.3</span><br><span class="line">node01   Ready    node         5d15h   v1.19.3</span><br><span class="line">node02   Ready    None         5d15h   v1.19.3</span><br><span class="line">node03   Ready    None         5d15h   v1.19.3</span><br><span class="line"></span><br><span class="line">kubectl label node node01 node-role.kubernetes.io/node=</span><br><span class="line">                   èŠ‚ç‚¹å    è°ƒç”¨æ¥å£             /rolesæ ‡ç­¾å=</span><br><span class="line">                   </span><br><span class="line"><span class="comment">#åˆ é™¤nodeè§’è‰²æ ‡ç­¾role</span></span><br><span class="line">[root@master kubernetes]# kubectl label node node01 node-role.kubernetes.io/node-</span><br></pre></td></tr></table></figure><h3 id="ç»™podæ‰“æ ‡ç­¾">ç»™podæ‰“æ ‡ç­¾</h3><p><strong>ç»™podæ‰“æ ‡ç­¾</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŸ¥çœ‹podæ ‡ç­¾</span></span><br><span class="line">[root@master kubernetes]# kubectl get pods --show-labels </span><br><span class="line">NAME                     READY   STATUS    RESTARTS   AGE     LABELS</span><br><span class="line">nginx-565785f75c-tpjmj   1/1     Running   2          33h     app=nginx</span><br><span class="line">nginx-pod                1/1     Running   2          33h     &lt;none&gt;</span><br><span class="line">wordpress-pod            2/2     Running   0          2m11s   &lt;none&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ‰“æ ‡ç­¾</span></span><br><span class="line">kubectl label èµ„æºç±»å‹ èµ„æºå æ ‡ç­¾</span><br><span class="line">[root@master kubernetes]# kubectl label pod nginx-pod name=nginx</span><br><span class="line"><span class="string">&#x27;pod/nginx-pod labeled</span></span><br><span class="line"><span class="string">[root@master kubernetes]# kubectl get pods --show-labels </span></span><br><span class="line"><span class="string">NAME                     READY   STATUS    RESTARTS   AGE     LABELS</span></span><br><span class="line"><span class="string">nginx-565785f75c-tpjmj   1/1     Running   2          33h     app=nginx</span></span><br><span class="line"><span class="string">nginx-pod                1/1     Running   2          33h     name=nginx</span></span><br></pre></td></tr></table></figure><p><strong>ä½¿ç”¨èµ„æºæ¸…å•æ‰“æ ‡ç­¾</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">apiVersion: v1</span><br><span class="line">Kind: Pod</span><br><span class="line">metadata:</span><br><span class="line">  name: nginx-pod</span><br><span class="line">  namespace: default</span><br><span class="line">  labels:</span><br><span class="line">    run: nginx</span><br><span class="line">spec:</span><br><span class="line">  containers:</span><br><span class="line">  - name: nginx-container</span><br><span class="line">    image: nginx:alpine</span><br><span class="line">    imagePullPolicy: IfNotPresent</span><br></pre></td></tr></table></figure><p><strong>åˆ©ç”¨æ ‡ç­¾ï¼Œå¯åŠ¨podåœ¨æŒ‡å®šæ ‡ç­¾çš„nodeä¸Š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@master01 kubernetes]# <span class="built_in">cat</span> nginx-2.yaml</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Pod</span><br><span class="line">metadata:</span><br><span class="line">  name: nginx-pod-v2</span><br><span class="line">  namespace: default</span><br><span class="line">  labels:</span><br><span class="line">    run: nginx</span><br><span class="line">spec:</span><br><span class="line"><span class="comment">#è¿™é‡Œæ˜¯é€‰æ‹©èµ·åœ¨æ ‡ç­¾æ˜¯MEM: 16gçš„nodeèŠ‚ç‚¹ä¸Šï¼Œä½¿ç”¨kubectl get nodes --show-labels æŸ¥çœ‹nodeæ ‡ç­¾</span></span><br><span class="line">  nodeSelector:</span><br><span class="line">  MEM: 16g</span><br><span class="line">  containers:</span><br><span class="line">  - name: nginx-container-v2</span><br><span class="line">    image: nginx:alpine</span><br><span class="line">    imagePullPolicy: IfNotPresent</span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤podæ ‡ç­¾">åˆ é™¤podæ ‡ç­¾</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">kubectl label [èµ„æº] [èµ„æºå] [æ ‡ç­¾åã€æ ‡ç­¾key]-</span><br><span class="line"><span class="comment">#æŸ¥çœ‹å½“å‰podæœ‰çš„æ ‡ç­¾</span></span><br><span class="line">[root@master kubernetes]# kubectl get pods --show-labels</span><br><span class="line">NAME                     READY   STATUS    RESTARTS   AGE   LABELS</span><br><span class="line">nginx-565785f75c-tpjmj   1/1     Running   2          35h   app=nginx,pod-template-hash=565785f75c</span><br><span class="line">nginx-pod                1/1     Running   2          34h   name=nginx</span><br><span class="line">wordpress-pod            2/2     Running   0          39m   &lt;none&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ é™¤podæ ‡ç­¾</span></span><br><span class="line">[root@master kubernetes]# kubectl label pod nginx-pod name-</span><br><span class="line">pod/nginx-pod labeled</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹</span></span><br><span class="line">[root@master kubernetes]# kubectl get pods --show-labels</span><br><span class="line">NAME                     READY   STATUS    RESTARTS   AGE   LABELS</span><br><span class="line">nginx-565785f75c-tpjmj   1/1     Running   2          35h   app=nginx,pod-template-hash=565785f75c</span><br><span class="line">nginx-pod                1/1     Running   2          34h   &lt;none&gt;</span><br><span class="line">wordpress-pod            2/2     Running   0          39m   &lt;none&gt;</span><br></pre></td></tr></table></figure><h3 id="æ ¹æ®æ ‡ç­¾æŸ¥æ‰¾pod">æ ¹æ®æ ‡ç­¾æŸ¥æ‰¾pod</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@master kubernetes]# kubectl get pod --show-labels -l app</span><br><span class="line">NAME                     READY   STATUS    RESTARTS   AGE   LABELS</span><br><span class="line">nginx-565785f75c-tpjmj   1/1     Running   2          35h   app=nginx,pod-template-hash=565785f75c</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä½¿ç”¨  `-l`  æŸ¥æ‰¾æŒ‡å®šçš„pod</span></span><br></pre></td></tr></table></figure><h3 id="æ ¹æ®æ ‡ç­¾åˆ é™¤pod">æ ¹æ®æ ‡ç­¾åˆ é™¤pod</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master kubernetes]# kubectl delete pod -l app=nginx</span><br></pre></td></tr></table></figure><h2 id="kubectlç”¨äºæ’é”™å‘½ä»¤">kubectlç”¨äºæ’é”™å‘½ä»¤</h2><h3 id="describe">describe</h3><blockquote><p><code> kubectl describe pod</code></p><p>æŸ¥çœ‹ç›¸å…³ Pod çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¸®åŠ©æˆ‘ä»¬äº†è§£ Pod çš„çŠ¶æ€ã€é…ç½®å’Œè¿è¡ŒçŠ¶å†µã€‚å°¤å…¶æ˜¯Eventså¯ä»¥å¸®åŠ©æˆ‘ä»¬åšä¸€äº›æ•…éšœæ’æŸ¥ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# kubectl describe pod busybox-pod -n luay</span><br><span class="line"><span class="comment">#å¦‚æœæŸ¥çœ‹çš„podçš„åç§°ç©ºé—´ä¸æ˜¯é»˜è®¤defaultï¼Œåˆ™éœ€è¦æŒ‡å®š -n</span></span><br><span class="line">Â·Â·Â·</span><br><span class="line">Events:</span><br><span class="line">  Type    Reason     Age   From               Message</span><br><span class="line">  ----    ------     ----  ----               -------</span><br><span class="line">  Normal  Scheduled  18m   default-scheduler  Successfully assigned luay/busybox-pod to node03</span><br><span class="line">  Normal  Pulled     18m   kubelet            Container image <span class="string">&quot;busybox&quot;</span> already present on machine</span><br><span class="line">  Normal  Created    18m   kubelet            Created container busybox-container</span><br><span class="line">  Normal  Started    18m   kubelet            Started container busybox-container</span><br><span class="line">  Normal  Pulled     18m   kubelet            Container image <span class="string">&quot;nginx:alpine&quot;</span> already present on machine</span><br><span class="line">  Normal  Created    18m   kubelet            Created container nginx-container</span><br><span class="line">  Normal  Started    18m   kubelet            Started container nginx-container</span><br><span class="line">  </span><br><span class="line"><span class="comment">#æŸ¥çœ‹nodeèŠ‚ç‚¹ä¿¡æ¯</span></span><br><span class="line">[root@master ~]# kubectl describe node master01</span><br></pre></td></tr></table></figure><h3 id="logs">logs</h3><blockquote><p><code> kubectl logs èµ„æºå</code>   å¯ä»¥ä½¿ç”¨kubectl get pod  æŸ¥çœ‹èµ„æºå</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;kubectl logs èµ„æºåç§°&#x27;</span></span><br><span class="line">[root@master ~]# kubectl logs mysql80 </span><br><span class="line"></span><br><span class="line"><span class="comment">#å®æ—¶æŸ¥çœ‹æ—¥å¿—</span></span><br><span class="line">[root@master ~]# kubectl logs -f mysql80 </span><br><span class="line"></span><br><span class="line"><span class="comment">#åŸºäºä¸€ä¸ªPodå†…å¤šä¸ªå®¹å™¨æŸ¥çœ‹æŒ‡çš„å®¹å™¨çš„æ—¥å¿—   -c  æŒ‡å®šå®¹å™¨å</span></span><br><span class="line">[root@master ~]# kubectl logs -f multiple-wordpress -c db</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;multiple-wordpress&#x27;</span> podå</span><br><span class="line">-c æŒ‡å®špodé‡Œçš„æŸä¸€ä¸ªå®¹å™¨å</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹podä¸Šä¸€ä¸ªå®¹å™¨çš„æ—¥å¿—ï¼ˆå‰ææ˜¯è¯¥å®¹å™¨å­˜åœ¨ï¼Œè‹¥ç§»é™¤äº†åˆ™çœ‹ä¸åˆ°ï¼‰</span></span><br><span class="line"><span class="string">&#x27;è¿™ç§æƒ…å†µå­˜åœ¨äºï¼Œæ€æ‰äº†podé‡ŒæŸä¸ªå®¹å™¨ï¼Œåˆè¢«kubeleté‡æ–°æ‹‰å–äº†å¦ä¸€ä¸ªæ–°çš„å®¹å™¨,-pæŸ¥çœ‹ä¸Šä¸ªå®¹å™¨æ—¥å¿—&#x27;</span></span><br><span class="line">[root@master ~]#  kubectl logs -f mysql80 -p</span><br><span class="line"><span class="string">&#x27;mysql80&#x27;</span> å®¹å™¨å   ----å¾…éªŒè¯</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹5åˆ†é’Ÿå†…çš„æ—¥å¿—ä¿¡æ¯ï¼Œ é»˜è®¤æ˜¯æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—ï¼Œå¯ä»¥è‡ªå®šä¹‰æŒ‡å®šæ—¶é—´ï¼Œä¾‹å¦‚: 5s, 2m, or 3h.</span></span><br><span class="line">[root@master ~]# kubectl logs -f mysql80 --since  5m</span><br></pre></td></tr></table></figure><h3 id="cp">cp</h3><p><strong>å°†æœ¬åœ°çš„æ–‡ä»¶æ‹·è´åˆ°Podçš„å®¹å™¨ä¸­</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# kubectl <span class="built_in">cp</span> wordpress.yaml mysql80:/tmp</span><br><span class="line"></span><br><span class="line">å¦‚ä½•æŸ¥çœ‹ï¼Ÿ</span><br><span class="line">[root@master ~]# kubectl <span class="built_in">exec</span> -it mysql80 --<span class="built_in">ls</span> /tmp</span><br><span class="line">ç±»ä¼¼äºdocker <span class="built_in">exec</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#å¦‚æœæœ‰å¤šä¸ªå®¹å™¨ï¼Œåˆ™éœ€è¦ä½¿ç”¨-cæŒ‡å®š </span></span><br><span class="line">kubectl <span class="built_in">cp</span>  wordpress.yaml  -c wp multiple-wordpress:/</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;multiple-wordpress&#x27;</span>   <span class="comment">#podå   ---å¾…éªŒè¯</span></span><br><span class="line"><span class="string">&#x27;wp&#x27;</span> <span class="comment">#å®¹å™¨å</span></span><br><span class="line"></span><br><span class="line">å¦‚æœæœ‰å¤šä¸ªå®¹å™¨ï¼Œåˆ™éœ€è¦ä½¿ç”¨-cæŒ‡å®šå®¹å™¨çš„åç§°ï¼Œè‹¥ä¸æŒ‡å®šï¼Œåˆ™é»˜è®¤Podè¿æ¥ç¬¬ä¸€ä¸ªå®¹å™¨</span><br></pre></td></tr></table></figure><h3 id="explain">explain</h3><p><strong>æŸ¥çœ‹æŒ‡å®šå­—æ®µçš„å¸®åŠ©ä¿¡æ¯</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# kubectl explain pods.</span><br><span class="line">[root@master ~]# kubectl explain pods.metadata</span><br><span class="line">[root@master ~]# kubectl explain pods.metadata.name</span><br><span class="line">[root@master ~]# kubectl explain pods.spec.containers</span><br></pre></td></tr></table></figure><p><strong>å¸¸è§çš„èµ„æºç±»å‹</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;string&gt;ï¼š</span><br><span class="line">è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</span><br><span class="line"></span><br><span class="line">&lt;Object&gt;:</span><br><span class="line">è¡¨ç¤ºæœ‰ä¸‹çº§å­—æ®µã€‚</span><br><span class="line"></span><br><span class="line"> &lt;[]Object&gt;:</span><br><span class="line">è¡¨ç¤ºæ•°ç»„å¯¹è±¡è¯´å¯ä»¥æœ‰å¤šä¸ªï¼Œæ¯ä¸ªå¯¹è±¡çš„åŒºåˆ†ä½¿ç”¨<span class="string">&quot;-&quot;</span>ï¼ŒåŒä¸€ä¸ªå¯¹è±¡æ•°ç»„å†…çš„ç›¸å…³å­—æ®µå¯ä»¥ç›¸äº’äº¤æ¢ã€‚</span><br><span class="line"></span><br><span class="line">&lt;boolean&gt;:</span><br><span class="line">åªæœ‰<span class="literal">true</span>å’Œ<span class="literal">false</span>ä¸¤ä¸ªæœ‰æ•ˆå€¼ã€‚</span><br><span class="line"></span><br><span class="line">&lt;<span class="built_in">integer</span>&gt;:</span><br><span class="line">æ•´å‹ï¼Œè¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªæ•´æ•°ã€‚</span><br><span class="line"></span><br><span class="line">-required-</span><br><span class="line">è¡¨ç¤ºè¯¥å­—æ®µå¿…é¡»å®šä¹‰ï¼Œä¸å®šä¹‰åˆ™ä¼šæŠ¥é”™ã€‚</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> kubernetes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> kubernetes </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>02-k8séƒ¨ç½²</title>
      <link href="/posts/24ecfc3b.html"/>
      <url>/posts/24ecfc3b.html</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒå‡†å¤‡">ç¯å¢ƒå‡†å¤‡</h2><table><thead><tr><th>ä¸»æœºå</th><th>WanIP</th><th>LanIP</th><th>è§’è‰²</th><th>åº”ç”¨</th><th>é…ç½®</th></tr></thead><tbody><tr><td>master01</td><td>10.0.0.200</td><td>172.16.1.200</td><td>master</td><td>kubectlã€apiserverã€ schedulerã€controllerã€ etcdã€kubeletã€dockerã€ kube-proxy</td><td>1h2g</td></tr><tr><td>node01</td><td>10.0.0.201</td><td>172.16.1.201</td><td>node</td><td>kubeletã€dockerã€kubeproxyã€proxy</td><td>1h2g</td></tr><tr><td>node02</td><td>10.0.0.202</td><td>172.16.1.202</td><td>node</td><td>kubeletã€dockerã€kubeproxyã€proxy</td><td>1h2g</td></tr><tr><td>node03</td><td>10.0.0.203</td><td>172.16.1.203</td><td>node</td><td>kubeletã€dockerã€kubeproxyã€proxy</td><td>2h4g</td></tr></tbody></table><p><strong>IPè§„åˆ’</strong></p><table><thead><tr><th>ä¸‰ç§Service</th><th>IP</th></tr></thead><tbody><tr><td>PodIP</td><td>10.2.0.0</td></tr><tr><td>ClusterIP</td><td>10.1.0.0</td></tr><tr><td>NodeIP</td><td>10.0.0.0</td></tr></tbody></table><h2 id="åŸºç¡€ç¯å¢ƒä¼˜åŒ–">åŸºç¡€ç¯å¢ƒä¼˜åŒ–</h2><blockquote><p>æ³¨æ„ï¼šå››ä¸ªèŠ‚ç‚¹éƒ½æ“ä½œ</p></blockquote><p><strong>1.é…ç½®kubeleté…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„Cgroupé©±åŠ¨å’Œç¦ç”¨swap</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# <span class="built_in">cat</span> &gt;/etc/sysconfig/kubelet &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">KUBELET_CGROUP_ARGS=&quot;--cgroup-driver=systemd&quot;</span></span><br><span class="line"><span class="string">KUBELET_EXTRA_ARGS=&quot;--fail-swap-on=false&quot;</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line">`æ³¨é‡Š`</span><br><span class="line"><span class="comment">## è®©kubeletä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„Cgroupé©±åŠ¨</span></span><br><span class="line">KUBELET_CGROUP_ARGS=<span class="string">&quot;--cgroup-driver=systemd&quot;</span></span><br><span class="line"><span class="comment">## è®©kubeletç¦æ­¢ä½¿ç”¨swapï¼ˆè™šæ‹Ÿå†…å­˜ï¼‰</span></span><br><span class="line">KUBELET_EXTRA_ARGS=<span class="string">&quot;--fail-swap-on=false&quot;</span></span><br></pre></td></tr></table></figure><p><strong>2.å†…æ ¸å‚æ•°è°ƒä¼˜</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]#  <span class="built_in">cat</span> &gt; /etc/sysctl.d/k8s.conf &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">net.bridge.bridge-nf-call-iptables=1</span></span><br><span class="line"><span class="string">net.bridge.bridge-nf-call-ip6tables=1</span></span><br><span class="line"><span class="string">net.ipv4.ip_forward=1</span></span><br><span class="line"><span class="string">vm.swappiness=0</span></span><br><span class="line"><span class="string">fs,file-max=52706963</span></span><br><span class="line"><span class="string">fs.nr_open=52706963</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line">`æ³¨é‡Š`</span><br><span class="line"><span class="comment">## å¼€å¯iptablesåŠŸèƒ½ ipv6</span></span><br><span class="line">net.bridge.bridge-nf-call-ip6tables=1</span><br><span class="line"><span class="comment">## å¼€å¯iptablesåŠŸèƒ½ ipv4</span></span><br><span class="line">net.bridge.bridge-nf-call-iptables=1</span><br><span class="line"><span class="comment">## å¼€å¯å†…æ ¸è½¬å‘</span></span><br><span class="line">net.ipv4.ip_forward=1</span><br><span class="line"><span class="comment">## å†…æ ¸å‚æ•°ç¦ç”¨swap</span></span><br><span class="line">vm.swappiness=0</span><br><span class="line"><span class="comment">## æ–‡ä»¶æè¿°ç¬¦æ–‡ä»¶æœ€å¤§å€¼</span></span><br><span class="line">fs,file-max=52706963</span><br><span class="line"><span class="comment">## æ–‡ä»¶æè¿°ç¬¦å¼€å¯æ•°é‡</span></span><br><span class="line">fs.nr_open=52706963</span><br></pre></td></tr></table></figure><p><strong>3.æ›´æ”¹dockeræº</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ·»åŠ docekræº</span></span><br><span class="line">[root@master ~]#  <span class="built_in">cat</span> &gt; /etc/yum.repos.d/docker-ce.repo &lt;&lt;<span class="string">&quot;EOF&quot;</span></span><br><span class="line">[docker-ce-stable]</span><br><span class="line">name=Docker CE Stable - <span class="variable">$basearch</span></span><br><span class="line">baseurl=https://download.docker.com/linux/centos/<span class="variable">$releasever</span>/<span class="variable">$basearch</span>/stable</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=https://download.docker.com/linux/centos/gpg</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ›¿æ¢ä¸ºåä¸ºæº</span></span><br><span class="line">[root@master ~]# sed -i <span class="string">&#x27;s+download.docker.com+mirrors.huaweicloud.com/docker-ce+&#x27;</span> /etc/yum.repos.d/docker-ce.repo</span><br></pre></td></tr></table></figure><p><strong>4.å®‰è£…æ—¶é—´åŒæ­¥æœåŠ¡</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# yum install -y chrony</span><br><span class="line">[root@master ~]# systemctl start chronyd</span><br><span class="line">[root@master ~]# systemctl <span class="built_in">enable</span> chronyd</span><br></pre></td></tr></table></figure><p><strong>5.å…³é—­swap</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä¸´æ—¶å…³é—­swap</span></span><br><span class="line">[root@master ~]#  swapoff -a &amp;&amp; sysctl -w vm.swappiness=0</span><br><span class="line"><span class="comment">#æ°¸ä¹…å…³é—­</span></span><br><span class="line">[root@master ~]#  sed -i <span class="string">&#x27;/swap/d&#x27;</span> /etc/fstab</span><br><span class="line"><span class="comment">#æŸ¥çœ‹æ˜¯å¦å…³é—­</span></span><br><span class="line">[root@master ~]# free -h</span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:           1.9G         95M        1.6G        9.5M        283M        1.7G</span><br><span class="line">Swap:            0B          0B          0B</span><br></pre></td></tr></table></figure><p><strong>6.åŠ è½½ipvsæ¨¡å—</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# <span class="built_in">cat</span>  &gt; /etc/sysconfig/modules/ipvs.modules &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">#! /bin/bash</span></span><br><span class="line"><span class="string">modprobe -- ip_vs</span></span><br><span class="line"><span class="string">modprobe -- ip_vs_rr</span></span><br><span class="line"><span class="string">modprobe -- ip_vs_wrr</span></span><br><span class="line"><span class="string">modprobe -- ip_vs_sh</span></span><br><span class="line"><span class="string">modprobe -- nf_conntrack_ipv4</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æˆæƒ</span></span><br><span class="line">[root@master ~]# <span class="built_in">chmod</span> +x /etc/sysconfig/modules/ipvs.modules</span><br><span class="line"><span class="comment">#sourceä½¿ç”Ÿæ•ˆ</span></span><br><span class="line">[root@master ~]# <span class="built_in">source</span> /etc/sysconfig/modules/ipvs.modules</span><br><span class="line"><span class="comment">#æŸ¥çœ‹æ˜¯å¦ç”Ÿæ•ˆ</span></span><br><span class="line">[root@master ~]# lsmod|grep -e <span class="string">&#x27;ip_vs&#x27;</span> -e <span class="string">&#x27;nf_conntrack_ipv&#x27;</span></span><br><span class="line">nf_conntrack_ipv4      15053  0 </span><br><span class="line">nf_defrag_ipv4         12729  1 nf_conntrack_ipv4</span><br><span class="line">ip_vs_sh               12688  0 </span><br><span class="line">ip_vs_wrr              12697  0 </span><br><span class="line">ip_vs_rr               12600  0 </span><br><span class="line">ip_vs                 145497  6 ip_vs_rr,ip_vs_sh,ip_vs_wrr</span><br><span class="line">nf_conntrack          133095  2 ip_vs,nf_conntrack_ipv4</span><br><span class="line">libcrc32c              12644  3 xfs,ip_vs,nf_conntrack</span><br><span class="line"></span><br><span class="line"><span class="comment">#äº†è§£ä¸‹IPVS  LVS:ipvsadm</span></span><br></pre></td></tr></table></figure><h2 id="å®‰è£…docker">å®‰è£…docker</h2><blockquote><p>æ³¨æ„ï¼šæ‰€æœ‰èŠ‚ç‚¹æ‰§è¡Œ</p></blockquote><p><strong>1.å®‰è£…æŒ‡å®šç‰ˆæœ¬docekrå’Œå®¹å™¨è¿è¡Œæ—¶</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# yum install -y docker-ce-19.03.15 docker-ce-cli-19.03.15 containerd.io</span><br><span class="line"></span><br><span class="line">`å®¹å™¨è¿è¡Œæ—¶ï¼ŒDockerã€containerdã€CRI-O`</span><br></pre></td></tr></table></figure><p><strong>2.å¯åŠ¨å’Œå¼€æœºè‡ªå¯</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# systemctl start docker</span><br><span class="line">[root@master ~]# systemctl <span class="built_in">enable</span> docker</span><br></pre></td></tr></table></figure><p><strong>3.æ·»åŠ dockeré•œåƒåŠ é€Ÿ</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# <span class="built_in">cat</span> &gt; /etc/docker/daemon.json &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">    &quot;exec-opts&quot;: [&quot;native.cgroupdriver=systemd&quot;],</span></span><br><span class="line"><span class="string">    &quot;registry-mirrors&quot;: [</span></span><br><span class="line"><span class="string">    &quot;https://docker.1panel.live&quot;,</span></span><br><span class="line"><span class="string">    &quot;https://dockercf.jsdelivr.fyi&quot;,</span></span><br><span class="line"><span class="string">    &quot;https://docker-cf.registry.cyou&quot;,</span></span><br><span class="line"><span class="string">    &quot;https://docker.chenby.cn&quot;,</span></span><br><span class="line"><span class="string">    &quot;https://docker.jsdelivr.fyi&quot;,</span></span><br><span class="line"><span class="string">    &quot;https://docker.m.daocloud.io&quot;,</span></span><br><span class="line"><span class="string">    &quot;https://docker.m.daocloud.io&quot;,</span></span><br><span class="line"><span class="string">    &quot;https://docker.mirrors.sjtug.sjtu.edu.cn&quot;,</span></span><br><span class="line"><span class="string">    &quot;https://docker.mirrors.ustc.edu.cn&quot;,</span></span><br><span class="line"><span class="string">    &quot;https://docker.nju.edu.cn&quot;,</span></span><br><span class="line"><span class="string">    &quot;https://dockerproxy.com&quot;,</span></span><br><span class="line"><span class="string">    &quot;https://docker.rainbond.cc&quot;,</span></span><br><span class="line"><span class="string">    &quot;https://docker.registry.cyou&quot;,</span></span><br><span class="line"><span class="string">    &quot;https://dockertest.jsdelivr.fyi&quot;,</span></span><br><span class="line"><span class="string">    &quot;https://hub-mirror.c.163.com&quot;,</span></span><br><span class="line"><span class="string">    &quot;https://hub.rat.dev/&quot;,</span></span><br><span class="line"><span class="string">    &quot;https://mirror.aliyuncs.com&quot;,</span></span><br><span class="line"><span class="string">    &quot;https://mirror.baidubce.com&quot;,</span></span><br><span class="line"><span class="string">    &quot;https://mirror.iscas.ac.cn&quot;,</span></span><br><span class="line"><span class="string">    &quot;https://registry.docker-cn.com&quot;</span></span><br><span class="line"><span class="string">  ]</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line">`<span class="string">&quot;exec-opts&quot;</span>: [<span class="string">&quot;native.cgroupdriver=systemd&quot;</span>], `#é•œåƒåŠ é€Ÿä½¿ç”¨ç³»ç»ŸCgroupé©±åŠ¨</span><br></pre></td></tr></table></figure><p><strong>4.é‡å¯docerk</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# systemctl daemon-reload</span><br><span class="line">[root@master ~]# systemctl restart docker</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…kubeadm">å®‰è£…kubeadm</h2><blockquote><p>æ³¨æ„ï¼šæ‰€æœ‰èŠ‚ç‚¹æ‰§è¡Œ</p></blockquote><p><strong>1.æ›´æ¢kubernetesçš„yumæº</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> &lt;&lt;<span class="string">&quot;EOF&quot;</span> &gt; /etc/yum.repos.d/kubernetes.repo</span><br><span class="line">[kubernetes]</span><br><span class="line">name=Kubernetes</span><br><span class="line">baseurl=https://mirrors.huaweicloud.com/kubernetes/yum/repos/kubernetes-el7-<span class="variable">$basearch</span></span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=1</span><br><span class="line">repo_gpgcheck=0</span><br><span class="line">gpgkey=https://mirrors.huaweicloud.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.huaweicloud.com/kubernetes/yum/doc/rpm-package-key.gpg</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><p><strong>2.ä¸‹è½½æŒ‡å®šç‰ˆæœ¬kubernetes</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# yum install kubelet-1.19.3 kubeadm-1.19.3  kubectl-1.19.3  ipvsadm -y</span><br><span class="line"></span><br><span class="line">`kubelet`: nodeèŠ‚ç‚¹å®¹å™¨è¿è¡Œæ—¶çš„æ§åˆ¶å™¨ </span><br><span class="line">`kubeadm`: åšk8sé›†ç¾¤ kubectl k8sçš„å‘½ä»¤å®¢æˆ·ç«¯</span><br><span class="line">`ipvsadm`: åŠ è½½ipvsæ¨¡å—</span><br></pre></td></tr></table></figure><p><strong>3.å¯åŠ¨å¹¶åŠ å…¥å¼€æœºè‡ªå¯</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# systemctl start kubelet</span><br><span class="line">[root@master ~]# systemctl <span class="built_in">enable</span> kubelet</span><br></pre></td></tr></table></figure><h2 id="åˆå§‹åŒ–é›†ç¾¤">åˆå§‹åŒ–é›†ç¾¤</h2><blockquote><p>:dango:æ³¨æ„ï¼šä»…masterèŠ‚ç‚¹æ‰§è¡Œ</p><p>æ­¥éª¤1-3éƒ½æ˜¯masterèŠ‚ç‚¹æ‰§è¡Œ</p></blockquote><p><strong>1.åˆå§‹åŒ–é›†ç¾¤</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# kubeadm init \</span><br><span class="line">--apiserver-advertise-address=10.0.0.200 \</span><br><span class="line">--image-repository registry.aliyuncs.com/google_containers  \</span><br><span class="line">--kubernetes-version=v1.19.3 \</span><br><span class="line">--service-cidr=10.1.0.0/16 \</span><br><span class="line">--pod-network-cidr=10.2.0.0/16 \</span><br><span class="line">--service-dns-domain=cluster.local \</span><br><span class="line">--ignore-preflight-errors=Swap \</span><br><span class="line">--ignore-preflight-errors=NumCPU</span><br><span class="line"></span><br><span class="line">`æ³¨é‡Š`</span><br><span class="line">`--apiserver-advertise-address=10.0.0.200`  <span class="comment">#å½“å‰masterä¸»æœºip</span></span><br><span class="line">`--service-cidr=10.1.0.0/16` <span class="comment">#è§„åˆ’ClusterIPç½‘æ®µ</span></span><br><span class="line">`--pod-network-cidr=10.2.0.0/16` <span class="comment">#è§„åˆ’çš„podIP</span></span><br><span class="line">`--service-dns-domain=cluster.local` <span class="comment">#ä½¿ç”¨æœ¬åœ°DNSé›†ç¾¤ï¼Œk8ä¼šè‡ªå·±è£…Coredns</span></span><br><span class="line">`--ignore-preflight-errors=Swap`<span class="comment">#å¿½ç•¥SwapæŠ¥é”™</span></span><br><span class="line">`--ignore-preflight-errors=NumCPU`<span class="comment">#å¿½ç•¥CPUæŠ¥é”™</span></span><br><span class="line"></span><br><span class="line">`ClusterIP`: ç”¨äºæ„å»ºå®¹å™¨åŒ–åº”ç”¨çš„å†…éƒ¨é€šä¿¡ç½‘ç»œï¼Œä½œä¸ºPODçš„è´Ÿè½½å‡è¡¡</span><br><span class="line"></span><br><span class="line"><span class="comment">###åˆå§‹åŒ–æ—¶é—´æ¯”è¾ƒé•¿ï¼Œæ²¡æœ‰æŠ¥é”™ç­‰å¾…å³å¯</span></span><br></pre></td></tr></table></figure><p><strong>ä¿å­˜token</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">`åˆå§‹åŒ–æˆåŠŸåä¼šè¾“å…¥å¦‚ä¸‹ï¼Œä½ çš„å’Œæˆ‘çš„ä¸ä¸€æ ·ï¼Œæ³¨æ„ä¿å­˜,24håä¼šæ¶ˆå¤±`</span><br><span class="line">Your Kubernetes control-plane has initialized successfully!</span><br><span class="line">To start using your cluster, you need to run the following as a regular user:</span><br><span class="line">`#è¿™ä¸ªå‘½ä»¤ä¹Ÿä¿å­˜ï¼Œç­‰ä¸€ä¸‹ç›´æ¥å¤åˆ¶æ‰§è¡Œ`</span><br><span class="line">  <span class="built_in">mkdir</span> -p <span class="variable">$HOME</span>/.kube</span><br><span class="line">  <span class="built_in">sudo</span> <span class="built_in">cp</span> -i /etc/kubernetes/admin.conf <span class="variable">$HOME</span>/.kube/config</span><br><span class="line">  <span class="built_in">sudo</span> <span class="built_in">chown</span> $(<span class="built_in">id</span> -u):$(<span class="built_in">id</span> -g) <span class="variable">$HOME</span>/.kube/config</span><br><span class="line"></span><br><span class="line">You should now deploy a pod network to the cluster.</span><br><span class="line">Run <span class="string">&quot;kubectl apply -f [podnetwork].yaml&quot;</span> with one of the options listed at:</span><br><span class="line">  https://kubernetes.io/docs/concepts/cluster-administration/addons/</span><br><span class="line">Then you can <span class="built_in">join</span> any number of worker nodes by running the following on each as root:</span><br><span class="line">kubeadm <span class="built_in">join</span> 10.0.0.200:6443 --token ao4unc.i520imoy7frmmucj \</span><br><span class="line">    --discovery-token-ca-cert-hash sha256:77e1fdf379200e1e377304865da17a4f35212955eaf331d2df736c452a2e82f8 </span><br></pre></td></tr></table></figure><blockquote><p>!!!  åˆ°è¿™ä¸€æ­¥å‰é¢æ²¡æŠ¥é”™å°±å¯ä»¥æ‰“å¿«ç…§ï¼Œä¸‡ä¸€åé¢å‡ºé”™æ–¹ä¾¿å›æ»šï¼Œå»ºè®®æ‰€æœ‰èŠ‚ç‚¹éƒ½å¯ä»¥æ‰“ä¸€æ¬¡ï¼Œå¦‚æœæŠ¥é”™å¯ä»¥å›æ»šåˆ°åŒä¸€èµ·å§‹ç‚¹</p></blockquote><blockquote><p>!! å¦‚æœæ—¶é—´å¤ªä¹…å¿˜è®°åŠ å…¥ä»¤ç‰Œçš„å‘½ä»¤ï¼Œæ‰§è¡Œå‘½ä»¤</p><p><code>kubeadm token create --print-join-command</code></p><p>è·å–æ–°çš„joinä»¤ç‰Œ</p></blockquote><p><strong>2.åˆ›å»ºé…ç½®æ–‡ä»¶ç›®å½•</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]#   <span class="built_in">mkdir</span> -p <span class="variable">$HOME</span>/.kube</span><br><span class="line">[root@master ~]#   <span class="built_in">sudo</span> <span class="built_in">cp</span> -i /etc/kubernetes/admin.conf <span class="variable">$HOME</span>/.kube/config</span><br><span class="line">[root@master ~]#   <span class="built_in">sudo</span> <span class="built_in">chown</span> $(<span class="built_in">id</span> -u):$(<span class="built_in">id</span> -g) <span class="variable">$HOME</span>/.kube/config</span><br><span class="line">`ç›´æ¥å¤åˆ¶ä¸Šé¢çš„ä¸‰æ¡è¾“å‡º`</span><br></pre></td></tr></table></figure><p><strong>3.æŸ¥çœ‹k8sé›†ç¾¤èŠ‚ç‚¹</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# kubectl get nodes</span><br><span class="line">NAME     STATUS     ROLES    AGE   VERSION</span><br><span class="line">master   NotReady   master   11m   v1.19.3</span><br></pre></td></tr></table></figure><p><strong>4.å…¶ä»–nodeèŠ‚ç‚¹åŠ å…¥é›†ç¾¤</strong></p><blockquote><p>æ³¨æ„ï¼šè¿™é‡Œæ˜¯3ä¸ªnodeèŠ‚ç‚¹æ‰§è¡Œ  <code>å¤åˆ¶è‡ªå·±çš„ï¼Œå«æœ‰tokençš„å‘½ä»¤ï¼Œä¸è¦å¤åˆ¶æˆ‘çš„</code></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@node01 ~]# kubeadm <span class="built_in">join</span> 10.0.0.200:6443 --token ao4unc.i520imoy7frmmucj \</span><br><span class="line">    --discovery-token-ca-cert-hash sha256:77e1fdf379200e1e377304865da17a4f35212955eaf331d2df736c452a2e82f8 </span><br><span class="line">    </span><br><span class="line">[root@node02 ~]# kubeadm <span class="built_in">join</span> 10.0.0.200:6443 --token ao4unc.i520imoy7frmmucj \</span><br><span class="line">    --discovery-token-ca-cert-hash sha256:77e1fdf379200e1e377304865da17a4f35212955eaf331d2df736c452a2e82f8 </span><br><span class="line"></span><br><span class="line">[root@node03 ~]# kubeadm <span class="built_in">join</span> 10.0.0.200:6443 --token ao4unc.i520imoy7frmmucj \</span><br><span class="line">    --discovery-token-ca-cert-hash sha256:77e1fdf379200e1e377304865da17a4f35212955eaf331d2df736c452a2e82f8 </span><br><span class="line">Â·Â·Â·</span><br><span class="line">Run <span class="string">&#x27;kubectl get nodes&#x27;</span> on the control-plane to see this node <span class="built_in">join</span> the cluster.</span><br></pre></td></tr></table></figure><p><strong>5.æŸ¥çœ‹k8sé›†ç¾¤</strong></p><blockquote><p>å»masterèŠ‚ç‚¹çœ‹</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# kubectl get nodes</span><br><span class="line">NAME     STATUS     ROLES    AGE     VERSION</span><br><span class="line">master   NotReady   master   17m     v1.19.3</span><br><span class="line">node01   NotReady   &lt;none&gt;   3m12s   v1.19.3</span><br><span class="line">node02   NotReady   &lt;none&gt;   3m32s   v1.19.3</span><br><span class="line">node03   NotReady   &lt;none&gt;   3m27s   v1.19.3</span><br><span class="line">`çœ‹åˆ°å››ä¸ªèŠ‚ç‚¹NotReadyå³OKï¼Œå› ä¸ºè¿˜æœªé…ç½®ç½‘ç»œï¼Œä¸èƒ½è·¨ä¸»æœºé€šä¿¡`</span><br></pre></td></tr></table></figure><p><strong>6.è®¾ç½®Kube-proxyä½¿ç”¨ipvsæ¨¡å¼</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">`k8sé»˜è®¤ä½¿ç”¨çš„æ˜¯iptablesé˜²ç«å¢™ï¼Œå¯ä»¥ä¿®æ”¹æˆæ€§èƒ½æ›´é«˜çš„ipvsæ¨¡å¼ï¼Œè¯¥æ¨¡å¼LVSä¹Ÿåœ¨ä½¿ç”¨`</span><br><span class="line">[root@master01 ~]# kubectl edit cm kube-proxy -n kube-system</span><br><span class="line">mode: <span class="string">&quot;&quot;</span> --&gt;  mode: <span class="string">&quot;ipvs&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æœmodeï¼Œæ·»ä¸Šipvså³å¯</span></span><br></pre></td></tr></table></figure><p><strong>7.æŸ¥çœ‹æŒ‡å®šåç§°ç©ºé—´ä¸­podç›¸ä¿¡ä¿¡æ¯</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# kubectl get pod -n kube-system</span><br><span class="line">NAME                             READY   STATUS    RESTARTS   AGE</span><br><span class="line">coredns-6d56c8448f-spslt         0/1     Pending   0          26m</span><br><span class="line">coredns-6d56c8448f-x5lqj         0/1     Pending   0          26m</span><br><span class="line">etcd-master                      1/1     Running   0          26m</span><br><span class="line">kube-apiserver-master            1/1     Running   0          26m</span><br><span class="line">kube-controller-manager-master   1/1     Running   0          26m</span><br><span class="line">kube-proxy-qmbtd                 1/1     Running   0          26m</span><br><span class="line">kube-proxy-sqnbb                 1/1     Running   0          12m</span><br><span class="line">kube-proxy-t7hcw                 1/1     Running   0          12m</span><br><span class="line">kube-proxy-xzv7f                 1/1     Running   0          12m</span><br><span class="line">kube-scheduler-master            1/1     Running   0          26m</span><br><span class="line"></span><br><span class="line">`çŠ¶æ€æ²¡å¼‚å¸¸å³å¯ï¼Œé™¤Pendingå’ŒRunningä¹‹å¤–çš„çŠ¶æ€éƒ½æ˜¯ä¸æ­£å¸¸çš„ï¼Œæ£€æŸ¥æ˜¯å¦æ­¥éª¤å‡ºé”™`</span><br><span class="line"></span><br><span class="line">`coredns-6d56c8448f-spslt`<span class="comment">#dnsæœåŠ¡å™¨</span></span><br><span class="line">`coredns-6d56c8448f-x5lqj`<span class="comment">#dnsæœåŠ¡å™¨</span></span><br><span class="line">`etcd-master` <span class="comment">#æ•°æ®åº“æ‰€æœ‰èŠ‚ç‚¹çš„å­˜å‚¨</span></span><br><span class="line">`kube-apiserver-master`<span class="comment">#é›†ç¾¤çš„æ§åˆ¶ä¸­å¿ƒ--&#x27;å¸ä»¤éƒ¨&#x27;</span></span><br><span class="line">`kube-controller-manager-master` <span class="comment">#ç»´æŠ¤é›†ç¾¤çš„çŠ¶æ€--&#x27;æ§åˆ¶å™¨&#x27;</span></span><br><span class="line">`kube-proxy-qmbtd`<span class="comment">#è´Ÿè´£å°†ç½‘ç»œæµé‡è½¬å‘åˆ°æ­£ç¡®çš„Podã€ç«¯å£æ˜ å°„</span></span><br><span class="line">`kube-proxy-sqnbb`</span><br><span class="line">`kube-proxy-t7hcw`</span><br><span class="line">`kube-proxy-xzv7f`</span><br><span class="line">`kube-scheduler-master`<span class="comment">#è°ƒåº¦å™¨</span></span><br></pre></td></tr></table></figure><p><strong>8.æŸ¥çœ‹æŒ‡å®šåç§°ç©ºé—´ä¸­podè¯¦ç»†ä¿¡æ¯</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# kubectl get pod -n kube-system -o wide</span><br><span class="line">NAME                             READY   STATUS    RESTARTS   AGE   IP        </span><br><span class="line">coredns-6d56c8448f-spslt         0/1     Pending   0          42m   &lt;none&gt;    </span><br><span class="line">coredns-6d56c8448f-x5lqj         0/1     Pending   0          42m   &lt;none&gt;    </span><br><span class="line">etcd-master                      1/1     Running   0          42m   10.0.0.200</span><br><span class="line">kube-apiserver-master            1/1     Running   0          42m   10.0.0.200</span><br><span class="line">kube-controller-manager-master   1/1     Running   0          42m   10.0.0.200</span><br><span class="line">kube-proxy-qmbtd                 1/1     Running   0          42m   10.0.0.200</span><br><span class="line">kube-proxy-sqnbb                 1/1     Running   0          28m   10.0.0.203</span><br><span class="line">kube-proxy-t7hcw                 1/1     Running   0          28m   10.0.0.201</span><br><span class="line">kube-proxy-xzv7f                 1/1     Running   0          28m   10.0.0.202</span><br><span class="line">kube-scheduler-master            1/1     Running   0          42m   10.0.0.200</span><br><span class="line"></span><br><span class="line">`æ£€æŸ¥çŠ¶æ€æ˜¯å¦éƒ½æ˜¯Runningï¼Œæ¯”å¯¹ä¸‹æ˜¯å¦æ­¥éª¤æœ‰å‡ºå…¥`</span><br></pre></td></tr></table></figure><p><strong>9.æŸ¥çœ‹åç§°ç©ºé—´</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# kubectl get namespace</span><br><span class="line">NAME              STATUS   AGE</span><br><span class="line">default           Active   45m</span><br><span class="line">kube-node-lease   Active   45m</span><br><span class="line">kube-public       Active   45m</span><br><span class="line">kube-system       Active   45m</span><br><span class="line"></span><br><span class="line">`namespace å¯ä»¥ç®€å†™ä¸º ns`</span><br><span class="line">[root@master ~]# kubectl get ns</span><br></pre></td></tr></table></figure><p><strong>10.é‡å¯kube-proxy</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">`åˆ é™¤æ‰€æœ‰proxy`</span><br><span class="line">kubectl get pod -n kube-system|grep <span class="string">&#x27;kube-proxy&#x27;</span>|awk <span class="string">&#x27;&#123;print &quot;kubectl delete pod -n kube-system &quot;$1&#125;&#x27;</span>|bash</span><br><span class="line"></span><br><span class="line">`#åˆ é™¤å•ä¸ªproxy`</span><br><span class="line">kubectl delete pod -n kube-system kube-proxyåå­— `ä¾‹å¦‚kube-proxy-qmbtd`</span><br><span class="line"></span><br><span class="line">`#å› ä¸ºk8ä¼šè‡ªåŠ¨æ‹‰èµ·åœæ‰çš„podï¼Œæ‰€ä»¥åˆ é™¤å³å¯é‡å¯`</span><br></pre></td></tr></table></figure><p><strong>11.å†æ¬¡æ£€æŸ¥çŠ¶æ€</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# kubectl get pod -n kube-system -o wide</span><br><span class="line">NAME                             READY   STATUS    RESTARTS   AGE   IP        </span><br><span class="line">coredns-6d56c8448f-spslt         0/1     Pending   0          52m   &lt;none&gt;    </span><br><span class="line">coredns-6d56c8448f-x5lqj         0/1     Pending   0          52m   &lt;none&gt;    </span><br><span class="line">etcd-master                      1/1     Running   0          52m   10.0.0.200</span><br><span class="line">kube-apiserver-master            1/1     Running   0          52m   10.0.0.200</span><br><span class="line">kube-controller-manager-master   1/1     Running   0          52m   10.0.0.200</span><br><span class="line">kube-proxy-62xz4                 1/1     Running   0          47s   10.0.0.203</span><br><span class="line">kube-proxy-gxz9p                 1/1     Running   0          35s   10.0.0.202</span><br><span class="line">kube-proxy-sfzzf                 1/1     Running   0          37s   10.0.0.201</span><br><span class="line">kube-proxy-vjgc5                 1/1     Running   0          49s   10.0.0.200</span><br><span class="line">kube-scheduler-master            1/1     Running   0          52m   10.0.0.200</span><br><span class="line"></span><br><span class="line">`æ£€æŸ¥çŠ¶æ€æ˜¯å¦å¼‚å¸¸ï¼Œå¦‚æœ‰å¼‚å¸¸ï¼Œæ¯”å¯¹ä¹‹å‰æ­¥éª¤ï¼Œä¹Ÿå¯æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—æŠ¥é”™`</span><br></pre></td></tr></table></figure><h2 id="é…ç½®flannel">é…ç½®flannel</h2><p><strong>1.ä¿®æ”¹flannelèµ„æºæ¸…å•</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">`kube-flannel.yml`</span><br><span class="line"><span class="comment">#ä¸‹è½½é“¾æ¥ https://github.com/flannel-io/flannel/blob/master/Documentation/kube-flannel.yml</span></span><br><span class="line"></span><br><span class="line">[root@master ~]# vim kube-flannel.yml</span><br><span class="line"><span class="comment">#1.å°†Networkç½‘æ®µæ”¹ä¸º10.2.0.0/16</span></span><br><span class="line">  net-conf.json: |</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;Network&quot;</span>: <span class="string">&quot;10.2.0.0/16&quot;</span>,</span><br><span class="line">      <span class="string">&quot;EnableNFTables&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="string">&quot;Backend&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;Type&quot;</span>: <span class="string">&quot;vxlan&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#2.å°†å®¹å™¨ç»‘å®šç½‘å¡eth0   åœ¨`- --kube-subnet-mgr`  åé¢åŠ ä¸Š`- --iface=eth0` å¦‚ä¸‹</span></span><br><span class="line">containers:</span><br><span class="line">- args:</span><br><span class="line">- --ip-masq</span><br><span class="line">- --kube-subnet-mgr</span><br><span class="line">- --iface=eth0</span><br><span class="line"></span><br><span class="line"><span class="comment">#3.åˆ é™¤å¦‚ä¸‹ä¸‰è¡Œï¼ˆæ„æ€æ˜¯ï¼Œåªæœ‰æ ‡ç­¾æ˜¯appçš„èŠ‚ç‚¹æ‰èƒ½ä¸‹è½½flannelï¼‰</span></span><br><span class="line">  selector:</span><br><span class="line">    matchLabels:</span><br><span class="line">      app: flannel</span><br></pre></td></tr></table></figure><p><strong>2.åº”ç”¨flannelèµ„æºæ¸…å•</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åº”ç”¨flannelèµ„æºæ¸…å•</span></span><br><span class="line">[root@master ~]# kubectl apply -f kube-flannel.yml</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ£€æŸ¥flannelçš„podæ˜¯å¦æˆåŠŸå¯åŠ¨</span></span><br><span class="line">[root@master ~]# kubectl get pod -n kube-flannel</span><br><span class="line">NAME                    READY   STATUS                  RESTARTS   AGE</span><br><span class="line">kube-flannel-ds-g9drp   0/1     Running                 0          6m9s</span><br><span class="line">kube-flannel-ds-rcwkv   1/1     Running                 0          6m9s</span><br><span class="line">kube-flannel-ds-txcn2   1/1     Running                 0          6m9s</span><br><span class="line">kube-flannel-ds-whd7p   1/1     Running                 0          6m9s</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ£€æŸ¥k8sé›†ç¾¤èŠ‚ç‚¹çŠ¶æ€</span></span><br><span class="line">[root@master ~]# kubectl get nodes</span><br><span class="line">NAME     STATUS   ROLES    AGE   VERSION</span><br><span class="line">master   Ready    master   17m   v1.19.3</span><br><span class="line">node01   Ready    &lt;none&gt;   14m   v1.19.3</span><br><span class="line">node02   Ready    &lt;none&gt;   14m   v1.19.3</span><br><span class="line">node03   Ready    &lt;none&gt;   14m   v1.19.3</span><br><span class="line"></span><br><span class="line"><span class="comment">## æ£€æŸ¥corednsæ˜¯å¦æ­£å¸¸è¿è¡Œ</span></span><br><span class="line">[root@master ~]# kubectl get pod -n kube-system</span><br><span class="line">NAME                             READY   STATUS    RESTARTS   AGE</span><br><span class="line">coredns-6d56c8448f-hxpjc         1/1     Running   0          17m</span><br><span class="line">coredns-6d56c8448f-lb5m4         1/1     Running   0          17m</span><br><span class="line">etcd-master                      1/1     Running   0          17m</span><br><span class="line">kube-apiserver-master            1/1     Running   0          17m</span><br><span class="line">kube-controller-manager-master   1/1     Running   0          17m</span><br><span class="line">kube-proxy-46jqn                 1/1     Running   0          12m</span><br><span class="line">kube-proxy-4bnmp                 1/1     Running   0          12m</span><br><span class="line">kube-proxy-5lc7l                 1/1     Running   0          12m</span><br><span class="line">kube-proxy-r8cll                 1/1     Running   0          12m</span><br><span class="line">kube-scheduler-master            1/1     Running   0          17m</span><br></pre></td></tr></table></figure><p><strong>k8så‘½ä»¤è¡¥å…¨</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum install -y bash-completion</span><br><span class="line"><span class="built_in">source</span> /usr/share/bash-completion/bash_completion</span><br><span class="line"><span class="built_in">source</span> &lt;(kubectl completion bash)</span><br><span class="line">kubectl completion bash &gt; /etc/bash_completion.d/kubectl</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> kubernetes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> kubernetes </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>01-k8sä»‹ç»</title>
      <link href="/posts/5b9896c9.html"/>
      <url>/posts/5b9896c9.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯å®¹å™¨">ä»€ä¹ˆæ˜¯å®¹å™¨</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å®¹å™¨çš„æœ¬è´¨æ˜¯ä¸€ç§ç‰¹æ®Šçš„è¿›ç¨‹ã€‚</span><br></pre></td></tr></table></figure><p><strong>å®¹å™¨çš„ä¸‰è¦ç´ </strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Namespace<span class="comment">#åšéš”ç¦»ï¼Œè®©è¿›ç¨‹åªèƒ½çœ‹åˆ°Namespaceä¸­çš„ä¸–ç•Œï¼›</span></span><br><span class="line">Cgroups<span class="comment">#åšé™åˆ¶ï¼Œè®©è¿™ä¸ªâ€œä¸–ç•Œâ€å›´ç€ä¸€ä¸ªçœ‹ä¸è§çš„å¢™ã€‚</span></span><br><span class="line">rootfs<span class="comment">#åšæ–‡ä»¶ç³»ç»Ÿï¼Œrootfs åªæ˜¯ä¸€ä¸ªæ“ä½œç³»ç»Ÿæ‰€åŒ…å«çš„æ–‡ä»¶ã€é…ç½®å’Œç›®å½•ï¼Œå¹¶ä¸åŒ…æ‹¬æ“ä½œç³»ç»Ÿå†…æ ¸ã€‚</span></span><br><span class="line"></span><br><span class="line">Namespaceå°†é›†ç¾¤å†…éƒ¨çš„èµ„æºè¿›è¡Œéš”ç¦»åˆ’åˆ†ã€‚åœ¨Namespaceä¸­ï¼Œå½¢æˆé€»è¾‘ä¸Šçš„ä¸åŒé¡¹ç›®ç»„æˆ–ç”¨æˆ·ç»„ã€‚</span><br></pre></td></tr></table></figure><p><strong>rootfs</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">æŒ‚è½½åœ¨å®¹å™¨æ ¹ç›®å½•ä¸Šã€ç”¨æ¥ä¸ºå®¹å™¨è¿›ç¨‹æä¾›éš”ç¦»åæ‰§è¡Œç¯å¢ƒçš„æ–‡ä»¶ç³»ç»Ÿï¼Œå°±æ˜¯æ‰€è°“çš„â€œå®¹å™¨é•œåƒâ€ã€‚å®ƒè¿˜æœ‰ä¸€ä¸ªæ›´ä¸ºä¸“ä¸šçš„åå­—ï¼Œ</span><br><span class="line">å«ä½œï¼šrootfsï¼ˆæ ¹æ–‡ä»¶ç³»ç»Ÿï¼‰ã€‚</span><br><span class="line"></span><br><span class="line">å®¹å™¨çš„rootfsç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œ1ï¼šåªè¯»å±‚ã€2ï¼šå¯è¯»å†™å±‚ã€3ï¼šinitå±‚</span><br><span class="line">1.åªè¯»å±‚:éƒ½ä»¥å¢é‡çš„æ–¹å¼åˆ†åˆ«åŒ…å«äº†  æ“ä½œç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ã€‚</span><br><span class="line"></span><br><span class="line">2.å¯è¯»å†™ï¼šå°±æ˜¯ä¸“é—¨ç”¨æ¥å­˜æ”¾ä½ ä¿®æ”¹ rootfs åäº§ç”Ÿçš„å¢é‡ï¼Œæ— è®ºæ˜¯å¢ã€åˆ ã€æ”¹ï¼Œéƒ½å‘ç”Ÿåœ¨è¿™é‡Œã€‚è€Œå½“æˆ‘ä»¬ä½¿ç”¨å®Œäº†è¿™ä¸ªè¢«ä¿®æ”¹è¿‡çš„å®¹å™¨ä¹‹åï¼Œ</span><br><span class="line">è¿˜å¯ä»¥ä½¿ç”¨ docker commit å’Œ push æŒ‡ä»¤ï¼Œä¿å­˜è¿™ä¸ªè¢«ä¿®æ”¹è¿‡çš„å¯è¯»å†™å±‚ï¼Œå¹¶ä¸Šä¼ åˆ° Docker Hub ä¸Šï¼Œä¾›å…¶ä»–äººä½¿ç”¨ï¼›è€Œä¸æ­¤åŒæ—¶ï¼ŒåŸå…ˆçš„</span><br><span class="line">åªè¯»å±‚é‡Œçš„å†…å®¹åˆ™ä¸ä¼šæœ‰ä»»ä½•å˜åŒ–ã€‚è¿™å°±æ˜¯å¢é‡ rootfs çš„å¥½å¤„ã€‚</span><br><span class="line"></span><br><span class="line">3.Init å±‚ï¼šæ˜¯ Docker é¡¹ç›®å•ç‹¬ç”Ÿæˆçš„ä¸€ä¸ªå†…éƒ¨å±‚ï¼Œä¸“é—¨ç”¨æ¥å­˜æ”¾ /etc/hostsã€/etc/resolv.conf ç­‰ä¿¡æ¯ã€‚</span><br></pre></td></tr></table></figure><h2 id="è®¤è¯†kubernetes">è®¤è¯†kubernetes</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Kubernetes æ˜¯ä¸€ä¸ªå¯ç§»æ¤ã€å¯æ‰©å±•çš„å¼€æºå¹³å°ï¼Œç”¨äºç®¡ç†å®¹å™¨åŒ–çš„å·¥ä½œè´Ÿè½½å’ŒæœåŠ¡ï¼Œæ–¹ä¾¿è¿›è¡Œå£°æ˜å¼é…ç½®å’Œè‡ªåŠ¨åŒ–ã€‚å¯ä»¥è‡ªåŠ¨éƒ¨ç½²</span><br><span class="line">(automating deployments)ï¼Œä¼¸ç¼©(scaling)å’Œè¿ç»´å®¹å™¨åŒ–åº”ç”¨(operations of application containers)çš„å¼€æºå¹³å°ã€‚ä»¥ä¸‹</span><br><span class="line">ç®€ç§°k8s</span><br><span class="line">  </span><br><span class="line">k8så‚è€ƒç½‘ç«™</span><br><span class="line">`k8så®˜æ–¹`: https://kubernetes.io/zh-cn/docs/home/</span><br><span class="line">`é˜¿é‡Œäº‘k8s-ACK`ï¼šhttps://www.aliyun.com/product/kubernetes</span><br><span class="line">`äºšé©¬é€Šk8s-EKS`ï¼šhttps://aws.amazon.com/cn/eks/?nc2=h_ql_prod_ct_eks</span><br><span class="line">`ä½¿ç”¨ansibleä¸€é”®éƒ¨ç½²k8s`ï¼šhttps://github.com/easzlab/kubeasz</span><br></pre></td></tr></table></figure><h2 id="k8sç»„ä»¶">k8sç»„ä»¶</h2><p><img src="https://cos.lukme.top/Pic/components-of-kubernetes-1726291732343-3.svg" alt="components-of-kubernetes"></p><p><strong>æ ¸å¿ƒç»„ä»¶</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.æ§åˆ¶å¹³é¢ç»„ä»¶ï¼ˆControl Plane Componentsï¼‰  masterèŠ‚ç‚¹</span><br><span class="line">2.æ§åˆ¶å®¹å™¨è¿è¡Œæ—¶ï¼ˆdockerï¼‰å¯åŠ¨æŒ‡å®šçš„å®¹å™¨      nodeèŠ‚ç‚¹</span><br></pre></td></tr></table></figure><p><strong>k8så„ä¸ªç»„ä»¶åŠŸèƒ½è¯´æ˜</strong></p><h3 id="1-UI-CLI">(1)UI,CLI</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ç»Ÿç§°APIç”¨äºå‘é€è¯·æ±‚ç»™Kubernetesï¼ˆK8Sï¼‰é›†ç¾¤ã€‚</span><br><span class="line"></span><br><span class="line"><span class="comment">## K8Sä¸‰å¤§æ¥å£APIäºŒæ¬¡å¼€å‘ï¼Œè°ƒç”¨æ¥å£</span></span><br><span class="line">CRIï¼šruntimeï¼Œå®¹å™¨æ“ä½œæ¥å£</span><br><span class="line">CNIï¼šnetworkï¼Œç½‘ç»œæ“ä½œæ¥å£</span><br><span class="line">CSIï¼šstorageï¼Œå­˜å‚¨æ“ä½œæ¥å£</span><br></pre></td></tr></table></figure><h3 id="2-Kubernetes-Master">(2)Kubernetes Master</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">ç”¨äºå¤„ç†å®¢æˆ·ç«¯çš„å‘æ¥çš„è¯·æ±‚ï¼Œæ ¹æ®éœ€æ±‚è°ƒåº¦åç«¯èŠ‚ç‚¹è¿è¡Œä»»åŠ¡,å°±æ˜¯<span class="string">&#x27;è€æ¿&#x27;</span>å­˜åœ¨ã€‚å…¶å†…éƒ¨æ ¸å¿ƒç»„ä»¶åˆ†ä¸ºï¼š</span><br><span class="line">1.`API Server`(K8Så†…ç½®ç»„ä»¶) <span class="string">&#x27;ç§˜ä¹¦&#x27;</span></span><br><span class="line">      æä¾›äº†èµ„æºæ“ä½œçš„å”¯ä¸€å…¥å£ï¼Œå¹¶æä¾›è®¤è¯ã€æˆæƒã€è®¿é—®æ§åˆ¶ã€APIæ³¨å†Œå’Œå‘ç°ç­‰æœºåˆ¶;</span><br><span class="line">      æä¾›APIæœåŠ¡çš„ç»„ä»¶ï¼Œæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å®ˆæŠ¤è¿›ç¨‹ï¼Œæ˜¯Kubernetesé›†ç¾¤çš„å”¯ä¸€å…¥å£ï¼ˆæ— è®ºæ˜¯å®¢æˆ·ç«¯è¿˜æ˜¯å†…éƒ¨ç»„ä»¶éƒ½å¿…é¡»é€šè¿‡å®ƒæ¥è®¿</span><br><span class="line">      é—®);å®ƒæä¾›åŸºäºhttps(RESTfulé£æ ¼)å’Œrpcåè®®(grpcæ˜¯æ®è¯´æ˜¯å°†æ¥è¦å–ä»£Httpsçš„RESTfulé£æ ¼)æ¥æä¾›æœåŠ¡çš„ã€‚å®ƒç”¨æ¥å¤„ç†</span><br><span class="line">      å®¢æˆ·ç«¯ä¼ æ¥çš„JSONæ ¼å¼çš„è¯·æ±‚æ•°æ®è€ŒéHTMLæ ¼å¼å“Ÿã€‚å®ƒä¹Ÿæ˜¯K8Sé›†ç¾¤å”¯ä¸€èƒ½æ“ä½œetcdçš„ç»„ä»¶</span><br><span class="line">     </span><br><span class="line">  2.`Scheduler`ï¼ˆK8Så†…ç½®ç»„ä»¶ï¼‰  <span class="string">&#x27;äººäº‹&#x27;</span></span><br><span class="line">      è´Ÿè´£èµ„æºçš„è°ƒåº¦ï¼ŒæŒ‰ç…§é¢„å®šçš„è°ƒåº¦ç­–ç•¥å°†Podè°ƒåº¦åˆ°ç›¸åº”çš„æœºå™¨ä¸Š;</span><br><span class="line">      æ¯”å¦‚å®¢æˆ·ç«¯é€šè¿‡API Serveræäº¤äº†ä¸€ä¸ªæ–°å¢å®¹å™¨çš„è¯·æ±‚ï¼Œè¯¥è¯·æ±‚ä¿å­˜åœ¨etcdä¸­ï¼Œetcdé€šè¿‡API Serveré€šçŸ¥Schedulerï¼Œ</span><br><span class="line">      Scheduleræ¥æ”¶åˆ°é€šçŸ¥åä¼šåœ¨ç®¡ç†çš„èµ„æºä¸­é€‰æ‹©ä¸€ä¸ªæœ€ä½³è¿è¡Œçš„èŠ‚ç‚¹å»åˆ›å»ºå®¹å™¨;è¯¥æŒ‡ä»¤ä¾æ—§å­˜æ”¾åœ¨etcdä¸­ï¼ˆSchedulerä¸èƒ½ç›´</span><br><span class="line">      æ¥è®¿é—®etcdï¼Œè€Œæ˜¯é€šè¿‡API Serveré—´æ¥è®¿é—®etcdï¼‰ã€‚</span><br><span class="line">      </span><br><span class="line">   3.`Controller manager`(K8Så†…ç½®ç»„ä»¶)</span><br><span class="line">       è´Ÿè´£ç»´æŠ¤é›†ç¾¤çš„çŠ¶æ€ï¼Œæ¯”å¦‚æ•…éšœæ£€æµ‹ã€è‡ªåŠ¨æ‰©å±•ã€æ»šåŠ¨æ›´æ–°ç­‰ï¼›</span><br><span class="line">       è¯¥ç»„ä»¶ä¼šwatch Api Serverç»„ä»¶ç”¨äºç®¡ç†K8Sé›†ç¾¤çš„ç»„ä»¶ï¼Œç¡®ä¿æˆ‘ä»¬æ‰€åˆ›å»ºçš„å®¹å™¨èƒ½å¤ŸæŒ‰ç…§æœŸæœ›çš„çŠ¶æ€è¿è¡Œçš„æ ¸å¿ƒç»„ä»¶</span><br><span class="line">       (æ¯”å¦‚ï¼šç›‘æ§é›†ç¾¤çš„æ‰€æœ‰å®¹å™¨è¿è¡Œï¼Œå½“æŸä¸ªå®¹å™¨æŒ‚æ‰åå®ƒå¯ä»¥è¿…é€Ÿåœ¨å¦ä¸€ä¸ªèŠ‚ç‚¹å¯åŠ¨)ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥è¯´</span><br><span class="line">       Controller manageræ˜¯K8sçš„å¤§è„‘ã€‚</span><br><span class="line">       </span><br><span class="line">    4.`etcd`(å¹¶ä¸æ˜¯K8Så†…ç½®ç»„ä»¶,ç”±CoreOSç ”å‘,è¢«RedHatæ”¶è´­ï¼Œæœ€ç»ˆåˆè¢«IBMå…¬å¸æ”¶è´­)</span><br><span class="line">      etcdåªèƒ½è¢«API Serverç›´æ¥è®¿é—®ã€‚æ˜¯æ•´ä¸ªé›†ç¾¤çš„æ ¸å¿ƒï¼Œè´Ÿè´£å­˜å‚¨K8Sè¯·æ±‚æ•°æ®æ‰€æœ‰çš„æ•°æ®ã€‚ä¿å­˜äº†æ•´ä¸ªé›†ç¾¤çš„çŠ¶æ€ï¼›</span><br><span class="line">    etcdåŸºäºraftåè®®ä½¿ç”¨Golangè¯­è¨€å¼€å‘çš„åˆ†å¸ƒå¼å¼ºä¸€è‡´çš„é”®å€¼å¯¹ï¼ˆkey/valueï¼‰æ•°æ®åº“å­˜å‚¨ç³»ç»Ÿã€‚å­˜å‚¨æ–¹å¼å’Œrediså¾ˆåƒï¼Œ</span><br><span class="line">    ä½†æ˜¯åŠŸèƒ½å´æ¯”redisè¦å¼ºå¤§ï¼Œå› ä¸ºå®ƒæ”¯æŒæ•°æ®çš„å¼ºä¸€è‡´æ€§ï¼Œä¹Ÿæ”¯æŒleaderé€‰ä¸¾ç­‰å„ç§åˆ†å¸ƒå¼ååŒåŠŸèƒ½ã€‚</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">kube-apiserver(apiserver)ï¼š#æ‰€æœ‰Masterä¸Šçš„ç»„ä»¶å·¥ä½œéƒ½è¦ç»è¿‡apiserver</span><br><span class="line">etcdï¼š                     <span class="comment">#å­˜å‚¨æ‰€æœ‰å‘½ä»¤ã€èµ„æºæ¸…å•ã€webUIæ“ä½œåŠå…¶ä»–ç»„ä»¶æ•°æ®</span></span><br><span class="line">kube-scheduler(scheduler)ï¼š#èµ„æºè®¡ç®—ã€èµ„æºè°ƒåº¦</span><br><span class="line">kube-controller-manager(controller)ï¼š#ç»´æŠ¤é›†ç¾¤çŠ¶æ€</span><br><span class="line"></span><br><span class="line">`å½“æŸä¸ªNodeæ„å¤–å®•æœºæ—¶ï¼ŒController Managerä¼šåŠæ—¶å‘ç°å¹¶æ‰§è¡Œè‡ªåŠ¨åŒ–ä¿®å¤æµç¨‹ï¼Œç¡®ä¿é›†ç¾¤å§‹ç»ˆå¤„äºé¢„æœŸçš„å·¥ä½œçŠ¶æ€`</span><br></pre></td></tr></table></figure><h3 id="3-Kubernetes-Node">(3)Kubernetes Node</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">åŠŸèƒ½ä¸Šæœ‰ç‚¹ç±»ä¼¼äºHadoopä¸­çš„DataNodeèŠ‚ç‚¹,è¢«Kubernetesè°ƒåº¦çš„ï¼Œå³è´Ÿè´£çœŸæ­£å¹²æ´»çš„èŠ‚ç‚¹ï¼ˆè¿è¡Œå®¹å™¨ï¼‰ã€‚å…¶å†…éƒ¨æ ¸å¿ƒç»„ä»¶åˆ†ä¸ºï¼š</span><br><span class="line">1.`kubelet`</span><br><span class="line">    è´Ÿè´£ç»´æŠ¤å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸï¼ŒåŒæ—¶ä¹Ÿè´Ÿè´£Volumeï¼ˆCVIï¼‰å’Œç½‘ç»œï¼ˆCNIï¼‰çš„ç®¡ç†;</span><br><span class="line">    è¯¥ç»„ä»¶ä¹Ÿä¼šwatch Api Serverç»„ä»¶ï¼Œå³å®æ—¶æŸ¥çœ‹å…³äºå½“å‰èŠ‚ç‚¹çš„ä»»åŠ¡ï¼Œä»è€Œå»æ‰§è¡Œåˆ›å»ºæˆ–åˆ é™¤å®¹å™¨çš„ä»»åŠ¡</span><br><span class="line">    (ä»¥Dockerä¸ºä¾‹ï¼Œåˆ›å»ºå®¹å™¨æ—¶å°±ä¼šè°ƒç”¨dockerçš„APIå»Image Registryå»ä¸‹è½½ç›¸åº”çš„å®¹å™¨å¹¶å¯åŠ¨)ã€‚</span><br><span class="line">2.`Container runtime `</span><br><span class="line">    è´Ÿè´£é•œåƒç®¡ç†ä»¥åŠPodå’Œå®¹å™¨çš„çœŸæ­£è¿è¡Œï¼ˆCRIï¼‰ï¼›</span><br><span class="line">3.`kube-proxy`   <span class="string">&#x27;ç›‘å·¥&#x27;</span></span><br><span class="line">    è´Ÿè´£ä¸ºServiceæä¾›clusterå†…éƒ¨çš„æœåŠ¡å‘ç°å’Œè´Ÿè½½å‡è¡¡ï¼›</span><br><span class="line">    kube-proxyè¯´ç™½äº†ä¹Ÿæ˜¯API Serverçš„å®¢æˆ·ç«¯,å®ƒå®æ—¶ç›‘è§†(watch)ç€API Serverä¸Šçš„èµ„æºå˜åŠ¨(å°¤å…¶æ˜¯serviceèµ„æºå˜åŠ¨),</span><br><span class="line">    å®ƒä¼šæŠŠæ¯ä¸ªserviceèµ„æºå˜åŠ¨åœ¨ç›¸åº”èŠ‚ç‚¹ä¸Šå®šä¹‰ä¸ºå¯¹å¤–æš´éœ²ç›¸å…³è§„åˆ™(iptableæˆ–è€…ipvs)ï¼Œæ¯”å¦‚å¯¹å¤–æš´éœ²å¤–ç½‘æ˜ å°„ä¹‹ç±»çš„ã€‚</span><br><span class="line"></span><br><span class="line">4.Pod   <span class="string">&#x27;Podæ˜¯K8Sçš„æœ€å°å•ä½&#x27;</span></span><br><span class="line">è™½ç„¶æˆ‘ä»¬è¯´Kubernetesæ˜¯å®¹å™¨ç¼–æ’ç³»ç»Ÿ,ä½†æ˜¯ä¸å¾—ä¸è¯´åœ¨K8Sä¹‹ä¸Šå¹¶ä¸ä¼šç›´æ¥è¿è¡Œå®¹å™¨,æ¯ä¸ªå®¹å™¨åœ¨K8Sä¸­éƒ½è¢«é‡æ–°å°è£…æˆpod,è¯´</span><br><span class="line">ç™½äº†podå°±æ˜¯å®¹å™¨çš„å¤–å£³,ä½†éœ€è¦æ³¨æ„çš„æ˜¯ä¸€ä¸ªpodæ˜¯å¯ä»¥å­˜åœ¨å¤šä¸ªå®¹å™¨çš„ã€‚æ¯ä¸ªpodè¢«K8Så½“ä½œä¸€ä¸ªåŸå­å•å…ƒè¿›è¡Œç®¡ç†;ä¸€ä¸ªpodä¸­</span><br><span class="line">æœ‰å¤šä¸ªå®¹å™¨ï¼Œè¿™ä¸ªpodé‡Œé¢çš„æ‰€æœ‰å®¹å™¨åªèƒ½è¢«è°ƒåº¦åˆ°ä¸€å°èŠ‚ç‚¹å»æ‰§è¡Œï¼Œä¸èƒ½å°†åŒä¸€ä¸ªpodé‡Œé¢çš„å¤šä¸ªå®¹å™¨æ‹†åˆ†åˆ°ä¸åŒçš„Nodeè¿è¡Œ;</span><br><span class="line"></span><br><span class="line">1ã€Podæ˜¯K8Sçš„æœ€å°å•ä½</span><br><span class="line">2ã€Podçš„IPåœ°å€æ˜¯éšæœºçš„ï¼Œåˆ é™¤Podä¼šæ”¹å˜IP</span><br><span class="line">3ã€Podéƒ½æœ‰ä¸€ä¸ªæ ¹å®¹å™¨ï¼ˆä¸€ä¸ªpodè‡³å°‘æœ‰ä¸€ä¸ªæ ¹å®¹å™¨ï¼‰</span><br><span class="line">4ã€ä¸€ä¸ªPodå†…å¯ä»¥ç”±ä¸€ä¸ªå®¹å™¨æˆ–å¤šä¸ªå®¹å™¨ç»„æˆ</span><br><span class="line">5ã€ä¸€ä¸ªPodå†…çš„å®¹å™¨å…±äº«æ ¹å®¹å™¨çš„ç½‘ç»œã€åç§°ç©ºé—´ã€å’Œæ–‡ä»¶ç³»ç»Ÿå·</span><br><span class="line">6ã€ä¸€ä¸ªPodå†…çš„ç½‘ç»œåœ°å€ç”±æ ¹å®¹å™¨æä¾›</span><br><span class="line"></span><br><span class="line">5.`Fluentd`</span><br><span class="line">    å¦‚Fluentd-elasticsearchæä¾›é›†ç¾¤æ—¥å¿—é‡‡é›†ã€å­˜å‚¨ä¸æŸ¥è¯¢</span><br><span class="line"></span><br><span class="line">6.`Image Registry`</span><br><span class="line">    å­˜æ”¾é•œåƒæ–‡ä»¶çš„ä»“åº“ï¼Œå¹¶ä¸ç›´æ¥è¢«Kubernetesé›†ç¾¤ç®¡ç†ï¼Œå³å¹¶ä¸ç®—k8såŸç”Ÿç»„æˆéƒ¨åˆ†ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šè‡ªå»ºç§æœ‰çš„é•œåƒä»“åº“ï¼Œ</span><br><span class="line">    æ¯”å¦‚ä½¿ç”¨Harboréƒ¨ç½²httpsé«˜å¯ç”¨çš„é•œåƒä»“åº“</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">kubeletï¼šæ§åˆ¶å®¹å™¨è¿è¡Œæ—¶ï¼ˆdockerï¼‰å¯åŠ¨æŒ‡å®šçš„å®¹å™¨</span><br><span class="line">å®¹å™¨è¿è¡Œæ—¶ï¼ˆContainer runtimeï¼‰ï¼šdocker</span><br><span class="line">  - containerd</span><br><span class="line">  - CRI-O</span><br><span class="line">  - Docker Engine</span><br><span class="line">  - Mirantis Container Runtime</span><br><span class="line">kube-proxyï¼šPODç«¯å£æ˜ å°„ï¼Œç½‘ç»œç›¸å…³</span><br></pre></td></tr></table></figure><h3 id="PODè¿è¡ŒçŠ¶æ€">PODè¿è¡ŒçŠ¶æ€</h3><table><thead><tr><th>çŠ¶æ€</th><th>æè¿°</th></tr></thead><tbody><tr><td>Pendingï¼ˆç­‰å¾…ï¼‰</td><td>Podå·²ç»è¢«K8Sç³»ç»Ÿæ¥å—ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ï¼Œå°šæœªåˆ›å»ºï¼Œäº¦æœªè¿è¡Œã€‚æ­¤é˜¶æ®µåŒ…æ‹¬ç­‰å¾…Podè¢«è°ƒåº¦çš„æ—¶é—´å’Œé€šè¿‡ç½‘ç»œä¸‹è½½é•œåƒçš„æ—¶é—´</td></tr><tr><td>Runningï¼ˆè¿è¡Œï¼‰</td><td>Podå·²ç»ç»‘å®šåˆ°æŸä¸ªèŠ‚ç‚¹(node)ï¼ŒPodä¸­æ‰€æœ‰å®¹å™¨éƒ½å·²è¢«åˆ›å»ºï¼Œè‡³å°‘æœ‰ä¸€ä¸ªå®¹å™¨ä»åœ¨è¿è¡Œï¼Œæˆ–è€…å¤„äºå¯åŠ¨æˆ–é‡å¯çŠ¶æ€</td></tr><tr><td>Succeededï¼ˆæˆåŠŸï¼‰</td><td>Podä¸­æ‰€æœ‰å®¹å™¨éƒ½å·²æˆåŠŸç»ˆæ­¢ï¼Œå¹¶ä¸”ä¸ä¼šå†é‡å¯</td></tr><tr><td>Failedï¼ˆå¤±è´¥ï¼‰</td><td>Podä¸­æ‰€æœ‰å®¹å™¨éƒ½å·²æˆåŠŸç»ˆæ­¢ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªå®¹å™¨æ˜¯å› ä¸ºå¤±è´¥è€Œç»ˆæ­¢</td></tr><tr><td>Unknownï¼ˆæœªçŸ¥ï¼‰</td><td>å› ä¸ºæŸäº›åŸå› æ— æ³•è·å–PodçŠ¶æ€ï¼Œè¿™ç§æƒ…å†µï¼Œé€šå¸¸æ˜¯å› ä¸ºä¸Podæ‰€åœ¨ä¸»æœºé€šä¿¡å¤±è´¥</td></tr></tbody></table><h2 id="k8sç½‘ç»œ">k8sç½‘ç»œ</h2><blockquote><p>Serviceä¹Ÿæ˜¯K8Sæ ¸å¿ƒèµ„æºä¹‹ä¸€ï¼ŒServiceå®šä¹‰äº†æœåŠ¡çš„å…¥å£åœ°å€ï¼Œç”¨æ¥å°†åç«¯çš„PodæœåŠ¡æš´éœ²ç»™å¤–éƒ¨çš„ç”¨æˆ· è®¿é—®ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">kubernetesçš„ç½‘ç»œå¤§è‡´åˆ†ä¸ºä»¥ä¸‹ä¸‰ç±»:</span><br><span class="line">  1.èŠ‚ç‚¹ç½‘ç»œ:</span><br><span class="line">      ä¸»è¦æ˜¯æŒ‡`Master`å’Œå„ä¸ª`Node`ä¹‹é—´è¿›è¡Œé€šä¿¡çš„ç½‘ç»œåœ°å€æ®µã€‚</span><br><span class="line">ã€€2.podç½‘ç»œ:</span><br><span class="line">ã€€ã€€ã€€ã€€å› ä¸ºæ¯ä¸ªpodçš„<span class="string">&#x27;åŠ¨æ€IPåœ°å€&#x27;</span>ï¼Œæ‰€ä»¥æ¯ä¸ªpodå¹¶ä¸çŸ¥é“æƒ³è¦è®¿é—®çš„ç›®çš„podçš„IPåœ°å€ï¼Œå®ƒä»¬å¦‚æœæƒ³è¦è®¿é—®ç›®çš„podéœ€è¦ç»è¿‡ä¸€</span><br><span class="line">ã€€ã€€ã€€ã€€ä¸ª<span class="string">&#x27;service&#x27;</span>å±‚ã€‚è¿™ä¸ªserviceæœ‰å¯¹æ¯ä¸ªpodçš„æ‰“äº†<span class="string">&#x27;æ ‡ç­¾&#x27;</span>ï¼Œå½“ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹çš„podæƒ³è¦è®¿é—®å¦å¤–ä¸€ä¸ªpodå¿…é¡»å¾—è¿‡</span><br><span class="line">ã€€ã€€ã€€ã€€<span class="string">&#x27;serviceç½‘ç»œ&#x27;</span>ï¼Œserviceç½‘ç»œä¿å­˜ç€<span class="string">&#x27;æ ‡ç­¾é€‰æ‹©å™¨&#x27;</span>ï¼Œå¯ä»¥è¿…é€ŸåŒ¹é…åˆ°podæƒ³è¦èŒƒå›´å¦ä¸€ä¸ªpodçš„çœŸå®IPåœ°å€ï¼Œå½“podæ‹¿åˆ°</span><br><span class="line">ã€€ã€€ã€€ã€€IPåœ°å€åå°±å¯ä»¥è‡ªè¡Œè¿›è¡Œé€šä¿¡è¯·æ±‚äº†ã€‚</span><br><span class="line">  3.serviceç½‘ç»œ:</span><br><span class="line">ã€€ã€€ã€€ä¸»è¦æ˜¯ä¸ºpodæä¾›ä¸€ä¸ª<span class="string">&#x27;æ ‡ç­¾é€‰æ‹©å™¨&#x27;</span>çš„åŠŸèƒ½ï¼Œæ¯”å¦‚å¸®åŠ©ä¸€ä¸ªpodå»æŸ¥è¯¢è®¿é—®å¦å¤–ä¸€ä¸ªpodçš„labelå¯¹åº”çš„çœŸå®IPåœ°å€ã€‚è€Œ</span><br><span class="line">ã€€ã€€ã€€seviceç½‘ç»œåœ¨kubernetes1.11.xç‰ˆæœ¬ä¹‹å‰é»˜è®¤ä½¿ç”¨iptableå®ç°çš„ï¼Œåœ¨kubernetes 1.11.xç‰ˆæœ¬ä¹‹åå¼•å…¥äº†ipvså®ç°ã€‚</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;å„ä¸ªpodä¹‹é—´çš„é€šä¿¡è¿‡ç¨‹æ¦‚è¦&#x27;</span>:</span><br><span class="line">      æ¯ä¸ªpodéƒ½æœ‰è¢«åŠ¨æ€åˆ†é…çš„IPåœ°å€ï¼Œå¦‚æœæƒ³è¦å’Œå¦å¤–ä¸€ä¸ªpodè¿›è¡Œé€šä¿¡ï¼Œå„ä¸ªpodéœ€è¦å…ˆå’Œserviceç½‘ç»œè¿›è¡Œé€šä¿¡ï¼Œæœ€ç»ˆæ‹¿åˆ°</span><br><span class="line">      å¦ä¸€ä¸ªæƒ³è¦è®¿é—®podçš„åŠ¨æ€IPåœ°å€è¿›è¡Œé€šä¿¡ã€‚</span><br></pre></td></tr></table></figure><h3 id="Serviceæä¾›äº†ä¸¤ç§ç½‘ç»œèµ„æº">Serviceæä¾›äº†ä¸¤ç§ç½‘ç»œèµ„æº</h3><p><img src="https://cos.lukme.top/Pic/image-20240916151114679.png" alt="image-20240916151114679"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">NodePortï¼šå®¿ä¸»æœºç«¯å£æ˜ å°„ClusterIPç«¯å£å¯¹å¤–æä¾›æœåŠ¡</span><br><span class="line"></span><br><span class="line">ClusterIPï¼šPODçš„è´Ÿè½½å‡è¡¡</span><br><span class="line">é—®é¢˜ï¼šPODçš„IPæ˜¯éšæœºçš„ï¼Œå¦‚æœä¸€ä¸ªPODå®•æœºäº†ï¼ŒK8Sä¼šè‡ªåŠ¨æ‹‰èµ·ä¸€ä¸ªæ–°çš„PODï¼ŒIPå˜åŒ–äº†å¦‚ä½•åŠ å…¥åˆ°</span><br><span class="line">ClusterIPè¿™ä¸ªè´Ÿè½½å‡è¡¡é›†ç¾¤ä¸­ï¼Ÿ</span><br><span class="line">è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨DNSè§£æPODçš„IPåˆ°ä¸€ä¸ª<span class="string">&quot;å­—ç¬¦ä¸²ä¸Š&quot;</span>ï¼ˆæ ‡ç­¾ï¼‰</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">DNSï¼š</span><br><span class="line">- coreDNS</span><br><span class="line">- bind9</span><br><span class="line">- dnsmsq</span><br></pre></td></tr></table></figure><h2 id="Labelæ ‡ç­¾">Labelæ ‡ç­¾</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">`Labelæ ‡ç­¾`æ˜¯K8Sä¸­éå¸¸é‡è¦çš„ä¸€ä¸ªå±æ€§ï¼ŒLabelæ ‡ç­¾å°±åƒèº«ä»½è¯ä¸€æ ·ï¼Œå¯ä»¥ç”¨æ¥è¯†åˆ«K8Sçš„å¯¹è±¡ã€‚</span><br><span class="line">ä¼ ç»Ÿæ¶æ„ä¸­ï¼Œä¸åŒçš„æœåŠ¡åº”ç”¨ä¹‹é—´é€šè®¯ï¼Œéƒ½æ˜¯é€šè¿‡IPå’Œç«¯å£ï¼Œä½†æ˜¯åœ¨K8Sä¸­å¾ˆå¤šåŒ¹é…å…³ç³»éƒ½æ˜¯é€šè¿‡æ ‡ç­¾æ¥æ‰¾ã€‚</span><br></pre></td></tr></table></figure><p><strong>Controllerèµ„æºï¼ˆæ§åˆ¶å™¨èµ„æºï¼‰</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Controllerç”¨æ¥ç®¡ç†Podã€‚</span></span><br><span class="line"><span class="comment">## Podæ§åˆ¶å™¨çš„ç§ç±»æœ‰å¾ˆå¤šï¼š</span></span><br><span class="line">- RC Replication Controller æ§åˆ¶Podæœ‰å¤šä¸ªå‰¯æœ¬</span><br><span class="line">- RS ReplicaSet RCæ§åˆ¶å™¨çš„å‡çº§ç‰ˆï¼Œå¯ä»¥è‡ªåŠ¨æ‹‰èµ·å®•æœºçš„POD</span><br><span class="line">- Deployment æ¨èä½¿ç”¨ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼ŒåŒ…å«äº†RSæ§åˆ¶å™¨ï¼Œå¯¹é•œåƒåšç‰ˆæœ¬ç®¡ç†</span><br><span class="line">- DaemonSet ä¿è¯æ‰€æœ‰çš„NodeèŠ‚ç‚¹ä¸Šï¼Œæœ‰ä¸”åªæœ‰ä¸€ä¸ªPodè¿è¡Œ</span><br><span class="line">- StatefulSet æœ‰çŠ¶æ€çš„åº”ç”¨ï¼Œä¸ºPodæä¾›å”¯ä¸€æ ‡è¯†ï¼Œå®ƒå¯ä»¥ä¿è¯éƒ¨ç½²å’Œscaleçš„é¡ºåº</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºä¸€ä¸ªpodæµç¨‹">åˆ›å»ºä¸€ä¸ªpodæµç¨‹</h2><p><img src="https://cos.lukme.top/Pic/create-pod.png" alt="create-pod"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">`ç¬¬ä¸€æ­¥ï¼š`</span><br><span class="line">    ç”¨æˆ·é€šè¿‡kubectlç­‰æ¥å£æäº¤åˆ›å»ºPodçš„yamlæ–‡ä»¶ï¼Œå‘Kubernetesç³»ç»Ÿå‘èµ·èµ„æºè¯·æ±‚</span><br><span class="line">`ç¬¬äºŒæ­¥ï¼š`</span><br><span class="line">    Api-serveræ¥æ”¶åˆ°ç”¨æˆ·è¯·æ±‚ä¹‹åï¼Œä¼šåšå‡ºç›¸åº”çš„è®¤è¯ï¼Œç„¶åæ£€æŸ¥ä¿¡æ¯å¹¶ä¸”å°†å…ƒæ•°æ®ä¿¡æ¯å­˜å‚¨åˆ°etcdä¸­ï¼Œåˆ›å»ºPodèµ„æºåˆå§‹åŒ–ï¼Œ</span><br><span class="line">    è¿™æ˜¯ç¬¬ä¸€æ¬¡å†™etcdåŠ¨ä½œ</span><br><span class="line">`ç¬¬ä¸‰æ­¥ï¼š`</span><br><span class="line">    Scheduleré€šè¿‡list-watchçš„ç›‘å¬æœºåˆ¶ï¼ŒæŸ¥çœ‹è¦åˆ›å»ºPodèµ„æºï¼ŒAPIServerä¼šç«‹å³æŠŠåˆ›å»ºPodçš„æ¶ˆæ¯é€šçŸ¥Schedulerï¼Œ</span><br><span class="line">    Schedulerå‘ç°Podçš„å±æ€§ä¸­Dest Nodeä¸ºç©ºæ—¶ï¼ˆDest Node=â€â€ï¼‰ï¼Œä¾¿ä¼šç«‹å³è§¦å‘è°ƒåº¦æµç¨‹è¿›è¡Œè°ƒåº¦,è€Œè°ƒåº¦æµç¨‹åˆ†ä¸º</span><br><span class="line">    ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼Œå¦‚ä¸‹å›¾</span><br></pre></td></tr></table></figure><blockquote><p>â€Œ<strong>kube-controller-manager</strong>â€Œï¼šè™½ç„¶ä¸ç›´æ¥å‚ä¸Podçš„åˆ›å»ºï¼Œä½†å…¶å†…éƒ¨çš„æ§åˆ¶å™¨ï¼ˆå¦‚ReplicaSet Controllerï¼‰è´Ÿè´£ç¡®ä¿Podçš„æ•°é‡ä¸é¢„æœŸä¸€è‡´ï¼Œç»´æŠ¤é›†ç¾¤çŠ¶æ€</p></blockquote><p><img src="https://cos.lukme.top/Pic/scheduler.jpeg" alt="scheduler"></p><blockquote><p>â€‹    é¦–å…ˆæ˜¯kube-schedulerè°ƒåº¦å™¨ç”¨ä¸€ç»„è§„åˆ™è¿‡æ»¤æ‰ä¸æ»¡è¶³æ¡ä»¶çš„ä¸»æœºï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºpredicateï¼Œæ¯”å¦‚æ˜ç¡®æŒ‡å®šæ‰€éœ€è¦çš„èµ„æºç±»å‹ï¼Œè¿™æ ·å°±å¯ä»¥è¿‡æ»¤æ‰ä¸æ»¡è¶³æ¡ä»¶çš„ä¸»æœº</p></blockquote><blockquote><p>â€‹    å…¶æ¬¡ï¼Œå¯¹ç¬¬ä¸€æ­¥ç­›é€‰å‡ºçš„ç¬¦åˆè¦æ±‚çš„ä¸»æœºè¿›è¡Œæ‰“åˆ†ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸º priorityï¼Œåœ¨æ­¤é˜¶æ®µï¼Œå¦‚æœåœ¨ predicateè¿‡ç¨‹ä¸­æ²¡æœ‰åˆé€‚çš„èŠ‚ç‚¹ï¼ŒPod ä¼šä¸€ç›´å¤„äºpendingçŠ¶æ€ï¼Œä¸æ–­é‡è¯•è°ƒåº¦ï¼Œç›´åˆ°æœ‰èŠ‚ç‚¹æ»¡è¶³æ¡ä»¶ã€‚</p></blockquote><blockquote><p><strong>é€‰æ‹©ä¼˜å…ˆçº§æœ€é«˜çš„èŠ‚ç‚¹</strong>ï¼šé€‰æ‹©å¾—åˆ†æœ€é«˜çš„ä¸»æœºï¼Œè¿›è¡Œbindingæ“ä½œï¼Œç»“æœå­˜å‚¨åˆ°Etcdä¸­</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ç¬¬å››æ­¥ï¼š</span><br><span class="line">    kubeletæ ¹æ®è°ƒåº¦ç»“æœæ‰§è¡ŒPodåˆ›å»ºæ“ä½œï¼Œç»‘å®šæˆåŠŸåï¼Œä¼šå¯åŠ¨å®¹å™¨è¿è¡Œæ—¶ï¼Œcontainer, docker run, schedulerä¼šè°ƒç”¨API</span><br><span class="line">    Serverçš„APIåœ¨etcdä¸­åˆ›å»ºä¸€ä¸ªbound Podå¯¹è±¡ï¼Œå®ƒæè¿°åœ¨ä¸€ä¸ªå·¥ä½œèŠ‚ç‚¹ä¸Šç»‘å®šè¿è¡Œçš„æ‰€æœ‰podä¿¡æ¯ï¼›</span><br><span class="line">    è¿è¡Œåœ¨æ¯ä¸ªå·¥ä½œèŠ‚ç‚¹ä¸Šçš„kubeletä¹Ÿä¼šå®šæœŸä¸api-serveråŒæ­¥bound Podçš„ä¿¡æ¯ï¼Œä¸€æ—¦å‘ç°åœ¨è¯¥å·¥ä½œèŠ‚ç‚¹ä¸Šè¿è¡Œçš„bound Podå¯¹</span><br><span class="line">    è±¡æ²¡æœ‰æ›´æ–°ï¼Œåˆ™è°ƒç”¨Docker APIåˆ›å»ºå¹¶å¯åŠ¨podå†…çš„å®¹å™¨.</span><br><span class="line">    </span><br><span class="line">ç¬¬äº”æ­¥ï¼š</span><br><span class="line">  kube-proxyä¸ºæ–°åˆ›å»ºçš„podæ³¨å†ŒåŠ¨æ€DNSåˆ°CoreOSï¼Œç„¶åç»™podçš„serviceæ·»åŠ å¯¹åº”çš„iptablesè§„åˆ™ï¼Œç”¨äºæœåŠ¡å‘ç°å’Œè´Ÿè½½å‡è¡¡ã€‚</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> kubernetes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> kubernetes </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æµ‹è¯•</title>
      <link href="/posts/f007732d.html"/>
      <url>/posts/f007732d.html</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="æŠ±æ­‰, è¿™ä¸ªå¯†ç çœ‹ç€ä¸å¤ªå¯¹, è¯·å†è¯•è¯•." data-whm="æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹.">  <script id="hbeData" type="hbeData" data-hmacdigest="ecc3b8954083c1c4265f5015a12da6fbb721d2f64e54cb4de0c849c9e0fa5522">410fa1838f124ea5ac656ff0dc0984fe803b0ea256dee1747636e7202b54e50bc0f348c1ccb15117cfff7489ca9aa16b9c8851a676b3b1774a5bbf06642da29ab4b9b3e3e1d1fd4fb9549f78a57d96664c778fdf004120aa7b399f87f7747df41970b977717da4c4f44d231a4e2d8d879f59f597df7ffcd69a79fab9d415114c69101e69ffed2d1d477cf3a510e54c169bfc0a2ac8338cf3f73f80f748c2e675fb763e7a8195374937a79224937b91e735d9db3124fc2ff3d1678b79b65425f5c1184fc8ae257b540b3b5b194d64f244e7901755e3d5425cd53f8fce7f44b149d4e912e50e15cce9cc32c8e2738da301dd3b40b37bdb67090cae58b844a1244610d9231fc73a206658d0a11232753e0466b02b9e7e8ed714cb8e1b925b0c54b3a4e430b2673c8aa7b7881e2c556dcf2dfbface77f1ac51bdc0d1a646b025df8373cced878d78fc8b7352f9efc5e735912e8cf403ff976c71c7a2f65e550f4014afe4a444f2d8fd245cf60963d8c5b4527feeef123ab493056c08fef3824e798846bddbc94296c8161034c6c3ab3c2b12bb608cd6a383266e306f3bb5a12878bf6a75b91d1505d953f2dcff4b7186ae01d67a80836d50f4ae7fd2dc7b9ab6fba984d67a680b53e5f22c1515330f5cde135cee6ba8b924d5bb7e38811943f50eeabea59d97c6249467717d5de787a06f3b70eaa5d787caad14b3007b35f0dfc2de931f53f3da05faa946876d490dcb9122251383adaeae10f7117ff3aaecaf6517a099f802bfb13250095c2f9247108c20d7456ff054f3e596dee7985fc2cf7e5f18fcf015f985e732386866a6b6af55d34a9580b4df3fba34daa71df61d645da140410131b4c1b46fb5735be55533e948adc6a5a402f59ab16e60f4f7b3d0c91daf129c9c483152db8894ddcf399d30698036754d93617997687790214d901e1fe12f7718093fe77c230fdbc3d18ff105f07b7f3f1c4f50d285c627eefe1a7e680b3abdd6cde4b1c9f1312d27615d90a1f0a107db176d7260a851f887c20ca2bf637e7b0c4a6d6cce03e706021df4e39691bfbb1fc3d97c2eddbfc97307f3c17ace3c3ec16eaf49baf00cbc36d071c8cbf3b5876d438667fd3067f4b8920a208ee2cf977070a7b1d3a6d4a33c7f2f192d9a241cf546f95681eae0be4fd78c9ea0752923bc6ff193cfbd6c2675c87d1520ea9e25bc10c6ce0c9a3066d42c23f3e2c3c382b873f200e897b9d29ff569db95d76f01376bf3f9f429dc2ec0172452bff1e7729fc00cbd5eedac742eae782519e3518a05125a1a9f8ffee03bcca5c0988c5afbb3595ce9ad2a205b6db654c39f9eae639bd6c4074a5f40b507ea2c312fc4830d96c9079a8ff07033872e8b0f8a690d86dfc72d787d32919c70a9c76156ec6477a6e64271c2e0d18b45a010c4af01f468959f99dab2049e1044bca8c75bac6e78876d87161d7f83023e8659b9dfb4a6f636c558563ca28fdb4229396c2fda75749a7016379a254be076ca7d4e1399280744f67e0fd476ea8d98c77b4f34bf18c499baf72f2a1f3b59918af8eb44583ea2b50d9ced14adf2b6aeab76b793b166c91276f26b7b3fe5ea9b770a8ab649658f4e3b2a5490095ba3b805323a8ed13634277676eaf499c6700c3ee719ee3ba314ac29c78c8c67f52013def0b3d5b76bd77bd3311f0bd53e4de7d6fbf22889333c11d91f71f1f5822be201d72f6e0986dd50c231fad0f22ea9e28e3bb4273445a9bbfdc6875ce34b9218c19e1c5fa3c93a96d5054c5f3fa1e1f9f13db273bd2092f453202b7c87d6369b59394ceb9f41df00d076bce9dd321b7aa45a9c35e6ea71c5af5bb5332b1469c258f4f7d48a756a785c6670b55b5115bbf52364b4ff77b361c5148ba64c10bf8d4488d945d9c6609650bcb4fdfb35ebacc080019fe52a68c9b2fb423925dfe61d652b2093ef8b3734f39b13101db3e3eabb97e4369c004d3aeb8ee36217e37b22453b67e2bccc4041d6ba80fc2fe0d2c5304cb697601658ae606b1a5fcc590d7935177478172338c7705b287cb57a0f6fda747cc49a05023a058eb4b4665e88a4753fb722f8b5f93110cc3716f6b677a95779c7a21732079bbdb179d43b066b52965384b4bb9e3ae858d253487826f2aa2dc00aed14133f5103c95741e77b911db3dc5912b5db5e7fcc1aaf9b67a96ced31100832e5afeca1b04dd9ae98086a8e6d50ecfc5398eab0ec75019157f546b3c9d7c81aba80c040ff3b38221fec370e3110eff18c093e437bbc80e7376333953b8ef82a6811d1e6f3a740674ba0e2c46b173fdfd55dc7705ec219fa88b6297afafb735813dc893419a87c95020c30529ad1a4b0de14f33fd7e9c1381f14ec25483d3c88dffa7d4b173c0d901b753b2ab34ca1fc18122102426e5252c1d616b9b220fb00934c83443d332d13a4dd43b998c0425a44bbfde6e5d8720301f005c527f0361924c26b0aec9ba6c32ba30229e60c35d649ba88b98970f83983b8e3f573c25315d32e5c33741044c9ed89ecacd7d03dc3a1ebe5862114bf286bbca404e827ea962a38ba7464811efcf74c08965905dc1b035c71a8798df3c18861ca8b93bfd08cf7afe4efe1c759d93c5188069ac4a71db55d207d267b3c61d9da5565e06f069fd6daec781b701aee904d2eb270e233fe44f4303416d58d10fcd8e9a06196a59d50e90a1a339bdeace264776e0315c1991f42a99e2184910309fcf5beb94563f9d42599ab2c7166d21d7305b93a158a0dee5838fe03165803b70463b99139ee3a6908d23735293df244a62d19322d70b333ae1c0bc3beeb51a98047241792813191270fce6fd2081588bb9df24b0d434ca37ae06b277cedc687c7691f0ff10ad567b486f3d974120fdf9e8bdcab45bd5f0f997266fa2636bbd88ee03f92df3ca4a09ac412e867e43a43ea500c4c745de84e556db03fe868b590f7e152f20de48bc63462c2879c0447ef9b63f7b013aaafe8f3a65efecd2377821545d2a4b2d5cee1351438b70d13fac03cdc70f2a675de7dc66f881d03867914ece78936c59ecad71ffb40e8a38b992506413220efece486005bacb7bf9217f076339b78b167c312a997927fbdcd02b90d94978f6b1d9f717829a486f3414eafa56485142fb31775c5207c353aa22e901d8e93a780ce930e69a51e6858a7ad97be97f76861c6a713ece6f12e1dbfda25636a416c2059724da406d767ea5f5cbf10d671cfe13788da2e8554f4de527947ede9bce0d3aff37a8bd0467f7698691ef01be47a21b2b896cfd8e81f3209b1ca64662e09dea68a6ba7c9b615b16d7cdb5a128aeffb77723a63006179d3245c6c315f22c0905dd286c2f639cc79a42f31c009f11d686ca3fcfb1d7053e042d0f306492ef241ce4a2c63f7e4b7f6f3e21faea3315599058a4d0eb475373156aade1d240078d76ec526a1fad466d2bec12161f45cda939bb55c8cc5b9b94d030ffe00e21830b5aa63eb2273ca92cf5729741ec21482205adfa6d8a3642c6cb680c7606c8b2b7cf746021c04a8afc890986fc78605b9b118a0b7552a0ca673e73a114fd2909bdac09ae0b23807b2e12e67f10d23dcd5979f95ddba0ab2e864e901866690ef53bac63de3cbac2ca3a328650e652e4878e3621332c27c53a6e067e7d5280d6c1f17b927c7d2667467f377f030462d2b78e3bd09844d17eb517281fa57c6714b58538570cbd17c39f37276fad589b934d11581bbffde9fd10112e1cd20bc0fc428b33abbe17c76876ebe18c2a8447f4a443d79c2ff5f6360acf1379adc522090d0c7fe22a8ba37d266b6daf1dd7b05c50fdddd0be5c66807bfa5b888547eb993011370611bbe89bc14525135f8c40cbc37bb61c0e83754797408cff04d84f8b44b854e2ed2c265291b1c64bb77e033cf1f68ec878d994acc015a445ea3041e8211a08908087670cd3c5f090b3d0d8dd06cdf82275e19d10c6e3a4f8ae51466a226c879e91b3805ad91c23bf9fec82bf676b26e3e554fcad72e07b9c044fd8ef2eec6d634c0f0cb67a5e037e37580470c8f043e0516471dc046d50627187f695b6fc398c2a5db4de7c669feedec0b2a420b555c55c9f4ab43b41a946f07511d85946e45336c88a5b2deacae65c38009faf3f1c865b84fea7cfb92305dc16d5713bacdd7551b395c43b6cb10575b29663d8bf24ecfff72e80b5b333c11d1ff0ab39f7b18e48f3efe702b7ad4079df6e665b5553fc3b234fdfc0c0a0cad184a8c7ebed98907e7356b5ecbd4c3ca020d3088a4c9c27a5798ba7fccf1ae3b2cd1da94df32fb6d5901eec93c26974c910a44d64b70f24eed06b3d2c8d83b854d38ec4d1864971f09b728c99439616e181dd64e3ad337d0e243520599f1bfecb20fbdaab93a1b1c7844448d0e3b70138d2b9805464ae3b613b8b9127c52b88abb925756c3d01217a5cef09e606ac6da427b07e9ac57152a916d51da9a0eee838acecc9d85c39d9585841caced81a092f9fad81345ee8081f2e50b3420f74a42ff220fc25ea931e0855ac2477174adb552b22f5b9279c0bebda036784ebed11ba49b4c13dede5eb9eb9dc2a6bbb62bda4d30db5dba806fd0aeea1f81b7659c9dbccd83f99d4d03e59610f9cb3548b9ac10c0d389a3e79b96508b4dc19057f33f78ca46376ccb5ad920e10de03811f1161ad1013b684b4ddddc37e42aa0cfe44a285a9151d5f8067e6a9ddbf715d120b0bb3e96383b9e63fca4f38534baefa674fd3963fe6e194a4c79f445a427cd232dec2791cfead71995740224f5399396ab2f470a4647f3c2ce79e78484c0b28d539c4bb7d6a9a539bb64b45b2d238b7d9805330add218ababd03ae92134b441418490bac9b584a2194b9c337a1509396ed2deff640077281bf5f54808e7cf897008b635483a93e2b425b362c9c06fdabecd95eb4e66f9764720714a4a6b5656525ef2442e351ee4ad08e77deb17fc4d6aab9860ccd30a1c2d1ee08f60763a450da93e95e5d7fbd60170410e36e67b2362ed801d8560b0b7617362c7c12083585146225f17c09a7b21382e59285a63900616600b3ccaf4f730e438fc14300f04a39876441ac1f33d6165e9c0eac49789d64f137080f9f1f2f003acb155b3f8ef493192e7eab2957e5882e68fff08a50296ca788257a6c0ba4cbb7ebc76857b1d0924b7987bb398a3265e27a932140eba74aed54e0b5818e5cb056087c9332bf7e20feb348490c17fc8064a1d86f4333c8fe4a1aea9e8e4ba7ba6c3fb150130c10ec7d0d557b20719d6c2e2f7671c6ea1864644f64d67a9c183f523bb148b97320f5d342e4f39d779c69f4d08d041606d123bc476a913980addd4a15bcee0b83f3d4121883ef129b232c56c47c9e1562ae663642126ee0c9f3c3605e647ea04068e4ae3957a2c4b5e60f1fd7ddafb4a3cd647250ab045aef827d06574378da4c76b1533445cf3f479fe8d29bde4201e53079df7dcb8dcf6686168a4f0f483242468768aa2038b0f2d422ee7a3df08274d3438f515a535c085bec67bb3f7f24446b6d2593c6e47d765cc64ed7b36789b312ed90474cee89dab7e289ef86b68e46663fc285d0449216b5c1dc12ab8319ca16360d9ec009e266d041a52b03091abee57cb3c641368c1d5b1bf98d8d8c99899ab4b4e6cc6e72497dd30203e541731f9285900e37121123f9c4b86425c1512c341cd63eeada94c499cbe055de7fdb93e6c5d90bad84557f81ac4a1a1f903dd4918a88dd061b89fb69aeb7db793297d8fd26d7c22de9f895d0100ec1dc3866ac98b82ee1660e76df98ea68334c3dc149a49f813ad4f631ae3a8f3fb243926ae03067f3e4ae6a101134d7b313b0d66729df15115bd1633d5e51c0389804675661e9504d25dfcff1afb9d4105a01136433083553f2d874c48b323b38504c165cacff4cdaa5babdb37dbd68c5a8eaa6621df36547b5b8de0282ee5c067414d54e5c5665eeb310c0a80404b9ff927f8c3774a8396f426b606c4692f1bb2a7a521d4e9131fd436893d00837e9a18fbfc8263aa370f5b4c176d578109669b1fad6962eca06302e8a1521d1d21aa9ac3c9b05b4b19ee15df976af760c5eb0bed2ca1d80bd90e1e6050c67d4d23669d1f2eb06ee7a9ff4a8e8412df8673b3645bfd4a73e0edcc395e3b6e06fdbcd467c07b91128e8a67baf12557038eef296fabedd6f358074883f3147cd3efa184e787937012daa190ee7fe2767cf4be76216584999f806dc4215c41208c1fcad35e1e03f52f651542bb3397d10e45ffe22be0b45d1ab44f82135c77578acd18ff57ef5ff1911786137e5d3142a978d80c4bc247cda2a018cd5d1af574c34b1bd8ef8aeec4a7634fd6b0eb43aa5cc03fb9015513111f61e15380f3d7e45e86af0e6a7597fa30834f59b727cc414c62fdc673241594db31b898747b3680865febd5affa0e9c649551a370dae84afd81bec3dfe374a00eaf1328635c267d10ab1fb801796acc5a45987bc902d3f0293b7341b11de851a64c5f1b6aa70d5355e5d0c5757bac9272310c51f9a8fe5e3670ab253ae2939cdb43924ff1e817443d370888439e5f5006d7be1cc96a54bb31cb7a15e8005cfe6fa001f9580bc794a056559a0667e599fcc0a4f1add41368606831e956fdef837761f05986656dd1ed17d85558b95ff85a0e45d3e54ebcfa8fbdb65e924ce8dbd408d834c1bcd8ce9a4a02dd5adcb924198cd06c1fdc5c88a4713b1f4f787b4d3f4ef8ce2d30f04b64573179a1628004edd71e7236eed62b00537729ed7a0709024b2f68504a2058edc4d4cfa4be55ad005abe3c961304f901fd31ee718dbc8d8412f1e2b0be392bdd36247e0cd71d8e8b7bed4e8e6592529f2302ecab12554b79201526e0e610990e3fb27c4d63c864fc23a8fb376673de46ac6deda65e81fe701a1fccfe0ca0e905dfcc7891ef2708f522e33b5b36d253f8309047ce052e3839b3d06ae89de818ea15e8c70c68d47e403ff8c7aa67d93cc9117bbb2816da69ad990cf2a4802f97d3566eb296a3ecbacb5a9c3887949f6bba3be36c189739ed1c1d95143335dbb87fade0165734a149c138aa4e97edfa0496b5435e19cf7dbe741b99f512bfcc823960a0908a43ea2a2f740decf9488c25bc8bdf8729b7e7bd80c4c8ab61c924a24c4c62acc5841aa362c0dddd7c1008859cbbaf967c6e0f4baecfc0d72849d58499b9c4d400c5851d002db03a25fbda5dce1fb79a7566f427d0cf2270daea1254c6ac8d0d8dab70187949762be2fcaaecb624e6df9bc069c06a2011dd31092b4b5feda0b9460659b7a05596cf710f653772f80a3ebda4e3bba5366a396c5f3a0de02455483536766f59cbe6c88645ec92ec64e16c0cbc377067787dee163de6eb006c22ffb5c0e5cbccbc9dffe847fa1993de1235b41e2808f33379df6c77159f9a538cf33b02fdf9ab033005b5ef1faa85b22ca5930de52a4208cb091c766f6b4f6559ca4aa05ffc15182d91232fe9300a2789c270306c34755b91997dd5edd07beb409e4974364107816b792ada4bea6c22de478da659f23791737a558bb5e4b5029a03cb6230534e0931e0ab7daccdf8ac4bebfdc83195e4e01fa0cec94b657064d57ceae6258a4be0b3ba58927710723b0f1630f76d54376be086232f68bc79dd5d676384ccbc5186683a974a7446bce09f08441c1223b291c8c7ede0e8fa52a92c0eb3edb3642a40527e4f1b710ac9ea6d4b0427027f4a33c360ec2f21382c31adb4b32783ce10c285716b28b91cfeaaca8328eda1730a040aa1e077a5f75b734798f0651c5569657a053382be16a9017646c64ae9e08f81456f7c0bc37d56a7d4dae502f27498801ee1d223bea85abfcf8137a17237ab97aa61929aac19c1b27fa32ca9f5291e9683c6ca5905f76d3c447bd0cfc6954a5e5b2067a79712a47e74d55b8b579ecb54fcb7b861dd26f0bd9de58f24eec6038ec9d9ab8523f743b34a40f05d8e4f95cae5139809dfef45495e6a5229d20a35031530f50d38612f427801fcbd711b7a24904b86f4335e019705cec33730d16528ae05e1f236666dfa8222dfd185362cb5931e399dfe5c4320fe5e18f97734a235e13b8dcbc15b571a1ef8b7702a56fd41e127d37a6437722d806f0f5b7fa367b324bc0a0989f39f1bd223bd9b384e60af26361781d762f15db8b11248d5f4f822f56c2bf1af72c15546e2282d77bbd4e01981392a91f0272a59034fcc29fbdda4a06388fedcaf71495cdfc63d6004e541d6a5143b9714761711220e5c36b4c2f4bdce83317e6d7e4d0a7f12f056f6cfbfaf7f3ec8612d2cad75744468e6127a1ffcba36776078e10ec01ac833a284e61af02898fbfa2cea27114569ee26400d5d500fc90bbece9f2e994268127d807558859a935a52a2007123c1e40a2582884626368292d5bc6c33736cb36a5f2f5d1cecf23145ca5521257f01e519bda467fca325463eb10e5b52c88ebcc675f1057292d354dc9d6e3602461d6cb1fc3c3da7336631f687aa78c777364828d66496451f41daae72ac38e4f641da7d26ae7f5bd7e12ae081f2b3ae6417c2373050914a3f7cf8716c224e3d8e67e06791c48d1096f0f3b46c28b14a41b1643a73f8a20df81021c91fd97406de71c57e28437e8f9a36f38f74c23b5e789150f0fab581f2c6a76277161ae644b62abaaa93e7e2aaedcbc1ca17b3f4db274c339408cefbe7bd5d9c169a7ba8ba4766dc3a4e8ffe0f94a99104bc8651bc949be1ba7734561b40140dbe8bc5c19d3a09a39636fa4f3c2f0216e85908330ce974dbcbf49b6b3fbef73b6b849b20f3e8718c4e42fc5886ade010095d628562024b70343c09d5cc5135ab74d49e9ddea747a9fefce0e6d2e128eba7a3a09ead67426cdb0c0dc27193ba118409563ca5f0b782614a61675d4b82fafb8cf3b66e71ceab757b472e6f487ec1108c0ceca1f2bfa4673141943d31ecb79f3811c1f9282c8c9f98cc48feab0949151b736c34a56045a9aba9505d6e1ba64fcd5e59ca386a25614f9a03824ef96e852e82f803d586a817626338c4f7f8296d1e4aacfce865fce6c8230618d6ae505d1fc3d08bbffc9998c748ecb8c58f3debe5282f8300e85061ba5e4a2117f266972370a8fa2c5059bca4ab90595332cff147915b661d39022d1c25b9b51d16b0c98addef8b4daae40d66c4f76ebe4e6352f58720137088374a1c07440a98acfcd2539a1c7b085fb95901a6e21d5b19a00dd6097b0a5f3bd9af82b4827b616a8750e159c4bca15b5a1a47a52a6ac493b292aed57873d31d1a808a923f8b8c0350898fe67bf7300</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-xray">      <input class="hbe hbe-input-field hbe-input-field-xray" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-xray" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-xray">æ‚¨å¥½, è¿™é‡Œéœ€è¦å¯†ç .</span>      </label>      <svg class="hbe hbe-graphic hbe-graphic-xray" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>        <path d="M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0"></path>      </svg>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      
        <tags>
            
            <tag> markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>zabbixç›‘æ§phpå’Œjvm</title>
      <link href="/posts/c6bfcf84.html"/>
      <url>/posts/c6bfcf84.html</url>
      
        <content type="html"><![CDATA[<h2 id="ç›‘æ§PHP">ç›‘æ§PHP</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.ä¿®æ”¹phpé…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@web01 ~]# vim /etc/php-fpm.d/www.conf</span><br><span class="line">pm.status_path = /php_status</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.ä¿®æ”¹nginxé…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@web01 conf.d]# vim webapp.conf</span><br><span class="line">server&#123;</span><br><span class="line">listen 80;</span><br><span class="line">server_name _;</span><br><span class="line">location / &#123;</span><br><span class="line">root /code/webapp;</span><br><span class="line">index index.html;</span><br><span class="line">&#125;</span><br><span class="line">location /status &#123;</span><br><span class="line">stub_status on;</span><br><span class="line">&#125;</span><br><span class="line">location ~ ^/(php_status)$ &#123;</span><br><span class="line">include fastcgi_params;</span><br><span class="line">fastcgi_pass 127.0.0.1:9000;</span><br><span class="line">fastcgi_param SCRIPT_FILENAME</span><br><span class="line">$document_root<span class="variable">$fastcgi_script_name</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># 3.é‡å¯nginxå’Œphp</span></span><br><span class="line">[root@web01 conf.d]# systemctl restart nginx php-fpm</span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/image-20240807085016358.png" alt="image-20240807085016358"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line">pool: www</span><br><span class="line">process manager: dynamic</span><br><span class="line">start time: 02/Aug/2024:10:44:26 +0800</span><br><span class="line">start since: 44</span><br><span class="line">accepted conn: 1</span><br><span class="line">listen queue: 0</span><br><span class="line">max listen queue: 0</span><br><span class="line">listen queue len: 128</span><br><span class="line">idle processes: 4</span><br><span class="line">active processes: 1</span><br><span class="line">total processes: 5</span><br><span class="line">max active processes: 1</span><br><span class="line">max children reached: 0</span><br><span class="line">slow requests: 0</span><br><span class="line"></span><br><span class="line"><span class="comment">#PHP-FPMçŠ¶æ€è§£é‡Šï¼š</span></span><br><span class="line">pool <span class="comment">#fpmæ± åç§°,å¤§å¤šæ•°ä¸ºwww</span></span><br><span class="line">process manager <span class="comment">#è¿›ç¨‹ç®¡ç†æ–¹å¼dynamicæˆ–è€…static</span></span><br><span class="line">start time <span class="comment">#å¯åŠ¨æ—¥å¿—,å¦‚æœreloadäº†fpmï¼Œæ—¶é—´ä¼šæ›´æ–°</span></span><br><span class="line">start since <span class="comment">#è¿è¡Œæ—¶é—´</span></span><br><span class="line">accepted conn <span class="comment">#å½“å‰æ± æ¥å—çš„è¯·æ±‚æ•°</span></span><br><span class="line">listen queue <span class="comment">#è¯·æ±‚ç­‰å¾…é˜Ÿåˆ—,å¦‚æœè¿™ä¸ªå€¼ä¸ä¸º0,é‚£ä¹ˆéœ€è¦å¢åŠ FPMçš„è¿›ç¨‹æ•°é‡</span></span><br><span class="line">max listen queue <span class="comment">#è¯·æ±‚ç­‰å¾…é˜Ÿåˆ—æœ€é«˜çš„æ•°é‡</span></span><br><span class="line">listen queue len <span class="comment">#socketç­‰å¾…é˜Ÿåˆ—é•¿åº¦</span></span><br><span class="line">idle processes <span class="comment">#ç©ºé—²è¿›ç¨‹æ•°é‡</span></span><br><span class="line">active processes <span class="comment">#æ´»è·ƒè¿›ç¨‹æ•°é‡</span></span><br><span class="line">total processes <span class="comment">#æ€»è¿›ç¨‹æ•°é‡</span></span><br><span class="line">max active processes <span class="comment">#æœ€å¤§çš„æ´»è·ƒè¿›ç¨‹æ•°é‡ï¼ˆFPMå¯åŠ¨å¼€å§‹è®¡ç®—ï¼‰</span></span><br><span class="line">max children reached <span class="comment">#ç¨‹æœ€å¤§æ•°é‡é™åˆ¶çš„æ¬¡æ•°ï¼Œå¦‚æœè¿™ä¸ªæ•°é‡ä¸ä¸º0ï¼Œé‚£è¯´æ˜ä½ çš„æœ€å¤§è¿›ç¨‹æ•°é‡è¿‡å°,å¯ä»¥é€‚å½“è°ƒæ•´ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## ç›‘æ§è„šæœ¬</span></span><br><span class="line">[root@web01 scripts]# <span class="built_in">cat</span> php_status.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line">PHPFPM_COMMAND=<span class="variable">$1</span></span><br><span class="line">PHPFPM_URL=<span class="string">&quot;http://172.16.1.7/php_status&quot;</span></span><br><span class="line"><span class="function"><span class="title">start_since</span></span>()&#123;</span><br><span class="line">/usr/bin/curl -s <span class="string">&quot;<span class="variable">$&#123;PHPFPM_URL&#125;</span>&quot;</span> |awk <span class="string">&#x27;/^start since:/ &#123;print $NF&#125;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">accepted_conn</span></span>()&#123;</span><br><span class="line">/usr/bin/curl -s <span class="string">&quot;<span class="variable">$&#123;PHPFPM_URL&#125;</span>&quot;</span> |awk <span class="string">&#x27;/^accepted conn:/ &#123;print $NF&#125;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">listen_queue</span></span>()&#123;</span><br><span class="line">/usr/bin/curl -s <span class="string">&quot;<span class="variable">$&#123;PHPFPM_URL&#125;</span>&quot;</span> |awk <span class="string">&#x27;/^listen queue:/ &#123;print $NF&#125;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">max_listen_queue</span></span>()&#123;</span><br><span class="line">/usr/bin/curl -s <span class="string">&quot;<span class="variable">$&#123;PHPFPM_URL&#125;</span>&quot;</span> |awk <span class="string">&#x27;/^max listen queue:/ &#123;print $NF&#125;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">listen_queue_len</span></span>()&#123;</span><br><span class="line">/usr/bin/curl -s <span class="string">&quot;<span class="variable">$&#123;PHPFPM_URL&#125;</span>&quot;</span> |awk <span class="string">&#x27;/^listen queue len:/ &#123;print $NF&#125;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">idle_processes</span></span>()&#123;</span><br><span class="line">/usr/bin/curl -s <span class="string">&quot;<span class="variable">$&#123;PHPFPM_URL&#125;</span>&quot;</span> |awk <span class="string">&#x27;/^idle processes:/ &#123;print $NF&#125;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">active_processes</span></span>()&#123;</span><br><span class="line">/usr/bin/curl -s <span class="string">&quot;<span class="variable">$&#123;PHPFPM_URL&#125;</span>&quot;</span> |awk <span class="string">&#x27;/^active processes:/ &#123;print $NF&#125;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">total_processes</span></span>()&#123;</span><br><span class="line">/usr/bin/curl -s <span class="string">&quot;<span class="variable">$&#123;PHPFPM_URL&#125;</span>&quot;</span> |awk <span class="string">&#x27;/^total processes:/ &#123;print $NF&#125;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">max_active_processes</span></span>()&#123;</span><br><span class="line">/usr/bin/curl -s <span class="string">&quot;<span class="variable">$&#123;PHPFPM_URL&#125;</span>&quot;</span> |awk <span class="string">&#x27;/^max active processes:/ &#123;print $NF&#125;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">max_children_reached</span></span>()&#123;</span><br><span class="line">/usr/bin/curl -s <span class="string">&quot;<span class="variable">$&#123;PHPFPM_URL&#125;</span>&quot;</span> |awk <span class="string">&#x27;/^max children reached:/ &#123;print $NF&#125;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">slow_requests</span></span>()&#123;</span><br><span class="line">/usr/bin/curl -s <span class="string">&quot;<span class="variable">$&#123;PHPFPM_URL&#125;</span>&quot;</span> |awk <span class="string">&#x27;/^slow requests:/ &#123;print $NF&#125;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$PHPFPM_COMMAND</span> <span class="keyword">in</span></span><br><span class="line">start_since)</span><br><span class="line">start_since;</span><br><span class="line">;;</span><br><span class="line">accepted_conn)</span><br><span class="line">accepted_conn;</span><br><span class="line">;;</span><br><span class="line">listen_queue)</span><br><span class="line">listen_queue;</span><br><span class="line">;;</span><br><span class="line">max_listen_queue)</span><br><span class="line">max_listen_queue;</span><br><span class="line">;;</span><br><span class="line">listen_queue_len)</span><br><span class="line">listen_queue_len;</span><br><span class="line">;;</span><br><span class="line">idle_processes)</span><br><span class="line">idle_processes;</span><br><span class="line">;;</span><br><span class="line">active_processes)</span><br><span class="line">active_processes;</span><br><span class="line">;;</span><br><span class="line">total_processes)</span><br><span class="line">total_processes;</span><br><span class="line">;;</span><br><span class="line">max_active_processes)</span><br><span class="line">max_active_processes;</span><br><span class="line">;;</span><br><span class="line">max_children_reached)</span><br><span class="line">max_children_reached;</span><br><span class="line">;;</span><br><span class="line">slow_requests)</span><br><span class="line">slow_requests;</span><br><span class="line">;;</span><br><span class="line">*)</span><br><span class="line"><span class="built_in">echo</span> $<span class="string">&quot;USAGE:<span class="variable">$0</span></span></span><br><span class="line"><span class="string">&#123;start_since|accepted_conn|listen_queue|max_listen_queue|listen_queue_len|idle_p</span></span><br><span class="line"><span class="string">rocesses|active_processes|total_processes|max_active_processes|max_children_reac</span></span><br><span class="line"><span class="string">hed&#125;&quot;</span></span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆæƒæ‰§è¡Œæƒé™</span></span><br><span class="line">[root@web01 scripts]# <span class="built_in">chmod</span> +x php_status.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@web01 zabbix_agentd.d]# vim php_status.conf</span><br><span class="line">UserParameter=php.status[*],/etc/zabbix/zabbix_agentd.d/scripts/php_status.sh <span class="variable">$1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡å¯</span></span><br><span class="line">[root@web01 zabbix_agentd.d]# systemctl restart zabbix-agent</span><br></pre></td></tr></table></figure><h2 id="ç›‘æ§JAVAè¿›ç¨‹JVM">ç›‘æ§JAVAè¿›ç¨‹JVM</h2><p>åœ¨Zabbixä¸­ï¼ŒJMXç›‘æ§æ•°æ®çš„è·å–ç”±ä¸“é—¨çš„ä»£ç†ç¨‹åºæ¥å®ç°,å³Zabbix-Java-Gatewayæ¥è´Ÿè´£æ•°æ®çš„é‡‡ é›†ï¼ŒZabbix-Java-Gatewayå’ŒJMXçš„Javaç¨‹åºä¹‹é—´é€šä¿¡è·å–æ•°æ®</p><p><strong>JMXåœ¨Zabbixä¸­çš„è¿è¡Œæµç¨‹</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.Zabbix-Serveræ‰¾Zabbix-Java-Gatewayè·å–Javaæ•°æ®</span><br><span class="line">2.Zabbix-Java-Gatewayæ‰¾Javaç¨‹åº(zabbix-agent)è·å–æ•°æ®</span><br><span class="line">3.Javaç¨‹åºè¿”å›æ•°æ®ç»™Zabbix-Java-Gateway</span><br><span class="line">4.Zabbix-Java-Gatewayè¿”å›æ•°æ®ç»™Zabbix-Server</span><br><span class="line">5.Zabbix-Serverè¿›è¡Œæ•°æ®å±•ç¤º</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…JAVA-gateway">å®‰è£…JAVA-gateway</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">https://mirrors.tuna.tsinghua.edu.cn/zabbix/zabbix/5.0/rhel/7/x86_64/</span><br><span class="line"><span class="comment"># å®‰è£…</span></span><br><span class="line">[root@web02 ~]# rpm -ivh https://mirrors.tuna.tsinghua.edu.cn/zabbix/zabbix/5.0/rhel/7/x86_64/zabbix-java-gateway-5.0.42-1.el7.x86_64.rpm</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨java-gateway</span></span><br><span class="line">[root@web02 ~]# systemctl start zabbix-java-gateway</span><br><span class="line"></span><br><span class="line"><span class="comment">#zabbixæœåŠ¡ç«¯</span></span><br><span class="line"><span class="comment"># ä¿®æ”¹zabbix_serveré…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@zabbix5-server ~]# vim /etc/zabbix/zabbix_server.conf</span><br><span class="line">JavaGateway=172.16.1.8</span><br><span class="line">JavaGatewayPort=10052</span><br><span class="line">StartJavaPollers=5</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡å¯zabbix-server</span></span><br><span class="line">[root@zabbix5-server ~]# systemctl restart zabbix-server</span><br></pre></td></tr></table></figure><h3 id="tomcatå¼€å¯JMX">tomcatå¼€å¯JMX</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¿®æ”¹tomcatå¯åŠ¨è„šæœ¬</span></span><br><span class="line">[root@web02 ~]# vim /usr/libexec/tomcat/server</span><br><span class="line">CATALINA_OPTS=<span class="string">&quot;<span class="variable">$CATALINA_OPTS</span></span></span><br><span class="line"><span class="string">-Dcom.sun.management.jmxremote</span></span><br><span class="line"><span class="string">-Dcom.sun.management.jmxremote.port=12345</span></span><br><span class="line"><span class="string">-Dcom.sun.management.jmxremote.authenticate=false</span></span><br><span class="line"><span class="string">-Dcom.sun.management.jmxremote.ssl=false</span></span><br><span class="line"><span class="string">-Djava.rmi.server.hostname=172.16.1.8&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## å®Œæ•´è„šæœ¬</span></span><br><span class="line">[root@web02 ~]# <span class="built_in">cat</span> /usr/libexec/tomcat/server</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">. /usr/libexec/tomcat/preamble</span><br><span class="line"></span><br><span class="line">MAIN_CLASS=org.apache.catalina.startup.Bootstrap</span><br><span class="line"></span><br><span class="line">FLAGS=<span class="string">&quot;<span class="variable">$JAVA_OPTS</span>&quot;</span></span><br><span class="line">OPTIONS=<span class="string">&quot;-Dcatalina.base=<span class="variable">$CATALINA_BASE</span> \</span></span><br><span class="line"><span class="string">-Dcatalina.home=<span class="variable">$CATALINA_HOME</span> \</span></span><br><span class="line"><span class="string">-Djava.endorsed.dirs=<span class="variable">$JAVA_ENDORSED_DIRS</span> \</span></span><br><span class="line"><span class="string">-Djava.io.tmpdir=<span class="variable">$CATALINA_TMPDIR</span> \</span></span><br><span class="line"><span class="string">-Djava.util.logging.config.file=<span class="variable">$&#123;LOGGING_PROPERTIES&#125;</span> \</span></span><br><span class="line"><span class="string">-Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager&quot;</span></span><br><span class="line"></span><br><span class="line">CATALINA_OPTS=<span class="string">&quot;<span class="variable">$CATALINA_OPTS</span></span></span><br><span class="line"><span class="string">-Dcom.sun.management.jmxremote</span></span><br><span class="line"><span class="string">-Dcom.sun.management.jmxremote.port=12345</span></span><br><span class="line"><span class="string">-Dcom.sun.management.jmxremote.authenticate=false</span></span><br><span class="line"><span class="string">-Dcom.sun.management.jmxremote.ssl=false</span></span><br><span class="line"><span class="string">-Djava.rmi.server.hostname=172.16.1.8&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$1</span>&quot;</span> = <span class="string">&quot;start&quot;</span> ] ; <span class="keyword">then</span></span><br><span class="line">  FLAGS=<span class="string">&quot;<span class="variable">$&#123;FLAGS&#125;</span> <span class="variable">$CATALINA_OPTS</span>&quot;</span></span><br><span class="line">  <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$&#123;SECURITY_MANAGER&#125;</span>&quot;</span> = <span class="string">&quot;true&quot;</span> ] ; <span class="keyword">then</span></span><br><span class="line">    OPTIONS=<span class="string">&quot;<span class="variable">$&#123;OPTIONS&#125;</span> \</span></span><br><span class="line"><span class="string">    -Djava.security.manager \</span></span><br><span class="line"><span class="string">    -Djava.security.policy==<span class="variable">$&#123;CATALINA_BASE&#125;</span>/conf/catalina.policy&quot;</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">  run start</span><br><span class="line"><span class="keyword">elif</span> [ <span class="string">&quot;<span class="variable">$1</span>&quot;</span> = <span class="string">&quot;stop&quot;</span> ] ; <span class="keyword">then</span></span><br><span class="line">  run stop</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡å¯tomcat</span></span><br><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl restart tomcat</span><br></pre></td></tr></table></figure><p><strong>webç•Œé¢è®¾ç½®-æ–°å»ºä¸»æœº</strong></p><p><img src="https://cos.lukme.top/Pic/image-20240807103619686.png" alt="image-20240807103619686"></p><p><strong>é“¾æ¥æ¨¡æ¿</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æœjmxé€‰æ‹©ä¸¤ä¸ªæ¨¡æ¿--æ·»åŠ </span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/image-20240807102022640.png" alt="image-20240807102022640"></p><p><img src="https://cos.lukme.top/Pic/image-20240807104224895.png" alt="image-20240807104224895"></p>]]></content>
      
      
      <categories>
          
          <category> ç›‘æ§ </category>
          
          <category> zabbix </category>
          
      </categories>
      
      
        <tags>
            
            <tag> zabbix </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>zabbixè‡ªåŠ¨å‘ç°</title>
      <link href="/posts/4b865a3.html"/>
      <url>/posts/4b865a3.html</url>
      
        <content type="html"><![CDATA[<p><strong>ä¸»åŠ¨æ¨¡å¼ä¸è¢«åŠ¨æ¨¡å¼åŒºåˆ«</strong></p><p>â€‹1.è¢«åŠ¨æ¨¡å¼ (Zabbix-serverè½®è¯¢æ£€æµ‹zabbix-agent)</p><p>â€‹2.ä¸»åŠ¨æ¨¡å¼ (Zabbix-agentä¸»åŠ¨ä¸ŠæŠ¥ç»™Zabbix-server)</p><p><strong>ä¸»åŠ¨æ¨¡å¼ä¸è¢«è¢«åŠ¨æ¨¡å¼é€‰æ‹©å¦‚ä½•é€‰æ‹©</strong></p><p>â€‹1.å½“Queueé‡Œæœ‰å¤§é‡å»¶è¿Ÿçš„ç›‘æ§é¡¹</p><p>â€‹2.å½“ç›‘æ§ä¸»æœºè¶…è¿‡300+, å»ºè®®ä½¿ç”¨ä¸»åŠ¨æ¨¡å¼ã€‚</p><p><img src="https://cos.lukme.top/Pic/QQ_1723279232118.png" alt="QQ_1723279232118"></p><p><strong>zabbixå·¥ä½œæ¨¡å¼</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">agentä¸»åŠ¨æ¨¡å¼ï¼ˆè‡ªåŠ¨æ³¨å†Œï¼‰</span><br><span class="line">agentå¯åŠ¨åè‡ªåŠ¨å°†ä¸»æœºä¿¡æ¯æ³¨å†Œåˆ°zabbix-serverä¸­</span><br><span class="line"></span><br><span class="line">agentè¢«åŠ¨æ¨¡å¼ï¼ˆè‡ªåŠ¨å‘ç°ï¼‰</span><br><span class="line">agentå¯åŠ¨åç”±zabbix-serveræ‰«æï¼Œå°†ä¿¡æ¯ä¿å­˜åœ¨zabbix-serverä¸­</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="zabbixè‡ªåŠ¨å‘ç°">zabbixè‡ªåŠ¨å‘ç°</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Zabbix-serverå¼€å¯è‡ªåŠ¨å‘ç°åŠŸèƒ½ï¼š</span></span><br><span class="line">[root@zabbix5-server ~]# vim /etc/zabbix/zabbix_server.conf</span><br><span class="line">StartDiscoverers=20</span><br><span class="line"></span><br><span class="line"><span class="comment">#é‡å¯å®¢æˆ·ç«¯</span></span><br><span class="line">systemctl restart zabbix-agent</span><br></pre></td></tr></table></figure><p><strong>åˆ›å»ºè‡ªåŠ¨å‘ç°è§„åˆ™</strong></p><p><img src="https://cos.lukme.top/Pic/QQ_1723276932546.png" alt="QQ_1723276932546"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æµ‹è¯•æ—¶å€™ï¼Œ</span><br><span class="line">æ›´æ–°é—´éš”  10s æ˜¯æ‰«æä¸€è½®ä¹‹åç»è¿‡10så¼€å¯ä¸‹æ¬¡æ‰«æ</span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/QQ_1723277097140.png" alt="QQ_1723277097140"></p><p><strong>åˆ›å»ºè‡ªåŠ¨å‘ç°åŠ¨ä½œï¼ˆå…³è”è‡ªåŠ¨å‘ç°è§„åˆ™ï¼‰</strong></p><p><img src="https://cos.lukme.top/Pic/QQ_1723277868304.png" alt="QQ_1723277868304"></p><p><img src="https://cos.lukme.top/Pic/QQ_1723277947268.png" alt="QQ_1723277947268"></p><p><img src="https://cos.lukme.top/Pic/QQ_1723278202906.png" alt="QQ_1723278202906"></p><p><img src="https://cos.lukme.top/Pic/QQ_1723278289428.png" alt="QQ_1723278289428"></p><p><img src="https://cos.lukme.top/Pic/QQ_1723278495118.png" alt="QQ_1723278495118"></p><p><strong>è‡ªåŠ¨å‘ç°ç¼ºé™·</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.ç½‘ç»œå‘ç°é€Ÿåº¦å¤ªæ…¢</span><br><span class="line">2.è½®è¯¢æ‰«æç½‘æ®µ</span><br><span class="line">3.å¦‚æœç½‘æ®µä¸­å­˜åœ¨ä¸é€šçš„ä¸»æœºï¼Œä¼šå‡ºç°å¡é¡¿å¹¶ä¸”é€ æˆå“¦åç»­æ–°å¢çš„æœåŠ¡å™¨æ— æ³•åŠ å…¥èŠ‚ç‚¹</span><br><span class="line">4.ä¼šå¯¼è‡´serveræ€§èƒ½å˜ç¼“æ…¢ï¼Œå½±å“serveræ€§èƒ½</span><br></pre></td></tr></table></figure><h3 id="è‡ªåŠ¨æ³¨å†Œ">è‡ªåŠ¨æ³¨å†Œ</h3><p><strong>ä¿®æ”¹æ¯å°å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.ä¿®æ”¹agenté…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@lb01 ~]# vim /etc/zabbix/zabbix_agentd.conf</span><br><span class="line">Server=172.16.1.71  <span class="comment">#è¢«åŠ¨æ¨¡å¼</span></span><br><span class="line">ServerActive=172.16.1.71  <span class="comment">#ä¸»åŠ¨æ¨¡å¼</span></span><br><span class="line">Hostname=web03 <span class="comment">#æŒ‡å®šä¸»æœºå</span></span><br><span class="line"></span><br><span class="line">[root@lb01 ~]# systemctl restart zabbix-agent</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>åˆ›å»ºåŠ¨ä½œ</strong></p><p><img src="https://cos.lukme.top/Pic/QQ_1723278758673.png" alt="QQ_1723278758673"></p><p><img src="https://cos.lukme.top/Pic/QQ_1723278911425.png" alt="QQ_1723278911425"></p><p><img src="https://cos.lukme.top/Pic/QQ_1723278968991.png" alt="QQ_1723278968991"></p>]]></content>
      
      
      <categories>
          
          <category> ç›‘æ§ </category>
          
          <category> zabbix </category>
          
      </categories>
      
      
        <tags>
            
            <tag> zabbix </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç±³ç›‘æ§open-falcon</title>
      <link href="/posts/459a9148.html"/>
      <url>/posts/459a9148.html</url>
      
        <content type="html"><![CDATA[<h2 id="1-open-falconåŸºæœ¬ä»‹ç»">1. open-falconåŸºæœ¬ä»‹ç»</h2><blockquote><p>Open-Falconä½œä¸ºä¸€æ¬¾å¼€æºçš„äº’è”ç½‘ä¼ä¸šçº§ç›‘æ§ç³»ç»Ÿè§£å†³æ–¹æ¡ˆï¼Œä»¥å…¶é«˜æ€§èƒ½ã€æ˜“æ‰©å±•ã€çµæ´»é…ç½®ç­‰ç‰¹ç‚¹ï¼Œåœ¨äº’è”ç½‘å…¬å¸å’Œå¤§è§„æ¨¡ITåŸºç¡€è®¾æ–½ä¸­å¾—åˆ°äº†å¹¿æ³›åº”ç”¨ã€‚æ— è®ºæ˜¯ä¼ä¸šITè¿ç»´ã€å¼€å‘å›¢é˜Ÿè¿˜æ˜¯DevOpsï¼Œéƒ½å¯ä»¥é€šè¿‡Open-Falconæå‡è¿ç»´æ•ˆç‡å’Œæ•…éšœæ’é™¤èƒ½åŠ›</p><h3 id="è®¾è®¡åŸç†">è®¾è®¡åŸç†</h3><p>Open-Falconçš„è®¾è®¡åŸç†ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p><ol><li><strong>æ¨¡å—æ¶æ„</strong>ï¼š<ul><li><strong>æ•°æ®é‡‡é›†ä¸ä¸ŠæŠ¥</strong>ï¼šé€šè¿‡falcon-agentç»„ä»¶è‡ªåŠ¨å‘ç°å¹¶é‡‡é›†æœåŠ¡å™¨çš„å„ç§æ•°æ®å’ŒæŒ‡æ ‡ï¼Œæ”¯æŒç”¨æˆ·ä¸»åŠ¨pushå’Œç”¨æˆ·è‡ªå®šä¹‰æ’ä»¶ã€‚</li><li><strong>å‘Šè­¦</strong>ï¼šJudgeç»„ä»¶è´Ÿè´£åˆ¤æ–­é‡‡é›†åˆ°çš„æ•°æ®æ˜¯å¦è§¦å‘å‘Šè­¦è§„åˆ™ï¼Œå¹¶ç”Ÿæˆå‘Šè­¦äº‹ä»¶ã€‚</li><li><strong>å½’æ¡£ä¸ç»˜å›¾</strong>ï¼šGraphç»„ä»¶è´Ÿè´£å­˜å‚¨ç›‘æ§æ•°æ®ï¼Œå¹¶æä¾›ç»˜å›¾æ‰€éœ€çš„æ¥å£ã€‚</li><li><strong>æŠ¥è­¦ç­–ç•¥é…ç½®</strong>ï¼šç”¨æˆ·å¯ä»¥åœ¨ç³»ç»Ÿä¸­é…ç½®å¤šç§æŠ¥è­¦ç­–ç•¥ï¼Œä»¥æ»¡è¶³ä¸åŒçš„ç›‘æ§éœ€æ±‚ã€‚</li></ul></li><li><strong>æ‰§è¡Œè¿‡ç¨‹</strong>ï¼š<ul><li>falcon-agenté‡‡é›†åˆ°æ•°æ®åï¼Œé€šè¿‡é•¿è¿æ¥è¿…é€Ÿè½¬å‘ç»™Transferç»„ä»¶ã€‚</li><li>Transferç»„ä»¶è´Ÿè´£åˆ†å‘æ•°æ®ç»™Judgeå’ŒGraphç»„ä»¶ï¼Œåˆ†åˆ«ç”¨äºå‘Šè­¦åˆ¤å®šå’Œç»˜å›¾ã€‚</li><li>Judgeç»„ä»¶æ ¹æ®æŠ¥è­¦ç­–ç•¥åˆ¤æ–­æ•°æ®æ˜¯å¦è§¦å‘å‘Šè­¦ï¼Œå¹¶å°†å‘Šè­¦äº‹ä»¶å†™å…¥Redisæ¶ˆæ¯é˜Ÿåˆ—ã€‚</li><li>Alarmç»„ä»¶ç›‘å¬Redisä¸­çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå°†å‘Šè­¦äº‹ä»¶è½¬å‘ç»™å¾®ä¿¡ã€çŸ­ä¿¡æˆ–é‚®ä»¶ç­‰é€šçŸ¥æ–¹å¼ã€‚</li></ul></li></ol><h3 id="ä¸»è¦åŠŸèƒ½">ä¸»è¦åŠŸèƒ½</h3><ol><li><strong>æ•°æ®é‡‡é›†</strong>ï¼š<ul><li>æ”¯æŒå¤šç§æ•°æ®é‡‡é›†æ–¹å¼ï¼ŒåŒ…æ‹¬Agenté‡‡é›†ã€APIé‡‡é›†ã€è„šæœ¬é‡‡é›†ç­‰ã€‚</li><li>falcon-agentèƒ½å¤Ÿé«˜æ•ˆé‡‡é›†ç³»ç»ŸæŒ‡æ ‡ã€åº”ç”¨æŒ‡æ ‡å’Œè‡ªå®šä¹‰æŒ‡æ ‡ã€‚</li></ul></li><li><strong>æ•°æ®å­˜å‚¨ä¸åˆ†æ</strong>ï¼š<ul><li>æ”¯æŒå¤šç§æ•°æ®å­˜å‚¨åç«¯ï¼Œå¦‚Graphiteã€OpenTSDBã€InfluxDBç­‰ã€‚</li><li>æä¾›é«˜æ•ˆçš„æ•°æ®å­˜å‚¨å’Œå‹ç¼©ç®—æ³•ï¼Œç¡®ä¿å¤§è§„æ¨¡æ•°æ®çš„é«˜æ•ˆå­˜å‚¨ã€‚</li></ul></li><li><strong>å‘Šè­¦ç®¡ç†</strong>ï¼š<ul><li>æä¾›çµæ´»çš„å‘Šè­¦è§„åˆ™é…ç½®ï¼Œæ”¯æŒå¤šç§å‘Šè­¦è§¦å‘æ¡ä»¶å’Œé€šçŸ¥æ–¹å¼ã€‚</li><li>å†…ç½®æ™ºèƒ½çš„å‘Šè­¦ç­–ç•¥å¼•æ“ï¼Œæ”¯æŒè‡ªåŠ¨æ”¶æ•›ï¼Œé¿å…è¯¯æŠ¥å’Œæ¼æŠ¥ã€‚</li></ul></li><li><strong>æ•°æ®å¯è§†åŒ–</strong>ï¼š<ul><li>æä¾›Webç®¡ç†ç•Œé¢ï¼ˆDashboardï¼‰ï¼Œæ–¹ä¾¿ç”¨æˆ·æŸ¥çœ‹ç›‘æ§å›¾è¡¨å’Œé…ç½®å‘Šè­¦è§„åˆ™23ã€‚</li><li>æ”¯æŒè‡ªå®šä¹‰ä»ªè¡¨ç›˜å’ŒæŠ¥å‘Šï¼Œä¾¿äºæ•°æ®å±•ç¤ºå’Œåˆ†äº«ã€‚</li></ul></li><li><strong>å¯æ‰©å±•æ€§</strong>ï¼š<ul><li>è®¾è®¡ä¸ºåˆ†å¸ƒå¼æ¶æ„ï¼Œæ”¯æŒé«˜å¯ç”¨æ€§å’Œæ¨ªå‘æ‰©å±•ã€‚</li><li>æä¾›ä¸°å¯Œçš„æ‰©å±•æ¥å£ï¼Œæ”¯æŒè‡ªå®šä¹‰æ•°æ®æºå’Œæ’ä»¶ã€‚</li></ul></li></ol><h3 id="ä½¿ç”¨åœºæ™¯">ä½¿ç”¨åœºæ™¯</h3><p>Open-Falconå¯ä»¥åº”ç”¨äºå¤šç§åœºæ™¯ï¼ŒåŒ…æ‹¬ï¼š</p><ul><li><strong>ä¼ä¸šITè¿ç»´</strong>ï¼šå¯¹æ•°æ®ä¸­å¿ƒã€äº‘æœåŠ¡å™¨ã€ç½‘ç»œè®¾å¤‡è¿›è¡Œå®æ—¶ç›‘æ§ï¼ŒåŠæ—¶å‘ç°å¹¶è§£å†³é—®é¢˜ã€‚</li><li><strong>å¼€å‘å›¢é˜Ÿ</strong>ï¼šç›‘æ§åº”ç”¨å’ŒæœåŠ¡çš„æ€§èƒ½ï¼Œä¸ºæŒç»­é›†æˆä¸äº¤ä»˜æä¾›å†³ç­–ä¾æ®ã€‚</li><li><strong>DevOps</strong>ï¼šè‡ªåŠ¨åŒ–è¿ç»´æµç¨‹ï¼Œé€šè¿‡å‘Šè­¦å¿«é€Ÿå®šä½é—®é¢˜ï¼Œç¼©çŸ­æ•…éšœæ¢å¤æ—¶é—´ã€‚</li></ul><p>ç›‘æ§é¡¹ç›®åˆ†ä¸ºCPUã€Loadã€å†…å­˜ã€ç£ç›˜ã€IOã€ç½‘ç»œç›¸å…³ã€å†…æ ¸å‚æ•°ã€ss ç»Ÿè®¡è¾“å‡ºã€ç«¯å£é‡‡é›†ã€æ ¸å¿ƒæœåŠ¡çš„è¿›ç¨‹å­˜æ´»ä¿¡æ¯é‡‡é›†ã€å…³é”®ä¸šåŠ¡è¿›ç¨‹èµ„æºæ¶ˆè€—ã€NTP offseté‡‡é›†ã€DNSè§£æé‡‡é›†ï¼Œè¿™äº›æŒ‡æ ‡ï¼Œéƒ½æ˜¯open-falconçš„agentç»„ä»¶ç›´æ¥æ”¯æŒçš„ã€‚</p></blockquote><h2 id="2-open-falconä¸å…¶ä»–ç›‘æ§å·¥å…·çš„åŒºåˆ«">2. open-falconä¸å…¶ä»–ç›‘æ§å·¥å…·çš„åŒºåˆ«</h2><p><img src="D:%5CTypora%5Cdevops%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7%5C10.open-falcon.assets%5CQQ_1722697497676.png" alt="img"></p><h2 id="3-ç¯å¢ƒéƒ¨ç½²">3. ç¯å¢ƒéƒ¨ç½²</h2><table><thead><tr><th><strong>ä¸»æœºå</strong></th><th><strong>WanIP</strong></th><th><strong>LanIP</strong></th><th><strong>è§’è‰²</strong></th><th><strong>åº”ç”¨</strong></th></tr></thead><tbody><tr><td>open-falcon</td><td>10.0.0.200</td><td>172.16.1.200</td><td>open-falconæœåŠ¡ç«¯</td><td>open-falcon-serverã€MySQL</td></tr><tr><td>open-falcon-agent</td><td>10.0.0.201</td><td>172.16.1.201</td><td>open-falconçš„å®¢æˆ·ç«¯</td><td>open-falcon-agent</td></tr></tbody></table><blockquote><ul><li>CentOs7.9</li><li>2æ ¸4G</li><li>å†…å­˜åˆ†é…20G</li><li>é•œåƒæºï¼šé˜¿é‡Œæº</li></ul></blockquote><h2 id="4-æœåŠ¡ç«¯éƒ¨ç½²">4. æœåŠ¡ç«¯éƒ¨ç½²</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## æ›´æ¢é˜¿é‡Œæºå’Œepelæº</span></span><br><span class="line">[root@falcon ~]# <span class="built_in">mv</span> /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup</span><br><span class="line">[root@falcon ~]# wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class="line">--2024-08-03 23:17:34--  http://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class="line">Resolving mirrors.aliyun.com (mirrors.aliyun.com)... 180.178.233.232, 180.178.233.233, 180.178.245.235, ...</span><br><span class="line">Connecting to mirrors.aliyun.com (mirrors.aliyun.com)|180.178.233.232|:80... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 2523 (2.5K) [application/octet-stream]</span><br><span class="line">Saving to: â€˜/etc/yum.repos.d/CentOS-Base.repoâ€™</span><br><span class="line"></span><br><span class="line">100%[=============================================================================&gt;] 2,523       --.-K/s   <span class="keyword">in</span> 0.001s  </span><br><span class="line"></span><br><span class="line">2024-08-03 23:17:34 (2.84 MB/s) - â€˜/etc/yum.repos.d/CentOS-Base.repoâ€™ saved [2523/2523]</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## ä¸‹è½½å¸¸ç”¨è½¯ä»¶</span></span><br><span class="line">[root@falcon ~]# yum install git telnet net-tools tree nmap sysstat lrzsz dos2unix tcpdump ntpdate  wget <span class="comment">## -y</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## é…ç½®æ—¶é—´åŒæ­¥</span></span><br><span class="line">[root@falcon ~]# ntpdate cn.pool.ntp.org</span><br><span class="line"> 3 Aug 23:24:22 ntpdate[20532]: adjust time server 119.28.183.184 offset -0.435286 sec</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å¼€å¯ç¼“å­˜</span></span><br><span class="line">[root@falcon ~]# sed -i <span class="string">&#x27;s#keepcache=0#keepcache=1#g&#x27;</span> /etc/yum.conf </span><br><span class="line">[root@falcon ~]# grep keepcache /etc/yum.conf</span><br><span class="line">keepcache=1</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å…³é—­selinux</span></span><br><span class="line">sed -i <span class="string">&#x27;s/SELINUX=enforcing/SELINUX=disabled/g&#x27;</span> /etc/selinux/config</span><br><span class="line">setenforce 0</span><br><span class="line"> </span><br><span class="line"><span class="comment">#å…³é—­é˜²ç«å¢™</span></span><br><span class="line">systemctl stop firewalld.service</span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld.service</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## å®‰è£… redis</span></span><br><span class="line">[root@falcon ~]# yum install redis -y</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## å¯åŠ¨redis</span></span><br><span class="line">[root@falcon ~]# redis-server &amp;</span><br><span class="line">[1] 20863</span><br><span class="line">[root@falcon ~]# 20863:C 03 Aug 23:27:25.244 <span class="comment"># Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf</span></span><br><span class="line">20863:M 03 Aug 23:27:25.244 * Increased maximum number of open files to 10032 (it was originally <span class="built_in">set</span> to 1024).</span><br><span class="line">                _._                                                  </span><br><span class="line">           _.-``__ <span class="string">&#x27;&#x27;</span>-._                                             </span><br><span class="line">      _.-``    `.  `_.  <span class="string">&#x27;&#x27;</span>-._           Redis 3.2.12 (00000000/0) 64 bit</span><br><span class="line">  .-`` .-```.  ```\/    _.,_ <span class="string">&#x27;&#x27;</span>-._                                   </span><br><span class="line"> (    <span class="string">&#x27;      ,       .-`  | `,    )     Running in standalone mode</span></span><br><span class="line"><span class="string"> |`-._`-...-` __...-.``-._|&#x27;</span>` _.-<span class="string">&#x27;|     Port: 6379</span></span><br><span class="line"><span class="string"> |    `-._   `._    /     _.-&#x27;</span>    |     PID: 20863</span><br><span class="line">  `-._    `-._  `-./  _.-<span class="string">&#x27;    _.-&#x27;</span>                                   </span><br><span class="line"> |`-._`-._    `-.__.-<span class="string">&#x27;    _.-&#x27;</span>_.-<span class="string">&#x27;|                                  </span></span><br><span class="line"><span class="string"> |    `-._`-._        _.-&#x27;</span>_.-<span class="string">&#x27;    |           http://redis.io        </span></span><br><span class="line"><span class="string">  `-._    `-._`-.__.-&#x27;</span>_.-<span class="string">&#x27;    _.-&#x27;</span>                                   </span><br><span class="line"> |`-._`-._    `-.__.-<span class="string">&#x27;    _.-&#x27;</span>_.-<span class="string">&#x27;|                                  </span></span><br><span class="line"><span class="string"> |    `-._`-._        _.-&#x27;</span>_.-<span class="string">&#x27;    |                                  </span></span><br><span class="line"><span class="string">  `-._    `-._`-.__.-&#x27;</span>_.-<span class="string">&#x27;    _.-&#x27;</span>                                   </span><br><span class="line">      `-._    `-.__.-<span class="string">&#x27;    _.-&#x27;</span>                                       </span><br><span class="line">          `-._        _.-<span class="string">&#x27;                                           </span></span><br><span class="line"><span class="string">              `-.__.-&#x27;</span>                                               </span><br><span class="line"></span><br><span class="line">20863:M 03 Aug 23:27:25.244 <span class="comment"># WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.</span></span><br><span class="line">20863:M 03 Aug 23:27:25.244 <span class="comment"># Server started, Redis version 3.2.12</span></span><br><span class="line">20863:M 03 Aug 23:27:25.244 <span class="comment"># WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add &#x27;vm.overcommit_memory = 1&#x27; to /etc/sysctl.conf and then reboot or run the command &#x27;sysctl vm.overcommit_memory=1&#x27; for this to take effect.</span></span><br><span class="line">20863:M 03 Aug 23:27:25.244 <span class="comment"># WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command &#x27;echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled&#x27; as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled.</span></span><br><span class="line">20863:M 03 Aug 23:27:25.244 * The server is now ready to accept connections on port 6379</span><br><span class="line">^C</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## å®‰è£…mysqlå¹¶è®¾ç½®å¼€æœºè‡ªå¯</span></span><br><span class="line"></span><br><span class="line">[root@falcon ~]# wget http://repo.mysql.com/mysql-community-release-el7-5.noarch.rpm</span><br><span class="line">--2024-08-03 23:41:44--  http://repo.mysql.com/mysql-community-release-el7-5.noarch.rpm</span><br><span class="line">Resolving repo.mysql.com (repo.mysql.com)... 96.7.105.231, 2600:1417:8400:ab8::1d68, 2600:1417:8400:a87::1d68</span><br><span class="line">Connecting to repo.mysql.com (repo.mysql.com)|96.7.105.231|:80... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 6140 (6.0K) [application/x-redhat-package-manager]</span><br><span class="line">Saving to: â€˜mysql-community-release-el7-5.noarch.rpmâ€™</span><br><span class="line"></span><br><span class="line">100%[=============================================================================&gt;] 6,140       --.-K/s   <span class="keyword">in</span> 0s      </span><br><span class="line"></span><br><span class="line">2024-08-03 23:41:44 (783 MB/s) - â€˜mysql-community-release-el7-5.noarch.rpmâ€™ saved [6140/6140]</span><br><span class="line"></span><br><span class="line">[root@falcon ~]# ll</span><br><span class="line">total 200</span><br><span class="line">-rw-------. 1 root root   1413 May 13 15:22 anaconda-ks.cfg</span><br><span class="line">-rw-r--r--. 1 root root 188754 Apr 23 11:13 main.sh</span><br><span class="line">-rw-r--r--  1 root root   6140 Nov 12  2015 mysql-community-release-el7-5.noarch.rpm</span><br><span class="line"></span><br><span class="line">[root@falcon ~]# rpm -ivh mysql-community-release-el7-5.noarch.rpm </span><br><span class="line">Preparing...                          <span class="comment">################################# [100%]</span></span><br><span class="line">Updating / installing...</span><br><span class="line">   1:mysql-community-release-el7-5    <span class="comment">################################# [100%]</span></span><br><span class="line">   </span><br><span class="line">[root@falcon ~]# ll /etc/yum.repos.d/</span><br><span class="line">total 44</span><br><span class="line">-rw-r--r--  1 root root 2523 Aug  4  2022 CentOS-Base.repo</span><br><span class="line">-rw-r--r--. 1 root root 1675 May 13 16:46 CentOS-Base.repo.backup</span><br><span class="line">-rw-r--r--. 1 root root 1312 May 13 16:46 CentOS-CR.repo</span><br><span class="line">-rw-r--r--. 1 root root  649 May 13 16:46 CentOS-Debuginfo.repo</span><br><span class="line">-rw-r--r--. 1 root root  292 May 13 16:46 CentOS-fasttrack.repo</span><br><span class="line">-rw-r--r--. 1 root root  629 May 13 16:46 CentOS-Media.repo</span><br><span class="line">-rw-r--r--. 1 root root 1347 May 13 16:46 CentOS-Sources.repo</span><br><span class="line">-rw-r--r--. 1 root root  921 May 13 16:46 epel.repo</span><br><span class="line">-rw-r--r--. 1 root root 1020 May 13 16:46 epel-testing.repo</span><br><span class="line">-rw-r--r--  1 root root 1209 Jan 29  2014 mysql-community.repo</span><br><span class="line">-rw-r--r--  1 root root 1060 Jan 29  2014 mysql-community-source.repo</span><br><span class="line"></span><br><span class="line">[root@falcon ~]# yum install -y mysql-server</span><br><span class="line"></span><br><span class="line">[root@falcon ~]# systemctl start mysqld.service</span><br><span class="line">[root@falcon ~]# systemctl <span class="built_in">enable</span> mysqld.service</span><br><span class="line"></span><br><span class="line">[root@falcon ~]# netstat -lntup</span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    </span><br><span class="line">tcp        0      0 0.0.0.0:6379            0.0.0.0:*               LISTEN      20863/redis-server  </span><br><span class="line">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      8960/sshd           </span><br><span class="line">tcp        0      0 127.0.0.1:25            0.0.0.0:*               LISTEN      9190/master         </span><br><span class="line">tcp6       0      0 :::3306                 :::*                    LISTEN      22084/mysqld        </span><br><span class="line">tcp6       0      0 :::6379                 :::*                    LISTEN      20863/redis-server  </span><br><span class="line">tcp6       0      0 :::22                   :::*                    LISTEN      8960/sshd           </span><br><span class="line">tcp6       0      0 ::1:25                  :::*                    LISTEN      9190/master </span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## åˆå§‹åŒ–MySQLè¡¨ç»“æ„ï¼Œç»™ç”¨æˆ·è®¾ç½®å¯†ç ï¼Œå¯¼å…¥æ•°æ®åº“è¡¨</span></span><br><span class="line"></span><br><span class="line">[root@falcon ~]# <span class="built_in">cd</span> /tmp/ &amp;&amp; git <span class="built_in">clone</span> https://github.com/open-falcon/falcon-plus.git </span><br><span class="line">Cloning into <span class="string">&#x27;falcon-plus&#x27;</span>...</span><br><span class="line">remote: Enumerating objects: 10196, <span class="keyword">done</span>.</span><br><span class="line">remote: Counting objects: 100% (279/279), <span class="keyword">done</span>.</span><br><span class="line">remote: Compressing objects: 100% (229/229), <span class="keyword">done</span>.</span><br><span class="line">remote: Total 10196 (delta 60), reused 229 (delta 36), pack-reused 9917</span><br><span class="line">Receiving objects: 100% (10196/10196), 16.95 MiB | 2.43 MiB/s, <span class="keyword">done</span>.</span><br><span class="line">Resolving deltas: 100% (5352/5352), <span class="keyword">done</span>.</span><br><span class="line">[root@falcon tmp]# <span class="built_in">cd</span> /tmp/falcon-plus/scripts/mysql/db_schema/</span><br><span class="line">[root@falcon db_schema]# ll</span><br><span class="line">total 24</span><br><span class="line">-rw-r--r-- 1 root root 1952 Aug  4 00:08 1_uic-db-schema.sql</span><br><span class="line">-rw-r--r-- 1 root root 7573 Aug  4 00:08 2_portal-db-schema.sql</span><br><span class="line">-rw-r--r-- 1 root root 3391 Aug  4 00:08 3_dashboard-db-schema.sql</span><br><span class="line">-rw-r--r-- 1 root root 1807 Aug  4 00:08 4_graph-db-schema.sql</span><br><span class="line">-rw-r--r-- 1 root root 2558 Aug  4 00:08 5_alarms-db-schema.sql</span><br><span class="line">[root@falcon db_schema]# mysqladmin -uroot password <span class="string">&quot;password&quot;</span></span><br><span class="line">Warning: Using a password on the <span class="built_in">command</span> line interface can be insecure.</span><br><span class="line">[root@falcon db_schema]# mysql -uroot -p</span><br><span class="line">Enter password: </span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection <span class="built_in">id</span> is 9</span><br><span class="line">Server version: 5.6.51 MySQL Community Server (GPL)</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2021, Oracle and/or its affiliates. All rights reserved.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type <span class="string">&#x27;help;&#x27;</span> or <span class="string">&#x27;\h&#x27;</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">&#x27;\c&#x27;</span> to clear the current input statement.</span><br><span class="line"></span><br><span class="line">mysql&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">+--------------------+</span><br><span class="line">3 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; \q</span><br><span class="line">Bye</span><br><span class="line">[root@falcon db_schema]# mysql -h 127.0.0.1 -u root -p &lt; 1_uic-db-schema.sql</span><br><span class="line">Enter password: </span><br><span class="line">[root@falcon db_schema]# mysql -h 127.0.0.1 -u root -p &lt; 2_portal-db-schema.sql</span><br><span class="line">Enter password: </span><br><span class="line">[root@falcon db_schema]# mysql -h 127.0.0.1 -u root -p &lt; 3_dashboard-db-schema.sql</span><br><span class="line">Enter password: </span><br><span class="line">[root@falcon db_schema]# mysql -h 127.0.0.1 -u root -p &lt; 4_graph-db-schema.sql</span><br><span class="line">Enter password: </span><br><span class="line">[root@falcon db_schema]# mysql -h 127.0.0.1 -u root -p &lt; 5_alarms-db-schema.sql</span><br><span class="line">Enter password: </span><br><span class="line"></span><br><span class="line">[root@falcon db_schema]# mysql -uroot -ppassword</span><br><span class="line">Warning: Using a password on the <span class="built_in">command</span> line interface can be insecure.</span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection <span class="built_in">id</span> is 15</span><br><span class="line">Server version: 5.6.51 MySQL Community Server (GPL)</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2021, Oracle and/or its affiliates. All rights reserved.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type <span class="string">&#x27;help;&#x27;</span> or <span class="string">&#x27;\h&#x27;</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">&#x27;\c&#x27;</span> to clear the current input statement.</span><br><span class="line"></span><br><span class="line">mysql&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| alarms             |</span><br><span class="line">| dashboard          |</span><br><span class="line">| falcon_portal      |</span><br><span class="line">| graph              |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| uic                |</span><br><span class="line">+--------------------+</span><br><span class="line">8 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; \q</span><br><span class="line">Bye</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## å®‰è£…goè¯­è¨€å¼€å‘ç¯å¢ƒï¼Œé…ç½®å¥½ç¯å¢ƒå˜é‡</span></span><br><span class="line"></span><br><span class="line">[root@falcon db_schema]# yum install golang -y</span><br><span class="line"></span><br><span class="line">[root@falcon db_schema]# [root@falcon db_schema]# go version</span><br><span class="line">go version go1.20.12 linux/amd64</span><br><span class="line"></span><br><span class="line">[root@falcon db_schema]# find / -name go</span><br><span class="line">/usr/bin/go</span><br><span class="line">/usr/lib/golang/src/cmd/go</span><br><span class="line">/usr/lib/golang/src/cmd/vendor/golang.org/x/tools/go</span><br><span class="line">/usr/lib/golang/src/go</span><br><span class="line">/usr/lib/golang/bin/go</span><br><span class="line"></span><br><span class="line">[root@falcon db_schema]# <span class="built_in">export</span> GOROOT=/usr/lib/golang</span><br><span class="line">[root@falcon db_schema]# <span class="built_in">export</span> GOPATH=/home</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## å®‰è£…open-falcon</span></span><br><span class="line"></span><br><span class="line">[root@falcon profile.d]# <span class="built_in">export</span> FALCON_HOME=/home/work</span><br><span class="line">[root@falcon profile.d]# <span class="built_in">export</span> WORKSPACE=<span class="variable">$FALCON_HOME</span>/open-falcon</span><br><span class="line">[root@falcon profile.d]# <span class="built_in">mkdir</span> -p <span class="variable">$WORKSPACE</span></span><br><span class="line">[root@falcon profile.d]# ll</span><br><span class="line">total 68</span><br><span class="line">-rw-r--r--. 1 root root  771 Oct 31  2018 256term.csh</span><br><span class="line">-rw-r--r--. 1 root root  841 Oct 31  2018 256term.sh</span><br><span class="line">-rw-r--r--. 1 root root  196 Mar 25  2017 colorgrep.csh</span><br><span class="line">-rw-r--r--. 1 root root  201 Mar 25  2017 colorgrep.sh</span><br><span class="line">-rw-r--r--. 1 root root 1741 Oct 30  2018 colorls.csh</span><br><span class="line">-rw-r--r--. 1 root root 1606 Oct 30  2018 colorls.sh</span><br><span class="line">-rw-r--r--. 1 root root   80 Oct 31  2018 csh.local</span><br><span class="line">-rw-r--r--  1 root root   50 Aug  4 00:29 go_env.sh</span><br><span class="line">-rw-r--r--. 1 root root 1706 Oct 31  2018 lang.csh</span><br><span class="line">-rw-r--r--. 1 root root 2703 Oct 31  2018 lang.sh</span><br><span class="line">-rw-r--r--. 1 root root  123 Jul 31  2015 less.csh</span><br><span class="line">-rw-r--r--. 1 root root  121 Jul 31  2015 less.sh</span><br><span class="line">-rw-r--r--. 1 root root   81 Oct 31  2018 sh.local</span><br><span class="line">-rw-r--r--. 1 root root  105 Dec 16  2020 vim.csh</span><br><span class="line">-rw-r--r--. 1 root root  269 Dec 16  2020 vim.sh</span><br><span class="line">-rw-r--r--. 1 root root  164 Jan 28  2014 which2.csh</span><br><span class="line">-rw-r--r--. 1 root root  169 Jan 28  2014 which2.sh</span><br><span class="line">[root@falcon profile.d]# <span class="built_in">cd</span></span><br><span class="line">[root@falcon ~]# ll</span><br><span class="line">total 200</span><br><span class="line">-rw-------. 1 root root   1413 May 13 15:22 anaconda-ks.cfg</span><br><span class="line">-rw-r--r--. 1 root root 188754 Apr 23 11:13 main.sh</span><br><span class="line">-rw-r--r--  1 root root   6140 Nov 12  2015 mysql-community-release-el7-5.noarch.rpm</span><br><span class="line"></span><br><span class="line">[root@falcon ~]# rz</span><br><span class="line">rz waiting to receive.**[root@falcon ~]# ll</span><br><span class="line">total 67276</span><br><span class="line">-rw-------. 1 root root     1413 May 13 15:22 anaconda-ks.cfg</span><br><span class="line">-rw-r--r--. 1 root root   188754 Apr 23 11:13 main.sh</span><br><span class="line">-rw-r--r--  1 root root     6140 Nov 12  2015 mysql-community-release-el7-5.noarch.rpm</span><br><span class="line">-r--r--r--  1 root root 68685265 Jul 31 21:23 open-falcon-v0.3.tar.gz</span><br><span class="line">[root@falcon ~]# tar xf open-falcon-v0.3.tar.gz -C <span class="variable">$WORKSPACE</span></span><br><span class="line">[root@falcon ~]# <span class="built_in">cd</span> <span class="variable">$WORKSPACE</span>/</span><br><span class="line">[root@falcon open-falcon]# ll</span><br><span class="line">total 4272</span><br><span class="line">drwxr-xr-x 7 czm_core czm_core      71 May 30  2019 agent</span><br><span class="line">drwxr-xr-x 5 czm_core czm_core      43 May 30  2019 aggregator</span><br><span class="line">drwxr-xr-x 5 czm_core czm_core      43 May 30  2019 alarm</span><br><span class="line">drwxr-xr-x 6 czm_core czm_core      55 May 30  2019 api</span><br><span class="line">drwxr-xr-x 5 czm_core czm_core      43 May 30  2019 gateway</span><br><span class="line">drwxr-xr-x 6 czm_core czm_core      55 May 30  2019 graph</span><br><span class="line">drwxr-xr-x 5 czm_core czm_core      43 May 30  2019 hbs</span><br><span class="line">drwxr-xr-x 5 czm_core czm_core      43 May 30  2019 judge</span><br><span class="line">drwxr-xr-x 5 czm_core czm_core      43 May 30  2019 nodata</span><br><span class="line">-rwxr-xr-x 1 czm_core czm_core 4370880 May 30  2019 open-falcon</span><br><span class="line">lrwxrwxrwx 1 czm_core czm_core      15 May 30  2019 plugin -&gt; ./agent/plugin/</span><br><span class="line">lrwxrwxrwx 1 czm_core czm_core      15 May 30  2019 public -&gt; ./agent/public/</span><br><span class="line">drwxr-xr-x 5 czm_core czm_core      43 May 30  2019 transfer</span><br><span class="line">[root@falcon open-falcon]# <span class="built_in">cd</span> /home/work</span><br><span class="line">[root@falcon work]# ll</span><br><span class="line">total 0</span><br><span class="line">drwxr-xr-x 12 czm_core czm_core 190 May 30  2019 open-falcon</span><br><span class="line">[root@falcon work]# <span class="built_in">cd</span> open-falcon/</span><br><span class="line">[root@falcon open-falcon]# ll</span><br><span class="line">total 4272</span><br><span class="line">drwxr-xr-x 7 czm_core czm_core      71 May 30  2019 agent</span><br><span class="line">drwxr-xr-x 5 czm_core czm_core      43 May 30  2019 aggregator</span><br><span class="line">drwxr-xr-x 5 czm_core czm_core      43 May 30  2019 alarm</span><br><span class="line">drwxr-xr-x 6 czm_core czm_core      55 May 30  2019 api</span><br><span class="line">drwxr-xr-x 5 czm_core czm_core      43 May 30  2019 gateway</span><br><span class="line">drwxr-xr-x 6 czm_core czm_core      55 May 30  2019 graph</span><br><span class="line">drwxr-xr-x 5 czm_core czm_core      43 May 30  2019 hbs</span><br><span class="line">drwxr-xr-x 5 czm_core czm_core      43 May 30  2019 judge</span><br><span class="line">drwxr-xr-x 5 czm_core czm_core      43 May 30  2019 nodata</span><br><span class="line">-rwxr-xr-x 1 czm_core czm_core 4370880 May 30  2019 open-falcon</span><br><span class="line">lrwxrwxrwx 1 czm_core czm_core      15 May 30  2019 plugin -&gt; ./agent/plugin/</span><br><span class="line">lrwxrwxrwx 1 czm_core czm_core      15 May 30  2019 public -&gt; ./agent/public/</span><br><span class="line">drwxr-xr-x 5 czm_core czm_core      43 May 30  2019 transfer</span><br><span class="line">[root@falcon open-falcon]# <span class="built_in">pwd</span></span><br><span class="line">/home/work/open-falcon</span><br></pre></td></tr></table></figure><p><strong>ä¿®æ”¹é…ç½®æ–‡ä»¶cfg.json(ç”±äºä¹‹å‰è®¾ç½®çš„rootå¯†ç ä¸ºpasswordï¼Œåº•ä¸‹é…ç½®æ–‡ä»¶è¦æ”¹)</strong></p><table><thead><tr><th>ä¿®æ”¹çš„æ–‡ä»¶</th><th>è·¯å¾„</th></tr></thead><tbody><tr><td>aggregator</td><td>/home/work/open-falcon/aggregator/config/cfg.json</td></tr><tr><td>graph</td><td>/home/work/open-falcon/graph/config/cfg.json</td></tr><tr><td>hbs</td><td>/home/work/open-falcon/hbs/config/cfg.json</td></tr><tr><td>nodata</td><td>/home/work/open-falcon/nodata/config/cfg.json</td></tr><tr><td>api</td><td>/home/work/open-falcon/api/config/cfg.json</td></tr><tr><td>alarm</td><td>/home/work/open-falcon/alarm/config/cfg.json</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## ä¿®æ”¹aggregatorçš„é…ç½®æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">[root@falcon open-falcon]# <span class="built_in">cd</span> aggregator/</span><br><span class="line">[root@falcon aggregator]# ll</span><br><span class="line">total 0</span><br><span class="line">drwxr-xr-x 2 czm_core czm_core 31 May 30  2019 bin</span><br><span class="line">drwxr-xr-x 2 czm_core czm_core 22 May 30  2019 config</span><br><span class="line">drwxr-xr-x 2 czm_core czm_core  6 May 30  2019 logs</span><br><span class="line">[root@falcon aggregator]# <span class="built_in">cd</span> config/</span><br><span class="line">[root@falcon config]# ll</span><br><span class="line">total 4</span><br><span class="line">-rw-r--r-- 1 czm_core czm_core 522 May 30  2019 cfg.json</span><br><span class="line">[root@falcon config]# <span class="built_in">pwd</span></span><br><span class="line">/home/work/open-falcon/aggregator/config</span><br><span class="line">[root@falcon config]# vim cfg.json</span><br></pre></td></tr></table></figure><p><img src="D:%5CTypora%5Cdevops%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7%5C10.open-falcon.assets%5CQQ_1722703517483.png" alt="img"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## ä¿®æ”¹graphçš„é…ç½®æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">[root@falcon open-falcon]# ll</span><br><span class="line">total 4272</span><br><span class="line">drwxr-xr-x 7 czm_core czm_core      71 May 30  2019 agent</span><br><span class="line">drwxr-xr-x 5 czm_core czm_core      43 May 30  2019 aggregator</span><br><span class="line">drwxr-xr-x 5 czm_core czm_core      43 May 30  2019 alarm</span><br><span class="line">drwxr-xr-x 6 czm_core czm_core      55 May 30  2019 api</span><br><span class="line">drwxr-xr-x 5 czm_core czm_core      43 May 30  2019 gateway</span><br><span class="line">drwxr-xr-x 6 czm_core czm_core      55 May 30  2019 graph</span><br><span class="line">drwxr-xr-x 5 czm_core czm_core      43 May 30  2019 hbs</span><br><span class="line">drwxr-xr-x 5 czm_core czm_core      43 May 30  2019 judge</span><br><span class="line">drwxr-xr-x 5 czm_core czm_core      43 May 30  2019 nodata</span><br><span class="line">-rwxr-xr-x 1 czm_core czm_core 4370880 May 30  2019 open-falcon</span><br><span class="line">lrwxrwxrwx 1 czm_core czm_core      15 May 30  2019 plugin -&gt; ./agent/plugin/</span><br><span class="line">lrwxrwxrwx 1 czm_core czm_core      15 May 30  2019 public -&gt; ./agent/public/</span><br><span class="line">drwxr-xr-x 5 czm_core czm_core      43 May 30  2019 transfer</span><br><span class="line">[root@falcon open-falcon]# <span class="built_in">pwd</span></span><br><span class="line">/home/work/open-falcon</span><br><span class="line">[root@falcon open-falcon]# <span class="built_in">cd</span> graph/</span><br><span class="line">[root@falcon graph]# <span class="built_in">cd</span> config</span><br><span class="line">[root@falcon config]# vim cfg.json </span><br></pre></td></tr></table></figure><p><img src="D:%5CTypora%5Cdevops%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7%5C10.open-falcon.assets%5CQQ_1722703737785.png" alt="img"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## ä¿®æ”¹hbsçš„é…ç½®æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">[root@falcon config]# vim /home/work/open-falcon/hbs/config/cfg.json </span><br></pre></td></tr></table></figure><p><img src="D:%5CTypora%5Cdevops%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7%5C10.open-falcon.assets%5CQQ_1722703871384.png" alt="img"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## ä¿®æ”¹nodataçš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@falcon config]# vim /home/work/open-falcon/nodata/config/cfg.json</span><br></pre></td></tr></table></figure><p><img src="D:%5CTypora%5Cdevops%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7%5C10.open-falcon.assets%5CQQ_1722703963223.png" alt="img"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## ä¿®æ”¹apiçš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@falcon config]# vim /home/work/open-falcon/api/config/cfg.json</span><br></pre></td></tr></table></figure><p><img src="D:%5CTypora%5Cdevops%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7%5C10.open-falcon.assets%5CQQ_1722704127654.png" alt="img"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## ä¿®æ”¹alarmçš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@falcon config]# vim /home/work/open-falcon/alarm/config/cfg.json</span><br></pre></td></tr></table></figure><p><img src="D:%5CTypora%5Cdevops%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7%5C10.open-falcon.assets%5CQQ_1722704273423.png" alt="img"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## å¯åŠ¨åç«¯æ¨¡å—ï¼Œæ£€æŸ¥å¯åŠ¨çŠ¶æ€</span></span><br><span class="line"></span><br><span class="line">[root@falcon work]# <span class="built_in">cd</span> /home/work/open-falcon/</span><br><span class="line">[root@falcon open-falcon]# ./open-falcon start</span><br><span class="line">[falcon-graph] 31555</span><br><span class="line">[falcon-hbs] 31567</span><br><span class="line">[falcon-judge] 31578</span><br><span class="line">[falcon-transfer] 31589</span><br><span class="line">[falcon-nodata] 31597</span><br><span class="line">[falcon-aggregator] 31616</span><br><span class="line">[falcon-agent] 31635</span><br><span class="line">[falcon-gateway] 31643</span><br><span class="line">[falcon-api] 31653</span><br><span class="line">[falcon-alarm] 31667</span><br><span class="line"></span><br><span class="line">[root@falcon open-falcon]# ./open-falcon check</span><br><span class="line">        falcon-graph         UP           31555 </span><br><span class="line">          falcon-hbs         UP           31567 </span><br><span class="line">        falcon-judge         UP           31578 </span><br><span class="line">     falcon-transfer         UP           31589 </span><br><span class="line">       falcon-nodata         UP           31597 </span><br><span class="line">   falcon-aggregator         UP           31616 </span><br><span class="line">        falcon-agent         UP           31635 </span><br><span class="line">      falcon-gateway         UP           31643 </span><br><span class="line">          falcon-api         UP           31653 </span><br><span class="line">        falcon-alarm         UP           31667 </span><br><span class="line">        </span><br><span class="line"><span class="comment">#æ›´å¤šçš„å‘½ä»¤è¡Œå·¥å…·ç”¨æ³•</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ./open-falcon [start|stop|restart|check|monitor|reload] module</span></span><br><span class="line">./open-falcon start agent</span><br><span class="line"> </span><br><span class="line">./open-falcon check</span><br><span class="line">        falcon-graph         UP           53007</span><br><span class="line">          falcon-hbs         UP           53014</span><br><span class="line">        falcon-judge         UP           53020</span><br><span class="line">     falcon-transfer         UP           53026</span><br><span class="line">       falcon-nodata         UP           53032</span><br><span class="line">   falcon-aggregator         UP           53038</span><br><span class="line">        falcon-agent         UP           53044</span><br><span class="line">      falcon-gateway         UP           53050</span><br><span class="line">          falcon-api         UP           53056</span><br><span class="line">        falcon-alarm         UP           53063</span><br><span class="line"> </span><br><span class="line"><span class="comment">#For debugging , You can check $WorkDir/$moduleName/log/logs/xxx.log      </span></span><br><span class="line"></span><br><span class="line">[root@falcon open-falcon]# netstat -lntup</span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    </span><br><span class="line">tcp        0      0 0.0.0.0:6379            0.0.0.0:*               LISTEN      20863/redis-server  </span><br><span class="line">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      8960/sshd           </span><br><span class="line">tcp        0      0 127.0.0.1:25            0.0.0.0:*               LISTEN      9190/master         </span><br><span class="line">tcp6       0      0 :::6055                 :::*                    LISTEN      31616/falcon-aggreg </span><br><span class="line">tcp6       0      0 :::6090                 :::*                    LISTEN      31597/falcon-nodata </span><br><span class="line">tcp6       0      0 :::3306                 :::*                    LISTEN      22084/mysqld        </span><br><span class="line">tcp6       0      0 :::6379                 :::*                    LISTEN      20863/redis-server  </span><br><span class="line">tcp6       0      0 :::14444                :::*                    LISTEN      31643/falcon-gatewa </span><br><span class="line">tcp6       0      0 :::6060                 :::*                    LISTEN      31589/falcon-transf </span><br><span class="line">tcp6       0      0 :::6030                 :::*                    LISTEN      31567/falcon-hbs    </span><br><span class="line">tcp6       0      0 :::6031                 :::*                    LISTEN      31567/falcon-hbs    </span><br><span class="line">tcp6       0      0 :::8080                 :::*                    LISTEN      31653/falcon-api    </span><br><span class="line">tcp6       0      0 :::8433                 :::*                    LISTEN      31589/falcon-transf </span><br><span class="line">tcp6       0      0 :::6070                 :::*                    LISTEN      31555/falcon-graph  </span><br><span class="line">tcp6       0      0 :::22                   :::*                    LISTEN      8960/sshd           </span><br><span class="line">tcp6       0      0 :::6071                 :::*                    LISTEN      31555/falcon-graph  </span><br><span class="line">tcp6       0      0 :::9912                 :::*                    LISTEN      31667/falcon-alarm  </span><br><span class="line">tcp6       0      0 ::1:25                  :::*                    LISTEN      9190/master         </span><br><span class="line">tcp6       0      0 :::16060                :::*                    LISTEN      31643/falcon-gatewa </span><br><span class="line">tcp6       0      0 :::4444                 :::*                    LISTEN      31589/falcon-transf </span><br><span class="line">tcp6       0      0 :::6080                 :::*                    LISTEN      31578/falcon-judge  </span><br><span class="line">tcp6       0      0 :::18433                :::*                    LISTEN      31643/falcon-gatewa </span><br><span class="line">tcp6       0      0 :::6081                 :::*                    LISTEN      31578/falcon-judge  </span><br><span class="line">tcp6       0      0 :::1988                 :::*                    LISTEN      31635/falcon-agent  </span><br></pre></td></tr></table></figure><h2 id="5-å®¢æˆ·ç«¯">5. å®¢æˆ·ç«¯</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## åˆ›å»ºç›®å½•ï¼Œå¯¼å…¥ç»„ä»¶ä»£ç </span></span><br><span class="line"></span><br><span class="line">[root@open-falcon-agent profile.d]# <span class="built_in">export</span> HOME=/home/work</span><br><span class="line">[root@open-falcon-agent profile.d]# <span class="built_in">export</span> WORKSPACE=<span class="variable">$HOME</span>/open-falcon</span><br><span class="line">[root@open-falcon-agent profile.d]# <span class="built_in">mkdir</span> -p <span class="variable">$WORKSPACE</span></span><br><span class="line">[root@open-falcon-agent profile.d]# <span class="built_in">cd</span> <span class="variable">$WORKSPACE</span></span><br><span class="line">[root@open-falcon-agent open-falcon]# ll</span><br><span class="line">total 0</span><br><span class="line"></span><br><span class="line">[root@open-falcon-agent open-falcon]# rz</span><br><span class="line">rz waiting to receive.**[root@open-falcon-agent open-falcon]# ll</span><br><span class="line">total 1516</span><br><span class="line">-r--r--r-- 1 root root 1550458 Jul 31 21:22 dashboard-master.zip</span><br><span class="line">[root@open-falcon-agent open-falcon]# unzip dashboard-master.zip </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@open-falcon-agent open-falcon]# ll</span><br><span class="line">total 1516</span><br><span class="line">drwxr-xr-x 5 root root     265 Jun 22  2020 dashboard-master</span><br><span class="line">-r--r--r-- 1 root root 1550458 Jul 31 21:22 dashboard-master.zip</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## å®‰è£…ä¾èµ–åŒ…</span></span><br><span class="line"></span><br><span class="line">yum install -y python-virtualenv</span><br><span class="line">yum install -y python-devel</span><br><span class="line">yum install -y openldap-devel</span><br><span class="line">yum install -y mysql-devel</span><br><span class="line">yum groupinstall <span class="string">&quot;Development tools&quot;</span> -y</span><br><span class="line"></span><br><span class="line">[root@open-falcon-agent dashboard-master]# <span class="built_in">cd</span> <span class="variable">$WORKSPACE</span>/dashboard-master</span><br><span class="line">[root@open-falcon-agent dashboard-master]# ll</span><br><span class="line">total 56</span><br><span class="line">-rw-r--r--  1 root root    97 Jun 22  2020 babel.cfg</span><br><span class="line">-rwxr-xr-x  1 root root  2653 Jun 22  2020 control</span><br><span class="line">-rw-r--r--  1 root root   510 Jun 22  2020 Dockerfile</span><br><span class="line">-rw-r--r--  1 root root   319 Jun 22  2020 entrypoint.sh</span><br><span class="line">-rw-r--r--  1 root root   170 Jun 22  2020 gunicorn.conf</span><br><span class="line">-rw-r--r--  1 root root  1235 Jun 22  2020 i18n.md</span><br><span class="line">-rw-r--r--  1 root root 11358 Jun 22  2020 LICENSE</span><br><span class="line">-rw-r--r--  1 root root   462 Jun 22  2020 NOTICE</span><br><span class="line">-rw-r--r--  1 root root   139 Jun 22  2020 pip_requirements.txt</span><br><span class="line">-rw-r--r--  1 root root  5296 Jun 22  2020 README.md</span><br><span class="line">drwxr-xr-x 10 root root   194 Jun 22  2020 rrd</span><br><span class="line">drwxr-xr-x  2 root root   101 Jun 22  2020 screenshots</span><br><span class="line">drwxr-xr-x  2 root root    65 Jun 22  2020 scripts</span><br><span class="line">-rwxr-xr-x  1 root root   979 Jun 22  2020 wsgi.py</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@open-falcon-agent dashboard-master]# virtualenv ./env</span><br><span class="line">New python executable <span class="keyword">in</span> /home/work/open-falcon/dashboard-master/env/bin/python2</span><br><span class="line">Also creating executable <span class="keyword">in</span> /home/work/open-falcon/dashboard-master/env/bin/python</span><br><span class="line">Installing setuptools, pip, wheel...done.</span><br><span class="line"></span><br><span class="line">[root@open-falcon-agent dashboard-master]# <span class="built_in">source</span> <span class="built_in">env</span>/bin/activate</span><br><span class="line">(<span class="built_in">env</span>) [root@open-falcon-agent dashboard-master]# pip install -r pip_requirements.txt -i</span><br><span class="line"></span><br><span class="line">Usage:   </span><br><span class="line">  pip install [options] &lt;requirement specifier&gt; [package-index-options] ...</span><br><span class="line">  pip install [options] -r &lt;requirements file&gt; [package-index-options] ...</span><br><span class="line">  pip install [options] [-e] &lt;vcs project url&gt; ...</span><br><span class="line">  pip install [options] [-e] &lt;<span class="built_in">local</span> project path&gt; ...</span><br><span class="line">  pip install [options] &lt;archive url/path&gt; ...</span><br><span class="line"></span><br><span class="line">-i option requires an argument</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#å¦‚æœå®‰è£…äº†é«˜ç‰ˆæœ¬pipï¼Œè¯·å…ˆå¸è½½pip uninstall pip   å†æŒ‰ä¸¤æ¬¡y</span></span><br><span class="line"><span class="comment">#æŒ‡å®šæºå®‰è£…åŒ…ï¼ˆå¤‡æ³¨ï¼šè¿™æ­¥å¦‚æœå®‰è£…ä¸æˆåŠŸï¼Œè¯·æ£€æŸ¥pipç‰ˆæœ¬æ˜¯å¦ä¸ºpip-9.0.1ï¼‰ </span></span><br><span class="line">pip install -r pip_requirements.txt -i</span><br><span class="line">è¿™é‡Œvirtualenv ./envä½œç”¨æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„pythonç¯å¢ƒï¼Œè¯¦è§ï¼šhttps://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/001432712108300322c61f256c74803b43bfd65c6f8d0d0000</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## åˆ‡æ¢ç¯å¢ƒåï¼Œpipå®‰è£…</span></span><br><span class="line"></span><br><span class="line">(<span class="built_in">env</span>) [root@open-falcon-agent dashboard-master]# ./env/bin/pip install -r pip_requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple/</span><br><span class="line">Collecting Flask==1.0 (from -r pip_requirements.txt (line 1))</span><br><span class="line">  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/55/b1/4365193655df97227ace49311365cc296e74b60c7f5c63d23cd30175e2f6/Flask-1.0-py2.py3-none-any.whl (97kB)</span><br><span class="line">    100% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 102kB 1.6MB/s </span><br><span class="line">Collecting Flask-Babel==0.9 (from -r pip_requirements.txt (line 2))</span><br><span class="line">  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/24/6b/dd9031c446e05600b740086274a9939799f26401b8b96e124ccf71e6a9b2/Flask-Babel-0.9.tar.gz</span><br><span class="line">Collecting Jinja2&gt;=2.10.1 (from -r pip_requirements.txt (line 3))</span><br><span class="line">  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/7e/c2/1eece8c95ddbc9b1aeb64f5783a9e07a286de42191b7204d67b7496ddf35/Jinja2-2.11.3-py2.py3-none-any.whl (125kB)</span><br><span class="line">    100% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 133kB 4.3MB/s </span><br><span class="line">Collecting Werkzeug==0.15.4 (from -r pip_requirements.txt (line 4))</span><br><span class="line">  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/9f/57/92a497e38161ce40606c27a86759c6b92dd34fcdb33f64171ec559257c02/Werkzeug-0.15.4-py2.py3-none-any.whl (327kB)</span><br><span class="line">    100% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 327kB 3.1MB/s </span><br><span class="line">Collecting gunicorn==19.9.0 (from -r pip_requirements.txt (line 5))</span><br><span class="line">  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/8c/da/b8dd8deb741bff556db53902d4706774c8e1e67265f69528c14c003644e6/gunicorn-19.9.0-py2.py3-none-any.whl (112kB)</span><br><span class="line">    100% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 122kB 4.6MB/s </span><br><span class="line">Collecting python-dateutil==2.2 (from -r pip_requirements.txt (line 6))</span><br><span class="line">  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/75/c5/85d027471fa665f8c8b8eb0b925f9d84b4eee745a257b16de4957de99e81/python-dateutil-2.2.tar.gz (259kB)</span><br><span class="line">    100% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 266kB 5.5MB/s </span><br><span class="line">Collecting requests==2.3.0 (from -r pip_requirements.txt (line 7))</span><br><span class="line">  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/f7/51/7aa1e337862118bee783c0249debd64cb07b8fbdfef154b1e185754b02d5/requests-2.3.0-py2.py3-none-any.whl (452kB)</span><br><span class="line">    100% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 460kB 2.8MB/s </span><br><span class="line">Collecting mysql-python (from -r pip_requirements.txt (line 8))</span><br><span class="line">  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/a5/e9/51b544da85a36a68debe7a7091f068d802fc515a3a202652828c73453cad/MySQL-python-1.2.5.zip (108kB)</span><br><span class="line">    100% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 112kB 9.3MB/s </span><br><span class="line">Collecting python-ldap (from -r pip_requirements.txt (line 9))</span><br><span class="line">  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/9d/e2/deb47064d443344b708ffb5899ea269b201d7c22dcc653ebadcbb44c57d5/python-ldap-3.3.1.tar.gz (379kB)</span><br><span class="line">    100% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 389kB 4.4MB/s </span><br><span class="line">Collecting itsdangerous&gt;=0.24 (from Flask==1.0-&gt;-r pip_requirements.txt (line 1))</span><br><span class="line">  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/76/ae/44b03b253d6fade317f32c24d100b3b35c2239807046a4c953c7b89fa49e/itsdangerous-1.1.0-py2.py3-none-any.whl</span><br><span class="line">Collecting click&gt;=5.1 (from Flask==1.0-&gt;-r pip_requirements.txt (line 1))</span><br><span class="line">  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/d2/3d/fa76db83bf75c4f8d338c2fd15c8d33fdd7ad23a9b5e57eb6c5de26b430e/click-7.1.2-py2.py3-none-any.whl (82kB)</span><br><span class="line">    100% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 92kB 9.6MB/s </span><br><span class="line">Collecting Babel&gt;=1.0 (from Flask-Babel==0.9-&gt;-r pip_requirements.txt (line 2))</span><br><span class="line">  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/aa/96/4ba93c5f40459dc850d25f9ba93f869a623e77aaecc7a9344e19c01942cf/Babel-2.9.1-py2.py3-none-any.whl (8.8MB)</span><br><span class="line">    100% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 8.8MB 138kB/s </span><br><span class="line">Collecting speaklater&gt;=1.2 (from Flask-Babel==0.9-&gt;-r pip_requirements.txt (line 2))</span><br><span class="line">  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/11/92/5ae1effe0ccb8561c034a0111d53c8788660ddb7ed4992f0da1bb5c525e5/speaklater-1.3.tar.gz</span><br><span class="line">Collecting MarkupSafe&gt;=0.23 (from Jinja2&gt;=2.10.1-&gt;-r pip_requirements.txt (line 3))</span><br><span class="line">  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/fb/40/f3adb7cf24a8012813c5edb20329eb22d5d8e2a0ecf73d21d6b85865da11/MarkupSafe-1.1.1-cp27-cp27mu-manylinux1_x86_64.whl</span><br><span class="line">Collecting six (from python-dateutil==2.2-&gt;-r pip_requirements.txt (line 6))</span><br><span class="line">  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/d9/5a/e7c31adbe875f2abbb91bd84cf2dc52d792b5a01506781dbcf25c91daf11/six-1.16.0-py2.py3-none-any.whl</span><br><span class="line">Collecting pyasn1&gt;=0.3.7 (from python-ldap-&gt;-r pip_requirements.txt (line 9))</span><br><span class="line">  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/d1/75/4686d2872bf2fc0b37917cbc8bbf0dd3a5cdb0990799be1b9cbf1e1eb733/pyasn1-0.5.1-py2.py3-none-any.whl (84kB)</span><br><span class="line">    100% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 92kB 9.6MB/s </span><br><span class="line">Collecting pyasn1_modules&gt;=0.1.5 (from python-ldap-&gt;-r pip_requirements.txt (line 9))</span><br><span class="line">  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/cd/8e/bea464350e1b8c6ed0da3a312659cb648804a08af6cacc6435867f74f8bd/pyasn1_modules-0.3.0-py2.py3-none-any.whl (181kB)</span><br><span class="line">    100% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 184kB 4.0MB/s </span><br><span class="line">Collecting pytz&gt;=2015.7 (from Babel&gt;=1.0-&gt;Flask-Babel==0.9-&gt;-r pip_requirements.txt (line 2))</span><br><span class="line">  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/9c/3d/a121f284241f08268b21359bd425f7d4825cffc5ac5cd0e1b3d82ffd2b10/pytz-2024.1-py2.py3-none-any.whl (505kB)</span><br><span class="line">    100% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 512kB 2.5MB/s </span><br><span class="line">Building wheels <span class="keyword">for</span> collected packages: Flask-Babel, python-dateutil, mysql-python, python-ldap, speaklater</span><br><span class="line">  Running setup.py bdist_wheel <span class="keyword">for</span> Flask-Babel ... <span class="keyword">done</span></span><br><span class="line">  Stored <span class="keyword">in</span> directory: /home/work/.cache/pip/wheels/ef/39/53/91220f10958c5110d839b0a9fa7ffaa0adb686067089eda64a</span><br><span class="line">  Running setup.py bdist_wheel <span class="keyword">for</span> python-dateutil ... <span class="keyword">done</span></span><br><span class="line">  Stored <span class="keyword">in</span> directory: /home/work/.cache/pip/wheels/03/2c/f1/9d772ba9eb2d4e0b583817de401202b1158140b8bd115e3f97</span><br><span class="line">  Running setup.py bdist_wheel <span class="keyword">for</span> mysql-python ... <span class="keyword">done</span></span><br><span class="line">  Stored <span class="keyword">in</span> directory: /home/work/.cache/pip/wheels/34/db/d9/39a931d72d59ffb68de9f85fe9ac2f02f47eef3fe142589db4</span><br><span class="line">  Running setup.py bdist_wheel <span class="keyword">for</span> python-ldap ... <span class="keyword">done</span></span><br><span class="line">  Stored <span class="keyword">in</span> directory: /home/work/.cache/pip/wheels/8c/9c/45/c563c2acb81523eae28c9e9a7cf4721b486829199c2278230b</span><br><span class="line">  Running setup.py bdist_wheel <span class="keyword">for</span> speaklater ... <span class="keyword">done</span></span><br><span class="line">  Stored <span class="keyword">in</span> directory: /home/work/.cache/pip/wheels/74/c5/f5/62413af6c8e6dbc120b9d9f8ea93bd179f07d3c993a5e4df22</span><br><span class="line">Successfully built Flask-Babel python-dateutil mysql-python python-ldap speaklater</span><br><span class="line">Installing collected packages: MarkupSafe, Jinja2, itsdangerous, Werkzeug, click, Flask, pytz, Babel, speaklater, Flask-Babel, gunicorn, six, python-dateutil, requests, mysql-python, pyasn1, pyasn1-modules, python-ldap</span><br><span class="line">Successfully installed Babel-2.9.1 Flask-1.0 Flask-Babel-0.9 Jinja2-2.11.3 MarkupSafe-1.1.1 Werkzeug-0.15.4 click-7.1.2 gunicorn-19.9.0 itsdangerous-1.1.0 mysql-python-1.2.5 pyasn1-0.5.1 pyasn1-modules-0.3.0 python-dateutil-2.2 python-ldap-3.3.1 pytz-2024.1 requests-2.3.0 six-1.16.0 speaklater-1.3</span><br><span class="line">You are using pip version 9.0.1, however version 24.2 is available.</span><br><span class="line">You should consider upgrading via the <span class="string">&#x27;pip install --upgrade pip&#x27;</span> <span class="built_in">command</span>.</span><br><span class="line"></span><br><span class="line">(<span class="built_in">env</span>) [root@open-falcon-agent dashboard-master]# wget --no-check-certificate https://bootstrap.pypa.io/ez_setup.py</span><br><span class="line">--2024-08-04 01:42:54--  https://bootstrap.pypa.io/ez_setup.py</span><br><span class="line">Resolving bootstrap.pypa.io (bootstrap.pypa.io)... 146.75.112.175, 2a04:4e42:8c::175</span><br><span class="line">Connecting to bootstrap.pypa.io (bootstrap.pypa.io)|146.75.112.175|:443... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 12537 (12K) [text/x-python]</span><br><span class="line">Saving to: â€˜ez_setup.pyâ€™</span><br><span class="line"></span><br><span class="line">100%[=============================================================================&gt;] 12,537      --.-K/s   <span class="keyword">in</span> 0.03s   </span><br><span class="line"></span><br><span class="line">2024-08-04 01:42:57 (422 KB/s) - â€˜ez_setup.pyâ€™ saved [12537/12537]</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## å…ˆå®‰è£…ez_setup.py,å†å®‰è£…pip</span></span><br><span class="line"></span><br><span class="line">(<span class="built_in">env</span>) [root@open-falcon-agent dashboard-master]# wget --no-check-certificate https://bootstrap.pypa.io/ez_setup.py</span><br><span class="line">--2024-08-04 01:42:54--  https://bootstrap.pypa.io/ez_setup.py</span><br><span class="line">Resolving bootstrap.pypa.io (bootstrap.pypa.io)... 146.75.112.175, 2a04:4e42:8c::175</span><br><span class="line">Connecting to bootstrap.pypa.io (bootstrap.pypa.io)|146.75.112.175|:443... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 12537 (12K) [text/x-python]</span><br><span class="line">Saving to: â€˜ez_setup.pyâ€™</span><br><span class="line"></span><br><span class="line">100%[=============================================================================&gt;] 12,537      --.-K/s   <span class="keyword">in</span> 0.03s   </span><br><span class="line"></span><br><span class="line">2024-08-04 01:42:57 (422 KB/s) - â€˜ez_setup.pyâ€™ saved [12537/12537]</span><br><span class="line"></span><br><span class="line">(<span class="built_in">env</span>) [root@open-falcon-agent dashboard-master]# python ez_setup.py --insecure</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## ä¸‹è½½pip</span></span><br><span class="line"></span><br><span class="line">(<span class="built_in">env</span>) [root@open-falcon-agent dashboard-master]# wget https://pypi.python.org/packages/11/b6/abcb525026a4be042b486df43905d6893fb04f05aac21c32c638e939e447/pip-9.0.1.tar.gz#md5=35f01da33009719497f01a4ba69d63c905d6893fb04f05aac21c32c638e939e447/pip-9.0.1.tar.gz</span><br><span class="line"><span class="comment">#md5=35f01da33009719497f01a4ba69d63c9</span></span><br><span class="line">--2024-08-04 01:43:34--  https://pypi.python.org/packages/11/b6/abcb525026a4be042b486df43905d6893fb04f05aac21c32c638e939e447/pip-9.0.1.tar.gz</span><br><span class="line">Resolving pypi.python.org (pypi.python.org)... 151.101.76.223, 2a04:4e42:8c::223</span><br><span class="line">Connecting to pypi.python.org (pypi.python.org)|151.101.76.223|:443... connected.</span><br><span class="line">HTTP request sent, awaiting response... 301 Redirect to Primary Domain</span><br><span class="line">Location: https://pypi.org/packages/11/b6/abcb525026a4be042b486df43905d6893fb04f05aac21c32c638e939e447/pip-9.0.1.tar.gz [following]</span><br><span class="line">--2024-08-04 01:43:34--  https://pypi.org/packages/11/b6/abcb525026a4be042b486df43905d6893fb04f05aac21c32c638e939e447/pip-9.0.1.tar.gz</span><br><span class="line">Resolving pypi.org (pypi.org)... 151.101.0.223, 151.101.64.223, 151.101.192.223, ...</span><br><span class="line">Connecting to pypi.org (pypi.org)|151.101.0.223|:443... connected.</span><br><span class="line">HTTP request sent, awaiting response... 301 Moved Permanently</span><br><span class="line">Location: https://files.pythonhosted.org/packages/11/b6/abcb525026a4be042b486df43905d6893fb04f05aac21c32c638e939e447/pip-9.0.1.tar.gz [following]</span><br><span class="line">--2024-08-04 01:43:35--  https://files.pythonhosted.org/packages/11/b6/abcb525026a4be042b486df43905d6893fb04f05aac21c32c638e939e447/pip-9.0.1.tar.gz</span><br><span class="line">Resolving files.pythonhosted.org (files.pythonhosted.org)... 146.75.112.223, 2a04:4e42:8c::223</span><br><span class="line">Connecting to files.pythonhosted.org (files.pythonhosted.org)|146.75.112.223|:443... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 1197370 (1.1M) [binary/octet-stream]</span><br><span class="line">Saving to: â€˜pip-9.0.1.tar.gzâ€™</span><br><span class="line"></span><br><span class="line">100%[=============================================================================&gt;] 1,197,370    836KB/s   <span class="keyword">in</span> 1.4s  </span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## è§£å‹å¹¶å®‰è£…</span></span><br><span class="line"></span><br><span class="line">(<span class="built_in">env</span>) [root@open-falcon-agent dashboard-master]# tar xf pip-9.0.1.tar.gz </span><br><span class="line">(<span class="built_in">env</span>) [root@open-falcon-agent dashboard-master]# <span class="built_in">cd</span> pip-9.0.1</span><br><span class="line">(<span class="built_in">env</span>) [root@open-falcon-agent pip-9.0.1]# python setup.py install</span><br><span class="line">(<span class="built_in">env</span>) [root@open-falcon-agent pip-9.0.1]# <span class="built_in">cd</span> ..</span><br><span class="line">(<span class="built_in">env</span>) [root@open-falcon-agent dashboard-master]# <span class="built_in">which</span> pip</span><br><span class="line">/home/work/open-falcon/dashboard-master/env/bin/pip</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#é…ç½®pipç¯å¢ƒå˜é‡</span></span><br><span class="line">(<span class="built_in">env</span>) [root@open-falcon-agent dashboard-master]# vim /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="comment">#pip path </span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="string">&quot;/home/work/open-falcon/dashboard-master/env/bin/pip/bin:<span class="variable">$PATH</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä½¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆsource /etc/profile</span></span><br><span class="line">(<span class="built_in">env</span>) [root@open-falcon-agent dashboard-master]# <span class="built_in">source</span> /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="comment">#æµ‹è¯•æ˜¯å¦å¯ç”¨</span></span><br><span class="line">(<span class="built_in">env</span>) [root@open-falcon-agent dashboard-master]# pip</span><br><span class="line">Usage:   </span><br><span class="line">  pip &lt;<span class="built_in">command</span>&gt; [options]</span><br><span class="line"></span><br><span class="line">Commands:</span><br><span class="line">  install                     Install packages.</span><br><span class="line">  download                    Download packages.</span><br><span class="line">  uninstall                   Uninstall packages.</span><br><span class="line">  freeze                      Output installed packages <span class="keyword">in</span> requirements format.</span><br><span class="line">  list                        List installed packages.</span><br><span class="line">  show                        Show information about installed packages.</span><br><span class="line">  check                       Verify installed packages have compatible dependencies.</span><br><span class="line">  search                      Search PyPI <span class="keyword">for</span> packages.</span><br><span class="line">  wheel                       Build wheels from your requirements.</span><br><span class="line">  <span class="built_in">hash</span>                        Compute hashes of package archives.</span><br><span class="line">  completion                  A helper <span class="built_in">command</span> used <span class="keyword">for</span> <span class="built_in">command</span> completion.</span><br><span class="line">  <span class="built_in">help</span>                        Show <span class="built_in">help</span> <span class="keyword">for</span> commands.</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŸ¥çœ‹éœ€è¦å®‰è£…çš„è½¯ä»¶,å¹¶å®‰è£…</span></span><br><span class="line"></span><br><span class="line">(<span class="built_in">env</span>) [root@open-falcon-agent dashboard-master]# <span class="built_in">cat</span> pip_requirements.txt </span><br><span class="line">Flask==1.0</span><br><span class="line">Flask-Babel==0.9</span><br><span class="line">Jinja2&gt;=2.10.1</span><br><span class="line">Werkzeug==0.15.4</span><br><span class="line">gunicorn==19.9.0</span><br><span class="line">python-dateutil==2.2</span><br><span class="line">requests==2.3.0</span><br><span class="line">mysql-python</span><br><span class="line">python-ldap</span><br><span class="line">(<span class="built_in">env</span>) [root@open-falcon-agent dashboard-master]# <span class="built_in">cd</span> /home/work/open-falcon/dashboard-master</span><br><span class="line">(<span class="built_in">env</span>) [root@open-falcon-agent dashboard-master]# pip install -r pip_requirements.txt</span><br><span class="line">Requirement already satisfied: Flask==1.0 <span class="keyword">in</span> ./env/lib/python2.7/site-packages (from -r pip_requirements.txt (line 1))</span><br><span class="line">Requirement already satisfied: Flask-Babel==0.9 <span class="keyword">in</span> ./env/lib/python2.7/site-packages (from -r pip_requirements.txt (line 2))</span><br><span class="line">Requirement already satisfied: Jinja2&gt;=2.10.1 <span class="keyword">in</span> ./env/lib/python2.7/site-packages (from -r pip_requirements.txt (line 3))</span><br><span class="line">Requirement already satisfied: Werkzeug==0.15.4 <span class="keyword">in</span> ./env/lib/python2.7/site-packages (from -r pip_requirements.txt (line 4))</span><br><span class="line">Requirement already satisfied: gunicorn==19.9.0 <span class="keyword">in</span> ./env/lib/python2.7/site-packages (from -r pip_requirements.txt (line 5))</span><br><span class="line">Requirement already satisfied: python-dateutil==2.2 <span class="keyword">in</span> ./env/lib/python2.7/site-packages (from -r pip_requirements.txt (line 6))</span><br><span class="line">Requirement already satisfied: requests==2.3.0 <span class="keyword">in</span> ./env/lib/python2.7/site-packages (from -r pip_requirements.txt (line 7))</span><br><span class="line">Requirement already satisfied: mysql-python <span class="keyword">in</span> ./env/lib/python2.7/site-packages (from -r pip_requirements.txt (line 8))</span><br><span class="line">Requirement already satisfied: python-ldap <span class="keyword">in</span> ./env/lib/python2.7/site-packages (from -r pip_requirements.txt (line 9))</span><br><span class="line">Requirement already satisfied: itsdangerous&gt;=0.24 <span class="keyword">in</span> ./env/lib/python2.7/site-packages (from Flask==1.0-&gt;-r pip_requirements.txt (line 1))</span><br><span class="line">Requirement already satisfied: click&gt;=5.1 <span class="keyword">in</span> ./env/lib/python2.7/site-packages (from Flask==1.0-&gt;-r pip_requirements.txt (line 1))</span><br><span class="line">Requirement already satisfied: speaklater&gt;=1.2 <span class="keyword">in</span> ./env/lib/python2.7/site-packages (from Flask-Babel==0.9-&gt;-r pip_requirements.txt (line 2))</span><br><span class="line">Requirement already satisfied: Babel&gt;=1.0 <span class="keyword">in</span> ./env/lib/python2.7/site-packages (from Flask-Babel==0.9-&gt;-r pip_requirements.txt (line 2))</span><br><span class="line">Requirement already satisfied: MarkupSafe&gt;=0.23 <span class="keyword">in</span> ./env/lib/python2.7/site-packages (from Jinja2&gt;=2.10.1-&gt;-r pip_requirements.txt (line 3))</span><br><span class="line">Requirement already satisfied: six <span class="keyword">in</span> ./env/lib/python2.7/site-packages (from python-dateutil==2.2-&gt;-r pip_requirements.txt (line 6))</span><br><span class="line">Requirement already satisfied: pyasn1-modules&gt;=0.1.5 <span class="keyword">in</span> ./env/lib/python2.7/site-packages (from python-ldap-&gt;-r pip_requirements.txt (line 9))</span><br><span class="line">Requirement already satisfied: pyasn1&gt;=0.3.7 <span class="keyword">in</span> ./env/lib/python2.7/site-packages (from python-ldap-&gt;-r pip_requirements.txt (line 9))</span><br><span class="line">Requirement already satisfied: pytz&gt;=2015.7 <span class="keyword">in</span> ./env/lib/python2.7/site-packages (from Babel&gt;=1.0-&gt;Flask-Babel==0.9-&gt;-r pip_requirements.txt (line 2))</span><br><span class="line">You are using pip version 9.0.1, however version 24.2 is available.</span><br><span class="line">You should consider upgrading via the <span class="string">&#x27;pip install --upgrade pip&#x27;</span> <span class="built_in">command</span>.</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## å…ˆå¤‡ä»½ï¼Œåä¿®æ”¹é…ç½®æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">(<span class="built_in">env</span>) [root@open-falcon-agent dashboard-master]# ll</span><br><span class="line">total 1932</span><br><span class="line">-rw-r--r--  1 root root       97 Jun 22  2020 babel.cfg</span><br><span class="line">-rwxr-xr-x  1 root root     2653 Jun 22  2020 control</span><br><span class="line">-rw-r--r--  1 root root      510 Jun 22  2020 Dockerfile</span><br><span class="line">-rw-r--r--  1 root root      319 Jun 22  2020 entrypoint.sh</span><br><span class="line">drwxr-xr-x  5 root root       82 Aug  4 01:38 <span class="built_in">env</span></span><br><span class="line">-rw-r--r--  1 root root    12537 Jul 29 06:47 ez_setup.py</span><br><span class="line">-rw-r--r--  1 root root      170 Jun 22  2020 gunicorn.conf</span><br><span class="line">-rw-r--r--  1 root root     1235 Jun 22  2020 i18n.md</span><br><span class="line">-rw-r--r--  1 root root    11358 Jun 22  2020 LICENSE</span><br><span class="line">-rw-r--r--  1 root root      462 Jun 22  2020 NOTICE</span><br><span class="line">drwxr-xr-x  7  501 games     217 Aug  4 01:44 pip-9.0.1</span><br><span class="line">-rw-r--r--  1 root root  1197370 Apr 10  2023 pip-9.0.1.tar.gz</span><br><span class="line">-rw-r--r--  1 root root      139 Jun 22  2020 pip_requirements.txt</span><br><span class="line">-rw-r--r--  1 root root     5296 Jun 22  2020 README.md</span><br><span class="line">drwxr-xr-x 10 root root      194 Jun 22  2020 rrd</span><br><span class="line">drwxr-xr-x  2 root root      101 Jun 22  2020 screenshots</span><br><span class="line">drwxr-xr-x  2 root root       65 Jun 22  2020 scripts</span><br><span class="line">-rw-r--r--  1 root root   702770 Aug  4 01:43 setuptools-33.1.1.zip</span><br><span class="line">-rwxr-xr-x  1 root root      979 Jun 22  2020 wsgi.py</span><br><span class="line">(<span class="built_in">env</span>) [root@open-falcon-agent dashboard-master]# <span class="built_in">cd</span> rrd/</span><br><span class="line">(<span class="built_in">env</span>) [root@open-falcon-agent rrd]# ll</span><br><span class="line">total 16</span><br><span class="line">-rwxr-xr-x  1 root root 2764 Jun 22  2020 config.py</span><br><span class="line">-rw-r--r--  1 root root  737 Jun 22  2020 consts.py</span><br><span class="line">drwxr-xr-x  2 root root   25 Jun 22  2020 corelib</span><br><span class="line">-rw-r--r--  1 root root 1539 Jun 22  2020 __init__.py</span><br><span class="line">drwxr-xr-x  3 root root  156 Jun 22  2020 model</span><br><span class="line">drwxr-xr-x  2 root root   49 Jun 22  2020 service</span><br><span class="line">drwxr-xr-x 13 root root  231 Jun 22  2020 static</span><br><span class="line">-rw-r--r--  1 root root 3911 Jun 22  2020 store.py</span><br><span class="line">drwxr-xr-x  8 root root  157 Jun 22  2020 templates</span><br><span class="line">drwxr-xr-x  4 root root   26 Jun 22  2020 translations</span><br><span class="line">drwxr-xr-x  2 root root  132 Jun 22  2020 utils</span><br><span class="line">drwxr-xr-x  7 root root  124 Jun 22  2020 view</span><br><span class="line"></span><br><span class="line">(<span class="built_in">env</span>) [root@open-falcon-agent rrd]# <span class="built_in">cp</span> config.py config.py.bak</span><br><span class="line">(<span class="built_in">env</span>) [root@open-falcon-agent rrd]# vim config.py</span><br><span class="line">(<span class="built_in">env</span>) [root@open-falcon-agent rrd]# <span class="built_in">cat</span> config.py</span><br><span class="line"><span class="comment">#-*-coding:utf-8 -*-</span></span><br><span class="line"><span class="comment"># Copyright 2017 Xiaomi, Inc.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></span><br><span class="line"><span class="comment"># you may not use this file except in compliance with the License.</span></span><br><span class="line"><span class="comment"># You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#     http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Unless required by applicable law or agreed to in writing, software</span></span><br><span class="line"><span class="comment"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></span><br><span class="line"><span class="comment"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class="line"><span class="comment"># See the License for the specific language governing permissions and</span></span><br><span class="line"><span class="comment"># limitations under the License.</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># app config</span></span><br><span class="line">import os</span><br><span class="line">LOG_LEVEL = os.environ.get(<span class="string">&quot;LOG_LEVEL&quot;</span>,<span class="string">&#x27;DEBUG&#x27;</span>)</span><br><span class="line">SECRET_KEY = os.environ.get(<span class="string">&quot;SECRET_KEY&quot;</span>,<span class="string">&quot;secret-key&quot;</span>)</span><br><span class="line">PERMANENT_SESSION_LIFETIME = os.environ.get(<span class="string">&quot;PERMANENT_SESSION_LIFETIME&quot;</span>,3600 * 24 * 30)</span><br><span class="line">SITE_COOKIE = os.environ.get(<span class="string">&quot;SITE_COOKIE&quot;</span>,<span class="string">&quot;open-falcon-ck&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Falcon+ API</span></span><br><span class="line">API_ADDR = os.environ.get(<span class="string">&quot;API_ADDR&quot;</span>,<span class="string">&quot;http://172.16.1.200:18080/api/v1&quot;</span>)</span><br><span class="line">API_USER = os.environ.get(<span class="string">&quot;API_USER&quot;</span>,<span class="string">&quot;admin&quot;</span>)</span><br><span class="line">API_PASS = os.environ.get(<span class="string">&quot;API_PASS&quot;</span>,<span class="string">&quot;password&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># portal database</span></span><br><span class="line"><span class="comment"># TODO: read from api instead of db</span></span><br><span class="line">PORTAL_DB_HOST = os.environ.get(<span class="string">&quot;PORTAL_DB_HOST&quot;</span>,<span class="string">&quot;172.16.1.200&quot;</span>)</span><br><span class="line">PORTAL_DB_PORT = int(os.environ.get(<span class="string">&quot;PORTAL_DB_PORT&quot;</span>,3306))</span><br><span class="line">PORTAL_DB_USER = os.environ.get(<span class="string">&quot;PORTAL_DB_USER&quot;</span>,<span class="string">&quot;root&quot;</span>)</span><br><span class="line">PORTAL_DB_PASS = os.environ.get(<span class="string">&quot;PORTAL_DB_PASS&quot;</span>,<span class="string">&quot;password&quot;</span>)</span><br><span class="line">PORTAL_DB_NAME = os.environ.get(<span class="string">&quot;PORTAL_DB_NAME&quot;</span>,<span class="string">&quot;falcon_portal&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># alarm database</span></span><br><span class="line"><span class="comment"># TODO: read from api instead of db</span></span><br><span class="line">ALARM_DB_HOST = os.environ.get(<span class="string">&quot;ALARM_DB_HOST&quot;</span>,<span class="string">&quot;172.16.1.200&quot;</span>)</span><br><span class="line">ALARM_DB_PORT = int(os.environ.get(<span class="string">&quot;ALARM_DB_PORT&quot;</span>,3306))</span><br><span class="line">ALARM_DB_USER = os.environ.get(<span class="string">&quot;ALARM_DB_USER&quot;</span>,<span class="string">&quot;root&quot;</span>)</span><br><span class="line">ALARM_DB_PASS = os.environ.get(<span class="string">&quot;ALARM_DB_PASS&quot;</span>,<span class="string">&quot;password&quot;</span>)</span><br><span class="line">ALARM_DB_NAME = os.environ.get(<span class="string">&quot;ALARM_DB_NAME&quot;</span>,<span class="string">&quot;alarms&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ldap config</span></span><br><span class="line">LDAP_ENABLED = os.environ.get(<span class="string">&quot;LDAP_ENABLED&quot;</span>,False)</span><br><span class="line">LDAP_SERVER = os.environ.get(<span class="string">&quot;LDAP_SERVER&quot;</span>,<span class="string">&quot;ldap.forumsys.com:389&quot;</span>)</span><br><span class="line">LDAP_BASE_DN = os.environ.get(<span class="string">&quot;LDAP_BASE_DN&quot;</span>,<span class="string">&quot;dc=example,dc=com&quot;</span>)</span><br><span class="line">LDAP_BINDDN = os.environ.get(<span class="string">&quot;LDAP_BINDDN&quot;</span>,<span class="string">&quot;cn=manager,dc=example,dc=org&quot;</span>)</span><br><span class="line">LDAP_BIND_PASS = os.environ.get(<span class="string">&quot;LDAP_BIND_PASS&quot;</span>,<span class="string">&quot;password&quot;</span>)</span><br><span class="line">LDAP_SEARCH_FMT = os.environ.get(<span class="string">&quot;LDAP_SEARCH_FMT&quot;</span>,<span class="string">&quot;uid=%s&quot;</span>)</span><br><span class="line">LDAP_ATTRS = [<span class="string">&quot;cn&quot;</span>,<span class="string">&quot;mail&quot;</span>,<span class="string">&quot;telephoneNumber&quot;</span>]</span><br><span class="line">LDAP_TLS_START_TLS = False</span><br><span class="line">LDAP_TLS_CACERTDIR = <span class="string">&quot;&quot;</span></span><br><span class="line">LDAP_TLS_CACERTFILE = <span class="string">&quot;/etc/openldap/certs/ca.crt&quot;</span></span><br><span class="line">LDAP_TLS_CERTFILE = <span class="string">&quot;&quot;</span></span><br><span class="line">LDAP_TLS_KEYFILE = <span class="string">&quot;&quot;</span></span><br><span class="line">LDAP_TLS_REQUIRE_CERT = True</span><br><span class="line">LDAP_TLS_CIPHER_SUITE = <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># i18n</span></span><br><span class="line">BABEL_DEFAULT_LOCALE   = <span class="string">&#x27;zh_CN&#x27;</span></span><br><span class="line">BABEL_DEFAULT_TIMEZONE = <span class="string">&#x27;Asia/Shanghai&#x27;</span></span><br><span class="line"><span class="comment"># available translations</span></span><br><span class="line">LANGUAGES   = &#123;</span><br><span class="line">    <span class="string">&#x27;en&#x27;</span>:  <span class="string">&#x27;English&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;zh_CN&#x27;</span>:  <span class="string">&#x27;Chinese-Simplified&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># portal site config</span></span><br><span class="line">MAINTAINERS = [<span class="string">&#x27;root&#x27;</span>]</span><br><span class="line">CONTACT = <span class="string">&#x27;root@open-falcon.com&#x27;</span></span><br><span class="line"></span><br><span class="line">DEBUG = True</span><br><span class="line"></span><br><span class="line">try:</span><br><span class="line">    from rrd.local_config import *</span><br><span class="line">except:</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;[warning] no local config file&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## å¯åŠ¨æœåŠ¡</span></span><br><span class="line"></span><br><span class="line">(<span class="built_in">env</span>) [root@open-falcon-agent rrd]# <span class="built_in">cd</span> ..</span><br><span class="line">(<span class="built_in">env</span>) [root@open-falcon-agent dashboard-master]# ./control start</span><br><span class="line">falcon-dashboard started..., pid=25575</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## æŸ¥çœ‹æ—¥å¿—å¹¶é€€å‡ºç¯å¢ƒ</span></span><br><span class="line"></span><br><span class="line">(<span class="built_in">env</span>) [root@open-falcon-agent dashboard-master]# ./control <span class="built_in">tail</span></span><br><span class="line">[2024-08-04 02:03:48 +0000] [25575] [INFO] Starting gunicorn 19.9.0</span><br><span class="line">[2024-08-04 02:03:48 +0000] [25575] [INFO] Listening at: http://0.0.0.0:8081 (25575)</span><br><span class="line">[2024-08-04 02:03:48 +0000] [25575] [INFO] Using worker: <span class="built_in">sync</span></span><br><span class="line">[2024-08-04 02:03:48 +0000] [25580] [INFO] Booting worker with pid: 25580</span><br><span class="line">[2024-08-04 02:03:48 +0000] [25585] [INFO] Booting worker with pid: 25585</span><br><span class="line">[2024-08-04 02:03:48 +0000] [25590] [INFO] Booting worker with pid: 25590</span><br><span class="line">[2024-08-04 02:03:48 +0000] [25591] [INFO] Booting worker with pid: 25591</span><br><span class="line">^C</span><br><span class="line">(<span class="built_in">env</span>) [root@open-falcon-agent dashboard-master]# deactivate</span><br><span class="line">[root@open-falcon-agent dashboard-master]# netstat -lntup</span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    </span><br><span class="line">tcp        0      0 0.0.0.0:8081            0.0.0.0:*               LISTEN      25575/python2       </span><br><span class="line">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      8951/sshd           </span><br><span class="line">tcp        0      0 127.0.0.1:25            0.0.0.0:*               LISTEN      9216/master         </span><br><span class="line">tcp6       0      0 :::22                   :::*                    LISTEN      8951/sshd           </span><br><span class="line">tcp6       0      0 ::1:25                  :::*                    LISTEN      9216/master</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è®¿é—®ç½‘ç«™ 10.0.0.201ï¼š8081</p><p><img src="D:%5CTypora%5Cdevops%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7%5C10.open-falcon.assets%5CQQ_1722708400816.png" alt="img"></p><p><img src="D:%5CTypora%5Cdevops%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7%5C10.open-falcon.assets%5CQQ_1722708830296.png" alt="img"></p><p><img src="D:%5CTypora%5Cdevops%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7%5C10.open-falcon.assets%5CQQ_1722708967167.png" alt="img"></p>]]></content>
      
      
      <categories>
          
          <category> ç›‘æ§ </category>
          
          <category> falcon </category>
          
      </categories>
      
      
        <tags>
            
            <tag> zabbix </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>zabbixåˆ†å¸ƒå¼ç›‘æ§</title>
      <link href="/posts/715aec45.html"/>
      <url>/posts/715aec45.html</url>
      
        <content type="html"><![CDATA[<p><img src="https://cos.lukme.top/Pic/QQ_1723279401909.png" alt="QQ_1723279401909"></p><p><strong>åº”ç”¨åœºæ™¯</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.ä¸€å°Serverç®¡ç†çš„agentè¿‡å¤š</span><br><span class="line">2.éœ€è¦ç®¡ç†çš„agentåœ¨ä¸åŒçš„å›½å®¶æˆ–è€…åœ°åŒºï¼Œæœ‰ç½‘ç»œæ³¢åŠ¨</span><br><span class="line"><span class="comment"># é‡æ–°åŠ è½½ç¼“å­˜</span></span><br><span class="line">[root@zabbix5-server ~]# zabbix_server -R config_cache_reload</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="zabbix-proxyç‰¹å¾">zabbix-proxyç‰¹å¾</h3><table><thead><tr><th>proxy</th><th></th></tr></thead><tbody><tr><td>è½»é‡çº§ï¼ˆLightweightï¼‰</td><td>yes</td></tr><tr><td>å›¾å½¢ç•Œé¢ï¼ˆGUIï¼‰</td><td>no</td></tr><tr><td>ç‹¬ç«‹å·¥ä½œï¼ˆWorks independentlyï¼‰</td><td>yes</td></tr><tr><td>æ˜“äºç»´æŠ¤ï¼ˆEasy maintenanceï¼‰</td><td>yes</td></tr><tr><td>è‡ªåŠ¨ç”Ÿæˆæ•°æ®åº“ï¼ˆAutomatic DB creationï¼‰1</td><td>yes</td></tr><tr><td>æœ¬åœ°ç®¡ç†ï¼ˆLocal administrationï¼‰</td><td>no</td></tr><tr><td>å‡†å¤‡åµŒå…¥å¼ç¡¬ä»¶ ï¼ˆReady for embedded hardwareï¼‰</td><td>yes</td></tr><tr><td>å•å‘TCPè¿æ¥ï¼ˆOne way TCP connectionsï¼‰</td><td>yes</td></tr><tr><td>é›†ä¸­é…ç½®ï¼ˆCentralised configurationï¼‰</td><td>yes</td></tr><tr><td>ç”Ÿæˆé€šçŸ¥ï¼ˆGenerates notificationsï¼‰</td><td>no</td></tr></tbody></table><blockquote><p>1.zabbix proxy æ•°æ®åº“å¿…é¡»å’Œ server åˆ†å¼€,å¦åˆ™æ•°æ®ä¼šè¢«ç ´åã€‚</p><p>2.ä»Zabbix serveræ•°æ®åº“ç›´æ¥æ›´æ–°æœ€æ–°é…ç½®çš„proxyå¯èƒ½ä¼šæ¯”Zabbix serveræ–°ï¼Œè€ŒZabbix serverçš„ é…ç½®ç”±äºCacheUpdateFrequency çš„åŸå› è€Œæ— æ³•å¿«é€Ÿæ›´æ–°ã€‚å› æ­¤ï¼Œproxyæ”¶é›†å‘é€Zabbix serveræ•° æ®å¯èƒ½ä¼šè¢«å¿½ç•¥ã€‚</p></blockquote><p>zabbix proxy æ˜¯ä¸€ä¸ªæ•°æ®æ”¶é›†å™¨,å®ƒä¸è®¡ç®—è§¦å‘å™¨ã€ä¸å¤„ç†äº‹ä»¶ã€ä¸å‘é€æŠ¥è­¦ã€‚</p><p>æœ‰å…³proxyåŠŸèƒ½çš„æ¦‚è¿°ï¼Œ å¦‚ä¸‹è¡¨ï¼š</p><p><img src="https://cos.lukme.top/Pic/QQ_1723280852820.png" alt="QQ_1723280852820"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.æ— æ³•è®¾ç½®è§¦å‘å™¨</span><br><span class="line">2.æ— æ³•å¤„ç†äº‹ä»¶</span><br><span class="line">3.æ— æ³•å‘é€å‘Šè­¦</span><br><span class="line">4.æ— æ³•ä½¿ç”¨è‡ªæ„ˆæ¨¡å¼</span><br></pre></td></tr></table></figure><p><strong>ä»£ç†åœºæ™¯</strong></p><p><img src="https://cos.lukme.top/Pic/QQ_1723280897596.png" alt="QQ_1723280897596"></p><h3 id="éƒ¨ç½²zabbix-proxy">éƒ¨ç½²zabbix-proxy</h3><table><thead><tr><th>ä¸»æœºå</th><th>WanIP</th><th>LanIP</th><th>è§’è‰²</th><th>åº”ç”¨</th></tr></thead><tbody><tr><td>Zabbix5-server</td><td>10.0.0.71</td><td>172.16.1.71</td><td>æœåŠ¡ç«¯</td><td>Zabbix-serverã€ Zabbix-agent</td></tr><tr><td>web01</td><td>10.0.0.7</td><td>172.16.1.7</td><td>zabbix5å®¢æˆ·ç«¯</td><td>Zabbix-agent</td></tr><tr><td>web02</td><td>10.0.0.8</td><td>172.16.1.8</td><td>zabbix5å®¢æˆ·ç«¯</td><td>Zabbix-agent</td></tr><tr><td></td><td>10.0.0.7,10.0.0.8</td><td>172.16.1.7,172.16.1.8</td><td>Zabbixå®¢æˆ·ç«¯ æ”¶é›† Javaç›‘æ§æ•°æ®</td><td>Zabbix-java-gateway</td></tr><tr><td>zabbix_proxy73</td><td>10.0.0.73</td><td>172.16.1.73</td><td>ä»£ç†web01</td><td>zabbix-proxy</td></tr><tr><td>zabbix_proxy74</td><td>10.0.0.74</td><td>172.16.1.74</td><td>ä»£ç†web02</td><td>zabbix-proxy</td></tr></tbody></table><p>ä¸‹è½½é“¾æ¥ï¼š<a href="https://mirrors.tuna.tsinghua.edu.cn/zabbix/zabbix/5.0/rhel/7/x86_64/">https://mirrors.tuna.tsinghua.edu.cn/zabbix/zabbix/5.0/rhel/7/x86_64/</a></p><p><strong>é…ç½®proxy73å’Œweb01</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.å®‰è£…zabbix-proxy</span></span><br><span class="line">[root@zabbix-proxy ~]# yum install -y https://mirrors.tuna.tsinghua.edu.cn/zabbix/zabbix/5.0/rhel/7/x86_64/zabbix-proxy-mysql-5.0.42-1.el7.x86_64.rpm</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.è¿æ¥æ•°æ®åº“   (zabbix -71æ‰§è¡Œ  æœ‰æ•°æ®åº“)</span></span><br><span class="line">[root@zabbix5-server ~]# mysql</span><br><span class="line">create database zabbix_proxy73 charset utf8;</span><br><span class="line">create database zabbix_proxy74 charset utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">#3.å¯¼å…¥æ•°æ®</span></span><br><span class="line">zcat /usr/share/doc/zabbix-proxy-mysql-5.0.42//schema.sql.gz |mysql -uzabbix -p123 -h172.16.1.71 zabbix_proxy73</span><br><span class="line"></span><br><span class="line">zcat /usr/share/doc/zabbix-proxy-mysql-5.0.42//schema.sql.gz |mysql -uzabbix -p123 -h172.16.1.71 zabbix_proxy74</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.ä¿®æ”¹zabbix-proxyé…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@zabbix-proxy ~]# vim /etc/zabbix/zabbix_proxy.conf</span><br><span class="line">Server=172.16.1.71</span><br><span class="line">Hostname=zabbix_proxy73</span><br><span class="line">DBHost=172.16.1.71</span><br><span class="line">DBName=zabbix_proxy73</span><br><span class="line">DBUser=zabbix</span><br><span class="line">DBPassword=123</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.é…ç½®agentæŒ‡å‘proxy</span></span><br><span class="line">[root@web01 ~]# vim /etc/zabbix/zabbix_agentd.conf</span><br><span class="line">Server=172.16.1.73</span><br><span class="line">ServerActive=172.16.1.73</span><br><span class="line">Hostname=web01</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.é‡å¯agent</span></span><br><span class="line">[root@web01 ~]# systemctl restart zabbix-agent</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#é‡å¯ä»£ç†</span></span><br><span class="line"><span class="comment">#7.æœ€åé‡å¯zabbix-proxy  ï¼ˆå¦‚æœæœ€åæ•°æ®æ²¡æœ‰æ˜¾ç¤ºï¼Œé‡å¯zabbix-proxyï¼‰</span></span><br><span class="line">systemctl start zabbix-proxy</span><br><span class="line">systemctl <span class="built_in">enable</span> zabbix-proxy</span><br><span class="line"></span><br><span class="line"><span class="comment">#zabbix-proxyä»£ç†è¦åœ¨  zabbixæœåŠ¡ç«¯ï¼Œå®¢æˆ·ç«¯é‡å¯ä¹‹å   æœ€åé‡å¯</span></span><br></pre></td></tr></table></figure><p><strong>webç•Œé¢æ“ä½œ</strong></p><p><strong>åˆ›å»ºä»£ç†</strong></p><p><img src="https://cos.lukme.top/Pic/QQ_1723338047556.png" alt="QQ_1723338047556"></p><p><img src="https://cos.lukme.top/Pic/QQ_1723338284210.png" alt="QQ_1723338284210"></p><p><strong>åœç”¨è‡ªåŠ¨æ³¨å†ŒåŠ¨ä½œï¼Œæ²¡æœ‰åˆ™å¿½ç•¥</strong></p><p><img src="https://cos.lukme.top/Pic/QQ_1723338342003.png" alt="QQ_1723338342003"></p><p><img src="https://cos.lukme.top/Pic/QQ_1723338415805.png" alt="QQ_1723338415805"></p><p><img src="https://cos.lukme.top/Pic/QQ_1723338495182.png" alt="QQ_1723338495182"></p><p><strong>å›åˆ°ä¸»æœºï¼Œåˆ·æ–°</strong></p><p><img src="https://cos.lukme.top/Pic/QQ_1723338515005.png" alt="QQ_1723338515005"></p><p><strong>æŸ¥çœ‹ç›‘æ§æ¿é‡Œæ•°æ®</strong></p><p><img src="https://cos.lukme.top/Pic/QQ_1723338699914.png" alt="QQ_1723338699914"></p><h3 id="è°ƒå–zabbixçš„API">è°ƒå–zabbixçš„API</h3><p>zabbixå®˜æ–¹ï¼š<a href="https://www.zabbix.com/documentation/5.0/zh/manual/api">API (zabbix.com)</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å‡†å¤‡Postmanï¼Œæ³¨å†Œç™»å½•åç”¨äºè°ƒå–zabbixæ¥å£ä½¿ç”¨</span><br></pre></td></tr></table></figure><p><strong>ä½¿ç”¨curlè°ƒå–æ¥å£</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST http<span class="punctuation">:</span><span class="comment">//10.0.0.71/api_jsonrpc.php -H &#x27;Content-Type: application/json-rpc&#x27; -d &#x27;</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;jsonrpc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;method&quot;</span><span class="punctuation">:</span> <span class="string">&quot;user.login&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;params&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;user&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Admin&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;zabbix&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;auth&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span></span><br><span class="line"><span class="punctuation">&#125;</span>&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#è¿”å›å€¼ï¼Œå…¶ä¸­resultå€¼æ˜¯token   æ¯æ¬¡tokenéƒ½ä¸ä¸€æ ·</span><br><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;jsonrpc&quot;</span><span class="punctuation">:</span><span class="string">&quot;2.0&quot;</span><span class="punctuation">,</span><span class="attr">&quot;result&quot;</span><span class="punctuation">:</span><span class="string">&quot;17d3a8bddc03d4f6cdc752527e91d03b&quot;</span><span class="punctuation">,</span><span class="attr">&quot;id&quot;</span><span class="punctuation">:</span><span class="number">1</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>ä½¿ç”¨postmanè°ƒå–æ¥å£</strong></p><p><img src="https://cos.lukme.top/Pic/QQ_1723340719798.png" alt="QQ_1723340719798"></p><p><img src="https://cos.lukme.top/Pic/QQ_1723340820336.png" alt="QQ_1723340820336"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">http://10.0.0.71/api_jsonrpc.php</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;jsonrpc&quot;</span>: <span class="string">&quot;2.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;method&quot;</span>: <span class="string">&quot;user.login&quot;</span>,</span><br><span class="line">    <span class="string">&quot;params&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;user&quot;</span>: <span class="string">&quot;Admin&quot;</span>,</span><br><span class="line">        <span class="string">&quot;password&quot;</span>: <span class="string">&quot;zabbix&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;id&quot;</span>: 1,</span><br><span class="line">    <span class="string">&quot;auth&quot;</span>: null</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">e4b67c3d6c13c9470c9ec56350552c2d</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#è·å¾—tokenåï¼Œæ¯æ¬¡æŸ¥è¯¢å¸¦ä¸Štokenå³å¯</span></span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/QQ_1723340900158.png" alt="QQ_1723340900158"></p><p><strong>è·å¾—ä¸»æœºç»„ID</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">#åœ¨Postmané‡ŒæŸ¥è¯¢</span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">           <span class="attr">&quot;jsonrpc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">           <span class="attr">&quot;method&quot;</span><span class="punctuation">:</span> <span class="string">&quot;host.get&quot;</span><span class="punctuation">,</span></span><br><span class="line">           <span class="attr">&quot;params&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">               <span class="attr">&quot;output&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                   <span class="string">&quot;hostid&quot;</span><span class="punctuation">,</span></span><br><span class="line">                   <span class="string">&quot;host&quot;</span></span><br><span class="line">               <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">               <span class="attr">&quot;selectInterfaces&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                   <span class="string">&quot;interfaceid&quot;</span><span class="punctuation">,</span></span><br><span class="line">                   <span class="string">&quot;ip&quot;</span></span><br><span class="line">               <span class="punctuation">]</span></span><br><span class="line">           <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">           <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">           <span class="attr">&quot;auth&quot;</span><span class="punctuation">:</span> <span class="string">&quot;e4b67c3d6c13c9470c9ec56350552c2d&quot;</span></span><br><span class="line">       <span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#è¿”å›å€¼</span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;jsonrpc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;result&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;hostid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;10460&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;host&quot;</span><span class="punctuation">:</span> <span class="string">&quot;web01&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;interfaces&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;interfaceid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;22&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;ip&quot;</span><span class="punctuation">:</span> <span class="string">&quot;172.16.1.7&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">2</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>è·å–æ¨¡æ¿ID</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">           <span class="attr">&quot;jsonrpc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">           <span class="attr">&quot;method&quot;</span><span class="punctuation">:</span> <span class="string">&quot;template.get&quot;</span><span class="punctuation">,</span></span><br><span class="line">           <span class="attr">&quot;params&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">               <span class="attr">&quot;output&quot;</span><span class="punctuation">:</span> <span class="string">&quot;extend&quot;</span><span class="punctuation">,</span></span><br><span class="line">               <span class="attr">&quot;filter&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                   <span class="attr">&quot;host&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                      <span class="string">&quot;Template OS Linux by Zabbix agent&quot;</span></span><br><span class="line">                   <span class="punctuation">]</span></span><br><span class="line">               <span class="punctuation">&#125;</span></span><br><span class="line">           <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">           <span class="attr">&quot;auth&quot;</span><span class="punctuation">:</span> <span class="string">&quot;e4b67c3d6c13c9470c9ec56350552c2d&quot;</span><span class="punctuation">,</span></span><br><span class="line">           <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span></span><br><span class="line">       <span class="punctuation">&#125;</span></span><br><span class="line">       </span><br><span class="line">       </span><br><span class="line">##è¿”å›å€¼</span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;jsonrpc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;result&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;proxy_hostid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;host&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Template OS Linux by Zabbix agent&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;3&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;disable_until&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;error&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;available&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;errors_from&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;lastaccess&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;ipmi_authtype&quot;</span><span class="punctuation">:</span> <span class="string">&quot;-1&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;ipmi_privilege&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;ipmi_username&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;ipmi_password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;ipmi_disable_until&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;ipmi_available&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;snmp_disable_until&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;snmp_available&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;maintenanceid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;maintenance_status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;maintenance_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;maintenance_from&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;ipmi_errors_from&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;snmp_errors_from&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;ipmi_error&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;snmp_error&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;jmx_disable_until&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;jmx_available&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;jmx_errors_from&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;jmx_error&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Template OS Linux by Zabbix agent&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;flags&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;templateid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;10001&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Official Linux template. Requires agent of Zabbix 3.0.14, 3.4.5 and 4.0.0 or newer.\r\n\r\nKnown Issues:\r\n\r\n  Description: Network discovery. Zabbix agent as of 4.2 doesn&#x27;t support items such as net.if.status, net.if.speed.\r\n\r\nYou can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/387225-discussion-thread-for-official-zabbix-template-for-linux\r\n\r\nTemplate tooling version used: 0.39&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;tls_connect&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;tls_accept&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;tls_issuer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;tls_subject&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;tls_psk_identity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;tls_psk&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;proxy_address&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;auto_compress&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>æ·»åŠ ä¸»æœº</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ¨¡æ¿æœºIDï¼Œä¸»æœºç»„IDï¼ˆgroupidï¼‰ä¸Šé¢å·²è·å–</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST http://10.0.0.71/api_jsonrpc.php -H <span class="string">&#x27;Content-Type: application/json-rpc&#x27;</span> -d <span class="string">&#x27;</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">           &quot;jsonrpc&quot;: &quot;2.0&quot;,</span></span><br><span class="line"><span class="string">           &quot;method&quot;: &quot;host.create&quot;,</span></span><br><span class="line"><span class="string">           &quot;params&quot;: &#123;</span></span><br><span class="line"><span class="string">               &quot;host&quot;: &quot;Linux server&quot;,</span></span><br><span class="line"><span class="string">               &quot;interfaces&quot;: [</span></span><br><span class="line"><span class="string">                   &#123;</span></span><br><span class="line"><span class="string">                       &quot;type&quot;: 1,</span></span><br><span class="line"><span class="string">                       &quot;main&quot;: 1,</span></span><br><span class="line"><span class="string">                       &quot;useip&quot;: 1,</span></span><br><span class="line"><span class="string">                       &quot;ip&quot;: &quot;10.0.0.9&quot;,</span></span><br><span class="line"><span class="string">                       &quot;dns&quot;: &quot;&quot;,</span></span><br><span class="line"><span class="string">                       &quot;port&quot;: &quot;10050&quot;</span></span><br><span class="line"><span class="string">                   &#125;</span></span><br><span class="line"><span class="string">               ],</span></span><br><span class="line"><span class="string">               &quot;groups&quot;: [</span></span><br><span class="line"><span class="string">                   &#123;</span></span><br><span class="line"><span class="string">                       &quot;groupid&quot;: &quot;2&quot;</span></span><br><span class="line"><span class="string">                   &#125;</span></span><br><span class="line"><span class="string">               ],</span></span><br><span class="line"><span class="string">               &quot;tags&quot;: [</span></span><br><span class="line"><span class="string">                   &#123;</span></span><br><span class="line"><span class="string">                       &quot;tag&quot;: &quot;Host name&quot;,</span></span><br><span class="line"><span class="string">                       &quot;value&quot;: &quot;Linux server&quot;</span></span><br><span class="line"><span class="string">                   &#125;</span></span><br><span class="line"><span class="string">               ],</span></span><br><span class="line"><span class="string">               &quot;templates&quot;: [</span></span><br><span class="line"><span class="string">                   &#123;</span></span><br><span class="line"><span class="string">                       &quot;templateid&quot;: &quot;20045&quot;</span></span><br><span class="line"><span class="string">                   &#125;,</span></span><br><span class="line"><span class="string">                   &#123;</span></span><br><span class="line"><span class="string">                   &quot;templateid&quot;: &quot;10001&quot;</span></span><br><span class="line"><span class="string">                   &#125;</span></span><br><span class="line"><span class="string">               ],</span></span><br><span class="line"><span class="string">               &quot;macros&quot;: [</span></span><br><span class="line"><span class="string">                   &#123;</span></span><br><span class="line"><span class="string">                       &quot;macro&quot;: &quot;&#123;$USER_ID&#125;&quot;,</span></span><br><span class="line"><span class="string">                       &quot;value&quot;: &quot;123321&quot;</span></span><br><span class="line"><span class="string">                   &#125;,</span></span><br><span class="line"><span class="string">                   &#123;</span></span><br><span class="line"><span class="string">                       &quot;macro&quot;: &quot;&#123;$USER_LOCATION&#125;&quot;,</span></span><br><span class="line"><span class="string">                       &quot;value&quot;: &quot;0:0:0&quot;,</span></span><br><span class="line"><span class="string">                       &quot;description&quot;: &quot;latitude, longitude and altitude coordinates&quot;</span></span><br><span class="line"><span class="string">                   &#125;</span></span><br><span class="line"><span class="string">               ],</span></span><br><span class="line"><span class="string">               &quot;inventory_mode&quot;: 0,</span></span><br><span class="line"><span class="string">               &quot;inventory&quot;: &#123;</span></span><br><span class="line"><span class="string">                   &quot;macaddress_a&quot;: &quot;01234&quot;,</span></span><br><span class="line"><span class="string">                   &quot;macaddress_b&quot;: &quot;56768&quot;</span></span><br><span class="line"><span class="string">               &#125;</span></span><br><span class="line"><span class="string">           &#125;,</span></span><br><span class="line"><span class="string">           &quot;auth&quot;: &quot;e4b67c3d6c13c9470c9ec56350552c2d&quot;,</span></span><br><span class="line"><span class="string">           &quot;id&quot;: 1</span></span><br><span class="line"><span class="string">       &#125;&#x27;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç›‘æ§ </category>
          
          <category> zabbix </category>
          
      </categories>
      
      
        <tags>
            
            <tag> zabbix </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>zabbixé‚®ä»¶å‘Šè­¦</title>
      <link href="/posts/97b5f9b7.html"/>
      <url>/posts/97b5f9b7.html</url>
      
        <content type="html"><![CDATA[<h3 id="1-æ·»åŠ æŠ¥è­¦åª’ä»‹">1.æ·»åŠ æŠ¥è­¦åª’ä»‹</h3><p><img src="https://cos.lukme.top/Pic/QQ_1722776498063.png" alt="QQ_1722776498063"></p><p><img src="https://cos.lukme.top/Pic/QQ_1722776993991.png" alt="QQ_1722776993991"></p><p><strong>è·å–QQé‚®ç®±æˆæƒç </strong></p><p><img src="https://cos.lukme.top/Pic/QQ_1722776749588.png" alt="QQ_1722776749588"></p><p><img src="https://cos.lukme.top/Pic/QQ_1722776784428.png" alt="QQ_1722776784428"></p><p><img src="https://cos.lukme.top/Pic/QQ_1722776853820.png" alt="QQ_1722776853820"></p><p><strong>å¯ä»¥æµ‹è¯•èƒ½å¦æˆåŠŸå‘é‚®ä»¶</strong></p><p><img src="https://cos.lukme.top/Pic/QQ_1722777067263.png" alt="QQ_1722777067263"></p><h3 id="2-æ·»åŠ åŠ¨ä½œ">2.æ·»åŠ åŠ¨ä½œ</h3><p><img src="https://cos.lukme.top/Pic/QQ_1722778117057.png" alt="QQ_1722778117057"></p><p><img src="https://cos.lukme.top/Pic/QQ_1722777618840.png" alt="QQ_1722777618840"></p><p><img src="https://cos.lukme.top/Pic/QQ_1722777179047.png" alt="QQ_1722777179047"></p><p><img src="https://cos.lukme.top/Pic/QQ_1722777497942.png" alt="QQ_1722777497942"></p><p><img src="https://cos.lukme.top/Pic/QQ_1722777580123.png" alt="QQ_1722777580123"></p><h3 id="3-æ·»åŠ æŠ¥è­¦æ”¶ä»¶äºº">3.æ·»åŠ æŠ¥è­¦æ”¶ä»¶äºº</h3><p><img src="https://cos.lukme.top/Pic/QQ_1722777689193.png" alt="QQ_1722777689193"></p><p><strong>æµ‹è¯•</strong></p><p><img src="https://cos.lukme.top/Pic/QQ_1722777896537.png" alt="QQ_1722777896537"></p><h3 id="4-é‚®ä»¶å‘Šè­¦-htmlå‘Šè­¦">4.é‚®ä»¶å‘Šè­¦-htmlå‘Šè­¦</h3><p><img src="https://cos.lukme.top/Pic/QQ_1722841657383.png" alt="QQ_1722841657383"></p><p><strong>æ•…éšœ</strong></p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">æ•…éšœ</span><span class="template-variable">&#123;TRIGGER.STATUS&#125;</span><span class="language-xml">,æœåŠ¡å™¨:</span><span class="template-variable">&#123;HOSTNAME1&#125;</span><span class="language-xml">å‘ç”Ÿ: </span><span class="template-variable">&#123;TRIGGER.NAME&#125;</span><span class="language-xml">æ•…éšœ!</span></span><br><span class="line"><span class="language-xml">å‘Šè­¦åœ°å€:</span><span class="template-variable">&#123;HOST.IP&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">å‘Šè­¦ä¸»æœº:</span><span class="template-variable">&#123;HOSTNAME1&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">å‘Šè­¦æ—¶é—´:</span><span class="template-variable">&#123;EVENT.DATE&#125;</span><span class="language-xml"> </span><span class="template-variable">&#123;EVENT.TIME&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">å‘Šè­¦ç­‰çº§:</span><span class="template-variable">&#123;TRIGGER.SEVERITY&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">å‘Šè­¦ä¿¡æ¯: </span><span class="template-variable">&#123;TRIGGER.NAME&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">å‘Šè­¦é¡¹ç›®:</span><span class="template-variable">&#123;TRIGGER.KEY1&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">é—®é¢˜è¯¦æƒ…:</span><span class="template-variable">&#123;ITEM.NAME&#125;</span><span class="language-xml">:</span><span class="template-variable">&#123;ITEM.VALUE&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">å½“å‰çŠ¶æ€:</span><span class="template-variable">&#123;TRIGGER.STATUS&#125;</span><span class="language-xml">:</span><span class="template-variable">&#123;ITEM.VALUE1&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">äº‹ä»¶ID:</span><span class="template-variable">&#123;EVENT.ID&#125;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">body</span>&#123;</span></span><br><span class="line"><span class="language-css"><span class="attribute">background</span>:<span class="built_in">url</span>(<span class="string">&#x27;https://seopic.699pic.com/photo/40007/7490.jpg_wh1200.jpg&#x27;</span>);</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;http://pic1.win4000.com/wallpaper/8/573acd203bc77.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">table</span> <span class="selector-class">.guzhang</span> &#123;<span class="attribute">color</span>: red;&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;3&quot;</span> <span class="attr">bordercolor</span>=<span class="string">&quot;black&quot;</span> <span class="attr">cellspacing</span>=<span class="string">&quot;0px&quot;</span> <span class="attr">cellpadding</span>=<span class="string">&quot;4px&quot;</span> <span class="attr">width</span>=<span class="string">&quot;500px&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">class</span>=<span class="string">&quot;guzhang&quot;</span> <span class="attr">bgcolor</span>=<span class="string">&quot;#0C1B3D&quot;</span> &gt;</span><span class="tag">&lt;<span class="name">th</span> <span class="attr">colspan</span>=<span class="string">2</span>&gt;</span>&#123;TRIGGER.STATUS&#125; æ•…éšœï¼ï¼ï¼æ•…éšœï¼ï¼ï¼</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="symbol">&amp;#128514;</span> <span class="symbol">&amp;#128514;</span> <span class="symbol">&amp;#128514;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;#F9B602&quot;</span> <span class="attr">width</span>=<span class="string">&quot;20%&quot;</span>&gt;</span>å‘Šè­¦ä¸»æœº<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;#F9B602&quot;</span>&gt;</span>&#123;HOSTNAME1&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;#F9B602&quot;</span>&gt;</span>å‘Šè­¦åˆ«å<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;#F9B602&quot;</span>&gt;</span>&#123;HOST.NAME&#125; <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;#F9B602&quot;</span>&gt;</span>å‘Šè­¦åœ°å€<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;#F9B602&quot;</span>&gt;</span>&#123;HOST.IP&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;#F9B602&quot;</span>&gt;</span>å‘Šè­¦æ—¶é—´<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;#F9B602&quot;</span>&gt;</span>&#123;EVENT.DATE&#125; &#123;EVENT.TIME&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;#F9B602&quot;</span>&gt;</span>å‘Šè­¦ç­‰çº§<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;#F9B602&quot;</span>&gt;</span>&#123;TRIGGER.SEVERITY&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;#F9B602&quot;</span>&gt;</span>å‘Šè­¦ä¿¡æ¯<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;#F9B602&quot;</span>&gt;</span>&#123;TRIGGER.NAME&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;#F9B602&quot;</span>&gt;</span>å‘Šè­¦é¡¹ç›®<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;#F9B602&quot;</span>&gt;</span>&#123;TRIGGER.KEY1&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">&#x27;guzhang2&#x27;</span> <span class="attr">bgcolor</span>=<span class="string">&quot;#FF3333&quot;</span>&gt;</span>é—®é¢˜è¯¦æƒ…<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">&#x27;guzhang3&#x27;</span> <span class="attr">bgcolor</span>=<span class="string">&quot;#FF3333&quot;</span>&gt;</span>&#123;ITEM.NAME&#125;:<span class="symbol">&amp;nbsp;</span>&#123;ITEM.VALUE&#125; <span class="symbol">&amp;#128520;</span> <span class="symbol">&amp;#128520;</span> <span class="symbol">&amp;#128520;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;#F9B602&quot;</span>&gt;</span>å½“å‰çŠ¶æ€<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;#F9B602&quot;</span>&gt;</span>&#123;TRIGGER.STATUS&#125;:<span class="symbol">&amp;nbsp;</span>&#123;ITEM.VALUE1&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;#F9B602&quot;</span>&gt;</span>äº‹ä»¶ID<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;#F9B602&quot;</span>&gt;</span>&#123;EVENT.ID&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>æ¢å¤</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">æ¢å¤&#123;TRIGGER.STATUS&#125;, æœåŠ¡å™¨:&#123;HOSTNAME1&#125;: &#123;TRIGGER.NAME&#125;å·²æ¢å¤!</span><br><span class="line">å‘Šè­¦åœ°å€:&#123;HOST.IP&#125;</span><br><span class="line">å‘Šè­¦ä¸»æœº:&#123;HOSTNAME1&#125;</span><br><span class="line">å‘Šè­¦æ—¶é—´:&#123;EVENT.DATE&#125; &#123;EVENT.TIME&#125;</span><br><span class="line">å‘Šè­¦ç­‰çº§:&#123;TRIGGER.SEVERITY&#125;</span><br><span class="line">å‘Šè­¦ä¿¡æ¯: &#123;TRIGGER.NAME&#125;</span><br><span class="line">å‘Šè­¦é¡¹ç›®:&#123;TRIGGER.KEY1&#125;</span><br><span class="line">é—®é¢˜è¯¦æƒ…:&#123;ITEM.NAME&#125;:&#123;ITEM.VALUE&#125;</span><br><span class="line">å½“å‰çŠ¶æ€:&#123;TRIGGER.STATUS&#125;:&#123;ITEM.VALUE1&#125;</span><br><span class="line">äº‹ä»¶ID:&#123;EVENT.ID&#125;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">table</span> <span class="selector-class">.guzhang</span> &#123;</span></span><br><span class="line"><span class="language-css"><span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-tag">body</span>&#123;</span></span><br><span class="line"><span class="language-css"><span class="attribute">background</span>:<span class="built_in">url</span>(<span class="string">&#x27;https://seopic.699pic.com/photo/40007/7490.jpg_wh1200.jpg&#x27;</span>);</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;http://pic1.win4000.com/wallpaper/8/573acd203bc77.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;1&quot;</span> <span class="attr">bordercolor</span>=<span class="string">&quot;black&quot;</span> <span class="attr">cellspacing</span>=<span class="string">&quot;0px&quot;</span> <span class="attr">cellpadding</span>=<span class="string">&quot;4px&quot;</span> <span class="attr">width</span>=<span class="string">&quot;500px&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">bgcolor</span>=<span class="string">&quot;#49c208&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">th</span> <span class="attr">colspan</span>=<span class="string">2</span>&gt;</span></span><br><span class="line">    &#123;TRIGGER.STATUS&#125; å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ,å¥½äº†</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="symbol">&amp;#128512;</span> <span class="symbol">&amp;#128512;</span> <span class="symbol">&amp;#128512;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;lightgreen&quot;</span> <span class="attr">width</span>=<span class="string">&quot;20%&quot;</span>&gt;</span>æ¢å¤ä¸»æœº<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;yellow&quot;</span>&gt;</span>&#123;HOSTNAME1&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;lightgreen&quot;</span>&gt;</span>æ¢å¤åˆ«å<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;yellow&quot;</span>&gt;</span>&#123;HOST.NAME&#125; <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;lightgreen&quot;</span>&gt;</span>æ¢å¤åœ°å€<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;yellow&quot;</span>&gt;</span>&#123;HOST.IP&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;lightgreen&quot;</span>&gt;</span>æ¢å¤æ—¶é—´<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;yellow&quot;</span>&gt;</span>&#123;EVENT.DATE&#125; &#123;EVENT.RECOVERY.TIME&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;lightgreen&quot;</span>&gt;</span>æ¢å¤ç­‰çº§<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;yellow&quot;</span>&gt;</span>&#123;TRIGGER.SEVERITY&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;lightgreen&quot;</span>&gt;</span>æ¢å¤ä¿¡æ¯<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;yellow&quot;</span>&gt;</span>&#123;TRIGGER.NAME&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;lightgreen&quot;</span>&gt;</span>æ¢å¤é¡¹ç›®<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;yellow&quot;</span>&gt;</span>&#123;TRIGGER.KEY1&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;#49c208&quot;</span>&gt;</span>æ¢å¤è¯¦æƒ…<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;#49c208&quot;</span>&gt;</span>&#123;ITEM.NAME&#125;:<span class="symbol">&amp;nbsp;</span>&#123;ITEM.VALUE&#125; <span class="symbol">&amp;#9889;</span> <span class="symbol">&amp;#9889;</span><span class="symbol">&amp;#9889;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;lightgreen&quot;</span>&gt;</span>å½“å‰çŠ¶æ€<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;yellow&quot;</span>&gt;</span>&#123;TRIGGER.STATUS&#125;:<span class="symbol">&amp;nbsp;</span>&#123;ITEM.VALUE1&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;lightgreen&quot;</span>&gt;</span>äº‹ä»¶ID<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">&quot;yellow&quot;</span>&gt;</span>&#123;EVENT.ID&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç›‘æ§ </category>
          
          <category> zabbix </category>
          
      </categories>
      
      
        <tags>
            
            <tag> zabbix </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>zabbixè‡ªå®šä¹‰ç›‘æ§é¡¹</title>
      <link href="/posts/9ccde0e4.html"/>
      <url>/posts/9ccde0e4.html</url>
      
        <content type="html"><![CDATA[<h3 id="åˆ›å»ºæ¨¡æ¿">åˆ›å»ºæ¨¡æ¿</h3><p><img src="https://cos.lukme.top/Pic/QQ_1722762642396.png" alt="QQ_1722762642396"></p><p><img src="https://cos.lukme.top/Pic/QQ_1722762853490.png" alt="QQ_1722762853490"></p><p><img src="https://cos.lukme.top/Pic/QQ_1722766153284.png" alt="QQ_1722766153284"></p><p><strong>è‡ªå®šä¹‰ç›‘æ§å®ä¾‹</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.ç›‘æ§ç”¨æˆ·ç™»å½•æ•°é‡</span><br><span class="line">2.ç›‘æ§æœåŠ¡æ˜¯å¦å­˜æ´»</span><br></pre></td></tr></table></figure><p><strong>1.ç›‘æ§ç”¨æˆ·ç™»å½•æ•°é‡</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.äº†è§£ç›‘æ§éœ€æ±‚ï¼Œè·å–ç›‘æ§æ•°æ®</span></span><br><span class="line"><span class="comment">## é›¶å®½æ–­è¨€</span></span><br><span class="line">[root@web02 ~]# ifconfig eth0|grep -Po <span class="string">&#x27;[1-9][0-9]*\.\d+\.\d+\.\d+(?= netmask)&#x27;</span></span><br><span class="line">[root@web02 ~]# <span class="built_in">uptime</span>|grep -Po <span class="string">&#x27;\d+(?= user)&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.ä¿®æ”¹zabbix-agentçš„é…ç½®æ–‡ä»¶ï¼ˆä½¿ç”¨zabbix-agenté…ç½®æ–‡ä»¶ä¸­çš„ UserParameter= å®šä¹‰ç›‘æ§é¡¹ï¼‰</span></span><br><span class="line">è¯­æ³•ï¼š</span><br><span class="line">Format: UserParameter=&lt;key&gt;,&lt;shell <span class="built_in">command</span>&gt;</span><br><span class="line">Format: UserParameter=ç›‘æ§é¡¹åå­—,shellå‘½ä»¤</span><br><span class="line">[root@web01 ~]# vim /etc/zabbix/zabbix_agentd.conf</span><br><span class="line">UserParameter=user.count,<span class="built_in">uptime</span>|grep -Po <span class="string">&#x27;\d+(?= user)&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">##å»ºè®®ä»¥åç›´æ¥åˆ›å»ºconfæ–‡ä»¶ï¼ˆç±»ä¼¼nginxå­é…ç½®æ–‡ä»¶ï¼‰</span></span><br><span class="line">[root@web01 ~]# vim /etc/zabbix/zabbix_agentd.d/userlogin.conf</span><br><span class="line">UserParameter=user.count,<span class="built_in">uptime</span>|grep -Po <span class="string">&#x27;\d+(?= user)&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.é‡å¯zabbix-agent</span></span><br><span class="line">[root@web01 ~]# systemctl restart zabbix-agent</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.åœ¨zabbix-serverä¸Šï¼ˆzabbix-getï¼‰æµ‹è¯•ï¼Œæ˜¯å¦å¯ä»¥æ¥æ”¶åˆ°zabbix-agentè·å–çš„æ•°æ®</span></span><br><span class="line">rpm -ivh https://mirrors.tuna.tsinghua.edu.cn/zabbix/zabbix/5.0/rhel/7/x86_64/zabbix-get-5.0.0-1.el7.x86_64.rpm</span><br><span class="line"></span><br><span class="line">[root@zabbix5 ~]# zabbix_get -s 172.16.1.7 -k user.count</span><br><span class="line">1</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ ç›‘æ§é¡¹">æ·»åŠ ç›‘æ§é¡¹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ç»Ÿä¸€æ·»åŠ åˆ°åˆ›å»ºçš„æ¨¡æ¿é‡Œï¼Œæ¯æ¬¡ç›‘æ§éƒ½ä¸éœ€è¦å•ç‹¬åˆ›å»ºç›‘æ§é¡¹ï¼Œè€Œæ˜¯ç›´æ¥é€‰æ‹©è¿™ä¸ªæ¨¡æ¿å°±è¡Œ</span></span><br><span class="line">æ‰¾åˆ°åˆ›å»ºçš„è‡ªå®šä¹‰æ¨¡æ¿&gt;ç›‘æ§é¡¹&gt;åˆ›å»ºç›‘æ§é¡¹</span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/QQ_1722766187140.png" alt="QQ_1722766187140"></p><p><img src="https://cos.lukme.top/Pic/QQ_1722766273027.png" alt="QQ_1722766273027"></p><p><img src="https://cos.lukme.top/Pic/QQ_1722771986050.png" alt="QQ_1722771986050"></p><h3 id="æ·»åŠ è§¦å‘å™¨">æ·»åŠ è§¦å‘å™¨</h3><p><strong>å¦‚ä½•åšåˆ°æŠ¥è­¦æé†’ï¼Ÿ</strong></p><p><img src="https://cos.lukme.top/Pic/QQ_1722772037897.png" alt="QQ_1722772037897"></p><p><img src="https://cos.lukme.top/Pic/QQ_1722772224830.png" alt="QQ_1722772224830"></p><p><strong>æ·»åŠ è¡¨è¾¾å¼</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">æ’å…¥è¡¨è¾¾å¼åï¼Œæ·»åŠ æ•°æ®ï¼Œè¡¨è¾¾å¼é€‰æ‹©&gt;   å›¾1é”™äº†</span><br><span class="line"></span><br><span class="line">&#123;HOST.NAME&#125;:å¯è§çš„åç§°</span><br><span class="line">&#123;HOST.IP&#125;ï¼šIPåœ°å€</span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/QQ_1722772470739.png" alt="QQ_1722772470739"></p><p><img src="https://cos.lukme.top/Pic/QQ_1722772899528.png" alt="QQ_1722772899528"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨å˜é‡</span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/QQ_1722773526820.png" alt="QQ_1722773526820"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å…³è”æ¨¡æ¿</span></span><br><span class="line">é…ç½®&gt;ä¸»æœº&gt;web01-10.0.0.7&gt;æ¨¡æ¿&gt;é€‰æ‹©è‡ªå®šä¹‰æ¨¡æ¿</span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/QQ_1722772708350.png" alt="QQ_1722772708350"></p><p><strong>==æµ‹è¯•==</strong></p><p><img src="https://cos.lukme.top/Pic/QQ_1722772812337.png" alt="QQ_1722772812337"></p><p><img src="https://cos.lukme.top/Pic/QQ_1722773021302.png" alt="QQ_1722773021302"></p><h3 id="æ·»åŠ å›¾è¡¨">æ·»åŠ å›¾è¡¨</h3><p><img src="https://cos.lukme.top/Pic/QQ_1722773128565.png" alt="QQ_1722773128565"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åˆ›å»ºå›¾å½¢</span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/QQ_1722773144333.png" alt="QQ_1722773144333"></p><p><img src="https://cos.lukme.top/Pic/QQ_1722773217580.png" alt="QQ_1722773217580"></p><p><img src="https://cos.lukme.top/Pic/QQ_1722773354712.png" alt="QQ_1722773354712"></p><h3 id="ç›‘æ§æœåŠ¡çŠ¶æ€">ç›‘æ§æœåŠ¡çŠ¶æ€</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.è·å–æ•°æ®</span></span><br><span class="line">[root@web01 ~]# netstat -lntup|grep -<span class="built_in">wc</span> <span class="string">&quot;8080&quot;</span></span><br><span class="line">1</span><br><span class="line"><span class="comment"># 2.ä¿®æ”¹é…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@web01 ~]# vim /etc/zabbix/zabbix_agentd.d/port.conf</span><br><span class="line">UserParameter=tcp.port.ssh,netstat -lntup|grep -<span class="built_in">wc</span> <span class="string">&quot;22&quot;</span></span><br><span class="line">UserParameter=tcp.port.http,netstat -lntup|grep -<span class="built_in">wc</span> <span class="string">&quot;80&quot;</span></span><br><span class="line">UserParameter=tcp.port.tomcat,netstat -lntup|grep -<span class="built_in">wc</span> <span class="string">&quot;8080&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#3ï¼Œé‡å¯å®¢æˆ·ç«¯</span></span><br><span class="line">systemctl restart zabbix-agent.service </span><br><span class="line"></span><br><span class="line"><span class="comment">#å‚æ•°åŒ–å®šä¹‰ç›‘æ§é¡¹</span></span><br><span class="line">[root@web01 ~]#vim /etc/zabbix/zabbix_agentd.d/port.conf</span><br><span class="line">UserParameter=tcp.port[*],ss -lntup|grep -<span class="built_in">wc</span> <span class="string">&quot;<span class="variable">$1</span>&quot;</span></span><br><span class="line">[root@web01 ~]# systemctl restart zabbix-agen</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#å¦‚ä½•è·å–å€¼ï¼Ÿ</span></span><br><span class="line">[root@zabbix5 fonts]# zabbix_get -s 172.16.1.7 -k tcp.port[80]</span><br><span class="line">0</span><br></pre></td></tr></table></figure><p><strong>ä¾æ¬¡æ·»åŠ ç›‘æ§é¡¹</strong></p><p><img src="https://cos.lukme.top/Pic/QQ_1722774448589.png" alt="QQ_1722774448589"></p><p><img src="https://cos.lukme.top/Pic/QQ_1722774470909.png" alt="QQ_1722774470909"></p><p><img src="https://cos.lukme.top/Pic/QQ_1722774493661.png" alt="QQ_1722774493661"></p><p><img src="https://cos.lukme.top/Pic/QQ_1722775398498.png" alt="QQ_1722775398498"></p><p><strong>æ’é”™</strong></p><p><img src="https://cos.lukme.top/Pic/QQ_1722774829533.png" alt="QQ_1722774829533"></p><p><img src="https://cos.lukme.top/Pic/QQ_1722774871851.png" alt="QQ_1722774871851"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@zabbix5 fonts]# zabbix_get -s 172.16.1.7 -k tcp.port.http</span><br><span class="line">(Not all processes could be identified, non-owned process info</span><br><span class="line"> will not be shown, you would have to be root to see it all.)</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">æŠ¥é”™åŸå› ï¼šå®šä¹‰ç›‘æ§é¡¹æ—¶ï¼Œå®šä¹‰çš„æ•°æ®ç±»å‹æ˜¯æ•°å­—ï¼Œç»“æœè·å–åˆ°çš„å€¼å«æœ‰å­—ç¬¦ä¸²</span><br><span class="line">è§£å†³æ–¹æ¡ˆï¼šå°†zabbixç”¨æˆ·ææƒ</span><br><span class="line">[root@web01 ~]# visudo</span><br><span class="line">zabbix ALL=(ALL) NOPASSWD: ALL</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç›‘æ§å‘½ä»¤ï¼š</span></span><br><span class="line">[root@web01 ~]# vim /etc/zabbix/zabbix_agentd.d/port.conf</span><br><span class="line">UserParameter=tcp.port.ssh,<span class="built_in">sudo</span> netstat -lntup|grep -<span class="built_in">wc</span> <span class="string">&quot;22&quot;</span></span><br><span class="line">UserParameter=tcp.port.http,<span class="built_in">sudo</span> netstat -lntup|grep -<span class="built_in">wc</span> <span class="string">&quot;80&quot;</span></span><br><span class="line">UserParameter=tcp.port.tomcat,<span class="built_in">sudo</span> netstat -lntup|grep -<span class="built_in">wc</span> <span class="string">&quot;8080&quot;</span></span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line">UserParameter=tcp.port.ssh,ss -ltnup|grep -<span class="built_in">wc</span> <span class="string">&#x27;sshd&#x27;</span></span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line">ç»™netstatå‘½ä»¤åŠ setuidæƒé™</span><br></pre></td></tr></table></figure><p><strong>æ·»åŠ è§¦å‘å™¨</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¡¨è¾¾å¼æ·»åŠ ï¼Œé€‰æ‹©nginxçš„è§¦å‘å™¨ï¼Œé˜ˆå€¼ä¸º0</span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/QQ_1722776310520.png" alt="QQ_1722776310520"></p><p><img src="https://cos.lukme.top/Pic/QQ_1722776258077.png" alt="QQ_1722776258077"></p><h3 id="ç›‘æ§nginxçŠ¶æ€é¡µ">ç›‘æ§nginxçŠ¶æ€é¡µ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/nginx/conf.d/webapp.conf</span><br><span class="line">server&#123;</span><br><span class="line">listen 80;</span><br><span class="line">server_name _;</span><br><span class="line">location / &#123;</span><br><span class="line">root /code/webapp;</span><br><span class="line">index index.html;</span><br><span class="line">&#125;</span><br><span class="line">location /status &#123;</span><br><span class="line">stub_status on;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http://10.0.0.7/status</span><br><span class="line">http://webapp.com/status</span><br><span class="line"><span class="comment">#æ³¨ï¼šå¦‚æœä½¿ç”¨åŸŸåï¼Œç‰©ç†æœºå’Œè™šæ‹Ÿæœºéƒ½éœ€è¦hostsåŸŸåè§£æ</span></span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/QQ_1722778620045.png" alt="QQ_1722778620045"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.åˆ›å»ºå­˜æ”¾ç›‘æ§è„šæœ¬ç›®å½•</span></span><br><span class="line">[root@web01 ~]# <span class="built_in">mkdir</span> /etc/zabbix/zabbix_agentd.d/scripts</span><br><span class="line">[root@web01 ~]# vim /etc/zabbix/zabbix_agentd.d/scripts/nginx_status.sh</span><br><span class="line"></span><br><span class="line">NGINX_PORT=80 <span class="comment">#å¦‚æœç«¯å£ä¸åŒä»…éœ€è¦ä¿®æ”¹è„šæœ¬å³å¯ï¼Œå¦åˆ™ä¿®æ”¹xmlå¾ˆéº»çƒ¦</span></span><br><span class="line">NGINX_URL=http://172.16.1.7/status</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">nginx_active</span></span>()&#123;</span><br><span class="line">/usr/bin/curl -s <span class="string">&quot;<span class="variable">$&#123;NGINX_URL&#125;</span>&quot;</span> |awk <span class="string">&#x27;/Active/ &#123;print $NF&#125;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">nginx_reading</span></span>()&#123;</span><br><span class="line">/usr/bin/curl -s <span class="string">&quot;<span class="variable">$&#123;NGINX_URL&#125;</span>&quot;</span> |awk <span class="string">&#x27;/Reading/ &#123;print $2&#125;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">nginx_writing</span></span>()&#123;</span><br><span class="line">/usr/bin/curl -s <span class="string">&quot;<span class="variable">$&#123;NGINX_URL&#125;</span>&quot;</span> |awk <span class="string">&#x27;/Writing/ &#123;print $4&#125;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">nginx_waiting</span></span>()&#123;</span><br><span class="line">/usr/bin/curl -s <span class="string">&quot;<span class="variable">$&#123;NGINX_URL&#125;</span>&quot;</span> |awk <span class="string">&#x27;/Waiting/ &#123;print $6&#125;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">nginx_accepts</span></span>()&#123;</span><br><span class="line">/usr/bin/curl -s <span class="string">&quot;<span class="variable">$&#123;NGINX_URL&#125;</span>&quot;</span> |awk <span class="string">&#x27;NR==3 &#123;print $1&#125;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">nginx_handled</span></span>()&#123;</span><br><span class="line">/usr/bin/curl -s <span class="string">&quot;<span class="variable">$&#123;NGINX_URL&#125;</span>&quot;</span> |awk <span class="string">&#x27;NR==3 &#123;print $2&#125;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">nginx_requests</span></span>()&#123;</span><br><span class="line">/usr/bin/curl -s <span class="string">&quot;<span class="variable">$&#123;NGINX_URL&#125;</span>&quot;</span> |awk <span class="string">&#x27;NR==3 &#123;print $3&#125;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span></span><br><span class="line">active)</span><br><span class="line">nginx_active;</span><br><span class="line">;;</span><br><span class="line">reading)</span><br><span class="line">nginx_reading;</span><br><span class="line">;;</span><br><span class="line">writing)</span><br><span class="line">nginx_writing;</span><br><span class="line">;;</span><br><span class="line">waiting)</span><br><span class="line">nginx_waiting;</span><br><span class="line">;;</span><br><span class="line">accepts)</span><br><span class="line">nginx_accepts;</span><br><span class="line">;;</span><br><span class="line">handled)</span><br><span class="line">nginx_handled;</span><br><span class="line">;;</span><br><span class="line">requests)</span><br><span class="line">nginx_requests;</span><br><span class="line">;;</span><br><span class="line">*)</span><br><span class="line"><span class="built_in">echo</span> $<span class="string">&quot;USAGE:<span class="variable">$0</span> &#123;active|reading|writing|waiting|accepts|handled|requests&#125;&quot;</span></span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆæƒ</span></span><br><span class="line">[root@web01 ~]# <span class="built_in">chmod</span> +x /etc/zabbix/zabbix_agentd.d/scripts/nginx_status.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹zabbix-agenté…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@web01 ~]# vim /etc/zabbix/zabbix_agentd.d/nginx_status.conf</span><br><span class="line">UserParameter=nginx.status[*],/etc/zabbix/zabbix_agentd.d/scripts/nginx_status.sh <span class="variable">$1</span></span><br><span class="line"><span class="comment">#é‡å¯å®¢æˆ·ç«¯</span></span><br><span class="line">[root@web01 ~]# systemctl restart zabbix-agent</span><br></pre></td></tr></table></figure><p><strong>ä¾æ¬¡æ·»åŠ ç›‘æ§é¡¹</strong></p><p><img src="https://cos.lukme.top/Pic/QQ_1722780577877.png" alt="QQ_1722780577877"></p><p><img src="https://cos.lukme.top/Pic/QQ_1722780778047.png" alt="QQ_1722780778047"></p><p><strong>æ·»åŠ å›¾å½¢</strong></p><p><img src="https://cos.lukme.top/Pic/QQ_1722780847328.png" alt="QQ_1722780847328"></p>]]></content>
      
      
      <categories>
          
          <category> ç›‘æ§ </category>
          
          <category> zabbix </category>
          
      </categories>
      
      
        <tags>
            
            <tag> zabbix </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>zabbixéƒ¨ç½²</title>
      <link href="/posts/42dcb23.html"/>
      <url>/posts/42dcb23.html</url>
      
        <content type="html"><![CDATA[<h3 id="zabbix5éƒ¨ç½²">zabbix5éƒ¨ç½²</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">zabbixç‰ˆæœ¬</span><br><span class="line">7.0ï¼šä¸æ”¯æŒC7</span><br><span class="line">6.4ï¼šä¸æ”¯æŒC7</span><br><span class="line">6.0ï¼šä¸æ”¯æŒC7</span><br><span class="line">5.0ï¼šæ”¯æŒC7</span><br><span class="line">4.xï¼šzabbixå‰åç«¯åˆ†ç¦»</span><br><span class="line">3.xï¼šzabbixå‰åç«¯ä¸åˆ†ç¦»</span><br><span class="line"></span><br><span class="line"><span class="comment">#éƒ¨ç½²zabbxi5å’Œzabbix3ï¼Œçœ‹çœ‹åŒºåˆ«</span></span><br></pre></td></tr></table></figure><p><strong>ç¯å¢ƒå‡†å¤‡</strong></p><table><thead><tr><th>ä¸»æœºå</th><th>å†…ç½‘ip</th><th>ip</th><th>è§’è‰²</th><th style="text-align:left">åº”ç”¨</th></tr></thead><tbody><tr><td>zabbix5</td><td>172.16.1.71</td><td>10.0.0.71</td><td>zabbixæœåŠ¡ç«¯</td><td style="text-align:left">zabbix-serverã€MySQL</td></tr><tr><td>zabbix3</td><td>172.16.1.72</td><td>10.0.0.72</td><td>zabbixæœåŠ¡ç«¯</td><td style="text-align:left">zabbix-serverã€MySQL</td></tr><tr><td>web01</td><td>172.16.1.7</td><td>10.0.0.7</td><td>zabbix5çš„å®¢æˆ·ç«¯</td><td style="text-align:left">zabbix-agent</td></tr><tr><td>web02</td><td>172.16.1.8</td><td>10.0.0.8</td><td>zabbix3çš„å®¢æˆ·ç«¯</td><td style="text-align:left">zabbix-agent</td></tr></tbody></table><p>å®˜ç½‘ï¼š<a href="https://www.zabbix.com/">https://www.zabbix.com/</a>   ç‚¹å‡»download</p><h4 id="å®‰è£…æœåŠ¡ç«¯">å®‰è£…æœåŠ¡ç«¯</h4><p><strong>éƒ¨ç½²zabbix5</strong></p><p><img src="https://cos.lukme.top/Pic/QQ_1722752866743.png" alt="QQ_1722752866743"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#zabbix5æœåŠ¡ç«¯10.0.0.71æ‰§è¡Œ</span></span><br><span class="line"><span class="comment">#1.æ›´æ¢zabbixå®˜æ–¹æº</span></span><br><span class="line">rpm -Uvh https://repo.zabbix.com/zabbix/5.0/rhel/7/x86_64/zabbix-release-5.0-1.el7.noarch.rpm</span><br><span class="line"></span><br><span class="line"><span class="comment">#2.å®‰è£…éƒ¨ç½²åç«¯ä»£ç å’Œå®¢æˆ·ç«¯</span></span><br><span class="line">yum install -y zabbix-server-mysql zabbix-agent</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.æ·»åŠ zabbixå‰ç«¯ä»£ç æº</span></span><br><span class="line">yum install centos-release-scl -y</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.æ‰“å¼€yumä»“åº“ä½¿ç”¨</span></span><br><span class="line">[root@zabbix5-server ~]# vim /etc/yum.repos.d/zabbix.repo</span><br><span class="line">[zabbix-frontend]</span><br><span class="line">...</span><br><span class="line">enabled=1</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.å®‰è£…zabbixå‰ç«¯ä»£ç </span></span><br><span class="line">yum -y install zabbix-web-mysql-scl zabbix-nginx-conf-scl</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æŠ¥é”™</span></span><br><span class="line">Cannot find a valid baseurl <span class="keyword">for</span> repo: centos-sclo-rh/x86_64</span><br><span class="line">åŸå› ï¼šCentOS7çš„SCLæºåœ¨2024å¹´6æœˆ30æ—¥åœæ­¢ç»´æŠ¤äº†ã€‚ å½“sclæºé‡Œé¢é»˜è®¤ä½¿ç”¨äº†centoså®˜æ–¹çš„åœ°å€ï¼Œæ— æ³•è¿æ¥ï¼Œéœ€è¦æ›¿æ¢ä¸ºé˜¿é‡Œäº‘ã€‚</span><br><span class="line">è§£å†³ï¼š</span><br><span class="line"><span class="built_in">cd</span> /etc/yum.repos.d/</span><br><span class="line"><span class="built_in">mv</span> CentOS-SCLo-scl.repo CentOS-SCLo-scl.repo.bak</span><br><span class="line"><span class="built_in">mv</span> CentOS-SCLo-scl-rh.repo CentOS-SCLo-scl-rh.repo.bak</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ›´æ¢é˜¿é‡Œäº‘</span></span><br><span class="line">vim CentOS-SCLo-rh.repo</span><br><span class="line">[centos-sclo-rh]</span><br><span class="line">name=CentOS-7 - SCLo rh</span><br><span class="line">baseurl=https://mirrors.aliyun.com/centos/7/sclo/x86_64/rh/</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=1</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-SIG-SCLo</span><br><span class="line"></span><br><span class="line"><span class="comment">#5.è§£å†³æŠ¥é”™ä¹‹åé‡æ–°å®‰è£…</span></span><br><span class="line">yum -y install zabbix-web-mysql-scl zabbix-nginx-conf-scl</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.å®‰è£…MySQL</span></span><br><span class="line">yum install -y mariadb-server</span><br><span class="line"></span><br><span class="line"><span class="comment"># 7.å¯åŠ¨MySQLå¹¶åŠ å…¥å¼€æœºè‡ªå¯</span></span><br><span class="line">systemctl start mariadb</span><br><span class="line">systemctl <span class="built_in">enable</span> mariadb</span><br><span class="line"></span><br><span class="line"><span class="comment"># 8.è¿›å…¥mysqlå¹¶åˆ›å»ºæ•°æ®åº“</span></span><br><span class="line">mysql</span><br><span class="line">MariaDB [(none)]&gt; create database zabbix5 character <span class="built_in">set</span> utf8 collate utf8_bin;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 9.åˆ›å»ºç”¨æˆ·</span></span><br><span class="line">MariaDB [(none)]&gt; grant all on *.* to zabbix@<span class="string">&#x27;172.16.1.%&#x27;</span> identified by <span class="string">&#x27;123&#x27;</span>;</span><br><span class="line">é€€å‡º</span><br><span class="line">\q</span><br><span class="line"></span><br><span class="line"><span class="comment"># 10.å¯¼å…¥æ•°æ®</span></span><br><span class="line">[root@zabbix5 ~]#zcat /usr/share/doc/zabbix-server-mysql-5.0.42/create.sql.gz | mysql-uzabbix -p123 -h172.16.1.71 zabbix5</span><br><span class="line">ERROR 1045 (28000):Access denied <span class="keyword">for</span> user <span class="string">&#x27;zabbix&#x27;</span>@<span class="string">&#x27;zabbix5&#x27;</span>(using password:YES)</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŠ¥é”™åŸå› ï¼šæ•°æ®åº“å°†ä¸»æœºIPåå‘è§£ææˆä¸»æœºå</span></span><br><span class="line">è§£å†³ï¼šå…³é—­åå‘è§£æï¼Œ[mysqld]ä¸‹æ·»åŠ   skip_name_resolve</span><br><span class="line">vim /etc/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">skip_name_resolve</span><br><span class="line"><span class="comment">#ä¿®æ”¹å®Œæ¯•ä¹‹åé‡å¯æ•°æ®åº“</span></span><br><span class="line">systemctl restart mariadb</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#10.é‡æ–°å¯¼å…¥æ•°æ®</span></span><br><span class="line">zcat /usr/share/doc/zabbix-server-mysql-5.0.42/create.sql.gz  |mysql -uzabbix -p123 -h172.16.1.71 zabbix5</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 11.ä¿®æ”¹zabbix-serveré…ç½®æ–‡ä»¶</span></span><br><span class="line">vim /etc/zabbix/zabbix_server.conf</span><br><span class="line">DBHost=172.16.1.71</span><br><span class="line">DBName=zabbix5<span class="comment">#æ•°æ®åº“å</span></span><br><span class="line">DBUser=zabbix<span class="comment">#åˆ›å»ºçš„æ•°æ®åº“ç”¨æˆ·</span></span><br><span class="line">DBPassword=123</span><br><span class="line"></span><br><span class="line"><span class="comment"># 12.ä¿®æ”¹nginxé…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@zabbix5-server ~]# vim /etc/opt/rh/rh-nginx116/nginx/conf.d/zabbix.conf</span><br><span class="line">server &#123;</span><br><span class="line">listen 80;</span><br><span class="line">server_name zabbix.web.com;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 13.ä¿®æ”¹phpé…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@zabbix5-server ~]# vim /etc/opt/rh/rh-php72/php-fpm.d/zabbix.conf</span><br><span class="line">listen.acl_users = apache,nginx</span><br><span class="line">php_value[date.timezone] = Asia/Shanghai</span><br><span class="line"></span><br><span class="line"><span class="comment"># 14.å¯åŠ¨æœåŠ¡å¹¶åŠ å…¥å¼€æœºè‡ªå¯</span></span><br><span class="line">systemctl restart zabbix-server zabbix-agent rh-nginx116-nginx rh-php72-php-fpm</span><br><span class="line">systemctl <span class="built_in">enable</span> zabbix-server zabbix-agent rh-nginx116-nginx rh-php72-php-fpm</span><br><span class="line"></span><br><span class="line"><span class="comment"># 15.ç‰©ç†æœºåšåŸŸåè§£æ</span></span><br><span class="line">æ‰“å¼€cmd -&gt; è¾“å…¥drivers -&gt; æ‰“å¼€hostsæ–‡ä»¶</span><br><span class="line">10.0.0.71 zabbix.web.com</span><br><span class="line"></span><br><span class="line"><span class="comment">#16.æµè§ˆå™¨è®¿é—®</span></span><br><span class="line">zabbix.web.com</span><br></pre></td></tr></table></figure><ul><li>å¦‚æœæƒ³ä½¿ç”¨10.0.0.71è®¿é—®zabbixæ—¶å€™æŠ¥é”™å¦‚ä¸‹</li></ul><p><img src="https://cos.lukme.top/Pic/QQ_1722756226179.png" alt="QQ_1722756226179"></p><ul><li><p>åŸå› ï¼šä½¿ç”¨ipè®¿é—®é»˜è®¤ä¼šå»æ‰¾<code>/opt/rh/rh-nginx116/root/usr/share/nginx/html</code>.</p></li><li><p><code>/etc/opt/rh/rh-nginx116/nginx/nginx.conf</code>.é‡ŒæŒ‡å‘äº†è·¯å¾„</p></li><li><p>è§£å†³ï¼šåˆ é™¤é»˜è®¤nginxé…ç½®æ–‡ä»¶é‡Œserverå±‚ï¼Œhttpå±‚ä¸‹çš„serverå±‚ï¼Œåˆ æ‰ä¿ç•™å¦‚ä¸‹</p></li><li><p>é‡å¯nginx   <code>systemctl restart rh-nginx116-nginx</code></p></li></ul><p><img src="https://cos.lukme.top/Pic/QQ_1722756503836.png" alt="QQ_1722756503836"></p><p><strong>æµè§ˆå™¨è®¿é—®10.0.0.71</strong></p><p>è¾“å…¥è¿æ¥çš„æ•°æ®åº“hostï¼Œåº“åï¼Œç”¨æˆ·åŠå¯†ç </p><p><img src="https://cos.lukme.top/Pic/QQ_1722756894033.png" alt="QQ_1722756894033"></p><p><img src="https://cos.lukme.top/Pic/QQ_1722757040903.png" alt="QQ_1722757040903"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Usernameï¼šAdmin</span><br><span class="line">Passwordï¼šzabbix</span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/QQ_1722757104745.png" alt="QQ_1722757104745"></p><h4 id="æ±‰åŒ–">æ±‰åŒ–</h4><p><img src="https://cos.lukme.top/Pic/QQ_1722757339488.png" alt="QQ_1722757339488"></p><p><img src="https://cos.lukme.top/Pic/QQ_1722757366149.png" alt="QQ_1722757366149"></p><p><strong>zabbixå›¾å½¢å­—ä½“æ˜¾ç¤ºå¼‚å¸¸è§£å†³</strong></p><p><img src="https://cos.lukme.top/Pic/QQ_1722757866125.png" alt="QQ_1722757866125"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## zabbixå­˜æ”¾å­—ä½“çš„ç›®å½•</span></span><br><span class="line">[root@zabbix5-server ~]# rpm -ql zabbix-web|grep font</span><br><span class="line">/usr/share/zabbix/assets/fonts</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">windowsæ‰“å¼€CMD è¾“å…¥ fonts</span><br><span class="line"><span class="comment"># è¿›å…¥å­—ä½“ç›®å½•,å°†ä¸­æ–‡ç³»ç»Ÿå­—ä½“æ‹–åˆ°zabbixå­—ä½“ç›®å½•</span></span><br><span class="line">[root@zabbix5-server ~]# <span class="built_in">cd</span> /usr/share/zabbix/assets/fonts</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤å­—ä½“ç›®å½•ä¸­çš„é»˜è®¤è½¯é“¾æ¥å­—ä½“æ–‡ä»¶</span></span><br><span class="line">[root@zabbix5-server fonts]# <span class="built_in">rm</span> -f graphfont.ttf</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹å­—ä½“æ–‡ä»¶å</span></span><br><span class="line">[root@zabbix5-server fonts]# <span class="built_in">mv</span> YGYXSZITI2.0.TTF graphfont.ttf</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/QQ_1722757894487.png" alt="QQ_1722757894487"></p><h4 id="å®‰è£…å®¢æˆ·ç«¯">å®‰è£…å®¢æˆ·ç«¯</h4><p><strong>10.0.0.7</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.æ›´æ¢zabbixå®˜æ–¹æº</span></span><br><span class="line">rpm -Uvh https://repo.zabbix.com/zabbix/5.0/rhel/7/x86_64/zabbix-release-5.0-1.el7.noarch.rpm</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.å®‰è£…zabbix-agent</span></span><br><span class="line">yum install -y zabbix-agent</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.ä¿®æ”¹zabbix-agenté…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@web01 ~]# vim /etc/zabbix/zabbix_agentd.conf</span><br><span class="line">Server=172.16.1.71</span><br><span class="line">Hostname=web01</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.å¯åŠ¨zabbix-agent</span></span><br><span class="line">systemctl start zabbix-agent</span><br><span class="line">systemctl <span class="built_in">enable</span> zabbix-agent</span><br><span class="line"></span><br><span class="line">ç«¯å£ï¼š</span><br><span class="line">zabbix-serverï¼š10051</span><br><span class="line">zabbix-agentï¼š10050</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="æ·»åŠ ç›‘æ§ä¸»æœº">æ·»åŠ ç›‘æ§ä¸»æœº</h4><p><img src="https://cos.lukme.top/Pic/QQ_1722758479060.png" alt="QQ_1722758479060"></p><p><img src="https://cos.lukme.top/Pic/QQ_1722758820075.png" alt="QQ_1722758820075"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ç±»å‹ï¼š</span></span><br><span class="line">å®¢æˆ·ç«¯ï¼šzabbix-serverè·å–zabbix-agentçš„æ•°æ®</span><br><span class="line">SNMPï¼šç›‘æ§ç½‘ç»œè®¾å¤‡çš„æ¥å£(äº¤æ¢æœº)</span><br><span class="line">JMXï¼šç›‘æ§JAVAç¨‹åº</span><br><span class="line">IPMIï¼šç›‘æ§ç¡¬ä»¶è®¾å¤‡(ç¡¬ä»¶è´Ÿè½½å‡è¡¡ F5 ç¡¬ä»¶é˜²ç«å¢™)</span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/QQ_1722758979163.png" alt="QQ_1722758979163"></p><p><strong>æ¨¡æ¿é€‰å¥½å°±æ·»åŠ </strong></p><p><img src="https://cos.lukme.top/Pic/QQ_1722759100045.png" alt="QQ_1722759100045"></p><p><strong>è¿”å›ä¸»æœºï¼Œç­‰å¾…åˆ·æ–°å˜ç»¿</strong></p><p><img src="https://cos.lukme.top/Pic/QQ_1722759174786.png" alt="QQ_1722759174786"></p><h3 id="zabbix3-4éƒ¨ç½²">zabbix3.4éƒ¨ç½²</h3><h4 id="éƒ¨ç½²æœåŠ¡ç«¯">éƒ¨ç½²æœåŠ¡ç«¯</h4><p>æ¸…åæºï¼š<a href="https://mirrors.tuna.tsinghua.edu.cn/">https://mirrors.tuna.tsinghua.edu.cn/</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.æ›´æ¢zabbix3.4æº</span></span><br><span class="line">rpm -ivh https://mirrors.tuna.tsinghua.edu.cn/zabbix/zabbix/3.4/rhel/7/x86_64/zabbix-release-3.4-1.el7.centos.noarch.rpm</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.å®‰è£…zabbix-server zabbix-webï¼ˆapacheï¼‰ zabbix-agent</span></span><br><span class="line">yum -y install zabbix-server-mysql zabbix-web-mysql zabbix-agent</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.è¿›å…¥å¹¶åˆ›å»ºæ•°æ®åº“ï¼ˆä½¿ç”¨è¿œç¨‹æ•°æ®åº“ï¼Œ172.16.1.71ï¼Œå®‰è£…æ•°æ®åº“è§zabbix5éƒ¨ç½²ï¼‰</span></span><br><span class="line">mysql</span><br><span class="line">MariaDB [(none)]&gt; create database zabbix3 character <span class="built_in">set</span> utf8 collate utf8_bin;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.åˆ›å»ºç”¨æˆ·ï¼ˆä½¿ç”¨zabbix5åˆ›å»ºçš„ç”¨æˆ·ä¹Ÿå¯ä»¥ï¼‰</span></span><br><span class="line">MariaDB [(none)]&gt; grant all on *.* to zabbix@<span class="string">&#x27;172.16.1.%&#x27;</span> identified by <span class="string">&#x27;123&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.å¯¼å…¥æ•°æ®</span></span><br><span class="line">zcat /usr/share/doc/zabbix-server-mysql-3.4.15/create.sql.gz |mysql -uzabbix -p123 -h172.16.1.71 zabbix3</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.ä¿®æ”¹zabbix-serveré…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@zabbix3-server ~]# vim /etc/zabbix/zabbix_server.conf</span><br><span class="line">DBHost=172.16.1.71</span><br><span class="line">DBName=zabbix3</span><br><span class="line">DBUser=zabbix</span><br><span class="line">DBPassword=123</span><br><span class="line"></span><br><span class="line"><span class="comment"># 7.ä¿®æ”¹apacheé…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@zabbix3-server ~]# vim /etc/httpd/conf.d/zabbix.conf</span><br><span class="line">php_value date.timezone Asia/Shanghai</span><br><span class="line"></span><br><span class="line"><span class="comment"># 8.å¯åŠ¨zabbix</span></span><br><span class="line">systemctl start zabbix-server zabbix-agent httpd</span><br><span class="line">systemctl <span class="built_in">enable</span> zabbix-server zabbix-agent httpd</span><br><span class="line"></span><br><span class="line"><span class="comment">#9.æµè§ˆå™¨è®¿é—®</span></span><br><span class="line">http://10.0.0.72/zabbix/</span><br></pre></td></tr></table></figure><p><strong>å¦‚æœå¯åŠ¨æŠ¥é”™</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">æ£€æŸ¥æ—¥å¿—</span><br><span class="line"><span class="built_in">cat</span> /var/log/zabbix/zabbix_server.log</span><br><span class="line">å¦‚æœæ˜¯å¦‚ä¸‹</span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/QQ_1722761828372.png" alt="QQ_1722761828372"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">åŸå› ï¼š</span><br><span class="line">kernel.semå‚æ•°è®¾ç½®è¿‡å°ï¼Œå…±äº«å†…å­˜ä¿¡å·é‡è®¾ç½®å…±äº«å†…å­˜ï¼š</span><br><span class="line">å¯ä»¥é€šè¿‡ipcs -lmå‘½ä»¤æŸ¥çœ‹ç›®å‰ç³»ç»Ÿå…±äº«å†…å­˜çš„å‚æ•°é™åˆ¶</span><br><span class="line"></span><br><span class="line">è§£å†³ï¼š</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;kernel.sem = 500 64000 64 256&quot;</span> &gt;&gt; /etc/sysctl.conf</span><br><span class="line"></span><br><span class="line">sysctl -p</span><br><span class="line"></span><br><span class="line">systemctl start zabbix-server <span class="comment"># æˆåŠŸ</span></span><br></pre></td></tr></table></figure><p><strong>ç™»å½•æµè§ˆå™¨è®¿é—®</strong></p><p><img src="https://cos.lukme.top/Pic/QQ_1722760000155.png" alt="QQ_1722760000155"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ç™»å½•ç”¨æˆ·ååŠå¯†ç åŒzabbix5</span><br><span class="line">Usernameï¼šAdmin</span><br><span class="line">Passwordï¼šzabbix</span><br><span class="line"></span><br><span class="line">æ±‰åŒ–åŠå­—ä½“å¼‚å¸¸åŒzabbix5</span><br><span class="line"><span class="comment"># 1.æŸ¥æ‰¾zabbixå­˜æ”¾å­—ä½“ç›®å½•</span></span><br><span class="line">[root@zabbix3-server ~]# rpm -ql zabbix-web|grep font</span><br><span class="line">/usr/share/zabbix/fonts</span><br><span class="line"><span class="comment"># 2.è¿›å…¥ç›®å½•</span></span><br><span class="line">[root@zabbix3-server ~]# <span class="built_in">cd</span> /usr/share/zabbix/fonts</span><br><span class="line"><span class="comment"># 3.ä¿®æ”¹å­—ä½“</span></span><br><span class="line">[root@zabbix3-server fonts]# <span class="built_in">rm</span> -f graphfont.ttf</span><br><span class="line">[root@zabbix3-server fonts]# <span class="built_in">mv</span> YGYXSZITI2.0.TTF graphfont.ttf</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/QQ_1722760127865.png" alt="QQ_1722760127865"></p><h4 id="éƒ¨ç½²å®¢æˆ·ç«¯">éƒ¨ç½²å®¢æˆ·ç«¯</h4><p><strong>10.0.0.8</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">https://mirrors.tuna.tsinghua.edu.cn/zabbix/zabbix/3.4/rhel/7/x86_64/</span><br><span class="line"><span class="comment"># 0.å®‰è£…zabbix-agentæº</span></span><br><span class="line">rpm -ivh https://mirrors.tuna.tsinghua.edu.cn/zabbix/zabbix/3.4/rhel/7/x86_64/zabbix-agent-3.4.15-1.el7.x86_64.rpm</span><br><span class="line"></span><br><span class="line"><span class="comment">#1.å®‰è£…zabbix-agent</span></span><br><span class="line">yum -y install zabbix-agent</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.ä¿®æ”¹agenté…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@web02 ~]# vim /etc/zabbix/zabbix_agentd.conf</span><br><span class="line">Server=172.16.1.72</span><br><span class="line">Hostname=web02</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.å¯åŠ¨zabbix-agent</span></span><br><span class="line">systemctl start zabbix-agent</span><br><span class="line">systemctl <span class="built_in">enable</span> zabbix-agent</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/QQ_1722760672992.png" alt="QQ_1722760672992"></p><p><strong>æœç´¢linuxï¼Œæ·»åŠ Template OS Linux</strong></p><p><img src="https://cos.lukme.top/Pic/QQ_1722760735288.png" alt="QQ_1722760735288"></p><p><img src="https://cos.lukme.top/Pic/QQ_1722761703199.png" alt="QQ_1722761703199"></p><p><img src="https://cos.lukme.top/Pic/QQ_1722761797069.png" alt="QQ_1722761797069"></p><hr>]]></content>
      
      
      <categories>
          
          <category> ç›‘æ§ </category>
          
          <category> zabbix </category>
          
      </categories>
      
      
        <tags>
            
            <tag> zabbix </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>zabbixç›‘æ§æ¦‚è¿°</title>
      <link href="/posts/ccb410e2.html"/>
      <url>/posts/ccb410e2.html</url>
      
        <content type="html"><![CDATA[<h3 id="ç›‘æ§ä»‹ç»">ç›‘æ§ä»‹ç»</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.ç³»ç»Ÿçš„ç›‘æ§:å®é™…ä¸Šæ˜¯å¯¹ç³»ç»Ÿä¸é—´æ–­çš„å®æ—¶ç›‘æ§</span><br><span class="line">2.å®æ—¶åé¦ˆç³»ç»Ÿå½“å‰çŠ¶æ€:æˆ‘ä»¬ç›‘æ§æŸä¸ªç¡¬ä»¶ã€æˆ–è€…æŸä¸ªç³»ç»Ÿï¼Œéƒ½æ˜¯éœ€è¦èƒ½å®æ—¶çœ‹åˆ°å½“å‰ç³»ç»Ÿçš„çŠ¶æ€æ˜¯æ­£å¸¸ã€å¼‚å¸¸ã€æˆ–è€…æ•…éšœã€‚</span><br><span class="line">3.ä¿è¯æœåŠ¡å¯é æ€§å®‰å…¨æ€§:æˆ‘ä»¬ç›‘æ§çš„ç›®çš„å°±æ˜¯è¦ä¿è¯ç³»ç»Ÿã€æœåŠ¡ã€ä¸šåŠ¡æ­£å¸¸è¿è¡Œ</span><br><span class="line">4.ä¿è¯ä¸šåŠ¡æŒç»­ç¨³å®šè¿è¡Œ:å¦‚æœæˆ‘ä»¬çš„ç›‘æ§åšå¾—å¾ˆå®Œå–„ï¼Œå³ä½¿å‡ºç°æ•…éšœï¼Œèƒ½ç¬¬ä¸€æ—¶é—´æ¥æ”¶åˆ°æ•…éšœæŠ¥è­¦åœ¨ç¬¬ä¸€æ—¶é—´å¤„ç†è§£å†³ï¼Œä»è€Œä¿è¯ä¸šåŠ¡æŒç»­æ€§çš„ç¨³å®šè¿è¡Œã€‚ï¼ˆå¾€å¾€ï¼Œç¬¬ä¸€æ—¶é—´çŸ¥é“ä¸šåŠ¡å®•æœºçš„éƒ½æ˜¯ç”¨æˆ·ï¼‰</span><br></pre></td></tr></table></figure><p><strong>ç›‘æ§è½¯ä»¶ä»‹ç»</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.CACTI ç½‘ç»œç›‘æ§</span><br><span class="line">2.Nagios ç³»ç»Ÿç›‘æ§        https://www.nagios.com/</span><br><span class="line">3.falcon å°ç±³ç›‘æ§https://open-falcon.github.io/</span><br></pre></td></tr></table></figure><p><strong>ç›‘æ§æœ‰å“ªäº›æ–¹é¢</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">ç¡¬ä»¶å±‚</span><br><span class="line">- CPUæ¸©åº¦</span><br><span class="line">- é£æ‰‡è½¬é€Ÿ</span><br><span class="line">- ç£ç›˜æ˜¯å¦æŸå</span><br><span class="line">- CMOSç”µæ± ç”µé‡</span><br><span class="line">- å†…å­˜æ˜¯å¦æŸå</span><br><span class="line">...</span><br><span class="line">ç³»ç»Ÿå±‚</span><br><span class="line">- CPUï¼šä½¿ç”¨ç‡ã€è´Ÿè½½</span><br><span class="line">- å†…å­˜ï¼šä½¿ç”¨ç‡</span><br><span class="line">- ç£ç›˜ï¼šä½¿ç”¨ç‡ï¼ŒIO</span><br><span class="line">- è¿›ç¨‹</span><br><span class="line">- TCPçŠ¶æ€</span><br><span class="line">- ç³»ç»Ÿè´Ÿè½½</span><br><span class="line">- æ–‡ä»¶æè¿°ç¬¦</span><br><span class="line">...</span><br><span class="line">ç½‘ç»œå±‚</span><br><span class="line">- ç½‘ç»œè®¾å¤‡ï¼šè·¯ç”±å™¨ï¼Œäº¤æ¢æœº</span><br><span class="line">- ç½‘å¡å…¥å£æµé‡</span><br><span class="line">- ç½‘å¡å‡ºå£æµé‡</span><br><span class="line">- å¸¦å®½çš„å³°å€¼</span><br><span class="line">...</span><br><span class="line">åº”ç”¨å±‚</span><br><span class="line">- MySQLï¼šä¸»ä»å¤åˆ¶æ˜¯å¦æœ‰å»¶è¿Ÿï¼ˆzabbixç›‘æ§æ¨¡æ¿ï¼‰</span><br><span class="line">- redisï¼šä¸»ä»å¤åˆ¶æ˜¯å¦æœ‰å»¶è¿Ÿ</span><br><span class="line">- ç›‘æ§æ€è·¯:zabbixæ²¡æœ‰å›ºå®šæ¨¡æ¿ï¼Œå¯ä»¥åœ¨ä¸»åº“ä¸­<span class="built_in">set</span>ä¸€ä¸ªkeyä¸ºæ—¶é—´æˆ³ï¼Œç„¶åä»åº“ä¼šåŒæ­¥è¿™ä¸ªæ—¶</span><br><span class="line">- é—´æˆ³ï¼ˆåŠ¨æ€ï¼‰ï¼Œå†™è„šæœ¬æ—¶æ—¶è·å–è¿™ä¸¤ä¸ªæ—¶é—´æˆ³ï¼Œåšå¯¹æ¯”</span><br><span class="line">- NFSï¼šç£ç›˜æŒ‚è½½çŠ¶å†µ</span><br><span class="line">- tomcatï¼šJVMç›‘æ§ï¼Œè€å¹´ä»£ã€æ–°ç”Ÿä»£ã€æ°¸ä¹…å¸¦ã€full-gcï¼ˆåƒåœ¾å›æ”¶ï¼‰</span><br><span class="line">- rsyncçš„åŒæ­¥æƒ…å†µï¼ŒMD5æ ¡éªŒæ–‡ä»¶æ˜¯å¦è¢«ç¯¡æ”¹</span><br><span class="line">...</span><br><span class="line">ä¸šåŠ¡å±‚</span><br><span class="line">- URLçš„ç›‘æ§</span><br><span class="line">- APIçš„ç›‘æ§</span><br><span class="line">- nginxçš„çŠ¶æ€ç </span><br><span class="line">- tomcatçš„exception</span><br><span class="line">- è¯·æ±‚æ—¶é—´</span><br><span class="line">- å“åº”æ—¶é—´</span><br><span class="line">- åŠ è½½æ—¶é—´</span><br><span class="line">- æ¸²æŸ“æ—¶é—´</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="å¸¸ç”¨ç›‘æ§å‘½ä»¤">å¸¸ç”¨ç›‘æ§å‘½ä»¤</h3><h4 id="CPUç›‘æ§å‘½ä»¤">CPUç›‘æ§å‘½ä»¤</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">[root@web02 ~]# w</span><br><span class="line">10:33:44 up 1:28, 1 user, load average: 0.00, 0.01, 0.05</span><br><span class="line">USER TTY FROM LOGIN@ IDLE JCPU PCPU WHAT</span><br><span class="line">root pts/0 10.0.0.1 09:44 0.00s 0.03s 0.00s w</span><br><span class="line"></span><br><span class="line">é›¶å®½æ–­è¨€</span><br><span class="line">ifconfig eth0|grep -Po <span class="string">&#x27;\d\d\.\d\.\d\.\d(?=  netmask)&#x27;</span></span><br><span class="line">ifconfig eth0|grep -Po <span class="string">&#x27;[1-9][0-9]+\.[0-9]+\.[0-9]+\.[0-9]+(?=  netmask)&#x27;</span></span><br><span class="line">10.0.0.7</span><br><span class="line"></span><br><span class="line">\K æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ PCRE ç¬¦å·ï¼Œè¡¨ç¤ºâ€œå¿½ç•¥ä¹‹å‰çš„åŒ¹é…â€ï¼Œ</span><br><span class="line">ifconfig eth0 | grep -oP <span class="string">&#x27;inet \K(\d+\.\d+\.\d+\.\d+)&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@web02 ~]# top</span><br><span class="line"></span><br><span class="line">[root@web02 ~]# htop</span><br><span class="line">[root@web02 ~]# glances</span><br><span class="line">[root@web02 ~]# <span class="built_in">uptime</span></span><br><span class="line">10:37:12 up 1:32, 1 user, load average: 0.13, 0.09, 0.01</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¸ç®¡ç”¨ä»€ä¹ˆå‘½ä»¤ç›‘æ§ï¼ŒæŸ¥çœ‹CPUï¼Œæˆ‘ä»¬éƒ½å¿…é¡»äº†è§£ï¼Œç³»ç»Ÿçš„ç”¨æˆ·æ€å’Œå†…å’Œæ€ã€‚</span></span><br><span class="line">%Cpu(s): 0.0 us, 0.0 sy, 0.0 ni,100.0 <span class="built_in">id</span>, 0.0 wa, 0.0 hi, 0.0 si, 0.0 st</span><br><span class="line">us: ç”¨æˆ·æ€ è·Ÿç”¨æˆ·çš„æ“ä½œæœ‰å…³35%</span><br><span class="line">sy: å†…å’Œæ€ è·Ÿå†…æ ¸çš„å¤„ç†æœ‰å…³65%</span><br><span class="line"><span class="built_in">id</span>: CPUç©ºé—²</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹å‘½ä»¤æ‰§è¡Œæ—¶é—´</span></span><br><span class="line">[root@web02 ~]# time <span class="built_in">ls</span></span><br><span class="line">backup.sh group_vars_web_group</span><br><span class="line">real 0m0.002s çœŸå®æ‰§è¡Œæ—¶é—´</span><br><span class="line">user 0m0.001s ç”¨æˆ·æ‰§è¡Œæ—¶é—´</span><br><span class="line">sys 0m0.001s ç³»ç»Ÿæ‰§è¡Œæ—¶é—´</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å†…å­˜ç›‘æ§å‘½ä»¤">å†…å­˜ç›‘æ§å‘½ä»¤</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">[root@web02 ~]# free -m</span><br><span class="line">   total used free shared buff/cache available</span><br><span class="line">Mem: 972 94 588 7 290 712</span><br><span class="line">Swap: 1023 0 1023</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## å¦‚ä½•æŸ¥çœ‹å•ä¸ªè¿›ç¨‹å ç”¨å†…å­˜ï¼Ÿ</span></span><br><span class="line"><span class="comment">#è¿›ç¨‹å ç”¨å†…å­˜å…¬å¼</span></span><br><span class="line">pmem = VmRSS / MemTotal * 100</span><br><span class="line">process mem = è™šæ‹Ÿå†…å­˜ / æ€»å†…å­˜ * 100</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@web02 ~]# <span class="built_in">cat</span> mem.py</span><br><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># _*_ coding:UTF-8 _*_</span></span><br><span class="line"><span class="comment"># æ”¶é›†ç¨‹åºæ‰€å ç”¨çš„ç‰©ç†å†…å­˜å¤§å°ï¼Œå æ‰€æœ‰ç‰©ç†å†…å­˜çš„æ¯”ä¾‹</span></span><br><span class="line"><span class="comment"># Python: 2.7.6</span></span><br><span class="line">import sys</span><br><span class="line">import os</span><br><span class="line">from subprocess import Popen,PIPE</span><br><span class="line"></span><br><span class="line">def get_pid(program):</span><br><span class="line"><span class="string">&#x27;è·å–ç›®æ ‡ç¨‹åºçš„PIDåˆ—è¡¨&#x27;</span></span><br><span class="line">p = Popen([<span class="string">&#x27;pidof&#x27;</span>,program],stdout=PIPE,stderr=PIPE)</span><br><span class="line">pids,stderrput = p.communicate()</span><br><span class="line"><span class="comment"># pids = p.stdout.read() #è¿™ç§æ–¹æ³•ä¹Ÿæ˜¯å¯ä»¥çš„</span></span><br><span class="line"><span class="comment"># è¿™é‡Œä¹Ÿå¯ä»¥å¯¹stderrputæ¥è¿›è¡Œåˆ¤æ–­</span></span><br><span class="line"><span class="keyword">if</span> pids:</span><br><span class="line"><span class="built_in">return</span> pids.split()</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">raise ValueError</span><br><span class="line"></span><br><span class="line">def mem_calc(pids):</span><br><span class="line"><span class="string">&#x27;è®¡ç®—PIDså ç”¨çš„å†…å­˜å¤§å°&#x27;</span></span><br><span class="line">mem_total = 0</span><br><span class="line"><span class="keyword">for</span> pid <span class="keyword">in</span> pids:</span><br><span class="line">os.chdir(<span class="string">&#x27;/proc/%s&#x27;</span> % pid)</span><br><span class="line">with open(<span class="string">&#x27;status&#x27;</span>) as fd:</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> fd:</span><br><span class="line"><span class="keyword">if</span> line.startswith(<span class="string">&#x27;VmRSS&#x27;</span>):</span><br><span class="line">mem = line.strip().<span class="built_in">split</span>()[1]</span><br><span class="line">mem_total += int(mem)</span><br><span class="line"><span class="built_in">break</span></span><br><span class="line"><span class="built_in">return</span> mem_total</span><br><span class="line"></span><br><span class="line">def mem_percent(mem):</span><br><span class="line"><span class="string">&#x27;è®¡ç®—ç¨‹åºå†…å­˜å ç”¨ç‰©ç†å†…å­˜çš„ç™¾åˆ†æ¯”&#x27;</span></span><br><span class="line">with open(<span class="string">&#x27;/proc/meminfo&#x27;</span>) as fd:</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> fd:</span><br><span class="line"><span class="keyword">if</span> line.startswith(<span class="string">&#x27;MemTotal&#x27;</span>):</span><br><span class="line">total = line.strip().<span class="built_in">split</span>()[1]</span><br><span class="line">percent = (<span class="built_in">float</span>(mem)/int(total)) * 100</span><br><span class="line"><span class="built_in">return</span> percent</span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">try:</span><br><span class="line">program = sys.argv[1]</span><br><span class="line">pids = get_pid(program)</span><br><span class="line">except IndexError as e:</span><br><span class="line">sys.exit(<span class="string">&#x27;%s need a Program name &#x27;</span> % __file__)</span><br><span class="line">except ValueError as e:</span><br><span class="line">sys.exit(<span class="string">&#x27;%s not a Process Name or not Start&#x27;</span> % program )</span><br><span class="line">mem_total = mem_calc(pids)</span><br><span class="line">percent = mem_percent(mem_total)</span><br><span class="line"><span class="built_in">return</span> program,mem_total,percent</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">program,mem_total,mem_percent=main()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;è¿›ç¨‹åç§°:%s\nç‰©ç†å†…å­˜ä¸º:%s\nç™¾åˆ†æ¯”ä¸º:%.2f%%&#x27;</span>%</span><br><span class="line">(program,mem_total,mem_percent))</span><br></pre></td></tr></table></figure><h4 id="ç£ç›˜ç›‘æ§å‘½ä»¤">ç£ç›˜ç›‘æ§å‘½ä»¤</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@web02 ~]# <span class="built_in">df</span> -h</span><br><span class="line"></span><br><span class="line">[root@web02 ~]# iotop</span><br><span class="line">[root@web02 ~]# iostat -dm 1 10</span><br><span class="line">[root@web01 ~]# iostat -dm 1 10</span><br><span class="line">Linux 3.10.0-957.el7.x86_64 (web01)     08/04/2024      _x86_64_        (1 CPU)</span><br><span class="line"></span><br><span class="line">Device:            tps    MB_read/s    MB_wrtn/s    MB_read    MB_wrtn</span><br><span class="line">scd0              0.00         0.00         0.00          1          0</span><br><span class="line">sda               1.08         0.02         0.00         93         15</span><br><span class="line">[root@web02 ~]# dstat</span><br><span class="line">----total-cpu-usage---- -dsk/total- -net/total- ---paging-- ---system--</span><br><span class="line">usr sys idl wai hiq siq| <span class="built_in">read</span>  writ| recv  send|  <span class="keyword">in</span>   out | int   csw </span><br><span class="line">  0   0  99   0   0   0|  36k   45k|   0     0 |   0     0 |  56   125 </span><br><span class="line">  0   0 100   0   0   0|   0     0 |  60B  874B|   0     0 |  56    94 </span><br></pre></td></tr></table></figure><h4 id="ç½‘ç»œç›‘æ§å‘½ä»¤">ç½‘ç»œç›‘æ§å‘½ä»¤</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@web02 ~]# ifconfig</span><br><span class="line">[root@web02 ~]# iftop</span><br><span class="line">[root@web02 ~]# nethogs</span><br><span class="line">[root@web02 ~]# route -n</span><br><span class="line">Kernel IP routing table</span><br><span class="line">Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span><br><span class="line">0.0.0.0         10.0.0.254      0.0.0.0         UG    102    0        0 eth0</span><br><span class="line">10.0.0.0        0.0.0.0         255.255.255.0   U     102    0        0 eth0</span><br><span class="line">172.16.1.0      0.0.0.0         255.255.255.0   U     101    0        0 eth1</span><br></pre></td></tr></table></figure><h4 id="TCPç›‘æ§å‘½ä»¤">TCPç›‘æ§å‘½ä»¤</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@web01 ~]# netstat -an|awk <span class="string">&#x27;/^tcp/ &#123;print $NF&#125;&#x27;</span>|<span class="built_in">sort</span>|<span class="built_in">uniq</span> -c</span><br><span class="line">      2 ESTABLISHED</span><br><span class="line">      6 LISTEN</span><br><span class="line">[root@web01 ~]# netstat -an|awk <span class="string">&#x27;/^tcp/ &#123;++state[$NF]&#125; END &#123;for(key in state)print key,&quot; \t&quot; ,state[key]&#125;&#x27;</span></span><br><span class="line">LISTEN           6</span><br><span class="line">ESTABLISHED      2</span><br><span class="line">[root@web02 ~]# ss -n|awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>|<span class="built_in">sort</span>|<span class="built_in">uniq</span> -c</span><br><span class="line">     89 ESTAB</span><br><span class="line">      1 State</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="ç³»ç»Ÿçš„oom">ç³»ç»Ÿçš„oom</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">éšç€æ—¶é—´çš„æ¨ç§»ï¼Œç”¨æˆ·ä¸æ–­å¢å¤šï¼ŒæœåŠ¡æ¶ˆè€—çš„å†…å­˜è¶Šæ¥è¶Šå¤šï¼Œå½“ç³»ç»Ÿå†…å­˜ä¸è¶³çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç³»ç»Ÿäº§ç”Ÿoomï¼ˆout of memoryï¼‰</span><br><span class="line">1.å½“ç³»ç»Ÿå†…å­˜ä¸è¶³æ—¶å°±ä¼šå¤§é‡ä½¿ç”¨swapï¼ˆè™šæ‹Ÿå†…å­˜ï¼‰</span><br><span class="line">2.å½“ç³»ç»Ÿå¤§é‡ä½¿ç”¨swapçš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šç‰¹åˆ«å¡</span><br><span class="line"></span><br><span class="line">æ³¨æ„ï¼šæœ‰æ—¶å¯èƒ½å†…å­˜è¿˜æœ‰å‰©ä½™300Mæˆ–è€…500Mï¼Œä½†æ˜¯swapä¾ç„¶è¢«ä½¿ç”¨</span><br><span class="line"></span><br><span class="line">[root@web02 ~]# <span class="built_in">dd</span> &lt; /dev/zero &gt; /dev/null bs=2000M</span><br><span class="line">[root@web02 ~]# <span class="built_in">tail</span> -f /var/log/messages</span><br><span class="line">Out of memory: Kill process 29957 (<span class="built_in">dd</span>) score 366 or sacrifice child</span><br><span class="line">Killed process 29957 (<span class="built_in">dd</span>) total-vm:2532680kB, anon-rss:1416508kB, filers:0kB</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç›‘æ§ </category>
          
          <category> zabbix </category>
          
      </categories>
      
      
        <tags>
            
            <tag> zabbix </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLçš„è¯»å†™åˆ†ç¦»</title>
      <link href="/posts/12e80162.html"/>
      <url>/posts/12e80162.html</url>
      
        <content type="html"><![CDATA[<h2 id="è¯»å†™åˆ†ç¦»è½¯ä»¶">è¯»å†™åˆ†ç¦»è½¯ä»¶</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Atlasæ˜¯ç”± Qihoo 360å…¬å¸Webå¹³å°éƒ¨åŸºç¡€æ¶æ„å›¢é˜Ÿå¼€å‘ç»´æŠ¤çš„ä¸€ä¸ªåŸºäºMySQLåè®®çš„æ•°æ®ä¸­é—´å±‚é¡¹ ç›®ã€‚å®ƒåœ¨MySQLå®˜æ–¹æ¨å‡ºçš„MySQL-Proxy 0.8.2ç‰ˆæœ¬çš„åŸºç¡€ä¸Šï¼Œä¿®æ”¹äº†å¤§é‡bugï¼Œæ·»åŠ äº†å¾ˆå¤šåŠŸèƒ½ç‰¹ æ€§ã€‚ç›®å‰è¯¥é¡¹ç›®åœ¨360å…¬å¸å†…éƒ¨å¾—åˆ°äº†å¹¿æ³›åº”ç”¨ï¼Œå¾ˆå¤šMySQLä¸šåŠ¡å·²ç»æ¥å…¥äº†Atlaså¹³å°ï¼Œæ¯å¤©æ‰¿è½½çš„è¯» å†™è¯·æ±‚æ•°è¾¾å‡ åäº¿æ¡ã€‚åŒæ—¶ï¼Œæœ‰è¶…è¿‡50å®¶å…¬å¸åœ¨ç”Ÿäº§ç¯å¢ƒä¸­éƒ¨ç½²äº†Atlasï¼Œè¶…è¿‡800äººå·²åŠ å…¥äº†æˆ‘ä»¬çš„å¼€ å‘è€…äº¤æµç¾¤ï¼Œå¹¶ä¸”è¿™äº›æ•°å­—è¿˜åœ¨ä¸æ–­å¢åŠ ã€‚</span><br><span class="line"></span><br><span class="line">mysql-proxy</span><br><span class="line">Atlasï¼šé˜¿é‡Œ</span><br><span class="line">Atlasï¼š360</span><br><span class="line">mycat</span><br></pre></td></tr></table></figure><p>AtlasåŠŸèƒ½</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.è¯»å†™åˆ†ç¦»</span><br><span class="line">2.ä»åº“è´Ÿè½½å‡è¡¡</span><br><span class="line">3.IPè¿‡æ»¤</span><br><span class="line">4.è‡ªåŠ¨åˆ†è¡¨</span><br><span class="line">5.DBAå¯å¹³æ»‘ä¸Šä¸‹çº¿DB</span><br><span class="line">6.è‡ªåŠ¨æ‘˜é™¤å®•æœºçš„DB</span><br></pre></td></tr></table></figure><p><strong>Atlasç›¸å¯¹äºå®˜æ–¹MySQL-Proxyçš„ä¼˜åŠ¿</strong></p><p>1.å°†ä¸»æµç¨‹ä¸­æ‰€æœ‰ Lua ä»£ç ç”¨Cé‡å†™ï¼ŒLuaä»…ç”¨äºç®¡ç†æ¥å£</p><p>2.é‡å†™ç½‘ç»œæ¨¡å‹ã€çº¿ç¨‹æ¨¡å‹</p><p>3.å®ç°äº†çœŸæ­£æ„ä¹‰ä¸Šçš„è¿æ¥æ± </p><p>4.ä¼˜åŒ–äº†é”æœºåˆ¶ï¼Œæ€§èƒ½æé«˜æ•°åå€</p><p><img src="https://cos.lukme.top/Pic/QQ_1724851191524.png" alt="QQ_1724851191524"></p><h2 id="å®‰è£…é…ç½®Atlas">å®‰è£…é…ç½®Atlas</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.ä¸‹è½½atlas</span></span><br><span class="line">[root@mha-manager ~]# wget http://test.driverzeng.com/MySQL_plugins/Atlas-2.2.1.el6.x86_64.rpm</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.å®‰è£…Atlas</span></span><br><span class="line">[root@mha-manager ~]# rpm -ivh Atlas-2.2.1.el6.x86_64.rpm</span><br><span class="line">[root@mha-manager ~]# ll /usr/local/mysql-proxy/</span><br><span class="line">drwxr-xr-x 2 root root 75 Aug 28 15:54 bin <span class="comment"># ç¨‹åºç›¸å…³å‘½ä»¤</span></span><br><span class="line">drwxr-xr-x 2 root root 22 Aug 28 15:54 conf <span class="comment"># ç¨‹åºç›¸å…³é…ç½®</span></span><br><span class="line">drwxr-xr-x 3 root root 331 Aug 28 15:54 lib <span class="comment"># ç¨‹åºç›¸å…³æ’ä»¶</span></span><br><span class="line">drwxr-xr-x 2 root root 6 Dec 17 2014 <span class="built_in">log</span> <span class="comment"># ç¨‹åºç›¸å…³æ—¥å¿—</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.ä¿®æ”¹é…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@db01 ~]# <span class="built_in">cat</span> /usr/local/mysql-proxy/conf/test.cnf </span><br><span class="line">[mysql-proxy]</span><br><span class="line"><span class="comment">#å¸¦#å·çš„ä¸ºéå¿…éœ€çš„é…ç½®é¡¹ç›®</span></span><br><span class="line"><span class="comment">#ç®¡ç†æ¥å£çš„ç”¨æˆ·å</span></span><br><span class="line">admin-username = user</span><br><span class="line"></span><br><span class="line"><span class="comment">#ç®¡ç†æ¥å£çš„å¯†ç </span></span><br><span class="line">admin-password = <span class="built_in">pwd</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Atlasåç«¯è¿æ¥çš„MySQLä¸»åº“çš„IPå’Œç«¯å£ï¼Œå¯è®¾ç½®å¤šé¡¹ï¼Œç”¨é€—å·åˆ†éš”</span></span><br><span class="line">proxy-backend-addresses = 172.16.1.51:3306</span><br><span class="line"></span><br><span class="line"><span class="comment">#Atlasåç«¯è¿æ¥çš„MySQLä»åº“çš„IPå’Œç«¯å£ï¼Œ@åé¢çš„æ•°å­—ä»£è¡¨æƒé‡ï¼Œç”¨æ¥ä½œè´Ÿè½½å‡è¡¡ï¼Œè‹¥çœç•¥åˆ™é»˜è®¤ä¸º1ï¼Œå¯è®¾ç½®å¤šé¡¹ï¼Œç”¨é€—å·åˆ†éš”</span></span><br><span class="line">proxy-read-only-backend-addresses = 172.16.1.52:3306@1,172.16.1.53:3306@1,172.16.1.54:3306@1</span><br><span class="line"></span><br><span class="line"><span class="comment">#ç”¨æˆ·åä¸å…¶å¯¹åº”çš„åŠ å¯†è¿‡çš„MySQLå¯†ç ï¼Œå¯†ç ä½¿ç”¨PREFIX/binç›®å½•ä¸‹çš„åŠ å¯†ç¨‹åºencryptåŠ å¯†ï¼Œä¸‹è¡Œçš„user1å’Œuser2ä¸ºç¤ºä¾‹ï¼Œå°†å…¶æ›¿æ¢ä¸ºä½ çš„MySQLçš„ç”¨æˆ·åå’ŒåŠ å¯†å¯†ç ï¼</span></span><br><span class="line">pwds = root:3yb5jEku5h4=, mha:3yb5jEku5h4=</span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾ç½®Atlasçš„è¿è¡Œæ–¹å¼ï¼Œè®¾ä¸ºtrueæ—¶ä¸ºå®ˆæŠ¤è¿›ç¨‹æ–¹å¼ï¼Œè®¾ä¸ºfalseæ—¶ä¸ºå‰å°æ–¹å¼ï¼Œä¸€èˆ¬å¼€å‘è°ƒè¯•æ—¶è®¾ä¸ºfalseï¼Œçº¿ä¸Šè¿è¡Œæ—¶è®¾ä¸ºtrue,trueåé¢ä¸èƒ½æœ‰ç©ºæ ¼ã€‚</span></span><br><span class="line">daemon = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾ç½®Atlasçš„è¿è¡Œæ–¹å¼ï¼Œè®¾ä¸ºtrueæ—¶Atlasä¼šå¯åŠ¨ä¸¤ä¸ªè¿›ç¨‹ï¼Œä¸€ä¸ªä¸ºmonitorï¼Œä¸€ä¸ªä¸ºworkerï¼Œmonitoråœ¨workeræ„å¤–é€€å‡ºåä¼šè‡ªåŠ¨å°†å…¶é‡å¯ï¼Œè®¾ä¸ºfalseæ—¶åªæœ‰workerï¼Œæ²¡æœ‰monitorï¼Œä¸€èˆ¬å¼€å‘è°ƒè¯•æ—¶è®¾ä¸ºfalseï¼Œçº¿ä¸Šè¿è¡Œæ—¶è®¾ä¸ºtrue,trueåé¢ä¸èƒ½æœ‰ç©ºæ ¼ã€‚</span></span><br><span class="line">keepalive = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å·¥ä½œçº¿ç¨‹æ•°ï¼Œå¯¹Atlasçš„æ€§èƒ½æœ‰å¾ˆå¤§å½±å“ï¼Œå¯æ ¹æ®æƒ…å†µé€‚å½“è®¾ç½®</span></span><br><span class="line">event-threads = 8</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ—¥å¿—çº§åˆ«ï¼Œåˆ†ä¸ºmessageã€warningã€criticalã€errorã€debugäº”ä¸ªçº§åˆ«</span></span><br><span class="line">log-level = error</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ—¥å¿—å­˜æ”¾çš„è·¯å¾„</span></span><br><span class="line">log-path = /usr/local/mysql-proxy/log</span><br><span class="line"></span><br><span class="line"><span class="comment">#SQLæ—¥å¿—çš„å¼€å…³ï¼Œå¯è®¾ç½®ä¸ºOFFã€ONã€REALTIMEï¼ŒOFFä»£è¡¨ä¸è®°å½•SQLæ—¥å¿—ï¼ŒONä»£è¡¨è®°å½•SQLæ—¥å¿—ï¼ŒREALTIMEä»£è¡¨è®°å½•SQLæ—¥å¿—ä¸”å®æ—¶å†™å…¥ç£ç›˜ï¼Œé»˜è®¤ä¸ºOFF</span></span><br><span class="line">sql-log = ON</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ…¢æ—¥å¿—è¾“å‡ºè®¾ç½®ã€‚å½“è®¾ç½®äº†è¯¥å‚æ•°æ—¶ï¼Œåˆ™æ—¥å¿—åªè¾“å‡ºæ‰§è¡Œæ—¶é—´è¶…è¿‡sql-log-slowï¼ˆå•ä½ï¼šms)çš„æ—¥å¿—è®°å½•ã€‚ä¸è®¾ç½®è¯¥å‚æ•°åˆ™è¾“å‡ºå…¨éƒ¨æ—¥å¿—ã€‚</span></span><br><span class="line"><span class="comment">#sql-log-slow = 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å®ä¾‹åç§°ï¼Œç”¨äºåŒä¸€å°æœºå™¨ä¸Šå¤šä¸ªAtlaså®ä¾‹é—´çš„åŒºåˆ†</span></span><br><span class="line"><span class="comment">#instance = test</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Atlasç›‘å¬çš„å·¥ä½œæ¥å£IPå’Œç«¯å£</span></span><br><span class="line">proxy-address = 0.0.0.0:1234</span><br><span class="line"></span><br><span class="line"><span class="comment">#Atlasç›‘å¬çš„ç®¡ç†æ¥å£IPå’Œç«¯å£</span></span><br><span class="line">admin-address = 0.0.0.0:2345</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ†è¡¨è®¾ç½®ï¼Œæ­¤ä¾‹ä¸­personä¸ºåº“åï¼Œmtä¸ºè¡¨åï¼Œidä¸ºåˆ†è¡¨å­—æ®µï¼Œ3ä¸ºå­è¡¨æ•°é‡ï¼Œå¯è®¾ç½®å¤šé¡¹ï¼Œä»¥é€—å·åˆ†éš”ï¼Œè‹¥ä¸åˆ†è¡¨åˆ™ä¸éœ€è¦è®¾ç½®è¯¥é¡¹</span></span><br><span class="line"><span class="comment">#tables = person.mt.id.3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#é»˜è®¤å­—ç¬¦é›†ï¼Œè®¾ç½®è¯¥é¡¹åå®¢æˆ·ç«¯ä¸å†éœ€è¦æ‰§è¡ŒSET NAMESè¯­å¥</span></span><br><span class="line">charset = utf8</span><br><span class="line"></span><br><span class="line"><span class="comment">#å…è®¸è¿æ¥Atlasçš„å®¢æˆ·ç«¯çš„IPï¼Œå¯ä»¥æ˜¯ç²¾ç¡®IPï¼Œä¹Ÿå¯ä»¥æ˜¯IPæ®µï¼Œä»¥é€—å·åˆ†éš”ï¼Œè‹¥ä¸è®¾ç½®è¯¥é¡¹åˆ™å…è®¸æ‰€æœ‰IPè¿æ¥ï¼Œå¦åˆ™åªå…è®¸åˆ—è¡¨ä¸­çš„IPè¿æ¥</span></span><br><span class="line">client-ips = 127.0.0.1, 172.16.1</span><br><span class="line"></span><br><span class="line"><span class="comment">#Atlaså‰é¢æŒ‚æ¥çš„LVSçš„ç‰©ç†ç½‘å¡çš„IP(æ³¨æ„ä¸æ˜¯è™šIP)ï¼Œè‹¥æœ‰LVSä¸”è®¾ç½®äº†client-ipsåˆ™æ­¤é¡¹å¿…é¡»è®¾ç½®ï¼Œå¦åˆ™å¯ä»¥ä¸è®¾ç½®</span></span><br><span class="line"><span class="comment">#lvs-ips = 192.168.1.1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#4.å¯åŠ¨Atlas</span></span><br><span class="line">[root@mha ~]# /usr/local/mysql-proxy/bin/mysql-proxyd <span class="built_in">test</span> start</span><br></pre></td></tr></table></figure><h2 id="Atlasç®¡ç†æ¥å£ä½¿ç”¨">Atlasç®¡ç†æ¥å£ä½¿ç”¨</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿æ¥ç®¡ç†æ¥å£</span></span><br><span class="line">[root@mha-manager ~]# mysql -uuser -ppwd -h127.0.0.1 -P2345</span><br><span class="line"></span><br><span class="line"><span class="comment">## æŸ¥çœ‹å¸®åŠ©</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * from <span class="built_in">help</span>;</span><br><span class="line">db01 [(none)]&gt;<span class="keyword">select</span> * from <span class="built_in">help</span>;</span><br><span class="line">+----------------------------+---------------------------------------------------------+</span><br><span class="line">| <span class="built_in">command</span>                    | description                                             |</span><br><span class="line">+----------------------------+---------------------------------------------------------+</span><br><span class="line">| SELECT * FROM <span class="built_in">help</span>         | æŸ¥çœ‹å¸®åŠ©</span><br><span class="line">| SELECT * FROM backends     | æŸ¥çœ‹åç«¯æ•°æ®åº“</span><br><span class="line">| SET OFFLINE <span class="variable">$backend_id</span>    | ä¸‹çº¿æ•°æ®åº“ <span class="built_in">set</span> offline 2;</span><br><span class="line">| SET ONLINE <span class="variable">$backend_id</span>     | ä¸Šçº¿æ•°æ®åº“ <span class="built_in">set</span> online 2;</span><br><span class="line">| ADD MASTER <span class="variable">$backend</span>        | æ·»åŠ ä¸€ä¸ªä¸»åº“ add master 172.16.1.88:3306;</span><br><span class="line">| ADD SLAVE <span class="variable">$backend</span>         | æ·»åŠ ä¸€ä¸ªä»åº“ add slave 172.16.1.77:3306;</span><br><span class="line">| REMOVE BACKEND <span class="variable">$backend_id</span> | åˆ é™¤åç«¯æ•°æ®åº“ remove backend 2;</span><br><span class="line">| SELECT * FROM clients      | æŸ¥çœ‹å¯è¿æ¥çš„å®¢æˆ·ç«¯ <span class="keyword">select</span> * from clients</span><br><span class="line">| ADD CLIENT <span class="variable">$client</span>         | æ·»åŠ ä¸€ä¸ªå¯è¿æ¥atlasçš„å®¢æˆ·ç«¯ add client 10.0.0;</span><br><span class="line">| REMOVE CLIENT <span class="variable">$client</span>      | åˆ é™¤å®¢æˆ·ç«¯ remove client 10.0.0 </span><br><span class="line">| SELECT * FROM pwds         | æŸ¥çœ‹æ‰€æœ‰å¯è¿æ¥atlasçš„ç”¨æˆ·å’Œå¯†ç  <span class="keyword">select</span> * from pwds;</span><br><span class="line">| ADD PWD <span class="variable">$pwd</span>               | æ·»åŠ ä¸€ä¸ªæ˜æ–‡çš„å¯†ç ç”¨æˆ· add <span class="built_in">pwd</span> mha:mha;</span><br><span class="line">| ADD ENPWD <span class="variable">$pwd</span>             | æ·»åŠ ä¸€ä¸ªåŠ å¯†çš„å¯†ç ç”¨æˆ· add enpwd tls:O2jBXONX098=;</span><br><span class="line">| REMOVE PWD <span class="variable">$pwd</span>            | åˆ é™¤ç”¨æˆ· remove <span class="built_in">pwd</span> zls;</span><br><span class="line">| SAVE CONFIG                | ä¿å­˜é…ç½®æ–‡ä»¶</span><br><span class="line">| SELECT VERSION             | æŸ¥çœ‹atlasç‰ˆæœ¬å·</span><br><span class="line">+----------------------------+---------------------------------------------------------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## æŸ¥çœ‹åç«¯æ•°æ®åº“   ----rw ä¸»åº“   ----roä»åº“</span></span><br><span class="line">db01 [(none)]&gt;<span class="keyword">select</span> * from backends;</span><br><span class="line">+-------------+------------------+-------+------+</span><br><span class="line">| backend_ndx | address          | state | <span class="built_in">type</span> |</span><br><span class="line">+-------------+------------------+-------+------+</span><br><span class="line">|           1 | 172.16.1.51:3306 | up    | rw   |</span><br><span class="line">|           2 | 172.16.1.52:3306 | up    | ro   |</span><br><span class="line">|           3 | 172.16.1.53:3306 | up    | ro   |</span><br><span class="line">|           4 | 172.16.1.54:3306 | up    | ro   |</span><br><span class="line">+-------------+------------------+-------+------+</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¹³æ»‘ä¸‹çº¿DB</span></span><br><span class="line">mysql&gt; <span class="built_in">set</span> offline 2;</span><br><span class="line"><span class="comment"># å¹³æ»‘ä¸Šçº¿</span></span><br><span class="line">mysql&gt; <span class="built_in">set</span> online 2;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Atlasç»“åˆMHAè„šæœ¬">Atlasç»“åˆMHAè„šæœ¬</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">mha_log=<span class="string">&quot;/etc/mha/logs/manager.log&quot;</span></span><br><span class="line">down_master=$(sed -nr <span class="string">&#x27;s#(.*)\(.*\) \(current master\)$#\1#gp&#x27;</span> <span class="variable">$&#123;mha_log&#125;</span>|tail-1)</span><br><span class="line">new_master=$(sed -nr <span class="string">&#x27;s#(.*)\(.*\) \(new master\)$#\1#gp&#x27;</span> /etc/mha/logs/manager.log|<span class="built_in">tail</span> -1)</span><br><span class="line"></span><br><span class="line">atlas_manager_user=<span class="string">&#x27;user&#x27;</span></span><br><span class="line">atlas_manager_password=<span class="string">&#x27;pwd&#x27;</span></span><br><span class="line">atlas_manager_port=<span class="string">&#x27;2345&#x27;</span></span><br><span class="line">atlas_conn=<span class="string">&quot;mysql -u<span class="variable">$&#123;atlas_manager_user&#125;</span> -p<span class="variable">$&#123;atlas_manager_password&#125;</span> -P<span class="variable">$&#123;atlas_manager_port&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> atlas_ip <span class="keyword">in</span> 51 52 53 54;<span class="keyword">do</span></span><br><span class="line">  down_master_backend_id=$(<span class="variable">$&#123;atlas_conn&#125;</span> -h172.16.1.<span class="variable">$&#123;atlas_ip&#125;</span> -e <span class="string">&#x27;select * from backends&#x27;</span>|grep <span class="string">&quot;<span class="variable">$&#123;new_master&#125;</span>&quot;</span>|awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span>)</span><br><span class="line">  <span class="variable">$&#123;atlas_conn&#125;</span> -h172.16.1.<span class="variable">$&#123;atlas_ip&#125;</span> -e <span class="string">&quot;remove backend <span class="variable">$&#123;down_master_backend_id&#125;</span>&quot;</span> </span><br><span class="line">  <span class="variable">$&#123;atlas_conn&#125;</span> -h172.16.1.<span class="variable">$&#123;atlas_ip&#125;</span> -e <span class="string">&quot;add slave <span class="variable">$&#123;down_master&#125;</span>:3306;save config&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@mha-manager ~]# vim /etc/mha/app1/master_ip_failover</span><br><span class="line">sub <span class="function"><span class="title">start_vip</span></span>() &#123;</span><br><span class="line">`ssh <span class="variable">$ssh_user</span>\@<span class="variable">$new_master_host</span> \&quot; <span class="variable">$ssh_start_vip</span> \&quot;`;</span><br><span class="line">`/bin/sh -x \&quot;/root/atlas_mha.sh\&quot;`;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">mysqladmin  -umha -pmha -h172.16.1.55 ping</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
            <tag> MHA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLçš„MHAé«˜å¯ç”¨</title>
      <link href="/posts/df39ce32.html"/>
      <url>/posts/df39ce32.html</url>
      
        <content type="html"><![CDATA[<h2 id="MHAä»‹ç»åŠç»„æˆ">MHAä»‹ç»åŠç»„æˆ</h2><h3 id="MHAä»‹ç»">MHAä»‹ç»</h3><p>â€‹MHAèƒ½å¤Ÿåœ¨è¾ƒçŸ­çš„æ—¶é—´å†…å®ç°è‡ªåŠ¨æ•…éšœæ£€æµ‹å’Œæ•…éšœè½¬ç§»ï¼Œé€šå¸¸åœ¨10-30ç§’ä»¥å†…;åœ¨å¤åˆ¶æ¡†æ¶ä¸­ï¼ŒMHAèƒ½å¤Ÿå¾ˆå¥½åœ°è§£å†³å¤åˆ¶è¿‡ç¨‹ä¸­çš„æ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼Œç”±äºä¸éœ€è¦åœ¨ç°æœ‰çš„replicationä¸­æ·»åŠ é¢å¤–çš„æœåŠ¡å™¨ï¼Œä»…éœ€è¦ä¸€ä¸ªmanagerèŠ‚ç‚¹ï¼Œè€Œä¸€ä¸ªManagerèƒ½ç®¡ç†å¤šå¥—å¤åˆ¶ï¼Œæ‰€ä»¥èƒ½å¤§å¤§åœ°èŠ‚çº¦æœåŠ¡å™¨çš„æ•°é‡;å¦å¤–ï¼Œå®‰è£…ç®€å•ï¼Œæ— æ€§èƒ½æŸè€—ï¼Œä»¥åŠä¸éœ€è¦ä¿®æ”¹ç°æœ‰çš„å¤åˆ¶éƒ¨ç½²ä¹Ÿæ˜¯å®ƒçš„ä¼˜åŠ¿ä¹‹å¤„ã€‚</p><p>MHAè¿˜æä¾›åœ¨çº¿ä¸»åº“åˆ‡æ¢çš„åŠŸèƒ½ï¼Œèƒ½å¤Ÿå®‰å…¨åœ°åˆ‡æ¢å½“å‰è¿è¡Œçš„ä¸»åº“åˆ°ä¸€ä¸ªæ–°çš„ä¸»åº“ä¸­(é€šè¿‡å°†ä»åº“æå‡ä¸ºä¸»åº“),å¤§æ¦‚0.5-2ç§’å†…å³å¯å®Œæˆã€‚</p><h3 id="MHAçš„ç»„æˆéƒ¨åˆ†">MHAçš„ç»„æˆéƒ¨åˆ†</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">`MHA Managerï¼ˆç®¡ç†èŠ‚ç‚¹ï¼‰`</span><br><span class="line">å¯ä»¥å•ç‹¬éƒ¨ç½²åœ¨ä¸€å°ç‹¬ç«‹çš„æœºå™¨ä¸Šç®¡ç†å¤šä¸ªmaster-slaveé›†ç¾¤ï¼Œä¹Ÿå¯ä»¥éƒ¨ç½²åœ¨ä¸€å°slaveä¸Šã€‚</span><br><span class="line"></span><br><span class="line">`MHA Nodeï¼ˆæ•°æ®èŠ‚ç‚¹ï¼‰`</span><br><span class="line">è¿è¡Œåœ¨æ¯å°MySQLæœåŠ¡å™¨ä¸Š   MHA Manager ä¼šå®šæ—¶æ¢æµ‹é›†ç¾¤ä¸­çš„masterèŠ‚ç‚¹ï¼Œå½“masterå‡ºç°æ•…éšœæ—¶ï¼Œå®ƒå¯ä»¥è‡ªåŠ¨å°†æœ€æ–°æ•°æ®çš„slaveæå‡ä¸ºæ–°çš„masterï¼›ç„¶åå°†æ‰€æœ‰å…¶ä»–çš„slaveé‡æ–°æŒ‡å‘æ–°çš„masterï¼Œæ•´ä¸ªæ•…éšœè½¬ç§»è¿‡ç¨‹å¯¹åº”ç”¨ç¨‹åºæ˜¯å®Œå…¨é€æ˜çš„ï¼›</span><br></pre></td></tr></table></figure><h3 id="MHAè½¯ä»¶ç»“æ„ä»‹ç»">MHAè½¯ä»¶ç»“æ„ä»‹ç»</h3><table><thead><tr><th>èŠ‚ç‚¹ä¿¡æ¯</th><th>è½¯ä»¶ç»„ä»¶</th><th>ä½œç”¨ä»‹ç»</th></tr></thead><tbody><tr><td>MHA Managerï¼ˆç®¡ç†èŠ‚ç‚¹ï¼‰</td><td>masterha_manger</td><td>ç”¨äºå¯åŠ¨MHA</td></tr><tr><td></td><td>masterha_check_ssh</td><td>ç”¨äºæ£€æŸ¥MHAçš„SSHé…ç½®äº’ä¿¡çŠ¶å†µ</td></tr><tr><td></td><td>masterha_check_repl</td><td>ç”¨äºæ£€æŸ¥MySQLå¤åˆ¶çŠ¶æ€ï¼Œä»¥åŠé…ç½®ä¿¡æ¯</td></tr><tr><td></td><td>masterha_master_monitor</td><td>ç”¨äºæ£€æµ‹masteræ˜¯å¦å®•æœº</td></tr><tr><td></td><td>masterha_check_status</td><td>ç”¨äºæ£€æµ‹å½“å‰MHAè¿è¡ŒçŠ¶æ€</td></tr><tr><td></td><td>masterha_master_switch</td><td>ç”¨äºæ§åˆ¶æ•…éšœè½¬ç§»ï¼ˆè‡ªåŠ¨æˆ–è€…æ‰‹åŠ¨ï¼‰</td></tr><tr><td></td><td>masterha_conf_host</td><td>æ·»åŠ æˆ–åˆ é™¤é…ç½®çš„serverä¿¡æ¯</td></tr><tr><td>MHA Nodeï¼ˆæ•°æ®èŠ‚ç‚¹ï¼‰</td><td>save_binary_logs</td><td>ä¿å­˜å’Œå¤åˆ¶masterçš„äºŒè¿›åˆ¶æ—¥å¿—</td></tr><tr><td></td><td>apply_diff_relay_logs</td><td>è¯†åˆ«å·®å¼‚çš„ä¸­ç»§æ—¥å¿—äº‹ä»¶å¹¶å°†å…¶å·®å¼‚çš„äº‹ä»¶åº”ç”¨äºå…¶ä»–slave</td></tr><tr><td></td><td>purge_relay_logs</td><td>æ¸…é™¤ä¸­ç»§æ—¥å¿—ï¼ˆä¸ä¼šé˜»å¡SQLçº¿ç¨‹ï¼‰</td></tr></tbody></table><h2 id="MHAçš„å·¥ä½œçš„åŸç†">MHAçš„å·¥ä½œçš„åŸç†</h2><p><img src="https://cos.lukme.top/Pic/QQ_1724757765903.png" alt="QQ_1724757765903"></p><p>:dango:<strong>MHAçš„è®¾è®¡åŸç†åˆ†æï¼ˆFailover è¿‡ç¨‹ï¼‰</strong></p><h3 id="1-MHAè½¯ä»¶å¯åŠ¨">1.MHAè½¯ä»¶å¯åŠ¨</h3><p>æ ¹æ®å¯åŠ¨å‘½ä»¤ï¼Œåˆ†æMHAè½¯ä»¶å¯åŠ¨åŸç†ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">nohup</span> masterha_manager --conf=/etc/mha/app1.cnf --remove_dead_master_conf --ignore_last_failover  &lt; /dev/null &gt; /var/log/mha/app1/manager.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure><p>æ ¹æ®ä»¥ä¸Šå¯åŠ¨å‘½ä»¤ï¼Œéœ€è¦å…ˆè°ƒå–MHAå¯åŠ¨è„šæœ¬æ–‡ä»¶<code>masterha_manager</code> ï¼Œ</p><p><code>--conf=.../app1.cnf</code> ä¼šæ ¹æ®åŠ è½½çš„MHAçš„é…ç½®æ–‡ä»¶ä¸åŒï¼Œå®ç°ç®¡ç†å¤šä¸ªé«˜å¯ç”¨æ¶æ„ç¯å¢ƒï¼Œè¿›è¡Œé«˜å¯ç”¨ä¸šåŠ¡çš„æ¶æ„ç¯å¢ƒçš„åŒºåˆ†ï¼›</p><p><code>--remove_dead_master_conf</code>å‚æ•°è¡¨ç¤ºåœ¨ä¸»èŠ‚ç‚¹å‡ºç°å®•æœºæƒ…å†µæ—¶ï¼Œå°†ä¼šä»é›†ç¾¤ä¸­è¢«è¸¢å‡ºï¼Œå³ä»é…ç½®æ–‡ä»¶ä¸­åˆ é™¤æ‰æ•…éšœèŠ‚ç‚¹ï¼›</p><p><code>--ignore_last_failover</code> é»˜è®¤MHAæœåŠ¡æ˜¯ä¸èƒ½é¢‘ç¹è¿›è¡Œæ•…éšœåˆ‡æ¢çš„ï¼Œéœ€è¦æœ‰ä¸€å®šçš„é—´éš”æ—¶é—´ï¼ŒåŠ æ­¤å‚æ•°è¡¨ç¤ºå¿½ç•¥åˆ‡æ¢çš„é—´éš”æ—¶é—´ï¼›</p><p><code>/var/log/mha/app1/manager.log 2&gt;&amp;1</code>æœ€åå°†MHAå¯åŠ¨è¿è¡Œçš„ä¿¡æ¯æ”¾å…¥åˆ°æ—¥å¿—æ–‡ä»¶ä¸­å³å¯</p><p>:dango:<strong>è¡¥å……</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">è¡¥å……è¯´æ˜ï¼š--ignore_last_failover</span><br><span class="line"></span><br><span class="line">ã€å®˜æ–¹è§£é‡Šã€‘</span><br><span class="line">If the previous failover failed, MHA does not start failover because the problem might happen again. The normal step to start failover is manually remove failover error file <span class="built_in">which</span> is created under (manager_workdir)/(app_name).failover.error .By setting --ignore_last_failover, MHA continues failover regardless of the last failover status.</span><br><span class="line"></span><br><span class="line">å¦‚æœä¸Šä¸€æ¬¡é«˜å¯ç”¨åŠŸèƒ½å¤±è´¥ï¼ŒMHAä¸ä¼šå†å¯åŠ¨é«˜å¯ç”¨åŠŸèƒ½ï¼Œå› ä¸ºè¿™ä¸ªé—®é¢˜å¯èƒ½ä¼šå†æ¬¡å‡ºç°ã€‚åç»­å†æƒ³å¯åŠ¨æ•…éšœè½¬ç§»çš„æ­£å¸¸æ­¥éª¤æ˜¯æ‰‹åŠ¨åˆ é™¤æ•…éšœè½¬ç§»é”™è¯¯æ–‡ä»¶ï¼Œé”™è¯¯æ–‡ä»¶ä¼šåœ¨manager_workdirç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªåä¸ºapp_name.failover.errorçš„æ–‡ä»¶ã€‚å¯¹äºè®¾ç½®--ignore_last_failoverï¼Œè¡¨ç¤ºæ— è®ºä¸Šæ¬¡æ•…éšœåˆ‡æ¢çŠ¶æ€å¦‚ä½•ï¼ŒMHAéƒ½ä¼šç»§ç»­è¿›è¡Œå¯åŠ¨æ•…éšœåˆ‡æ¢åŠŸèƒ½</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">åœ¨ç¼ºçœæƒ…å†µä¸‹ï¼Œå¦‚æœ MHA æ£€æµ‹åˆ°è¿ç»­å‘ç”Ÿå®•æœºï¼Œä¸”ä¸¤æ¬¡å®•æœºé—´éš”ä¸è¶³ 8 å°æ—¶çš„è¯ï¼Œåˆ™ä¸ä¼šè¿›è¡Œ Failoverï¼›ä¹‹æ‰€ä»¥è¿™æ ·é™åˆ¶æ˜¯ä¸ºäº†é¿å… ping-pong æ•ˆåº”ã€‚è¯¥å‚æ•°ä»£è¡¨å¿½ç•¥ä¸Šæ¬¡ MHA è§¦å‘åˆ‡æ¢äº§ç”Ÿçš„æ–‡ä»¶ï¼›é»˜è®¤æƒ…å†µä¸‹ï¼ŒMHA å‘ç”Ÿåˆ‡æ¢åä¼šåœ¨æ—¥å¿—è®°å½•ï¼Œåœ¨æ—¥å¿—ç›®å½•ä¸­ä¼šç”Ÿæˆ app1.failover.complete æ–‡ä»¶ï¼›ä¸‹æ¬¡å†æ¬¡åˆ‡æ¢çš„æ—¶å€™å¦‚æœå‘ç°è¯¥ç›®å½•ä¸‹å­˜åœ¨è¯¥æ–‡ä»¶å°†ä¸å…è®¸è§¦å‘åˆ‡æ¢ï¼Œé™¤éåœ¨ç¬¬ä¸€æ¬¡åˆ‡æ¢ååˆ é™¤è¯¥æ–‡ä»¶ï¼›</span><br><span class="line"></span><br><span class="line">`å®˜æ–¹é»˜è®¤8å°æ—¶ä¹‹å†…ä¸èƒ½å†æ¬¡æ‰§è¡Œåˆ‡æ¢ä¸»åº“ï¼Œé™¤éåˆ é™¤é”æ–‡ä»¶  è®¾ç½®çš„å·¥ä½œç›®å½•ä¸‹çš„*.failover.erroræ–‡ä»¶`</span><br></pre></td></tr></table></figure><h3 id="2-MHAå®ç°ç›‘æ§">2.MHAå®ç°ç›‘æ§</h3><p>åˆ©ç”¨MHAå¯åŠ¨è„šæœ¬æ–‡ä»¶<code>masterha_manager</code>ä¼šè‡ªåŠ¨è°ƒç”¨ç›‘æ§è„šæœ¬æ–‡ä»¶<code>masterha_master_monitor</code>ï¼Œå¹¶ä¸”æ¯éš”é…ç½®æ–‡ä»¶æŒ‡å®šæ—¶é—´ï¼›</p><p><code>ping_interval=2</code> è¿›è¡Œè„šæœ¬ç›‘æ§ä¸€æ¬¡ï¼Œä»è€Œåˆ¤æ–­ä¸»èŠ‚ç‚¹æ˜¯å¦å¤„äºå­˜æ´»çŠ¶æ€ï¼Œè¿ç»­4æ¬¡è¿˜æ²¡æœ‰ä¸»åº“å¿ƒè·³ï¼Œå³è¯´æ˜ä¸»åº“å®•æœºï¼›</p><figure class="highlight plaintext"><figcaption><span>wiki</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># ç›‘æ§è„šæœ¬éªŒè¯ä¸»èŠ‚ç‚¹å­˜æ´»æ–¹æ³•</span><br><span class="line">[root@xiaoQ-03 ~]# mysql -umha -pmha -h192.168.30.101 -e &quot;select user();&quot;</span><br><span class="line">mysql: [Warning] Using a password on the command line interface can be insecure.</span><br><span class="line">+-----------------+</span><br><span class="line">| user()          |</span><br><span class="line">+-----------------+</span><br><span class="line">| mha@172.16.1.51 |</span><br><span class="line">+-----------------+</span><br></pre></td></tr></table></figure><h3 id="3-MHAé€‰ä¸»è¿‡ç¨‹">3.MHAé€‰ä¸»è¿‡ç¨‹</h3><p>åœ¨MHAä¸­è¿›è¡Œé€‰ä¸»æ—¶ï¼Œæ ¹æ®é€‰ä¸»æºç æ–‡ä»¶ä¿¡æ¯åˆ†æï¼Œä¸»è¦ä¼šåˆ©ç”¨åˆ°å››ä¸ªæ•°ç»„ï¼šalive latest pref badï¼Œå¹¶ä¸”ä¼šè¯†åˆ«èŠ‚ç‚¹ç¼–å·ä¿¡æ¯ï¼›</p><p>åœ¨è¿›è¡Œé€‰ä¸»æ—¶ï¼Œä¸»è¦ä¼šå…³æ³¨ç«é€‰æ–°ä¸»èŠ‚ç‚¹çš„æ—¥å¿—é‡ã€ä»¥åŠæ˜¯å¦è®¾ç½®candidate_masterå‚æ•°é…ç½®ä¿¡æ¯ï¼›</p><table><thead><tr><th>æ•°ç»„ä¿¡æ¯</th><th>ç®€è¿°</th><th>ä½œç”¨è¯´æ˜</th></tr></thead><tbody><tr><td>alive</td><td>å­˜æ´»æ•°ç»„</td><td>ä¸»è¦ç”¨äºæ¢æµ‹å­˜æ´»çš„èŠ‚ç‚¹çŠ¶æ€ï¼›å½“ä¸»åº“å®•æœºåï¼Œæ¢æµ‹çš„å°±æ˜¯ä¸¤ä¸ªä»åº“èŠ‚ç‚¹</td></tr><tr><td>latest</td><td>æœ€æ–°æ•°ç»„</td><td>è¡¨ç¤ºè·å–æ—¥å¿—æœ€æ–°çš„ä»åº“ä¿¡æ¯ï¼Œå³æ•°æ®é‡æœ€æ¥è¿‘ä¸»åº“çš„ä»åº“ï¼ˆæ ¹æ®GTIDä¿¡æ¯ æˆ– positionä¿¡æ¯ï¼‰</td></tr><tr><td>pref</td><td>å¤‡é€‰æ•°ç»„</td><td>åœ¨æ•°ç»„ä¸­å…·æœ‰candidate_masterå‚æ•°åˆ¤æ–­æ¡ä»¶ï¼Œæ­¤å‚æ•°å¯ä»¥æ”¾å…¥é…ç½®æ–‡ä»¶èŠ‚ç‚¹ä¸­ï¼Œä¾¿äºèŠ‚ç‚¹ä¼˜å…ˆé€‰æ‹©ä¸ºæ–°ä¸»</td></tr><tr><td>bad</td><td>ä¸é€‰æ•°ç»„</td><td>å¦‚æœè®¾å®šäº†å‚æ•°ï¼šno_master=1ï¼Œè¡¨ç¤ºç›¸åº”èŠ‚ç‚¹ä¸å‚ä¸ç«é€‰ä¸»ï¼›<br>å¦‚æœè®¾å®šäº†å‚æ•°ï¼šlog_bin=0ï¼ˆäºŒè¿›åˆ¶æ—¥å¿—æ²¡å¼€ï¼‰ï¼Œè¡¨ç¤ºç›¸åº”èŠ‚ç‚¹ä¸å‚ä¸ç«é€‰ä¸»ï¼›<br>å¦‚ä½•è®¾å®šäº†å‚æ•°ï¼šcheck_slave_delayï¼Œæ£€æŸ¥ä»åº“å»¶è¿Ÿä¸»åº“100Mæ•°æ®ä¿¡æ¯æ—¥å¿—é‡ï¼Œè¡¨ç¤ºèŠ‚ç‚¹ä¸å‚ä¸ç«é€‰ä¸»</td></tr></tbody></table><p>MHAé€‰ä¸»åˆ¤æ–­æ€»ç»“ï¼ˆåˆ©ç”¨ifåˆ¤æ–­é€‰ä¸»çš„æƒ…å†µï¼‰</p><ul><li><p>å¾ªç¯å¯¹æ¯”latestæ•°ç»„å’Œprefæ•°ç»„çš„slaveï¼Œå¦‚æœå­˜åœ¨ç›¸åŒçš„slaveï¼Œå¹¶ä¸”è¿™ä¸ªslaveä¸åœ¨badæ•°ç»„å½“ä¸­ï¼Œè¯¥slaveä¼šè¢«æ¨é€‰ä¸ºæ–°çš„master</p><p>DB02èŠ‚ç‚¹å³æ»¡è¶³latestæ•°ç»„ä¿¡æ¯ï¼Œåˆæ»¡è¶³perfæ•°ç»„ä¿¡æ¯ï¼Œä½†ä¸æ»¡è¶³badæ•°æ®ä¿¡æ¯ï¼Œå³ä¼šè¢«é€‰ä¸ºæ–°ä¸»ï¼Œæœ‰å¤šä¸ªæŒ‰ç…§å·ç é¡ºåºé€‰ä¸¾ï¼›</p></li><li><p>å¦‚æœprefå’Œbadæ•°ç»„å½“ä¸­çš„ä¸ªæ•°ä¸º0ï¼Œåˆ™é€‰æ‹©latestæ•°ç»„å½“ä¸­çš„ç¬¬ä¸€ä¸ªslaveä¸ºmasterï¼›</p><p>DB02èŠ‚ç‚¹æ²¡æœ‰candidate_masterå‚æ•°é…ç½®ï¼Œåˆæ²¡æœ‰ä¸é€‰æ•°ç»„é‡Œçš„ä¸‰ç§æƒ…å†µé…ç½®ï¼Œå³db02æ°å¥½æ˜¯latestï¼Œä¸ºæ–°ä¸»ï¼›</p></li><li><p>å¾ªç¯å¯¹æ¯”aliveæ•°ç»„å’Œprefæ•°ç»„å½“ä¸­çš„slavesï¼Œå¦‚æœæœ‰ä¸€ä¸ªslaveç›¸åŒï¼Œå¹¶ä¸”ä¸åœ¨badæ•°ç»„å½“ä¸­ï¼Œè¯¥èŠ‚ç‚¹å°±ä¼šæˆä¸ºæ–°çš„masterï¼›</p><p>DB02èŠ‚ç‚¹å³ä¸æ»¡è¶³latestï¼Œä¹Ÿä¸æ»¡è¶³badï¼Œä½†æ˜¯æ»¡è¶³prefï¼Œä¹Ÿä¼šè¢«é€‰æ‹©ä½œä¸ºæ–°ä¸»ï¼›</p></li><li><p>å¾ªç¯latestæ•°ç»„ï¼Œå¦‚æœåˆå¾ªç¯åˆ°slaveä¸åœ¨badæ•°ç»„å½“ä¸­ï¼Œè¿™ä¸ªslaveå°±ä¼šæˆä¸ºmasterï¼Œå°±ç®—æ·»åŠ äº†candidate_master=1å‚æ•°ï¼›</p><p>è¯¥slaveä¹Ÿä¸ä¸€å®šä¼šæˆä¸ºä¸»åº“ï¼›</p><p>DB02èŠ‚ç‚¹å³æ»¡è¶³latestæ•°ç»„ï¼Œä¸æ˜¯badæ•°ç»„ï¼Œä¹Ÿä¼šæˆä¸ºæ–°çš„ä¸»ï¼›</p></li><li><p>ä»æ´»ç€çš„slaveå½“ä¸­è¿›è¡Œå¾ªç¯ï¼Œå¦‚æœå¾ªç¯åˆ°slaveä¸åœ¨badæ•°ç»„å½“ä¸­ï¼Œé‚£ä¹ˆè¿™ä¸ªslaveå°±ä¼šæˆä¸ºä¸»åº“ï¼›</p><p>DB02èŠ‚ç‚¹æ˜¯æ´»ç€çš„ï¼Œä¸æ»¡è¶³badï¼Œä¹Ÿå¯ä»¥æˆä¸ºæ–°çš„ä¸»ï¼›</p></li><li><p>å¦‚æœè¿›è¡Œäº†å¤šæ¬¡é€‰æ‹©éƒ½æ‰¾ä¸åˆ°ä¸»åº“ï¼Œé‚£ä¹ˆä¸»åº“é€‰æ‹©å¤±è´¥ï¼Œfailoverå¤±è´¥ï¼›</p></li></ul><p>é€‰ä¸»ç­–ç•¥ç®€è¿°è¡¨ï¼š</p><table><thead><tr><th>ä¼˜å…ˆçº§</th><th>aliveæ•°ç»„</th><th>latestæ•°ç»„</th><th>prefæ•°ç»„</th><th>badæ•°ç»„</th><th>é€‰ä¸»ç­–ç•¥</th><th>å¤šä¸ªé€‰æ‹©æƒ…å†µ</th></tr></thead><tbody><tr><td>01</td><td><code>æ»¡è¶³</code></td><td><code>æ»¡è¶³</code></td><td><code>æ»¡è¶³</code></td><td>ä¸æ»¡è¶³</td><td>ä¼˜é€‰é€‰æ‹©</td><td>æŒ‰ç…§èŠ‚ç‚¹å·ç é¡ºåºé€‰æ‹©</td></tr><tr><td>02</td><td><code>æ»¡è¶³</code></td><td><code>æ»¡è¶³</code></td><td>ä¸æ»¡è¶³</td><td>ä¸æ»¡è¶³</td><td>ä¼˜é€‰é€‰æ‹©</td><td>æŒ‰ç…§èŠ‚ç‚¹å·ç é¡ºåºé€‰æ‹©</td></tr><tr><td>03</td><td><code>æ»¡è¶³</code></td><td>ä¸æ»¡è¶³</td><td><code>æ»¡è¶³</code></td><td>ä¸æ»¡è¶³</td><td>ä¼˜é€‰é€‰æ‹©</td><td>æŒ‰ç…§èŠ‚ç‚¹å·ç é¡ºåºé€‰æ‹©</td></tr><tr><td>04</td><td><code>æ»¡è¶³</code></td><td>ä¸æ»¡è¶³</td><td>ä¸æ»¡è¶³</td><td>ä¸æ»¡è¶³</td><td>ä¼˜é€‰æ´»ç€èŠ‚ç‚¹</td><td>æŒ‰ç…§èŠ‚ç‚¹å·ç é¡ºåºé€‰æ‹©</td></tr></tbody></table><blockquote><p>è¯´æ˜ï¼šåœ¨è¿›è¡Œæ‰‹å·¥æŒ‡å®šåˆ‡æ¢æ–°ä¸»æ—¶ï¼Œå³åº”ç”¨äº†prio_new_master_hostå‚æ•°ä¿¡æ¯æ—¶ï¼Œä¼šæœ€ä¼˜å…ˆé€‰æ‹©ç›¸åº”èŠ‚ç‚¹ä¸ºæ–°ä¸»ï¼›</p><p>ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ï¼šæ ¹æ®mhaé…ç½®æ–‡ä»¶é‡Œserveråçš„æ•°å€¼å°çš„åˆ‡æ¢</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[server1]</span><br><span class="line">hostname=10.0.0.51</span><br><span class="line">port=3306</span><br><span class="line">[server2]</span><br><span class="line">hostname=10.0.0.52</span><br><span class="line">port=3306</span><br></pre></td></tr></table></figure></blockquote><h3 id="4-MHAæ•°æ®è¡¥å¿">4.MHAæ•°æ®è¡¥å¿</h3><p>åœ¨è¿›è¡Œæ•°æ®è¡¥å¿ä¹‹å‰ï¼Œéœ€è¦è®©æ–°ä¸»åº“ä¸åŸæœ‰å®•æœºä¸»åº“è¿›è¡Œå¯¹æ¯”ï¼Œè·æ‚‰éœ€è¦è¡¥å¿çš„æ•°æ®é‡æƒ…å†µï¼Œå³å¯¹æ¯”å·®çš„æ•°æ®æ—¥å¿—é‡ä¿¡æ¯ï¼›</p><p>ç„¶åå¯ä»¥ä»binlogæ—¥å¿—ä¸­ï¼Œè¿›è¡Œè¡¥å……æ•°æ®ä¿¡æ¯çš„æˆªå–ï¼Œéšä¹‹è¿›è¡Œæ•°æ®ä¿¡æ¯è¡¥å¿ï¼Œä½†æ˜¯æœ‰ç§ç‰¹æ®Šæƒ…å†µï¼Œè‹¥åŸæœ‰ä¸»åº“æ— æ³•è®¿é—®äº†ï¼›</p><p>æ‰€ä»¥è¿›è¡Œæ•°æ®è¡¥å¿æ“ä½œï¼Œä¹Ÿéœ€è¦åˆ†å„ç§æƒ…æ™¯è¿›è¡Œå¤„ç†ï¼š</p><ul><li><p>åŸä¸»åº“SSHè¿æ¥æ­£å¸¸ï¼š</p><p>å„ä¸ªä»èŠ‚ç‚¹è‡ªåŠ¨è°ƒç”¨ï¼š<code>save_binary_logs</code>è„šæœ¬æ–‡ä»¶ï¼Œç«‹å³ä¿å­˜ç¼ºå¤±éƒ¨åˆ†çš„bin_logï¼Œåˆ°å„èŠ‚ç‚¹/var/tmp/ç›®å½•ï¼›</p></li><li><p>åŸä¸»åº“SSHè¿æ¥å¼‚å¸¸ï¼š</p><p>å„ä¸ªä»èŠ‚ç‚¹è‡ªåŠ¨è°ƒç”¨ï¼š<code>apply_diff_relay_logs</code>è„šæœ¬æ–‡ä»¶ï¼Œè¿›è¡Œrelay_logæ—¥å¿—å·®å¼‚ä¿¡æ¯è¡¥å¿ï¼›</p></li><li><p>é¢å¤–ç‰¹æ®Šæ•°æ®è¡¥å……ï¼šï¼ˆåˆ©ç”¨ä¸»åº“æ—¥å¿—å†—ä½™æœºåˆ¶ï¼‰</p><p>MHAæä¾›äº†binlog_serveråŠŸèƒ½ï¼Œå¯ä»¥å®æ—¶æ‹‰å–ä¸»åº“çš„binlogæ—¥å¿—åˆ°å¤‡ä»½èŠ‚ç‚¹ï¼Œä»è€Œè¿›è¡Œæ•°æ®é¢å¤–è¡¥å¿ï¼›</p></li></ul><h3 id="5-MHAä¸šåŠ¡åˆ‡æ¢">5.MHAä¸šåŠ¡åˆ‡æ¢</h3><p>è‡ªåŠ¨è§£é™¤åŸæœ‰çš„ä¸»ä»å…³ç³»ï¼Œå®ç°æ–°çš„ä¸»ä»å…³ç³»çš„å»ºç«‹ï¼›</p><figure class="highlight plaintext"><figcaption><span>wiki</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># æ‰€æœ‰ä»åº“è§£é™¤ä¸»ä»å…³ç³»æ“ä½œ</span><br><span class="line">stop slave;</span><br><span class="line">reset slave;</span><br><span class="line"></span><br><span class="line"># æ‰€æœ‰ä»åº“é‡æ„ä¸»ä»å…³ç³»æ“ä½œ</span><br><span class="line">change master to ...</span><br></pre></td></tr></table></figure><h3 id="6-MHAåº”ç”¨é€æ˜">6.MHAåº”ç”¨é€æ˜</h3><p>å®ç°MHAçš„VIPåŠŸèƒ½ï¼Œåˆ©ç”¨è„šæœ¬å®ç°ï¼Œä¸Šä¼ mha_script.taræ–‡ä»¶åˆ°/usr/local/binç›®å½•ä¸­ï¼Œç„¶åè¿›è¡Œè§£å‹å¤„ç†ï¼›</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"># ä¸Šä¼ MHAæ‰€éœ€çš„è„šæœ¬æ–‡ä»¶</span><br><span class="line">[root@xiaoQ-03 ~]# cd /usr/local/bin/</span><br><span class="line">[root@xiaoQ-03 bin]# chmod +x /usr/local/bin/*</span><br><span class="line"></span><br><span class="line"># ä¿®æ”¹MHAè„šæœ¬æ–‡ä»¶çš„ä¿¡æ¯</span><br><span class="line">[root@xiaoQ-03 bin]# cp master_ip_failover master_ip_failover.bak</span><br><span class="line">[root@xiaoQ-03 bin]# dos2unix /usr/local/bin/*</span><br><span class="line">[root@xiaoQ-03 bin]# vim master_ip_failover</span><br><span class="line">13 my $vip = &#x27;192.168.30.110/24&#x27;;</span><br><span class="line">14 my $key = &#x27;1&#x27;;</span><br><span class="line">15 my $if = &#x27;eth0&#x27;;</span><br><span class="line">16 my $ssh_start_vip = &quot;/sbin/ifconfig $if:$key $vip&quot;;</span><br><span class="line">17 my $ssh_stop_vip = &quot;/sbin/ifconfig $if:$key down&quot;;</span><br><span class="line">18 my $ssh_Bcast_arp= &quot;/sbin/arping -I $if -c 3 -A 192.168.30.110&quot;;</span><br><span class="line"></span><br><span class="line"># ä¿®æ”¹é…ç½®æ–‡ä»¶</span><br><span class="line">[root@xiaoQ-03 ~]# vim /etc/mha/app1.cnf</span><br><span class="line">master_ip_failover_script=/usr/local/bin/master_ip_failover</span><br><span class="line"></span><br><span class="line"># é‡å¯MHAæœåŠ¡</span><br><span class="line">[root@xiaoQ-03 bin]# masterha_stop --conf=/etc/mha/app1.cnf</span><br><span class="line">[root@xiaoQ-03 bin]# nohup masterha_manager --conf=/etc/mha/app1.cnf --remove_dead_master_conf --ignore_last_failover  &lt; /dev/null&gt; /var/log/mha/app1/manager.log 2&gt;&amp;1 &amp;</span><br><span class="line"></span><br><span class="line"># æ‰‹å·¥åœ¨ä¸»åº“ä¸Šæ·»åŠ VIP</span><br><span class="line">[root@xiaoQ-03 bin]# masterha_check_status --conf=/etc/mha/app1.cnf</span><br><span class="line">app1 (pid:103046) is running(0:PING_OK), master:192.168.30.101</span><br><span class="line">-- æ ¸å®æ­¤æ—¶çš„MHAçš„ä¸»åº“èŠ‚ç‚¹</span><br><span class="line">ifconfig eth0:1 192.168.30.110/24</span><br><span class="line">-- åœ¨ä¸»åº“èŠ‚ç‚¹æ‰‹å·¥æ·»åŠ vipåœ°å€ä¿¡æ¯</span><br><span class="line"></span><br><span class="line"># è¿›è¡ŒVIPåœ°å€è¿æ¥æµ‹è¯•</span><br><span class="line">-- å¯ä»¥ä½¿ç”¨navcatè½¯ä»¶ï¼Œè¿æ¥MHAçš„vipåœ°å€ï¼ŒæŸ¥çœ‹æ‰€è¿ä¸»æœºä¿¡æ¯æ˜¯å¦ä¸ºä¸»èŠ‚ç‚¹ï¼Œå½“æ•…éšœè½¬ç§»åå¯ä»¥æ ¸å®VIPåœ°å€æ˜¯å¦æŒç»­è¿æ¥ï¼›</span><br></pre></td></tr></table></figure><blockquote><p>è¯´æ˜ï¼šè¿›è¡ŒMHAçš„VIPåœ°å€æ¼‚ç§»æ—¶ï¼Œåªèƒ½åœ¨å±€åŸŸç½‘ç¯å¢ƒè¿›è¡Œæ¼‚ç§»ï¼Œä¸èƒ½å®ç°è·¨ç½‘æ®µçš„VIPåœ°å€æ¼‚ç§»ï¼›</p></blockquote><h3 id="7-MHAæ•…éšœæŠ¥è­¦">7.MHAæ•…éšœæŠ¥è­¦</h3><p>å®ç°MHAçš„æŠ¥è­¦åŠŸèƒ½ï¼Œåˆ©ç”¨è„šæœ¬å®ç°ï¼Œä¸Šä¼ mha_script.taræ–‡ä»¶åˆ°/usr/local/binç›®å½•ä¸­ï¼Œç„¶åè¿›è¡Œè§£å‹å¤„ç†ï¼›</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å‡†å¤‡è„šæœ¬æ–‡ä»¶</span></span><br><span class="line">[root@xiaoQ-03 bin]# <span class="built_in">cp</span> send_report send_report.bak</span><br><span class="line">28 my <span class="variable">$smtp</span>=<span class="string">&#x27;smtp.qq.com&#x27;</span>;</span><br><span class="line">-- smtpæœåŠ¡å™¨åœ°å€åŸŸå</span><br><span class="line">29 my <span class="variable">$mail_from</span>=<span class="string">&#x27;330882721@qq.com&#x27;</span>;</span><br><span class="line">-- å‘ä»¶ç®±ä¿¡æ¯é…ç½®</span><br><span class="line">30 my <span class="variable">$mail_user</span>=<span class="string">&#x27;330882721&#x27;</span>;</span><br><span class="line">-- ç”¨æˆ·å QQå·</span><br><span class="line">31 my <span class="variable">$mail_pass</span>=<span class="string">&#x27;ypokkranqlgkcbba&#x27;</span>;</span><br><span class="line">-- é‚®ç®±æˆæƒç </span><br><span class="line">32 my <span class="variable">$mail_to</span>=<span class="string">&#x27;330882721@qq.com&#x27;</span>;</span><br><span class="line">or</span><br><span class="line">my <span class="variable">$mail_to</span>=[<span class="string">&#x27;to1@qq.com&#x27;</span>,<span class="string">&#x27;to2@qq.com&#x27;</span>];</span><br><span class="line">-- æ”¶ä»¶ç®±ä¿¡æ¯é…ç½®</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹é…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@xiaoQ-03 ~]# vim /etc/mha/app1.cnf</span><br><span class="line">report_script=/usr/local/bin/send_report</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡å¯MHAæœåŠ¡</span></span><br><span class="line">[root@xiaoQ-03 bin]# masterha_stop --conf=/etc/mha/app1.cnf</span><br><span class="line">[root@xiaoQ-03 bin]# <span class="built_in">nohup</span> masterha_manager --conf=/etc/mha/app1.cnf --remove_dead_master_conf --ignore_last_failover  &lt; /dev/null&gt; /var/log/mha/app1/manager.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure><h3 id="8-MHAé¢å¤–è¡¥å¿">8.MHAé¢å¤–è¡¥å¿</h3><p>åˆ©ç”¨binlog_serverä½œä¸ºé¢å¤–çš„æ—¥å¿—è¡¥å¿çš„å†—ä½™æ–¹æ¡ˆï¼Œå³å®æ—¶ä¿å­˜ä¸»åº“çš„bin_logæ—¥å¿—æ–‡ä»¶åˆ°ç‰¹å®šèŠ‚ç‚¹ç›®å½•ä¸­ï¼›</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºæ—¥å¿—å­˜æ”¾ç›®å½•</span></span><br><span class="line">[root@xiaoQ-03 ~]# <span class="built_in">mkdir</span> -p /data/binlog_server/</span><br><span class="line">[root@xiaoQ-03 ~]# <span class="built_in">chown</span> -R mysql.mysql /data/*</span><br><span class="line">[root@xiaoQ-03 ~]# <span class="built_in">cd</span> /data/binlog_server</span><br><span class="line">[root@xiaoQ-03 binlog_server]# mysql -e <span class="string">&quot;show slave status\G&quot;</span>|grep <span class="string">&quot;Master_Log&quot;</span></span><br><span class="line">Master_Log_File: mysql-bin.000002</span><br><span class="line">Read_Master_Log_Pos: 1201</span><br><span class="line">Relay_Master_Log_File: mysql-bin.000002</span><br><span class="line">Exec_Master_Log_Pos: 1201</span><br><span class="line">-- æ‹‰å–æ—¥å¿—çš„èµ·ç‚¹ï¼Œéœ€è¦æŒ‰ç…§ç›®å‰ä»åº“çš„å·²ç»è·å–åˆ°çš„äºŒè¿›åˆ¶æ—¥å¿—ç‚¹ä¸ºèµ·ç‚¹</span><br><span class="line">[root@xiaoQ-03 binlog_server]# mysqlbinlog -R --host=192.168.30.101 --user=mha --password=mha --raw --stop-never mysql-bin.000002 &amp;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¼–å†™é…ç½®æ–‡ä»¶ä¿¡æ¯</span></span><br><span class="line">[root@xiaoQ-03 ~]# vim /etc/mha/app1.cnf</span><br><span class="line">[binlog1]</span><br><span class="line">no_master=1</span><br><span class="line">-- ä¸å­˜äºç«é€‰</span><br><span class="line">hostname=192.168.30.103</span><br><span class="line">-- å°†æ—¥å¿—é¢å¤–è¡¥å¿åˆ°å“ªä¸ªä¸»æœºä¸Š</span><br><span class="line">master_binlog_dir=/data/binlog_server/</span><br><span class="line">-- æ—¥å¿—é¢å¤–è¡¥å¿çš„å­˜å‚¨ç›®å½•</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡å¯MHAæœåŠ¡</span></span><br><span class="line">[root@xiaoQ-03 bin]# masterha_stop --conf=/etc/mha/app1.cnf</span><br><span class="line">[root@xiaoQ-03 bin]# <span class="built_in">nohup</span> masterha_manager --conf=/etc/mha/app1.cnf --remove_dead_master_conf --ignore_last_failover  &lt; /dev/null&gt; /var/log/mha/app1/manager.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure><h2 id="MHAæ­å»º">MHAæ­å»º</h2><ul><li>æ­å»ºMySQLçš„MHAéœ€è¦ä¿è¯ä¸»ä»å¤åˆ¶æ˜¯OKçš„</li></ul><p><strong>ç¯å¢ƒä¸€è§ˆ</strong></p><table><thead><tr><th style="text-align:left">ä¸»æœºå</th><th>WanIP</th><th>LanIP</th><th>è§’è‰²</th></tr></thead><tbody><tr><td style="text-align:left">mha</td><td>10.0.0.50</td><td>172.16.1.50</td><td>MHAç®¡ç†ç«¯</td></tr><tr><td style="text-align:left">db01</td><td>10.0.0.51</td><td>172.16.1.51</td><td>æš‚æ—¶ä¸»åº“ï¼Œå®¢æˆ·ç«¯</td></tr><tr><td style="text-align:left">db02</td><td>10.0.0.52</td><td>172.16.1.52</td><td>ä»åº“ï¼ŒMHAå®¢æˆ·ç«¯</td></tr><tr><td style="text-align:left">db03</td><td>10.0.0.53</td><td>172.16.1.53</td><td>ä»åº“ï¼ŒMHAå®¢æˆ·ç«¯</td></tr><tr><td style="text-align:left">db04</td><td>10.0.0.54</td><td>172.16.1.54</td><td>ä»åº“ï¼ŒMHAå®¢æˆ·ç«¯</td></tr></tbody></table><h3 id="MHAçš„å¿…è¦æ¡ä»¶">MHAçš„å¿…è¦æ¡ä»¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">1.ä¸»ä»å¤åˆ¶OK</span><br><span class="line">2.æ•°æ®åº“çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½å¾—æœ‰repä¸»ä»å¤åˆ¶ç”¨æˆ·</span><br><span class="line">3.æ•°æ®åº“æ¯ä¸ªèŠ‚ç‚¹è¦æœ‰mhaç”¨æˆ·</span><br><span class="line">4.å…³é—­è‡ªåŠ¨åˆ é™¤relay-log</span><br><span class="line">5.æ¯ä¸€å°éƒ½éœ€è¦åšå…å¯†è¿æ¥</span><br><span class="line">6.åšmysqldè½¯é“¾æ¥</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‰å°ä»åº“è®¾ç½®åªè¯»ï¼ˆä¸´æ—¶ç”Ÿæ•ˆï¼‰</span></span><br><span class="line">mysql&gt; <span class="built_in">set</span> global read_only=1;</span><br><span class="line"></span><br><span class="line"><span class="comment"># å››å°æ•°æ®åº“å…³é—­relaylogè‡ªåŠ¨åˆ é™¤åŠŸèƒ½ï¼ˆä¸´æ—¶ç”Ÿæ•ˆï¼‰</span></span><br><span class="line">mysql&gt; <span class="built_in">set</span> global relay_log_purge = 0;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>:dango:<strong>ä¸»ä»å¤åˆ¶</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.ç¼–è¾‘ä¸»åº“é…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@db01 ~]# vim /etc/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">basedir=/app/mysql</span><br><span class="line">datadir=/app/mysql/data</span><br><span class="line">server_id=1</span><br><span class="line">log-bin=mysql-bin</span><br><span class="line">skip_name=resolve</span><br><span class="line"><span class="comment">#å…³é—­è‡ªåŠ¨åˆ é™¤relay-log</span></span><br><span class="line">relay_log_purge=0</span><br><span class="line"></span><br><span class="line"><span class="comment">#2.ä»åº“é…ç½®æ–‡ä»¶çš„æ¯å°server_idä¸åŒå³å¯</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#3.ä¸»åº“åˆ›å»ºä¸»ä»å¤åˆ¶ç”¨æˆ·</span></span><br><span class="line">mysql&gt; grant replication slave on *.* to rep@<span class="string">&#x27;172.16.1.5%&#x27;</span> identified by <span class="string">&#x27;123&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¸»åº“æ£€æŸ¥bin-logä½ç½®ç‚¹</span></span><br><span class="line">db01 [(none)]&gt;show master status;</span><br><span class="line">+------------------+----------+--------------+</span><br><span class="line">| File             | Position | Binlog_Do_DB |</span><br><span class="line">+------------------+----------+--------------+</span><br><span class="line">| mysql-bin.000003 |      327 |              |</span><br><span class="line">+------------------+----------+--------------+</span><br><span class="line"></span><br><span class="line"><span class="comment">#4.æ‰€æœ‰ä»åº“æ‰§è¡Œ</span></span><br><span class="line">change master to</span><br><span class="line">master_host=<span class="string">&#x27;172.16.1.51&#x27;</span>,</span><br><span class="line">master_user=<span class="string">&#x27;rep&#x27;</span>,</span><br><span class="line">master_password=<span class="string">&#x27;123&#x27;</span>,</span><br><span class="line">master_log_file=<span class="string">&#x27;mysql-bin.000003&#x27;</span>,</span><br><span class="line">master_log_pos=327,</span><br><span class="line">master_port=3306;</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ‰€æœ‰ä»åº“å¼€å¯ä¸»ä»å¤åˆ¶</span></span><br><span class="line">mysql &gt; start slave;</span><br></pre></td></tr></table></figure><p>:dango:<strong>ä¸»åº“æ‰§è¡Œ</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä¸»åº“æ‰§è¡Œï¼ˆä¸»ä»å¤åˆ¶OKæƒ…å†µä¸‹ï¼‰</span></span><br><span class="line"><span class="comment">#æ¯å°éƒ½æœ‰ä¸»ä»å¤åˆ¶ç”¨æˆ·</span></span><br><span class="line">mysql&gt; grant replication slave on *.* to rep@<span class="string">&#x27;172.16.1.5%&#x27;</span> identified by <span class="string">&#x27;123&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ¯å°éƒ½æœ‰mhaç”¨æˆ·</span></span><br><span class="line">mysql&gt; grant all on *.* to mha@<span class="string">&#x27;172.16.1.5%&#x27;</span> identified by <span class="string">&#x27;mha&#x27;</span>;</span><br></pre></td></tr></table></figure><p>:dango:<strong>äº’ä¿¡å…å¯†</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å¯ä»¥æ‰§è¡Œè„šæœ¬ï¼Œæ¯ä¸€å°éƒ½éœ€è¦å…å¯†ï¼ˆæ³¨æ„ä¿®æ”¹å¯†ç  -p 1 ï¼‰</span></span><br><span class="line">[root@db01 ~]# <span class="built_in">cat</span> push_public_key.sh </span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line">yum -y install sshpass</span><br><span class="line"><span class="built_in">test</span> -f ~/.ssh/id_rsa || ssh-keygen -t rsa -P <span class="string">&#x27;&#x27;</span> -f ~/.ssh/id_rsa &gt;/dev/null 2&gt;&amp;1</span><br><span class="line"><span class="keyword">for</span> ip <span class="keyword">in</span> 50 51 52 53 54;<span class="keyword">do</span></span><br><span class="line">ping -c1 -W1 172.16.1.<span class="variable">$ip</span> &amp;&gt;/dev/null</span><br><span class="line">[ $? -eq 0 ] &amp;&amp;\</span><br><span class="line">sshpass -p 1 ssh-copy-id -o StrictHostKeyChecking=no -i ~/.ssh/id_rsa.pub root@172.16.1.<span class="variable">$ip</span> &amp;&gt;/dev/null &amp;&amp;\</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;172.16.1.<span class="variable">$ip</span> æ¨é€æˆåŠŸ...&quot;</span> ||\</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;172.16.1.<span class="variable">$ip</span> æ¨é€å¤±è´¥...&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¸ç”¨è„šæœ¬</span></span><br><span class="line"><span class="comment">## ç”Ÿæˆå¯†é’¥å¯¹</span></span><br><span class="line">[root@db01 ~]# ssh-keygen -t dsa -P <span class="string">&#x27;&#x27;</span> -f ~/.ssh/id_dsa &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">[root@db02 ~]# ssh-keygen -t dsa -P <span class="string">&#x27;&#x27;</span> -f ~/.ssh/id_dsa &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">[root@db03 ~]# ssh-keygen -t dsa -P <span class="string">&#x27;&#x27;</span> -f ~/.ssh/id_dsa &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">[root@db04 ~]# ssh-keygen -t dsa -P <span class="string">&#x27;&#x27;</span> -f ~/.ssh/id_dsa &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">[root@mha-manager ~]# ssh-keygen -t dsa -P <span class="string">&#x27;&#x27;</span> -f ~/.ssh/id_dsa &gt;/dev/null 2&gt;&amp;1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## æ¨é€å…¬é’¥ï¼ˆæ¯ä¸€å°éƒ½éœ€è¦æ‰§è¡Œï¼Œsshpasséœ€è¦å®‰è£…ï¼Œä¸ç„¶éœ€è¦äº¤äº’ï¼‰</span></span><br><span class="line">[root@db01 ~]# sshpass -p 1 ssh-copy-id -i ~/.ssh/id_dsa.pub root@172.16.1.50</span><br><span class="line">[root@db01 ~]# sshpass -p 1 ssh-copy-id -i ~/.ssh/id_dsa.pub root@172.16.1.51</span><br><span class="line">[root@db01 ~]# sshpass -p 1 ssh-copy-id -i ~/.ssh/id_dsa.pub root@172.16.1.52</span><br><span class="line">[root@db01 ~]# sshpass -p 1 ssh-copy-id -i ~/.ssh/id_dsa.pub root@172.16.1.53</span><br><span class="line">[root@db01 ~]# sshpass -p 1 ssh-copy-id -i ~/.ssh/id_dsa.pub root@172.16.1.54</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ‰€ä»¥ç”¨è„šæœ¬å§</span></span><br></pre></td></tr></table></figure><p>:dango:<strong>å‘½ä»¤è½¯é“¾æ¥</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@db01 ~]# <span class="built_in">ln</span> -s /app/mysql/bin/mysqlbinlog /usr/bin/mysqlbinlog</span><br><span class="line">[root@db01 ~]# <span class="built_in">ln</span> -s /app/mysql/bin/mysql /usr/bin/mysql</span><br><span class="line"></span><br><span class="line">[root@db02 ~]# <span class="built_in">ln</span> -s /app/mysql/bin/mysqlbinlog /usr/bin/mysqlbinlog</span><br><span class="line">[root@db02 ~]# <span class="built_in">ln</span> -s /app/mysql/bin/mysql /usr/bin/mysql</span><br><span class="line"></span><br><span class="line">[root@db03 ~]# <span class="built_in">ln</span> -s /app/mysql/bin/mysqlbinlog /usr/bin/mysqlbinlog</span><br><span class="line">[root@db03 ~]# <span class="built_in">ln</span> -s /app/mysql/bin/mysql /usr/bin/mysql</span><br><span class="line"></span><br><span class="line">[root@db04 ~]# <span class="built_in">ln</span> -s /app/mysql/bin/mysqlbinlog /usr/bin/mysqlbinlog</span><br><span class="line">[root@db04 ~]# <span class="built_in">ln</span> -s /app/mysql/bin/mysql /usr/bin/mysql</span><br></pre></td></tr></table></figure><h3 id="éƒ¨ç½²MHAå®¢æˆ·ç«¯">éƒ¨ç½²MHAå®¢æˆ·ç«¯</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#MySQL 5.6ç‰ˆæœ¬å¯ä»¥ä½¿ç”¨node0.56ç‰ˆæœ¬</span></span><br><span class="line">[root@db01 ~]# wget http://test.driverzeng.com/MySQL_plugins/mha4mysql-node-0.56-0.el6.noarch.rpm</span><br><span class="line"></span><br><span class="line"><span class="comment">#MySQL 5.7åŠä»¥ä¸Šå»ºè®®ä½¿ç”¨node0.58ç‰ˆæœ¬</span></span><br><span class="line">[root@db01 ~]# wget https://github.com/yoshinorim/mha4mysql-node/releases/download/v0.58/mha4mysql-node-0.58-0.el7.centos.noarch.rpm</span><br><span class="line"></span><br><span class="line"><span class="comment">#å°†nodeä¼ åˆ°å…¶å®ƒæœºå™¨</span></span><br><span class="line">[root@db01 ~]# scp mha4mysql-node-0.56-0.el6.noarch.rpm 10.0.0.50:/root</span><br><span class="line">[root@db01 ~]# scp mha4mysql-node-0.56-0.el6.noarch.rpm 10.0.0.52:/root</span><br><span class="line">[root@db01 ~]# scp mha4mysql-node-0.56-0.el6.noarch.rpm 10.0.0.53:/root</span><br><span class="line">[root@db01 ~]# scp mha4mysql-node-0.56-0.el6.noarch.rpm 10.0.0.54:/root</span><br><span class="line"></span><br><span class="line"><span class="comment">#å®‰è£…nodeï¼ˆæ¯ä¸ªèŠ‚ç‚¹éƒ½åšï¼‰</span></span><br><span class="line">[root@db01 ~]# yum -y localinstall mha4mysql-node-0.56-0.el6.noarch.rpm</span><br><span class="line">[root@db02 ~]# yum -y localinstall mha4mysql-node-0.56-0.el6.noarch.rpm</span><br><span class="line">[root@db03 ~]# yum -y localinstall mha4mysql-node-0.56-0.el6.noarch.rpm</span><br><span class="line">[root@db04 ~]# yum -y localinstall mha4mysql-node-0.56-0.el6.noarch.rpm</span><br><span class="line">[root@mha ~]# yum -y localinstall mha4mysql-node-0.56-0.el6.noarch.rpm</span><br></pre></td></tr></table></figure><h3 id="éƒ¨ç½²MHAç®¡ç†ç«¯">éƒ¨ç½²MHAç®¡ç†ç«¯</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.åˆ›å»ºé…ç½®æ–‡ä»¶å­˜æ”¾ç›®å½•</span></span><br><span class="line">[root@mha-manager ~]# <span class="built_in">mkdir</span> /etc/mha</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.ç¼–å†™é…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@mha-manager ~]# vim /etc/mha/app1.cnf</span><br><span class="line">[server default]</span><br><span class="line">manager_log=/etc/mha/logs/manager.log</span><br><span class="line">manager_workdir=/etc/mha/app1</span><br><span class="line">master_binlog_dir=/app/mysql/data</span><br><span class="line">user=mha</span><br><span class="line">password=mha</span><br><span class="line">ping_interval=2</span><br><span class="line">repl_user=rep</span><br><span class="line">repl_password=123</span><br><span class="line">ssh_user=root</span><br><span class="line">ssh_port=22</span><br><span class="line"></span><br><span class="line">[server1]</span><br><span class="line"><span class="comment">#candidate_master=1</span></span><br><span class="line"><span class="comment">#check_repl_delay=0</span></span><br><span class="line">hostname=172.16.1.51</span><br><span class="line">port=3306</span><br><span class="line"></span><br><span class="line">[server2]</span><br><span class="line"><span class="comment">#candidate_master=1</span></span><br><span class="line"><span class="comment">#check_repl_delay=0</span></span><br><span class="line">hostname=172.16.1.52</span><br><span class="line">port=3306</span><br><span class="line"></span><br><span class="line">[server3]</span><br><span class="line">hostname=172.16.1.53</span><br><span class="line">port=3306</span><br><span class="line"></span><br><span class="line">[server4]</span><br><span class="line">hostname=172.16.1.54</span><br><span class="line">port=3306</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.åˆ›å»ºMHAç®¡ç†ç”¨æˆ·</span></span><br><span class="line">mysql&gt; grant all on *.* to mha@<span class="string">&#x27;172.16.1.5%&#x27;</span> identified by <span class="string">&#x27;mha&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.æ—¥å¿—å’Œå·¥ä½œç›®å½•ç›®å½•åˆ›å»º</span></span><br><span class="line">[root@mha-manager ~]# <span class="built_in">mkdir</span> -p /etc/mha/&#123;logs,app1&#125;</span><br><span class="line">[root@mha-manager ~]# ll /etc/mha/</span><br><span class="line">total 4</span><br><span class="line">drwxr-xr-x 2 root root 6 Aug 27 12:20 app1</span><br><span class="line">-rw-r--r-- 1 root root 457 Aug 27 12:16 app1.cnf</span><br><span class="line">drwxr-xr-x 2 root root 6 Aug 27 12:19 logs</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.æ£€æµ‹MHA sshå…å¯†</span></span><br><span class="line">[root@mha-manager ~]# masterha_check_ssh --conf=/etc/mha/app1.cnf</span><br><span class="line">All SSH connection tests passed successfully.</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.æ£€æµ‹MHA ä¸»ä»å¤åˆ¶</span></span><br><span class="line">[root@mha-manager ~]# masterha_check_repl --conf=/etc/mha/app1.cnf</span><br><span class="line">MySQL Replication Health is OK.</span><br><span class="line"></span><br><span class="line"><span class="comment"># 7.å¯åŠ¨MHA</span></span><br><span class="line"><span class="built_in">nohup</span> masterha_manager --conf=/etc/mha/app1.cnf --remove_dead_master_conf --ignore_last_failover &lt; /dev/null &gt; /etc/mha/logs/manager.log 2&gt;&amp;1 &amp;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">`masterha_managerï¼š`å¯åŠ¨å‘½ä»¤</span><br><span class="line">--conf=/etc/mha/app1.cnfï¼šæŒ‡å®šé…ç½®æ–‡ä»¶</span><br><span class="line">--remove_dead_master_confï¼šåšå®Œåˆ‡æ¢åï¼Œä»é…ç½®æ–‡ä»¶ä¸­æ‘˜é™¤å®•æœºçš„ä¸»åº“</span><br><span class="line">--ignore_last_failoverï¼šå¿½ç•¥ä¸Šä¸€æ¬¡åˆ‡æ¢</span><br><span class="line"></span><br><span class="line"><span class="comment"># MHAåˆ‡æ¢æœºåˆ¶ï¼š</span></span><br><span class="line">1.MHAåœ¨åšä¸€æ¬¡åˆ‡æ¢åï¼Œç”Ÿæˆä¸€ä¸ªé”æ–‡ä»¶ï¼ˆapp1.failover.completeï¼‰ï¼Œåœ¨å·¥ä½œç›®å½•ä¸‹ï¼Œ8ä¸ªå°æ—¶ä¹‹å†…ï¼Œæ— æ³•åšç¬¬äºŒæ¬¡åˆ‡æ¢</span><br><span class="line">2.MHAåˆ‡æ¢å®Œæˆåï¼Œä¼šè‡ªåŠ¨ç»“æŸMHAçš„è¿›ç¨‹</span><br><span class="line">3.åœ¨æ‰€æœ‰ä»åº“æ•°æ®ç›¸åŒæ—¶ï¼ŒMHAä¼šé€‰æ‹©é…ç½®æ–‡ä»¶ä¸­æ ‡ç­¾<span class="built_in">id</span>æœ€å°çš„åˆ‡æ¢</span><br><span class="line"></span><br><span class="line"><span class="comment"># 8.å¯åŠ¨åæ£€æµ‹</span></span><br><span class="line">[root@mha-manager ~]# masterha_check_status --conf=/etc/mha/app1.cnf</span><br><span class="line">app1 (pid:19524) is running(0:PING_OK), master:172.16.1.51</span><br><span class="line"></span><br><span class="line"><span class="comment">## ä½¿ç”¨systemdç®¡ç†mha</span></span><br><span class="line">[root@mha-manager ~]# vim /usr/lib/systemd/system/mha.service</span><br><span class="line">[Unit]</span><br><span class="line">Description=MHA</span><br><span class="line">After=network.target sshd-keygen.service</span><br><span class="line">Wants=sshd-keygen.service</span><br><span class="line">[Service]</span><br><span class="line">Type=sample</span><br><span class="line">ExecStart=/usr/bin/masterha_manager --conf=/etc/mha/app1.cnf --</span><br><span class="line">remove_dead_master_conf --ignore_last_failover &gt; /etc/mha/logs/manager.log</span><br><span class="line">ExecStop=/usr/bin/masterha_stop --conf=/etc/mha/app1.cnf</span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="MHAé…ç½®æ–‡ä»¶è¯¦è§£-dango">MHAé…ç½®æ–‡ä»¶è¯¦è§£:dango:</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">[server default]</span><br><span class="line"><span class="comment">#è®¾ç½®managerçš„å·¥ä½œç›®å½•</span></span><br><span class="line">manager_workdir=/var/log/masterha/app1</span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾ç½®managerçš„æ—¥å¿—</span></span><br><span class="line">manager_log=/var/log/masterha/app1/manager.log </span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾ç½®master ä¿å­˜binlogçš„ä½ç½®ï¼Œä»¥ä¾¿MHAå¯ä»¥æ‰¾åˆ°masterçš„æ—¥å¿—ï¼Œæˆ‘è¿™é‡Œçš„ä¹Ÿå°±æ˜¯mysqlçš„æ•°æ®ç›®å½•</span></span><br><span class="line">master_binlog_dir=/data/mysql</span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾ç½®è‡ªåŠ¨failoveræ—¶å€™çš„åˆ‡æ¢è„šæœ¬</span></span><br><span class="line">master_ip_failover_script= /usr/local/bin/master_ip_failover</span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾ç½®æ‰‹åŠ¨åˆ‡æ¢æ—¶å€™çš„åˆ‡æ¢è„šæœ¬</span></span><br><span class="line">master_ip_online_change_script= /usr/local/bin/master_ip_online_change</span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾ç½®mysqlä¸­rootç”¨æˆ·çš„å¯†ç ï¼Œè¿™ä¸ªå¯†ç æ˜¯å‰æ–‡ä¸­åˆ›å»ºç›‘æ§ç”¨æˆ·çš„é‚£ä¸ªå¯†ç </span></span><br><span class="line">password=1</span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾ç½®ç›‘æ§ç”¨æˆ·root</span></span><br><span class="line">user=root</span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾ç½®ç›‘æ§ä¸»åº“ï¼Œå‘é€pingåŒ…çš„æ—¶é—´é—´éš”ï¼Œå°è¯•ä¸‰æ¬¡æ²¡æœ‰å›åº”çš„æ—¶å€™è‡ªåŠ¨è¿›è¡Œfailover</span></span><br><span class="line">ping_interval=1</span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾ç½®è¿œç«¯mysqlåœ¨å‘ç”Ÿåˆ‡æ¢æ—¶binlogçš„ä¿å­˜ä½ç½®</span></span><br><span class="line">remote_workdir=/tmp</span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾ç½®å¤åˆ¶ç”¨æˆ·çš„å¯†ç </span></span><br><span class="line">repl_password=123</span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾ç½®å¤åˆ¶ç¯å¢ƒä¸­çš„å¤åˆ¶ç”¨æˆ·å </span></span><br><span class="line">repl_user=rep</span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾ç½®å‘ç”Ÿåˆ‡æ¢åå‘é€çš„æŠ¥è­¦çš„è„šæœ¬</span></span><br><span class="line">report_script=/usr/local/send_report</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¸€æ—¦MHAåˆ°server02çš„ç›‘æ§ä¹‹é—´å‡ºç°é—®é¢˜ï¼ŒMHA Managerå°†ä¼šå°è¯•ä»server03ç™»å½•åˆ°server02</span></span><br><span class="line">secondary_check_script= /usr/local/bin/masterha_secondary_check -s server03 -s server02 --user=root --master_host=server02 --master_ip=192.168.0.50 --master_port=3306</span><br><span class="line"><span class="comment">#è®¾ç½®æ•…éšœå‘ç”Ÿåå…³é—­æ•…éšœä¸»æœºè„šæœ¬ï¼ˆè¯¥è„šæœ¬çš„ä¸»è¦ä½œç”¨æ˜¯å…³é—­ä¸»æœºæ”¾åœ¨å‘ç”Ÿè„‘è£‚,è¿™é‡Œæ²¡æœ‰ä½¿ç”¨ï¼‰</span></span><br><span class="line">shutdown_script=<span class="string">&quot;&quot;</span></span><br><span class="line"><span class="comment">#è®¾ç½®sshçš„ç™»å½•ç”¨æˆ·å</span></span><br><span class="line">ssh_user=root </span><br><span class="line">[server1]</span><br><span class="line">hostname=10.0.0.51</span><br><span class="line">port=3306</span><br><span class="line">[server2]</span><br><span class="line">hostname=10.0.0.52</span><br><span class="line">port=3306</span><br><span class="line"><span class="comment">#è®¾ç½®ä¸ºå€™é€‰masterï¼Œå¦‚æœè®¾ç½®è¯¥å‚æ•°ä»¥åï¼Œå‘ç”Ÿä¸»ä»åˆ‡æ¢ä»¥åå°†ä¼šå°†æ­¤ä»åº“æå‡ä¸ºä¸»åº“ï¼Œå³ä½¿è¿™ä¸ªä¸»åº“ä¸æ˜¯é›†ç¾¤ä¸­äº‹ä»¶æœ€æ–°çš„slaveã€‚</span></span><br><span class="line">candidate_master=1</span><br><span class="line"><span class="comment">#é»˜è®¤æƒ…å†µä¸‹å¦‚æœä¸€ä¸ªslaveè½åmaster 100Mçš„relay logsçš„è¯ï¼ŒMHAå°†ä¸ä¼šé€‰æ‹©è¯¥slaveä½œä¸ºä¸€ä¸ªæ–°çš„masterï¼Œå› ä¸ºå¯¹äºè¿™ä¸ªslaveçš„æ¢å¤éœ€è¦èŠ±è´¹å¾ˆé•¿æ—¶é—´ï¼Œé€šè¿‡è®¾ç½®check_repl_delay=0,MHAè§¦å‘åˆ‡æ¢åœ¨é€‰æ‹©ä¸€ä¸ªæ–°çš„masterçš„æ—¶å€™å°†ä¼šå¿½ç•¥å¤åˆ¶å»¶æ—¶ï¼Œè¿™ä¸ªå‚æ•°å¯¹äºè®¾ç½®äº†candidate_master=1çš„ä¸»æœºéå¸¸æœ‰ç”¨ï¼Œå› ä¸ºè¿™ä¸ªå€™é€‰ä¸»åœ¨åˆ‡æ¢çš„è¿‡ç¨‹ä¸­ä¸€å®šæ˜¯æ–°çš„master</span></span><br><span class="line">check_repl_delay=0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="comment">#ä¸€æ—¦MHAåˆ°server02çš„ç›‘æ§ä¹‹é—´å‡ºç°é—®é¢˜ï¼ŒMHA Managerå°†ä¼šå°è¯•ä»server03ç™»å½•åˆ°server02</span></span><br><span class="line">secondary_check_script= /usr/local/bin/masterha_secondary_check -s server03 -s </span><br><span class="line">server02 --user=root --master_host=server02 --master_ip=192.168.0.50 --</span><br><span class="line">master_port=3306</span><br><span class="line"></span><br><span class="line"> <span class="comment">#è®¾ç½®æ•…éšœå‘ç”Ÿåå…³é—­æ•…éšœä¸»æœºè„šæœ¬ï¼ˆè¯¥è„šæœ¬çš„ä¸»è¦ä½œç”¨æ˜¯å…³é—­ä¸»æœºæ”¾åœ¨å‘ç”Ÿè„‘è£‚,è¿™é‡Œæ²¡æœ‰ä½¿ç”¨ï¼‰</span></span><br><span class="line">shutdown_script=<span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">#è®¾ç½®sshçš„ç™»å½•ç”¨æˆ·å</span></span><br><span class="line">ssh_user=root </span><br><span class="line"></span><br><span class="line">[server1]</span><br><span class="line">hostname=10.0.0.51</span><br><span class="line">port=3306</span><br><span class="line"></span><br><span class="line">[server2]</span><br><span class="line">hostname=10.0.0.52</span><br><span class="line">port=3306</span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾ç½®ä¸ºå€™é€‰ masterï¼Œå¦‚æœè®¾ç½®è¯¥å‚æ•°ä»¥åï¼Œå‘ç”Ÿä¸»ä»åˆ‡æ¢ä»¥åå°†ä¼šå°†æ­¤ä»åº“æå‡ä¸ºä¸»åº“ï¼Œå³ä½¿è¿™ä¸ªä¸»åº“ä¸æ˜¯é›†ç¾¤ä¸­äº‹ä»¶æœ€æ–°çš„ slaveã€‚</span></span><br><span class="line">candidate_master=1</span><br><span class="line"></span><br><span class="line"><span class="comment">#é»˜è®¤æƒ…å†µä¸‹å¦‚æœä¸€ä¸ª slave è½å master 100M çš„ relay logs çš„è¯ï¼ŒMHA å°†ä¸ä¼šé€‰æ‹©è¯¥ slave ä½œä¸ºä¸€ä¸ªæ–°çš„ masterï¼Œå› ä¸ºå¯¹äºè¿™ä¸ª slave çš„æ¢å¤éœ€è¦èŠ±è´¹å¾ˆé•¿æ—¶é—´ï¼Œé€šè¿‡è®¾ç½® check_repl_delay=0,MHA è§¦å‘åˆ‡æ¢åœ¨é€‰æ‹©ä¸€ä¸ªæ–°çš„ master çš„æ—¶å€™å°†ä¼šå¿½ç•¥å¤åˆ¶å»¶æ—¶ï¼Œè¿™ä¸ªå‚æ•°å¯¹äºè®¾ç½®äº† candidate_master=1 çš„ä¸»æœºéå¸¸æœ‰ç”¨ï¼Œå› ä¸ºè¿™ä¸ªå€™é€‰ä¸»åœ¨åˆ‡æ¢çš„è¿‡ç¨‹ä¸­ä¸€å®šæ˜¯æ–°çš„ master</span></span><br><span class="line">check_repl_delay=0</span><br></pre></td></tr></table></figure><h3 id="åˆ‡æ¢æ—¥å¿—â€“æ³¨æ„å‡ ç‚¹">åˆ‡æ¢æ—¥å¿—â€“æ³¨æ„å‡ ç‚¹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## åˆ‡æ¢æ—¥å¿—ï¼š</span></span><br><span class="line"><span class="comment"># GTIDä¸»ä»æ²¡æœ‰å¼€å¯</span></span><br><span class="line">GTID failover mode = 0</span><br><span class="line">Starting Non-GTID based failover.</span><br><span class="line"></span><br><span class="line"><span class="comment"># VIPæ¼‚ç§»çš„è„šæœ¬æ²¡æœ‰è®¾ç½®</span></span><br><span class="line">master_ip_failover_script is not <span class="built_in">set</span>. Skipping invalidating dead master IP address.</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ²¡æœ‰é…ç½® Candidate masters</span></span><br><span class="line">Candidate masters from the configuration file:</span><br><span class="line">Non-candidate masters:</span><br><span class="line">candidate_master=1 // è®¾ç«‹å¤ªå­ï¼Œä½†æ˜¯å¦‚æœå¤ªå­è½åå…¶ä»–æœºå™¨æ•°æ®è¶…è¿‡100Mï¼Œå°±åºŸå‚¨</span><br><span class="line">check_repl_delay=0 // å…³é—­å¯¹å¤ªå­è½åçš„æ£€æµ‹</span><br><span class="line"></span><br><span class="line"><span class="comment"># change masterè¯­å¥ ä»¥åæ¢å¤æ•°æ®æ—¶å€™è¦æ ¹æ®è¿™ä¸ªç‚¹ä½æ¥åˆ‡æ¢</span></span><br><span class="line">All other slaves should start replication from here. Statement should be:</span><br><span class="line">CHANGE MASTER TO MASTER_HOST=<span class="string">&#x27;172.16.1.54&#x27;</span>, MASTER_PORT=3306,MASTER_LOG_FILE=<span class="string">&#x27;mysql-bin.000003&#x27;</span>, MASTER_LOG_POS=878597, MASTER_USER=<span class="string">&#x27;rep&#x27;</span>,MASTER_PASSWORD=<span class="string">&#x27;xxx&#x27;</span>;</span><br></pre></td></tr></table></figure><p><strong>MHAç›¸å…³å·¥å…·å‘½ä»¤</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">save_binary_logs</span><br><span class="line">--<span class="built_in">command</span>=save</span><br><span class="line">--start_file=mysql-bin.000001</span><br><span class="line">--start_pos=878597</span><br><span class="line">--binlog_dir=/app/mysql/data</span><br><span class="line">--</span><br><span class="line">output_file=/var/tmp/saved_master_binlog_from_172.16.1.52_3306_20240827154042.bi</span><br><span class="line">nlog</span><br><span class="line">--handle_raw_binlog=1</span><br><span class="line">--disable_log_bin=0</span><br><span class="line">--manager_version=0.58</span><br><span class="line">pply_diff_relay_logs</span><br><span class="line">--<span class="built_in">command</span>=apply</span><br><span class="line">--slave_user=<span class="string">&#x27;mha&#x27;</span></span><br><span class="line">--slave_host=172.16.1.54</span><br><span class="line">--slave_ip=172.16.1.54</span><br><span class="line">--slave_port=3306</span><br><span class="line">--</span><br><span class="line">apply_files=/var/tmp/saved_master_binlog_from_172.16.1.52_3306_20240827154042.bi</span><br><span class="line">nlog</span><br><span class="line">--workdir=/var/tmp</span><br><span class="line">--target_version=5.7.42-<span class="built_in">log</span></span><br><span class="line">--timestamp=20240827154042</span><br><span class="line">--handle_raw_binlog=1</span><br><span class="line">--disable_log_bin=0</span><br><span class="line">--manager_version=0.58</span><br><span class="line">--slave_pass=xxx</span><br><span class="line"> </span><br></pre></td></tr></table></figure><p><strong>binlogçš„è·¯å¾„</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.å…ˆå°†binlogä¿å­˜åœ¨å®•æœºä¸»åº“çš„ /var/tmp/</span></span><br><span class="line">[root@db02 ~]# ll</span><br><span class="line">/var/tmp/saved_master_binlog_from_172.16.1.52_3306_20240827154042.binlog</span><br><span class="line">-rw-r--r-- 1 root root 177 Aug 27 15:40</span><br><span class="line">/var/tmp/saved_master_binlog_from_172.16.1.52_3306_20240827154042.binlog</span><br><span class="line"><span class="comment"># 2.å°†binlogä»å®•æœºä¸»åº“ä¿å­˜åˆ°manageræ‰€åœ¨çš„æœºå™¨</span></span><br><span class="line">[root@mha-manager ~]# ll</span><br><span class="line">/etc/mha/app1/saved_master_binlog_from_172.16.1.52_3306_20240827154042.binlog</span><br><span class="line">-rw-r--r-- 1 root root 177 Aug 27 15:40</span><br><span class="line">/etc/mha/app1/saved_master_binlog_from_172.16.1.52_3306_20240827154042.binlog</span><br><span class="line"><span class="comment"># 3.å°†binlogä»manageræ‰€åœ¨çš„æœºå™¨å‘é€ç»™æ–°ä¸»åº“</span></span><br><span class="line">[root@db04 ~]# ll</span><br><span class="line">/var/tmp/saved_master_binlog_from_172.16.1.52_3306_20240827154042.binlog</span><br><span class="line">-rw-r--r-- 1 root root 177 Aug 27 15:40</span><br><span class="line">/var/tmp/saved_master_binlog_from_172.16.1.52_3306_20240827154042.binlog</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/QQ_1724772576926.png" alt="QQ_1724772576926"></p><h2 id="MHAè‡ªåŠ¨æ¢å¤">MHAè‡ªåŠ¨æ¢å¤</h2><h3 id="æ‰‹åŠ¨æ¢å¤">æ‰‹åŠ¨æ¢å¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.ä¿®å¤å®•æœºçš„ä¸»åº“</span></span><br><span class="line">[root@db02 ~]# systemctl start mysqld</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.æ‰¾åˆ°change masterè¯­å¥</span></span><br><span class="line">CHANGE MASTER TO MASTER_HOST=<span class="string">&#x27;172.16.1.54&#x27;</span>, MASTER_PORT=3306,</span><br><span class="line">MASTER_LOG_FILE=<span class="string">&#x27;mysql-bin.000003&#x27;</span>, MASTER_LOG_POS=878597, MASTER_USER=<span class="string">&#x27;rep&#x27;</span>,</span><br><span class="line">MASTER_PASSWORD=<span class="string">&#x27;123&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.å¯åŠ¨ä¸»ä»å¤åˆ¶</span></span><br><span class="line">mysql&gt; start slave;</span><br><span class="line"><span class="comment"># 4.è¡¥å…¨é…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@mha-manager ~]# vim /etc/mha/app1.cnf</span><br><span class="line">[server2]</span><br><span class="line">hostname=172.16.1.52</span><br><span class="line">port=3306</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.å¯åŠ¨MHA</span></span><br><span class="line">[root@mha-manager ~]# systemctl start mha</span><br><span class="line"><span class="comment"># 6.æ£€æµ‹MHAå¯åŠ¨</span></span><br><span class="line">[root@mha-manager ~]# masterha_check_status --conf=/etc/mha/app1.cnf</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="è‡ªåŠ¨æ¢å¤è„šæœ¬">è‡ªåŠ¨æ¢å¤è„šæœ¬</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">. /etc/init.d/functions</span><br><span class="line"><span class="comment">#vars</span></span><br><span class="line">log_file=<span class="string">&#x27;/etc/mha/logs/manager.log&#x27;</span></span><br><span class="line">mha_conf=<span class="string">&quot;/etc/mha/app1.cnf&quot;</span></span><br><span class="line">repl_pass=<span class="string">&#x27;123&#x27;</span></span><br><span class="line">mha_user=$(awk -F= <span class="string">&#x27;/^user/&#123;print $2&#125;&#x27;</span> <span class="variable">$&#123;mha_conf&#125;</span>)</span><br><span class="line">mha_password=$(awk -F= <span class="string">&#x27;/^password/&#123;print $2&#125;&#x27;</span> <span class="variable">$&#123;mha_conf&#125;</span>)</span><br><span class="line">down_master=$(sed -nr <span class="string">&#x27;s#^Master (.*)\(.*\).*!$#\1#gp&#x27;</span> <span class="variable">$&#123;log_file&#125;</span>|<span class="built_in">tail</span> -1 )</span><br><span class="line">change_master=$(grep -i <span class="string">&#x27;change master to&#x27;</span> <span class="variable">$&#123;log_file&#125;</span>|<span class="built_in">tail</span> -1|awk -F: <span class="string">&#x27;&#123;print $4&#125;&#x27;</span>|sed <span class="string">&quot;s#xxx#<span class="variable">$&#123;repl_pass&#125;</span>#g&quot;</span>)</span><br><span class="line">master_ip_failover_script=/etc/mha/app1/master_ip_failover</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#å¯åŠ¨MySQLï¼Œæ£€æµ‹MySQLæ˜¯å¦å®Œå…¨å¯åŠ¨ï¼Œå¯åŠ¨åæ‰§è¡Œå‘½ä»¤ï¼Œå¼€å¯ä¸»ä»å¤åˆ¶</span></span><br><span class="line">ssh <span class="variable">$&#123;down_master&#125;</span> <span class="string">&#x27;systemctl start mysqld&#x27;</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span>;<span class="keyword">do</span></span><br><span class="line">  mysqladmin -u<span class="variable">$&#123;mha_user&#125;</span> -p<span class="variable">$&#123;mha_password&#125;</span> -h<span class="variable">$&#123;down_master&#125;</span> ping &amp;&gt;/dev/null</span><br><span class="line">  <span class="keyword">if</span> [ $? -eq 0 ];<span class="keyword">then</span></span><br><span class="line">    mysql -u<span class="variable">$&#123;mha_user&#125;</span> -p<span class="variable">$&#123;mha_password&#125;</span> -h<span class="variable">$&#123;down_master&#125;</span> -e <span class="string">&quot;<span class="variable">$&#123;change_master&#125;</span>;start slave&quot;</span></span><br><span class="line">    <span class="built_in">break</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#é‡æ–°å†™å…¥MHAç®¡ç†ç«¯é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="built_in">cat</span> &gt; <span class="variable">$&#123;mha_conf&#125;</span> &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">[server default]</span></span><br><span class="line"><span class="string">manager_log=/etc/mha/logs/manager.log</span></span><br><span class="line"><span class="string">manager_workdir=/etc/mha/app1</span></span><br><span class="line"><span class="string">master_binlog_dir=/app/mysql/data</span></span><br><span class="line"><span class="string">password=$&#123;mha_password&#125;</span></span><br><span class="line"><span class="string">ping_interval=2</span></span><br><span class="line"><span class="string">repl_password=123</span></span><br><span class="line"><span class="string">repl_user=rep</span></span><br><span class="line"><span class="string">ssh_port=22</span></span><br><span class="line"><span class="string">ssh_user=root</span></span><br><span class="line"><span class="string">user=$&#123;mha_user&#125;</span></span><br><span class="line"><span class="string">[server1]</span></span><br><span class="line"><span class="string">hostname=172.16.1.51</span></span><br><span class="line"><span class="string">port=3306</span></span><br><span class="line"><span class="string">[server2]</span></span><br><span class="line"><span class="string">hostname=172.16.1.52</span></span><br><span class="line"><span class="string">port=3306</span></span><br><span class="line"><span class="string">[server3]</span></span><br><span class="line"><span class="string">hostname=172.16.1.53</span></span><br><span class="line"><span class="string">port=3306</span></span><br><span class="line"><span class="string">[server4]</span></span><br><span class="line"><span class="string">hostname=172.16.1.54</span></span><br><span class="line"><span class="string">port=3306</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å¯åŠ¨MHAï¼Œå¹¶ä¸”æ£€æµ‹MHAçŠ¶æ€ï¼Œç›´è‡³å¯åŠ¨æˆåŠŸç»“æŸå¾ªç¯</span></span><br><span class="line">systemctl start mha</span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span>;<span class="keyword">do</span></span><br><span class="line">  masterha_check_status --conf=<span class="variable">$&#123;mha_conf&#125;</span> &amp;&gt;/dev/null</span><br><span class="line">  <span class="keyword">if</span> [ $? -eq 0 ];<span class="keyword">then</span></span><br><span class="line">    action <span class="string">&quot;mha server&quot;</span> /bin/true</span><br><span class="line">    <span class="built_in">break</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p><strong>ä¼˜åŒ–</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">[root@mha ~]# <span class="built_in">cat</span> failover_status </span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment">#ä¸Šä¸€æ¬¡æ–°ä¸»åº“</span></span><br><span class="line">last_new_master=$(grep <span class="string">&#x27;(new master)&#x27;</span> /etc/mha/logs/manager.log |<span class="built_in">tail</span> -2|awk -F <span class="string">&#x27;(&#x27;</span> <span class="string">&#x27;NR==1&#123;print $1&#125;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">[root@mha ~]# <span class="built_in">cat</span> recovery_mha.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line">. /etc/init.d/functions</span><br><span class="line">. /root/failover_status</span><br><span class="line"></span><br><span class="line">log_file=<span class="string">&#x27;/etc/mha/logs/manager.log&#x27;</span></span><br><span class="line">mha_conf=<span class="string">&quot;/etc/mha/app1.cnf&quot;</span></span><br><span class="line">repl_pass=<span class="string">&#x27;123&#x27;</span></span><br><span class="line">mha_user=$(awk -F= <span class="string">&#x27;/^user/&#123;print $2&#125;&#x27;</span> <span class="variable">$&#123;mha_conf&#125;</span>)</span><br><span class="line">mha_password=$(awk -F= <span class="string">&#x27;/^password/&#123;print $2&#125;&#x27;</span> <span class="variable">$&#123;mha_conf&#125;</span>)</span><br><span class="line">down_master=$(sed -nr <span class="string">&#x27;s#^Master (.*)\(.*\).*!$#\1#gp&#x27;</span> <span class="variable">$&#123;log_file&#125;</span>|<span class="built_in">tail</span> -1 )</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span>;<span class="keyword">do</span></span><br><span class="line"><span class="comment">#åˆ¤æ–­æ˜¯å¦ä¿®å¤å®Œæˆ</span></span><br><span class="line"><span class="comment">#å½“å‰downçš„ä¸»åº“å’Œä¸Šæ¬¡ä¸»åº“ä¸€è‡´æ—¶ï¼Œåˆ¤å®šä¿®å¤å®Œæˆï¼ˆä¾æ®æˆªå–Master 172.16.1.*(172.16.1.*:3306) is down!ï¼‰</span></span><br><span class="line"><span class="comment">#åˆ¤å®šä¾æ®å°±æ˜¯åªæœ‰ä¿®å¤å®Œæˆæ‰ä¼šæœ‰Master 172.16.1.*(172.16.1.*:3306) is down!ï¼‰</span></span><br><span class="line">  <span class="keyword">if</span> [ <span class="variable">$&#123;down_master&#125;</span> == <span class="variable">$&#123;last_new_master&#125;</span> ];<span class="keyword">then</span></span><br><span class="line">    change_master=$(grep -i <span class="string">&#x27;change master to&#x27;</span> <span class="variable">$&#123;log_file&#125;</span>|<span class="built_in">tail</span> -1|awk -F: <span class="string">&#x27;&#123;print $4&#125;&#x27;</span>|sed <span class="string">&quot;s#xxx#<span class="variable">$&#123;repl_pass&#125;</span>#g&quot;</span>)</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;ä¸»åº“ä¿®å¤ä¸­...&quot;</span></span><br><span class="line">    ssh <span class="variable">$&#123;down_master&#125;</span> -C <span class="string">&#x27;systemctl start mysqld&#x27;</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">true</span>;<span class="keyword">do</span></span><br><span class="line">      mysqladmin -u<span class="variable">$&#123;mha_user&#125;</span> -p<span class="variable">$&#123;mha_password&#125;</span> -h<span class="variable">$&#123;down_master&#125;</span> ping &amp;&gt;/dev/null</span><br><span class="line">      <span class="keyword">if</span> [ $? -eq 0 ];<span class="keyword">then</span></span><br><span class="line"><span class="comment">#downçš„æœºå™¨åšä»åº“</span></span><br><span class="line">        mysql -u<span class="variable">$&#123;mha_user&#125;</span> -p<span class="variable">$&#123;mha_password&#125;</span> -h<span class="variable">$&#123;down_master&#125;</span> -e <span class="string">&quot;<span class="variable">$&#123;change_master&#125;</span>;start slave&quot;</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;ä¸»åº“ä¿®å¤æˆåŠŸ...&quot;</span></span><br><span class="line">        <span class="built_in">break</span></span><br><span class="line">      <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;æ­£åœ¨è¡¥å…¨MHAé…ç½®æ–‡ä»¶...&quot;</span></span><br><span class="line">    <span class="built_in">cat</span> &gt; <span class="variable">$&#123;mha_conf&#125;</span> &lt;&lt;- <span class="string">EOF</span></span><br><span class="line"><span class="string">        [server default]</span></span><br><span class="line"><span class="string">        manager_log=/etc/mha/logs/manager.log</span></span><br><span class="line"><span class="string">        manager_workdir=/etc/mha/app1</span></span><br><span class="line"><span class="string">        master_binlog_dir=/app/mysql/data</span></span><br><span class="line"><span class="string">        password=$&#123;mha_password&#125;</span></span><br><span class="line"><span class="string">        ping_interval=2</span></span><br><span class="line"><span class="string">        repl_password=123</span></span><br><span class="line"><span class="string">        repl_user=rep</span></span><br><span class="line"><span class="string">        ssh_port=22</span></span><br><span class="line"><span class="string">        ssh_user=root</span></span><br><span class="line"><span class="string">        user=$&#123;mha_user&#125;</span></span><br><span class="line"><span class="string">        [server1]</span></span><br><span class="line"><span class="string">        hostname=172.16.1.51</span></span><br><span class="line"><span class="string">        port=3306</span></span><br><span class="line"><span class="string">        [server2]</span></span><br><span class="line"><span class="string">        hostname=172.16.1.52</span></span><br><span class="line"><span class="string">        port=3306</span></span><br><span class="line"><span class="string">        [server3]</span></span><br><span class="line"><span class="string">        hostname=172.16.1.53</span></span><br><span class="line"><span class="string">        port=3306</span></span><br><span class="line"><span class="string">        [server4]</span></span><br><span class="line"><span class="string">        hostname=172.16.1.54</span></span><br><span class="line"><span class="string">        port=3306</span></span><br><span class="line"><span class="string">        EOF</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;æ­£åœ¨å¯åŠ¨MHA...&quot;</span></span><br><span class="line">    systemctl start mha</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">true</span>;<span class="keyword">do</span></span><br><span class="line">      masterha_check_status --conf=<span class="variable">$&#123;mha_conf&#125;</span> &amp;&gt;/dev/null</span><br><span class="line">      <span class="keyword">if</span> [ $? -eq 0 ];<span class="keyword">then</span></span><br><span class="line">        action <span class="string">&quot;MHA managerå¯åŠ¨&quot;</span> /bin/true</span><br><span class="line">        <span class="built_in">exit</span> 0</span><br><span class="line">      <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">continue</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><h3 id="MHAçš„vipæ¼‚ç§»">MHAçš„vipæ¼‚ç§»</h3><p><strong>é…ç½®master_ip_failover</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.ä¿®æ”¹MHAé…ç½®æ–‡ä»¶ï¼ŒåŠ ä¸Šè„šæœ¬</span></span><br><span class="line">[root@mha-manager ~]# vim /etc/mha/app1.cnf</span><br><span class="line">[server default]</span><br><span class="line">master_ip_failover_script=/etc/mha/app1/master_ip_failover</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.ä¿®æ”¹MHAè„šæœ¬ åŠ ä¸Šç»‘å®švipçš„å‘½ä»¤(å…ˆä¸Šä¼ è„šæœ¬)</span></span><br><span class="line">[root@mha-manager ~]# vim /etc/mha/app1/master_ip_failover</span><br><span class="line">my <span class="variable">$vip</span> = <span class="string">&#x27;172.16.1.55/24&#x27;</span>;</span><br><span class="line">my <span class="variable">$key</span> = <span class="string">&#x27;1&#x27;</span>;</span><br><span class="line">my <span class="variable">$ssh_start_vip</span> = <span class="string">&quot;/sbin/ifconfig eth1:<span class="variable">$key</span> <span class="variable">$vip</span>&quot;</span>;</span><br><span class="line">my <span class="variable">$ssh_stop_vip</span> = <span class="string">&quot;/sbin/ifconfig eth1:<span class="variable">$key</span> down&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.ç»™è„šæœ¬æ‰§è¡Œæƒé™</span></span><br><span class="line">[root@mha-manager ~]# <span class="built_in">chmod</span> +x /etc/mha/app1/master_ip_failover</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.æ‰‹åŠ¨åœ¨ä¸»åº“ä¸Šç»‘å®šVIP</span></span><br><span class="line">[root@db01 ~]# ifconfig eth1:1 172.16.1.55/24</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.é‡å¯MHA</span></span><br><span class="line">[root@mha-manager ~]# systemctl stop mha</span><br><span class="line">[root@mha-manager ~]# systemctl start mha</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## æ·»åŠ è„šæœ¬åï¼Œå¯åŠ¨ä¸èµ·æ¥çš„åŸå› ï¼š</span></span><br><span class="line">1.è„šæœ¬æƒé™é—®é¢˜</span><br><span class="line">[root@mha-manager ~]# <span class="built_in">chmod</span> +x /etc/mha/app1/master_ip_failover</span><br><span class="line">2.è„šæœ¬è¯­æ³•é—®é¢˜</span><br><span class="line">3.è„šæœ¬æ ¼å¼é—®é¢˜</span><br><span class="line">[root@mha-manager ~]# dos2unix /etc/mha/app1/master_ip_failover</span><br><span class="line">dos2unix: converting file /etc/mha/app1/master_ip_failover to Unix format ...</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>è‡ªåŠ¨æ¢å¤è„šæœ¬</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">[root@mha ~]# <span class="built_in">cat</span> failover_status </span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment">#ä¸Šä¸€æ¬¡æ–°ä¸»åº“</span></span><br><span class="line">last_new_master=$(grep <span class="string">&#x27;(new master)&#x27;</span> /etc/mha/logs/manager.log |<span class="built_in">tail</span> -2|awk -F <span class="string">&#x27;(&#x27;</span> <span class="string">&#x27;NR==1&#123;print $1&#125;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">[root@mha ~]# <span class="built_in">cat</span> recovery_mha.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line">. /etc/init.d/functions</span><br><span class="line">. /root/failover_status</span><br><span class="line"></span><br><span class="line">log_file=<span class="string">&#x27;/etc/mha/logs/manager.log&#x27;</span></span><br><span class="line">mha_conf=<span class="string">&quot;/etc/mha/app1.cnf&quot;</span></span><br><span class="line">repl_pass=<span class="string">&#x27;123&#x27;</span></span><br><span class="line">mha_user=$(awk -F= <span class="string">&#x27;/^user/&#123;print $2&#125;&#x27;</span> <span class="variable">$&#123;mha_conf&#125;</span>)</span><br><span class="line">mha_password=$(awk -F= <span class="string">&#x27;/^password/&#123;print $2&#125;&#x27;</span> <span class="variable">$&#123;mha_conf&#125;</span>)</span><br><span class="line">down_master=$(sed -nr <span class="string">&#x27;s#^Master (.*)\(.*\).*!$#\1#gp&#x27;</span> <span class="variable">$&#123;log_file&#125;</span>|<span class="built_in">tail</span> -1 )</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span>;<span class="keyword">do</span></span><br><span class="line"><span class="comment">#åˆ¤æ–­æ˜¯å¦ä¿®å¤å®Œæˆ</span></span><br><span class="line"><span class="comment">#å½“å‰downçš„ä¸»åº“å’Œä¸Šæ¬¡ä¸»åº“ä¸€è‡´æ—¶ï¼Œåˆ¤å®šä¿®å¤å®Œæˆï¼ˆä¾æ®æˆªå–Master 172.16.1.*(172.16.1.*:3306) is down!ï¼‰</span></span><br><span class="line"><span class="comment">#åˆ¤å®šä¾æ®å°±æ˜¯åªæœ‰ä¿®å¤å®Œæˆæ‰ä¼šæœ‰Master 172.16.1.*(172.16.1.*:3306) is down!ï¼‰</span></span><br><span class="line">  <span class="keyword">if</span> [ <span class="variable">$&#123;down_master&#125;</span> == <span class="variable">$&#123;last_new_master&#125;</span> ];<span class="keyword">then</span></span><br><span class="line">    change_master=$(grep -i <span class="string">&#x27;change master to&#x27;</span> <span class="variable">$&#123;log_file&#125;</span>|<span class="built_in">tail</span> -1|awk -F: <span class="string">&#x27;&#123;print $4&#125;&#x27;</span>|sed <span class="string">&quot;s#xxx#<span class="variable">$&#123;repl_pass&#125;</span>#g&quot;</span>)</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;ä¸»åº“ä¿®å¤ä¸­...&quot;</span></span><br><span class="line">    ssh <span class="variable">$&#123;down_master&#125;</span> -C <span class="string">&#x27;systemctl start mysqld&#x27;</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">true</span>;<span class="keyword">do</span></span><br><span class="line">      mysqladmin -u<span class="variable">$&#123;mha_user&#125;</span> -p<span class="variable">$&#123;mha_password&#125;</span> -h<span class="variable">$&#123;down_master&#125;</span> ping &amp;&gt;/dev/null</span><br><span class="line">      <span class="keyword">if</span> [ $? -eq 0 ];<span class="keyword">then</span></span><br><span class="line"><span class="comment">#downçš„æœºå™¨åšä»åº“</span></span><br><span class="line">        mysql -u<span class="variable">$&#123;mha_user&#125;</span> -p<span class="variable">$&#123;mha_password&#125;</span> -h<span class="variable">$&#123;down_master&#125;</span> -e <span class="string">&quot;<span class="variable">$&#123;change_master&#125;</span>;start slave&quot;</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;ä¸»åº“ä¿®å¤æˆåŠŸ...&quot;</span></span><br><span class="line">        <span class="built_in">break</span></span><br><span class="line">      <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;æ­£åœ¨è¡¥å…¨MHAé…ç½®æ–‡ä»¶...&quot;</span></span><br><span class="line">    <span class="built_in">cat</span> &gt; <span class="variable">$&#123;mha_conf&#125;</span> &lt;&lt;- <span class="string">EOF</span></span><br><span class="line"><span class="string">        [server default]</span></span><br><span class="line"><span class="string">        master_ip_failover_script=/etc/mha/app1/master_ip_failover</span></span><br><span class="line"><span class="string">        manager_log=/etc/mha/logs/manager.log</span></span><br><span class="line"><span class="string">        manager_workdir=/etc/mha/app1</span></span><br><span class="line"><span class="string">        master_binlog_dir=/app/mysql/data</span></span><br><span class="line"><span class="string">        password=$&#123;mha_password&#125;</span></span><br><span class="line"><span class="string">        ping_interval=2</span></span><br><span class="line"><span class="string">        repl_password=123</span></span><br><span class="line"><span class="string">        repl_user=rep</span></span><br><span class="line"><span class="string">        ssh_port=22</span></span><br><span class="line"><span class="string">        ssh_user=root</span></span><br><span class="line"><span class="string">        user=$&#123;mha_user&#125;</span></span><br><span class="line"><span class="string">        [server1]</span></span><br><span class="line"><span class="string">        hostname=172.16.1.51</span></span><br><span class="line"><span class="string">        port=3306</span></span><br><span class="line"><span class="string">        [server2]</span></span><br><span class="line"><span class="string">        hostname=172.16.1.52</span></span><br><span class="line"><span class="string">        port=3306</span></span><br><span class="line"><span class="string">        [server3]</span></span><br><span class="line"><span class="string">        hostname=172.16.1.53</span></span><br><span class="line"><span class="string">        port=3306</span></span><br><span class="line"><span class="string">        [server4]</span></span><br><span class="line"><span class="string">        hostname=172.16.1.54</span></span><br><span class="line"><span class="string">        port=3306</span></span><br><span class="line"><span class="string">        EOF</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;æ­£åœ¨å¯åŠ¨MHA...&quot;</span></span><br><span class="line">    systemctl start mha</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">true</span>;<span class="keyword">do</span></span><br><span class="line">      masterha_check_status --conf=<span class="variable">$&#123;mha_conf&#125;</span> &amp;&gt;/dev/null</span><br><span class="line">      <span class="keyword">if</span> [ $? -eq 0 ];<span class="keyword">then</span></span><br><span class="line">        action <span class="string">&quot;MHA managerå¯åŠ¨&quot;</span> /bin/true</span><br><span class="line">        <span class="built_in">exit</span> 0</span><br><span class="line">      <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">continue</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><h3 id="MySQL-binlogå®æ—¶åŒæ­¥">MySQL binlogå®æ—¶åŒæ­¥</h3><p><strong>ä½¿ç”¨mysqlbinlogå®æ—¶åŒæ­¥binlog</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## MHA é…ç½® binlog server</span></span><br><span class="line"><span class="comment"># 1.ä¿®æ”¹MHAé…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@mha-manager ~]# vim /etc/mha/app1.cnf</span><br><span class="line">[binlog1]</span><br><span class="line"><span class="comment">#åŠ ä¸Šno_masterä¹‹åæ— è®ºå¦‚ä½•éƒ½ä¸ä¼šè¢«æå‡ä¸ºä¸»åº“</span></span><br><span class="line">no_master=1</span><br><span class="line">hostname=172.16.1.50</span><br><span class="line">master_binlog_dir=/data/mysql/binlog/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.åˆ›å»ºbinlogç›®å½•</span></span><br><span class="line">[root@mha-manager ~]# <span class="built_in">mkdir</span> -p /data/mysql/binlog/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.manageræœåŠ¡å™¨å®‰è£…mysql5.7å®¢æˆ·ç«¯</span></span><br><span class="line">[root@mha-manager ~]# <span class="built_in">cat</span> /etc/yum.repos.d/mysql-community.repo</span><br><span class="line">[mysql56-community]</span><br><span class="line">name=MySQL 5.6 Community Server</span><br><span class="line">baseurl=http://repo.mysql.com/yum/mysql-5.6-community/el/7/<span class="variable">$basearch</span></span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line"></span><br><span class="line">[root@mha-manager binlog]# yum install -y mysql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.å®æ—¶åŒæ­¥binlog</span></span><br><span class="line">[root@mha-manager binlog]# mysqlbinlog -R --host=172.16.1.55 --user=mha --password=mha --raw --stop-never mysql-bin.000001 &amp;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
            <tag> MHA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLçš„ä¸»ä»å¤åˆ¶</title>
      <link href="/posts/9ee789ff.html"/>
      <url>/posts/9ee789ff.html</url>
      
        <content type="html"><![CDATA[<p>:dango:<strong>ä¸ºä»€ä¹ˆåšä¸»ä»å¤åˆ¶</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.ä¸ºäº†åšé«˜å¯ç”¨</span><br><span class="line">2.ä¸ºäº†è§£å†³MySQLçš„å•ç‚¹æ•…éšœ</span><br><span class="line">3.åˆ†æ‘Šä¸»åº“çš„å‹åŠ›</span><br><span class="line">4.å¤‡ä»½ï¼ˆå»¶æ—¶ä»åº“ï¼‰</span><br></pre></td></tr></table></figure><h2 id="ä¸»ä»å¤åˆ¶åŸç†">ä¸»ä»å¤åˆ¶åŸç†</h2><p><code>ä¸‰ä¸ªçº¿ç¨‹å››ä¸ªæ–‡ä»¶é…åˆ</code></p><p><img src="https://cos.lukme.top/Pic/QQ_1724397104506.png" alt="QQ_1724397104506"></p><p><strong>1ï¼‰</strong> Slave ä¸Šé¢çš„IO çº¿ç¨‹è¿æ¥ä¸Š Masterï¼Œå¹¶è¯·æ±‚ä»æŒ‡å®šæ—¥å¿—æ–‡ä»¶çš„æŒ‡å®šä½ç½®(æˆ–è€…ä»æœ€å¼€å§‹çš„æ—¥å¿—)ä¹‹åçš„æ—¥å¿—å†…å®¹ã€‚ï¼ˆè¯·æ±‚æœ‰æ²¡æœ‰æ–°çš„æ•°æ®ï¼‰<br><strong>2ï¼‰</strong> Master æ¥æ”¶åˆ°æ¥è‡ª Slave çš„ IO çº¿ç¨‹çš„è¯·æ±‚åï¼Œé€šè¿‡è´Ÿè´£å¤åˆ¶çš„ IO çº¿ç¨‹æ ¹æ®è¯·æ±‚ä¿¡æ¯è¯»å–æŒ‡å®šæ—¥å¿—æŒ‡å®šä½ç½®ä¹‹åçš„æ—¥å¿—ä¿¡æ¯ï¼Œè¿”å›ç»™ Slave ç«¯çš„ IO çº¿ç¨‹ã€‚</p><p>3ï¼‰Slave çš„ IO çº¿ç¨‹æ¥æ”¶åˆ°ä¿¡æ¯åï¼Œå°†æ¥æ”¶åˆ°çš„æ—¥å¿—å†…å®¹ä¾æ¬¡å†™å…¥åˆ° Slave ç«¯çš„RelayLogï¼ˆä¸­ç»§æ—¥å¿—æ–‡ä»¶ï¼‰æ–‡ä»¶(MySQL-relay-bin.xxxxxx)çš„æœ€æœ«ç«¯ï¼Œå¹¶å°†è¯»å–åˆ°çš„Master ç«¯çš„bin-log çš„æ–‡ä»¶åå’Œä½ç½®è®°å½•åˆ°master-info æ–‡ä»¶ä¸­ï¼Œä»¥ä¾¿åœ¨ä¸‹ä¸€æ¬¡è¯»å–çš„æ—¶å€™èƒ½å¤Ÿæ¸…æ¥šçš„å‘Šè¯‰Masterâ€œæˆ‘éœ€è¦ä»æŸä¸ªbin-log çš„å“ªä¸ªä½ç½®å¼€å§‹å¾€åçš„æ—¥å¿—å†…å®¹ï¼Œè¯·å‘ç»™æˆ‘â€ ã€‚<br>**4ï¼‰**Slave çš„ SQL çº¿ç¨‹æ£€æµ‹åˆ° Relay Log ä¸­æ–°å¢åŠ äº†å†…å®¹åï¼Œä¼šé©¬ä¸Šè§£æè¯¥ Log æ–‡ä»¶ä¸­çš„å†…å®¹æˆä¸ºåœ¨ Master ç«¯çœŸå®æ‰§è¡Œæ—¶å€™çš„é‚£äº›å¯æ‰§è¡Œçš„ Query è¯­å¥ï¼Œå¹¶åœ¨è‡ªèº«æ‰§è¡Œè¿™äº› Queryã€‚åŒæ—¶å°†æ‰§è¡Œrelay log åå­—å’Œä½ç½®ç‚¹è®°å½•åˆ°relay-log.infoé‡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## ä¸‰ä¸ªçº¿ç¨‹</span></span><br><span class="line"><span class="comment"># ä»åº“</span></span><br><span class="line">IOçº¿ç¨‹ï¼šå’Œä¸»åº“å»ºç«‹è¿æ¥æ¥æ”¶ä¸»åº“æ–°æ•°æ®</span><br><span class="line">SQLçº¿ç¨‹ï¼šå°†IOçº¿ç¨‹æ¥æ”¶åˆ°çš„æ–°æ•°æ®åœ¨æ•°æ®åº“ä¸­æ‰§è¡Œ</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸»åº“</span></span><br><span class="line">dumpçº¿ç¨‹ï¼šæ¥æ”¶IOçº¿ç¨‹çš„è¯·æ±‚ï¼Œä»binlogä¸­å–å‡ºæ–°æ•°æ®è¿”å›ç»™IOçº¿ç¨‹</span><br><span class="line"></span><br><span class="line"><span class="comment">## å››ä¸ªæ–‡ä»¶</span></span><br><span class="line"><span class="comment"># ä»åº“</span></span><br><span class="line">master.infoï¼šè®°å½•IOçº¿ç¨‹ä¸Šä¸€æ¬¡å–å‡ºä¸»åº“ä¸Šbinlogçš„åå­—å’Œä½ç½®ç‚¹ï¼ˆä¸»åº“ä¿¡æ¯ï¼‰</span><br><span class="line">relay-logï¼šå­˜å‚¨binlogä¸­æ–°å¢çš„æ•°æ®ï¼ˆä¸æ˜¯ä¸€ç›´å­˜åœ¨çš„ï¼‰å¤åˆ¶SQLçº¿ç¨‹åœ¨æ‰§è¡Œå®Œæ–‡ä»¶ä¸­çš„æ‰€æœ‰äº‹ä»¶å¹¶ä¸”ä¸å†éœ€è¦å®ƒåï¼Œä¼šè‡ªåŠ¨åˆ é™¤æ¯ä¸ªä¸­ç»§æ—¥å¿—æ–‡ä»¶</span><br><span class="line">relay-log.infoï¼šè®°å½•SQLè¯­å¥ä¸Šä¸€å›æ‰§è¡Œåˆ°ä¸­ç»§æ—¥å¿—çš„å“ªä¸ªä½ç½®ç‚¹äº†</span><br><span class="line"><span class="comment"># ä¸»åº“</span></span><br><span class="line">bin-logï¼šäºŒè¿›åˆ¶æ—¥å¿—è®°å½•ä¸»åº“æ‰€æœ‰å¯¹è¡¨æ•°æ®å‘ç”Ÿå˜åŒ–çš„è¯­å¥</span><br></pre></td></tr></table></figure><h2 id="æ­å»ºä¸»ä»å¤åˆ¶">æ­å»ºä¸»ä»å¤åˆ¶</h2><p>:dango:<strong>ç¯å¢ƒä¸€è§ˆ    ä¸€ä¸»ä¸‰ä»</strong></p><table><thead><tr><th>ä¸»æœºå</th><th>WanIP</th><th>LanIP</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>db01</td><td>10.0.0.51</td><td>172.16.1.51</td><td>master</td></tr><tr><td>db02</td><td>10.0.0.52</td><td>172.16.1.52</td><td>slave</td></tr><tr><td>db03</td><td>10.0.0.53</td><td>172.16.1.53</td><td>slave</td></tr><tr><td>db04</td><td>10.0.0.54</td><td>172.16.1.54</td><td>slave</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä¸»åº“</span></span><br><span class="line">1.ä¿®æ”¹é…ç½®æ–‡ä»¶</span><br><span class="line">[root@db01 ~]# vim /etc/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">basedir=/app/mysql</span><br><span class="line">datadir=/app/mysql/data</span><br><span class="line">server_id=1</span><br><span class="line">log-bin=mysql-bin</span><br><span class="line">skip_name_resolve</span><br><span class="line"></span><br><span class="line">2.é‡å¯</span><br><span class="line">[root@db01 ~]# systemctl restart mysqld</span><br><span class="line"></span><br><span class="line">3.åˆ›å»ºä¸»ä»å¤åˆ¶ç”¨æˆ·</span><br><span class="line">mysql&gt; grant replication slave on *.* to rep@<span class="string">&#x27;172.16.1.5%&#x27;</span> identified by <span class="string">&#x27;123&#x27;</span>;</span><br><span class="line"></span><br><span class="line">4.æŸ¥çœ‹binlogï¼ˆmasterï¼‰ä¿¡æ¯  è®°å½•binlogæ–‡ä»¶åå’Œç‚¹</span><br><span class="line">mysql&gt; show master status;</span><br><span class="line">+------------------+----------+</span><br><span class="line">| File             | Position |</span><br><span class="line">+------------------+----------+</span><br><span class="line">| mysql-bin.000001 |  1324392 |</span><br><span class="line">+------------------+----------+</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä»åº“æ“ä½œ   ï¼ˆ db02,db03,db04 ï¼‰</span></span><br><span class="line">1.ä¿®æ”¹ä»åº“é…ç½®æ–‡ä»¶</span><br><span class="line">[root@db02 ~]# vim /etc/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">basedir=/app/mysql</span><br><span class="line">datadir=/app/mysql/data</span><br><span class="line">server_id=2</span><br><span class="line">skip_name_resolve</span><br><span class="line"></span><br><span class="line">2.é‡å¯æ•°æ®åº“</span><br><span class="line">[root@db01 ~]# systemctl restart mysqld</span><br><span class="line"></span><br><span class="line">3.ç™»å½•MySQLæ‰§è¡Œchange master è¯­å¥</span><br><span class="line">mysql &gt; change master to</span><br><span class="line">master_host=<span class="string">&#x27;172.16.1.51&#x27;</span>,</span><br><span class="line">master_user=<span class="string">&#x27;rep&#x27;</span>,</span><br><span class="line">master_password=<span class="string">&#x27;123&#x27;</span>,</span><br><span class="line">master_log_file=<span class="string">&#x27;mysql-bin.000001&#x27;</span>,</span><br><span class="line">master_log_pos=1324392,</span><br><span class="line">master_port=3306;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">############</span></span><br><span class="line">master_host=<span class="string">&#x27;172.16.1.51&#x27;</span>,     <span class="comment">#ä¸»åº“ip</span></span><br><span class="line">master_user=<span class="string">&#x27;rep&#x27;</span>,  <span class="comment">#ä¸»ä»å¤åˆ¶çš„ç”¨æˆ·</span></span><br><span class="line">master_password=<span class="string">&#x27;123&#x27;</span>,   <span class="comment">#repç”¨æˆ·çš„å¯†ç </span></span><br><span class="line">master_log_file=<span class="string">&#x27;mysql-bin.000001&#x27;</span>,<span class="comment">#ä¸»åº“åœ¨ç”¨çš„binlogæ–‡ä»¶</span></span><br><span class="line">master_log_pos=1324392, <span class="comment">#ä¸»åº“æ’å…¥ç‚¹ä½ç½®</span></span><br><span class="line">master_port=3306;</span><br><span class="line"></span><br><span class="line">4.å¼€å¯ä¸»ä»å¤åˆ¶</span><br><span class="line">mysql&gt; start slave;</span><br><span class="line"></span><br><span class="line">5.æŸ¥çœ‹ä¸»ä»å¤åˆ¶çŠ¶æ€   (ä¿è¯ä¸¤ä¸ªçº¿ç¨‹éƒ½æ˜¯OKçš„)</span><br><span class="line">mysql&gt; show slave status\G</span><br><span class="line">Slave_IO_Running: Yes</span><br><span class="line">Slave_SQL_Running: Yes</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ä¸»ä»æ•…éšœå¤„ç†-dango">ä¸»ä»æ•…éšœå¤„ç†:dango:</h2><p>mysqlé‡Œæ‰§è¡Œ<code>show slave status\G</code> æŸ¥çœ‹æ˜¯å“ªä¸ªçº¿ç¨‹å‡ºé”™</p><p>:dango:<strong>IOçº¿ç¨‹æ•…éšœ</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.æ£€æŸ¥è¿æ¥æ˜¯å¦æœ‰é—®é¢˜</span></span><br><span class="line">change master to</span><br><span class="line">master_host=<span class="string">&#x27;172.16.1.51&#x27;</span>,</span><br><span class="line">master_user=<span class="string">&#x27;rep&#x27;</span>,</span><br><span class="line">master_password=<span class="string">&#x27;123&#x27;</span>,</span><br><span class="line">master_log_file=<span class="string">&#x27;mysql-bin.000001&#x27;</span>,</span><br><span class="line">master_log_pos=1324392,</span><br><span class="line">master_port=3306;</span><br><span class="line"></span><br><span class="line"><span class="comment">#2.æ£€æŸ¥IPæ˜¯å¦æœ‰é—®é¢˜</span></span><br><span class="line">ping 172.16.1.51   ping ä¸»æœºip</span><br><span class="line"></span><br><span class="line"><span class="comment">#3.æ£€æŸ¥ç«¯å£æ˜¯å¦æœ‰é—®é¢˜</span></span><br><span class="line">telnet 172.16.1.51 3306</span><br><span class="line">ç«¯å£ä¸é€šï¼š</span><br><span class="line">- é˜²ç«å¢™ selinux</span><br><span class="line">- æœåŠ¡æ²¡èµ·</span><br><span class="line">- æ²¡æœ‰åˆ›å»ºè¿œç¨‹è¿æ¥çš„ç”¨æˆ·</span><br><span class="line"></span><br><span class="line"><span class="comment">#4.æ£€æŸ¥ç”¨æˆ·åå’Œå¯†ç èƒ½å¦ç™»å½•</span></span><br><span class="line">[root@db02 ~]# mysql -urep -p123 -h172.16.1.51</span><br><span class="line"></span><br><span class="line"><span class="comment">#5.  ä¸»åº“  æ£€æŸ¥binlogåå­—å’Œä½ç½®ç‚¹</span></span><br><span class="line">mysql&gt; show master status;</span><br><span class="line">+------------------+----------+</span><br><span class="line">| File             | Position |</span><br><span class="line">+------------------+----------+</span><br><span class="line">| mysql-bin.000001 |  1324392 |</span><br><span class="line">+------------------+----------+</span><br><span class="line"></span><br><span class="line"><span class="comment">#6.æ£€æŸ¥ä¸»åº“å’Œä»åº“é…ç½®æ–‡ä»¶çš„server_idæ˜¯å¦ç›¸åŒ</span></span><br><span class="line"><span class="comment">#å¦‚æœç›¸åŒåˆ™æŠ¥é”™å¦‚ä¸‹ï¼š</span></span><br><span class="line">Last_IO_Error:Fatal error:The slave I/0 thread stops because master and slave have equal MySQL server ids;these ids must be different <span class="keyword">for</span> replication to work (or the --repLicate-same-server-id option must be used on slave but this does not always make sense;please c</span><br><span class="line"></span><br><span class="line"><span class="comment">#7.æ£€æŸ¥uuidæ˜¯å¦ä¸€æ ·ï¼ˆå¦‚æœä½ æ˜¯ç›´æ¥å…‹éš†è™šæ‹Ÿæœºï¼‰</span></span><br><span class="line">[root@db01 ~]# <span class="built_in">cat</span> /app/mysql/data/auto.cnf </span><br><span class="line">[auto]</span><br><span class="line">server-uuid=80a4722e-60ef-11ef-baf4-000c29bff80f</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¦‚æœuuidä¸€ç›´åˆ™æŠ¥é”™å¦‚ä¸‹</span></span><br><span class="line">error:The slave I/0 thread stops because master and slave have equal MySQL server UUIDs;these UUIDs must be different <span class="keyword">for</span> replication to work.</span><br></pre></td></tr></table></figure><p>:dango:<strong>SQLçº¿ç¨‹æ•…éšœ</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ ¹æœ¬åŸå› ï¼šä¸»åº“å’Œä»åº“æ•°æ®ä¸ä¸€è‡´</span></span><br><span class="line"><span class="comment"># 1.ä¸»åº“æœ‰ä»åº“æ²¡æœ‰çš„æ•°æ®</span></span><br><span class="line">å‡ºç°åŸå› ï¼šæ–°åŠ çš„ä»åº“ä¸»ä»å¤åˆ¶ç‚¹ä½æ˜¯ä¸»åº“å·²æœ‰æ•°æ®çŠ¶æ€</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.ä¸»åº“æ²¡æœ‰ä»åº“æœ‰çš„æ•°æ®</span></span><br><span class="line">`å‡ºç°åŸå› `:ç›´æ¥åœ¨ä»åº“ä¸­æ“ä½œæ•°æ®åº“</span><br><span class="line">`è§£å†³`:</span><br><span class="line">è§£å†³æ–¹æ¡ˆï¼šä»åº“è®¾ç½®ä¸ºåªè¯»ï¼ˆè¯»å†™åˆ†ç¦»ï¼‰</span><br><span class="line"><span class="comment"># åœ¨å‘½ä»¤è¡Œä¸´æ—¶è®¾ç½®</span></span><br><span class="line"><span class="built_in">set</span> global read_only=1;</span><br><span class="line"><span class="comment"># åœ¨é…ç½®æ–‡ä»¶ä¸­æ°¸ä¹…ç”Ÿæ•ˆ</span></span><br><span class="line">read_only=1</span><br></pre></td></tr></table></figure><p>:dango:<strong>ç”Ÿæˆç¯å¢ƒå¦‚ä½•æ·»åŠ æ–°ä»åº“  ä¿æŒæ–°ä¸»æ•°æ®ä¸€è‡´  é¿å…SQLçº¿ç¨‹æ•…éšœ</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.ä»åº“åˆå§‹åŒ–ç¯å¢ƒ</span></span><br><span class="line">[root@db04 ~]# systemctl stop mysqld</span><br><span class="line">[root@db04 ~]# <span class="built_in">rm</span> -fr /app/mysql/data</span><br><span class="line">[root@db04 ~]# /app/mysql/scripts/mysql_install_db --user=mysql --basedir=/app/mysql --datadir=/app/mysql/data</span><br><span class="line"></span><br><span class="line">`mysql5.7`</span><br><span class="line">/app/mysql/bin/mysqld --initialize-insecure --user=mysql --basedir=/app/mysq --datadir=/app/mysql/data</span><br><span class="line"></span><br><span class="line">[root@db04 ~]# systemctl start mysqld</span><br><span class="line"></span><br><span class="line"><span class="comment">#2.ä¸»åº“æ‰“ç‚¹å…¨å¤‡</span></span><br><span class="line">[root@db01 ~]# mysqldump -A -R --triggers --master-data=2 --single-transaction|gzip &gt; /tmp/full.sql.gz</span><br><span class="line"></span><br><span class="line"><span class="comment">#3.ä»åº“æ¢å¤æ•°æ®</span></span><br><span class="line">[root@db01 ~]# scp /tmp/full.sql.gz 172.16.1.54:/root</span><br><span class="line">[root@db04 ~]# zcat /root/full.sql.gz |mysql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4..æŸ¥çœ‹ä¸»åº“å…¨å¤‡çš„ç‚¹ä½</span></span><br><span class="line">[root@db04 ~]# zcat /root/full.sql.gz |<span class="built_in">head</span> -25</span><br><span class="line">--MASTER_LOG_FILE=<span class="string">&#x27;mysql-bin.000001&#x27;</span>, MASTER_LOG_POS=1843126;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.ä»åº“æ‰§è¡Œchange masterè¯­å¥</span></span><br><span class="line">change master to</span><br><span class="line">master_host=<span class="string">&#x27;172.16.1.51&#x27;</span>,</span><br><span class="line">master_user=<span class="string">&#x27;rep&#x27;</span>,</span><br><span class="line">master_password=<span class="string">&#x27;123&#x27;</span>,</span><br><span class="line">master_log_file=<span class="string">&#x27;mysql-bin.000001&#x27;</span>,</span><br><span class="line">master_log_pos=1843126;</span><br><span class="line"></span><br><span class="line"><span class="comment">#6.å¼€å¯ä¸»ä»å¤åˆ¶</span></span><br><span class="line">mysql&gt; start slave;</span><br></pre></td></tr></table></figure><p>:dango:<strong>å–æ¶ˆä¸»ä»å¤åˆ¶</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt;stop slave;</span><br><span class="line"></span><br><span class="line">mysql&gt;reset slave all;</span><br><span class="line"></span><br><span class="line">mysql&gt; show slave status\G</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æ•°æ®åº“çš„å»¶æ—¶ä»åº“">æ•°æ®åº“çš„å»¶æ—¶ä»åº“</h2><p><strong>:dango:ä¼ ç»Ÿä¸»ä»å¤åˆ¶ç¼ºé™·</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.ä¼ ç»Ÿä½ä»å¤åˆ¶æ— æ³•åšå¤‡ä»½</span><br><span class="line">2.ä¼ ç»Ÿä¸»ä»å¤åˆ¶æ— æ³•è¿‡æ»¤å¤åˆ¶</span><br><span class="line">3.ä¼ ç»Ÿä¸»ä»å¤åˆ¶é€Ÿåº¦æ…¢</span><br><span class="line">4.ä¼ ç»Ÿä¸»ä»å¤åˆ¶æ˜¯å¼‚æ­¥å¤åˆ¶ï¼Œä»åº“æ•°æ®å»¶è¿Ÿ</span><br><span class="line"></span><br><span class="line">`å»¶æ—¶ä»åº“åº”è¿è€Œç”Ÿ`</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ä¸€èˆ¬ä¼ä¸šä¸­ä¼šå»¶æ—¶3-6å°æ—¶ï¼ˆå¼€ä¸å¼€å¯ä»åº“å»¶æ—¶   çœ‹ä¼ä¸šéœ€æ±‚ï¼Œä¼˜å¼Šç«¯éƒ½æœ‰ï¼‰</span><br><span class="line"></span><br><span class="line">`ä¼˜ç‚¹ï¼š`</span><br><span class="line">1.åšå»¶æ—¶ä»åº“çš„æœåŠ¡å™¨ï¼Œæ— æ³•åœ¨ç”Ÿäº§ä¸­ç»§ç»­æä¾›æœåŠ¡</span><br><span class="line">2.å¤‡ä»½</span><br><span class="line">3.æ¢å¤æ•°æ®é€Ÿåº¦æ›´å¿«</span><br><span class="line"></span><br><span class="line">`å¼Šç«¯:`</span><br><span class="line">ä¼ä¸šä½¿ç”¨ä»åº“å»¶æ—¶åšå¤‡ä»½éœ€æ±‚ï¼Œéœ€è¦ä¸€å°æœåŠ¡å™¨åšå¤‡èƒï¼Œæµªè´¹èµ„æº</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>:dango:<strong>å»¶æ—¶ä»åº“åŸç†</strong></p><p>å¦‚ä¸‹ä¸»ä»åŸºç¡€ä¸Šï¼ŒIOçº¿ç¨‹ç»§ç»­æ‹¿æ•°æ®ï¼ŒSQLçº¿ç¨‹åœ¨æŒ‡å®šæ—¶é—´åï¼Œå»¶æ—¶æ‰§è¡Œï¼Œå½“ä¸»åº“å‡ºç°åˆ é™¤åº“æ“ä½œï¼Œé‚£ä¹ˆä»åº“å°†åœ¨è®¾ç½®çš„å»¶æ—¶ä¹‹åæ‰ä¼šåˆ é™¤åº“ï¼Œè¿™å°±æ˜¯å»¶æ—¶ä»åº“å®ç°åŸç†</p><p><img src="https://cos.lukme.top/Pic/QQ_1724397104506-1724654962435-1.png" alt="QQ_1724397104506"></p><p>:dango:<strong>å¦‚ä½•é…ç½®å»¶æ—¶ä»åº“</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.åœæ­¢ä¸»ä»å¤åˆ¶</span></span><br><span class="line">mysql&gt; stop slave;</span><br><span class="line"></span><br><span class="line"><span class="comment">#2. è®¾ç½®å»¶æ—¶180s</span></span><br><span class="line">mysql&gt; change master to master_delay=180;</span><br><span class="line"></span><br><span class="line"><span class="comment">#3.å¼€å¯ä¸»ä»</span></span><br><span class="line">mysql&gt; start slave;</span><br><span class="line"></span><br><span class="line"><span class="comment">#4.æŸ¥çœ‹çŠ¶æ€</span></span><br><span class="line">mysql&gt; show slave status \G</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#å…³é—­å»¶æ—¶ä»åº“</span></span><br><span class="line"><span class="comment">#åœæ­¢ä¸»ä»å¤åˆ¶</span></span><br><span class="line">mysql&gt; stop slave;</span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾ç½®å»¶æ—¶ä¸º0å…³é—­</span></span><br><span class="line">mysql&gt; change master to master_delay=0;</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¼€å¯ä¸»ä»</span></span><br><span class="line">mysql&gt; start slave;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä½¿ç”¨å»¶æ—¶ä»åº“æ¢å¤æ•°æ®</span></span><br><span class="line">`æ€è·¯ï¼š</span><br><span class="line">`IOçº¿ç¨‹ä¸åœï¼Œè¯»å–relay-logé‡ŒSQLçº¿ç¨‹æœ€åæ‹¿å–çš„ç‚¹ä½ä¸ºèµ·å§‹ç‚¹ï¼Œè¿‡æ»¤relay-binlogæ–‡ä»¶è¯»å–dropä¹‹å‰çš„ç‚¹ä¸ºç»“æŸç‚¹ï¼Œè¿™ä¸€æ®µä¸ºç¬¬ä¸€æ¬¡æ–°å¢æ•°æ®`</span><br><span class="line"></span><br><span class="line">`drop ä¹‹åç»“æŸç‚¹ä¸ºèµ·ç‚¹ï¼Œåœæ­¢æ•°æ®åº“å†™å…¥ï¼Œæ­¤æ—¶è¯»å–relay-binlogæ–‡ä»¶æœ€åç‚¹ï¼ˆIOä¸åœï¼‰ï¼Œæˆªå–ä¸ºç¬¬äºŒæ®µæ–°å¢æ•°æ®`</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.åœæ­¢å»¶æ—¶ä»åº“SQLçº¿ç¨‹</span></span><br><span class="line">mysql&gt; stop slave SQL_thread;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2å‡†å¤‡æ–°ç¯å¢ƒ</span></span><br><span class="line">[root@db03 ~]# systemctl stop mysqld</span><br><span class="line">[root@db03 ~]# <span class="built_in">rm</span> -fr /app/mysql/data</span><br><span class="line">[root@db03 ~]# /app/mysql/bin/mysqld --user=mysql --basedir=/app/mysql --datadir=/app/mysql/data</span><br><span class="line">[root@db03 ~]# systemctl start mysqld</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.å…¨å¤‡å»¶æ—¶ä»åº“</span></span><br><span class="line">[root@db04 ~]# mysqldump -A -R --triggers &gt; /tmp/full_new.sql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.æˆªå–relay-log</span></span><br><span class="line"><span class="built_in">cat</span> /app/mysql/data/relay-log.info </span><br><span class="line">./db04-relay-bin.000002</span><br><span class="line">12656</span><br><span class="line">mysql-bin.000003</span><br><span class="line">390768</span><br><span class="line">èµ·å§‹ä½ç½®ç‚¹ï¼š12656</span><br><span class="line"></span><br><span class="line">[root@db04 data]# mysqlbinlog --base64-output=decode-rows db04-relay-bin.000002 |grep -C 10 drop    <span class="comment">#dropä¹‹å‰</span></span><br><span class="line">ç»“æŸä½ç½®ç‚¹ï¼š24110</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¯¼å‡ºç¬¬ä¸€æ®µæ–°å¢æ•°æ®</span></span><br><span class="line">mysqlbinlog --start-position=12656 --stop-position=24110 /app/mysql/data/db04-relay-bin.000002 &gt;/tmp/inc1.sql</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#åœæ­¢ä¸»åº“å†™å…¥</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æˆªå–ç¬¬äºŒæ®µæ–°å¢æ•°æ®</span></span><br><span class="line">[root@db04 data]# mysqlbinlog --base64-output=decode-rows db04-relay-bin.000002 |grep -C 10 drop    <span class="comment">#dropä¹‹å</span></span><br><span class="line">èµ·å§‹ä½ç½®ç‚¹ï¼š24202</span><br><span class="line">mysqlbinlog --base64-output=decode-rows db04-relay-bin.000002</span><br><span class="line">ç»“æŸä½ç½®ç‚¹ï¼š220265</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¯¼å‡ºç¬¬äºŒæ®µæ–°åƒ§æ•°æ®</span></span><br><span class="line">mysqlbinlog --start-position=24202 --stop-position=240826 /app/mysql/data/db04-relay-bin.000002 &gt;/tmp/inc2.sql</span><br><span class="line"></span><br><span class="line">prodï¼š1051</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¯¼å…¥æ•°æ®</span></span><br><span class="line">å¯¼å…¥å»¶æ—¶ä»åº“å…¨å¤‡</span><br><span class="line">[root@db04 data]# scp /tmp/full.sql 172.16.1.53:/root</span><br><span class="line">[root@db03 ~]# mysql &lt;full.sql </span><br><span class="line"></span><br><span class="line"><span class="comment">#å¯¼å…¥ç¬¬ä¸€æ¬¡æ–°å¢æ•°æ®</span></span><br><span class="line">[root@db04 data]# scp /tmp/inc1.sql  172.16.1.53:/root   </span><br><span class="line">[root@db03 ~]# mysql &lt;inc1.sql </span><br><span class="line"></span><br><span class="line"><span class="comment">#å¯¼å…¥ç¬¬äºŒæ¬¡æ–°å¢æ•°æ®</span></span><br><span class="line">[root@db04 data]# scp /tmp/inc2.sql  172.16.1.53:/root</span><br><span class="line">[root@db03 ~]# mysql &lt;inc2.sql </span><br><span class="line"></span><br><span class="line"><span class="comment">#åº”ç”¨å‰²æ¥</span></span><br><span class="line">å¼€å‘æ”¹ä»£ç </span><br><span class="line">è¿ç»´å°†æ–°ç¯å¢ƒå…¨å¤‡åˆ°æ—§ç¯å¢ƒ</span><br></pre></td></tr></table></figure><h2 id="æ•°æ®åº“çš„åŠåŒæ­¥å¤åˆ¶">æ•°æ®åº“çš„åŠåŒæ­¥å¤åˆ¶</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä»MYSQL5.5å¼€å§‹ï¼Œæ”¯æŒåŠè‡ªåŠ¨å¤åˆ¶ã€‚ä¹‹å‰ç‰ˆæœ¬çš„MySQL Replicationéƒ½æ˜¯å¼‚ï¼ˆasynchronousï¼‰çš„ï¼Œä¸»åº“åœ¨æ‰§è¡Œå®Œä¸€äº›äº‹åŠ¡åï¼Œæ˜¯ä¸ä¼šç®¡å¤‡åº“çš„è¿›åº¦çš„ã€‚å¦‚æœå¤‡åº“ä¸å¹¸è½åï¼Œè€Œæ›´ä¸å¹¸çš„æ˜¯ä¸»åº“æ­¤æ—¶åˆå‡ºç°Crashï¼ˆä¾‹å¦‚å®•æœºï¼‰ï¼Œè¿™æ—¶å¤‡åº“ä¸­çš„æ•°æ®å°±æ˜¯ä¸å®Œæ•´çš„ã€‚ç®€è€Œè¨€ä¹‹ï¼Œåœ¨ä¸»åº“å‘ç”Ÿæ•…éšœçš„æ—¶å€™ï¼Œæˆ‘ä»¬æ— æ³•ä½¿ç”¨å¤‡åº“æ¥ç»§ç»­æä¾›æ•°æ®ä¸€è‡´çš„æœåŠ¡äº†ã€‚</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">åŠåŒæ­¥å¤åˆ¶å‡ºç°åŸå› ï¼š`ä¸ºäº†ä¿è¯ä¸»åº“å’Œä»åº“çš„æ•°æ®ä¸€è‡´æ€§`</span><br><span class="line">ä»åº“çš„IOçº¿ç¨‹åœ¨æ²¡æœ‰æ¥æ”¶åˆ°ACKä¹‹å‰ï¼Œä¼šé˜»å¡ä¸»åº“å†™å…¥æ“ä½œ</span><br><span class="line"></span><br><span class="line">`åŠåŒæ­¥ç¼ºç‚¹`ï¼šé˜»å¡ä¸»åº“å†™å…¥æ•°æ®ï¼Œå½±å“ä¸»åº“æ€§èƒ½ï¼Œé™ä½ç”¨æˆ·ä½“éªŒ</span><br><span class="line">`åŠåŒæ­¥ä¼˜ç‚¹`ï¼šä¸»åº“å’Œä»åº“æ•°æ®ä¿è¯äº†ä¸€è‡´æ€§ï¼Œä¸ä¼šä¸¢æ•°æ®</span><br><span class="line"></span><br><span class="line">åŠåŒæ­¥å¤åˆ¶ï¼ˆSemi synchronous Replicationï¼‰åˆ™ä¸€å®šç¨‹åº¦ä¸Šä¿è¯æäº¤çš„äº‹åŠ¡å·²ç»ä¼ ç»™äº†è‡³å°‘ä¸€ä¸ªå¤‡åº“ã€‚å‡ºå‘ç‚¹æ˜¯ä¿è¯ä¸»ä»æ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼Œå®‰å…¨çš„è€ƒè™‘ã€‚</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>:dango:æ³¨æ„</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1)åœ¨åŠåŒæ­¥å¤åˆ¶ä¸­ï¼ŒMasterèŠ‚ç‚¹ç­‰å¾…SlaveèŠ‚ç‚¹è¿”å›ç¡®è®¤ä¿¡æ¯çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå‘ç”Ÿå¼‚å¸¸ï¼Œæˆ–è€…ä¸€ç›´ç­‰å¾…ç›´åˆ°è¶…è¿‡rpl_semi_sync_master_timeouté…ç½®çš„æ—¶é—´ç‚¹ï¼ŒåŒæ­¥å¤åˆ¶å°†é€€åŒ–ä¸ºå¼‚æ­¥å¤åˆ¶ã€‚</span><br><span class="line"></span><br><span class="line">2ï¼‰åœ¨é€€åŒ–ä¸ºå¼‚æ­¥å¤åˆ¶åï¼Œå¦‚æœSlaveèŠ‚ç‚¹è¿½ä¸Šäº†MasterèŠ‚ç‚¹ï¼Œé‚£ä¹ˆMasterèŠ‚ç‚¹åˆä¼šé‡æ–°è½¬ä¸ºåŠåŒæ­¥å¤åˆ¶ã€‚</span><br><span class="line"></span><br><span class="line">çœ‹ä¼ä¸šé€‰æ‹©</span><br></pre></td></tr></table></figure><p>:dango:<strong>MySQLçš„åŠåŒæ­¥å¤åˆ¶åŸç†</strong></p><p>IOçº¿ç¨‹å–å‡ºæ•°æ®ä¹‹åï¼Œå…ˆæ”¾å…¥tcpç¼“å­˜ï¼Œç›´åˆ°SQLçº¿ç¨‹å®Œæˆå†ç»™IOçº¿ç¨‹è¿”å›ack</p><p><strong>åŠåŒæ­¥æ’ä»¶</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@db01 ~]# ll /app/mysql/lib/plugin/</span><br><span class="line">-rwxr-xr-x 1 mysql mysql 515584 Aug  7 23:04 semisync_master.so</span><br><span class="line">-rwxr-xr-x 1 mysql mysql 276296 Aug  7 23:04 semisync_slave.so</span><br></pre></td></tr></table></figure><p><strong>:dango:é…ç½®åŠåŒæ­¥</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## ä¸»åº“æ“ä½œ</span></span><br><span class="line"><span class="comment"># 1.ä¸»åº“æŸ¥çœ‹æ˜¯å¦æ”¯æŒåŠåŒæ­¥</span></span><br><span class="line">mysql&gt; show global variables like <span class="string">&#x27;have_dynamic_loading&#x27;</span>;</span><br><span class="line">+----------------------+-------+</span><br><span class="line">| Variable_name | Value|</span><br><span class="line">+----------------------+-------+</span><br><span class="line">| have_dynamic_loading | YES |</span><br><span class="line">+----------------------+-------+</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.å®‰è£…ä¸»åº“åŠåŒæ­¥æ’ä»¶</span></span><br><span class="line">mysql&gt; INSTALL PLUGIN rpl_semi_sync_master SONAME<span class="string">&#x27;semisync_master.so&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.å¯åŠ¨æ’ä»¶</span></span><br><span class="line">mysql&gt; SET GLOBAL rpl_semi_sync_master_enabled = 1;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.è®¾ç½®è¶…æ—¶æ—¶é—´(æ¯«ç§’)</span></span><br><span class="line">mysql&gt; SET GLOBAL rpl_semi_sync_master_timeout = 1000;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.æ°¸ä¹…å¯åŠ¨+è¶…æ—¶æ—¶é—´</span></span><br><span class="line">[root@db01 ~]# vim /etc/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">rpl_semi_sync_master_enabled=1</span><br><span class="line">rpl_semi_sync_master_timeout = 1000</span><br><span class="line"></span><br><span class="line">db01 [(none)]&gt;show variables like<span class="string">&#x27;rpl%&#x27;</span>;</span><br><span class="line">+------------------------------------+----------+</span><br><span class="line">| Variable_name                      | Value    |</span><br><span class="line">+------------------------------------+----------+</span><br><span class="line">| rpl_semi_sync_master_enabled       | ON       |</span><br><span class="line">| rpl_semi_sync_master_timeout       | 1000     |</span><br><span class="line">| rpl_semi_sync_master_trace_level   | 32       |</span><br><span class="line">| rpl_semi_sync_master_wait_no_slave | ON       |</span><br><span class="line">| rpl_stop_slave_timeout             | 31536000 |</span><br><span class="line">+------------------------------------+----------+</span><br><span class="line"></span><br><span class="line">db01 [(none)]&gt;show global status like <span class="string">&#x27;rpl_semi%&#x27;</span>;</span><br><span class="line">+--------------------------------------------+-------+</span><br><span class="line">| Variable_name                              | Value |</span><br><span class="line">+--------------------------------------------+-------+</span><br><span class="line">| Rpl_semi_sync_master_clients               | 0     |</span><br><span class="line">| Rpl_semi_sync_master_net_avg_wait_time     | 0     |</span><br><span class="line">| Rpl_semi_sync_master_net_wait_time         | 0     |</span><br><span class="line">| Rpl_semi_sync_master_net_waits             | 0     |</span><br><span class="line">| Rpl_semi_sync_master_no_times              | 0     |</span><br><span class="line">| Rpl_semi_sync_master_no_tx                 | 0     |</span><br><span class="line">| Rpl_semi_sync_master_status                | ON    |</span><br><span class="line">| Rpl_semi_sync_master_timefunc_failures     | 0     |</span><br><span class="line">| Rpl_semi_sync_master_tx_avg_wait_time      | 0     |</span><br><span class="line">| Rpl_semi_sync_master_tx_wait_time          | 0     |</span><br><span class="line">| Rpl_semi_sync_master_tx_waits              | 0     |</span><br><span class="line">| Rpl_semi_sync_master_wait_pos_backtraverse | 0     |</span><br><span class="line">| Rpl_semi_sync_master_wait_sessions         | 0     |</span><br><span class="line">| Rpl_semi_sync_master_yes_tx                | 0     |</span><br><span class="line">+--------------------------------------------+-------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## ä»åº“æ“ä½œ</span></span><br><span class="line"><span class="comment"># 1.å®‰è£…ä»åº“åŠåŒæ­¥æ’ä»¶</span></span><br><span class="line">mysql&gt; INSTALL PLUGIN rpl_semi_sync_slave SONAME<span class="string">&#x27;semisync_slave.so&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.å¯åŠ¨æ’ä»¶</span></span><br><span class="line">mysql&gt; SET GLOBAL rpl_semi_sync_slave_enabled = 1;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.é‡å¯IOçº¿ç¨‹</span></span><br><span class="line">mysql&gt; stop slave io_thread;</span><br><span class="line">mysql&gt; start slave io_thread;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.æ°¸ä¹…ç”Ÿæ•ˆ</span></span><br><span class="line">[root@db02 data]# vim /etc/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">rpl_semi_sync_slave_enabled = 1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mysql&gt; show global status like <span class="string">&#x27;rpl_semi%&#x27;</span>;</span><br><span class="line">+--------------------------------------------+-------+</span><br><span class="line">| Variable_name                              | Value |</span><br><span class="line">+--------------------------------------------+-------+</span><br><span class="line">| Rpl_semi_sync_master_clients               | 1     |</span><br><span class="line">| Rpl_semi_sync_master_net_avg_wait_time     | 0     |</span><br><span class="line">| Rpl_semi_sync_master_net_wait_time         | 0     |</span><br><span class="line">| Rpl_semi_sync_master_net_waits             | 6     |</span><br><span class="line">| Rpl_semi_sync_master_no_times              | 0     |</span><br><span class="line">| Rpl_semi_sync_master_no_tx                 | 0     |</span><br><span class="line">| Rpl_semi_sync_master_status                | ON    |</span><br><span class="line">| Rpl_semi_sync_master_timefunc_failures     | 0     |</span><br><span class="line">| Rpl_semi_sync_master_tx_avg_wait_time      | 1363  |</span><br><span class="line">| Rpl_semi_sync_master_tx_wait_time          | 8178  |</span><br><span class="line">| Rpl_semi_sync_master_tx_waits              | 6     |</span><br><span class="line">| Rpl_semi_sync_master_wait_pos_backtraverse | 0     |</span><br><span class="line">| Rpl_semi_sync_master_wait_sessions         | 0     |</span><br><span class="line">| Rpl_semi_sync_master_yes_tx                | 6     |</span><br><span class="line">+--------------------------------------------+-------+</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="MySQLè¿‡æ»¤å¤åˆ¶">MySQLè¿‡æ»¤å¤åˆ¶</h2><p>:dango:<strong>ä¸»åº“é…ç½®è¿‡æ»¤å¤åˆ¶</strong></p><ul><li>binlog-do-dbï¼šç™½åå•</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@db01 ~]# <span class="built_in">cat</span> /etc/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">binlog-do-db=prod</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">db01 [(none)]&gt;show master status;</span><br><span class="line">+------------------+----------+--------------+</span><br><span class="line">| File             | Position | Binlog_Do_DB |</span><br><span class="line">+------------------+----------+--------------+</span><br><span class="line">| mysql-bin.000006 |   515446 |     prod     |</span><br><span class="line">+------------------+----------+--------------+</span><br><span class="line"></span><br><span class="line">binlogï¼šåªè®°å½•prodåº“çš„æ•°æ®</span><br></pre></td></tr></table></figure><ul><li>binlog-ignore-dbï¼šé»‘åå•</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@db01 ~]# <span class="built_in">cat</span> /etc/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">binlog-ignore-db=prod</span><br><span class="line">binlogï¼šä¸è®°å½•prodåº“çš„æ•°æ®</span><br><span class="line"></span><br><span class="line">mysql&gt; show master status;</span><br><span class="line">+------------------+----------+--------------+------------------+</span><br><span class="line">| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB |</span><br><span class="line">+------------------+----------+--------------+------------------+</span><br><span class="line">| mysql-bin.000006 |   515446 |              |      prod        |</span><br><span class="line">+------------------+----------+--------------+------------------+</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>:dango:<strong>ä»åº“é…ç½®è¿‡æ»¤å¤åˆ¶</strong></p><p><strong>ç™½åå•</strong></p><ul><li>replicate-do-db=prod                    #ä»åº“SQLçº¿ç¨‹åªæ‰§è¡Œprodåº“çš„SQLè¯­å¥</li><li>replicate-do-table=prod.prod        #ä»åº“SQLçº¿ç¨‹åªæ‰§è¡Œprodåº“é‡Œprodè¡¨çš„SQLè¯­å¥</li><li>replicate-wild-do-table=prod.p*     #ä»åº“SQLçº¿ç¨‹åªæ‰§è¡Œprodåº“é‡Œæ‰€æœ‰på¼€å¤´è¡¨çš„SQLè¯­å¥</li></ul><p>SQLçº¿ç¨‹åªæ‰§è¡Œ Replicat_Do_DBæŒ‡å®šçš„åº“çš„SQLè¯­å¥</p><p><strong>é»‘åå•</strong></p><ul><li>replicate-ignore-db</li><li>replicate-ignore-table</li><li>replicate-wild-ignore-table</li></ul><p>SQLçº¿ç¨‹ä¸æ‰§è¡Œ Replicat_Ignore_DBæŒ‡å®šçš„åº“çš„SQLè¯­å¥</p><h2 id="åŸºäºGTIDçš„ä¸»ä»å¤åˆ¶">åŸºäºGTIDçš„ä¸»ä»å¤åˆ¶</h2><p>:dango:<strong>ä»€ä¹ˆæ˜¯GTID</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GTIDï¼šäº‹åŠ¡æäº¤åšçš„ä¸»ä»å¤åˆ¶ï¼ˆå…¨å±€äº‹åŠ¡æ ‡è¯†ç¬¦ï¼‰</span><br><span class="line">GTID=UUIDï¼šä¸»åº“çš„èº«ä»½è¯å· + TIDï¼šäº‹åŠ¡æäº¤å·</span><br><span class="line">3E11FA47-71CA-11E1-9E33-C80AA9429562:23</span><br></pre></td></tr></table></figure><p>:dango:<strong>GTIDç‰¹æ€§</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(1).æ”¯æŒå¤šçº¿ç¨‹å¤åˆ¶:äº‹å®ä¸Šæ˜¯é’ˆå¯¹æ¯ä¸ªdatabaseå¼€å¯ç›¸åº”çš„ç‹¬ç«‹çº¿ç¨‹,å³æ¯ä¸ªåº“æœ‰ä¸€ä¸ªå•ç‹¬çš„(sqlthread).</span><br><span class="line">(2).æ”¯æŒå¯ç”¨GTID,åœ¨é…ç½®ä¸»ä»å¤åˆ¶,ä¼ ç»Ÿçš„æ–¹å¼é‡Œ,ä½ éœ€è¦æ‰¾åˆ°binlogå’ŒPOSç‚¹,ç„¶åchange master toæŒ‡å‘.åœ¨mysql5.6é‡Œ,æ— é¡»å†çŸ¥é“binlogå’ŒPOSç‚¹,åªéœ€è¦çŸ¥é“masterçš„IP/ç«¯å£/è´¦å·å¯†ç å³å¯,å› ä¸ºåŒæ­¥å¤åˆ¶æ˜¯è‡ªåŠ¨çš„,MySQLé€šè¿‡å†…éƒ¨æœºåˆ¶GTIDè‡ªåŠ¨æ‰¾ç‚¹åŒæ­¥.</span><br><span class="line">(3).åŸºäºRowå¤åˆ¶åªä¿å­˜æ”¹å˜çš„åˆ—,å¤§å¤§èŠ‚çœDisk Space/Network resourceså’ŒMemory usage.</span><br><span class="line">(4).æ”¯æŒæŠŠMaster å’ŒSlaveçš„ç›¸å…³ä¿¡æ¯è®°å½•åœ¨Tableä¸­åŸæ¥æ˜¯è®°å½•åœ¨æ–‡ä»¶é‡Œ,è®°å½•åœ¨è¡¨é‡Œ,å¢å¼ºå¯ç”¨æ€§</span><br><span class="line">(5).æ”¯æŒå»¶è¿Ÿå¤åˆ¶</span><br></pre></td></tr></table></figure><p>:dango:<strong>GTIDä¸»ä»é…ç½®</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">ä¸»åº“172.16.1.51</span><br><span class="line">ä»åº“172.16.1.52ã€172.16.1.53ã€172.16.1.54</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.ä¿®æ”¹ä¸»åº“é…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@db01 ~]# vim /etc/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">server_id=1</span><br><span class="line">log-bin=mysql-bin</span><br><span class="line">gtid_mode=ON</span><br><span class="line">enforce_gtid_consistency</span><br><span class="line"><span class="comment">#msyql5.6éœ€è¦å†åŠ ä¸‹é¢ä¸€ä¸ªï¼ˆ5.7ä¸éœ€è¦ï¼‰</span></span><br><span class="line">log_slave_updates</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.ä¿®æ”¹ä»åº“é…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@db01 ~]# vim /etc/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">server_id=2</span><br><span class="line">log-bin=mysql-bin</span><br><span class="line">gtid_mode=ON</span><br><span class="line">enforce_gtid_consistency</span><br><span class="line"><span class="comment">#msyql5.6éœ€è¦å†åŠ ä¸‹é¢ä¸€ä¸ªï¼ˆ5.7ä¸éœ€è¦ï¼‰</span></span><br><span class="line">log_slave_updates</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@db01 ~]# vim /etc/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">server_id=3</span><br><span class="line">log-bin=mysql-bin</span><br><span class="line">gtid_mode=ON</span><br><span class="line">enforce_gtid_consistency</span><br><span class="line"><span class="comment">#msyql5.6éœ€è¦å†åŠ ä¸‹é¢ä¸€ä¸ªï¼ˆ5.7ä¸éœ€è¦ï¼‰</span></span><br><span class="line">log_slave_updates</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@db01 ~]# vim /etc/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">server_id=4</span><br><span class="line">log-bin=mysql-bin</span><br><span class="line">gtid_mode=ON</span><br><span class="line">enforce_gtid_consistency</span><br><span class="line"><span class="comment">#msyql5.6éœ€è¦å†åŠ ä¸‹é¢ä¸€ä¸ªï¼ˆ5.7ä¸éœ€è¦ï¼‰</span></span><br><span class="line">log_slave_updates</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.åœ¨ä¸»åº“ä¸Šåˆ›å»ºä¸»ä»å¤åˆ¶ç”¨æˆ·</span></span><br><span class="line">mysql&gt; grant replication slave on *.* to rep@<span class="string">&#x27;172.16.1.5%&#x27;</span> identified by <span class="string">&#x27;123&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.æ‰€æœ‰ä»åº“ä¸Šæ‰§è¡Œchange master</span></span><br><span class="line">change master to</span><br><span class="line">master_host=<span class="string">&#x27;172.16.1.53&#x27;</span>,</span><br><span class="line">master_user=<span class="string">&#x27;rep&#x27;</span>,</span><br><span class="line">master_password=<span class="string">&#x27;123&#x27;</span>,</span><br><span class="line">master_auto_position=1;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.æ‰€æœ‰ä»åº“å¼€å¯ä¸»ä»å¤åˆ¶</span></span><br><span class="line">start slave;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹GTIDæ˜¯å¦å¼€å¯</span></span><br><span class="line">db01 [(none)]&gt;show variables like <span class="string">&#x27;%gtid%&#x27;</span>;</span><br><span class="line">+---------------------------------+-----------+</span><br><span class="line">| Variable_name                   | Value     |</span><br><span class="line">+---------------------------------+-----------+</span><br><span class="line">| binlog_gtid_simple_recovery     | OFF       |</span><br><span class="line">| enforce_gtid_consistency        | ON        |</span><br><span class="line">| gtid_executed                   |           |</span><br><span class="line">| gtid_mode                       | ON        |</span><br><span class="line">| gtid_next                       | AUTOMATIC |</span><br><span class="line">| gtid_owned                      |           |</span><br><span class="line">| gtid_purged                     |           |</span><br><span class="line">| simplified_binlog_gtid_recovery | OFF       |</span><br><span class="line">+---------------------------------+-----------+</span><br><span class="line"></span><br><span class="line">`æ³¨æ„`</span><br><span class="line"><span class="comment">## MySQL5.6å¼€å¯GTID</span></span><br><span class="line">gtid_mode=ON // å¼€å¯GTIDæ¨¡å—</span><br><span class="line">enforce_gtid_consistency // ä¿è¯GITDæ•°æ®å¼ºä¸€è‡´æ€§</span><br><span class="line">log-slave-updates // ä»åº“æ—¥å¿—æ›´æ–°ï¼ˆ1.åŸºäºGTIDçš„ä¸»ä»å¤åˆ¶ 2.åŒä¸»+keepalived 3.çº§è”å¤åˆ¶ï¼‰</span><br><span class="line">log-bin=mysql-bin // å¼€å¯binlog</span><br><span class="line"></span><br><span class="line"><span class="comment">## MySQL5.7å¼€å¯GTID</span></span><br><span class="line">gtid_mode=ON</span><br><span class="line">enforce_gtid_consistency</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLçš„å¤‡ä»½åŠæ¢å¤</title>
      <link href="/posts/7572cb39.html"/>
      <url>/posts/7572cb39.html</url>
      
        <content type="html"><![CDATA[<h2 id="æ•°æ®åº“æœåŠ¡æ—¥å¿—æ¦‚è¿°">æ•°æ®åº“æœåŠ¡æ—¥å¿—æ¦‚è¿°</h2><p>ä»»ä½•ä¸€ç§æ•°æ®åº“ä¸­ï¼Œéƒ½ä¼šæœ‰å„ç§å„æ ·çš„æ—¥å¿—ï¼Œè®°å½•è¿™æ•°æ®åº“å·¥ä½œçš„æ–¹æ–¹é¢é¢ï¼Œä»¥å¸®åŠ©æ•°æ®åº“ç®¡ç†å‘˜è¿½è¸ªæ•°æ®åº“æ›¾ç»å‘ç”Ÿè¿‡çš„å„ç§äº‹ä»¶ï¼›</p><p>ä¸»è¦æ˜¯é’ˆå¯¹æ•°æ®åº“serverå±‚äº§ç”Ÿçš„æ•°æ®ä¿¡æ¯ï¼Œä¸»è¦ç”¨äºè®°å½•å’Œæ•°æ®åº“æœåŠ¡è¿è¡Œæœ¬èº«æœ‰å…³çš„æ—¥å¿—ã€ä»¥åŠSQLè¯­å¥æ“ä½œæ‰§è¡Œç›¸å…³çš„æ—¥å¿—ï¼›</p><h2 id="æ•°æ®åº“æ—¥å¿—å¸¸ç”¨åˆ†ç±»">æ•°æ®åº“æ—¥å¿—å¸¸ç”¨åˆ†ç±»</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŸ¥çœ‹æ—¥å¿—ä¿¡æ¯</span></span><br><span class="line">mysql &gt; show variables like <span class="string">&#x27;%log%&#x27;</span>;</span><br></pre></td></tr></table></figure><p><strong>å¸¸ç”¨æ—¥å¿—ä¿¡æ¯</strong></p><table><thead><tr><th>æ—¥å¿—åç§°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>general_log</td><td>è¡¨ç¤ºæŸ¥è¯¢æ—¥å¿—ï¼ˆé€šç”¨æ—¥å¿—ï¼‰ï¼Œé»˜è®¤æ—¥å¿—çŠ¶æ€å¤„äºå…³é—­ï¼Œå¯ä»¥è¿›è¡Œåœ¨çº¿è°ƒæ•´é…ç½®<br/>ä½œç”¨ï¼šè®°å½•äº†å®¢æˆ·ç«¯ä»ä¼šè¯è¿æ¥å¼€å§‹ï¼Œæ‰§è¡Œè¿‡çš„æ‰€æœ‰SQLè¯­å¥ä¿¡æ¯ï¼›<br />å¸¸ç”¨äº   åŠŸèƒ½æµ‹è¯•ã€è¯­å¥å®¡è®¡</td></tr><tr><td>log_error</td><td>è¡¨ç¤ºé”™è¯¯æ—¥å¿—ï¼ˆè¿è¡Œæ—¥å¿—ï¼‰ï¼Œé»˜è®¤æ—¥å¿—çŠ¶æ€å¤„äºæ¿€æ´»<br/>ä½œç”¨ï¼šè®°å½•äº†æ•°æ®åº“æœåŠ¡å¯åŠ¨å’Œåœæ­¢æ—¶ï¼Œä»¥åŠæœåŠ¡å™¨åœ¨è¿è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿä»»ä½•ä¸¥é‡é”™è¯¯æ—¶çš„ç›¸å…³ä¿¡æ¯ï¼›</td></tr><tr><td>log_bin</td><td>è¡¨ç¤ºäºŒè¿›åˆ¶æ—¥å¿—ï¼ˆbinlogæ—¥å¿—ï¼‰ï¼Œé»˜è®¤æ—¥å¿—çŠ¶æ€å¤„äºæ¿€æ´»ï¼ˆ8.0ä¹‹åï¼‰<br/>ä½œç”¨ï¼šè®°å½•äº†æ‰€æœ‰çš„DDLè¯­å¥å’ŒDMLè¯­å¥ï¼Œä½†æ˜¯ä¸åŒ…æ‹¬æ•°æ®åº“æŸ¥è¯¢è¯­å¥ï¼›è¯­å¥ä»¥äº‹ä»¶çš„å½¢å¼ä¿å­˜ï¼Œæè¿°äº†æ•°æ®çš„æ›´æ”¹è¿‡ç¨‹ï¼Œæ­¤æ—¥å¿—å¯¹äºç¾éš¾æ—¶çš„æ•°æ®æ¢å¤èµ·ç€æå…¶é‡è¦çš„ä½œç”¨ã€‚</td></tr><tr><td>slow_query_log</td><td>è¡¨ç¤ºæ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œè®°å½•äº†æ‰€æœ‰æ‰§è¡Œæ—¶é—´è¶…è¿‡å‚æ•°long_query_timeè®¾ç½®å€¼å¹¶ä¸”æ‰«æè®°å½•æ•°å°äºmin_examined_row_limitçš„æ‰€æœ‰SQLè¯­å¥çš„æ—¥å¿—ã€‚</td></tr></tbody></table><h3 id="é€šç”¨æ—¥å¿—general-log">é€šç”¨æ—¥å¿—general_log</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#é»˜è®¤æ—¥å¿—åŠŸèƒ½å¤„äºå…³é—­ï¼Œå»ºè®®åœ¨éœ€è¦åšè°ƒè¯•å·¥ä½œæ—¶ï¼ˆåŠŸèƒ½æµ‹è¯•ã€è¯­å¥å®¡è®¡ï¼‰å¯ä»¥æ‰“å¼€ï¼›</span></span><br><span class="line">general_log=OFF  </span><br><span class="line"><span class="comment">#å®šä¹‰æ—¥å¿—æ–‡ä»¶å­˜å‚¨çš„è·¯å¾„ä¿¡æ¯ï¼Œå»ºè®®æ—¥å¿—æ–‡ä»¶è·¯å¾„ä¸æ•°æ®å­˜æ”¾è·¯å¾„è¿›è¡Œåˆ†ç¦»ï¼›</span></span><br><span class="line">general_log_file=/app/mysql/data/general.log</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¼€å¯é€šç”¨æ—¥å¿—</span></span><br><span class="line">[root@db01 ~]# vim /etc/my.cnf</span><br><span class="line">general_log=OFF  </span><br><span class="line">general_log_file=/app/mysql/data/general.log</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹æ—¥å¿—é»˜è®¤çŠ¶æ€ï¼ˆæ¿€æ´»æ—¥å¿—ï¼‰ï¼š</span></span><br><span class="line">mysql &gt; <span class="built_in">set</span> global general_log=1;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šä¼ä¸šçœŸå®ç¯å¢ƒï¼Œç”±äºæ—¥å¿—è®°å½•é‡æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥ä¸å»ºè®®æ‰“å¼€æ­¤æ—¥å¿—è®°å½•åŠŸèƒ½ï¼Œå¯ä»¥åœ¨æœ‰éœ€è¦æ—¶æ‰“å¼€ï¼Œæ”¯æŒåœ¨çº¿é…ç½®è°ƒæ•´ï¼›</p></blockquote><h3 id="é”™è¯¯æ—¥å¿—log-error">é”™è¯¯æ—¥å¿—log_error</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#é»˜è®¤å¼€å¯</span></span><br><span class="line"><span class="comment">#é»˜è®¤å­˜å‚¨è·¯å¾„ datadir</span></span><br><span class="line">mysql &gt;show variables like <span class="string">&#x27;%err%&#x27;</span>;</span><br><span class="line">+---------------------+--------------+</span><br><span class="line">| Variable_name | Value |</span><br><span class="line">+---------------------+--------------+</span><br><span class="line">| log_error | ./db01.err |    /app/mysql/data</span><br><span class="line">+---------------------+--------------+</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹æ—¥å¿—å­˜å‚¨è·¯å¾„ï¼ˆæ°¸ä¹…é…ç½®ï¼‰ï¼š</span></span><br><span class="line">1.ç¼–è¾‘é…ç½®æ–‡ä»¶</span><br><span class="line">[root@xiaoq ~]# vim /etc/my.cnf</span><br><span class="line">log_error=/data/db01.err</span><br><span class="line"></span><br><span class="line">2.åˆ›å»ºé”™è¯¯æ—¥å¿—æ–‡ä»¶</span><br><span class="line"><span class="built_in">touch</span> /data/db01.err</span><br><span class="line"></span><br><span class="line">3.æˆæƒæ–‡ä»¶</span><br><span class="line"><span class="built_in">chown</span> mysql.mysql /data/db01.err</span><br><span class="line"></span><br><span class="line">4.é‡å¯æ•°æ®åº“</span><br><span class="line">systemctl restart msyqld</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¨¡æ‹Ÿæ•…éšœæ—¥å¿—åº”ç”¨</span></span><br><span class="line">[root@oldboyxiaoq ~]# ll /data/3306/data/ibdata1 </span><br><span class="line">-rw-r----- 1 mysql mysql 12582912 Nov 16 17:46 /data/3306/data/ibdata1</span><br><span class="line"></span><br><span class="line">[root@oldboyxiaoq ~]# <span class="built_in">chmod</span> 000 /data/3306/data/ibdata1</span><br><span class="line"></span><br><span class="line">[root@oldboyxiaoq ~]# /etc/init.d/mysqld restart</span><br><span class="line"></span><br><span class="line">Shutting down MySQL............................... SUCCESS! </span><br><span class="line">Starting MySQL......................................... ERROR! The server quit without updating PID file (/data/3306/data/oldboyxiaoq.com.pid).</span><br><span class="line">[root@oldboyxiaoq ~]# <span class="built_in">tail</span> -20 /data/3306/data/oldboyxiaoq.com.err</span><br><span class="line">2022-11-21T01:20:47.735040Z 1 [ERROR] [MY-012271] [InnoDB] The innodb_system data file <span class="string">&#x27;ibdata1&#x27;</span> must be writable</span><br><span class="line">2022-11-21T01:20:47.744091Z 1 [ERROR] [MY-012278] [InnoDB] The innodb_system data file <span class="string">&#x27;ibdata1&#x27;</span> must be writable</span><br><span class="line">2022-11-21T01:20:47.744808Z 1 [ERROR] [MY-010334] [Server] Failed to initialize DD Storage Engine</span><br><span class="line">2022-11-21T01:20:47.745739Z 0 [ERROR] [MY-010020] [Server] Data Dictionary initialization failed.</span><br><span class="line">2022-11-21T01:20:47.746526Z 0 [ERROR] [MY-010119] [Server] Aborting</span><br><span class="line">-- æ ¹æ®é”™è¯¯æ—¥å¿—çš„é”™è¯¯æç¤ºä¿¡æ¯ï¼Œè¿›è¡Œé”™è¯¯ä¿¡æ¯è¿›è¡Œåˆ†æï¼Œä»è€Œæ’æŸ¥æ•…éšœå¯èƒ½å‡ºç°çš„åŸå› ï¼›</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>è¯´æ˜ï¼šä¼ä¸šçœŸå®ç¯å¢ƒï¼Œæ—¥å¿—å¤„äºé»˜è®¤æ¿€æ´»è®°å½•çŠ¶æ€ï¼Œå¯ä»¥ä½¿ç”¨é”™è¯¯æ—¥å¿—ä¿¡æ¯åšæ•…éšœè¯Šæ–­ï¼Œè®°å½•é”™è¯¯ä¿¡æ¯çº§åˆ«ä¸ºnote warning errorï¼›</p></blockquote><h3 id="äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆlog-bin">äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆlog_bin)</h3><p>binlogæ—¥å¿—ï¼Œæ­¤æ—¥å¿—æ–‡ä»¶å…¶å®å°±æ˜¯ç”¨äºè®°å½•å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œæ›´æ”¹çš„è¯­å¥ä¿¡æ¯çš„ï¼›</p><p>å¹¶ä¸”è®°å½•æ›´æ”¹çš„è¯­å¥ä¿¡æ¯ä»¥äº‹ä»¶å½¢å¼è¿›è¡Œè®°å½•ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯æŸ¥è¯¢ç›¸å…³çš„è¯­å¥æ˜¯ä¸ä¼šè¢«è®°å½•çš„ï¼Œæ¯”å¦‚ï¼šselectã€showï¼›</p><p>ç„¶è€Œä½œä¸ºæ‰€æœ‰å¯¹æ•°æ®åº“çš„æ”¹æ“ä½œäº‹ä»¶ä¿¡æ¯éƒ½ä¼šè¢«è®°å½•ï¼Œæ¯”å¦‚ï¼šinsertã€updateã€createã€dropã€‚ã€‚ã€‚</p><p><strong>æŸ¥çœ‹æ•°æ®åº“binlogæ—¥å¿—é…ç½®å‚æ•°ï¼š</strong></p><p>è¿›å…¥åˆ°æ•°æ®åº“æœåŠ¡ç³»ç»Ÿç¯å¢ƒä¸­ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤è¿›è¡ŒæŸ¥çœ‹binlogæ—¥å¿—åŠŸèƒ½æ˜¯å¦å¼€å¯ï¼›</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#é»˜è®¤å…³é—­</span></span><br><span class="line"></span><br><span class="line">root@(none) &gt; show variables like <span class="string">&#x27;%log_bin%&#x27;</span>;</span><br><span class="line">+---------------------------------+---------------------------------+</span><br><span class="line">| Variable_name                   | Value                           |</span><br><span class="line">+---------------------------------+---------------------------------+</span><br><span class="line">| log_bin                         | ON                              |</span><br><span class="line">| log_bin_basename                | /app/mysql/data/mysql-bin       |</span><br><span class="line">| log_bin_index                   | /app/mysql/data/mysql-bin.index |</span><br><span class="line">| log_bin_trust_function_creators | OFF                             |</span><br><span class="line">| log_bin_use_v1_row_events       | OFF                             |</span><br><span class="line">| sql_log_bin                     | ON                              |</span><br><span class="line">+---------------------------------+---------------------------------+</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ·æ–°æ—¥å¿—  ï¼ˆä¼ä¸šä¸­ä¸ä½¿ç”¨ï¼‰</span></span><br><span class="line">mysql&gt; flush logs;</span><br><span class="line"></span><br><span class="line">åˆ·æ–°åæ—¥å¿—è®°å½•ä¼šç”Ÿæˆæ–°çš„</span><br></pre></td></tr></table></figure><p>==<strong>æŸ¥çœ‹äºŒè¿›åˆ¶æ–‡ä»¶</strong>==</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„äºŒè¿›åˆ¶æ–‡ä»¶</span></span><br><span class="line">root@(none) &gt; show master status ;</span><br><span class="line">+------------------+----------+--------------+------------------+-------------------+</span><br><span class="line">| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |</span><br><span class="line">+------------------+----------+--------------+------------------+-------------------+</span><br><span class="line">| mysql-bin.000004 |     1252 |              |                  |                   |</span><br><span class="line">+------------------+----------+--------------+------------------+-------------------+</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹æ‰€æœ‰çš„äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶</span></span><br><span class="line">root@(none) &gt; show binary logs;</span><br><span class="line">+------------------+-----------+</span><br><span class="line">| Log_name         | File_size |</span><br><span class="line">+------------------+-----------+</span><br><span class="line">| mysql-bin.000001 |       120 |</span><br><span class="line">| mysql-bin.000002 |       329 |</span><br><span class="line">| mysql-bin.000003 |       317 |</span><br><span class="line">| mysql-bin.000004 |      1252 |</span><br><span class="line">+------------------+-----------+</span><br></pre></td></tr></table></figure><h4 id="01æ—¥å¿—ä¿¡æ¯åŸºæœ¬é…ç½®">01æ—¥å¿—ä¿¡æ¯åŸºæœ¬é…ç½®</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä¿®æ”¹äºŒè¿›åˆ¶æ—¥å¿—</span></span><br><span class="line"><span class="comment">## ä¿®æ”¹é…ç½®æ–‡ä»¶ MySQL5.6</span></span><br><span class="line">[root@db01 ~]# vim /etc/my.cnf</span><br><span class="line">log-bin=mysql-bin</span><br><span class="line">binlog_format=row</span><br><span class="line"></span><br><span class="line"><span class="comment">## ä¿®æ”¹é…ç½®æ–‡ä»¶ MySQL5.7   (å¿…é¡»å¾—æœ‰server -id)</span></span><br><span class="line">[root@db01 ~]# vim /etc/my.cnf</span><br><span class="line">server_id=1</span><br><span class="line">log-bin=mysql-bin</span><br><span class="line">binlog_format=row</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#è¿›è¡Œbinlogæ—¥å¿—ç›®å½•è·¯å¾„ä¿¡æ¯ä¿®æ”¹æ—¶ï¼Œéœ€è¦åˆ›å»ºæŒ‡å®šçš„ç›®å½•å¹¶è®¾ç½®æƒé™ä¿¡æ¯ï¼Œæœ€åéœ€è¦é‡æ–°å¯åŠ¨æ•°æ®åº“æœåŠ¡ç”Ÿæ•ˆï¼›</span></span><br><span class="line">æˆ–è€…</span><br><span class="line">log_bin=binlog</span><br><span class="line"><span class="comment"># åªæ˜¯è®¾ç½®æ—¥å¿—åç§°ä¿¡æ¯ï¼Œæ—¥å¿—ä¼šè‡ªåŠ¨ä¿å­˜åˆ°æ•°æ®åº“æœåŠ¡æŒ‡å®šçš„æ•°æ®ç›®å½•ä¸­ï¼›</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®æ–‡ä»¶ä¿®æ”¹åéœ€è¦é‡å¯æ•°æ®åº“æœåŠ¡ï¼ŒåŠ è½½é…ç½®æ–‡ä»¶æ”¹åŠ¨çš„ä¿¡æ¯ï¼š</span></span><br><span class="line">[root@xiaoQ ~]# /etc/init.d/mysqld restart </span><br><span class="line">[root@xiaoQ xiaoQ]# ll -h /data/3306/data/binlog*</span><br><span class="line">-rw-rw----. 1 mysql mysql 245 6æœˆ  24 02:19 /data/3306/data/binlog.00000N</span><br><span class="line">-rw-rw----. 1 mysql mysql   16 6æœˆ  24 02:19 /data/3306/data/binlog.index</span><br><span class="line">-- æ•°æ®åº“æœåŠ¡é‡å¯åï¼Œå·²ç»å¯ä»¥åœ¨æ•°æ®åº“çš„æ•°æ®å­˜å‚¨ç›®å½•ä¸­ï¼Œçœ‹åˆ°binlogæ—¥å¿—æ–‡ä»¶çš„è¸ªå½±</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä¼ä¸šçœŸå®ç¯å¢ƒï¼Œæ—¥å¿—å¤„äºé»˜è®¤æ¿€æ´»è®°å½•çŠ¶æ€ï¼Œå¯ä»¥ä½¿ç”¨æ—¥å¿—ä¿¡æ¯è¿›è¡Œç¾éš¾æ•°æ®æ¢å¤ï¼Œä»¥åŠå¯ä»¥ç”¨äºå®ç°ä¸»ä»å¤åˆ¶ï¼›</span><br></pre></td></tr></table></figure><h4 id="02äºŒè¿›åˆ¶æ—¥å¿—å·¥ä½œæ¨¡å¼">02äºŒè¿›åˆ¶æ—¥å¿—å·¥ä½œæ¨¡å¼</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŸ¥çœ‹å½“å‰äºŒè¿›åˆ¶æ¨¡å¼</span></span><br><span class="line">mysql&gt; show variables like <span class="string">&#x27;%binlog_format%&#x27;</span>;</span><br><span class="line">+---------------+-----------+</span><br><span class="line">| Variable_name | Value     |</span><br><span class="line">+---------------+-----------+</span><br><span class="line">| binlog_format | STATEMENT |</span><br><span class="line">+---------------+-----------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾ç½®äºŒè¿›åˆ¶æ—¥å¿—æ¨¡å¼</span></span><br><span class="line">vim /etc/my.cnf</span><br><span class="line">[msyqld]</span><br><span class="line">binlog_format=row</span><br><span class="line"></span><br><span class="line"><span class="comment">#é‡å¯</span></span><br><span class="line">systemctl restart mysqld</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>è¯­å¥æ¨¡å¼ï¼ˆMySQL5.6ï¼‰</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">ä¼˜ç‚¹ï¼šç®€å•æ˜“è¯»ï¼Œå ç”¨ç£ç›˜ç©ºé—´å°</span><br><span class="line">ç¼ºç‚¹ï¼šä¸ä¸¥è°¨</span><br><span class="line"></span><br><span class="line"><span class="comment">#æˆªå–æ—¥å¿—</span></span><br><span class="line">[root@db01 data]# mysqlbinlog  mysql-bin.000006</span><br><span class="line">BEGIN</span><br><span class="line">/*!*/;</span><br><span class="line"><span class="comment"># at 626</span></span><br><span class="line"><span class="comment">#240820 16:04:25 server id 1  end_log_pos 731 CRC32 0x9e2a3943  Query   thread_id=1     exec_time=0     error_code=0</span></span><br><span class="line">SET TIMESTAMP=1724141065/*!*/;</span><br><span class="line">insert prod values(1001),(1200)</span><br><span class="line">/*!*/;</span><br><span class="line"><span class="comment"># at 731</span></span><br><span class="line"><span class="comment">#240820 16:04:25 server id 1  end_log_pos 762 CRC32 0xf49ea6d8  Xid = 16</span></span><br><span class="line">COMMIT/*!*/;</span><br><span class="line">DELIMITER ;</span><br><span class="line"><span class="comment"># End of log file</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>rowè¡Œçº§æ¨¡å¼ï¼ˆMySQL5.7ï¼‰</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">ä¼˜ç‚¹ï¼šä¸¥è°¨ï¼Œè®°å½•åŸæ•°æ®å’Œæ•°æ®çš„å˜åŒ–è¿‡ç¨‹</span><br><span class="line">ç¼ºç‚¹ï¼šå ç”¨ç£ç›˜ç©ºé—´å¤§ï¼Œä¸æ˜“è¯»</span><br><span class="line"></span><br><span class="line">mysql&gt; show variables like <span class="string">&#x27;%binlog_format%&#x27;</span>;</span><br><span class="line">+---------------+-------+</span><br><span class="line">| Variable_name | Value |</span><br><span class="line">+---------------+-------+</span><br><span class="line">| binlog_format | ROW   |</span><br><span class="line">+---------------+-------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#å¯¹æ¯”ï¼ŒåŠ ä¸Šé€‰é¡¹-vvv å°±èƒ½çœ‹åˆ°æ•°æ®å˜åŒ–è¿‡ç¨‹</span></span><br><span class="line"></span><br><span class="line">[root@db01 data]# mysqlbinlog --base64-output=decode-rows mysql-bin.000006</span><br><span class="line">BEGIN</span><br><span class="line">/*!*/;</span><br><span class="line"><span class="comment"># at 382</span></span><br><span class="line"><span class="comment">#240820 16:11:19 server id 1  end_log_pos 429 CRC32 0x5544eced  Table_map: `prod`.`prod` mapped to number 70</span></span><br><span class="line"><span class="comment"># at 429</span></span><br><span class="line"><span class="comment">#240820 16:11:19 server id 1  end_log_pos 474 CRC32 0x50d2d755  Write_rows: table id 70 flags: STMT_END_F</span></span><br><span class="line"><span class="comment"># at 474</span></span><br><span class="line"><span class="comment">#240820 16:11:19 server id 1  end_log_pos 505 CRC32 0x6992e02c  Xid = 13</span></span><br><span class="line">COMMIT/*!*/;</span><br><span class="line">DELIMITER ;</span><br><span class="line"><span class="comment"># End of log file</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@db01 data]# mysqlbinlog --base64-output=decode-rows -vvv mysql-bin.000006</span><br><span class="line">BEGIN</span><br><span class="line">/*!*/;</span><br><span class="line"><span class="comment"># at 382</span></span><br><span class="line"><span class="comment">#240820 16:11:19 server id 1  end_log_pos 429 CRC32 0x5544eced  Table_map: `prod`.`prod` mapped to number 70</span></span><br><span class="line"><span class="comment"># at 429</span></span><br><span class="line"><span class="comment">#240820 16:11:19 server id 1  end_log_pos 474 CRC32 0x50d2d755  Write_rows: table id 70 flags: STMT_END_F</span></span><br><span class="line"><span class="comment">### INSERT INTO `prod`.`prod`</span></span><br><span class="line"><span class="comment">### SET</span></span><br><span class="line"><span class="comment">###   @1=1214 /* INT meta=0 nullable=1 is_null=0 */</span></span><br><span class="line"><span class="comment">### INSERT INTO `prod`.`prod`</span></span><br><span class="line"><span class="comment">### SET</span></span><br><span class="line"><span class="comment">###   @1=2236 /* INT meta=0 nullable=1 is_null=0 */</span></span><br><span class="line"><span class="comment"># at 474</span></span><br><span class="line"><span class="comment">#240820 16:11:19 server id 1  end_log_pos 505 CRC32 0x6992e02c  Xid = 13</span></span><br><span class="line">COMMIT/*!*/;</span><br><span class="line">DELIMITER ;</span><br><span class="line"><span class="comment"># End of log fil</span></span><br></pre></td></tr></table></figure><ul><li>mixed æ··åˆæ¨¡å¼</li></ul><h4 id="03-äºŒè¿›åˆ¶æ—¥å¿—æ“ä½œ">03 äºŒè¿›åˆ¶æ—¥å¿—æ“ä½œ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŸ¥çœ‹æ‰€æœ‰äºŒè¿›åˆ¶æ—¥å¿—</span></span><br><span class="line">mysql&gt; show binary logs;</span><br><span class="line">+------------------+-----------+</span><br><span class="line">| Log_name         | File_size |</span><br><span class="line">+------------------+-----------+</span><br><span class="line">| mysql-bin.000001 |       143 |</span><br><span class="line">| mysql-bin.000002 |       143 |</span><br><span class="line">| mysql-bin.000003 |       167 |</span><br><span class="line">| mysql-bin.000004 |       785 |</span><br><span class="line">| mysql-bin.000005 |       167 |</span><br><span class="line">| mysql-bin.000006 |       505 |</span><br><span class="line">+------------------+-----------+</span><br><span class="line">6 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹æ—¥å¿—äº‹ä»¶ï¼ˆæ—¥å¿—åï¼Œä½ç½®ç‚¹ï¼ŒSQLè¯­å¥ç±»å‹ï¼Œserver_idï¼Œä½ç½®ç»“æŸç‚¹ï¼Œæ‰§è¡Œè¯­å¥ä¿¡æ¯ï¼‰</span></span><br><span class="line">root@(none) &gt; show binlog events <span class="keyword">in</span> <span class="string">&#x27;mysql-bin.000008&#x27;</span>;</span><br><span class="line">+------------------+-----+-------------+-----------+-------------+---------------------------------------+</span><br><span class="line">| Log_name         | Pos | Event_type  | Server_id | End_log_pos | Info                                  |</span><br><span class="line">+------------------+-----+-------------+-----------+-------------+---------------------------------------+</span><br><span class="line">| mysql-bin.000008 |   4 | Format_desc |         1 |         120 | Server ver: 5.6.50-<span class="built_in">log</span>, Binlog ver: 4 |</span><br><span class="line">| mysql-bin.000008 | 120 | Query       |         1 |         211 | create database lzz                   |</span><br><span class="line">| mysql-bin.000008 | 211 | Query       |         1 |         294 | drop database lzz                     |</span><br><span class="line">| mysql-bin.000008 | 294 | Query       |         1 |         386 | drop database luay                    |</span><br><span class="line">+------------------+-----+-------------+-----------+-------------+---------------------------------------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹å½“å‰äºŒè¿›åˆ¶æ—¥å¿—æ‰€åœ¨ä½ç½®</span></span><br><span class="line">root@(none) &gt; show master status;</span><br><span class="line">+------------------+----------+--------------+</span><br><span class="line">| File             | Position | Binlog_Do_DB |</span><br><span class="line">+------------------+----------+--------------+</span><br><span class="line">| mysql-bin.000008 |      386 |              |</span><br><span class="line">+------------------+----------+--------------+</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>==<strong>äº‹ä»¶</strong>==</p><p>1ï¼‰åœ¨binlogä¸­æœ€å°çš„è®°å½•å•å…ƒä¸ºevent</p><p>2ï¼‰ä¸€ä¸ªäº‹åŠ¡ä¼šè¢«æ‹†åˆ†æˆå¤šä¸ªäº‹ä»¶ï¼ˆeventï¼‰</p><p><strong>==äº‹ä»¶ç‰¹æ€§ binlogç‰¹æ€§==</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1ï¼‰æ¯ä¸ªeventéƒ½æœ‰ä¸€ä¸ªå¼€å§‹ä½ç½®ï¼ˆstart positionï¼‰å’Œç»“æŸä½ç½®ï¼ˆstop positionï¼‰</span><br><span class="line">2ï¼‰æ‰€è°“çš„ä½ç½®å°±æ˜¯eventå¯¹æ•´ä¸ªäºŒè¿›åˆ¶çš„æ–‡ä»¶çš„ç›¸å¯¹ä½ç½®(æ–‡ä»¶å¤§å°)</span><br><span class="line">3ï¼‰å¯¹äºä¸€ä¸ªäºŒè¿›åˆ¶æ—¥å¿—ä¸­ï¼Œå‰120ä¸ªpositionæ˜¯æ–‡ä»¶æ ¼å¼ä¿¡æ¯é¢„ç•™ç©ºé—´ï¼ˆMySQL5.6ï¼‰</span><br><span class="line">3ï¼‰å¯¹äºä¸€ä¸ªäºŒè¿›åˆ¶æ—¥å¿—ä¸­ï¼Œå‰154ä¸ªpositionæ˜¯æ–‡ä»¶æ ¼å¼ä¿¡æ¯é¢„ç•™ç©ºé—´ï¼ˆMySQL5.7ï¼‰</span><br><span class="line">4ï¼‰MySQLç¬¬ä¸€ä¸ªè®°å½•çš„äº‹ä»¶ï¼Œéƒ½æ˜¯ä»120å¼€å§‹çš„ï¼ˆMySQL5.6ï¼‰</span><br><span class="line">4ï¼‰MySQLç¬¬ä¸€ä¸ªè®°å½•çš„äº‹ä»¶ï¼Œéƒ½æ˜¯ä»154å¼€å§‹çš„ï¼ˆMySQL5.7)</span><br></pre></td></tr></table></figure><h4 id="04-binlogçš„åˆ·æ–°å’Œåˆ é™¤">04 binlogçš„åˆ·æ–°å’Œåˆ é™¤</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## binlog åˆ·æ–°</span></span><br><span class="line">1.é‡å¯MySQLæ•°æ®åº“</span><br><span class="line">2.flush logs;</span><br><span class="line">3.mysqladmin -uroot -p123 flush-log</span><br><span class="line">4.å½“binlogå¤§å°1Gä¼šè‡ªåŠ¨åˆ·æ–°   1Gè‡ªåŠ¨åˆ‡å‰²æ—¥å¿—</span><br><span class="line"></span><br><span class="line"><span class="comment">## binlogåˆ é™¤</span></span><br><span class="line">1.æ ¹æ®æ—¶é—´åˆ é™¤</span><br><span class="line"><span class="comment">#ä¸´æ—¶ç”Ÿæ•ˆ</span></span><br><span class="line">SET GLOBAL expire_logs_days = 7;</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ°¸ä¹…ç”Ÿæ•ˆ</span></span><br><span class="line">[root@db01 data]# vim /etc/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">expire_logs_days = 7</span><br><span class="line"></span><br><span class="line">2.æ ¹æ®æ—¶é—´åˆ é™¤</span><br><span class="line">PURGE BINARY LOGS BEFORE now() - INTERVAL 3 day;</span><br><span class="line"></span><br><span class="line">3.æ ¹æ®æ–‡ä»¶ååˆ é™¤ï¼ˆå¸¸ç”¨ï¼‰  ---ä»…ä¿ç•™mysql-bin.000020ä¹‹åçš„binlog</span><br><span class="line">PURGE BINARY LOGS TO <span class="string">&#x27;mysql-bin.000020&#x27;</span>;</span><br><span class="line"></span><br><span class="line">4.åˆ é™¤æ‰€æœ‰binlogï¼Œä»001ç”Ÿæˆ   âŒğŸ”ğŸˆ²å±é™©!!!!</span><br><span class="line">reset master;</span><br></pre></td></tr></table></figure><p>:dango:</p><h4 id="05-æ—¥å¿—é…ç½®ä¿¡æ¯æ‰©å±•">05 æ—¥å¿—é…ç½®ä¿¡æ¯æ‰©å±•</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å‚æ•°ä¸€ï¼šsync_binlog è¡¨ç¤ºåˆ·æ–°æ—¥å¿—åˆ°ç£ç›˜ç­–ç•¥</span></span><br><span class="line">root@(none) &gt; <span class="keyword">select</span> @@sync_binlog;</span><br><span class="line">+---------------+</span><br><span class="line">| @@sync_binlog |</span><br><span class="line">+---------------+</span><br><span class="line">|             1 |</span><br><span class="line">+---------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line">-- åœ¨è¿›è¡Œä¸»ä»åŒæ­¥è¿‡ç¨‹çš„åŒä¸€æ ‡å‡†çš„å…¶ä¸­ä¸€ä¸ª1çš„ä¿¡æ¯é…ç½®ï¼Œä¸»è¦æ˜¯æ§åˆ¶ç¼“å†²åŒºé‡Œçš„binlogæ—¥å¿—ä¿¡æ¯å¦‚ä½•åˆ·å†™åˆ°ç£ç›˜ä¸­ï¼›</span><br><span class="line">-- æ­¤å‚æ•°ä¿¡æ¯æ˜¯æœ‰ä¸‰ç§æ–¹å¼è¿›è¡Œé…ç½®çš„ï¼š</span><br><span class="line">-- å‚æ•°ä¿¡æ¯é…ç½®0ï¼šè¡¨ç¤ºç”±æ“ä½œç³»ç»Ÿç¼“å­˜è‡ªå·±å†³å®šï¼Œä»€ä¹ˆæ—¶å€™åˆ·æ–°æ—¥å¿—åˆ°ç£ç›˜ä¸­ï¼›</span><br><span class="line">-- å‚æ•°ä¿¡æ¯é…ç½®1ï¼šè¡¨ç¤ºæ¯æ¬¡äº‹åŠ¡æäº¤ï¼Œç«‹å³åˆ·æ–°æ—¥å¿—åˆ°ç£ç›˜ä¸­ï¼›(æ­¤æ–¹å¼é…ç½®æ›´å®‰å…¨)</span><br><span class="line">-- å‚æ•°ä¿¡æ¯é…ç½®Nï¼šè¡¨ç¤ºæ¯ç»„äº‹åŠ¡æäº¤ï¼ŒæŒ‰ç…§ç»„çš„äº‹åŠ¡æ¬¡æ•°å®šä¹‰ï¼Œç¡®å®šåˆ·æ–°æ—¥å¿—åˆ°ç£ç›˜ä¸­çš„é¢‘æ¬¡ï¼›ï¼ˆå¯ä»¥æœ‰æ•ˆå‡å°‘IOæ€§èƒ½æŸè€—ï¼‰</span><br><span class="line">-- å‚æ•°å®˜æ–¹èµ„æ–™é“¾æ¥ï¼šhttps://dev.mysql.com/doc/refman/8.0/en/replication-options-binary-log.html</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‚æ•°äºŒï¼šbinlog_format å®šä¹‰binlogæ—¥å¿—çš„æ ¼å¼ä¿¡æ¯</span></span><br><span class="line">root@(none) &gt; <span class="keyword">select</span> @@binlog_format;</span><br><span class="line">+-----------------+</span><br><span class="line">| @@binlog_format |</span><br><span class="line">+-----------------+</span><br><span class="line">| STATEMENT       |</span><br><span class="line">+-----------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line">-- åœ¨è¿›è¡Œä¸»ä»åŒæ­¥æ•°æ®æ¢å¤æ—¶ï¼Œæ­¤å‚æ•°é…ç½®å¯èƒ½ä¼šå½±å“æ•°æ®æ¢å¤çš„ä¸€è‡´æ€§é—®é¢˜ï¼›</span><br><span class="line">-- æ­¤å‚æ•°ä¿¡æ¯æ˜¯æœ‰ä¸‰ç§æ–¹å¼è¿›è¡Œé…ç½®çš„ï¼Œç¡®å®šäº†ä¸»ä»å¤åˆ¶çš„çº§åˆ«ï¼Œåªé’ˆå¯¹DMLè¯­å¥çš„æ—¥å¿—æ‰æœ‰æ•ˆï¼›</span><br><span class="line">-- å‚æ•°ä¿¡æ¯é…ç½® statementï¼ˆSBRï¼‰ï¼šè¯­å¥æ ¼å¼è®°å½•binlogï¼›</span><br><span class="line"></span><br><span class="line">-- DDL DCLè¯­å¥åªèƒ½ä½¿ç”¨statement è¡¨ç¤ºçš„å°±æ˜¯åŸåŸæœ¬æœ¬çš„è¯­å¥ä¿¡æ¯ï¼Œå³åšä»€ä¹ˆå°±è®°å½•ä»€ä¹ˆï¼›</span><br><span class="line">create database xiaoQ;  </span><br><span class="line"></span><br><span class="line">-- å‚æ•°ä¿¡æ¯é…ç½® rowï¼ˆRBRï¼‰ï¼šè¡Œæ ¼å¼è®°å½•binlogï¼ˆé»˜è®¤æ¨¡å¼ï¼‰</span><br><span class="line">update t1 <span class="built_in">set</span> a=10 <span class="built_in">where</span> <span class="built_in">id</span>&lt;10;    </span><br><span class="line">-- ä¼šè®°å½•è¡Œçš„å˜åŒ–ä¿¡æ¯ï¼Œå±äºåº•å±‚çš„è®°å½•ä¿¡æ¯ï¼Œå¯èƒ½ä¼šæœ‰å¤šä¸ªå˜åŒ–æ—¥å¿—ä¿¡æ¯è®°å½•</span><br><span class="line"></span><br><span class="line">-- å‚æ•°ä¿¡æ¯é…ç½® mixedï¼ˆMBRï¼‰ï¼šæ··åˆæ ¼å¼è®°å½•binlog</span><br><span class="line">-- ç”±æ•°æ®åº“æœåŠ¡è‡ªè¡Œå†³å®šï¼Œæ˜¯è®°å½•è¯­å¥ä¿¡æ¯ï¼Œè¿˜æ˜¯è®°å½•è¡Œçš„å˜åŒ–ä¿¡æ¯ï¼›</span><br></pre></td></tr></table></figure><h3 id="æ…¢æŸ¥è¯¢æ—¥å¿—">æ…¢æŸ¥è¯¢æ—¥å¿—</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½œç”¨ï¼šè®°å½•æ‰§è¡Œçš„æ¯”è¾ƒæ…¢çš„SQLè¯­å¥</span></span><br><span class="line"><span class="comment"># é»˜è®¤æ˜¯å¦å¼€å¯ï¼šå¦</span></span><br><span class="line"><span class="comment"># å­˜å‚¨ä½ç½®ï¼š/app/mysql/data/</span></span><br><span class="line">root@(none) &gt; show variables like <span class="string">&#x27;%slow%&#x27;</span>;</span><br><span class="line">+---------------------------+--------------------------------------+</span><br><span class="line">| Variable_name             | Value                                |</span><br><span class="line">+---------------------------+--------------------------------------+</span><br><span class="line">| log_slow_admin_statements | OFF                                  |</span><br><span class="line">| log_slow_slave_statements | OFF                                  |</span><br><span class="line">| slow_launch_time          | 2                                    |</span><br><span class="line">| slow_query_log            | OFF                                  |</span><br><span class="line">| slow_query_log_file       | /app/mysql-5.6.50/data/db01-slow.log |</span><br><span class="line">+---------------------------+--------------------------------------+</span><br><span class="line">5 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åå­—ï¼šhostname-slow.log</span></span><br><span class="line">db01-slow.log</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹æ–¹å¼</span></span><br><span class="line"><span class="comment">## ä¿®æ”¹é…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@db01 ~]# vim /etc/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line"><span class="comment">#æŒ‡å®šæ˜¯å¦å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—</span></span><br><span class="line">slow_query_log=1</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŒ‡å®šæ…¢æ—¥å¿—æ–‡ä»¶å­˜æ”¾ä½ç½®ï¼ˆé»˜è®¤åœ¨dataï¼‰</span></span><br><span class="line">slow_query_log_file=/app/mysql/data/db01-slow.log</span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾å®šæ…¢æŸ¥è¯¢çš„é˜€å€¼(é»˜è®¤10s)</span></span><br><span class="line">long_query_time=0.05</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¸ä½¿ç”¨ç´¢å¼•çš„æ…¢æŸ¥è¯¢è¯­å¥æ˜¯å¦è®°å½•åˆ°æ—¥å¿—</span></span><br><span class="line">log_queries_not_using_indexes</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥è¯¢æ£€æŸ¥è¿”å›å°‘äºè¯¥å‚æ•°æŒ‡å®šè¡Œçš„SQLä¸è¢«è®°å½•åˆ°æ…¢æŸ¥è¯¢æ—¥å¿— ï¼ˆå¾ˆå°‘ç”¨ï¼‰</span></span><br><span class="line">min_examined_row_limit=100</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## æ¨¡æ‹Ÿæ…¢æŸ¥è¯¢</span></span><br><span class="line">mysql &gt;create table world.city1 <span class="keyword">select</span> * from world.city;</span><br><span class="line">mysql &gt;insert into zls_city <span class="keyword">select</span> * from zls_city;</span><br><span class="line">[root@db01 ~]# mysqldumpslow</span><br><span class="line">-sï¼šæŒ‡å®šæ’åºé¡ºåº</span><br><span class="line">cï¼šCount æ‰§è¡Œæ¬¡æ•°</span><br><span class="line">tï¼šTime æ‰§è¡Œæ—¶é—´ æ€»æ—¶é—´</span><br><span class="line">rï¼šRows ç»“æœè¡Œæ•° æ€»è¡Œæ•°</span><br><span class="line">lï¼šLock é”è¡¨æ—¶é—´ æ€»é”è¡¨æ—¶é—´</span><br><span class="line">atï¼šå¹³å‡æ—¶é—´</span><br><span class="line">arï¼šå¹³å‡è¡Œæ•°</span><br><span class="line">alï¼šå¹³å‡é”è¡¨æ—¶é—´</span><br><span class="line"><span class="comment">## ç¬¬ä¸‰æ–¹ percona</span></span><br><span class="line">[root@db01 ~]# yum install -y https://downloads.percona.com/downloads/percona-toolkit/3.6.0/binary/redhat/7/x86_64/percona-toolkit-3.6.0-1.el7.x86_64.rpm</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ…¢æŸ¥è¯¢æ‰©å±•</span></span><br><span class="line">yum install -y percona-toolkit-3.0.11-1.el6.x86_64.rpm</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä½¿ç”¨perconaå…¬å¸æä¾›çš„pt-query-digestå·¥å…·åˆ†ææ…¢æŸ¥è¯¢æ—¥å¿—</span></span><br><span class="line">[root@mysql-db01 ~]# pt-query-digest /application/mysql/data/mysql-db01-slow.log</span><br><span class="line"></span><br><span class="line">æˆå¯è§†åŒ–ç•Œé¢ï¼š</span><br><span class="line">AnemometeråŸºäºpt-query-digestå°†MySQLæ…¢æŸ¥è¯¢å¯è§†åŒ–</span><br><span class="line">https://www.percona.com/downloads/percona-toolkit/LATEST/ æ…¢æ—¥å¿—åˆ†æå·¥å…·ä¸‹è½½</span><br><span class="line">https://github.com/box/Anemometer å¯è§†åŒ–ä»£ç ä¸‹è½½</span><br></pre></td></tr></table></figure><p>:dango:perconaæ…¢æŸ¥è¯¢å¯è§†åŒ–</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å®‰è£…å·¥å…·</span></span><br><span class="line">yum install -y https://downloads.percona.com/downloads/percona-toolkit/3.6.0/binary/redhat/7/x86_64/percona-toolkit-3.6.0-1.el7.x86_64.rpm</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¸‹è½½å¯è§†åŒ–å·¥å…·</span></span><br><span class="line">$ git <span class="built_in">clone</span> git://github.com/box/Anemometer.git anemometer </span><br></pre></td></tr></table></figure><h3 id="é…åˆbinlogæ¢å¤æ•°æ®">é…åˆbinlogæ¢å¤æ•°æ®</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">æ¨¡æ‹Ÿæ•°æ®ï¼š</span><br><span class="line"><span class="comment"># 1.åˆ›å»ºbinlogåº“</span></span><br><span class="line">create database binlog;</span><br><span class="line">use binlog</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.åˆ›å»ºè¡¨</span></span><br><span class="line">create table binlog_table(<span class="built_in">id</span> int);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.æ’å…¥æ•°æ®</span></span><br><span class="line">insert into binlog_table values(1);</span><br><span class="line">+------+</span><br><span class="line">| <span class="built_in">id</span> |</span><br><span class="line">+------+</span><br><span class="line">| 1 |</span><br><span class="line">+------+</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.æ’å…¥æ•°æ®</span></span><br><span class="line">insert into binlog_table values(2);</span><br><span class="line">insert into binlog_table values(3);</span><br><span class="line">commit;</span><br><span class="line"><span class="keyword">select</span> * from binlog_table;</span><br><span class="line">+------+</span><br><span class="line">| <span class="built_in">id</span> |</span><br><span class="line">+------+</span><br><span class="line">| 1  |</span><br><span class="line">| 2  |</span><br><span class="line">| 3  |</span><br><span class="line">+------+</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.åˆ é™¤æ•°æ®</span></span><br><span class="line">delete from binlog_table <span class="built_in">where</span> <span class="built_in">id</span>=1;</span><br><span class="line">commit;</span><br><span class="line">root@localhost:binlog:18: &gt;<span class="keyword">select</span> * from binlog_table;</span><br><span class="line">+------+</span><br><span class="line">| <span class="built_in">id</span>   |</span><br><span class="line">+------+</span><br><span class="line">| 2  |</span><br><span class="line">| 3    |</span><br><span class="line">+------+</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.ä¿®æ”¹æ•°æ®</span></span><br><span class="line">update binlog_table <span class="built_in">set</span> <span class="built_in">id</span>=22 <span class="built_in">where</span> <span class="built_in">id</span>=2;</span><br><span class="line">commit;</span><br><span class="line">root@localhost:binlog:19: &gt;<span class="keyword">select</span> * from binlog_table;</span><br><span class="line">+------+</span><br><span class="line">|  <span class="built_in">id</span>  |</span><br><span class="line">+------+</span><br><span class="line">| 22 |</span><br><span class="line">|  3 |</span><br><span class="line">+------+</span><br><span class="line"></span><br><span class="line"><span class="comment"># 7.åˆ è¡¨</span></span><br><span class="line">drop table binlog_table;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 8.åˆ åº“</span></span><br><span class="line">drop database binlog;</span><br><span class="line"></span><br><span class="line">æƒ³è¦æ¢å¤æ•°ç‚¹ï¼š</span><br><span class="line">beginï¼š30776</span><br><span class="line">endï¼š42009</span><br><span class="line"></span><br><span class="line">mysqlbinlog --start-position=30776 --stop-position=42009 -d binlog /app/mysql/data/mysql-bin.000008 &gt; /tmp/binlog.sql</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>ä½¿ç”¨binlogæˆªå–æ•°æ®</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#éœ€è¦å¦‚ä¸‹æ•°æ®</span></span><br><span class="line">+------+</span><br><span class="line">| <span class="built_in">id</span> |</span><br><span class="line">+------+</span><br><span class="line">| 1 |</span><br><span class="line">| 2 |</span><br><span class="line">| 3 |</span><br><span class="line">+------+</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.å‡†å¤‡æ–°ç¯å¢ƒ</span></span><br><span class="line">[root@db02 ~]# /etc/init.d/mysqld stop</span><br><span class="line">[root@db02 ~]# vim /etc/my.cnf     ä¿æŒå’Œæ—§ç¯å¢ƒä¸€è‡´</span><br><span class="line"></span><br><span class="line">[root@db02 ~]# <span class="built_in">rm</span> -fr /app/mysql-5.6.50/data</span><br><span class="line">[root@db02 ~]# /app/mysql-5.6.50/scripts/mysql_install_db --user=mysql --basedir=/app/mysql --datadir=/app/mysql/data</span><br><span class="line">[root@db02 ~]# /etc/init.d/mysqld start</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.å°†æ—§æ•°æ®åº“æ•°æ®è¿›è¡Œå…¨å¤‡</span></span><br><span class="line">[root@db01 data]# mysqldump -uroot -p123 -A &gt; /tmp/full.sql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.æ–°ç¯å¢ƒåˆ›å»ºä¸€ä¸ªå¯ä»¥è¿œç¨‹è¿æ¥çš„ç”¨æˆ·</span></span><br><span class="line">mysql&gt; grant all on *.* to root@<span class="string">&#x27;%&#x27;</span> identified by <span class="string">&#x27;123&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.å°†å…¨å¤‡æ¢å¤åˆ°æ–°ç¯å¢ƒ</span></span><br><span class="line">[root@db01 data]# mysql -uroot -p123 -h172.16.1.52 &lt; /tmp/full.sql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.æ—§ç¯å¢ƒæˆªå–binlog</span></span><br><span class="line">[root@db01 data]# mysqlbinlog --base64-output=decode-rows -vvv /app/mysql/data/mysql-bin.000030</span><br><span class="line">èµ·å§‹ä½ç½®ç‚¹ï¼š120</span><br><span class="line">[root@db01 data]# mysqlbinlog --base64-output=decode-rows -vvv /app/mysql/data/mysql-bin.000030 |grep -iC 10 delete</span><br><span class="line">ç»“æŸä½ç½®ç‚¹ï¼š832</span><br><span class="line">[root@db01 data]# mysqlbinlog --start-position=120 --stop-position=832 /app/mysql/data/mysql-bin.000030 &gt; /tmp/binlog.sql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.æ¢å¤æˆªå–çš„æ•°æ®åˆ°æ–°ç¯å¢ƒ</span></span><br><span class="line">[root@db01 data]# mysql -uroot -p123 -h172.16.1.52 &lt; /tmp/binlog.sql</span><br><span class="line">root@localhost:(none):42: &gt;<span class="keyword">select</span> * from binlog.binlog_table;</span><br><span class="line">+------+</span><br><span class="line">| <span class="built_in">id</span> |</span><br><span class="line">+------+</span><br><span class="line">| 1 |</span><br><span class="line">| 2 |</span><br><span class="line">| 3 |</span><br><span class="line">+------+</span><br><span class="line"><span class="comment"># 7.å…¨å¤‡åçš„æ–°å¢æ•°æ®æ¢å¤åˆ°æ–°ç¯å¢ƒ</span></span><br><span class="line"><span class="comment"># 8.åº”ç”¨å‰²æ¥</span></span><br><span class="line">- å¼€å‘æ”¹ä»£ç </span><br><span class="line">- è¿ç»´å¯¼å‡ºæ–°ç¯å¢ƒæ•°æ®æ¢å¤åˆ°æ—§ç¯å¢ƒ</span><br><span class="line"></span><br><span class="line"><span class="comment">#ç”Ÿäº§ä¸­ä¼šä¸€ç›´æä¾›æœåŠ¡ï¼Œå®æ—¶åœ¨å†™å…¥æ•°æ®</span></span><br><span class="line">æ¯å¤©å…¨å¤‡+å¢å¤‡</span><br><span class="line"></span><br><span class="line"><span class="comment">#äº§ä¸­æˆªå–æ•°æ®æ—¶ï¼Œå¯èƒ½ä¼šæˆªå–åˆ°å…¶ä»–åº“çš„æ•°æ®ï¼Œæ€ä¹ˆè§£å†³</span></span><br><span class="line"><span class="comment">#ç”¨-dæŒ‡å®šæ¢å¤çš„åº“</span></span><br><span class="line">mysqlbinlog --start-position=120 --stop-position=832 -d binlog app/mysql/data/mysql-bin.000030 &gt; /tmp/binlog.sql</span><br><span class="line"></span><br><span class="line"><span class="comment">### binlogåªèƒ½ç”¨æ¥å½“æˆæ˜¯å¢é‡æ•°æ®çš„å¤‡ä»½ä¸€å®šè¦é…åˆmysqldumpé€»è¾‘å¤‡ä»½çš„å…¨å¤‡ä¸€èµ·ä½¿ç”¨</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
            <tag> å¤‡ä»½ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLçš„æ—¥å¿—ç®¡ç†</title>
      <link href="/posts/7572cb39.html"/>
      <url>/posts/7572cb39.html</url>
      
        <content type="html"><![CDATA[<h2 id="æ•°æ®åº“æœåŠ¡æ—¥å¿—æ¦‚è¿°">æ•°æ®åº“æœåŠ¡æ—¥å¿—æ¦‚è¿°</h2><p>ä»»ä½•ä¸€ç§æ•°æ®åº“ä¸­ï¼Œéƒ½ä¼šæœ‰å„ç§å„æ ·çš„æ—¥å¿—ï¼Œè®°å½•è¿™æ•°æ®åº“å·¥ä½œçš„æ–¹æ–¹é¢é¢ï¼Œä»¥å¸®åŠ©æ•°æ®åº“ç®¡ç†å‘˜è¿½è¸ªæ•°æ®åº“æ›¾ç»å‘ç”Ÿè¿‡çš„å„ç§äº‹ä»¶ï¼›</p><p>ä¸»è¦æ˜¯é’ˆå¯¹æ•°æ®åº“serverå±‚äº§ç”Ÿçš„æ•°æ®ä¿¡æ¯ï¼Œä¸»è¦ç”¨äºè®°å½•å’Œæ•°æ®åº“æœåŠ¡è¿è¡Œæœ¬èº«æœ‰å…³çš„æ—¥å¿—ã€ä»¥åŠSQLè¯­å¥æ“ä½œæ‰§è¡Œç›¸å…³çš„æ—¥å¿—ï¼›</p><h2 id="æ•°æ®åº“æ—¥å¿—å¸¸ç”¨åˆ†ç±»">æ•°æ®åº“æ—¥å¿—å¸¸ç”¨åˆ†ç±»</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŸ¥çœ‹æ—¥å¿—ä¿¡æ¯</span></span><br><span class="line">mysql &gt; show variables like <span class="string">&#x27;%log%&#x27;</span>;</span><br></pre></td></tr></table></figure><p><strong>å¸¸ç”¨æ—¥å¿—ä¿¡æ¯</strong></p><table><thead><tr><th>æ—¥å¿—åç§°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>general_log</td><td>è¡¨ç¤ºæŸ¥è¯¢æ—¥å¿—ï¼ˆé€šç”¨æ—¥å¿—ï¼‰ï¼Œé»˜è®¤æ—¥å¿—çŠ¶æ€å¤„äºå…³é—­ï¼Œå¯ä»¥è¿›è¡Œåœ¨çº¿è°ƒæ•´é…ç½®<br/>ä½œç”¨ï¼šè®°å½•äº†å®¢æˆ·ç«¯ä»ä¼šè¯è¿æ¥å¼€å§‹ï¼Œæ‰§è¡Œè¿‡çš„æ‰€æœ‰SQLè¯­å¥ä¿¡æ¯ï¼›<br />å¸¸ç”¨äº   åŠŸèƒ½æµ‹è¯•ã€è¯­å¥å®¡è®¡</td></tr><tr><td>log_error</td><td>è¡¨ç¤ºé”™è¯¯æ—¥å¿—ï¼ˆè¿è¡Œæ—¥å¿—ï¼‰ï¼Œé»˜è®¤æ—¥å¿—çŠ¶æ€å¤„äºæ¿€æ´»<br/>ä½œç”¨ï¼šè®°å½•äº†æ•°æ®åº“æœåŠ¡å¯åŠ¨å’Œåœæ­¢æ—¶ï¼Œä»¥åŠæœåŠ¡å™¨åœ¨è¿è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿä»»ä½•ä¸¥é‡é”™è¯¯æ—¶çš„ç›¸å…³ä¿¡æ¯ï¼›</td></tr><tr><td>log_bin</td><td>è¡¨ç¤ºäºŒè¿›åˆ¶æ—¥å¿—ï¼ˆbinlogæ—¥å¿—ï¼‰ï¼Œé»˜è®¤æ—¥å¿—çŠ¶æ€å¤„äºæ¿€æ´»ï¼ˆ8.0ä¹‹åï¼‰<br/>ä½œç”¨ï¼šè®°å½•äº†æ‰€æœ‰çš„DDLè¯­å¥å’ŒDMLè¯­å¥ï¼Œä½†æ˜¯ä¸åŒ…æ‹¬æ•°æ®åº“æŸ¥è¯¢è¯­å¥ï¼›è¯­å¥ä»¥äº‹ä»¶çš„å½¢å¼ä¿å­˜ï¼Œæè¿°äº†æ•°æ®çš„æ›´æ”¹è¿‡ç¨‹ï¼Œæ­¤æ—¥å¿—å¯¹äºç¾éš¾æ—¶çš„æ•°æ®æ¢å¤èµ·ç€æå…¶é‡è¦çš„ä½œç”¨ã€‚</td></tr><tr><td>slow_query_log</td><td>è¡¨ç¤ºæ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œè®°å½•äº†æ‰€æœ‰æ‰§è¡Œæ—¶é—´è¶…è¿‡å‚æ•°long_query_timeè®¾ç½®å€¼å¹¶ä¸”æ‰«æè®°å½•æ•°å°äºmin_examined_row_limitçš„æ‰€æœ‰SQLè¯­å¥çš„æ—¥å¿—ã€‚</td></tr></tbody></table><h3 id="é€šç”¨æ—¥å¿—general-log">é€šç”¨æ—¥å¿—general_log</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#é»˜è®¤æ—¥å¿—åŠŸèƒ½å¤„äºå…³é—­ï¼Œå»ºè®®åœ¨éœ€è¦åšè°ƒè¯•å·¥ä½œæ—¶ï¼ˆåŠŸèƒ½æµ‹è¯•ã€è¯­å¥å®¡è®¡ï¼‰å¯ä»¥æ‰“å¼€ï¼›</span></span><br><span class="line">general_log=OFF  </span><br><span class="line"><span class="comment">#å®šä¹‰æ—¥å¿—æ–‡ä»¶å­˜å‚¨çš„è·¯å¾„ä¿¡æ¯ï¼Œå»ºè®®æ—¥å¿—æ–‡ä»¶è·¯å¾„ä¸æ•°æ®å­˜æ”¾è·¯å¾„è¿›è¡Œåˆ†ç¦»ï¼›</span></span><br><span class="line">general_log_file=/app/mysql/data/general.log</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¼€å¯é€šç”¨æ—¥å¿—</span></span><br><span class="line">[root@db01 ~]# vim /etc/my.cnf</span><br><span class="line">general_log=OFF  </span><br><span class="line">general_log_file=/app/mysql/data/general.log</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹æ—¥å¿—é»˜è®¤çŠ¶æ€ï¼ˆæ¿€æ´»æ—¥å¿—ï¼‰ï¼š</span></span><br><span class="line">mysql &gt; <span class="built_in">set</span> global general_log=1;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šä¼ä¸šçœŸå®ç¯å¢ƒï¼Œç”±äºæ—¥å¿—è®°å½•é‡æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥ä¸å»ºè®®æ‰“å¼€æ­¤æ—¥å¿—è®°å½•åŠŸèƒ½ï¼Œå¯ä»¥åœ¨æœ‰éœ€è¦æ—¶æ‰“å¼€ï¼Œæ”¯æŒåœ¨çº¿é…ç½®è°ƒæ•´ï¼›</p></blockquote><h3 id="é”™è¯¯æ—¥å¿—log-error">é”™è¯¯æ—¥å¿—log_error</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#é»˜è®¤å¼€å¯</span></span><br><span class="line"><span class="comment">#é»˜è®¤å­˜å‚¨è·¯å¾„ datadir</span></span><br><span class="line">mysql &gt;show variables like <span class="string">&#x27;%err%&#x27;</span>;</span><br><span class="line">+---------------------+--------------+</span><br><span class="line">| Variable_name | Value |</span><br><span class="line">+---------------------+--------------+</span><br><span class="line">| log_error | ./db01.err |    /app/mysql/data</span><br><span class="line">+---------------------+--------------+</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹æ—¥å¿—å­˜å‚¨è·¯å¾„ï¼ˆæ°¸ä¹…é…ç½®ï¼‰ï¼š</span></span><br><span class="line">1.ç¼–è¾‘é…ç½®æ–‡ä»¶</span><br><span class="line">[root@xiaoq ~]# vim /etc/my.cnf</span><br><span class="line">log_error=/data/db01.err</span><br><span class="line"></span><br><span class="line">2.åˆ›å»ºé”™è¯¯æ—¥å¿—æ–‡ä»¶</span><br><span class="line"><span class="built_in">touch</span> /data/db01.err</span><br><span class="line"></span><br><span class="line">3.æˆæƒæ–‡ä»¶</span><br><span class="line"><span class="built_in">chown</span> mysql.mysql /data/db01.err</span><br><span class="line"></span><br><span class="line">4.é‡å¯æ•°æ®åº“</span><br><span class="line">systemctl restart msyqld</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¨¡æ‹Ÿæ•…éšœæ—¥å¿—åº”ç”¨</span></span><br><span class="line">[root@oldboyxiaoq ~]# ll /data/3306/data/ibdata1 </span><br><span class="line">-rw-r----- 1 mysql mysql 12582912 Nov 16 17:46 /data/3306/data/ibdata1</span><br><span class="line"></span><br><span class="line">[root@oldboyxiaoq ~]# <span class="built_in">chmod</span> 000 /data/3306/data/ibdata1</span><br><span class="line"></span><br><span class="line">[root@oldboyxiaoq ~]# /etc/init.d/mysqld restart</span><br><span class="line"></span><br><span class="line">Shutting down MySQL............................... SUCCESS! </span><br><span class="line">Starting MySQL......................................... ERROR! The server quit without updating PID file (/data/3306/data/oldboyxiaoq.com.pid).</span><br><span class="line">[root@oldboyxiaoq ~]# <span class="built_in">tail</span> -20 /data/3306/data/oldboyxiaoq.com.err</span><br><span class="line">2022-11-21T01:20:47.735040Z 1 [ERROR] [MY-012271] [InnoDB] The innodb_system data file <span class="string">&#x27;ibdata1&#x27;</span> must be writable</span><br><span class="line">2022-11-21T01:20:47.744091Z 1 [ERROR] [MY-012278] [InnoDB] The innodb_system data file <span class="string">&#x27;ibdata1&#x27;</span> must be writable</span><br><span class="line">2022-11-21T01:20:47.744808Z 1 [ERROR] [MY-010334] [Server] Failed to initialize DD Storage Engine</span><br><span class="line">2022-11-21T01:20:47.745739Z 0 [ERROR] [MY-010020] [Server] Data Dictionary initialization failed.</span><br><span class="line">2022-11-21T01:20:47.746526Z 0 [ERROR] [MY-010119] [Server] Aborting</span><br><span class="line">-- æ ¹æ®é”™è¯¯æ—¥å¿—çš„é”™è¯¯æç¤ºä¿¡æ¯ï¼Œè¿›è¡Œé”™è¯¯ä¿¡æ¯è¿›è¡Œåˆ†æï¼Œä»è€Œæ’æŸ¥æ•…éšœå¯èƒ½å‡ºç°çš„åŸå› ï¼›</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>è¯´æ˜ï¼šä¼ä¸šçœŸå®ç¯å¢ƒï¼Œæ—¥å¿—å¤„äºé»˜è®¤æ¿€æ´»è®°å½•çŠ¶æ€ï¼Œå¯ä»¥ä½¿ç”¨é”™è¯¯æ—¥å¿—ä¿¡æ¯åšæ•…éšœè¯Šæ–­ï¼Œè®°å½•é”™è¯¯ä¿¡æ¯çº§åˆ«ä¸ºnote warning errorï¼›</p></blockquote><h3 id="äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆlog-bin">äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆlog_bin)</h3><p>binlogæ—¥å¿—ï¼Œæ­¤æ—¥å¿—æ–‡ä»¶å…¶å®å°±æ˜¯ç”¨äºè®°å½•å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œæ›´æ”¹çš„è¯­å¥ä¿¡æ¯çš„ï¼›</p><p>å¹¶ä¸”è®°å½•æ›´æ”¹çš„è¯­å¥ä¿¡æ¯ä»¥äº‹ä»¶å½¢å¼è¿›è¡Œè®°å½•ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯æŸ¥è¯¢ç›¸å…³çš„è¯­å¥æ˜¯ä¸ä¼šè¢«è®°å½•çš„ï¼Œæ¯”å¦‚ï¼šselectã€showï¼›</p><p>ç„¶è€Œä½œä¸ºæ‰€æœ‰å¯¹æ•°æ®åº“çš„æ”¹æ“ä½œäº‹ä»¶ä¿¡æ¯éƒ½ä¼šè¢«è®°å½•ï¼Œæ¯”å¦‚ï¼šinsertã€updateã€createã€dropã€‚ã€‚ã€‚</p><p><strong>æŸ¥çœ‹æ•°æ®åº“binlogæ—¥å¿—é…ç½®å‚æ•°ï¼š</strong></p><p>è¿›å…¥åˆ°æ•°æ®åº“æœåŠ¡ç³»ç»Ÿç¯å¢ƒä¸­ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤è¿›è¡ŒæŸ¥çœ‹binlogæ—¥å¿—åŠŸèƒ½æ˜¯å¦å¼€å¯ï¼›</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#é»˜è®¤å…³é—­</span></span><br><span class="line"></span><br><span class="line">root@(none) &gt; show variables like <span class="string">&#x27;%log_bin%&#x27;</span>;</span><br><span class="line">+---------------------------------+---------------------------------+</span><br><span class="line">| Variable_name                   | Value                           |</span><br><span class="line">+---------------------------------+---------------------------------+</span><br><span class="line">| log_bin                         | ON                              |</span><br><span class="line">| log_bin_basename                | /app/mysql/data/mysql-bin       |</span><br><span class="line">| log_bin_index                   | /app/mysql/data/mysql-bin.index |</span><br><span class="line">| log_bin_trust_function_creators | OFF                             |</span><br><span class="line">| log_bin_use_v1_row_events       | OFF                             |</span><br><span class="line">| sql_log_bin                     | ON                              |</span><br><span class="line">+---------------------------------+---------------------------------+</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ·æ–°æ—¥å¿—  ï¼ˆä¼ä¸šä¸­ä¸ä½¿ç”¨ï¼‰</span></span><br><span class="line">mysql&gt; flush logs;</span><br><span class="line"></span><br><span class="line">åˆ·æ–°åæ—¥å¿—è®°å½•ä¼šç”Ÿæˆæ–°çš„</span><br></pre></td></tr></table></figure><p>==<strong>æŸ¥çœ‹äºŒè¿›åˆ¶æ–‡ä»¶</strong>==</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„äºŒè¿›åˆ¶æ–‡ä»¶</span></span><br><span class="line">root@(none) &gt; show master status ;</span><br><span class="line">+------------------+----------+--------------+------------------+-------------------+</span><br><span class="line">| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |</span><br><span class="line">+------------------+----------+--------------+------------------+-------------------+</span><br><span class="line">| mysql-bin.000004 |     1252 |              |                  |                   |</span><br><span class="line">+------------------+----------+--------------+------------------+-------------------+</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹æ‰€æœ‰çš„äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶</span></span><br><span class="line">root@(none) &gt; show binary logs;</span><br><span class="line">+------------------+-----------+</span><br><span class="line">| Log_name         | File_size |</span><br><span class="line">+------------------+-----------+</span><br><span class="line">| mysql-bin.000001 |       120 |</span><br><span class="line">| mysql-bin.000002 |       329 |</span><br><span class="line">| mysql-bin.000003 |       317 |</span><br><span class="line">| mysql-bin.000004 |      1252 |</span><br><span class="line">+------------------+-----------+</span><br></pre></td></tr></table></figure><h4 id="01æ—¥å¿—ä¿¡æ¯åŸºæœ¬é…ç½®">01æ—¥å¿—ä¿¡æ¯åŸºæœ¬é…ç½®</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä¿®æ”¹äºŒè¿›åˆ¶æ—¥å¿—</span></span><br><span class="line"><span class="comment">## ä¿®æ”¹é…ç½®æ–‡ä»¶ MySQL5.6</span></span><br><span class="line">[root@db01 ~]# vim /etc/my.cnf</span><br><span class="line">log-bin=mysql-bin</span><br><span class="line">binlog_format=row</span><br><span class="line"></span><br><span class="line"><span class="comment">## ä¿®æ”¹é…ç½®æ–‡ä»¶ MySQL5.7   (å¿…é¡»å¾—æœ‰server -id)</span></span><br><span class="line">[root@db01 ~]# vim /etc/my.cnf</span><br><span class="line">server_id=1</span><br><span class="line">log-bin=mysql-bin</span><br><span class="line">binlog_format=row</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#è¿›è¡Œbinlogæ—¥å¿—ç›®å½•è·¯å¾„ä¿¡æ¯ä¿®æ”¹æ—¶ï¼Œéœ€è¦åˆ›å»ºæŒ‡å®šçš„ç›®å½•å¹¶è®¾ç½®æƒé™ä¿¡æ¯ï¼Œæœ€åéœ€è¦é‡æ–°å¯åŠ¨æ•°æ®åº“æœåŠ¡ç”Ÿæ•ˆï¼›</span></span><br><span class="line">æˆ–è€…</span><br><span class="line">log_bin=binlog</span><br><span class="line"><span class="comment"># åªæ˜¯è®¾ç½®æ—¥å¿—åç§°ä¿¡æ¯ï¼Œæ—¥å¿—ä¼šè‡ªåŠ¨ä¿å­˜åˆ°æ•°æ®åº“æœåŠ¡æŒ‡å®šçš„æ•°æ®ç›®å½•ä¸­ï¼›</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®æ–‡ä»¶ä¿®æ”¹åéœ€è¦é‡å¯æ•°æ®åº“æœåŠ¡ï¼ŒåŠ è½½é…ç½®æ–‡ä»¶æ”¹åŠ¨çš„ä¿¡æ¯ï¼š</span></span><br><span class="line">[root@xiaoQ ~]# /etc/init.d/mysqld restart </span><br><span class="line">[root@xiaoQ xiaoQ]# ll -h /data/3306/data/binlog*</span><br><span class="line">-rw-rw----. 1 mysql mysql 245 6æœˆ  24 02:19 /data/3306/data/binlog.00000N</span><br><span class="line">-rw-rw----. 1 mysql mysql   16 6æœˆ  24 02:19 /data/3306/data/binlog.index</span><br><span class="line">-- æ•°æ®åº“æœåŠ¡é‡å¯åï¼Œå·²ç»å¯ä»¥åœ¨æ•°æ®åº“çš„æ•°æ®å­˜å‚¨ç›®å½•ä¸­ï¼Œçœ‹åˆ°binlogæ—¥å¿—æ–‡ä»¶çš„è¸ªå½±</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä¼ä¸šçœŸå®ç¯å¢ƒï¼Œæ—¥å¿—å¤„äºé»˜è®¤æ¿€æ´»è®°å½•çŠ¶æ€ï¼Œå¯ä»¥ä½¿ç”¨æ—¥å¿—ä¿¡æ¯è¿›è¡Œç¾éš¾æ•°æ®æ¢å¤ï¼Œä»¥åŠå¯ä»¥ç”¨äºå®ç°ä¸»ä»å¤åˆ¶ï¼›</span><br></pre></td></tr></table></figure><h4 id="02äºŒè¿›åˆ¶æ—¥å¿—å·¥ä½œæ¨¡å¼">02äºŒè¿›åˆ¶æ—¥å¿—å·¥ä½œæ¨¡å¼</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŸ¥çœ‹å½“å‰äºŒè¿›åˆ¶æ¨¡å¼</span></span><br><span class="line">mysql&gt; show variables like <span class="string">&#x27;%binlog_format%&#x27;</span>;</span><br><span class="line">+---------------+-----------+</span><br><span class="line">| Variable_name | Value     |</span><br><span class="line">+---------------+-----------+</span><br><span class="line">| binlog_format | STATEMENT |</span><br><span class="line">+---------------+-----------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾ç½®äºŒè¿›åˆ¶æ—¥å¿—æ¨¡å¼</span></span><br><span class="line">vim /etc/my.cnf</span><br><span class="line">[msyqld]</span><br><span class="line">binlog_format=row</span><br><span class="line"></span><br><span class="line"><span class="comment">#é‡å¯</span></span><br><span class="line">systemctl restart mysqld</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>è¯­å¥æ¨¡å¼ï¼ˆMySQL5.6ï¼‰</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">ä¼˜ç‚¹ï¼šç®€å•æ˜“è¯»ï¼Œå ç”¨ç£ç›˜ç©ºé—´å°</span><br><span class="line">ç¼ºç‚¹ï¼šä¸ä¸¥è°¨</span><br><span class="line"></span><br><span class="line"><span class="comment">#æˆªå–æ—¥å¿—</span></span><br><span class="line">[root@db01 data]# mysqlbinlog  mysql-bin.000006</span><br><span class="line">BEGIN</span><br><span class="line">/*!*/;</span><br><span class="line"><span class="comment"># at 626</span></span><br><span class="line"><span class="comment">#240820 16:04:25 server id 1  end_log_pos 731 CRC32 0x9e2a3943  Query   thread_id=1     exec_time=0     error_code=0</span></span><br><span class="line">SET TIMESTAMP=1724141065/*!*/;</span><br><span class="line">insert prod values(1001),(1200)</span><br><span class="line">/*!*/;</span><br><span class="line"><span class="comment"># at 731</span></span><br><span class="line"><span class="comment">#240820 16:04:25 server id 1  end_log_pos 762 CRC32 0xf49ea6d8  Xid = 16</span></span><br><span class="line">COMMIT/*!*/;</span><br><span class="line">DELIMITER ;</span><br><span class="line"><span class="comment"># End of log file</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>rowè¡Œçº§æ¨¡å¼ï¼ˆMySQL5.7ï¼‰</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">ä¼˜ç‚¹ï¼šä¸¥è°¨ï¼Œè®°å½•åŸæ•°æ®å’Œæ•°æ®çš„å˜åŒ–è¿‡ç¨‹</span><br><span class="line">ç¼ºç‚¹ï¼šå ç”¨ç£ç›˜ç©ºé—´å¤§ï¼Œä¸æ˜“è¯»</span><br><span class="line"></span><br><span class="line">mysql&gt; show variables like <span class="string">&#x27;%binlog_format%&#x27;</span>;</span><br><span class="line">+---------------+-------+</span><br><span class="line">| Variable_name | Value |</span><br><span class="line">+---------------+-------+</span><br><span class="line">| binlog_format | ROW   |</span><br><span class="line">+---------------+-------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#å¯¹æ¯”ï¼ŒåŠ ä¸Šé€‰é¡¹-vvv å°±èƒ½çœ‹åˆ°æ•°æ®å˜åŒ–è¿‡ç¨‹</span></span><br><span class="line"></span><br><span class="line">[root@db01 data]# mysqlbinlog --base64-output=decode-rows mysql-bin.000006</span><br><span class="line">BEGIN</span><br><span class="line">/*!*/;</span><br><span class="line"><span class="comment"># at 382</span></span><br><span class="line"><span class="comment">#240820 16:11:19 server id 1  end_log_pos 429 CRC32 0x5544eced  Table_map: `prod`.`prod` mapped to number 70</span></span><br><span class="line"><span class="comment"># at 429</span></span><br><span class="line"><span class="comment">#240820 16:11:19 server id 1  end_log_pos 474 CRC32 0x50d2d755  Write_rows: table id 70 flags: STMT_END_F</span></span><br><span class="line"><span class="comment"># at 474</span></span><br><span class="line"><span class="comment">#240820 16:11:19 server id 1  end_log_pos 505 CRC32 0x6992e02c  Xid = 13</span></span><br><span class="line">COMMIT/*!*/;</span><br><span class="line">DELIMITER ;</span><br><span class="line"><span class="comment"># End of log file</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@db01 data]# mysqlbinlog --base64-output=decode-rows -vvv mysql-bin.000006</span><br><span class="line">BEGIN</span><br><span class="line">/*!*/;</span><br><span class="line"><span class="comment"># at 382</span></span><br><span class="line"><span class="comment">#240820 16:11:19 server id 1  end_log_pos 429 CRC32 0x5544eced  Table_map: `prod`.`prod` mapped to number 70</span></span><br><span class="line"><span class="comment"># at 429</span></span><br><span class="line"><span class="comment">#240820 16:11:19 server id 1  end_log_pos 474 CRC32 0x50d2d755  Write_rows: table id 70 flags: STMT_END_F</span></span><br><span class="line"><span class="comment">### INSERT INTO `prod`.`prod`</span></span><br><span class="line"><span class="comment">### SET</span></span><br><span class="line"><span class="comment">###   @1=1214 /* INT meta=0 nullable=1 is_null=0 */</span></span><br><span class="line"><span class="comment">### INSERT INTO `prod`.`prod`</span></span><br><span class="line"><span class="comment">### SET</span></span><br><span class="line"><span class="comment">###   @1=2236 /* INT meta=0 nullable=1 is_null=0 */</span></span><br><span class="line"><span class="comment"># at 474</span></span><br><span class="line"><span class="comment">#240820 16:11:19 server id 1  end_log_pos 505 CRC32 0x6992e02c  Xid = 13</span></span><br><span class="line">COMMIT/*!*/;</span><br><span class="line">DELIMITER ;</span><br><span class="line"><span class="comment"># End of log fil</span></span><br></pre></td></tr></table></figure><ul><li>mixed æ··åˆæ¨¡å¼</li></ul><h4 id="03-äºŒè¿›åˆ¶æ—¥å¿—æ“ä½œ">03 äºŒè¿›åˆ¶æ—¥å¿—æ“ä½œ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŸ¥çœ‹æ‰€æœ‰äºŒè¿›åˆ¶æ—¥å¿—</span></span><br><span class="line">mysql&gt; show binary logs;</span><br><span class="line">+------------------+-----------+</span><br><span class="line">| Log_name         | File_size |</span><br><span class="line">+------------------+-----------+</span><br><span class="line">| mysql-bin.000001 |       143 |</span><br><span class="line">| mysql-bin.000002 |       143 |</span><br><span class="line">| mysql-bin.000003 |       167 |</span><br><span class="line">| mysql-bin.000004 |       785 |</span><br><span class="line">| mysql-bin.000005 |       167 |</span><br><span class="line">| mysql-bin.000006 |       505 |</span><br><span class="line">+------------------+-----------+</span><br><span class="line">6 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹æ—¥å¿—äº‹ä»¶ï¼ˆæ—¥å¿—åï¼Œä½ç½®ç‚¹ï¼ŒSQLè¯­å¥ç±»å‹ï¼Œserver_idï¼Œä½ç½®ç»“æŸç‚¹ï¼Œæ‰§è¡Œè¯­å¥ä¿¡æ¯ï¼‰</span></span><br><span class="line">root@(none) &gt; show binlog events <span class="keyword">in</span> <span class="string">&#x27;mysql-bin.000008&#x27;</span>;</span><br><span class="line">+------------------+-----+-------------+-----------+-------------+---------------------------------------+</span><br><span class="line">| Log_name         | Pos | Event_type  | Server_id | End_log_pos | Info                                  |</span><br><span class="line">+------------------+-----+-------------+-----------+-------------+---------------------------------------+</span><br><span class="line">| mysql-bin.000008 |   4 | Format_desc |         1 |         120 | Server ver: 5.6.50-<span class="built_in">log</span>, Binlog ver: 4 |</span><br><span class="line">| mysql-bin.000008 | 120 | Query       |         1 |         211 | create database lzz                   |</span><br><span class="line">| mysql-bin.000008 | 211 | Query       |         1 |         294 | drop database lzz                     |</span><br><span class="line">| mysql-bin.000008 | 294 | Query       |         1 |         386 | drop database luay                    |</span><br><span class="line">+------------------+-----+-------------+-----------+-------------+---------------------------------------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹å½“å‰äºŒè¿›åˆ¶æ—¥å¿—æ‰€åœ¨ä½ç½®</span></span><br><span class="line">root@(none) &gt; show master status;</span><br><span class="line">+------------------+----------+--------------+</span><br><span class="line">| File             | Position | Binlog_Do_DB |</span><br><span class="line">+------------------+----------+--------------+</span><br><span class="line">| mysql-bin.000008 |      386 |              |</span><br><span class="line">+------------------+----------+--------------+</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>==<strong>äº‹ä»¶</strong>==</p><p>1ï¼‰åœ¨binlogä¸­æœ€å°çš„è®°å½•å•å…ƒä¸ºevent</p><p>2ï¼‰ä¸€ä¸ªäº‹åŠ¡ä¼šè¢«æ‹†åˆ†æˆå¤šä¸ªäº‹ä»¶ï¼ˆeventï¼‰</p><p><strong>==äº‹ä»¶ç‰¹æ€§ binlogç‰¹æ€§==</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1ï¼‰æ¯ä¸ªeventéƒ½æœ‰ä¸€ä¸ªå¼€å§‹ä½ç½®ï¼ˆstart positionï¼‰å’Œç»“æŸä½ç½®ï¼ˆstop positionï¼‰</span><br><span class="line">2ï¼‰æ‰€è°“çš„ä½ç½®å°±æ˜¯eventå¯¹æ•´ä¸ªäºŒè¿›åˆ¶çš„æ–‡ä»¶çš„ç›¸å¯¹ä½ç½®(æ–‡ä»¶å¤§å°)</span><br><span class="line">3ï¼‰å¯¹äºä¸€ä¸ªäºŒè¿›åˆ¶æ—¥å¿—ä¸­ï¼Œå‰120ä¸ªpositionæ˜¯æ–‡ä»¶æ ¼å¼ä¿¡æ¯é¢„ç•™ç©ºé—´ï¼ˆMySQL5.6ï¼‰</span><br><span class="line">3ï¼‰å¯¹äºä¸€ä¸ªäºŒè¿›åˆ¶æ—¥å¿—ä¸­ï¼Œå‰154ä¸ªpositionæ˜¯æ–‡ä»¶æ ¼å¼ä¿¡æ¯é¢„ç•™ç©ºé—´ï¼ˆMySQL5.7ï¼‰</span><br><span class="line">4ï¼‰MySQLç¬¬ä¸€ä¸ªè®°å½•çš„äº‹ä»¶ï¼Œéƒ½æ˜¯ä»120å¼€å§‹çš„ï¼ˆMySQL5.6ï¼‰</span><br><span class="line">4ï¼‰MySQLç¬¬ä¸€ä¸ªè®°å½•çš„äº‹ä»¶ï¼Œéƒ½æ˜¯ä»154å¼€å§‹çš„ï¼ˆMySQL5.7)</span><br></pre></td></tr></table></figure><h4 id="04-binlogçš„åˆ·æ–°å’Œåˆ é™¤">04 binlogçš„åˆ·æ–°å’Œåˆ é™¤</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## binlog åˆ·æ–°</span></span><br><span class="line">1.é‡å¯MySQLæ•°æ®åº“</span><br><span class="line">2.flush logs;</span><br><span class="line">3.mysqladmin -uroot -p123 flush-log</span><br><span class="line">4.å½“binlogå¤§å°1Gä¼šè‡ªåŠ¨åˆ·æ–°   1Gè‡ªåŠ¨åˆ‡å‰²æ—¥å¿—</span><br><span class="line"></span><br><span class="line"><span class="comment">## binlogåˆ é™¤</span></span><br><span class="line">1.æ ¹æ®æ—¶é—´åˆ é™¤</span><br><span class="line"><span class="comment">#ä¸´æ—¶ç”Ÿæ•ˆ</span></span><br><span class="line">SET GLOBAL expire_logs_days = 7;</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ°¸ä¹…ç”Ÿæ•ˆ</span></span><br><span class="line">[root@db01 data]# vim /etc/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">expire_logs_days = 7</span><br><span class="line"></span><br><span class="line">2.æ ¹æ®æ—¶é—´åˆ é™¤</span><br><span class="line">PURGE BINARY LOGS BEFORE now() - INTERVAL 3 day;</span><br><span class="line"></span><br><span class="line">3.æ ¹æ®æ–‡ä»¶ååˆ é™¤ï¼ˆå¸¸ç”¨ï¼‰  ---ä»…ä¿ç•™mysql-bin.000020ä¹‹åçš„binlog</span><br><span class="line">PURGE BINARY LOGS TO <span class="string">&#x27;mysql-bin.000020&#x27;</span>;</span><br><span class="line"></span><br><span class="line">4.åˆ é™¤æ‰€æœ‰binlogï¼Œä»001ç”Ÿæˆ   âŒğŸ”ğŸˆ²å±é™©!!!!</span><br><span class="line">reset master;</span><br></pre></td></tr></table></figure><p>:dango:</p><h4 id="05-æ—¥å¿—é…ç½®ä¿¡æ¯æ‰©å±•">05 æ—¥å¿—é…ç½®ä¿¡æ¯æ‰©å±•</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å‚æ•°ä¸€ï¼šsync_binlog è¡¨ç¤ºåˆ·æ–°æ—¥å¿—åˆ°ç£ç›˜ç­–ç•¥</span></span><br><span class="line">root@(none) &gt; <span class="keyword">select</span> @@sync_binlog;</span><br><span class="line">+---------------+</span><br><span class="line">| @@sync_binlog |</span><br><span class="line">+---------------+</span><br><span class="line">|             1 |</span><br><span class="line">+---------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line">-- åœ¨è¿›è¡Œä¸»ä»åŒæ­¥è¿‡ç¨‹çš„åŒä¸€æ ‡å‡†çš„å…¶ä¸­ä¸€ä¸ª1çš„ä¿¡æ¯é…ç½®ï¼Œä¸»è¦æ˜¯æ§åˆ¶ç¼“å†²åŒºé‡Œçš„binlogæ—¥å¿—ä¿¡æ¯å¦‚ä½•åˆ·å†™åˆ°ç£ç›˜ä¸­ï¼›</span><br><span class="line">-- æ­¤å‚æ•°ä¿¡æ¯æ˜¯æœ‰ä¸‰ç§æ–¹å¼è¿›è¡Œé…ç½®çš„ï¼š</span><br><span class="line">-- å‚æ•°ä¿¡æ¯é…ç½®0ï¼šè¡¨ç¤ºç”±æ“ä½œç³»ç»Ÿç¼“å­˜è‡ªå·±å†³å®šï¼Œä»€ä¹ˆæ—¶å€™åˆ·æ–°æ—¥å¿—åˆ°ç£ç›˜ä¸­ï¼›</span><br><span class="line">-- å‚æ•°ä¿¡æ¯é…ç½®1ï¼šè¡¨ç¤ºæ¯æ¬¡äº‹åŠ¡æäº¤ï¼Œç«‹å³åˆ·æ–°æ—¥å¿—åˆ°ç£ç›˜ä¸­ï¼›(æ­¤æ–¹å¼é…ç½®æ›´å®‰å…¨)</span><br><span class="line">-- å‚æ•°ä¿¡æ¯é…ç½®Nï¼šè¡¨ç¤ºæ¯ç»„äº‹åŠ¡æäº¤ï¼ŒæŒ‰ç…§ç»„çš„äº‹åŠ¡æ¬¡æ•°å®šä¹‰ï¼Œç¡®å®šåˆ·æ–°æ—¥å¿—åˆ°ç£ç›˜ä¸­çš„é¢‘æ¬¡ï¼›ï¼ˆå¯ä»¥æœ‰æ•ˆå‡å°‘IOæ€§èƒ½æŸè€—ï¼‰</span><br><span class="line">-- å‚æ•°å®˜æ–¹èµ„æ–™é“¾æ¥ï¼šhttps://dev.mysql.com/doc/refman/8.0/en/replication-options-binary-log.html</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‚æ•°äºŒï¼šbinlog_format å®šä¹‰binlogæ—¥å¿—çš„æ ¼å¼ä¿¡æ¯</span></span><br><span class="line">root@(none) &gt; <span class="keyword">select</span> @@binlog_format;</span><br><span class="line">+-----------------+</span><br><span class="line">| @@binlog_format |</span><br><span class="line">+-----------------+</span><br><span class="line">| STATEMENT       |</span><br><span class="line">+-----------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line">-- åœ¨è¿›è¡Œä¸»ä»åŒæ­¥æ•°æ®æ¢å¤æ—¶ï¼Œæ­¤å‚æ•°é…ç½®å¯èƒ½ä¼šå½±å“æ•°æ®æ¢å¤çš„ä¸€è‡´æ€§é—®é¢˜ï¼›</span><br><span class="line">-- æ­¤å‚æ•°ä¿¡æ¯æ˜¯æœ‰ä¸‰ç§æ–¹å¼è¿›è¡Œé…ç½®çš„ï¼Œç¡®å®šäº†ä¸»ä»å¤åˆ¶çš„çº§åˆ«ï¼Œåªé’ˆå¯¹DMLè¯­å¥çš„æ—¥å¿—æ‰æœ‰æ•ˆï¼›</span><br><span class="line">-- å‚æ•°ä¿¡æ¯é…ç½® statementï¼ˆSBRï¼‰ï¼šè¯­å¥æ ¼å¼è®°å½•binlogï¼›</span><br><span class="line"></span><br><span class="line">-- DDL DCLè¯­å¥åªèƒ½ä½¿ç”¨statement è¡¨ç¤ºçš„å°±æ˜¯åŸåŸæœ¬æœ¬çš„è¯­å¥ä¿¡æ¯ï¼Œå³åšä»€ä¹ˆå°±è®°å½•ä»€ä¹ˆï¼›</span><br><span class="line">create database xiaoQ;  </span><br><span class="line"></span><br><span class="line">-- å‚æ•°ä¿¡æ¯é…ç½® rowï¼ˆRBRï¼‰ï¼šè¡Œæ ¼å¼è®°å½•binlogï¼ˆé»˜è®¤æ¨¡å¼ï¼‰</span><br><span class="line">update t1 <span class="built_in">set</span> a=10 <span class="built_in">where</span> <span class="built_in">id</span>&lt;10;    </span><br><span class="line">-- ä¼šè®°å½•è¡Œçš„å˜åŒ–ä¿¡æ¯ï¼Œå±äºåº•å±‚çš„è®°å½•ä¿¡æ¯ï¼Œå¯èƒ½ä¼šæœ‰å¤šä¸ªå˜åŒ–æ—¥å¿—ä¿¡æ¯è®°å½•</span><br><span class="line"></span><br><span class="line">-- å‚æ•°ä¿¡æ¯é…ç½® mixedï¼ˆMBRï¼‰ï¼šæ··åˆæ ¼å¼è®°å½•binlog</span><br><span class="line">-- ç”±æ•°æ®åº“æœåŠ¡è‡ªè¡Œå†³å®šï¼Œæ˜¯è®°å½•è¯­å¥ä¿¡æ¯ï¼Œè¿˜æ˜¯è®°å½•è¡Œçš„å˜åŒ–ä¿¡æ¯ï¼›</span><br></pre></td></tr></table></figure><h3 id="æ…¢æŸ¥è¯¢æ—¥å¿—">æ…¢æŸ¥è¯¢æ—¥å¿—</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½œç”¨ï¼šè®°å½•æ‰§è¡Œçš„æ¯”è¾ƒæ…¢çš„SQLè¯­å¥</span></span><br><span class="line"><span class="comment"># é»˜è®¤æ˜¯å¦å¼€å¯ï¼šå¦</span></span><br><span class="line"><span class="comment"># å­˜å‚¨ä½ç½®ï¼š/app/mysql/data/</span></span><br><span class="line">root@(none) &gt; show variables like <span class="string">&#x27;%slow%&#x27;</span>;</span><br><span class="line">+---------------------------+--------------------------------------+</span><br><span class="line">| Variable_name             | Value                                |</span><br><span class="line">+---------------------------+--------------------------------------+</span><br><span class="line">| log_slow_admin_statements | OFF                                  |</span><br><span class="line">| log_slow_slave_statements | OFF                                  |</span><br><span class="line">| slow_launch_time          | 2                                    |</span><br><span class="line">| slow_query_log            | OFF                                  |</span><br><span class="line">| slow_query_log_file       | /app/mysql-5.6.50/data/db01-slow.log |</span><br><span class="line">+---------------------------+--------------------------------------+</span><br><span class="line">5 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åå­—ï¼šhostname-slow.log</span></span><br><span class="line">db01-slow.log</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹æ–¹å¼</span></span><br><span class="line"><span class="comment">## ä¿®æ”¹é…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@db01 ~]# vim /etc/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line"><span class="comment">#æŒ‡å®šæ˜¯å¦å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—</span></span><br><span class="line">slow_query_log=1</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŒ‡å®šæ…¢æ—¥å¿—æ–‡ä»¶å­˜æ”¾ä½ç½®ï¼ˆé»˜è®¤åœ¨dataï¼‰</span></span><br><span class="line">slow_query_log_file=/app/mysql/data/db01-slow.log</span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾å®šæ…¢æŸ¥è¯¢çš„é˜€å€¼(é»˜è®¤10s)</span></span><br><span class="line">long_query_time=0.05</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¸ä½¿ç”¨ç´¢å¼•çš„æ…¢æŸ¥è¯¢è¯­å¥æ˜¯å¦è®°å½•åˆ°æ—¥å¿—</span></span><br><span class="line">log_queries_not_using_indexes</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥è¯¢æ£€æŸ¥è¿”å›å°‘äºè¯¥å‚æ•°æŒ‡å®šè¡Œçš„SQLä¸è¢«è®°å½•åˆ°æ…¢æŸ¥è¯¢æ—¥å¿— ï¼ˆå¾ˆå°‘ç”¨ï¼‰</span></span><br><span class="line">min_examined_row_limit=100</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## æ¨¡æ‹Ÿæ…¢æŸ¥è¯¢</span></span><br><span class="line">mysql &gt;create table world.city1 <span class="keyword">select</span> * from world.city;</span><br><span class="line">mysql &gt;insert into zls_city <span class="keyword">select</span> * from zls_city;</span><br><span class="line">[root@db01 ~]# mysqldumpslow</span><br><span class="line">-sï¼šæŒ‡å®šæ’åºé¡ºåº</span><br><span class="line">cï¼šCount æ‰§è¡Œæ¬¡æ•°</span><br><span class="line">tï¼šTime æ‰§è¡Œæ—¶é—´ æ€»æ—¶é—´</span><br><span class="line">rï¼šRows ç»“æœè¡Œæ•° æ€»è¡Œæ•°</span><br><span class="line">lï¼šLock é”è¡¨æ—¶é—´ æ€»é”è¡¨æ—¶é—´</span><br><span class="line">atï¼šå¹³å‡æ—¶é—´</span><br><span class="line">arï¼šå¹³å‡è¡Œæ•°</span><br><span class="line">alï¼šå¹³å‡é”è¡¨æ—¶é—´</span><br><span class="line"><span class="comment">## ç¬¬ä¸‰æ–¹ percona</span></span><br><span class="line">[root@db01 ~]# yum install -y https://downloads.percona.com/downloads/percona-toolkit/3.6.0/binary/redhat/7/x86_64/percona-toolkit-3.6.0-1.el7.x86_64.rpm</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ…¢æŸ¥è¯¢æ‰©å±•</span></span><br><span class="line">yum install -y percona-toolkit-3.0.11-1.el6.x86_64.rpm</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä½¿ç”¨perconaå…¬å¸æä¾›çš„pt-query-digestå·¥å…·åˆ†ææ…¢æŸ¥è¯¢æ—¥å¿—</span></span><br><span class="line">[root@mysql-db01 ~]# pt-query-digest /application/mysql/data/mysql-db01-slow.log</span><br><span class="line"></span><br><span class="line">æˆå¯è§†åŒ–ç•Œé¢ï¼š</span><br><span class="line">AnemometeråŸºäºpt-query-digestå°†MySQLæ…¢æŸ¥è¯¢å¯è§†åŒ–</span><br><span class="line">https://www.percona.com/downloads/percona-toolkit/LATEST/ æ…¢æ—¥å¿—åˆ†æå·¥å…·ä¸‹è½½</span><br><span class="line">https://github.com/box/Anemometer å¯è§†åŒ–ä»£ç ä¸‹è½½</span><br></pre></td></tr></table></figure><p>:dango:perconaæ…¢æŸ¥è¯¢å¯è§†åŒ–</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å®‰è£…å·¥å…·</span></span><br><span class="line">yum install -y https://downloads.percona.com/downloads/percona-toolkit/3.6.0/binary/redhat/7/x86_64/percona-toolkit-3.6.0-1.el7.x86_64.rpm</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¸‹è½½å¯è§†åŒ–å·¥å…·</span></span><br><span class="line">$ git <span class="built_in">clone</span> git://github.com/box/Anemometer.git anemometer </span><br></pre></td></tr></table></figure><h3 id="é…åˆbinlogæ¢å¤æ•°æ®">é…åˆbinlogæ¢å¤æ•°æ®</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">æ¨¡æ‹Ÿæ•°æ®ï¼š</span><br><span class="line"><span class="comment"># 1.åˆ›å»ºbinlogåº“</span></span><br><span class="line">create database binlog;</span><br><span class="line">use binlog</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.åˆ›å»ºè¡¨</span></span><br><span class="line">create table binlog_table(<span class="built_in">id</span> int);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.æ’å…¥æ•°æ®</span></span><br><span class="line">insert into binlog_table values(1);</span><br><span class="line">+------+</span><br><span class="line">| <span class="built_in">id</span> |</span><br><span class="line">+------+</span><br><span class="line">| 1 |</span><br><span class="line">+------+</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.æ’å…¥æ•°æ®</span></span><br><span class="line">insert into binlog_table values(2);</span><br><span class="line">insert into binlog_table values(3);</span><br><span class="line">commit;</span><br><span class="line"><span class="keyword">select</span> * from binlog_table;</span><br><span class="line">+------+</span><br><span class="line">| <span class="built_in">id</span> |</span><br><span class="line">+------+</span><br><span class="line">| 1  |</span><br><span class="line">| 2  |</span><br><span class="line">| 3  |</span><br><span class="line">+------+</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.åˆ é™¤æ•°æ®</span></span><br><span class="line">delete from binlog_table <span class="built_in">where</span> <span class="built_in">id</span>=1;</span><br><span class="line">commit;</span><br><span class="line">root@localhost:binlog:18: &gt;<span class="keyword">select</span> * from binlog_table;</span><br><span class="line">+------+</span><br><span class="line">| <span class="built_in">id</span>   |</span><br><span class="line">+------+</span><br><span class="line">| 2  |</span><br><span class="line">| 3    |</span><br><span class="line">+------+</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.ä¿®æ”¹æ•°æ®</span></span><br><span class="line">update binlog_table <span class="built_in">set</span> <span class="built_in">id</span>=22 <span class="built_in">where</span> <span class="built_in">id</span>=2;</span><br><span class="line">commit;</span><br><span class="line">root@localhost:binlog:19: &gt;<span class="keyword">select</span> * from binlog_table;</span><br><span class="line">+------+</span><br><span class="line">|  <span class="built_in">id</span>  |</span><br><span class="line">+------+</span><br><span class="line">| 22 |</span><br><span class="line">|  3 |</span><br><span class="line">+------+</span><br><span class="line"></span><br><span class="line"><span class="comment"># 7.åˆ è¡¨</span></span><br><span class="line">drop table binlog_table;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 8.åˆ åº“</span></span><br><span class="line">drop database binlog;</span><br><span class="line"></span><br><span class="line">æƒ³è¦æ¢å¤æ•°ç‚¹ï¼š</span><br><span class="line">beginï¼š30776</span><br><span class="line">endï¼š42009</span><br><span class="line"></span><br><span class="line">mysqlbinlog --start-position=30776 --stop-position=42009 -d binlog /app/mysql/data/mysql-bin.000008 &gt; /tmp/binlog.sql</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>ä½¿ç”¨binlogæˆªå–æ•°æ®</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#éœ€è¦å¦‚ä¸‹æ•°æ®</span></span><br><span class="line">+------+</span><br><span class="line">| <span class="built_in">id</span> |</span><br><span class="line">+------+</span><br><span class="line">| 1 |</span><br><span class="line">| 2 |</span><br><span class="line">| 3 |</span><br><span class="line">+------+</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.å‡†å¤‡æ–°ç¯å¢ƒ</span></span><br><span class="line">[root@db02 ~]# /etc/init.d/mysqld stop</span><br><span class="line">[root@db02 ~]# vim /etc/my.cnf     ä¿æŒå’Œæ—§ç¯å¢ƒä¸€è‡´</span><br><span class="line"></span><br><span class="line">[root@db02 ~]# <span class="built_in">rm</span> -fr /app/mysql-5.6.50/data</span><br><span class="line">[root@db02 ~]# /app/mysql-5.6.50/scripts/mysql_install_db --user=mysql --basedir=/app/mysql --datadir=/app/mysql/data</span><br><span class="line">[root@db02 ~]# /etc/init.d/mysqld start</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.å°†æ—§æ•°æ®åº“æ•°æ®è¿›è¡Œå…¨å¤‡</span></span><br><span class="line">[root@db01 data]# mysqldump -uroot -p123 -A &gt; /tmp/full.sql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.æ–°ç¯å¢ƒåˆ›å»ºä¸€ä¸ªå¯ä»¥è¿œç¨‹è¿æ¥çš„ç”¨æˆ·</span></span><br><span class="line">mysql&gt; grant all on *.* to root@<span class="string">&#x27;%&#x27;</span> identified by <span class="string">&#x27;123&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.å°†å…¨å¤‡æ¢å¤åˆ°æ–°ç¯å¢ƒ</span></span><br><span class="line">[root@db01 data]# mysql -uroot -p123 -h172.16.1.52 &lt; /tmp/full.sql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.æ—§ç¯å¢ƒæˆªå–binlog</span></span><br><span class="line">[root@db01 data]# mysqlbinlog --base64-output=decode-rows -vvv /app/mysql/data/mysql-bin.000030</span><br><span class="line">èµ·å§‹ä½ç½®ç‚¹ï¼š120</span><br><span class="line">[root@db01 data]# mysqlbinlog --base64-output=decode-rows -vvv /app/mysql/data/mysql-bin.000030 |grep -iC 10 delete</span><br><span class="line">ç»“æŸä½ç½®ç‚¹ï¼š832</span><br><span class="line">[root@db01 data]# mysqlbinlog --start-position=120 --stop-position=832 /app/mysql/data/mysql-bin.000030 &gt; /tmp/binlog.sql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.æ¢å¤æˆªå–çš„æ•°æ®åˆ°æ–°ç¯å¢ƒ</span></span><br><span class="line">[root@db01 data]# mysql -uroot -p123 -h172.16.1.52 &lt; /tmp/binlog.sql</span><br><span class="line">root@localhost:(none):42: &gt;<span class="keyword">select</span> * from binlog.binlog_table;</span><br><span class="line">+------+</span><br><span class="line">| <span class="built_in">id</span> |</span><br><span class="line">+------+</span><br><span class="line">| 1 |</span><br><span class="line">| 2 |</span><br><span class="line">| 3 |</span><br><span class="line">+------+</span><br><span class="line"><span class="comment"># 7.å…¨å¤‡åçš„æ–°å¢æ•°æ®æ¢å¤åˆ°æ–°ç¯å¢ƒ</span></span><br><span class="line"><span class="comment"># 8.åº”ç”¨å‰²æ¥</span></span><br><span class="line">- å¼€å‘æ”¹ä»£ç </span><br><span class="line">- è¿ç»´å¯¼å‡ºæ–°ç¯å¢ƒæ•°æ®æ¢å¤åˆ°æ—§ç¯å¢ƒ</span><br><span class="line"></span><br><span class="line"><span class="comment">#ç”Ÿäº§ä¸­ä¼šä¸€ç›´æä¾›æœåŠ¡ï¼Œå®æ—¶åœ¨å†™å…¥æ•°æ®</span></span><br><span class="line">æ¯å¤©å…¨å¤‡+å¢å¤‡</span><br><span class="line"></span><br><span class="line"><span class="comment">#äº§ä¸­æˆªå–æ•°æ®æ—¶ï¼Œå¯èƒ½ä¼šæˆªå–åˆ°å…¶ä»–åº“çš„æ•°æ®ï¼Œæ€ä¹ˆè§£å†³</span></span><br><span class="line"><span class="comment">#ç”¨-dæŒ‡å®šæ¢å¤çš„åº“</span></span><br><span class="line">mysqlbinlog --start-position=120 --stop-position=832 -d binlog app/mysql/data/mysql-bin.000030 &gt; /tmp/binlog.sql</span><br><span class="line"></span><br><span class="line"><span class="comment">### binlogåªèƒ½ç”¨æ¥å½“æˆæ˜¯å¢é‡æ•°æ®çš„å¤‡ä»½ä¸€å®šè¦é…åˆmysqldumpé€»è¾‘å¤‡ä»½çš„å…¨å¤‡ä¸€èµ·ä½¿ç”¨</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLå­˜å‚¨å¼•æ“</title>
      <link href="/posts/4fa63392.html"/>
      <url>/posts/4fa63392.html</url>
      
        <content type="html"><![CDATA[<p><strong>MySQLçš„ç›®å½•</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1.auto.cnf</span><br><span class="line">MySQLå¯åŠ¨æ—¶ï¼Œä¼šè‡ªåŠ¨ä»data_dir/auto.cnf æ–‡ä»¶ä¸­è·å–server-uuidå€¼ï¼Œå¹¶å°†è¿™ä¸ªå€¼å­˜å‚¨åœ¨å…¨å±€å˜é‡server_uuidä¸­ã€‚å¦‚æœè¿™ä¸ªå€¼æˆ–è€…è¿™ä¸ªæ–‡ä»¶ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå°†ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„uuidå€¼ï¼Œå¹¶å°†è¿™ä¸ªå€¼ä¿å­˜åœ¨auto.cnfæ–‡ä»¶ä¸­ã€‚</span><br><span class="line">ä½œç”¨æ˜¯åœ¨mysqlå¤åˆ¶æ—¶å¦‚æœå‘ç”Ÿæ•…éšœï¼Œslaveå¯ä»¥é€šè¿‡uuidè¾¨è¯†masterçš„æ—¥å¿—ã€‚</span><br><span class="line">2.binlog.index</span><br><span class="line">ç”¨äºè®°å½•MySQLäº§ç”Ÿçš„binlogæ—¥å¿—çš„å…·ä½“ä½ç½®ï¼Œbinlogæ˜¯MySQLè®°å½•æ‰€æœ‰æ“ä½œçš„é€»è¾‘æ—¥å¿—ï¼Œä¸»è¦ç”¨äºæ•…éšœæ¢å¤å’Œä¸»ä»åŒæ­¥æ—¶ä½¿ç”¨ï¼Œç”±äºMySQLæ•°æ®åº“æ˜¯ä¸€ä¸ªå¤šç±»å‹å­˜å‚¨å¼•æ“å¹¶å­˜çš„æ•°æ®åº“ï¼Œbinlogå°±èµ·ç€ä¸€ä¸ªå®ä¾‹ï¼ˆinstanceï¼‰æ€»ä½“é‡åšä¿¡æ¯çš„è§’è‰²ã€‚</span><br><span class="line">3.*.pem</span><br><span class="line">MySQL8.0ä»¥ååŠ å…¥çš„ï¼Œç”¨äºsslè®¤è¯ç™»é™†</span><br><span class="line">4.ibdata1</span><br><span class="line">innodbé»˜è®¤å…±äº«è¡¨ç©ºé—´ï¼Œåœ¨ä¸æŒ‡å®šä¸‹é»˜è®¤æ‰€æœ‰è¡¨å…±äº«ä¸€ä¸ªè¡¨ç©ºé—´ï¼Œä½†æ˜¯ä¸€èˆ¬ç”Ÿäº§ç¯å¢ƒä¸­å»ºè®®ä¿®æ”¹é»˜è®¤å€¼ï¼Œæ¯ä¸ªè¡¨ä¸€ä¸ªè¡¨ç©ºé—´</span><br><span class="line">5.ib_logfile0</span><br><span class="line">redoäº‹åŠ¡æ—¥å¿—</span><br></pre></td></tr></table></figure><h2 id="å­˜å‚¨å¼•æ“ä»‹ç»-åŠ-æ¯”è¾ƒ">å­˜å‚¨å¼•æ“ä»‹ç» åŠ æ¯”è¾ƒ</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MySQLå¼•æ“ï¼š å¯ä»¥ç†è§£ä¸ºï¼ŒMySQLçš„â€œæ–‡ä»¶ç³»ç»Ÿâ€ï¼Œåªä¸è¿‡åŠŸèƒ½æ›´åŠ å¼ºå¤§ã€‚</span><br><span class="line">MySQLå¼•æ“åŠŸèƒ½ï¼š é™¤äº†å¯ä»¥æä¾›åŸºæœ¬çš„å­˜å–åŠŸèƒ½ï¼Œè¿˜æœ‰æ›´å¤šåŠŸèƒ½äº‹åŠ¡åŠŸèƒ½ã€é”å®šã€å¤‡ä»½å’Œæ¢å¤ã€ä¼˜åŒ–ä»¥åŠç‰¹æ®ŠåŠŸèƒ½ã€‚</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">MySQL5.5ä»¥åé»˜è®¤ä½¿ç”¨InnoDBå­˜å‚¨å¼•æ“ï¼Œå…¶ä¸­InnoDBå’ŒBDBæä¾›äº‹åŠ¡å®‰å…¨è¡¨ï¼Œå…¶å®ƒå­˜å‚¨å¼•æ“éƒ½æ˜¯éäº‹åŠ¡å®‰å…¨è¡¨ã€‚</span><br><span class="line"></span><br><span class="line">è‹¥è¦ä¿®æ”¹é»˜è®¤å¼•æ“ï¼Œå¯ä»¥ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„default-storage-engineã€‚</span><br><span class="line">å¯ä»¥é€šè¿‡ï¼šshow variables like <span class="string">&#x27;default_storage_engine&#x27;</span>; æŸ¥çœ‹å½“å‰æ•°æ®åº“åˆ°é»˜è®¤å¼•æ“ã€‚</span><br><span class="line">å‘½ä»¤ï¼š*show engines*å’Œ*show variables like <span class="string">&#x27;have%&#x27;</span>*å¯ä»¥åˆ—å‡ºå½“å‰æ•°æ®åº“æ‰€æ”¯æŒåˆ°å¼•æ“ã€‚å…¶ä¸­Valueæ˜¾ç¤ºä¸ºdisabledçš„è®°å½•è¡¨ç¤ºæ•°æ®åº“æ”¯æŒæ­¤å¼•æ“ï¼Œè€Œåœ¨æ•°æ®åº“å¯åŠ¨æ—¶è¢«ç¦ç”¨ã€‚</span><br><span class="line">åœ¨MySQL5.1ä»¥åï¼ŒINFORMATION_SCHEMAæ•°æ®åº“ä¸­å­˜åœ¨ä¸€ä¸ªENGINESçš„è¡¨ï¼Œå®ƒæä¾›çš„ä¿¡æ¯ä¸show engines;è¯­å¥å®Œå…¨ä¸€æ ·ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢è¯­å¥æ¥æŸ¥è¯¢å“ªäº›å­˜å‚¨å¼•æ“æ”¯æŒäº‹ç‰©å¤„ç†ï¼š<span class="keyword">select</span> engine from information_schema.engines <span class="built_in">where</span> transactions = <span class="string">&#x27;yes&#x27;</span>;</span><br></pre></td></tr></table></figure><p><strong>MySQLè‡ªå¸¦çš„å­˜å‚¨å¼•æ“</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql &gt; show engines;</span><br><span class="line">+--------------------+---------+</span><br><span class="line">| Engine             | Support | </span><br><span class="line">+--------------------+---------+</span><br><span class="line">| FEDERATED          | NO      | </span><br><span class="line">| MRG_MYISAM         | YES     | </span><br><span class="line">| MyISAM             | YES     |***** </span><br><span class="line">| BLACKHOLE          | YES     | </span><br><span class="line">| CSV                | YES     | </span><br><span class="line">| MEMORY             | YES     | </span><br><span class="line">| ARCHIVE            | YES     | </span><br><span class="line">| InnoDB             | DEFAULT |***** </span><br><span class="line">| PERFORMANCE_SCHEMA | YES     | </span><br><span class="line">+--------------------+---------+</span><br><span class="line"></span><br><span class="line">InnoDBã€MyISAM (æœ€å¸¸ç”¨çš„ä¸¤ç§)</span><br></pre></td></tr></table></figure><h3 id="InnoDB-MyISAM-å¯¹æ¯”">InnoDB &amp; MyISAM å¯¹æ¯”</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## MyIsamæ•°æ®æ–‡ä»¶ frm = format</span></span><br><span class="line">user.frm</span><br><span class="line">user.MYD</span><br><span class="line">user.MYI</span><br><span class="line"></span><br><span class="line">frmæ˜¯è¡¨ç»“æ„ï¼ŒMYDæ˜¯æ•°æ®ï¼ŒMYIæ˜¯ç´¢å¼•</span><br><span class="line"><span class="string">&#x27;.myd&#x27;</span>æ˜¯æ•°æ®è¡¨çš„æ•°æ®æ–‡ä»¶,å®ƒä¿å­˜äº†è¡¨çš„ç»“æ„å®šä¹‰ä¿¡æ¯,åŒ…æ‹¬è¡¨åã€å­—æ®µåã€æ•°æ®ç±»å‹ã€ç´¢å¼•ç­‰</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## Innodbæ•°æ®æ–‡ä»¶ frm = format</span></span><br><span class="line">slave_master_info.frm</span><br><span class="line">slave_master_info.ibd</span><br><span class="line"></span><br><span class="line">mysqlä¸­çš„<span class="string">&#x27;.frm&#x27;</span>æ˜¯æŒ‡è¡¨å®šä¹‰,æ˜¯æè¿°è¡¨ç»“æ„çš„æ–‡ä»¶</span><br><span class="line">mysqlä¸­çš„<span class="string">&#x27;.ibd&#x27;</span>æ–‡ä»¶æ˜¯innodbå­˜å‚¨å¼•æ“çš„è¡¨ç©ºé—´æ–‡ä»¶</span><br></pre></td></tr></table></figure><h4 id="InnoDBå¼•æ“">InnoDBå¼•æ“</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.æ”¯æŒACIDçš„äº‹åŠ¡ï¼Œæ”¯æŒäº‹åŠ¡çš„å››ç§éš”ç¦»çº§åˆ«;</span><br><span class="line">2.æ”¯æŒè¡Œçº§é”åŠå¤–é”®çº¦æŸï¼šå› æ­¤å¯ä»¥æ”¯æŒå†™å¹¶å‘;</span><br><span class="line">3.ä¸å­˜å‚¨æ€»è¡Œæ•°;</span><br><span class="line">4.ä¸€ä¸ªInnoDbæ“å­˜å‚¨åœ¨ä¸€ä¸ªæ–‡ä»¶ç©ºé—´ï¼ˆå…±äº«è¡¨ç©ºé—´ï¼Œè¡¨å¤§å°ä¸å—æ“ä½œç³»ç»Ÿæ§åˆ¶ï¼Œä¸€ä¸ªè¡¨å¯èƒ½åˆ†å¸ƒåœ¨å¤šä¸ªæ–‡ä»¶é‡Œï¼‰ï¼Œä¹Ÿæœ‰å¯èƒ½ä¸ºå¤šä¸ªï¼ˆè®¾ç½®ä¸ºç‹¬ç«‹è¡¨ç©ºï¼Œè¡¨å¤§å°å—æ“ä½œç³»ç»Ÿæ–‡ä»¶å¤§å°é™åˆ¶ï¼Œä¸€èˆ¬ä¸º2G)ï¼Œå—æ“ä½œç³»ç»Ÿæ–‡ä»¶å¤§å°çš„é™åˆ¶ï¼›</span><br><span class="line">5.ä¸»é”®ç´¢å¼•é‡‡ç”¨èšé›†ç´¢å¼•ï¼ˆç´¢å¼•çš„æ•°æ®åŸŸå­˜å‚¨æ•°æ®æ–‡ä»¶æœ¬èº«ï¼‰ï¼Œè¾…ç´¢çš„æ•°æ®åŸŸå­˜å‚¨ä¸»é”®çš„å€¼ï¼›å› æ­¤ä»è¾…ç´¢å¼•æŸ¥æ‰¾æ•°æ®ï¼Œéœ€è¦å…ˆé€šè¿‡è¾…ç´¢å¼•æ‰¾åˆ°ä¸»é”®å€¼ï¼Œå†è®¿é—®è¾…ç´¢å¼•ï¼›æœ€å¥½ä½¿ç”¨è‡ªå¢ä¸»é”®ï¼Œé˜²æ­¢æ’å…¥æ•°æ®æ—¶ï¼Œä¸ºç»´æŒB+æ ‘ç»“æ„ï¼Œæ–‡ä»¶çš„å¤§è°ƒæ•´ã€‚</span><br></pre></td></tr></table></figure><p><strong>==innodbçš„ä¸»ç´¢å¼•ç»“æ„==</strong></p><h4 id="MyISAMå¼•æ“">MyISAMå¼•æ“</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.ä¸æ”¯æŒäº‹åŠ¡ï¼Œä½†æ˜¯æ¯æ¬¡æŸ¥è¯¢éƒ½æ˜¯åŸå­çš„ï¼š</span><br><span class="line">2.æ”¯æŒè¡¨çº§é”ï¼Œå³æ¯æ¬¡æ“ä½œæ˜¯å¯¹æ•´ä¸ªè¡¨åŠ é”ï¼›ï¼š</span><br><span class="line">3.å­˜å‚¨è¡¨çš„æ€»è¡Œæ•°ï¼›</span><br><span class="line">4.ä¸€ä¸ªMYI1SAMè¡¨æœ‰ä¸‰ä¸ªæ–‡ä»¶ï¼šç´¢å¼•æ–‡ä»¶ã€è¡¨ç»“æ„æ–‡ä»¶ã€æ•°æ®æ–‡ä»¶ï¼š</span><br><span class="line">5.é‡‡ç”¨è²èšé›†ç´¢å¼•ï¼Œç´¢å¼•æ–‡ä»¶çš„æ•°æ®åŸŸå­˜å‚¨æŒ‡å‘æ•°æ®æ–‡ä»¶çš„æŒ‡é’ˆã€‚è¾…ç´¢å¼•ä¸ä¸»ç´¢å¼•åŸºæœ¬ä»¥è‡´ï¼Œä½†æ˜¯è¾…ç´¢å¼•ä¸ç”¨ä¿è¯å”¯ä¸€æ€§ã€‚</span><br></pre></td></tr></table></figure><p><strong>==myisamçš„ä¸»ç´¢å¼•ç»“æ„==</strong></p><p><img src="https://cos.lukme.top/Pic/QQ_1723962882533.png" alt="QQ_1723962882533"></p><p><strong>==ä¸¤ç§ç´¢å¼•æ•°æ®æŸ¥æ‰¾è¿‡ç¨‹==</strong></p><p><img src="https://cos.lukme.top/Pic/QQ_1723963094964.png" alt="QQ_1723963094964"></p><h2 id="InnoDBå­˜å‚¨å¼•æ“è®¾ç½®">InnoDBå­˜å‚¨å¼•æ“è®¾ç½®</h2><p>åœ¨MySQL5.5ç‰ˆæœ¬ä¹‹åï¼Œé»˜è®¤çš„<strong>å­˜å‚¨å¼•æ“</strong>ï¼Œæä¾›é«˜å¯é æ€§å’Œé«˜æ€§èƒ½ã€‚</p><p><strong>innodbå¼•æ“ä¼˜ç‚¹ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">a)    äº‹åŠ¡å®‰å…¨ï¼ˆéµä»ACIDï¼‰</span><br><span class="line">b)    MVCCï¼ˆMulti-Versioning Concurrency Controlï¼Œå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼‰</span><br><span class="line">c)    InnoDBè¡Œçº§é”</span><br><span class="line">d)    æ”¯æŒå¤–é”®å¼•ç”¨å®Œæ•´æ€§çº¦æŸ</span><br><span class="line">e)    å‡ºç°æ•…éšœåå¿«é€Ÿè‡ªåŠ¨æ¢å¤ï¼ˆcrash safe recoveryï¼‰</span><br><span class="line">f)    ç”¨äºåœ¨å†…å­˜ä¸­ç¼“å­˜æ•°æ®å’Œç´¢å¼•çš„ç¼“å†²åŒºæ± ï¼ˆbuffer poolï¼ˆdata buffer page  <span class="built_in">log</span> buffer pageï¼‰ ã€undo buffer pageï¼‰</span><br><span class="line">g)    å¤§å‹æ•°æ®å·ä¸Šçš„æœ€å¤§æ€§èƒ½</span><br><span class="line">h)    å°†å¯¹è¡¨çš„æŸ¥è¯¢ä¸ä¸åŒå­˜å‚¨å¼•æ“æ··åˆ</span><br><span class="line">i)    Oracleæ ·å¼ä¸€è‡´éé”å®šè¯»å–(å…±äº«é”)</span><br><span class="line">j)    è¡¨æ•°æ®è¿›è¡Œæ•´ç†æ¥ä¼˜åŒ–åŸºäºä¸»é”®çš„æŸ¥è¯¢ï¼ˆèšé›†ç´¢å¼•ï¼‰</span><br></pre></td></tr></table></figure><table><thead><tr><th>åŠŸèƒ½</th><th>æ”¯æŒ</th><th>åŠŸ</th><th>æ”¯æŒ</th></tr></thead><tbody><tr><td><strong>å­˜å‚¨é™åˆ¶</strong></td><td>64 TB</td><td><strong>ç´¢å¼•é«˜é€Ÿç¼“å­˜</strong></td><td>æ˜¯</td></tr><tr><td><strong>MVCC</strong></td><td>æ˜¯</td><td><strong>æ•°æ®é«˜é€Ÿç¼“å­˜</strong></td><td>æ˜¯</td></tr><tr><td><strong>B</strong> <strong>æ ‘ç´¢å¼•</strong></td><td>æ˜¯</td><td><strong>è‡ªé€‚åº”æ•£åˆ—ç´¢å¼•</strong></td><td>æ˜¯</td></tr><tr><td><strong>ç¾¤é›†ç´¢å¼•</strong></td><td>æ˜¯</td><td><strong>å¤åˆ¶</strong></td><td>æ˜¯</td></tr><tr><td><strong>å‹ç¼©æ•°æ®</strong></td><td>æ˜¯</td><td><strong>æ›´æ–°æ•°æ®å­—å…¸</strong></td><td>æ˜¯</td></tr><tr><td><strong>åŠ å¯†æ•°æ®[b]</strong></td><td>æ˜¯</td><td><strong>åœ°ç†ç©ºé—´æ•°æ®ç±»å‹</strong></td><td>æ˜¯</td></tr><tr><td><strong>æŸ¥è¯¢é«˜é€Ÿç¼“å­˜</strong></td><td>æ˜¯</td><td><strong>åœ°ç†ç©ºé—´ç´¢å¼•</strong></td><td>å¦</td></tr><tr><td><strong>äº‹åŠ¡</strong></td><td>æ˜¯</td><td><strong>å…¨æ–‡æœç´¢ç´¢å¼•</strong></td><td>æ˜¯</td></tr><tr><td><strong>é”å®šç²’åº¦</strong></td><td>è¡Œ</td><td><strong>ç¾¤é›†æ•°æ®åº“</strong></td><td>å¦</td></tr><tr><td><strong>å¤–é”®</strong></td><td>æ˜¯</td><td><strong>å¤‡ä»½å’Œæ¢å¤</strong></td><td>æ˜¯</td></tr><tr><td><strong>æ–‡ä»¶æ ¼å¼ç®¡ç†</strong></td><td>æ˜¯</td><td><strong>å¿«é€Ÿç´¢å¼•åˆ›å»º</strong></td><td>æ˜¯</td></tr><tr><td><strong>å¤šä¸ªç¼“å†²åŒºæ± </strong></td><td>æ˜¯</td><td><strong>PERFORMANCE_SCHEMA</strong></td><td>æ˜¯</td></tr><tr><td><strong>æ›´æ”¹ç¼“å†²</strong></td><td>æ˜¯</td><td><strong>è‡ªåŠ¨æ•…éšœæ¢å¤</strong></td><td>æ˜¯</td></tr></tbody></table><h3 id="æŸ¥è¯¢å­˜å‚¨å¼•æ“çš„æ–¹æ³•">æŸ¥è¯¢å­˜å‚¨å¼•æ“çš„æ–¹æ³•</h3><p>1ã€ä½¿ç”¨ SELECT ç¡®è®¤ä¼šè¯å­˜å‚¨å¼•æ“ï¼šroot@world &gt; show table status like â€˜countrylanguageâ€™\G</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> @<span class="variable">@default_storage_engine</span>;</span><br><span class="line">æˆ–</span><br><span class="line"><span class="keyword">show</span> variables <span class="keyword">like</span> <span class="string">&#x27;%engine%&#x27;</span>;</span><br></pre></td></tr></table></figure><p>2ã€ä½¿ç”¨ SHOW ç¡®è®¤æ¯ä¸ªè¡¨çš„å­˜å‚¨å¼•æ“ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">table</span> city;</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">table</span> status <span class="string">&#x27;countrylanguage&#x27;</span>\G</span><br></pre></td></tr></table></figure><p>3ã€æŸ¥çœ‹æ‰€æœ‰æ”¯æŒinnodbå¼•æ“çš„è¡¨</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root<span class="variable">@world</span> <span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> engine<span class="operator">=</span><span class="string">&#x27;innodb&#x27;</span>\G;  </span><br></pre></td></tr></table></figure><p>4ã€ä»5.1ç‰ˆæœ¬ï¼Œè¿ç§»åˆ°5.5ç‰ˆæœ¬ä»¥ä¸Šç‰ˆæœ¬</p><p>å‡å¦‚5.1ç‰ˆæœ¬æ•°æ®åº“æ‰€æœ‰ç”Ÿäº§è¡¨éƒ½æ˜¯myisamçš„ã€‚</p><p>ä½¿ç”¨mysqldumpå¤‡ä»½åï¼Œä¸€è¦æ›¿æ¢å¤‡ä»½çš„æ–‡ä»¶ä¸­çš„engine(å¼•æ“)å­—æ®µï¼Œä»myisamæ›¿æ¢ä¸ºinnodbï¼ˆå¯ä»¥ä½¿ç”¨sedå‘½ä»¤ï¼‰ï¼Œå¦åˆ™è¿ç§»æ— ä»»ä½•æ„ä¹‰ã€‚</p><p>æ•°æ®åº“å‡çº§æ—¶ï¼Œè¦æ³¨æ„å…¶ä»–é…å¥—è®¾æ–½çš„å…¼å®¹æ€§ï¼Œæ³¨æ„ä»£ç èƒ½å¦å…¼å®¹æ–°ç‰¹æ€§ã€‚</p><h3 id="è®¾ç½®å­˜å‚¨å¼•æ“">è®¾ç½®å­˜å‚¨å¼•æ“</h3><p>1ã€åœ¨å¯åŠ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®æœåŠ¡å™¨å­˜å‚¨å¼•æ“ï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¿®æ”¹MySQLé…ç½®æ–‡ä»¶ï¼ˆæ°¸ä¹…ç”Ÿæ•ˆï¼‰</span></span><br><span class="line"><span class="section">[root@db01 mysql]</span><span class="comment"># vim /etc/my.cnf</span></span><br><span class="line"><span class="section">[mysqld]</span></span><br><span class="line"><span class="attr">default-storage-engine</span>=&lt;Storage Engine&gt;</span><br></pre></td></tr></table></figure><p>2ã€ä½¿ç”¨ SET å‘½ä»¤ä¸ºå½“å‰å®¢æˆ·æœºä¼šè¯è®¾ç½®ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">SET</span> @@<span class="attribute">storage_engine</span>=&lt;Storage Engine&gt;;</span><br></pre></td></tr></table></figure><p>3ã€åœ¨ CREATE TABLE è¯­å¥æŒ‡å®šï¼š</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t (i <span class="type">INT</span>) ENGINE = &lt;<span class="keyword">Storage</span> Engine&gt;;</span><br></pre></td></tr></table></figure><h3 id="ä¼ä¸šæ¡ˆä¾‹">ä¼ä¸šæ¡ˆä¾‹</h3><p>é¡¹ç›®èƒŒæ™¯ï¼š</p><p>å…¬å¸åŸæœ‰çš„æ¶æ„ï¼šä¸€ä¸ªå±•ç¤ºå‹çš„ç½‘ç«™ï¼ŒLAMTï¼ŒMySQL5.1.77ç‰ˆæœ¬ï¼ˆMYISAMï¼‰ï¼Œ50Mæ•°æ®é‡ã€‚</p><p>å°é—®é¢˜ä¸æ–­ï¼š</p><ul><li>1ã€è¡¨çº§é”ï¼šå¯¹è¡¨ä¸­ä»»æ„ä¸€è¡Œæ•°æ®ä¿®æ”¹ç±»æ“ä½œæ—¶ï¼Œæ•´ä¸ªè¡¨éƒ½ä¼šé”å®šï¼Œå¯¹å…¶ä»–è¡Œçš„æ“ä½œéƒ½ä¸èƒ½åŒæ—¶è¿›è¡Œã€‚</li><li>2ã€ä¸æ”¯æŒæ•…éšœè‡ªåŠ¨æ¢å¤ï¼ˆCSRï¼‰ï¼šå½“æ–­ç”µæ—¶æœ‰å¯èƒ½ä¼šå‡ºç°æ•°æ®æŸåæˆ–ä¸¢å¤±çš„é—®é¢˜ã€‚</li></ul><p>å¦‚ä½•è§£å†³ï¼š</p><ul><li>1ã€æå»ºè®®å°†ç°æœ‰çš„MYISAMå¼•æ“æ›¿æ¢ä¸ºInnodbï¼Œå°†ç‰ˆæœ¬æ›¿æ¢ä¸º5.6.38<ul><li>1ï¼‰å¦‚æœä½¿ç”¨MYISAMä¼šäº§ç”Ÿâ€å°é—®é¢˜â€ï¼Œæ€§èƒ½å®‰å…¨ä¸èƒ½å¾—åˆ°ä¿è¯ï¼Œä½¿ç”¨innodbå¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</li><li>2ï¼‰5.1.77ç‰ˆæœ¬å¯¹äºinnodbå¼•æ“æ”¯æŒä¸å¤Ÿå®Œå–„ï¼Œ5.6.38ç‰ˆæœ¬å¯¹innodbæ”¯æŒéå¸¸å®Œå–„äº†ã€‚</li></ul></li><li>2ã€å®æ–½è¿‡ç¨‹å’Œæ³¨æ„è¦ç´ </li></ul><p><strong>==è§£å†³æµç¨‹==</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## åœåº“å‰çš„æ“ä½œ</span></span><br><span class="line"><span class="comment"># 1.å‡†å¤‡ä¸€ä¸ªæ–°ç¯å¢ƒ</span></span><br><span class="line"><span class="comment"># 2.äºŒè¿›åˆ¶å®‰è£…ä¸€ä¸ªMySQL5.7.44</span></span><br><span class="line"><span class="comment"># 3.å½“å‰æ­£åœ¨æä¾›æœåŠ¡çš„ç”Ÿäº§åº“ï¼Œè¿›è¡Œä¸€ä¸ªå…¨å¤‡</span></span><br><span class="line">[root@db01 mysql]# mysqldump -uroot -p123 -A &gt; /tmp/full.sql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.å°†å…¨å¤‡æ¢å¤åˆ°æ–°ç¯å¢ƒ</span></span><br><span class="line">[root@db01 ~]# mysql -uroot -p123 &lt; /tmp/full.sql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.ä»æ–°ç¯å¢ƒå¤‡ä»½å‡ºç¨‹åºåº“çš„æ‰€æœ‰è¡¨æ•°æ®</span></span><br><span class="line">[root@db01 ~]# mysqldump -uroot -p123 -B zls &gt; /tmp/zerlog.sql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.ä¿®æ”¹è¡¨çš„å­˜å‚¨å¼•æ“</span></span><br><span class="line">[root@db01 ~]# sed -i <span class="string">&#x27;s#ENGINE=MyISAM#ENGINE=InnoDB#g&#x27;</span> /tmp/zrlog.sql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 7.å°†ä¿®æ”¹åçš„ç¨‹åºåº“æ•°æ®å¯¼å…¥æ–°ç¯å¢ƒ</span></span><br><span class="line">1ï¼‰å…³é—­binlogçš„è®°å½•</span><br><span class="line"><span class="built_in">set</span> sql_log_bin=0;</span><br><span class="line"></span><br><span class="line">2ï¼‰å¯¼å…¥æ•°æ®</span><br><span class="line"><span class="built_in">source</span> /tmp/zls.sql</span><br><span class="line"></span><br><span class="line">3ï¼‰å¼€å¯binlogçš„è®°å½•</span><br><span class="line"><span class="built_in">set</span> sql_log_bin=1;</span><br><span class="line"></span><br><span class="line"><span class="comment">## åœåº“æ“ä½œ</span></span><br><span class="line"><span class="comment"># 1.å…ˆæŒ‚ç»´æŠ¤é¡µ</span></span><br><span class="line"><span class="comment"># 2.æ—§ç¯å¢ƒåœæ­¢è¿æ¥æ•°æ®åº“çš„æœåŠ¡</span></span><br><span class="line">systemctl stop tomcat</span><br><span class="line">systemctl stop php-fpm</span><br><span class="line">...</span><br><span class="line"><span class="comment"># 3.å†åœæ­¢æ—§ç¯å¢ƒæ•°æ®åº“</span></span><br><span class="line">systemctl stop mysqld</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.ä»binlogä¸­æˆªå–å¢é‡æ•°æ®</span></span><br><span class="line"><span class="comment"># 5.å¯åŠ¨æ–°ç¯å¢ƒæ•°æ®åº“</span></span><br><span class="line"><span class="comment"># 6.æ¢å¤æˆªå–çš„å¢é‡æ•°æ®åˆ°æ–°ç¯å¢ƒ</span></span><br><span class="line"><span class="comment"># 7.æµ‹è¯•</span></span><br><span class="line"><span class="comment"># 8.åº”ç”¨å‰²æ¥ï¼ˆå°†ä»£ç åŸæ¥è¿æ¥æ•°æ®åº“çš„ä¿¡æ¯æ”¹ä¸ºæ–°ç¯å¢ƒï¼‰</span></span><br><span class="line"><span class="comment"># 9.å¯åŠ¨è¿æ¥æ•°æ®åº“çš„æœåŠ¡</span></span><br><span class="line"><span class="comment"># 10.å–æ¶ˆç»´æŠ¤é¡µ</span></span><br></pre></td></tr></table></figure><h2 id="InnoDBçš„å­˜å‚¨ç»“æ„">InnoDBçš„å­˜å‚¨ç»“æ„</h2><h3 id="innodbç³»ç»Ÿè¡¨ç©ºé—´ç‰¹æ€§">innodbç³»ç»Ÿè¡¨ç©ºé—´ç‰¹æ€§</h3><ol><li>é»˜è®¤æƒ…å†µä¸‹ï¼ŒInnoDB å…ƒæ•°æ®ã€æ’¤æ¶ˆæ—¥å¿—å’Œç¼“å†²åŒºå­˜å‚¨åœ¨ç³»ç»Ÿâ€œè¡¨ç©ºé—´â€ä¸­ã€‚</li><li>è¿™æ˜¯å•ä¸ªé€»è¾‘å­˜å‚¨åŒºåŸŸï¼Œå¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ã€‚</li><li>æ¯ä¸ªæ–‡ä»¶å¯ä»¥æ˜¯å¸¸è§„æ–‡ä»¶æˆ–åŸå§‹åˆ†åŒºã€‚</li><li>æœ€åçš„æ–‡ä»¶å¯ä»¥è‡ªåŠ¨æ‰©å±•ã€‚</li></ol><h3 id="è¡¨ç©ºé—´çš„å®šä¹‰">è¡¨ç©ºé—´çš„å®šä¹‰</h3><p>è¡¨ç©ºé—´ï¼šMySQLæ•°æ®åº“å­˜å‚¨çš„æ–¹å¼</p><p>è¡¨ç©ºé—´ä¸­åŒ…å«æ•°æ®æ–‡ä»¶</p><p>MySQlè¡¨ç©ºé—´å’Œæ•°æ®æ–‡ä»¶æ˜¯1:1çš„å…³ç³»</p><p>å…±äº«è¡¨ç©ºé—´é™¤å¤–ï¼Œæ˜¯å¯ä»¥1:Nå…³ç³»</p><p><img src="https://cos.lukme.top/Pic/2024-818tablespace.png" alt="QQ_1723777681080"></p><h3 id="è¡¨ç©ºé—´ç±»å‹">è¡¨ç©ºé—´ç±»å‹</h3><ol><li><p>å…±äº«è¡¨ç©ºé—´ï¼šibdata1~ibdataN,ä¸€èˆ¬æ˜¯2-3ä¸ª</p></li><li><p>ç‹¬ç«‹è¡¨ç©ºé—´ï¼šå­˜æ”¾åœ¨æŒ‡å®šåº“ç›®å½•ä¸‹ï¼Œä¾‹å¦‚data/world/ç›®å½•ä¸‹çš„city.ibd</p><p>è¡¨ç©ºé—´ä½ç½®ï¼ˆdatadirï¼‰ï¼š  data/ç›®å½•ä¸‹</p></li></ol><ul><li>å…±äº«è¡¨ç©ºé—´  (ç‰©ç†å­˜å‚¨ç»“æ„ï¼‰</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">ibdata1~N é€šå¸¸è¢«å«åšç³»ç»Ÿè¡¨ç©ºé—´ï¼Œæ˜¯æ•°æ®åˆå§‹åŒ–ç”Ÿæˆçš„</span><br><span class="line">ä½œç”¨ï¼š</span><br><span class="line">1ï¼‰å­˜å‚¨è¡¨å’Œç´¢å¼•æ•°æ®ï¼šibdata1æ–‡ä»¶åŒ…å«äº†æ‰€æœ‰InnoDBè¡¨å’Œç´¢å¼•çš„æ•°æ®ã€‚å½“åˆ›å»ºæ–°çš„InnoDBè¡¨æ—¶ï¼Œæ•°æ®å°†è¢«å­˜å‚¨åœ¨ibdata1ä¸­ã€‚</span><br><span class="line">2ï¼‰å­˜å‚¨å›æ»šæ®µæ•°æ®ï¼šInnoDBä½¿ç”¨å›æ»šæ®µæ¥æ”¯æŒäº‹åŠ¡çš„ACIDç‰¹æ€§ã€‚å›æ»šæ®µä¸­çš„æ•°æ®ä¹Ÿè¢«å­˜å‚¨åœ¨ibdata1æ–‡ä»¶ä¸­ã€‚</span><br><span class="line">3ï¼‰å­˜å‚¨ç³»ç»Ÿè¡¨ç©ºé—´ï¼šç³»ç»Ÿè¡¨ç©ºé—´å­˜å‚¨äº†InnoDBçš„å…ƒæ•°æ®ï¼Œæ¯”å¦‚è¡¨ç»“æ„ã€ç´¢å¼•ä¿¡æ¯ç­‰ã€‚ç³»ç»Ÿè¡¨ç©ºé—´ä¹Ÿè¢«å­˜å‚¨åœ¨ibdata1ä¸­ã€‚</span><br><span class="line">å­˜æ”¾ undoï¼Œä¸´æ—¶è¡¨ï¼Œå…ƒæ•°æ®</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ç³»ç»Ÿå…ƒæ•°æ®ï¼ŒåŸºè¡¨æ•°æ®ï¼Œé™¤äº†è¡¨å†…å®¹æ•°æ®ä¹‹å¤–çš„æ•°æ®ã€‚</span><br><span class="line"> </span><br><span class="line">tmp è¡¨ç©ºé—´ï¼ˆä¸€èˆ¬å¾ˆå°‘å…³æ³¨ï¼‰</span><br><span class="line">ã€€</span><br><span class="line">undoæ—¥å¿— ï¼šæ•°æ®--å›æ»šæ•°æ®ï¼ˆå›æ»šæ—¥å¿—ä½¿ç”¨ï¼‰</span><br><span class="line">ã€€</span><br><span class="line">redoæ—¥å¿— ï¼šib_logfile0~N å­˜æ”¾ç³»ç»Ÿçš„innodbè¡¨çš„ä¸€äº›é‡åšæ—¥å¿—ã€‚</span><br><span class="line"> è¯´æ˜ï¼šundoæ—¥å¿—é»˜è®¤å®åœ¨ibdataä¸­çš„ï¼Œåœ¨5.6ä»¥åæ˜¯å¯ä»¥å•ç‹¬å®šä¹‰çš„ã€‚</span><br><span class="line"></span><br><span class="line">tmp è¡¨ç©ºé—´åœ¨5.7ç‰ˆæœ¬ä¹‹åè¢«ç§»å‡ºäº†ibdata1ï¼Œå˜ä¸ºibtmp1</span><br><span class="line"></span><br><span class="line">åœ¨5.5ç‰ˆæœ¬ä¹‹å‰ï¼Œæ‰€æœ‰çš„åº”ç”¨æ•°æ®ä¹Ÿéƒ½é»˜è®¤å­˜æ”¾åˆ°äº†ibdataä¸­ã€‚</span><br></pre></td></tr></table></figure><p>ç‹¬ç«‹è¡¨ç©ºé—´(ä¸€ä¸ªå­˜å‚¨å¼•æ“çš„åŠŸèƒ½)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">åœ¨5.6ä¹‹åï¼Œé»˜è®¤çš„æƒ…å†µä¸‹ä¼šå•è¡¨å•ç‹¬å­˜å‚¨åˆ°ç‹¬ç«‹è¡¨ç©ºé—´æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">é™¤äº†ç³»ç»Ÿè¡¨ç©ºé—´ä¹‹å¤–ï¼ŒInnoDB è¿˜åœ¨æ•°æ®åº“ç›®å½•ä¸­åˆ›å»ºå¦å¤–çš„è¡¨ç©ºé—´ï¼Œç”¨äºæ¯ä¸ª InnoDB è¡¨çš„ .ibd æ–‡ä»¶ã€‚</span><br><span class="line"></span><br><span class="line">InnoDB åˆ›å»ºçš„æ¯ä¸ªæ–°è¡¨åœ¨æ•°æ®åº“ç›®å½•ä¸­è®¾ç½®ä¸€ä¸ª .ibd æ–‡ä»¶æ¥æ­é…è¡¨çš„.frm æ–‡ä»¶ã€‚</span><br><span class="line"></span><br><span class="line">å¯ä»¥ä½¿ç”¨ innodb_file_per_table é€‰é¡¹æ§åˆ¶æ­¤è®¾ç½®ï¼Œæ›´æ”¹è¯¥è®¾ç½®ä»…ä¼šæ›´æ”¹å·²åˆ›å»ºçš„æ–°è¡¨çš„é»˜è®¤å€¼ã€‚</span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/1190037-20171222205202037-1994656863.png" alt="img"></p><h3 id="è®¾ç½®å…±äº«è¡¨ç©ºé—´">è®¾ç½®å…±äº«è¡¨ç©ºé—´</h3><blockquote><p><code>æŸ¥çœ‹å½“å‰çš„å…±äº«è¡¨ç©ºé—´è®¾ç½®</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">root@(none) &gt; show variables like <span class="string">&#x27;innodb_data_file_path&#x27;</span>;</span><br><span class="line">+-----------------------+------------------------------------+</span><br><span class="line">| Variable_name         | Value                              |</span><br><span class="line">+-----------------------+------------------------------------+</span><br><span class="line">| innodb_data_file_path | ibdata1:76M;ibdata2:50M:autoextend |</span><br><span class="line">+-----------------------+------------------------------------+</span><br></pre></td></tr></table></figure></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å…±äº«è¡¨ç©ºé—´åˆ‡å‰²ï¼Œç¬¬äºŒä¸ªè‡ªæ‡‚æ‰©å±•</span></span><br><span class="line">[root@db02 world]# vim /etc/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">innodb_data_file_path=ibdata1:76M;ibdata2:100M:autoextend</span><br><span class="line"></span><br><span class="line"><span class="comment">### é‡å¯æ•°æ®åº“</span></span><br><span class="line">systemctl restart mysqld</span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾ç½®ç¬¬ä¸€ä¸ªå€¼76Mè¦æ ¹æ®å®é™…å¤§å°è®¾ç½®ï¼Œ</span></span><br><span class="line">ä¾‹å¦‚ï¼šinnodb_data_file_path=ibdata1:50M;ibdata2:50M:autoextend</span><br><span class="line">é‡å¯ä¹‹åè¿›ä¸å»mysqlï¼ŒæŸ¥çœ‹æ—¥å¿—æŠ¥é”™å¦‚ä¸‹</span><br><span class="line">`è®¾ç½®çš„50Mä¸å¤Ÿ76M`  </span><br><span class="line">ä¸€é¡µ=16k</span><br><span class="line">3200*16/1024=50M</span><br><span class="line">4864*16/1024=76M</span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/QQ_1723777681080.png" alt="QQ_1723777681080"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">`ä¸ºå•¥è¦æ˜¯76Må‘¢ï¼Ÿ` ,é‚£æˆ‘ä»¬è¿›å…¥dataç›®å½•ï¼ŒæŸ¥çœ‹å…±äº«ç©ºé—´å ç”¨å†…å­˜</span><br><span class="line">[root@db01 data]# <span class="built_in">du</span> -h ibdata1 </span><br><span class="line">76M     ibdata1</span><br><span class="line"></span><br><span class="line">æ‰€ä»¥è‡³å°‘æ˜¯76M   ï¼Œçœ‹è‡ªå·±æœºå™¨å ç”¨å®é™…æƒ…å†µè€Œå®š</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ä¼ä¸šæ¡ˆä¾‹-2">ä¼ä¸šæ¡ˆä¾‹</h3><p>åœ¨æ²¡æœ‰å¤‡ä»½æ•°æ®çš„æƒ…å†µä¸‹ï¼Œçªç„¶æ–­ç”µå¯¼è‡´è¡¨æŸåï¼Œæ‰“ä¸å¼€æ•°æ®åº“ã€‚</p><p><strong>æ¢å¤æ€è·¯</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è¡¨æ•°æ®å­˜åœ¨ç‹¬ç«‹è¡¨ç©ºé—´é‡Œï¼Œåªéœ€è¦å°†æ—§æ•°æ®çš„è¡¨ç©ºé—´å¯¼å…¥åˆ°æ–°æœºå™¨</span></span><br><span class="line"><span class="comment">#æŒ‚ç»´æŠ¤é¡µ</span></span><br><span class="line"><span class="comment"># 1.åœæ­¢è¿æ¥MySQLçš„æ‰€æœ‰æœåŠ¡</span></span><br><span class="line"><span class="comment"># 2.åœæ­¢MySQLæ•°æ®åº“</span></span><br><span class="line"><span class="comment"># 3.å‡†å¤‡æ–°ç¯å¢ƒ</span></span><br><span class="line">[root@db01 ~]# /etc/init.d/mysqld stop</span><br><span class="line">[root@db01 ~]# <span class="built_in">rm</span> -fr /app/mysql/data</span><br><span class="line">[root@db01 ~]# /app/mysql/scripts/mysql_install_db --user=mysql --</span><br><span class="line">basedir=/app/mysql --datadir=/app/mysql/data</span><br><span class="line">[root@db01 ~]# /etc/init.d/mysqld start</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.æ‰¾å¼€å‘è¦è¡¨ç»“æ„ï¼ˆå»ºè¡¨è¯­å¥ï¼‰</span></span><br><span class="line">CREATE TABLE world.city (</span><br><span class="line">`ID` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">`Name` char(35) NOT NULL DEFAULT <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">`CountryCode` char(3) NOT NULL DEFAULT <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">`District` char(20) NOT NULL DEFAULT <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">`Population` int(11) NOT NULL DEFAULT <span class="string">&#x27;0&#x27;</span>,PRIMARY KEY (`ID`),</span><br><span class="line">KEY `CountryCode` (`CountryCode`),</span><br><span class="line">KEY `Population` (`Population`),</span><br><span class="line">KEY `inx_aa` (`CountryCode`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=4080 DEFAULT CHARSET=latin1;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.åœ¨æ–°ç¯å¢ƒåˆ›å»ºè¡¨</span></span><br><span class="line">root@localhost:(none):25: &gt;create database world;</span><br><span class="line">CREATE TABLE world.city (</span><br><span class="line">`ID` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">`Name` char(35) NOT NULL DEFAULT <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">`CountryCode` char(3) NOT NULL DEFAULT <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">`District` char(20) NOT NULL DEFAULT <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">`Population` int(11) NOT NULL DEFAULT <span class="string">&#x27;0&#x27;</span>,PRIMARY KEY (`ID`),</span><br><span class="line">KEY `CountryCode` (`CountryCode`),</span><br><span class="line">KEY `Population` (`Population`),</span><br><span class="line">KEY `inx_aa` (`CountryCode`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=4080 DEFAULT CHARSET=latin1;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.åˆ é™¤æ–°ç¯å¢ƒçš„ç‹¬ç«‹è¡¨ç©ºé—´</span></span><br><span class="line">mysql &gt;alter table world.city discard tablespace;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 7.ä»æ—§ç¯å¢ƒå°†cityè¡¨çš„è¡¨ç©ºé—´æ‹·è´è¿‡æ¥</span></span><br><span class="line">[root@db02 world]# scp city.ibd 172.16.1.51:/app/mysql/data/world</span><br><span class="line"></span><br><span class="line"><span class="comment"># 8.æ–°ç¯å¢ƒç‹¬ç«‹è¡¨ç©ºé—´æˆæƒ</span></span><br><span class="line">[root@db01 world]# <span class="built_in">chown</span> mysql.mysql city.ibd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 9.æ–°ç¯å¢ƒå¯¼å…¥è¡¨ç©ºé—´</span></span><br><span class="line">mysql &gt;alter table world.city import tablespace;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 10.æŸ¥è¯¢æ•°æ®</span></span><br><span class="line">mysql &gt;<span class="keyword">select</span> * from world.city;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 11.å…ˆæµ‹è¯•</span></span><br><span class="line"><span class="comment"># 12.åº”ç”¨å‰²æ¥</span></span><br><span class="line">- å¼€å‘ä¿®æ”¹ä»£ç è¿æ¥æ•°æ®åº“çš„IP</span><br><span class="line">- è¿ç»´å¯¼å‡ºæ–°ç¯å¢ƒçš„æ•°æ®ï¼Œæ¢å¤åˆ°æ—§ç¯å¢ƒ</span><br><span class="line"><span class="comment"># 13.å¯åŠ¨è¿æ¥æ•°æ®åº“çš„æœåŠ¡</span></span><br><span class="line"><span class="comment">#å–æ¶ˆç»´æŠ¤æ¢å¤ç”Ÿäº§</span></span><br></pre></td></tr></table></figure><h3 id="è®¾ç½®ç‹¬ç«‹è¡¨ç©ºé—´">è®¾ç½®ç‹¬ç«‹è¡¨ç©ºé—´</h3><p>ç‹¬ç«‹è¡¨ç©ºé—´åœ¨5.6ç‰ˆæœ¬æ˜¯é»˜è®¤å¼€å¯çš„ã€‚</p><p>ç‹¬ç«‹è¡¨ç©ºé—´æ³¨æ„äº‹é¡¹ï¼š<strong>ä¸å¼€èµ·ç‹¬ç«‹è¡¨ç©ºé—´ï¼Œå…±äº«è¡¨ç©ºé—´ä¼šå ç”¨å¾ˆå¤§</strong></p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">mysql&gt; show variables like &#x27;%per_table%&#x27;;</span></span><br><span class="line"><span class="section">+-----------------------+-------+</span></span><br><span class="line"><span class="section">| Variable_name         | Value |</span></span><br><span class="line"><span class="section">+-----------------------+-------+</span></span><br><span class="line"><span class="section">| innodb_file_per_table | ON    |</span></span><br><span class="line"><span class="section">+-----------------------+-------+</span></span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure><p>åœ¨å‚æ•°æ–‡ä»¶/etc/my.cnf å¯ä»¥æ§åˆ¶ç‹¬ç«‹è¡¨ç©ºé—´</p><p>å…³é—­ç‹¬ç«‹è¡¨ç©ºé—´ ï¼ˆ0æ˜¯å…³é—­ï¼Œ1æ˜¯å¼€å¯ï¼‰</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[root@db02 clsn]</span><span class="comment"># vim /etc/my.cnf</span></span><br><span class="line"><span class="section">[mysqld]</span></span><br><span class="line"><span class="attr">innodb_file_per_table</span>=<span class="number">0</span></span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹ç‹¬ç«‹è¡¨ç©ºé—´é…ç½®</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">mysql&gt; show variables like &#x27;%per_table%&#x27; ;</span></span><br><span class="line"><span class="section">+-----------------------+-------+</span></span><br><span class="line"><span class="section">| Variable_name         | Value |</span></span><br><span class="line"><span class="section">+-----------------------+-------+</span></span><br><span class="line"><span class="section">| innodb_file_per_table | OFF   |</span></span><br><span class="line"><span class="section">+-----------------------+-------+</span></span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure><p>å°ç»“:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">innodb_file_per_table</span>=<span class="number">0</span>    å…³é—­ç‹¬ç«‹è¡¨ç©ºé—´</span><br><span class="line"><span class="attr">innodb_file_per_table</span>=<span class="number">1</span>    å¼€å¯ç‹¬ç«‹è¡¨ç©ºé—´ï¼Œå•è¡¨å•å­˜å‚¨</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLç´¢å¼•åŠæ‰«æ</title>
      <link href="/posts/3b4698b9.html"/>
      <url>/posts/3b4698b9.html</url>
      
        <content type="html"><![CDATA[<h2 id="ç´¢å¼•æ¦‚è¿°åŠåˆ†ç±»">ç´¢å¼•æ¦‚è¿°åŠåˆ†ç±»</h2><p>â€‹åœ¨å…³ç³»æ•°æ®åº“ä¸­ï¼Œç´¢å¼•æ˜¯ä¸€ç§å•ç‹¬çš„ã€ç‰©ç†çš„å¯¹æ•°æ®åº“è¡¨ä¸­ä¸€åˆ—æˆ–å¤šåˆ—çš„å€¼è¿›è¡Œæ’åºçš„ä¸€ç§å­˜å‚¨ç»“æ„ï¼Œå®ƒæ˜¯æŸä¸ªè¡¨ä¸­ä¸€åˆ—æˆ–è‹¥å¹²åˆ—å€¼çš„é›†åˆå’Œç›¸åº”çš„æŒ‡å‘è¡¨ä¸­ç‰©ç†æ ‡è¯†è¿™äº›å€¼çš„æ•°æ®é¡µçš„é€»è¾‘æŒ‡é’ˆæ¸…å•ã€‚ç´¢å¼•çš„ä½œç”¨ç›¸å½“äºå›¾ä¹¦çš„ç›®å½•ï¼Œå¯ä»¥æ ¹æ®ç›®å½•ä¸­çš„é¡µç å¿«é€Ÿæ‰¾åˆ°æ‰€éœ€çš„å†…å®¹ã€‚</p><ul><li>ä»€ä¹ˆæ˜¯ç´¢å¼•</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ç´¢å¼•æ˜¯ç”¨äºå¿«é€Ÿæ‰¾å‡ºåœ¨æŸä¸ªåˆ—ä¸­æ‹¥æœ‰ç‰¹å®šå€¼çš„è¡Œã€‚</span><br><span class="line">å¦‚æœæ²¡æœ‰ç´¢å¼•ï¼ŒMySQLå¿…é¡»ä»ç¬¬ä¸€æ¡è®°å½•å¼€å§‹è¯»å®Œæ•´ä¸ªè¡¨ï¼Œç›´åˆ°æ‰¾å‡ºç›¸å…³çš„è¡Œï¼Œè¡¨è¶Šå¤§ï¼ŒæŸ¥è¯¢æ•°æ®æ‰€èŠ±è´¹çš„æ—¶é—´å°±è¶Šå¤šã€‚</span><br></pre></td></tr></table></figure><ul><li>ä¸ºä»€ä¹ˆå»ºç«‹ç´¢å¼•</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1ï¼‰å¦‚æœæœ‰ä¸€å¼ äº§å“è¡¨ï¼Œè®°å½•ç€4Wäº§å“çš„ä¿¡æ¯ã€‚æœ‰ä¸€ä¸ªå“ç‰Œçš„å­—æ®µè®°å½•äº§å“çš„å“ç‰Œï¼Œç°åœ¨æƒ³è¦æŸ¥è¯¢å‡ºè¿™ä¸ªå“ç‰Œçš„äº§å“ã€‚</span><br><span class="line">2)å¦‚æœæ²¡æœ‰ç´¢å¼•ï¼Œé‚£ä¹ˆå°†ä»è¡¨ä¸­ç¬¬ä¸€æ¡è®°å½•ä¸€æ¡æ¡å¾€ä¸‹éå†ï¼Œç›´åˆ°æ‰¾åˆ°è¯¥æ¡ä¿¡æ¯ä¸ºæ­¢ã€‚</span><br><span class="line">3ï¼‰å¦‚æœæ‹¥æœ‰ç´¢å¼•ï¼Œé‚£ä¹ˆä¼šå°†è¯¥å“ç‰Œå­—æ®µï¼Œé€šè¿‡ä¸€å®šçš„æ–¹æ³•è¿›è¡Œå­˜å‚¨ï¼Œå¥½è®©æŸ¥è¯¢è¯¥å­—æ®µä¸Šçš„ä¿¡æ¯æ—¶ï¼Œèƒ½å¤Ÿå¿«4ï¼‰é€Ÿæ‰¾åˆ°å¯¹åº”çš„æ•°æ®ï¼Œè€Œä¸å¿…åœ¨éå†4Wæ¡äº§å“æ•°æ®ã€‚</span><br></pre></td></tr></table></figure><ul><li>ç´¢å¼•ç®—æ³•ç±»å‹</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ä»€ä¹ˆç®—æ³•çš„ç´¢å¼•ï¼Œå’ŒMySQLçš„å­˜å‚¨å¼•æ“æœ‰å…³ï¼ˆinnodbï¼‰</span><br><span class="line">Btreeç®—æ³•ï¼šBæ ‘ç´¢å¼•ï¼ˆé»˜è®¤ï¼‰</span><br><span class="line">HASHç®—æ³•ï¼šHASHç´¢å¼•</span><br><span class="line">FULLTEXTï¼šå…¨æ–‡ç´¢å¼•</span><br><span class="line">RTREEï¼šRæ ‘ç´¢å¼•</span><br></pre></td></tr></table></figure><ul><li>ç´¢å¼•ä¼˜ç¼ºç‚¹</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ä¼˜ç‚¹ï¼š</span><br><span class="line">1ï¼‰æ‰€æœ‰çš„å­—æ®µéƒ½å¯ä»¥è¢«ç´¢å¼•ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥ç»™ä»»æ„å­—æ®µè®¾ç½®ç´¢å¼•</span><br><span class="line">2ï¼‰åŠ å¿«æ•°æ®çš„æŸ¥è¯¢é€Ÿåº¦</span><br><span class="line"></span><br><span class="line">ç¼ºç‚¹ï¼š</span><br><span class="line">1ï¼‰åˆ›å»ºç´¢å¼•å’Œç»´æŠ¤ç´¢å¼•è¦è€—è´¹æ—¶é—´</span><br><span class="line">2ï¼‰æ•°æ®é‡çš„å¢åŠ ï¼Œæ‰€è€—è´¹çš„æ—¶é—´ä¹Ÿä¼šå¢åŠ </span><br><span class="line">3ï¼‰ç´¢å¼•ä¹Ÿéœ€è¦å ç©ºé—´ï¼Œå¦‚æœæˆ‘ä»¬çš„ç´¢å¼•é‡è¶Šæ¥è¶Šå¤§çš„è¯ï¼Œé‚£ä¹ˆç´¢å¼•æ–‡ä»¶å¯èƒ½è¾¾åˆ°æˆ‘ä»¬æ•°æ®çš„æœ€å¤§çº¿å€¼</span><br><span class="line">4ï¼‰è¡¨ä¸­æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œç´¢å¼•ä¹Ÿéœ€è¦åŠ¨æ€ç»´æŠ¤ï¼Œé™ä½æ•°æ®ç»´æŠ¤æ•ˆç‡</span><br></pre></td></tr></table></figure><h3 id="ç´¢å¼•ç®—æ³•ä»‹ç»">ç´¢å¼•ç®—æ³•ä»‹ç»</h3><p><strong>Btree</strong></p><p><img src="https://cos.lukme.top/Pic/QQ_1723705862018.png" alt="QQ_1723705862018"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * from tb1 <span class="built_in">where</span> <span class="built_in">id</span>=32; 3æ¬¡IO</span><br><span class="line"></span><br><span class="line"><span class="comment"># èŒƒå›´æŸ¥è¯¢</span></span><br><span class="line"><span class="keyword">select</span> * from tb1 <span class="built_in">where</span> <span class="built_in">id</span>&gt;25 and <span class="built_in">id</span> &lt;36; 9æ¬¡IO</span><br><span class="line"></span><br><span class="line">5-20-* è¿”å›  28-28-*  è¿”å› 28-35-*  9æ¬¡io</span><br></pre></td></tr></table></figure><p><strong>B+tree</strong></p><p><img src="https://cos.lukme.top/Pic/QQ_1723706447211.png" alt="QQ_1723706447211"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç²¾ç¡®æŸ¥è¯¢</span></span><br><span class="line"><span class="keyword">select</span> * from tb1 <span class="built_in">where</span> <span class="built_in">id</span>=32; 3æ¬¡IO</span><br><span class="line"></span><br><span class="line"><span class="comment"># èŒƒå›´æŸ¥è¯¢</span></span><br><span class="line"><span class="keyword">select</span> * from tb1 <span class="built_in">where</span> <span class="built_in">id</span>&gt;25 and <span class="built_in">id</span> &lt;36; 5æ¬¡IO</span><br><span class="line"></span><br><span class="line">5-20-Q-Q-Q  5æ¬¡io</span><br><span class="line"></span><br><span class="line"><span class="comment">### Btreeç®—æ³•å’ŒB+treeç®—æ³•çš„åŒºåˆ«</span></span><br><span class="line">1.B+treeç®—æ³•ï¼Œä¼˜åŒ–äº†èŒƒå›´æŸ¥è¯¢</span><br><span class="line">2.åœ¨ç›¸é‚»çš„å¶å­èŠ‚ç‚¹ä¸Šæ·»åŠ äº†æŒ‡é’ˆ</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>B*tree</strong></p><p><img src="https://cos.lukme.top/Pic/QQ_1723706709114.png" alt="QQ_1723706709114"></p><h3 id="ç´¢å¼•çš„åˆ†ç±»">ç´¢å¼•çš„åˆ†ç±»</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸»é”®ç´¢å¼•ï¼ˆèšç°‡ç´¢å¼•ï¼‰</span></span><br><span class="line">- è”åˆç´¢å¼•</span><br><span class="line"></span><br><span class="line"><span class="comment"># å”¯ä¸€ç´¢å¼•</span></span><br><span class="line">- è”åˆç´¢å¼•</span><br><span class="line">- å‰ç¼€ç´¢å¼•</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ™®é€šç´¢å¼•</span></span><br><span class="line">- è”åˆç´¢å¼•</span><br><span class="line">- å‰ç¼€ç´¢å¼•</span><br><span class="line"></span><br><span class="line"><span class="comment">## æŸ¥çœ‹ç´¢å¼•</span></span><br><span class="line">1ï¼‰mysql&gt; desc mysql.user;</span><br><span class="line">+------------------------+--------------+------+-----+-----------------------+-------+</span><br><span class="line">| Field                  | Type         | Null | Key | Default               | Extra |</span><br><span class="line">+------------------------+--------------+------+-----+-----------------------+-------+</span><br><span class="line">| Host                   | char(60)     | NO   | PRI |                       |       |</span><br><span class="line">| User                   | char(16)     | NO   | PRI |                       |       |</span><br><span class="line"></span><br><span class="line">2ï¼‰mysql&gt; show create table mysql.user;</span><br><span class="line">  PRIMARY KEY (`Host`,`User`)</span><br><span class="line">  </span><br><span class="line">3ï¼‰mysql&gt; show index from mysql.user;</span><br><span class="line">+-------+------------+----------+--------------+-------------+</span><br><span class="line">| Table | Non_unique | Key_name | Seq_in_index | Column_name |</span><br><span class="line">+-------+------------+----------+--------------+-------------+</span><br><span class="line">| user  |          0 | PRIMARY  |            1 | Host        |</span><br><span class="line">| user  |          0 | PRIMARY  |            2 | User        |</span><br><span class="line">+-------+------------+----------+--------------+-------------+</span><br><span class="line"></span><br><span class="line">ç´¢å¼•ä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼Œé¿å…ç»™å¤§åˆ—åˆ›å»ºç´¢å¼•</span><br><span class="line">1.ç´¢å¼•ä¼šè¿›è¡Œæ’åºï¼Œå¤§åˆ—åˆ›å»ºç´¢å¼•é€Ÿåº¦æ…¢</span><br><span class="line">2.ç´¢å¼•è¶Šå¤šå ç”¨ç£ç›˜ç©ºé—´è¶Šå¤§</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºç´¢å¼•">åˆ›å»ºç´¢å¼•</h2><h3 id="æ™®é€š-å”¯ä¸€é”®-ä¸»é”®ç´¢å¼•">æ™®é€š &amp; å”¯ä¸€é”® &amp; ä¸»é”®ç´¢å¼•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ç»Ÿè®¡ä¸€ä¸ªè¡¨ææœ‰å¤šå°‘æ¡æ•°æ®</span></span><br><span class="line">root@localhost:zls 09:52:19&gt; <span class="keyword">select</span> count(*) from world.city;</span><br><span class="line">+----------+</span><br><span class="line">| count(*) |</span><br><span class="line">+----------+</span><br><span class="line">| 4079  |</span><br><span class="line">+----------+</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ›å»ºæ™®é€šç´¢å¼•</span></span><br><span class="line">alter table è¡¨å add index ç´¢å¼•å(å­—æ®µ);</span><br><span class="line">mysql&gt; alter table stu2 add index idx_name(name);</span><br><span class="line">mysql&gt; alter table world.city add index idx_population(population);</span><br><span class="line"></span><br><span class="line"><span class="comment">## åˆ é™¤æ™®é€šç´¢å¼•</span></span><br><span class="line">mysql&gt; alter table stu2 drop index idx_name;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##å”¯ä¸€é”®ç´¢å¼•</span></span><br><span class="line"><span class="comment">#é¦–å…ˆåˆ¤æ–­è¿™ä¸ªå­—æ®µé‡Œæ˜¯å¦å”¯ä¸€ï¼Œæ˜¯å¦å”¯ä¸€</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> count(population) from world.city;</span><br><span class="line">+-------------------+</span><br><span class="line">| count(population) |</span><br><span class="line">+-------------------+</span><br><span class="line">| 4079 |</span><br><span class="line">+-------------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">#å‘ç°å»é‡ä¹‹åæ•°æ®å’Œ4079æ¯”å°‘äº†ï¼Œè¯´æ˜æ•°æ®è¿˜æ˜¯ä¸å”¯ä¸€çš„ï¼Œå°±ä¸èƒ½åˆ›å»ºå”¯ä¸€é”®</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> count(distinct(population)) from world.city;</span><br><span class="line">+-----------------------------+</span><br><span class="line">| count(distinct(population)) |</span><br><span class="line">+-----------------------------+</span><br><span class="line">| 3897 |</span><br><span class="line">+-----------------------------+</span><br><span class="line"></span><br><span class="line"><span class="comment">## æ·»åŠ å”¯ä¸€é”®ç´¢å¼•</span></span><br><span class="line">mysql&gt; alter table stu30 add unique key uni_phone(phone);</span><br><span class="line"></span><br><span class="line"><span class="comment">## åˆ é™¤</span></span><br><span class="line">mysql&gt; alter table stu30 drop index uni_phone;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## ä¸»é”®ç´¢å¼•</span></span><br><span class="line"><span class="comment">### å»ºè¡¨æ—¶åˆ›å»ºä¸»é”®ç´¢å¼•</span></span><br><span class="line">mysql&gt; create table stu1(<span class="built_in">id</span> int primary key auto_increment,name varchar(10));</span><br><span class="line">mysql&gt; create table stu1(<span class="built_in">id</span> int auto_increment,name varchar(10),primary key(<span class="built_in">id</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">### æ·»åŠ ä¸»é”®ç´¢å¼•</span></span><br><span class="line">mysql&gt; alter table stu2 add primary key(<span class="built_in">id</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">### åˆ é™¤ä¸»é”®ç´¢å¼•</span></span><br><span class="line">mysql&gt; alter table stu2 drop primary key;</span><br></pre></td></tr></table></figure><h3 id="å‰ç¼€ç´¢å¼•-è”åˆç´¢å¼•">å‰ç¼€ç´¢å¼• &amp; è”åˆç´¢å¼•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">è§£å†³ç»™å¤§åˆ—åˆ›å»ºç´¢å¼•æ’åºé€Ÿåº¦æ…¢çš„é—®é¢˜</span><br><span class="line">ç´¢å¼•å‰ç¼€å¤šå°‘å­—æ®µ</span><br><span class="line"><span class="comment">## æ™®é€šç´¢å¼•åˆ›å»ºå‰ç¼€ç´¢å¼•</span></span><br><span class="line">root@localhost:zls 10:24:28&gt; alter table stu30 add index idx_phone(phone(3));</span><br><span class="line"></span><br><span class="line"><span class="comment">## å”¯ä¸€ç´¢å¼•åˆ›å»ºå‰ç¼€ç´¢å¼•</span></span><br><span class="line">root@localhost:zls 10:56:30&gt; alter table stu30 add unique key uni_phone(phone(3));</span><br><span class="line"></span><br><span class="line"><span class="comment">#é€æ¸ä¸èƒ½åˆ›å»ºå‰ç¼€ç´¢å¼•</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">ä¸€å¼ è¡¨ä¸­ï¼Œå“ªäº›å­—æ®µéœ€è¦åˆ›å»ºç´¢å¼•ï¼Œå–å†³äºç”¨æˆ·éœ€æ±‚</span><br><span class="line">å½“ä¸€å¼ è¡¨ä¸­ï¼Œéœ€è¦åˆ›å»ºç´¢å¼•çš„å­—æ®µæ¯”è¾ƒå¤šçš„æ—¶å€™</span><br><span class="line"></span><br><span class="line"><span class="comment">## æ™®é€šç´¢å¼•è”åˆç´¢å¼•</span></span><br><span class="line">create table xiangqin</span><br><span class="line">(<span class="built_in">id</span> int,name varchar(10),gender enum(<span class="string">&#x27;0&#x27;</span>,<span class="string">&#x27;1&#x27;</span>),high int,weight int,body varchar(10),salary int);</span><br><span class="line"></span><br><span class="line"><span class="comment">#å“ªä¸ªéœ€æ±‚æ¯”è¾ƒé«˜å°±å…ˆå‰é¢</span></span><br><span class="line">mysql&gt; alter table xiangqin add index idx_all(gender,salary,body);</span><br><span class="line">mysql&gt; alter table xiangqin add index idx_all(gender,salary(4),body);</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¾‹å¦‚éœ€æ±‚</span></span><br><span class="line"><span class="built_in">where</span> a.å¥³ç”Ÿ and b.èº«é«˜ and c.ä½“é‡ and d.èº«æå¥½</span><br><span class="line">mysql&gt; alter table xiangqin add index idx_all(a,b,c)</span><br><span class="line"></span><br><span class="line">ç‰¹ç‚¹ï¼šå‰ç¼€ç”Ÿæ•ˆç‰¹æ€§</span><br><span class="line">a,ab,ac,abc,abcd å¯ä»¥èµ°ç´¢å¼•æˆ–éƒ¨åˆ†èµ°ç´¢å¼•</span><br><span class="line">b bc bcd <span class="built_in">cd</span> c d ba ... ä¸èµ°ç´¢å¼•</span><br><span class="line">åŸåˆ™ï¼šæŠŠæœ€å¸¸ç”¨æ¥åšä¸ºæ¡ä»¶æŸ¥è¯¢çš„åˆ—æ”¾åœ¨æœ€å‰é¢</span><br><span class="line"></span><br><span class="line"><span class="comment">## å”¯ä¸€ç´¢å¼•åˆ›å»ºè”åˆç´¢å¼•</span></span><br><span class="line">mysql alter table xiangqin add unique key uni_all(gender,salary,body);</span><br><span class="line"></span><br><span class="line"><span class="comment">## ä¸»é”®ç´¢å¼•åˆ›å»ºè”åˆç´¢å¼•</span></span><br><span class="line">mysql&gt;  alter table xiangqin add primary key(gender,salary,body);</span><br></pre></td></tr></table></figure><h2 id="MySQLæ•°æ®æ‰«æ">MySQLæ•°æ®æ‰«æ</h2><p><strong>å…¨è¡¨æ‰«æ</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1.<span class="keyword">select</span> * from student;</span><br><span class="line">2.<span class="keyword">select</span> æŸ¥è¯¢æ•°æ®æ—¶ï¼Œ<span class="built_in">where</span>æ¡ä»¶æ¥çš„å­—æ®µæ²¡æœ‰åˆ›å»ºç´¢å¼• ï¼ˆä¸èµ°ç´¢å¼•ï¼‰   <span class="built_in">type</span>ç±»å‹çš„ALLæ˜¯å…¨è¡¨æ‰«æ</span><br><span class="line">root@linux50 &gt; explain <span class="keyword">select</span> * from world.city;</span><br><span class="line">+----+-------------+-------+------+------+---------+------+------+-------+</span><br><span class="line">| <span class="built_in">id</span> | select_type | table | <span class="built_in">type</span> | key  | key_len | ref  | rows | Extra |</span><br><span class="line">+----+-------------+-------+------------+---------+------+------+-------+</span><br><span class="line">|  1 | SIMPLE      | city  | ALL  | NULL | NULL    | NULL | 4188 | NULL  |</span><br><span class="line">+----+-------------+-------+------+------+---------+------+------+-------+</span><br></pre></td></tr></table></figure><h3 id="ç´¢å¼•æ‰«æ">ç´¢å¼•æ‰«æ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># èµ°ç´¢å¼•çš„æŸ¥è¯¢</span></span><br><span class="line">1ï¼‰index // å…¨ç´¢å¼•æ‰«æ</span><br><span class="line">+----+-------------+-------+-------+-------------+---------+------+------+</span><br><span class="line">| <span class="built_in">id</span> | select_type | table | <span class="built_in">type</span>  | key         | key_len | ref  | rows |</span><br><span class="line">+----+-------------+-------+-------+-------------+---------+------+------+</span><br><span class="line">|  1 | SIMPLE      | city  | index | CountryCode | 3       | NULL | 4188 |</span><br><span class="line">+----+-------------+-------+-------+-------------+---------+------+------+</span><br><span class="line"></span><br><span class="line">2ï¼‰range // èŒƒå›´æŸ¥è¯¢å¹¶ä¸”åˆ›å»ºäº†ç´¢å¼•  (æ²¡æœ‰ç´¢å¼•ä¹Ÿæ˜¯èµ°å…¨æ‰«æ)</span><br><span class="line">root@world &gt; explain <span class="keyword">select</span> * from world.city <span class="built_in">where</span> population&lt;100;</span><br><span class="line">+----+-------------+-------+-------+---------+------+------+</span><br><span class="line">| <span class="built_in">id</span> | select_type | table | <span class="built_in">type</span>  | key_len | ref  | rows |</span><br><span class="line">+----+-------------+-------+-------+---------+------+------+</span><br><span class="line">|  1 | SIMPLE      | city  | range | 4       | NULL |    1 |</span><br><span class="line">+----+-------------+-------+-------+---------+------+------+</span><br><span class="line"></span><br><span class="line">3ï¼‰ref // è”åˆæŸ¥è¯¢ï¼Œ æ™®é€šç´¢å¼•çš„ç²¾ç¡®æŸ¥è¯¢</span><br><span class="line">root@world &gt; explain <span class="keyword">select</span> * from world.city <span class="built_in">where</span> countrycode=<span class="string">&#x27;CHN&#x27;</span>;</span><br><span class="line">+----+-------------+-------+------+---------+-------+------+</span><br><span class="line">| <span class="built_in">id</span> | select_type | table | <span class="built_in">type</span> | key_len | ref   | rows |</span><br><span class="line">+----+-------------+-------+------+---------+-------+------+</span><br><span class="line">|  1 | SIMPLE      | city  | ref  | 3       | const |  363 |</span><br><span class="line">+----+-------------+-------+------+---------+-------+------+</span><br><span class="line"></span><br><span class="line">4ï¼‰eq_ref // è¿è¡¨æŸ¥è¯¢ä½¿ç”¨ <span class="built_in">join</span> on ä¸” å°è¡¨åœ¨å‰ï¼Œå¤§è¡¨åœ¨å</span><br><span class="line"></span><br><span class="line">5ï¼‰const ï¼Œsystem // ä¸»é”®ç²¾ç¡®æŸ¥è¯¢</span><br><span class="line">+----+-------------+-------+-------+---------+---------+-------+</span><br><span class="line">| <span class="built_in">id</span> | select_type | table | <span class="built_in">type</span>  | key     | key_len | ref   |</span><br><span class="line">+----+-------------+-------+-------+---------+---------+-------+</span><br><span class="line">|  1 | SIMPLE      | city  | const | PRIMARY | 4       | const |</span><br><span class="line">+----+-------------+-------+-------+---------+---------+-------+</span><br><span class="line"></span><br><span class="line">6)null    è¶…å‡ºå­—æ®µ</span><br><span class="line">+----+-------------+-------+------+---------------+------+---------+</span><br><span class="line">| <span class="built_in">id</span> | select_type | table | <span class="built_in">type</span> | possible_keys | key  | key_len |</span><br><span class="line">+----+-------------+-------+------+---------------+------+---------+</span><br><span class="line">|  1 | SIMPLE      | NULL  | NULL | NULL          | NULL | NULL    |</span><br><span class="line">+----+-------------+-------+------+---------------+------+---------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-key_len: è¶Šå°è¶Šå¥½ ï¼Œ å‰ç¼€ç´¢å¼•å»æ§åˆ¶</span><br><span class="line">-rows: è¶Šå°è¶Šå¥½</span><br></pre></td></tr></table></figure><h3 id="ä¸èµ°ç´¢å¼•æ’æŸ¥">ä¸èµ°ç´¢å¼•æ’æŸ¥</h3><p><strong>ç´¢å¼•åˆ›å»ºè¯¥è§„èŒƒ</strong></p><p>ä¸ºäº†ä½¿ç´¢å¼•çš„ä½¿ç”¨æ•ˆç‡æ›´é«˜ï¼Œåœ¨åˆ›å»ºç´¢å¼•æ—¶ï¼Œå¿…é¡»è€ƒè™‘åœ¨å“ªäº›å­—æ®µä¸Šåˆ›å»ºç´¢å¼•å’Œåˆ›å»ºä»€ä¹ˆç±»å‹çš„ç´¢å¼•ã€‚</p><ul><li><p>æ¯å¼ è¡¨å¿…é¡»æœ‰ä¸€ä¸ªä¸»é”®ç´¢å¼•</p><ol><li>èƒ½åˆ›å»ºå”¯ä¸€ç´¢å¼•å°±åˆ›å»ºå”¯ä¸€ç´¢å¼•</li><li>å¦‚æœé‡å¤å€¼æ¯”è¾ƒå¤šçš„æƒ…å†µä¸‹ï¼Œè”åˆç´¢å¼•</li><li>ä¸ºç»å¸¸éœ€è¦æ’åºã€åˆ†ç»„å’Œè”åˆæ“ä½œçš„å­—æ®µå»ºç«‹ç´¢å¼•</li><li>ä¸ºå¸¸ä½œä¸ºæŸ¥è¯¢æ¡ä»¶çš„å­—æ®µå»ºç«‹ç´¢å¼•</li><li>å°½é‡ä½¿ç”¨å‰ç¼€æ¥ç´¢å¼•</li></ol></li><li><p>é™åˆ¶ç´¢å¼•çš„æ•°ç›®</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç´¢å¼•çš„æ•°ç›®ä¸æ˜¯è¶Šå¤šè¶Šå¥½ã€‚æ¯ä¸ªç´¢å¼•éƒ½éœ€è¦å ç”¨ç£ç›˜ç©ºé—´ï¼Œç´¢å¼•è¶Šå¤šï¼Œéœ€è¦çš„ç£ç›˜ç©ºé—´å°±è¶Šå¤§ã€‚ä¿®æ”¹è¡¨æ—¶ï¼Œå¯¹ç´¢å¼•çš„é‡æ„å’Œæ›´æ–°å¾ˆéº»çƒ¦ã€‚è¶Šå¤šçš„ç´¢å¼•ï¼Œä¼šä½¿æ›´æ–°è¡¨å˜å¾—å¾ˆæµªè´¹æ—¶é—´ã€‚</span><br></pre></td></tr></table></figure><ul><li>åˆ é™¤ä¸å†ä½¿ç”¨æˆ–è€…å¾ˆå°‘ä½¿ç”¨çš„ç´¢å¼•</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¡¨ä¸­çš„æ•°æ®è¢«å¤§é‡æ›´æ–°ï¼Œæˆ–è€…æ•°æ®çš„ä½¿ç”¨æ–¹å¼è¢«æ”¹å˜åï¼ŒåŸæœ‰çš„ä¸€äº›ç´¢å¼•å¯èƒ½ä¸å†éœ€è¦ã€‚æ•°æ®åº“ç®¡ç†å‘˜åº”å½“å®šæœŸæ‰¾å‡ºè¿™äº›ç´¢å¼•ï¼Œå°†å®ƒä»¬åˆ é™¤ï¼Œä»è€Œå‡å°‘ç´¢å¼•å¯¹æ›´æ–°æ“ä½œçš„å½±å“ã€‚</span><br></pre></td></tr></table></figure><p><strong>ä¸èµ°ç´¢å¼•æ’æŸ¥</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.æ²¡åˆ›å»ºç´¢å¼•</span></span><br><span class="line"><span class="comment"># 2.ç»“æœé›†è¶…è¿‡æ€»æ•°æ®çš„25%</span></span><br><span class="line">explain <span class="keyword">select</span> * from world.city <span class="built_in">where</span> population &gt;1000;</span><br><span class="line"><span class="comment">#ä¼˜åŒ–ï¼šä½¿ç”¨limit åˆ†é¡µæŸ¥è¯¢</span></span><br><span class="line">explain <span class="keyword">select</span> * from world.city <span class="built_in">where</span> population &gt;1000 <span class="built_in">limit</span> 60,60;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.ä½¿ç”¨å­—æ®µåšè®¡ç®—</span></span><br><span class="line">explain <span class="keyword">select</span> * from world.city <span class="built_in">where</span> <span class="built_in">id</span>+1=10;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.éšå¼è½¬æ¢å¯¼è‡´ä¸èµ°ç´¢å¼•</span></span><br><span class="line">explain <span class="keyword">select</span> * from stu30 <span class="built_in">where</span> phone=12312312312;</span><br><span class="line"><span class="comment">#ä¼˜åŒ–ï¼šæ ¹æ®å­—æ®µç±»å‹æŸ¥è¯¢ï¼Œæ˜¯charç±»å‹å°±åŠ ä¸Šå¼•å·</span></span><br><span class="line">explain <span class="keyword">select</span> * from stu30 <span class="built_in">where</span> phone=<span class="string">&#x27;12312312312&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.æ¨¡ç³ŠæŸ¥è¯¢æ—¶ %ä¸èƒ½æ”¾åœ¨æœ€å‰é¢</span></span><br><span class="line">explain <span class="keyword">select</span> * from world.city <span class="built_in">where</span> countrycode like <span class="string">&#x27;%H&#x27;</span>;</span><br><span class="line"><span class="comment">#ä¼˜åŒ–ï¼š%ä¸èƒ½æ”¾åœ¨æœ€å‰é¢   æœç´¢å¼•æ“æ•°æ®åº“ ç”¨elasticsearch</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.èŒƒå›´æŸ¥è¯¢ä½¿ç”¨ &lt;&gt; ã€ not in</span></span><br><span class="line">explain <span class="keyword">select</span> * from world.city <span class="built_in">where</span> countrycode &lt;&gt; <span class="string">&#x27;CHN&#x27;</span>;</span><br><span class="line"><span class="comment">#ä¼˜åŒ–ï¼šä½¿ç”¨limit</span></span><br><span class="line">explain <span class="keyword">select</span> * from world.city <span class="built_in">where</span> countrycode &lt;&gt; <span class="string">&#x27;CHN&#x27;</span> <span class="built_in">limit</span> 10;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 7.è”åˆç´¢å¼•æ²¡æœ‰æŒ‰ç…§ç´¢å¼•åˆ›å»ºé¡ºåºæŸ¥è¯¢ï¼Œå¯¼è‡´ä¸èµ°ç´¢å¼•</span></span><br><span class="line">ä¼˜åŒ–æ–¹æ¡ˆï¼šè°ƒç ”ï¼Œæ—¥å¿—æ•°æ®åˆ†æï¼ŒæŒ‰ç…§ç”¨æˆ·éœ€æ±‚ï¼Œåˆ›å»ºè”åˆç´¢å¼•</span><br><span class="line"></span><br><span class="line"><span class="comment"># 8.ç´¢å¼•æœ¬èº«å¤±æ•ˆ</span></span><br><span class="line">ä¼˜åŒ–æ–¹æ¡ˆï¼šåˆ é™¤é‡å»º</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLè¯­å¥å‘½ä»¤</title>
      <link href="/posts/24d869a6.html"/>
      <url>/posts/24d869a6.html</url>
      
        <content type="html"><![CDATA[<h2 id="1-å®¢æˆ·ç«¯å‘½ä»¤">1.å®¢æˆ·ç«¯å‘½ä»¤</h2><p><strong>MySQLé…ç½®æ–‡ä»¶å½±å“</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">1.å½±å“æœåŠ¡ç«¯çš„å¯åŠ¨ [mysqld] --&gt;[server]</span><br><span class="line">2.å½±å“å®¢æˆ·ç«¯çš„è¿æ¥ [mysql][mysqladmin][mysqldump] --&gt;[client]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ‰€æœ‰å®¢æˆ·ç«¯é…ç½®å†™åœ¨é…ç½®æ–‡ä»¶é‡Œç«‹å³ç”Ÿæ•ˆ</span></span><br><span class="line">[root@db01 ~]# vim /etc/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">basedir=/app/mysql</span><br><span class="line">datadir=/app/mysql/data</span><br><span class="line">server_id=1</span><br><span class="line">log-bin=mysql-bin</span><br><span class="line">socket=/opt/mysql.sock</span><br><span class="line"></span><br><span class="line">[client]</span><br><span class="line">user=root</span><br><span class="line">password=123</span><br><span class="line">socket=/opt/mysql.sock</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">? æŸ¥çœ‹å¸®åŠ©</span><br><span class="line">\q ï¼š quit <span class="built_in">exit</span> é€€å‡ºmysqlç»ˆç«¯ MySQL5.6 Ctrl + c</span><br><span class="line">\c ï¼š ç»ˆæ­¢å‘½ä»¤  MySQL5.6 Ctrl + c</span><br><span class="line">\s : æŸ¥çœ‹MySQLçŠ¶æ€</span><br><span class="line">\G ï¼š æ ¼å¼åŒ–è¾“å‡º</span><br><span class="line">\. : <span class="built_in">source</span> å¯¼å…¥æ•°æ®</span><br><span class="line">\! ï¼š system åé¢æ¥ç³»ç»Ÿå‘½ä»¤</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å¯¼å‡ºæ•°æ®   </span></span><br><span class="line">-A å¤‡ä»½æ‰€æœ‰çš„database</span><br><span class="line">-B å¯¼å‡ºé‚£å‡ ä¸ªæ•°æ®åº“</span><br><span class="line">[root@db01 ~]# mysqldump -A &gt;/tmp/luay.sql</span><br><span class="line">[root@db01 ~]# mysqldump -B luay &gt;/tmp/luay.sql</span><br><span class="line"></span><br><span class="line"><span class="comment">#åº“å¤–å¯¼å…¥æ•°æ®</span></span><br><span class="line">[root@db01 ~]# mysql -uroot &lt;/tmp/luay.sql </span><br><span class="line"></span><br><span class="line"><span class="comment">#åº“å†…å¯¼å…¥æ•°æ®ï¼ˆå…ˆä¸´æ—¶å…³é—­äºŒè¿›åˆ¶æ—¥å¿—è®°å½•ï¼Œå†å¯¼å…¥ï¼‰</span></span><br><span class="line">mysql&gt; <span class="built_in">set</span> sql_log_bin=0;</span><br><span class="line">mysql&gt; <span class="built_in">source</span> /tmp/luay.sql</span><br><span class="line">mysql&gt; <span class="built_in">set</span> sql_log_bin=1;</span><br><span class="line"></span><br><span class="line"><span class="comment">#åº“å¤–å¯¼å…¥æ•°æ®å®¹æ˜“è„æ•°æ®,å†å¼€å¯äºŒè¿›åˆ¶æ—¥å¿—æ—¶å€™ï¼Œåº“å¤–å¯¼å…¥æ•°æ®ä¹Ÿä¼šè®°å½•åˆ°äºŒè¿›åˆ¶æ—¥å¿—é‡Œï¼Œå®¹æ˜“é€ æˆæ•°æ®çš„æ±¡æŸ“ï¼Œä¼šäº§ç”Ÿé‡å¤æ•°æ®</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä¸é€€å‡ºMySQLè€Œè¿›è¡Œmysqlå¤–çš„æ“ä½œ</span></span><br><span class="line">mysql&gt; system <span class="built_in">ls</span> -l</span><br><span class="line">total 31856</span><br><span class="line">-rw-------.  1 root root      1515 Jul  3 11:00 anaconda-ks.cfg</span><br><span class="line">-rw-rw-rw-.  1 root root       433 Jul  7 13:28 ip_host.sh</span><br><span class="line">-rw-rw-rw-.  1 root root    188754 Apr 23 08:42 main.sh</span><br><span class="line"></span><br><span class="line">mysql&gt; system vim ip_host.sh</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="mysqladminå‘½ä»¤">mysqladminå‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ£€æµ‹MySQLæ˜¯å¦å­˜æ´»</span></span><br><span class="line">[root@db01 ~]# mysqladmin -uroot -p123 ping</span><br><span class="line">mysqld is alive</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœæ­¢MySQLæœåŠ¡</span></span><br><span class="line">[root@db01 ~]# mysqladmin -uroot -p123 shutdown</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹MySQLé»˜è®¤é…ç½®</span></span><br><span class="line">[root@db01 ~]# mysqladmin -uroot -p123 variables</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹MySQLçŠ¶æ€</span></span><br><span class="line">[root@db01 ~]# mysqladmin -uroot -p123 status</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ·æ–°MySQL binlogæ—¥å¿—</span></span><br><span class="line">[root@db01 ~]# mysqladmin -uroot -p123 flush-log</span><br><span class="line"></span><br><span class="line"><span class="comment"># åº“å¤–å»ºåº“</span></span><br><span class="line">[root@db01 ~]# mysqladmin -uroot -p123 create zls111</span><br><span class="line"></span><br><span class="line"><span class="comment"># åº“å¤–åˆ åº“</span></span><br><span class="line">[root@db01 ~]# mysqladmin -uroot -p123 drop zls111</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡æ–°åŠ è½½æ•°æ®åº“</span></span><br><span class="line">[root@db01 ~]# mysqladmin -uroot -p123 reload</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å¯†ç  ä¿®æ”¹å¯†ç </span></span><br><span class="line">[root@db01 ~]# mysqladmin -uroot -p123 password <span class="string">&#x27;1111&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="2-ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€">2.ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€</h2><h3 id="DDL-æ•°æ®å®šä¹‰è¯­è¨€">DDL æ•°æ®å®šä¹‰è¯­è¨€</h3><ul><li>Database Definition Language    (create,drop,alter)</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">å¼€å‘è§„èŒƒï¼š</span><br><span class="line">01) åº“ã€è¡¨åä¸èƒ½å¤§å†™,æ•°å­—å¼€å¤´,16ä¸ªå­—ç¬¦ä¸²</span><br><span class="line">02) è¡¨åå’Œä¸šåŠ¡æœ‰å…³</span><br><span class="line">03) drop è¯­å¥ç¦æ­¢</span><br><span class="line">04) é€‰æ‹©åˆé€‚çš„æ•°æ®ç±»å‹</span><br><span class="line">05) å¿…é¡»è¦æœ‰ä¸»é”®</span><br><span class="line">06) åˆ—å°½é‡éç©ºçº¦æŸ</span><br><span class="line">07) å‡å°‘å¤–é”®çº¦æŸ</span><br><span class="line">08) å¿…é¡»è®¾ç½®å­˜å‚¨å¼•æ“å’Œå­—ç¬¦é›†</span><br><span class="line">09) åˆ—å¿…é¡»è¦æœ‰æ³¨é‡Š</span><br><span class="line">10) å¯¹äºéè´Ÿæ•°è®¾ç½®æ•°æ®ç±»å‹çº¦æŸ--æ— ç¬¦å·</span><br></pre></td></tr></table></figure><h4 id="åº“">åº“</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è¿›å…¥MySQLæ˜¾ç¤ºå½“å‰æ‰€åœ¨åº“(åœ¨å®¢æˆ·ç«¯é…ç½®é‡Œæ·»åŠ )</span></span><br><span class="line">[root@db01 ~]# vim /etc/my.cnf</span><br><span class="line">[client]</span><br><span class="line">prompt=<span class="string">&quot;\\u@\\h:\\d \\r:\\m:\\s&gt;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#\\uä»£è¡¨å½“å‰ç”¨æˆ·ï¼Œ\\dä»£è¡¨å½“å‰æ•°æ®åº“åï¼Œ\\r:\\m:\\sä»£è¡¨å½“å‰æ—¶é—´ã€‚</span></span><br></pre></td></tr></table></figure><p><code>å¢</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">## å¢ï¼šåˆ›å»ºæ•°æ®åº“ create</span><br><span class="line">mysql&gt; help create database</span><br><span class="line">Syntax:</span><br><span class="line">CREATE &#123;DATABASE | SCHEMA&#125; [IF NOT EXISTS] db_name</span><br><span class="line">create database åº“åå­—;</span><br><span class="line">create schema åº“åå­—;</span><br><span class="line"></span><br><span class="line">#å¦‚æœä¸å­˜åœ¨å°±åˆ›å»º</span><br><span class="line">mysql&gt; create database if not exists zls;</span><br><span class="line">mysql&gt; create schema if not exists zls11;</span><br><span class="line"></span><br><span class="line">#è®¾ç½®å­—ç¬¦é›†å’Œæ ¡éªŒè§„åˆ™</span><br><span class="line">character set utf8;</span><br><span class="line">mysql&gt; create database zls123 charset utf8;</span><br><span class="line">mysql&gt; create database if not exists zls123 charset utf8 collate utf8_general_ci;</span><br><span class="line"></span><br><span class="line">#æŸ¥çœ‹åˆ›å»ºçš„å­—ç¬¦é›†</span><br><span class="line">mysql&gt; show create database lgj;</span><br><span class="line">+----------+----------------------------------------------------------------+</span><br><span class="line">| Database | Create Database                                                |</span><br><span class="line">+----------+----------------------------------------------------------------+</span><br><span class="line">| lgj      | CREATE DATABASE `lgj` /*!40100 DEFAULT CHARACTER SET utf8 */|</span><br><span class="line">+----------+----------------------------------------------------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#ä½¿ç”¨äºŒè¿›åˆ¶å®‰è£…çš„MySQLå­—ç¬¦é›†é»˜è®¤æ˜¯latin</span><br><span class="line">#å¦‚ä½•æ›´æ”¹å­—ç¬¦é›†ï¼Ÿ</span><br><span class="line">mysql&gt; show variables like &#x27;%char%&#x27;;</span><br><span class="line">+--------------------------+-----------------------------------+</span><br><span class="line">| Variable_name            | Value                             |</span><br><span class="line">+--------------------------+-----------------------------------+</span><br><span class="line">| character_set_client     | utf8                              |</span><br><span class="line">| character_set_connection | utf8                              |</span><br><span class="line">| character_set_database   | latin1                            |</span><br><span class="line">| character_set_filesystem | binary                            |</span><br><span class="line">| character_set_results    | utf8                              |</span><br><span class="line">| character_set_server     | latin1                            |</span><br><span class="line">| character_set_system     | utf8                              |</span><br><span class="line">| character_sets_dir       | /app/mysql-5.6.50/share/charsets/ |</span><br><span class="line">+--------------------------+-----------------------------------+</span><br><span class="line"></span><br><span class="line">#ä¿®æ”¹å­—ç¬¦é›†</span><br><span class="line">[root@db02 ~]#  system vim /etc/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">character_set_server=utf8</span><br><span class="line"></span><br><span class="line">#é‡å¯</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>åˆ </code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">## åˆ ï¼š drop</span><br><span class="line">mysql&gt; drop database test1111111;</span><br><span class="line">mysql&gt; drop database if exists zls111;</span><br></pre></td></tr></table></figure><p><code>æ”¹</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">## æ”¹ï¼š alter</span><br><span class="line">mysql&gt; alter database zls charset latin5;</span><br><span class="line">mysql&gt; alter database zls charset utf8 collate ut8_bin;</span><br></pre></td></tr></table></figure><h4 id="è¡¨">è¡¨</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">## å¸¸ç”¨çš„æ•°æ®ç±»å‹</span><br><span class="line">æ•°å­—ç±»å‹ï¼š</span><br><span class="line">intï¼šæ•´å‹ -2^31 ~ 2^31 -1 -2147483648 ~ 2147483647</span><br><span class="line">tinyintï¼šæœ€å°æ•´å‹ -128 ~ 127    æ— ç¬¦å·èŒƒå›´ï¼š 0-255</span><br><span class="line">floatï¼šæµ®ç‚¹å‹ å•ç²¾åº¦</span><br><span class="line">doubleï¼šæµ®ç‚¹å‹ åŒç²¾åº¦</span><br><span class="line"></span><br><span class="line">å­—ç¬¦ä¸²ç±»å‹ï¼š</span><br><span class="line">charï¼šå®šé•¿å­—ç¬¦ä¸² char(3) å¼ ä¸‰ char(11) char(18)</span><br><span class="line">varcharï¼šå˜é•¿å­—ç¬¦ä¸² varchar(3) å¼ ä¸‰</span><br><span class="line">enumï¼šæšä¸¾ç±»å‹ enum(&#x27;f&#x27;,&#x27;m&#x27;) enum(&#x27;0&#x27;,&#x27;1&#x27;) enum(&#x27;A&#x27;,&#x27;B&#x27;,&#x27;C&#x27;,&#x27;D&#x27;)</span><br><span class="line">male   female</span><br><span class="line"></span><br><span class="line">æ—¶é—´ç±»å‹ï¼š</span><br><span class="line">timestampï¼šæ—¶é—´æˆ³ç±»å‹ ç±»å‹çš„å€¼èŒƒå›´ä»1970-01-01 00:00:01 UTCåˆ° 2038-01-19 03:14:07 UTC</span><br><span class="line">datetimeï¼šæ—¶é—´ç±»å‹ ç±»å‹çš„å€¼èŒƒå›´ä»1000-01-01 00:00:00åˆ° 9999-12-31 23:59:59</span><br><span class="line"></span><br><span class="line">## å¸¸ç”¨çš„çº¦æŸ</span><br><span class="line">NULLï¼šå¯ä»¥ä¸ºç©º</span><br><span class="line">NOT NULLï¼š éç©º</span><br><span class="line">defaultï¼š é»˜è®¤å€¼</span><br><span class="line">primary keyï¼š ä¸»é”® ç‰¹ç‚¹ï¼šå”¯ä¸€ ä¸” éç©º</span><br><span class="line">auto_incrementï¼š è‡ªå¢</span><br><span class="line">unique keyï¼š å”¯ä¸€é”® ç‰¹ç‚¹ï¼šå”¯ä¸€ ä½† å¯ä»¥ä¸ºç©º primary key = unique key + not null</span><br><span class="line">unsignedï¼šæ— ç¬¦å·ï¼ˆéè´Ÿæ•°ï¼‰</span><br><span class="line">commentï¼šæ³¨é‡Š</span><br></pre></td></tr></table></figure><p><code>å¢ &amp; æŸ¥</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">## å¢ï¼šåˆ›å»ºè¡¨</span><br><span class="line">å­¦ç”Ÿè¡¨ï¼šid å­¦å·ï¼Œname åå­—ï¼Œage å¹´é¾„ï¼Œgender æ€§åˆ«ï¼Œphone æ‰‹æœºå·ï¼Œcome_time å…¥å­¦æ—¥æœŸ</span><br><span class="line">create table student(id int,name varchar(10),age tinyint,gender enum(&#x27;f&#x27;,&#x27;m&#x27;),phone char(11),come_time datetime);</span><br><span class="line"></span><br><span class="line">#åˆ›å»ºè¡¨ï¼Œå¸¦æœ‰çº¦æŸ</span><br><span class="line">create table stu(</span><br><span class="line">id int primary key auto_increment comment &#x27;å­¦ç”Ÿå­¦å·&#x27;,</span><br><span class="line">name varchar(10) comment &#x27;å­¦ç”Ÿå§“å&#x27;,</span><br><span class="line">age tinyint unsigned not null comment &#x27;å­¦ç”Ÿå¹´é¾„&#x27;,</span><br><span class="line">gender enum(&#x27;f&#x27;,&#x27;m&#x27;) not null default &#x27;m&#x27; comment &#x27;å­¦ç”Ÿæ€§åˆ«&#x27;,</span><br><span class="line">phone char(11) not null unique key comment &#x27;å­¦ç”Ÿæ‰‹æœº&#x27;,</span><br><span class="line">come_time datetime not null default NOW() comment &#x27;å…¥å­¦æ—¶é—´&#x27;);</span><br><span class="line"></span><br><span class="line">#æŸ¥çœ‹åˆ›å»ºçš„è¡¨</span><br><span class="line">root@student &gt; show create table stu;</span><br><span class="line">+-------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------</span><br><span class="line">| stu   | CREATE TABLE `stu` (</span><br><span class="line">  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT &#x27;å­¦ç”Ÿå­¦å·&#x27;,</span><br><span class="line">  `name` varchar(10) DEFAULT NULL COMMENT &#x27;å­¦ç”Ÿå§“å&#x27;,</span><br><span class="line">  `age` tinyint(3) unsigned NOT NULL COMMENT &#x27;å­¦ç”Ÿå¹´é¾„&#x27;,</span><br><span class="line">  `gender` enum(&#x27;f&#x27;,&#x27;m&#x27;) NOT NULL DEFAULT &#x27;m&#x27; COMMENT &#x27;å­¦ç”Ÿæ€§åˆ«&#x27;,</span><br><span class="line">  `phone` char(11) NOT NULL COMMENT &#x27;å­¦ç”Ÿæ‰‹æœº&#x27;,</span><br><span class="line">  `come_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#x27;å…¥å­¦æ—¶é—´&#x27;,</span><br><span class="line">  PRIMARY KEY (`id`),</span><br><span class="line">  UNIQUE KEY `phone` (`phone`)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8  </span><br><span class="line"></span><br><span class="line">#æŸ¥çœ‹è¡¨ç»“æ„  (å¦‚æœå·²ç»åœ¨studentåº“é‡Œï¼Œç›´æ¥ä½¿ç”¨   desc stu  )</span><br><span class="line">root@mysql &gt; desc student.stu;</span><br><span class="line"># desc åº“å .  è¡¨å</span><br><span class="line">+-----------+---------------------+------+-----+-------------------+----------------+</span><br><span class="line">| Field     | Type                | Null | Key | Default           | Extra          |</span><br><span class="line">+-----------+---------------------+------+-----+-------------------+----------------+</span><br><span class="line">| id        | int(11)             | NO   | PRI | NULL              | auto_increment |</span><br><span class="line">| name      | varchar(10)         | YES  |     | NULL              |                |</span><br><span class="line">| age       | tinyint(3) unsigned | NO   |     | NULL              |                |</span><br><span class="line">| gender    | enum(&#x27;f&#x27;,&#x27;m&#x27;)       | NO   |     | m                 |                |</span><br><span class="line">| phone     | char(11)            | NO   | UNI | NULL              |                |</span><br><span class="line">| come_time | datetime            | NO   |     | CURRENT_TIMESTAMP |                |</span><br><span class="line">+-----------+---------------------+------+-----+-------------------+----------------+</span><br><span class="line">6 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#æŸ¥çœ‹è¡¨ï¼ˆå¦‚æœå·²ç»å†studentåº“é‡Œï¼Œç›´æ¥ä½¿ç”¨   show tables  ï¼‰</span><br><span class="line">root@mysql &gt; show tables from student;</span><br><span class="line">+-------------------+</span><br><span class="line">| Tables_in_student |</span><br><span class="line">+-------------------+</span><br><span class="line">| stu               |</span><br><span class="line">+-------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">#æ’å…¥æ•°æ®</span><br><span class="line">insert into student.stu (id,name,age,gender,phone) values(123,&#x27;zls&#x27;,18,&#x27;m&#x27;,12312312366);</span><br><span class="line">insert into student.stu (id,name,age,gender,phone) values(1223,&#x27;zls&#x27;,18,&#x27;m&#x27;,12312312365);</span><br><span class="line"></span><br><span class="line">#æŸ¥çœ‹æ•°æ®</span><br><span class="line">root@mysql &gt; select * from student.stu;</span><br><span class="line">+------+------+-----+--------+-------------+---------------------+</span><br><span class="line">| id   | name | age | gender | phone       | come_time           |</span><br><span class="line">+------+------+-----+--------+-------------+---------------------+</span><br><span class="line">|  123 | zls  |  18 | m      | 12312312366 | 2024-08-12 19:26:04 |</span><br><span class="line">| 1223 | zls  |  18 | m      | 12312312365 | 2024-08-12 19:28:01 |</span><br><span class="line">+------+------+-----+--------+-------------+---------------------+</span><br></pre></td></tr></table></figure><p><code>åˆ  &amp; æ”¹</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## åˆ è¡¨ drop</span></span><br><span class="line">student &gt; drop table stu;<span class="comment">#å¦‚æœå·²ç»åœ¨studentåº“å†…</span></span><br><span class="line">mysql &gt; drop table student.stu1</span><br><span class="line"></span><br><span class="line"><span class="comment">## æ”¹è¡¨ alter</span></span><br><span class="line"><span class="comment">### ä¿®æ”¹è¡¨å</span></span><br><span class="line">student &gt; alter table stu3 rename stu30;</span><br><span class="line"></span><br><span class="line"><span class="comment">### ä¿®æ”¹å­—æ®µ</span></span><br><span class="line"><span class="comment"># æ·»åŠ å­—æ®µï¼ˆé»˜è®¤æ·»åŠ åœ¨æœ€åï¼‰</span></span><br><span class="line">mysql &gt; alter table stu10 add lzd char(2);</span><br><span class="line"></span><br><span class="line">root@student &gt; desc stu;</span><br><span class="line">+-----------+---------------------+------+-----+-------------------+----------------+</span><br><span class="line">| Field     | Type                | Null | Key | Default           | Extra          |</span><br><span class="line">+-----------+---------------------+------+-----+-------------------+----------------+</span><br><span class="line">| <span class="built_in">id</span>        | int(11)             | NO   | PRI | NULL              | auto_increment |</span><br><span class="line">| name      | varchar(10)         | YES  |     | NULL              |                |</span><br><span class="line">| age       | tinyint(3) unsigned | NO   |     | NULL              |                |</span><br><span class="line">| gender    | enum(<span class="string">&#x27;f&#x27;</span>,<span class="string">&#x27;m&#x27;</span>)       | NO   |     | m                 |                |</span><br><span class="line">| phone     | char(11)            | NO   | UNI | NULL              |                |</span><br><span class="line">| come_time | datetime            | NO   |     | CURRENT_TIMESTAMP |                |</span><br><span class="line">| zls       | char(2)             | YES  |     | NULL              |                |</span><br><span class="line">+-----------+---------------------+------+-----+-------------------+----------------+</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ å­—æ®µï¼ˆæ·»åŠ åœ¨æŒ‡å®šå­—æ®µåé¢ï¼‰</span></span><br><span class="line">mysql &gt; alter table stu10 add abc char(11) after phone;</span><br><span class="line">root@student &gt; desc stu;</span><br><span class="line">+-----------+---------------------+------+-----+-------------------+----------------+</span><br><span class="line">| Field     | Type                | Null | Key | Default           | Extra          |</span><br><span class="line">+-----------+---------------------+------+-----+-------------------+----------------+</span><br><span class="line">| <span class="built_in">id</span>        | int(11)             | NO   | PRI | NULL              | auto_increment |</span><br><span class="line">| name      | varchar(10)         | YES  |     | NULL              |                |</span><br><span class="line">| age       | tinyint(3) unsigned | NO   |     | NULL              |                |</span><br><span class="line">| gender    | enum(<span class="string">&#x27;f&#x27;</span>,<span class="string">&#x27;m&#x27;</span>)       | NO   |     | m                 |                |</span><br><span class="line">| phone     | char(11)            | NO   | UNI | NULL              |                |</span><br><span class="line">| abc       | char(11)            | YES  |     | NULL              |                |</span><br><span class="line">| come_time | datetime            | NO   |     | CURRENT_TIMESTAMP |                |</span><br><span class="line">| zls       | char(2)             | YES  |     | NULL              |                |</span><br><span class="line">+-----------+---------------------+------+-----+-------------------+----------------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ å­—æ®µï¼ˆå°†å­—æ®µæ·»åŠ åœ¨æœ€å‰é¢ï¼‰</span></span><br><span class="line">mysql &gt; alter table stu10 add sss char(11) first;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤å­—æ®µ</span></span><br><span class="line">mysql &gt; alter table stu10 drop lzd;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹å­—æ®µ modify change</span></span><br><span class="line"><span class="comment">## åªèƒ½ä¿®æ”¹å­—æ®µçš„æ•°æ®ç±»å‹å’Œçº¦æŸ</span></span><br><span class="line">mysql &gt; alter table stu modify name varchar(10);</span><br><span class="line"></span><br><span class="line"><span class="comment">## å¯ä»¥ä¿®æ”¹å­—æ®µç±»å‹å’Œçº¦æŸå¤–è¿˜èƒ½ä¿®æ”¹å­—æ®µå</span></span><br><span class="line">mysql &gt; alter table stu10 change lyk kangkang varchar(20);</span><br></pre></td></tr></table></figure><h3 id="DML-æ•°æ®æ“ä½œè¯­è¨€">DML æ•°æ®æ“ä½œè¯­è¨€</h3><ul><li>Data Manipulation Language       (  insert,delete,update  )</li></ul><h4 id="å¢åˆ æ”¹æ“ä½œ">å¢åˆ æ”¹æ“ä½œ</h4><p><code>å¢</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#æ’å…¥ä¹‹å‰æŸ¥çœ‹å­—æ®µ</span><br><span class="line"></span><br><span class="line">#insert</span><br><span class="line">#è§„èŒƒç”¨æ³•ï¼Œæ’å…¥æ•°æ®</span><br><span class="line">mysql&gt; insert into stu(classid,birth.sname,sage,sgender,comtime,telnum,qq) values(&#x27;linux01&#x27;,1,NOW(),&#x27;zhangsan&#x27;,20,&#x27;m&#x27;,NOW(),110,123456);</span><br><span class="line"></span><br><span class="line">#æ’å…¥å¤šæ¡æ•°æ®</span><br><span class="line">mysql&gt; insert into stu(classid,birth.sname,sage,sgender,comtime,telnum,qq) values(&#x27;linux01&#x27;,1,NOW(),&#x27;zhangsan&#x27;,20,&#x27;m&#x27;,NOW(),110,123456),(&#x27;linux02&#x27;,2,NOW(),&#x27;zhangsi&#x27;,21,&#x27;f&#x27;,NOW(),111,1234567);</span><br></pre></td></tr></table></figure><p><code>åˆ </code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#delete</span><br><span class="line"></span><br><span class="line">#è§„èŒƒåˆ é™¤ï¼ˆå±é™©ï¼‰</span><br><span class="line">mysql&gt; delete from student where sid=3;</span><br><span class="line"></span><br><span class="line">#DDLåˆ é™¤è¡¨ ï¼ˆå±é™©ï¼‰</span><br><span class="line">mysql&gt; truncate table student;</span><br></pre></td></tr></table></figure><p><code>æ”¹</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#update  </span><br><span class="line"></span><br><span class="line">#è§„èŒƒupdateä¿®æ”¹</span><br><span class="line">mysql&gt; update student set sgender=&#x27;f&#x27; where sid=1;</span><br><span class="line"></span><br><span class="line">#å¦‚æœéè¦å…¨è¡¨ä¿®æ”¹</span><br><span class="line">mysql&gt; update student set sgender=&#x27;f&#x27; where 1=1;</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨update-ä¼ªåˆ é™¤">ä½¿ç”¨update ä¼ªåˆ é™¤</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1ï¼‰é¢å¤–æ·»åŠ ä¸€ä¸ªçŠ¶æ€åˆ—(å‰ç«¯åšåˆ¤æ–­ï¼Œ0ä»£è¡¨æ²¡æœ‰å……é’±ï¼Œ1ä»£è¡¨å……é’±)</span><br><span class="line">mysql&gt; alter table student.stu add status enum(0,1) default 1 comment &#x27;0ä»£è¡¨æ²¡æœ‰ï¼Œ1ä»£è¡¨æœ‰&#x27;;</span><br><span class="line"></span><br><span class="line">2ï¼‰ä½¿ç”¨update</span><br><span class="line">mysql&gt; update student.stu set status=&#x27;0&#x27; where sid=1;</span><br><span class="line"></span><br><span class="line">3ï¼‰åº”ç”¨æŸ¥è¯¢å­˜åœ¨çš„æ•°æ®</span><br><span class="line">mysql&gt; select * from student where status=1;</span><br></pre></td></tr></table></figure><h3 id="DCLæ•°æ®æ§åˆ¶è¯­è¨€">DCLæ•°æ®æ§åˆ¶è¯­è¨€</h3><p>ï¼ˆData Control Language)       ( grant )</p><h4 id="grant">grant</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æˆæƒroot@10.0.0.51ç”¨æˆ·æ‰€æœ‰æƒé™</span></span><br><span class="line">mysql&gt; grant all on *.* to root@<span class="string">&#x27;10.0.0.51&#x27;</span> identified by <span class="string">&#x27;oldboy123&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">#æˆæƒè¶…çº§ç®¡ç†å‘˜</span></span><br><span class="line">mysql&gt; grant all on *.* to root@<span class="string">&#x27;10.0.0.51&#x27;</span> identified by <span class="string">&#x27;oldboy123&#x27;</span> with grant option;</span><br><span class="line">with grant optionï¼šèµ‹äºˆç”¨æˆ·grantæƒé™</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#å…¶ä»–å‚æ•°ï¼ˆæ‰©å±•ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#max_queries_per_hourï¼šä¸€ä¸ªç”¨æˆ·æ¯å°æ—¶å¯å‘å‡ºçš„æŸ¥è¯¢æ•°é‡</span></span><br><span class="line">grant insert,update,<span class="keyword">select</span> on zls.* to dev3@<span class="string">&#x27;%&#x27;</span> identified by <span class="string">&#x27;123&#x27;</span> with max_queries_per_hour 3;</span><br><span class="line"></span><br><span class="line"><span class="comment">#max_updates_per_hourï¼šä¸€ä¸ªç”¨æˆ·æ¯å°æ—¶å¯å‘å‡ºçš„æ›´æ–°æ•°é‡</span></span><br><span class="line">grant insert,update,<span class="keyword">select</span> on zls.* to dev4@<span class="string">&#x27;%&#x27;</span> identified by <span class="string">&#x27;123&#x27;</span> with max_updates_per_hour 1;</span><br><span class="line"></span><br><span class="line"><span class="comment">#max_connetions_per_hourï¼šä¸€ä¸ªç”¨æˆ·æ¯å°æ—¶å¯è¿æ¥åˆ°æœåŠ¡å™¨çš„æ¬¡æ•°   å¤šä¸ªé™åˆ¶å¯ä»¥ä½¿ç”¨ä¸€ä¸ªwith</span></span><br><span class="line">grant insert,update,<span class="keyword">select</span></span><br><span class="line">on zls.*</span><br><span class="line">to dev5@<span class="string">&#x27;%&#x27;</span></span><br><span class="line">identified by <span class="string">&#x27;123&#x27;</span></span><br><span class="line">with max_queries_per_hour 3</span><br><span class="line">max_updates_per_hour 1</span><br><span class="line">max_connections_per_hour 1;</span><br><span class="line"></span><br><span class="line"><span class="comment">#max_user_connetionsï¼šå…è®¸åŒæ—¶è¿æ¥æ•°é‡</span></span><br><span class="line">grant insert,update,<span class="keyword">select</span></span><br><span class="line">on zls.*</span><br><span class="line">to dev6@<span class="string">&#x27;%&#x27;</span></span><br><span class="line">identified by <span class="string">&#x27;123&#x27;</span></span><br><span class="line">with max_user_connections 1;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="revokeå›æ”¶æƒé™">revokeå›æ”¶æƒé™</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#æ”¶å›selectæƒé™</span><br><span class="line">mysql&gt; revoke select on *.* from root@&#x27;10.0.0.51&#x27;;</span><br><span class="line"></span><br><span class="line">#æŸ¥çœ‹æƒé™</span><br><span class="line">root@(none) &gt; show grants for root@&#x27;localhost&#x27;;</span><br><span class="line">+---------------------------------------------------------------------+</span><br><span class="line">| Grants for root@localhost                                           |</span><br><span class="line">+---------------------------------------------------------------------+</span><br><span class="line">| GRANT ALL PRIVILEGES ON *.* TO &#x27;root&#x27;@&#x27;localhost&#x27; WITH GRANT OPTION |</span><br><span class="line">| GRANT PROXY ON &#x27;&#x27;@&#x27;&#x27; TO &#x27;root&#x27;@&#x27;localhost&#x27; WITH GRANT OPTION        |</span><br><span class="line">+---------------------------------------------------------------------+</span><br></pre></td></tr></table></figure><h3 id="DQLæ•°æ®æŸ¥è¯¢è¯­è¨€">DQLæ•°æ®æŸ¥è¯¢è¯­è¨€</h3><p><strong>Data Query Language</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä¸‹è½½worldåº“æµ‹è¯• </span></span><br><span class="line">[root@db01 ~]# wget http://test.driverzeng.com/MySQL_File/world.sql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.å¯¼å…¥æ•°æ®</span></span><br><span class="line">1)[root@db01 ~]# mysql -uroot -p123 &lt; world.sql</span><br><span class="line">2)[root@db01 ~]# <span class="built_in">cat</span> world.sql|mysql -uroot -p123</span><br><span class="line">3)mysql&gt; <span class="built_in">source</span> /root/world.sql</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹æœ‰å¤šå°‘è¡¨</span></span><br><span class="line">root@(none) &gt; show tables from world;</span><br><span class="line">+-----------------+</span><br><span class="line">| Tables_in_world |</span><br><span class="line">+-----------------+</span><br><span class="line">| city            |</span><br><span class="line">| country         |</span><br><span class="line">| countrylanguage |</span><br><span class="line">+-----------------+</span><br><span class="line">3 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹è¡¨ç»“æ„</span></span><br><span class="line">root@(none) &gt; desc world.city;</span><br><span class="line">+-------------+----------+------+-----+---------+----------------+</span><br><span class="line">| Field       | Type     | Null | Key | Default | Extra          |</span><br><span class="line">+-------------+----------+------+-----+---------+----------------+</span><br><span class="line">| ID          | int(11)  | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| Name        | char(35) | NO   |     |         |                |</span><br><span class="line">| CountryCode | char(3)  | NO   | MUL |         |                |</span><br><span class="line">| District    | char(20) | NO   |     |         |                |</span><br><span class="line">| Population  | int(11)  | NO   |     | 0       |                |</span><br><span class="line">+-------------+----------+------+-----+---------+----------------+</span><br></pre></td></tr></table></figure><h4 id="show">show</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">show databases;<span class="comment">#æŸ¥çœ‹åº“</span></span><br><span class="line">show tables;<span class="comment">#æŸ¥çœ‹è¡¨--å·²ç»åœ¨worldåº“é‡Œ</span></span><br><span class="line">show tables from world; <span class="comment">#æŸ¥çœ‹worldåº“é‡Œçš„æ‰€æœ‰è¡¨</span></span><br><span class="line">show create database zls; <span class="comment">#æŸ¥çœ‹åˆ›å»ºåº“çš„è¯­å¥</span></span><br><span class="line">show create table zls.stu30; <span class="comment">#æŸ¥çœ‹åˆ›å»ºè¡¨çš„è¯­å¥</span></span><br><span class="line">show grants <span class="keyword">for</span> root@<span class="string">&#x27;%&#x27;</span>;  </span><br><span class="line">show variables like <span class="string">&#x27;%char%&#x27;</span>;</span><br><span class="line">show engines;<span class="comment">#æŸ¥çœ‹MySQLä¸­è‡ªå¸¦çš„å‚¨å­˜å¼•æ“</span></span><br><span class="line">show charset;<span class="comment"># MySQLæ”¯æŒçš„å­—ç¬¦é›†</span></span><br><span class="line">show collation;<span class="comment"># MySQLæ”¯æŒçš„æ ¡éªŒè§„åˆ™</span></span><br><span class="line">show processlist;<span class="comment">#æŸ¥çœ‹MySQLåå°SQLè¯­å¥æ‰§è¡ŒçŠ¶æ€</span></span><br><span class="line">show full processlist;<span class="comment">#æŸ¥çœ‹MySQLåå°SQLè¯­å¥æ‰§è¡ŒçŠ¶æ€</span></span><br><span class="line"></span><br><span class="line">desc mysql.user;<span class="comment"># desc æŸ¥çœ‹è¡¨ç»“æ„</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">root@(none) &gt; show grants <span class="keyword">for</span> root@<span class="string">&#x27;localhost&#x27;</span>;</span><br><span class="line">+---------------------------------------------------------------------+</span><br><span class="line">| Grants <span class="keyword">for</span> root@localhost                                           |</span><br><span class="line">+---------------------------------------------------------------------+</span><br><span class="line">| GRANT ALL PRIVILEGES ON *.* TO <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> WITH GRANT OPTION |</span><br><span class="line">| GRANT PROXY ON <span class="string">&#x27;&#x27;</span>@<span class="string">&#x27;&#x27;</span> TO <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> WITH GRANT OPTION        |</span><br><span class="line">+---------------------------------------------------------------------+</span><br><span class="line">2 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">root@(none) &gt; show variables like <span class="string">&#x27;%char%&#x27;</span>;</span><br><span class="line">+--------------------------+-----------------------------------+</span><br><span class="line">| Variable_name            | Value                             |</span><br><span class="line">+--------------------------+-----------------------------------+</span><br><span class="line">| character_set_client     | utf8                              |</span><br><span class="line">| character_set_connection | utf8                              |</span><br><span class="line">| character_set_database   | utf8                              |</span><br><span class="line">| character_set_filesystem | binary                            |</span><br><span class="line">| character_set_results    | utf8                              |</span><br><span class="line">| character_set_server     | utf8                              |</span><br><span class="line">| character_set_system     | utf8                              |</span><br><span class="line">| character_sets_dir       | /app/mysql-5.6.50/share/charsets/ |</span><br><span class="line">+--------------------------+-----------------------------------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹MySQLåå°SQLè¯­å¥æ‰§è¡ŒçŠ¶æ€</span></span><br><span class="line">root@(none) &gt; show processlist;</span><br><span class="line">+----+------+---------------+-------+---------+------+-------+------------------+</span><br><span class="line">| Id | User | Host          | db    | Command | Time | State | Info             |</span><br><span class="line">+----+------+---------------+-------+---------+------+-------+------------------+</span><br><span class="line">|  3 | root | 10.0.0.1:1083 | <span class="built_in">test</span>  | Sleep   | 9411 |       | NULL             |</span><br><span class="line">|  4 | root | 10.0.0.1:1084 | mysql | Sleep   | 9414 |       | NULL             |</span><br><span class="line">|  5 | root | 10.0.0.1:1095 | world | Sleep   | 9551 |       | NULL             |</span><br><span class="line">|  8 | root | localhost     | NULL  | Query   |    0 | init  | show processlist |</span><br><span class="line">+----+------+---------------+-------+---------+------+-------+------------------+</span><br></pre></td></tr></table></figure><h4 id="select">select</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"># select</span><br><span class="line">use worldï¼›è¿›å…¥worldåº“é‡Œ</span><br><span class="line"></span><br><span class="line">## å…¨è¡¨æ‰«æ (  æ…ç”¨ï¼Œè¦åŠ ä¸Šæ¡ä»¶ï¼Œå¦åˆ™æ‰€æœ‰æ•°æ®éƒ½ä¼šåŠ è½½åˆ°å†…å­˜é‡Œ)</span><br><span class="line">select * from city;</span><br><span class="line"></span><br><span class="line">## å•æ¡ä»¶æŸ¥è¯¢</span><br><span class="line">select * from city where id=10;</span><br><span class="line"></span><br><span class="line">## å¤šæ¡ä»¶æŸ¥è¯¢</span><br><span class="line">select * from city where countrycode=&#x27;CHN&#x27; or countrycode=&#x27;USA&#x27;;</span><br><span class="line"></span><br><span class="line">## æˆå‘˜æŸ¥è¯¢</span><br><span class="line">select * from city where countrycode in (&#x27;CHN&#x27;,&#x27;USA&#x27;);</span><br><span class="line"></span><br><span class="line">## è”åˆæŸ¥è¯¢</span><br><span class="line">select * from city where countrycode=&#x27;CHN&#x27; union all select * from city where countrycode=&#x27;USA&#x27;;</span><br><span class="line"></span><br><span class="line">## èŒƒå›´æŸ¥è¯¢ &lt; ã€ &gt; ã€ &gt;= ã€ &lt;= ã€ &lt;&gt; ã€ !=</span><br><span class="line">select * from city where id&lt;10;</span><br><span class="line"></span><br><span class="line">## æ¨¡ç³ŠæŸ¥è¯¢</span><br><span class="line">select * from city where countrycode like &#x27;%H%&#x27;;#åŸå¸‚ä»£ç é‡Œå«æœ‰Hçš„</span><br><span class="line">select * from city where countrycode like &#x27;H%&#x27;;#åŸå¸‚ä»£ç é‡Œä»¥Hå¼€å¤´çš„</span><br><span class="line">select * from city where countrycode like &#x27;%H&#x27;;#åŸå¸‚ä»£ç é‡Œä»¥Hç»“å°¾çš„</span><br><span class="line"></span><br><span class="line">## æ’åºæŸ¥è¯¢ order by</span><br><span class="line"># æ­£åº</span><br><span class="line">select * from city where countrycode like &#x27;H%&#x27; order by population;</span><br><span class="line"># å€’å™</span><br><span class="line">select * from city where countrycode like &#x27;H%&#x27; order by population desc;</span><br><span class="line"></span><br><span class="line">## åˆ†é¡µæŸ¥è¯¢</span><br><span class="line">select * from city limit 60;</span><br><span class="line">select * from city limit 180,60;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>ä½¿ç”¨å‡½æ•°</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">MySQLè‡ªå¸¦çš„å‡½æ•°ï¼š</span><br><span class="line">password()</span><br><span class="line">now()</span><br><span class="line">distinct()#å»é‡å‡½æ•°</span><br><span class="line"></span><br><span class="line">## åˆ†ç»„æŸ¥è¯¢ group by</span><br><span class="line"># max()</span><br><span class="line"># min()</span><br><span class="line"># avg()</span><br><span class="line"># sum()</span><br><span class="line"># count()</span><br><span class="line">1.é‡åˆ°ç»Ÿè®¡æƒ³å‡½æ•°</span><br><span class="line">2.å½¢å®¹è¯å‰groupby</span><br><span class="line">3.å‡½æ•°ä¸­å¤®æ˜¯åè¯</span><br><span class="line">4.åˆ—åselectåæ·»åŠ </span><br><span class="line"></span><br><span class="line">`ç»ƒä¹ `</span><br><span class="line"># ç»Ÿè®¡ä¸–ç•Œä¸Šæ¯ä¸ªå›½å®¶çš„æ€»äººå£æ•°</span><br><span class="line">1.é‡åˆ°ç»Ÿè®¡æƒ³å‡½æ•° sum()</span><br><span class="line">2.å½¢å®¹è¯å‰groupby group by countrycode</span><br><span class="line">3.å‡½æ•°ä¸­å¤®æ˜¯åè¯ sum(population)</span><br><span class="line">4.åˆ—åselectåæ·»åŠ  select å›½å®¶,æ€»äººå£æ•°</span><br><span class="line">select countrycode,sum(population) from city group by countrycode;</span><br><span class="line"></span><br><span class="line"># ç»Ÿè®¡ä¸­å›½å„ä¸ªçœçš„äººå£æ•°é‡(ç»ƒä¹ )</span><br><span class="line">1.é‡åˆ°ç»Ÿè®¡æƒ³å‡½æ•° sum()</span><br><span class="line">2.å½¢å®¹è¯å‰groupby groupby district</span><br><span class="line">3.å‡½æ•°ä¸­å¤®æ˜¯åè¯ sum(population)</span><br><span class="line">4.åˆ—åselectåæ·»åŠ  select countrycode,district,sum(population)</span><br><span class="line">select countrycode,district,sum(population) from city where countrycode=&#x27;CHN&#x27;</span><br><span class="line">group by district;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># ç»Ÿæ¯ä¸ªå›½å®¶çš„åŸå¸‚æ•°é‡(ç»ƒä¹ )</span><br><span class="line">1.é‡åˆ°ç»Ÿè®¡æƒ³å‡½æ•° count()</span><br><span class="line">2.å½¢å®¹è¯å‰groupby group by countrycode</span><br><span class="line">3.å‡½æ•°ä¸­å¤®æ˜¯åè¯ count(name)</span><br><span class="line">4.åˆ—åselectåæ·»åŠ  select countrycode,count(name)</span><br><span class="line">select countrycode,count(name) from city group by countrycode order by count(name);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># ç»Ÿæ¯ä¸ªå›½å®¶çš„æ¯ä¸ªçœçš„åŸå¸‚æ•°é‡(ç»ƒä¹ )</span><br><span class="line">select CountryCode,District,count(Name) from city group by District order by count(name);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># ç»Ÿä¸­å›½çš„æ¯ä¸ªçœçš„åŸå¸‚æ•°é‡(ç»ƒä¹ )</span><br><span class="line">select CountryCode,District,count(Name) from city where CountryCode=&#x27;CHN&#x27; group by District order by count(name);</span><br><span class="line"></span><br><span class="line">#ç»Ÿè®¡æ¯ä¸ªå›½å®¶æœ€å¤šäººæ•°çš„çœä»½</span><br><span class="line">select CountryCode,District,max(population) from city group by population;</span><br><span class="line"></span><br><span class="line">#ç»Ÿè®¡ä¸­å›½æ¯ä¸ªçœçš„äººæ•°</span><br><span class="line">select CountryCode, District,sum(population) from city where CountryCode=&#x27;CHN&#x27; group by District;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#ä¼ ç»Ÿè¿æ¥</span><br><span class="line">select country.name as å›½å®¶å,city.name as åŸå¸‚å,countrylanguage.language as å›½å®¶è¯­è¨€,city.population as åŸå¸‚äººå£</span><br><span class="line">from city,country,countrylanguage</span><br><span class="line">where city.CountryCode=country.code and country.code=countrylanguage.CountryCode</span><br><span class="line">and city.population&lt;100;</span><br><span class="line"></span><br><span class="line">#selectè‡ªè¿æ¥ï¼ˆå¿…é¡»å¾—æœ‰ç­‰ä»·æ¡ä»¶ï¼‰</span><br><span class="line">select country.name as å›½å®¶å,city.name as åŸå¸‚å</span><br><span class="line">from city natural join country</span><br><span class="line">where city.population&lt;100;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">select country.name,city.name,countrylanguage.language,city.population</span><br><span class="line">from city  join (country,countrylanguage)</span><br><span class="line">on city.CountryCode=country.code and country.code=countrylanguage.CountryCode</span><br><span class="line">where city.population&lt;100;</span><br></pre></td></tr></table></figure><h4 id="select-è¿è¡¨æŸ¥è¯¢">select-è¿è¡¨æŸ¥è¯¢</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ç®€å•è¿è¡¨æŸ¥è¯¢</span></span><br><span class="line">root@student &gt; create table stu(<span class="built_in">id</span> int,name varchar(10));</span><br><span class="line">root@student &gt; insert into stu values(1,<span class="string">&#x27;zhang3&#x27;</span>),(2,<span class="string">&#x27;li4&#x27;</span>),(3,<span class="string">&#x27;wang5&#x27;</span>);</span><br><span class="line"></span><br><span class="line">root@student &gt; create table score(<span class="built_in">id</span> int,mark tinyint unsigned);</span><br><span class="line">root@student &gt; insert into score values(1,80),(2,90),(3,100);</span><br><span class="line"></span><br><span class="line">root@student &gt; <span class="keyword">select</span> * from stu;</span><br><span class="line">+------+--------+</span><br><span class="line">| <span class="built_in">id</span>   | name   |</span><br><span class="line">+------+--------+</span><br><span class="line">|    1 | zhang3 |</span><br><span class="line">|    2 | li4    |</span><br><span class="line">|    3 | wang5  |</span><br><span class="line">+------+--------+</span><br><span class="line">3 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line">root@student &gt; <span class="keyword">select</span> * from score;</span><br><span class="line">+------+------+</span><br><span class="line">| <span class="built_in">id</span>   | mark |</span><br><span class="line">+------+------+</span><br><span class="line">|    1 |   80 |</span><br><span class="line">|    2 |   90 |</span><br><span class="line">|    3 |  100 |</span><br><span class="line">+------+------+</span><br><span class="line">3 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥è¯¢zhang3åŒå­¦çš„æˆç»©</span></span><br><span class="line">root@student &gt; <span class="keyword">select</span> stu.name,score.mark </span><br><span class="line">from stu,score</span><br><span class="line"><span class="built_in">where</span> stu.id=score.id</span><br><span class="line">and stu.name=<span class="string">&#x27;zhang3&#x27;</span>;</span><br><span class="line">+--------+------+</span><br><span class="line">| name   | mark |</span><br><span class="line">+--------+------+</span><br><span class="line">| zhang3 |   80 |</span><br><span class="line">+--------+------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><p><strong>==ä¼ ç»ŸæŸ¥è¯¢==</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŸ¥çœ‹è¡¨ç»“æ„</span></span><br><span class="line"></span><br><span class="line">root@world &gt; desc city;</span><br><span class="line">+-------------+----------+------+-----+---------+----------------+</span><br><span class="line">| Field       | Type     | Null | Key | Default | Extra          |</span><br><span class="line">+-------------+----------+------+-----+---------+----------------+</span><br><span class="line">| ID          | int(11)  | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| Name        | char(35) | NO   |     |         |                |</span><br><span class="line">| CountryCode | char(3)  | NO   | MUL |         |                |</span><br><span class="line">| District    | char(20) | NO   |     |         |                |</span><br><span class="line">| Population  | int(11)  | NO   |     | 0       |                |</span><br><span class="line">+-------------+----------+------+-----+---------+----------------+</span><br><span class="line">5 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">root@world &gt; desc country;</span><br><span class="line">+----------------+---------------------------------+------+-----+---------+-------+</span><br><span class="line">| Field          | Type                            | Null | Key | Default | Extra |</span><br><span class="line">+----------------+---------------------------------+------+-----+---------+-------+</span><br><span class="line">| Code           | char(3)                         | NO   | PRI |         |       |</span><br><span class="line">| Name           | char(52)                        | NO   |     |         |       |</span><br><span class="line">| Continent      | enum(<span class="string">&#x27;Asia&#x27;</span>,<span class="string">&#x27;Europe&#x27;</span>, America<span class="string">&#x27;) | NO   |     | Asia    |       |</span></span><br><span class="line"><span class="string">| Region         | char(26)                        | NO   |     |         |       |</span></span><br><span class="line"><span class="string">| SurfaceArea    | float(10,2)                     | NO   |     | 0.00    |       |</span></span><br><span class="line"><span class="string">| IndepYear      | smallint(6)                     | YES  |     | NULL    |       |</span></span><br><span class="line"><span class="string">| Population     | int(11)                         | NO   |     | 0       |       |</span></span><br><span class="line"><span class="string">| LifeExpectancy | float(3,1)                      | YES  |     | NULL    |       |</span></span><br><span class="line"><span class="string">| GNP            | float(10,2)                     | YES  |     | NULL    |       |</span></span><br><span class="line"><span class="string">| GNPOld         | float(10,2)                     | YES  |     | NULL    |       |</span></span><br><span class="line"><span class="string">| LocalName      | char(45)                        | NO   |     |         |       |</span></span><br><span class="line"><span class="string">| GovernmentForm | char(45)                        | NO   |     |         |       |</span></span><br><span class="line"><span class="string">| HeadOfState    | char(60)                        | YES  |     | NULL    |       |</span></span><br><span class="line"><span class="string">| Capital        | int(11)                         | YES  |     | NULL    |       |</span></span><br><span class="line"><span class="string">| Code2          | char(2)                         | NO   |     |         |       |</span></span><br><span class="line"><span class="string">+----------------+---------------------------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">root@world &gt; desc countrylanguage;</span></span><br><span class="line"><span class="string">+-------------+---------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="string">| Field       | Type          | Null | Key | Default | Extra |</span></span><br><span class="line"><span class="string">+-------------+---------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="string">| CountryCode | char(3)       | NO   | PRI |         |       |</span></span><br><span class="line"><span class="string">| Language    | char(30)      | NO   | PRI |         |       |</span></span><br><span class="line"><span class="string">| IsOfficial  | enum(&#x27;</span>T<span class="string">&#x27;,&#x27;</span>F<span class="string">&#x27;) | NO   |     | F       |       |</span></span><br><span class="line"><span class="string">| Percentage  | float(4,1)    | NO   |     | 0.0     |       |</span></span><br><span class="line"><span class="string">+-------------+---------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure><p><strong>æŸ¥è¯¢ä¸–ç•Œä¸Šå°äº100äººå£çš„åŸå¸‚æ˜¯å“ªä¸ªå›½å®¶çš„ï¼Ÿ</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">å›½å®¶ååŸå¸‚ååŸå¸‚äººå£æ•°</span><br><span class="line"></span><br><span class="line">root@world &gt; <span class="keyword">select</span> country.name,city.name,city.population</span><br><span class="line">from country,city </span><br><span class="line"><span class="built_in">where</span> city.CountryCode=country.code </span><br><span class="line">and city.population&lt;100;</span><br><span class="line">+----------+-----------+------------+</span><br><span class="line">| name     | name      | population |</span><br><span class="line">+----------+-----------+------------+</span><br><span class="line">| Pitcairn | Adamstown |         42 |</span><br><span class="line">+----------+-----------+------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line">root@world &gt; <span class="keyword">select</span> country.name as å›½å®¶å,city.name as åŸå¸‚å,city.population as åŸå¸‚äººå£</span><br><span class="line">from country,city </span><br><span class="line"><span class="built_in">where</span> city.CountryCode=country.code </span><br><span class="line">and city.population&lt;100;</span><br><span class="line">+-----------+-----------+--------------+</span><br><span class="line">| å›½å®¶å    | åŸå¸‚å    | åŸå¸‚äººå£       |</span><br><span class="line">+-----------+-----------+--------------+</span><br><span class="line">| Pitcairn  | Adamstown |           42 |</span><br><span class="line">+-----------+-----------+--------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><p><strong>ä¸–ç•Œä¸Šå°äº100äººå£çš„åŸå¸‚è¯´ä»€ä¹ˆè¯­è¨€ï¼Ÿ</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä¸‰è¡¨è”æŸ¥</span></span><br><span class="line">å›½å®¶åï¼ŒåŸå¸‚åï¼Œè¯­è¨€ï¼Œäººå£</span><br><span class="line"></span><br><span class="line">root@world &gt; <span class="keyword">select</span> country.name,city.name,countrylanguage.language,city.population </span><br><span class="line">from country,city,countrylanguage </span><br><span class="line"><span class="built_in">where</span> city.countrycode=country.code and country.code=countrylanguage.countrycode </span><br><span class="line">and city.population&lt;100;</span><br><span class="line">+----------+-----------+-------------+------------+</span><br><span class="line">| name     | name      | language    | population |</span><br><span class="line">+----------+-----------+-------------+------------+</span><br><span class="line">| Pitcairn | Adamstown | Pitcairnese |         42 |</span><br><span class="line">+----------+-----------+-------------+------------+</span><br></pre></td></tr></table></figure><p><strong>==selectè‡ªè¿æ¥==</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è‡ªåŠ¨å…³è”å¤šå¼ è¡¨çš„æ•°æ®ï¼ˆè‡ªåŠ¨å¸®æˆ‘ä»¬æ‰¾åˆ°ç­‰ä»·æ¡ä»¶ï¼‰ç­‰ä»·æ¡ä»¶çš„å­—æ®µåå¿…é¡»ç›¸åŒï¼Œæ¯”å¦‚studentåº“é‡Œè¡¨çš„ID</span></span><br><span class="line"><span class="comment">#æŸ¥çœ‹è¡¨ç»“æ„</span></span><br><span class="line">root@student &gt; desc stu;</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line">| <span class="built_in">id</span>    | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">| name  | varchar(10) | YES  |     | NULL    |       |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span><br><span class="line"></span><br><span class="line">root@student &gt; desc score;</span><br><span class="line">+-------+---------------------+------+-----+---------+-------+</span><br><span class="line">| Field | Type                | Null | Key | Default | Extra |</span><br><span class="line">+-------+---------------------+------+-----+---------+-------+</span><br><span class="line">| <span class="built_in">id</span>    | int(11)             | YES  |     | NULL    |       |</span><br><span class="line">| mark  | tinyint(3) unsigned | YES  |     | NULL    |       |</span><br><span class="line">+-------+---------------------+------+-----+---------+-------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥è¯¢zhang3åŒå­¦çš„æˆç»©ï¼Œä½¿ç”¨è‡ªè¿æ¥æŸ¥è¯¢</span></span><br><span class="line"><span class="keyword">select</span> stu.name,score.mark</span><br><span class="line">from stu natural <span class="built_in">join</span> score</span><br><span class="line"><span class="built_in">where</span> stu.name=<span class="string">&#x27;zhang3&#x27;</span>;</span><br><span class="line">+--------+------+</span><br><span class="line">| name   | mark |</span><br><span class="line">+--------+------+</span><br><span class="line">| zhang3 |   80 |</span><br><span class="line">+--------+------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸–ç•Œä¸Šå°äº100äººçš„äººå£åŸå¸‚æ˜¯å“ªä¸ªå›½å®¶çš„è¯´çš„ä»€ä¹ˆè¯­è¨€ï¼Ÿ</span></span><br><span class="line">root@world &gt; <span class="keyword">select</span> city.countrycode,city.name,city.population,countrylanguage.language</span><br><span class="line">from countrylanguage natural <span class="built_in">join</span> city</span><br><span class="line"><span class="built_in">where</span> city.population&lt;100;</span><br><span class="line">+-------------+-----------+------------+-------------+</span><br><span class="line">| countrycode | name      | population | language    |</span><br><span class="line">+-------------+-----------+------------+-------------+</span><br><span class="line">| PCN         | Adamstown |         42 | Pitcairnese |</span><br><span class="line">+-------------+-----------+------------+-------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><p><strong>==å†…è¿æ¥(inner join)==</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## è¯­æ³•ï¼štb1 join tb2 on ç­‰ä»·æ¡ä»¶</span></span><br><span class="line"><span class="comment">## è¯­æ³•ï¼štb1 join tb2 on ç­‰ä»·æ¡ä»¶1 join tb3 on ç­‰ä»·æ¡ä»¶2</span></span><br><span class="line"></span><br><span class="line">inner <span class="built_in">join</span> on <span class="comment"># å†…è¿æ¥</span></span><br><span class="line"><span class="comment"># ä¸–ç•Œä¸Šå°äº100äººçš„äººå£åŸå¸‚æ˜¯å“ªä¸ªå›½å®¶çš„ï¼Ÿ</span></span><br><span class="line"></span><br><span class="line">å›½å®¶åï¼ŒåŸå¸‚åï¼ŒåŸå¸‚äººå£</span><br><span class="line"></span><br><span class="line">root@world &gt; <span class="keyword">select</span> country.name,city.name,city.population</span><br><span class="line">from country <span class="built_in">join</span> city</span><br><span class="line">on country.code=city.countrycode</span><br><span class="line"><span class="built_in">where</span> city.population&lt;100;</span><br><span class="line">+----------+-----------+------------+</span><br><span class="line">| name     | name      | population |</span><br><span class="line">+----------+-----------+------------+</span><br><span class="line">| Pitcairn | Adamstown |         42 |</span><br><span class="line">+----------+-----------+------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸–ç•Œä¸Šå°äº100äººçš„äººå£åŸå¸‚æ˜¯å“ªä¸ªå›½å®¶çš„è¯´çš„ä»€ä¹ˆè¯­è¨€ï¼Ÿ</span></span><br><span class="line"></span><br><span class="line">root@world &gt; <span class="keyword">select</span> country.name,city.name,city.population,countrylanguage.language</span><br><span class="line">from country <span class="built_in">join</span> city</span><br><span class="line">on country.code=city.countrycode</span><br><span class="line"><span class="built_in">join</span> countrylanguage</span><br><span class="line">on countrylanguage.countrycode=city.countrycode</span><br><span class="line"><span class="built_in">where</span> city.population&lt;100;</span><br><span class="line"></span><br><span class="line">+----------+-----------+------------+-------------+</span><br><span class="line">| name     | name      | population | language    |</span><br><span class="line">+----------+-----------+------------+-------------+</span><br><span class="line">| Pitcairn | Adamstown |         42 | Pitcairnese |</span><br><span class="line">+----------+-----------+------------+-------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.01 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>==selectå¤–è¿æ¥==</strong></p><p><strong>å·¦å¤–è¿æ¥</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">left outer join</span><br><span class="line">root@world &gt; select city.name,city.countrycode,country.name</span><br><span class="line">from city left join country </span><br><span class="line">on city.countrycode=country.code and</span><br><span class="line">city.population&lt;100 limit 10;</span><br><span class="line">+----------------+-------------+------+</span><br><span class="line">| name           | countrycode | name |</span><br><span class="line">+----------------+-------------+------+</span><br><span class="line">| Kabul          | AFG         | NULL |</span><br><span class="line">| Qandahar       | AFG         | NULL |</span><br><span class="line">| Herat          | AFG         | NULL |</span><br><span class="line">| Mazar-e-Sharif | AFG         | NULL |</span><br><span class="line">| Amsterdam      | NLD         | NULL |</span><br><span class="line">| Rotterdam      | NLD         | NULL |</span><br><span class="line">| Haag           | NLD         | NULL |</span><br><span class="line">| Utrecht        | NLD         | NULL |</span><br><span class="line">| Eindhoven      | NLD         | NULL |</span><br><span class="line">| Tilburg        | NLD         | NULL |</span><br><span class="line">+----------------+-------------+------+</span><br><span class="line">10 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">left join</span><br><span class="line">åªæ˜¾ç¤ºå·¦è¾¹cityä¿¡æ¯</span><br><span class="line">=</span><br></pre></td></tr></table></figure><p><strong>å³å¤–è¿æ¥</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">right outer join</span><br><span class="line">root@world&gt;  select city.name,city.countrycode,country.name</span><br><span class="line">from city right join country on city.countrycode=country.code and</span><br><span class="line">city.population&lt;100 limit 10;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">root@world &gt; select city.name,city.countrycode,country.name</span><br><span class="line">from city right join country </span><br><span class="line">on city.countrycode=country.code and</span><br><span class="line">city.population&lt;100 limit 10;</span><br><span class="line">+------+-------------+----------------------+</span><br><span class="line">| name | countrycode | name                 |</span><br><span class="line">+------+-------------+----------------------+</span><br><span class="line">| NULL | NULL        | Aruba                |</span><br><span class="line">| NULL | NULL        | Afghanistan          |</span><br><span class="line">| NULL | NULL        | Angola               |</span><br><span class="line">| NULL | NULL        | Anguilla             |</span><br><span class="line">| NULL | NULL        | Albania              |</span><br><span class="line">| NULL | NULL        | Andorra              |</span><br><span class="line">| NULL | NULL        | Netherlands Antilles |</span><br><span class="line">| NULL | NULL        | United Arab Emirates |</span><br><span class="line">| NULL | NULL        | Argentina            |</span><br><span class="line">| NULL | NULL        | Armenia              |</span><br><span class="line">+------+-------------+----------------------+</span><br><span class="line">10 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">åªæ˜¾ç¤ºå³è¾¹countryä¿¡æ¯</span><br><span class="line">right join</span><br></pre></td></tr></table></figure><h3 id="è¿è¡¨æŸ¥è¯¢ç»ƒä¹ ">è¿è¡¨æŸ¥è¯¢ç»ƒä¹ </h3><h4 id="åˆ›å»ºåº“-è¡¨">åˆ›å»ºåº“ &amp; è¡¨</h4><ul><li><p>åº“Linux</p></li><li><p>è¡¨ï¼šstudent å­¦ç”Ÿè¡¨</p></li></ul><table><thead><tr><th>å­—æ®µ</th><th>æ•°æ®ç±»å‹è¦æ±‚</th><th>æ˜¯å¦ä¸ºç©º</th><th>æ³¨é‡Š</th></tr></thead><tbody><tr><td>sno</td><td>æœ€å¤š20ä½</td><td>å¦</td><td>å­¦å·</td></tr><tr><td>sname</td><td>å¯å˜é•¿</td><td>å¦</td><td>å­¦ç”Ÿå§“å</td></tr><tr><td>sage</td><td>æœ€å°æ•´æ•°ï¼Œéè´Ÿæ•°</td><td>å¦</td><td>å­¦ç”Ÿå¹´é¾„</td></tr><tr><td>ssex</td><td>0,1</td><td>å¦</td><td>å­¦ç”Ÿæ€§åˆ«ï¼ˆ1æ˜¯ç”·ï¼Œ0æ˜¯å¥³ï¼Œé»˜è®¤ç”·ï¼‰</td></tr><tr><td>sbirthday</td><td>æ—¶é—´ç±»å‹</td><td>é»˜è®¤ä¸ºç©º</td><td>å­¦ç”Ÿç”Ÿæ—¥</td></tr><tr><td>class</td><td>å¯å˜é•¿</td><td>å¦</td><td>å­¦ç”Ÿç­çº§</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">root@world &gt; create database linux;</span><br><span class="line">root@world &gt; use linux</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ›å»ºè¡¨</span></span><br><span class="line">create table linux.student(</span><br><span class="line">sno bigint(20) primary key auto_increment comment <span class="string">&#x27;å­¦ç”Ÿå­¦å·&#x27;</span>,</span><br><span class="line">sname varchar(10) not null comment <span class="string">&#x27;å­¦ç”Ÿå§“å&#x27;</span>,</span><br><span class="line">sage tinyint unsigned not null comment <span class="string">&#x27;å­¦ç”Ÿå¹´é¾„&#x27;</span>,</span><br><span class="line">ssex enum(<span class="string">&#x27;0&#x27;</span>,<span class="string">&#x27;1&#x27;</span>) not null default <span class="string">&#x27;1&#x27;</span> comment <span class="string">&#x27;å­¦ç”Ÿæ€§åˆ«ï¼ˆ1æ˜¯ç”·ï¼Œ0æ˜¯å¥³ï¼‰é»˜è®¤ä¸ºç”·ï¼‰&#x27;</span>,</span><br><span class="line">sbirthday datetime  comment <span class="string">&#x27;å­¦ç”Ÿç”Ÿæ—¥&#x27;</span>,</span><br><span class="line">class varchar(10) not null  comment <span class="string">&#x27;å­¦ç”Ÿç­çº§&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ’å…¥æ•°æ®</span></span><br><span class="line">insert student (sname,sage,ssex,class)</span><br><span class="line">values(<span class="string">&#x27;å°æ˜&#x27;</span>,18,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;1ç­&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;ææ˜&#x27;</span>,20,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;1ç­&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;å°çº¢&#x27;</span>,20,<span class="string">&#x27;0&#x27;</span>,<span class="string">&#x27;2ç­&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;å°ç‹&#x27;</span>,21,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;1ç­&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;å°è”¡&#x27;</span>,19,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2ç­&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;å°æ&#x27;</span>,21,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;1ç­&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;å°ä¸½&#x27;</span>,20,<span class="string">&#x27;0&#x27;</span>,<span class="string">&#x27;2ç­&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹è¡¨</span></span><br><span class="line">root@linux &gt; <span class="keyword">select</span> * from student <span class="built_in">where</span> 1=1;</span><br><span class="line">+-----+--------+------+------+-----------+-------+</span><br><span class="line">| sno | sname  | sage | ssex | sbirthday | class |</span><br><span class="line">+-----+--------+------+------+-----------+-------+</span><br><span class="line">|   1 | å°æ˜   |   18 | 1    | NULL      | 1ç­   |</span><br><span class="line">|   2 | ææ˜   |   20 | 1    | NULL      | 1ç­   |</span><br><span class="line">|   3 | å°çº¢   |   20 | 0    | NULL      | 2ç­   |</span><br><span class="line">|   4 | å°ç‹   |   21 | 1    | NULL      | 1ç­   |</span><br><span class="line">|   5 | å°è”¡   |   19 | 1    | NULL      | 2ç­   |</span><br><span class="line">|   6 | å°æ   |   21 | 1    | NULL      | 1ç­   |</span><br><span class="line">|   7 | å°ä¸½   |   20 | 0    | NULL      | 2ç­   |</span><br><span class="line">+-----+--------+------+------+-----------+-------+</span><br><span class="line">7 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><ul><li>courseè¡¨  è¯¾ç¨‹è¡¨</li></ul><table><thead><tr><th>å­—æ®µ</th><th>æ•°æ®ç±»å‹è¦æ±‚</th><th>æ˜¯å¦ä¸ºç©º</th><th>æ³¨é‡Š</th></tr></thead><tbody><tr><td>cno</td><td>æœ€å¤š20ä½</td><td>å¦</td><td>è¯¾ç¨‹å·ï¼ˆä¸»é”®ï¼‰</td></tr><tr><td>cname</td><td>å¯å˜é•¿</td><td>å¦</td><td>è¯¾ç¨‹åç§°</td></tr><tr><td>tno</td><td>æœ€å¤š3ä½</td><td>å¦</td><td>æ•™å¸ˆç¼–å·</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åˆ›å»ºèƒ½è¯¾ç¨‹è¡¨</span></span><br><span class="line">create table course(</span><br><span class="line">cno bigint(20) primary key auto_increment comment <span class="string">&#x27;è¯¾ç¨‹å·&#x27;</span>,</span><br><span class="line">cname varchar(10) not null comment <span class="string">&#x27;è¯¾ç¨‹åç§°&#x27;</span>,</span><br><span class="line">tno int(3) zerofill unsigned not null comment <span class="string">&#x27;æ•™å¸ˆç¼–å·&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ’å…¥æ•°æ®</span></span><br><span class="line">insert into course (cname,tno)</span><br><span class="line">values(<span class="string">&#x27;è‹±è¯­&#x27;</span>,<span class="string">&#x27;1&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;æ•°å­¦&#x27;</span>,<span class="string">&#x27;2&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;è¯­æ–‡&#x27;</span>,<span class="string">&#x27;3&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹è¡¨æ•°æ®</span></span><br><span class="line">root@linux &gt; <span class="keyword">select</span> * from course <span class="built_in">where</span> 1=1;</span><br><span class="line">+-----+--------+-----+</span><br><span class="line">| cno | cname  | tno |</span><br><span class="line">+-----+--------+-----+</span><br><span class="line">|   1 | è‹±è¯­   | 001 |</span><br><span class="line">|   2 | æ•°å­¦   | 002 |</span><br><span class="line">|   3 | è¯­æ–‡   | 003 |</span><br><span class="line">+-----+--------+-----+</span><br><span class="line">3 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><ul><li>score æˆç»©è¡¨</li></ul><table><thead><tr><th>å­—æ®µ</th><th>æ•°æ®ç±»å‹è¦æ±‚</th><th>æ˜¯å¦ä¸ºç©º</th><th>æ³¨é‡Š</th></tr></thead><tbody><tr><td>sno</td><td>æœ€å¤š20ä½</td><td>å¦</td><td>å­¦å·ï¼ˆä¸»é”®ï¼‰</td></tr><tr><td>cno</td><td>æœ€å¤š20ä½</td><td>å¦</td><td>è¯¾ç¨‹å·  ï¼ˆä¸»é”®ï¼‰</td></tr><tr><td>mark</td><td>æµ®ç‚¹æ•°ï¼ˆ4,1ï¼‰</td><td>å¦</td><td>æˆç»©</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åˆ›å»ºè¡¨</span></span><br><span class="line">create table score(</span><br><span class="line">sno bigint(20) auto_increment comment <span class="string">&#x27;å­¦ç”Ÿå­¦å·&#x27;</span>,</span><br><span class="line">cno bigint(20)  comment <span class="string">&#x27;è¯¾ç¨‹å·&#x27;</span>,</span><br><span class="line">mark <span class="built_in">float</span>(4,1) unsigned not null comment <span class="string">&#x27;æˆç»©&#x27;</span>,</span><br><span class="line">primary key (sno,cno)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ’å…¥æ•°æ®</span></span><br><span class="line">insert into score (cno,mark) values</span><br><span class="line">(1,90.2),</span><br><span class="line">(2,99.9),</span><br><span class="line">(3,66.6),</span><br><span class="line">(1,78.5),</span><br><span class="line">(2,93.0),</span><br><span class="line">(3,91.5),</span><br><span class="line">(2,65.5),</span><br><span class="line"></span><br><span class="line">insert into score (sno,cno,mark) values</span><br><span class="line">(1,2,82.5),</span><br><span class="line">(2,1,90.0),</span><br><span class="line">(3,2,85.5),</span><br><span class="line">(4,2,66.6),</span><br><span class="line">(5,3,72.5);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹è¡¨</span></span><br><span class="line">root@linux &gt; <span class="keyword">select</span> * from score <span class="built_in">where</span> 1=1;</span><br><span class="line">+-----+-----+------+</span><br><span class="line">| sno | cno | mark |</span><br><span class="line">+-----+-----+------+</span><br><span class="line">|   1 |   1 | 90.2 |</span><br><span class="line">|   1 |   2 | 82.5 |</span><br><span class="line">|   2 |   1 | 90.0 |</span><br><span class="line">|   2 |   2 | 99.9 |</span><br><span class="line">|   3 |   2 | 85.5 |</span><br><span class="line">|   3 |   3 | 66.6 |</span><br><span class="line">|   4 |   1 | 78.5 |</span><br><span class="line">|   4 |   2 | 66.6 |</span><br><span class="line">|   5 |   2 | 93.0 |</span><br><span class="line">|   5 |   3 | 72.5 |</span><br><span class="line">|   6 |   3 | 91.5 |</span><br><span class="line">|   7 |   2 | 65.5 |</span><br><span class="line">+-----+-----+------+</span><br><span class="line">12 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><ul><li>teacher  æ•™å¸ˆè¡¨</li></ul><table><thead><tr><th>å­—æ®µ</th><th>æ•°æ®ç±»å‹è¦æ±‚</th><th>æ˜¯å¦ä¸ºç©º</th><th>æ³¨é‡Š</th></tr></thead><tbody><tr><td>tno</td><td>æœ€å¤š3ä½</td><td>å¦</td><td>æ•™å¸ˆç¼–å·ï¼ˆä¸»é”®ï¼‰</td></tr><tr><td>tname</td><td>å¯å˜é•¿</td><td>å¦</td><td>æ•™å¸ˆå§“å</td></tr><tr><td>tage</td><td>æœ€å°æ•´æ•°ï¼Œéè´Ÿæ•°</td><td>å¦</td><td>æ•™å¸ˆå¹´é¾„</td></tr><tr><td>tsex</td><td>0,1</td><td>å¦</td><td>æ•™å¸ˆæ€§åˆ«ï¼ˆ1æ˜¯ç”·ï¼Œ0æ˜¯å¥³ï¼‰é»˜è®¤ä¸ºç”·ï¼‰</td></tr><tr><td>prof</td><td>å¯å˜é•¿</td><td>æ˜¯</td><td>æ•™å¸ˆèŒç§°</td></tr><tr><td>depart</td><td>å¯å˜é•¿</td><td>å¦</td><td>æ•™å¸ˆéƒ¨é—¨</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åˆ›å»ºè¡¨</span></span><br><span class="line"></span><br><span class="line">create table teacher(</span><br><span class="line">tno int(3) zerofill primary key not null auto_increment comment <span class="string">&#x27;æ•™å¸ˆç¼–å·&#x27;</span>,</span><br><span class="line">tname varchar(10) not null  comment <span class="string">&#x27;æ•™å¸ˆå§“å&#x27;</span>,</span><br><span class="line">tage tinyint unsigned not null comment <span class="string">&#x27;æ•™å¸ˆå¹´é¾„&#x27;</span>,</span><br><span class="line">tsex enum(<span class="string">&#x27;0&#x27;</span>,<span class="string">&#x27;1&#x27;</span>) not null default <span class="string">&#x27;1&#x27;</span> comment <span class="string">&#x27;æ•™å¸ˆæ€§åˆ«ï¼ˆ1æ˜¯ç”·ï¼Œ0æ˜¯å¥³ï¼‰é»˜è®¤ä¸ºç”·ï¼‰&#x27;</span>,</span><br><span class="line">prof varchar(5) not null  comment <span class="string">&#x27;æ•™å¸ˆèŒç§°&#x27;</span>,</span><br><span class="line">depart varchar(5) not null  comment <span class="string">&#x27;æ•™å¸ˆéƒ¨é—¨&#x27;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ’å…¥æ•°æ®</span></span><br><span class="line">insert into teacher (tno,tname,tage,tsex,prof,depart) </span><br><span class="line">values(<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;æå¯¼&#x27;</span>,30,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;æ•™å­¦æ€»ç›‘&#x27;</span>,<span class="string">&#x27;è¯­è¨€ç³»&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;å°ç§˜&#x27;</span>,30,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;åŠ©æ•™&#x27;</span>,<span class="string">&#x27;æ–‡å­¦ç³»&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;æ›¾å¯¼&#x27;</span>,30,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;æ•™å­¦æ€»ç›‘&#x27;</span>,<span class="string">&#x27;ç§‘å­¦ç³»&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;4&#x27;</span>,<span class="string">&#x27;è‹è€å¸ˆ&#x27;</span>,30,<span class="string">&#x27;0&#x27;</span>,<span class="string">&#x27;åŠ©æ•™&#x27;</span>,<span class="string">&#x27;è¿åŠ¨ç³»&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;5&#x27;</span>,<span class="string">&#x27;é»„è€å¸ˆ&#x27;</span>,28,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;åŠ©æ•™&#x27;</span>,<span class="string">&#x27;æ–‡å­¦ç³»&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹æ•°æ®</span></span><br><span class="line">root@linux &gt; <span class="keyword">select</span> * from teacher;</span><br><span class="line">+-----+--------+------+------+--------------+-----------+</span><br><span class="line">| tno | tname  | tage | tsex | prof         | depart    |</span><br><span class="line">+-----+--------+------+------+--------------+-----------+</span><br><span class="line">|   1 | æå¯¼   |   30 | 1    | æ•™å­¦æ€»ç›‘     | è¯­è¨€ç³»    |</span><br><span class="line">|   2 | å°ç§˜   |   30 | 1    | åŠ©æ•™         | æ–‡å­¦ç³»    |</span><br><span class="line">|   3 | æ›¾å¯¼   |   30 | 1    | æ•™å­¦æ€»ç›‘     | ç§‘å­¦ç³»    |</span><br><span class="line">+-----+--------+------+------+--------------+-----------+</span><br><span class="line">3 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><h4 id="æŸ¥è¯¢ç»ƒä¹ ">æŸ¥è¯¢ç»ƒä¹ </h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br></pre></td><td class="code"><pre><span class="line">1.æŸ¥è¯¢studentè¡¨ä¸­çš„æ‰€æœ‰è®°å½•çš„snameã€ssexå’Œclassåˆ—ã€‚</span><br><span class="line">root@linux &gt; <span class="keyword">select</span> sname,ssex,class from linux.student;</span><br><span class="line">+--------+------+-------+</span><br><span class="line">| sname  | ssex | class |</span><br><span class="line">+--------+------+-------+</span><br><span class="line">| å°æ˜   | 1    | 1ç­   |</span><br><span class="line">| ææ˜   | 1    | 1ç­   |</span><br><span class="line">| å°çº¢   | 0    | 2ç­   |</span><br><span class="line">| å°ç‹   | 1    | 1ç­   |</span><br><span class="line">| å°è”¡   | 1    | 2ç­   |</span><br><span class="line">| å°æ   | 1    | 1ç­   |</span><br><span class="line">| å°ä¸½   | 0    | 2ç­   |</span><br><span class="line">+--------+------+-------+</span><br><span class="line"></span><br><span class="line">2.æŸ¥è¯¢æ•™å¸ˆæ‰€æœ‰çš„å•ä½å³ä¸é‡å¤çš„departåˆ—ã€‚</span><br><span class="line">root@linux &gt; <span class="keyword">select</span> distinct(depart) from teacher;</span><br><span class="line">+-----------+</span><br><span class="line">| depart    |</span><br><span class="line">+-----------+</span><br><span class="line">| è¯­è¨€ç³»    |</span><br><span class="line">| æ–‡å­¦ç³»    |</span><br><span class="line">| ç§‘å­¦ç³»    |</span><br><span class="line">| è¿åŠ¨ç³»    |</span><br><span class="line">+-----------+</span><br><span class="line"></span><br><span class="line">3.æŸ¥è¯¢studentè¡¨çš„æ‰€æœ‰è®°å½•ã€‚</span><br><span class="line">root@linux &gt; <span class="keyword">select</span> * from student <span class="built_in">where</span> 1=1;</span><br><span class="line">+-----+--------+------+------+-----------+-------+</span><br><span class="line">| sno | sname  | sage | ssex | sbirthday | class |</span><br><span class="line">+-----+--------+------+------+-----------+-------+</span><br><span class="line">|   1 | å°æ˜   |   18 | 1    | NULL      | 1ç­   |</span><br><span class="line">|   2 | ææ˜   |   20 | 1    | NULL      | 1ç­   |</span><br><span class="line">|   3 | å°çº¢   |   20 | 0    | NULL      | 2ç­   |</span><br><span class="line">|   4 | å°ç‹   |   21 | 1    | NULL      | 1ç­   |</span><br><span class="line">|   5 | å°è”¡   |   19 | 1    | NULL      | 2ç­   |</span><br><span class="line">|   6 | å°æ   |   21 | 1    | NULL      | 1ç­   |</span><br><span class="line">|   7 | å°ä¸½   |   20 | 0    | NULL      | 2ç­   |</span><br><span class="line">+-----+--------+------+------+-----------+-------+</span><br><span class="line"></span><br><span class="line">4.æŸ¥è¯¢scoreè¡¨ä¸­æˆç»©åœ¨60åˆ°80ä¹‹é—´çš„æ‰€æœ‰è®°å½•ã€‚</span><br><span class="line">root@linux &gt; <span class="keyword">select</span> * from score <span class="built_in">where</span> mark&gt;60 and mark&lt;80;</span><br><span class="line">+-----+-----+------+</span><br><span class="line">| sno | cno | mark |</span><br><span class="line">+-----+-----+------+</span><br><span class="line">|   3 |   3 | 66.6 |</span><br><span class="line">|   4 |   1 | 78.5 |</span><br><span class="line">|   4 |   2 | 66.6 |</span><br><span class="line">|   5 |   3 | 72.5 |</span><br><span class="line">|   7 |   2 | 65.5 |</span><br><span class="line">+-----+-----+------+</span><br><span class="line"></span><br><span class="line">5.æŸ¥è¯¢scoreè¡¨ä¸­æˆç»©ä¸º66.6ï¼Œ72.5æˆ–90.0çš„è®°å½•ã€‚</span><br><span class="line">root@linux &gt; <span class="keyword">select</span> * from score <span class="built_in">where</span> mark=66.6 or mark=72.5 or mark=90;</span><br><span class="line">+-----+-----+------+</span><br><span class="line">| sno | cno | mark |</span><br><span class="line">+-----+-----+------+</span><br><span class="line">|   2 |   1 | 90.0 |</span><br><span class="line">|   3 |   3 | 66.6 |</span><br><span class="line">|   4 |   2 | 66.6 |</span><br><span class="line">|   5 |   3 | 72.5 |</span><br><span class="line">+-----+-----+------+</span><br><span class="line"></span><br><span class="line">6.æŸ¥è¯¢studentè¡¨ä¸­1ç­æˆ–æ€§åˆ«ä¸ºâ€œå¥³â€çš„åŒå­¦è®°å½•ã€‚</span><br><span class="line">root@linux &gt; <span class="keyword">select</span> * from student <span class="built_in">where</span> class=<span class="string">&#x27;1ç­&#x27;</span> or ssex=<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">+-----+--------+------+------+-----------+-------+</span><br><span class="line">| sno | sname  | sage | ssex | sbirthday | class |</span><br><span class="line">+-----+--------+------+------+-----------+-------+</span><br><span class="line">|   1 | å°æ˜   |   18 | 1    | NULL      | 1ç­   |</span><br><span class="line">|   2 | ææ˜   |   20 | 1    | NULL      | 1ç­   |</span><br><span class="line">|   3 | å°çº¢   |   20 | 0    | NULL      | 2ç­   |</span><br><span class="line">|   4 | å°ç‹   |   21 | 1    | NULL      | 1ç­   |</span><br><span class="line">|   6 | å°æ   |   21 | 1    | NULL      | 1ç­   |</span><br><span class="line">|   7 | å°ä¸½   |   20 | 0    | NULL      | 2ç­   |</span><br><span class="line">+-----+--------+------+------+-----------+-------+</span><br><span class="line"></span><br><span class="line">7.ä»¥classé™åºæŸ¥è¯¢Studentè¡¨çš„æ‰€æœ‰è®°å½•ã€‚</span><br><span class="line">root@linux &gt; <span class="keyword">select</span> * from student order by class desc;</span><br><span class="line">+-----+--------+------+------+-----------+-------+</span><br><span class="line">| sno | sname  | sage | ssex | sbirthday | class |</span><br><span class="line">+-----+--------+------+------+-----------+-------+</span><br><span class="line">|   3 | å°çº¢   |   20 | 0    | NULL      | 2ç­   |</span><br><span class="line">|   5 | å°è”¡   |   19 | 1    | NULL      | 2ç­   |</span><br><span class="line">|   7 | å°ä¸½   |   20 | 0    | NULL      | 2ç­   |</span><br><span class="line">|   1 | å°æ˜   |   18 | 1    | NULL      | 1ç­   |</span><br><span class="line">|   2 | ææ˜   |   20 | 1    | NULL      | 1ç­   |</span><br><span class="line">|   4 | å°ç‹   |   21 | 1    | NULL      | 1ç­   |</span><br><span class="line">|   6 | å°æ   |   21 | 1    | NULL      | 1ç­   |</span><br><span class="line">+-----+--------+------+------+-----------+-------+</span><br><span class="line"></span><br><span class="line">8.ä»¥cnoå‡åºã€marké™åºæŸ¥è¯¢Scoreè¡¨çš„æ‰€æœ‰è®°å½•</span><br><span class="line">root@linux &gt; <span class="keyword">select</span> * from score order by cno,mark desc;</span><br><span class="line">+-----+-----+------+</span><br><span class="line">| sno | cno | mark |</span><br><span class="line">+-----+-----+------+</span><br><span class="line">|   1 |   1 | 90.2 |</span><br><span class="line">|   2 |   1 | 90.0 |</span><br><span class="line">|   4 |   1 | 78.5 |</span><br><span class="line">|   2 |   2 | 99.9 |</span><br><span class="line">|   5 |   2 | 93.0 |</span><br><span class="line">|   3 |   2 | 85.5 |</span><br><span class="line">|   1 |   2 | 82.5 |</span><br><span class="line">|   4 |   2 | 66.6 |</span><br><span class="line">|   7 |   2 | 65.5 |</span><br><span class="line">|   6 |   3 | 91.5 |</span><br><span class="line">|   5 |   3 | 72.5 |</span><br><span class="line">|   3 |   3 | 66.6 |</span><br><span class="line">+-----+-----+------+</span><br><span class="line"></span><br><span class="line">9.æŸ¥è¯¢2ç­çš„å­¦ç”Ÿäººæ•°ã€‚</span><br><span class="line">root@linux &gt; <span class="keyword">select</span> count(*) from student <span class="built_in">where</span> class=<span class="string">&#x27;2ç­&#x27;</span>;</span><br><span class="line">+----------+</span><br><span class="line">| count(*) |</span><br><span class="line">+----------+</span><br><span class="line">|        3 |</span><br><span class="line">+----------+</span><br><span class="line"></span><br><span class="line">10.æŸ¥è¯¢â€æ›¾å¯¼â€œæ•™å¸ˆä»»è¯¾çš„å­¦ç”Ÿæˆç»©ã€‚</span><br><span class="line"><span class="comment">#è€å¸ˆåå­—ç­çº§å­¦ç”Ÿå§“ååˆ†æ•°</span></span><br><span class="line"><span class="keyword">select</span> teacher.tname,student.class,student.sname,score.mark</span><br><span class="line">from teacher,course,student,score</span><br><span class="line"><span class="built_in">where</span> student.sno=score.sno and score.cno=course.cno </span><br><span class="line">and teacher.tno=course.cno</span><br><span class="line">and teacher.tname=<span class="string">&#x27;æ›¾å¯¼&#x27;</span>;</span><br><span class="line"></span><br><span class="line">+--------+-------+--------+------+</span><br><span class="line">| tname  | class | sname  | mark |</span><br><span class="line">+--------+-------+--------+------+</span><br><span class="line">| æ›¾å¯¼   | 2ç­   | å°çº¢   | 66.6 |</span><br><span class="line">| æ›¾å¯¼   | 2ç­   | å°è”¡   | 72.5 |</span><br><span class="line">| æ›¾å¯¼   | 1ç­   | å°æ   | 91.5 |</span><br><span class="line">+--------+-------+--------+------+</span><br><span class="line"></span><br><span class="line">11.æŸ¥è¯¢è¯­æ–‡è¯¾ç¨‹æ‰€æœ‰ç”·ç”Ÿçš„æˆç»©å¹¶ä¸”æŸ¥å‡ºå¯¹åº”è¯¾ç¨‹çš„æ•™å¸ˆåï¼ŒèŒç§°ï¼ŒåŠæ‰€åœ¨éƒ¨é—¨ã€‚</span><br><span class="line"><span class="comment">#ç”·ç”Ÿåå­—æˆç»©è¯¾ç¨‹è€å¸ˆèŒç§°éƒ¨é—¨</span></span><br><span class="line"><span class="keyword">select</span> student.sname,score.mark,course.cname,teacher.tname,teacher.prof,teacher.depart</span><br><span class="line">from teacher,course,student,score</span><br><span class="line"><span class="built_in">where</span> student.sno=score.sno and score.cno=course.cno </span><br><span class="line">and teacher.tno=course.cno</span><br><span class="line">and student.ssex=<span class="string">&#x27;1&#x27;</span>;</span><br><span class="line"></span><br><span class="line">+--------+------+--------+--------+--------------+-----------+</span><br><span class="line">| sname  | mark | cname  | tname  | prof         | depart    |</span><br><span class="line">+--------+------+--------+--------+--------------+-----------+</span><br><span class="line">| å°æ˜   | 90.2 | è‹±è¯­   | æå¯¼   | æ•™å­¦æ€»ç›‘     | è¯­è¨€ç³»    |</span><br><span class="line">| ææ˜   | 90.0 | è‹±è¯­   | æå¯¼   | æ•™å­¦æ€»ç›‘     | è¯­è¨€ç³»    |</span><br><span class="line">| å°ç‹   | 78.5 | è‹±è¯­   | æå¯¼   | æ•™å­¦æ€»ç›‘     | è¯­è¨€ç³»    |</span><br><span class="line">| å°æ˜   | 82.5 | æ•°å­¦   | å°ç§˜   | åŠ©æ•™         | æ–‡å­¦ç³»    |</span><br><span class="line">| ææ˜   | 99.9 | æ•°å­¦   | å°ç§˜   | åŠ©æ•™         | æ–‡å­¦ç³»    |</span><br><span class="line">| å°ç‹   | 66.6 | æ•°å­¦   | å°ç§˜   | åŠ©æ•™         | æ–‡å­¦ç³»    |</span><br><span class="line">| å°è”¡   | 93.0 | æ•°å­¦   | å°ç§˜   | åŠ©æ•™         | æ–‡å­¦ç³»    |</span><br><span class="line">| å°è”¡   | 72.5 | è¯­æ–‡   | æ›¾å¯¼   | æ•™å­¦æ€»ç›‘     | ç§‘å­¦ç³»    |</span><br><span class="line">| å°æ   | 91.5 | è¯­æ–‡   | æ›¾å¯¼   | æ•™å­¦æ€»ç›‘     | ç§‘å­¦ç³»    |</span><br><span class="line">+--------+------+--------+--------+--------------+-----------+</span><br><span class="line"></span><br><span class="line">12.æŠŠ11é¢˜æŸ¥å‡ºçš„æˆç»©æŒ‰ç…§é™åºæ’åºã€‚</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> student.sname,score.mark,course.cname,teacher.tname,teacher.prof,teacher.depart</span><br><span class="line">from teacher,course,student,score</span><br><span class="line"><span class="built_in">where</span> student.sno=score.sno and score.cno=course.cno </span><br><span class="line">and teacher.tno=course.cno</span><br><span class="line">and student.ssex=<span class="string">&#x27;1&#x27;</span> order by score.mark desc;</span><br><span class="line"></span><br><span class="line">+--------+------+--------+--------+--------------+-----------+</span><br><span class="line">| sname  | mark | cname  | tname  | prof         | depart    |</span><br><span class="line">+--------+------+--------+--------+--------------+-----------+</span><br><span class="line">| ææ˜   | 99.9 | æ•°å­¦   | å°ç§˜   | åŠ©æ•™         | æ–‡å­¦ç³»    |</span><br><span class="line">| å°è”¡   | 93.0 | æ•°å­¦   | å°ç§˜   | åŠ©æ•™         | æ–‡å­¦ç³»    |</span><br><span class="line">| å°æ   | 91.5 | è¯­æ–‡   | æ›¾å¯¼   | æ•™å­¦æ€»ç›‘     | ç§‘å­¦ç³»    |</span><br><span class="line">| å°æ˜   | 90.2 | è‹±è¯­   | æå¯¼   | æ•™å­¦æ€»ç›‘     | è¯­è¨€ç³»    |</span><br><span class="line">| ææ˜   | 90.0 | è‹±è¯­   | æå¯¼   | æ•™å­¦æ€»ç›‘     | è¯­è¨€ç³»    |</span><br><span class="line">| å°æ˜   | 82.5 | æ•°å­¦   | å°ç§˜   | åŠ©æ•™         | æ–‡å­¦ç³»    |</span><br><span class="line">| å°ç‹   | 78.5 | è‹±è¯­   | æå¯¼   | æ•™å­¦æ€»ç›‘     | è¯­è¨€ç³»    |</span><br><span class="line">| å°è”¡   | 72.5 | è¯­æ–‡   | æ›¾å¯¼   | æ•™å­¦æ€»ç›‘     | ç§‘å­¦ç³»    |</span><br><span class="line">| å°ç‹   | 66.6 | æ•°å­¦   | å°ç§˜   | åŠ©æ•™         | æ–‡å­¦ç³»    |</span><br><span class="line">+--------+------+--------+--------+--------------+-----------+</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLå¤šå®ä¾‹ç®¡ç†</title>
      <link href="/posts/3c5dfd37.html"/>
      <url>/posts/3c5dfd37.html</url>
      
        <content type="html"><![CDATA[<h2 id="åˆ›å»ºå¤šå®ä¾‹">åˆ›å»ºå¤šå®ä¾‹</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">å®ä¾‹ï¼šä¸€ä¸ªè¿›ç¨‹ + å¤šä¸ªçº¿ç¨‹ + é¢„åˆ†é…çš„å†…å­˜ç»“æ„</span><br><span class="line">å¤šå®ä¾‹ï¼šå¤šä¸ªè¿›ç¨‹ + å¤šä¸ªçº¿ç¨‹ + å¤šä¸ªé¢„åˆ†é…çš„å†…å­˜ç»“æ„</span><br><span class="line"></span><br><span class="line">å¤šä¸ªæ•°æ®åº“å®ä¾‹ä¸åŒä¹‹å¤„ï¼š</span><br><span class="line">é…ç½®æ–‡ä»¶ï¼š</span><br><span class="line">1.ç«¯å£</span><br><span class="line">2.æ•°æ®ç›®å½•</span><br><span class="line">3.socketæ–‡ä»¶</span><br><span class="line">4.pidæ–‡ä»¶</span><br><span class="line">5.é”™è¯¯æ—¥å¿—</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹é»˜è®¤é…ç½®</span></span><br><span class="line">mysql&gt; show variables like <span class="string">&#x27;%pid%&#x27;</span>;</span><br><span class="line">+---------------+--------------------------+</span><br><span class="line">| Variable_name | Value |</span><br><span class="line">+---------------+--------------------------+</span><br><span class="line">| pid_file | /app/mysql/data/db01.pid |</span><br><span class="line">+---------------+--------------------------+</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.åˆ›å»ºå¤šä¸ªå®ä¾‹æ•°æ®å­˜æ”¾ç›®å½•</span></span><br><span class="line">[root@db01 ~]# <span class="built_in">mkdir</span> /data/mysql/330&#123;7,8,9&#125; -p</span><br><span class="line"></span><br><span class="line"><span class="comment">#2.ç¼–å†™é…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@db01 ~]#vim /data/mysql/3307/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">port=3307</span><br><span class="line">basedir=/app/mysql</span><br><span class="line">datadir=/data/mysql/3307/data</span><br><span class="line">socket=/data/mysql/3307/data/mysql.sock</span><br><span class="line">pid_file=/data/mysql/3307/data/mysql.pid</span><br><span class="line">log_error=/data/mysql/3307/data/mysql.err</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# vim /data/mysql/3308/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">port=3308</span><br><span class="line">basedir=/app/mysql</span><br><span class="line">datadir=/data/mysql/3308/data</span><br><span class="line">socket=/data/mysql/3308/data/mysql.sock</span><br><span class="line">pid_file=/data/mysql/3308/data/mysql.pid</span><br><span class="line">log_error=/data/mysql/3308/data/mysql.err</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# vim /data/mysql/3309/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">port=3309</span><br><span class="line">basedir=/app/mysql</span><br><span class="line">datadir=/data/mysql/3309/data</span><br><span class="line">socket=/data/mysql/3309/data/mysql.sock</span><br><span class="line">pid_file=/data/mysql/3309/data/mysql.pid</span><br><span class="line">log_error=/data/mysql/3309/data/mysql.err</span><br><span class="line"></span><br><span class="line"><span class="comment">#3.åˆå§‹åŒ–æ•°æ®åº“</span></span><br><span class="line">/app/mysql/scripts/mysql_install_db --user=mysql --basedir=/app/mysql --datadir=/data/mysql/3309/data</span><br><span class="line"></span><br><span class="line">/app/mysql/scripts/mysql_install_db --user=mysql --basedir=/app/mysql --datadir=/data/mysql/3308/data</span><br><span class="line"></span><br><span class="line">/app/mysql/scripts/mysql_install_db --user=mysql --basedir=/app/mysql --datadir=/data/mysql/3307/data</span><br><span class="line"></span><br><span class="line"><span class="comment">#4.å¯åŠ¨æ•°æ®åº“</span></span><br><span class="line">[root@db01 ~]# mysqld_safe --defaults-file=/data/mysql/3307/my.cnf</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# mysqld_safe --defaults-file=/data/mysql/3308/my.cnf</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# mysqld_safe --defaults-file=/data/mysql/3309/my.cnf</span><br><span class="line"></span><br><span class="line"><span class="comment">#5.ç¼–å†™å¯åŠ¨è„šæœ¬</span></span><br><span class="line">[root@db01 ~]# vim /usr/lib/systemd/system/mysql3307.service</span><br><span class="line">[Unit]</span><br><span class="line">Description=MySQL Server</span><br><span class="line">After=network.target</span><br><span class="line">Wants=multi-user.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">ExecStart=/app/mysql/bin/mysqld_safe --defaults-file=/data/mysql/3307/my.cnf</span><br><span class="line">Restart=on-failure</span><br><span class="line">RestartSec=42s</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# vim /usr/lib/systemd/system/mysql3308.service</span><br><span class="line">[Unit]</span><br><span class="line">Description=MySQL Server</span><br><span class="line">After=network.target</span><br><span class="line">Wants=multi-user.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">ExecStart=/app/mysql/bin/mysqld_safe --defaults-file=/data/mysql/3308/my.cnf</span><br><span class="line">Restart=on-failure</span><br><span class="line">RestartSec=42s</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# vim /usr/lib/systemd/system/mysql3309.service</span><br><span class="line">[Unit]</span><br><span class="line">Description=MySQL Server</span><br><span class="line">After=network.target</span><br><span class="line">Wants=multi-user.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">ExecStart=/app/mysql/bin/mysqld_safe --defaults-file=/data/mysql/3309/my.cnf</span><br><span class="line">Restart=on-failure</span><br><span class="line">RestartSec=42s</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br><span class="line"></span><br><span class="line"><span class="comment">#6.é‡æ–°åŠ è½½è„šæœ¬</span></span><br><span class="line">[root@db01 ~]# systemctl daemon-reload</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¿®æ”¹rootå¯†ç </span></span><br><span class="line">[root@db01 ~]# mysqladmin -uroot -S /data/mysql/3307/data/mysql.sock password <span class="string">&#x27;3307&#x27;</span></span><br><span class="line">[root@db01 ~]# mysqladmin -uroot -S /data/mysql/3307/data/mysql.sock password <span class="string">&#x27;3308&#x27;</span></span><br><span class="line">[root@db01 ~]# mysqladmin -uroot -S /data/mysql/3307/data/mysql.sock password <span class="string">&#x27;3309&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 8.è¿æ¥æ•°æ®åº“</span></span><br><span class="line">[root@db01 ~]# mysql -uroot -p3307 -S /data/mysql/3307/data/mysql.sock</span><br><span class="line">[root@db01 ~]# mysql -uroot -p3308 -S /data/mysql/3308/data/mysql.sock</span><br><span class="line">[root@db01 ~]# mysql -uroot -p3309 -S /data/mysql/3309/data/mysql.sock</span><br><span class="line"></span><br><span class="line"><span class="comment"># 9.ç®€æ˜“è¿æ¥æ–¹å¼ï¼ˆå°†é“¾æ¥å‘½ä»¤å†™åˆ°binä¸‹ï¼‰</span></span><br><span class="line">[root@db01 ~]# vim /usr/local/bin/mysql3307</span><br><span class="line">mysql -uroot -p3307 -S /data/mysql/3307/data/mysql.sock</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# vim /usr/local/bin/mysql3308</span><br><span class="line">mysql -uroot -p3308 -S /data/mysql/3308/data/mysql.sock</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# vim /usr/local/bin/mysql3309</span><br><span class="line">mysql -uroot -p3309 -S /data/mysql/3309/data/mysql.sock</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# <span class="built_in">chmod</span> +x /usr/local/bin/mysql330*</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#è¿æ¥æ—¶å€™åªéœ€è¦è¾“å…¥</span></span><br><span class="line">mysql3307</span><br><span class="line">mysql3308</span><br><span class="line">mysql3309</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLå®¢æˆ·ç«¯ç±»å‹</title>
      <link href="/posts/11698a60.html"/>
      <url>/posts/11698a60.html</url>
      
        <content type="html"><![CDATA[<h1>MySQLå®¢æˆ·ç«¯ç±»å‹</h1><p><img src="https://cos.lukme.top/Pic/QQ_1723120788148.png" alt="QQ_1723120788148"></p><p><strong>MySQLå®¢æˆ·ç«¯</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql</span><br><span class="line">mysqladmin</span><br><span class="line">mysqldump</span><br><span class="line">phpmyadmin</span><br></pre></td></tr></table></figure><p><strong>mysqld</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysqldä¸€ä¸ªäºŒè¿›åˆ¶ç¨‹åºï¼Œåå°çš„å®ˆæŠ¤è¿›ç¨‹</span><br><span class="line">å•è¿›ç¨‹</span><br><span class="line">å¤šçº¿ç¨‹</span><br></pre></td></tr></table></figure><p><strong>MySQLçš„è¿æ¥æ–¹å¼</strong></p><ul><li><p>TCP/IPè¿æ¥</p><p><code>mysql -uroot -p123 -h172.16.1.51</code></p></li><li><p>Socketè¿æ¥</p><p><code>mysql -uroot -p123 -S /tmp/mysql.sock</code></p></li></ul><img src="https://cos.lukme.top/Pic/QQ_1723121188726.png" alt="QQ_1723121188726" style="zoom: 67%;" /><h2 id="1-åˆ¤æ–­æœåŠ¡ç±»å‹">1.åˆ¤æ–­æœåŠ¡ç±»å‹</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p123  socketè¿æ¥</span><br><span class="line">mysql -uroot -p123 -h127.0.0.1 TCPè¿æ¥</span><br><span class="line">mysql -uroot -p123 -hlocalhost Socketè¿æ¥</span><br><span class="line"></span><br><span class="line">----(é”™è¯¯å†™æ³•)</span><br><span class="line">mysql -uroot -p123 -h10.0.0.51 -S /tmp/mysql.sock TCPè¿æ¥</span><br><span class="line">mysql -uroot -p123 -S /tmp/mysql.sock -h10.0.0.51 TCPè¿æ¥</span><br></pre></td></tr></table></figure><h2 id="2-MySQLæœåŠ¡å™¨ç»„æˆ">2.MySQLæœåŠ¡å™¨ç»„æˆ</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">MySQLæœåŠ¡ï¼šå®ˆæŠ¤è¿›ç¨‹</span><br><span class="line"></span><br><span class="line">å®ä¾‹ï¼š`ä¸€ä¸ªè¿›ç¨‹ + å¤šä¸ªçº¿ç¨‹+ ä¸€ä¸ªé¢„åˆ†é…çš„å†…å­˜ç»“æ„`</span><br><span class="line"></span><br><span class="line">[root@db04 ~]# mysqladmin -uroot -p123 variables|grep innodb_buffer_pool_size</span><br><span class="line">innodb_buffer_pool_size=134217728</span><br><span class="line">MySQLçš„å†…å­˜è¦å ç‰©ç†æœºå†…å­˜çš„75%~80%</span><br><span class="line"></span><br><span class="line">å‡è®¾å¼€å¯æ•°æ®åº“æ—¶å€™</span><br><span class="line">Linux</span><br><span class="line">æ€»å†…å­˜ï¼š16G</span><br><span class="line">å·²ä½¿ç”¨ï¼š15.9G   --&gt;MySQLçº¦å 12.8G</span><br><span class="line">è¦æ˜¯åŠ è½½ä¸€ä¸ª2GMySQLè¡¨æ–‡ä»¶ï¼Œä½¿ç”¨çš„å†…å­˜ä¹Ÿæ˜¯12.8Gé‡Œçš„</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä½¿ç”¨ansibleæ˜¯æ€ä¹ˆä¼˜åŒ–MySQLçš„ï¼Ÿ</span></span><br><span class="line"><span class="comment">#ä½¿ç”¨å˜é‡</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ•°æ®åº“è¦å ç”¨çš„å†…å­˜ï¼ˆä¸å¯æœ‰å°æ•°ï¼‰ äº¤ç»™intå–å¾—æ•´æ•°</span></span><br><span class="line"><span class="comment">#ç¼“å†²æ± å¤§å°ï¼Œç¼“å­˜è¡¨å’Œç´¢å¼•æ•°æ®çš„å†…å­˜åŒºåŸŸ</span></span><br><span class="line">innodb_buffer_pool_size</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# vim my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">basedir = /app/mysql</span><br><span class="line">datadir = /app/mysql/data</span><br><span class="line">innodb_buffer_pool_size = &#123;&#123; (ansible_memtotal_mb * 0.8)|int &#125;&#125;M</span><br><span class="line">server_id=&#123;&#123; ansible_hostname[-1] &#125;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="3-MySQLåº•å±‚åŸç†">3.MySQLåº•å±‚åŸç†</h2><p><img src="https://cos.lukme.top/Pic/QQ_1723123419826.png" alt="QQ_1723123419826"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">`è¿æ¥å±‚`</span><br><span class="line">ä½œç”¨ï¼š</span><br><span class="line">1ï¼‰æä¾›ä¸¤ç§è¿æ¥æ–¹å¼</span><br><span class="line">TCPè¿æ¥</span><br><span class="line">Socketè¿æ¥</span><br><span class="line">2ï¼‰éªŒè¯ç”¨æˆ·çš„åˆæ³•æ€§ï¼ˆç”¨æˆ·å å¯†ç  IP æƒé™ï¼‰</span><br><span class="line">3ï¼‰æä¾›ä¸€ä¸ªä¸SQLå±‚äº¤äº’çš„çº¿ç¨‹</span><br><span class="line"></span><br><span class="line">`SQLå±‚`</span><br><span class="line">ä½œç”¨ï¼š</span><br><span class="line">1ï¼‰æ¥æ”¶è¿æ¥å±‚ä¼ é€’è¿‡æ¥çš„SQLè¯­å¥</span><br><span class="line">2ï¼‰éªŒè¯è¯­æ³•</span><br><span class="line">3ï¼‰éªŒè¯è¯­ä¹‰</span><br><span class="line">DDL</span><br><span class="line">DML</span><br><span class="line">DCL</span><br><span class="line">DQL</span><br><span class="line">DTL</span><br><span class="line">4ï¼‰è§£æå™¨ï¼šè§£æSQLè¯­å¥</span><br><span class="line">5ï¼‰ä¼˜åŒ–å™¨ï¼šå‡ºå¤šç§ä¼˜åŒ–æ–¹æ¡ˆï¼Œé€‰æ‹©æœ€ä¼˜çš„ä¸€ç§æ–¹å¼å»æ‰§è¡Œ</span><br><span class="line">6ï¼‰æ‰§è¡Œå™¨ï¼šæ‰§è¡Œä¼˜åŒ–å™¨é€‰æ‹©çš„æœ€ä¼˜çš„ä¸€ç§æ–¹å¼çš„è¯­å¥æä¾›ä¸€ä¸ªå’Œå­˜å‚¨å¼•æ“å±‚äº¤äº’çš„çº¿ç¨‹æ¥æ”¶å­˜å‚¨å¼•æ“å±‚è¿”å›çš„ç»“æ„åŒ–æˆè¡¨çš„æ•°æ®</span><br><span class="line">7ï¼‰ç¼“å­˜</span><br><span class="line">8ï¼‰è®°å½•æ—¥å¿—ï¼ˆbinlogï¼‰</span><br><span class="line"></span><br><span class="line">`å­˜å‚¨å¼•æ“å±‚`</span><br><span class="line">ä½œç”¨ï¼š</span><br><span class="line">1ï¼‰æ¥æ”¶SQLå±‚ä¼ é€’è¿‡æ¥çš„SQLè¯­å¥</span><br><span class="line">2ï¼‰ä¸ç£ç›˜äº¤äº’å–å‡ºæŒ‡å®šçš„æ•°æ®</span><br><span class="line">3ï¼‰å°†æ•°æ®ç»“æ„åŒ–æˆè¡¨æ ¼è¿”å›ç»™SQLå±‚</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="MySQLç»“æ„">MySQLç»“æ„</h3><p>é€»è¾‘ç»“æ„</p><ul><li>åº“</li><li>è¡¨<ul><li>å…ƒæ•°æ®<ul><li>å­—æ®µ<ul><li>å­—æ®µå</li><li>æ•°æ®ç±»å‹</li><li>çº¦æŸ</li></ul></li><li>æè¿°ä¿¡æ¯</li></ul></li><li>çœŸå®æ•°æ®</li></ul></li></ul><p>ç‰©ç†ç»“æ„ï¼šæœ€åº•å±‚çš„æ•°æ®æ–‡ä»¶</p><p><strong>MySQLå•ä½</strong></p><ul><li>æ®µï¼ˆä¸€å¼ è¡¨ï¼‰ï¼šä¸€ä¸ªæ®µæ˜¯ç”±å¤šä¸ªåŒºç»„æˆçš„</li><li>åŒº    ä¸€ä¸ªåŒºæ˜¯ç”±64ä¸ªé¡µç»„æˆçš„ï¼ˆ1Mï¼‰</li><li>é¡µ   ä¸€ä¸ªé¡µ16k</li></ul>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLæ•°æ®åº“ç®¡ç†</title>
      <link href="/posts/341216ab.html"/>
      <url>/posts/341216ab.html</url>
      
        <content type="html"><![CDATA[<h2 id="1-å¯†ç ç®¡ç†">1.å¯†ç ç®¡ç†</h2><h3 id="é‡ç½®å¯†ç ">é‡ç½®å¯†ç </h3><p><strong>æ‰‹è´±æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤?</strong></p><p><code>truncate mysql.user;</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">æåº¦å±é™©å‘½ä»¤ï¼šæ¸…ç©ºæ‰€æœ‰è¡¨</span><br><span class="line"><span class="keyword">truncate</span> mysql.user;</span><br><span class="line"></span><br><span class="line">é‡å¯åä¸èƒ½ç™»å½•</span><br><span class="line">[root<span class="variable">@db02</span> <span class="operator">~</span>]# mysql</span><br><span class="line">ERROR <span class="number">1045</span> (<span class="number">28000</span>): Access denied <span class="keyword">for</span> <span class="keyword">user</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> (<span class="keyword">using</span> password: <span class="keyword">NO</span>)</span><br><span class="line"></span><br><span class="line">è§£å†³ï¼šï¼ˆmysql8<span class="number">.0</span>ç‰ˆæœ¬ä¹‹å‰ï¼‰</span><br><span class="line"><span class="number">1.</span>ä¿®æ”¹é…ç½®æ–‡ä»¶  <span class="operator">/</span>etc<span class="operator">/</span>my.cnf</span><br><span class="line">åœ¨[mysqld]éƒ¨åˆ†ä¸‹æ·»åŠ æˆ–ç¡®ä¿å­˜åœ¨<span class="keyword">skip</span><span class="operator">-</span><span class="keyword">grant</span><span class="operator">-</span>tablesé€‰é¡¹ã€‚è·³è¿‡æƒé™æ£€æŸ¥</span><br><span class="line"><span class="number">2.</span>é‡å¯mysql</span><br><span class="line">systemctl restart mysqld</span><br><span class="line"><span class="number">3.</span>ä½¿ç”¨msyqlè¿›å…¥åˆ›å»ºä¸€ä¸ªæ–°çš„rootç”¨æˆ·ï¼ˆå‡ºç°æŠ¥é”™ï¼‰</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">grant</span> <span class="keyword">all</span> <span class="keyword">on</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">to</span> root@<span class="string">&#x27;localhost&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">ERROR <span class="number">1290</span> (HY000): The MySQL server <span class="keyword">is</span> <span class="keyword">running</span> <span class="keyword">with</span> the <span class="comment">--skip-grant-tables option so it cannot execute this statement</span></span><br><span class="line"><span class="number">4.</span>åˆ·æ–°æƒé™</span><br><span class="line">flush privileges;</span><br><span class="line"><span class="number">5.</span>å†æ¬¡æ‰§è¡Œåˆ›å»ºç”¨æˆ·å‘½ä»¤</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">all</span> <span class="keyword">on</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">to</span> root@<span class="string">&#x27;localhost&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;&#x27;</span> <span class="keyword">with</span> <span class="keyword">grant</span> option;</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">grant</span> <span class="keyword">all</span> <span class="keyword">on</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">to</span> root@<span class="string">&#x27;localhost&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="number">6.</span>é€€å‡ºmysqlå¹¶ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œ  åˆ é™¤è·³è¿‡æƒé™æ£€æŸ¥   é‡å¯</span><br><span class="line"></span><br><span class="line"><span class="number">7.</span>mysqlé‡æ–°ç™»å½•å¹¶æŸ¥çœ‹è¡¨</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="keyword">user</span>,host <span class="keyword">from</span> mysql.user;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+-----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">user</span> <span class="operator">|</span> host      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+-----------+</span></span><br><span class="line"><span class="operator">|</span> root <span class="operator">|</span> localhost <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+-----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> </span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹å¯†ç ">ä¿®æ”¹å¯†ç </h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#<span class="number">1.</span>mysqladminå‘½ä»¤</span><br><span class="line">#mysqladminæ˜¯ä¸€ä¸ªç”¨äºç®¡ç†MySQLæœåŠ¡å™¨çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå®ƒä¹Ÿå¯ä»¥ç”¨æ¥ä¿®æ”¹å¯†ç ã€‚ä½¿ç”¨mysqladminæ—¶ï¼Œä½ ä¸éœ€è¦å…ˆç™»å½•åˆ°MySQLæ•°æ®åº“ã€‚</span><br><span class="line">mysqladmin <span class="operator">-</span>u username <span class="operator">-</span>p<span class="string">&#x27;old_password&#x27;</span> password <span class="string">&#x27;new_password&#x27;</span></span><br><span class="line"></span><br><span class="line">#<span class="number">2.</span>MySQL <span class="number">5.7</span>åŠä¹‹å‰ç‰ˆæœ¬</span><br><span class="line"><span class="keyword">SET</span> PASSWORD <span class="keyword">FOR</span> <span class="string">&#x27;username&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> <span class="operator">=</span> PASSWORD(<span class="string">&#x27;new_password&#x27;</span>);</span><br><span class="line"></span><br><span class="line">#<span class="number">3.</span>MySQL <span class="number">8.0</span>åŠæ›´é«˜ç‰ˆæœ¬</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> <span class="string">&#x27;username&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;new_password&#x27;</span>;</span><br></pre></td></tr></table></figure><h3 id="å¿˜è®°å¯†ç é‡ç½®">å¿˜è®°å¯†ç é‡ç½®</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.åœæ­¢MySQLæœåŠ¡ï¼š</span></span><br><span class="line"><span class="built_in">sudo</span> systemctl stop mysqld</span><br><span class="line"></span><br><span class="line"><span class="comment">#2.å¯åŠ¨MySQLçš„å®‰å…¨æ¨¡å¼ï¼ˆè·³è¿‡æƒé™è¡¨ï¼‰ï¼š</span></span><br><span class="line"><span class="built_in">sudo</span> mysqld_safe --skip-grant-tables &amp;</span><br><span class="line"></span><br><span class="line"><span class="comment">#3.ç™»å½•åˆ°MySQLï¼š</span></span><br><span class="line">mysql -u root</span><br><span class="line">åœ¨MySQLæç¤ºç¬¦ä¸‹è¾“å…¥ï¼š</span><br><span class="line">FLUSH PRIVILEGES;</span><br><span class="line"></span><br><span class="line"><span class="comment">#4.é‡ç½®å¯†ç ï¼š</span></span><br><span class="line"><span class="comment">#MySQL 5.7åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</span></span><br><span class="line">ALTER USER <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED BY <span class="string">&#x27;æ–°å¯†ç &#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">#MySQL 5.6åŠä»¥ä¸‹ç‰ˆæœ¬ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</span></span><br><span class="line">UPDATE mysql.user SET authentication_string=PASSWORD(<span class="string">&#x27;æ–°å¯†ç &#x27;</span>) WHERE User=<span class="string">&#x27;root&#x27;</span> AND Host=<span class="string">&#x27;localhost&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">#5.åˆ·æ–°æƒé™ï¼š</span></span><br><span class="line"><span class="comment">#åœ¨MySQLæç¤ºç¬¦ä¸‹è¾“å…¥ï¼š</span></span><br><span class="line">FLUSH PRIVILEGES;</span><br><span class="line"></span><br><span class="line"><span class="comment">#6.é€€å‡ºMySQLï¼š</span></span><br><span class="line">EXIT;</span><br><span class="line"></span><br><span class="line"><span class="comment">#åœæ­¢MySQLçš„å®‰å…¨æ¨¡å¼å¹¶é‡æ–°å¯åŠ¨MySQLæœåŠ¡ï¼š</span></span><br><span class="line"><span class="comment">#å¯åŠ¨å®‰å…¨æ¨¡æ´»åŠ¨çš„pidå·å¹¶æ€æ‰</span></span><br><span class="line">ps -ef |grep [m]ysqld_safe</span><br><span class="line">root      10170   7166  0 15:42 pts/0    00:00:00 /bin/sh /app/mysql...</span><br><span class="line"><span class="built_in">kill</span> -9 10170</span><br><span class="line"><span class="comment">#é‡å¯MySQL</span></span><br><span class="line">systemctl restart mysqld</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2 id="2-ç”¨æˆ·æƒé™ç®¡ç†">2.ç”¨æˆ·æƒé™ç®¡ç†</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">MySQLä¸­ç”¨æˆ·å®šä¹‰ï¼š</span><br><span class="line"><span class="string">&#x27;ç”¨æˆ·å&#x27;</span>@<span class="string">&#x27;ä¸»æœºåŸŸ&#x27;</span></span><br><span class="line"></span><br><span class="line">ä¸»æœºåŸŸï¼šï¼ˆå¸¸ç”¨ï¼‰</span><br><span class="line">10.0.0.5%   åŒ…å«ï¼š    10.0.0.50-10.0.0.59 ~ 10.0.0.5</span><br><span class="line">localhost</span><br><span class="line">10.0.0.%</span><br><span class="line"></span><br><span class="line">ä¸å¸¸ç”¨ï¼š</span><br><span class="line">10.0.%.% 10.0.0-255.1-255</span><br><span class="line">10.%.%.%</span><br><span class="line">%</span><br><span class="line">10.0.0.0/255.255.255.0</span><br><span class="line"></span><br><span class="line">grant all on *.* to test2@<span class="string">&#x27;10.0.0.0/255.255.255.0&#x27;</span> identified by <span class="string">&#x27;123&#x27;</span>;</span><br></pre></td></tr></table></figure><h3 id="MySQLçš„å¢åˆ æ”¹æŸ¥">MySQLçš„å¢åˆ æ”¹æŸ¥</h3><p><strong><code>å¢</code></strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åˆ›å»ºç”¨æˆ·</span></span><br><span class="line">1ï¼‰å…ˆåˆ›å»ºç”¨æˆ·åœ¨æˆæƒ</span><br><span class="line">mysql&gt; create user zls2@<span class="string">&#x27;localhost&#x27;</span> identified by <span class="string">&#x27;123&#x27;</span>;</span><br><span class="line">mysql&gt; grant all on *.* to zls2@<span class="string">&#x27;localhost&#x27;</span>;</span><br><span class="line"></span><br><span class="line">2ï¼‰ç›´æ¥åˆ›å»ºåŠ æˆæƒ</span><br><span class="line">mysql&gt; grant all on *.* to zls3@<span class="string">&#x27;localhost&#x27;</span> identified by <span class="string">&#x27;123&#x27;</span>;</span><br><span class="line"></span><br><span class="line">3ï¼‰å‘è¡¨é‡Œæ’å…¥æ•°æ®ï¼ˆä¸æ¨èï¼‰</span><br><span class="line">mysql&gt; insert into mysql.user values (<span class="string">&#x27;localhost&#x27;</span>,<span class="string">&#x27;root&#x27;</span>,PASSWORD(<span class="string">&#x27;123&#x27;</span>)...</span><br></pre></td></tr></table></figure><p><strong><code>åˆ </code></strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åˆ é™¤ç”¨æˆ·</span></span><br><span class="line">1)drop user <span class="string">&#x27;ç”¨æˆ·å&#x27;</span>@<span class="string">&#x27;ä¸»æœºåŸŸ&#x27;</span></span><br><span class="line">mysql&gt; drop user zls3@<span class="string">&#x27;localhost&#x27;</span>;</span><br><span class="line"></span><br><span class="line">2)ä½¿ç”¨deleteæŒ‡å®šç”¨æˆ·åå’Œä¸»æœºåŸŸ</span><br><span class="line">mysql&gt; delete from mysql.user <span class="built_in">where</span> user=<span class="string">&#x27;root&#x27;</span> and host=<span class="string">&#x27;10.0.0.%&#x27;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong><code>æ”¹</code></strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä¿®æ”¹å¯†ç </span></span><br><span class="line">1ï¼‰å‘½ä»¤è¡Œä¿®æ”¹</span><br><span class="line">mysqladmin -u<span class="string">&#x27;ç”¨æˆ·&#x27;</span> -p<span class="string">&#x27;æ—§å¯†ç &#x27;</span> password <span class="string">&#x27;æ–°å¯†ç &#x27;</span></span><br><span class="line">mysqladmin -uzls1 -p123 password <span class="string">&#x27;111&#x27;</span></span><br><span class="line"></span><br><span class="line">2ï¼‰MySQL5.7ä»¥ä¸Šç‰ˆæœ¬ä¸“ç”¨</span><br><span class="line">mysql&gt; alter user zls1@<span class="string">&#x27;localhost&#x27;</span> identified by <span class="string">&#x27;123&#x27;</span>;</span><br><span class="line"></span><br><span class="line">3ï¼‰ä¿®æ”¹å½“å‰ç™»å½•çš„ç”¨æˆ·å¯†ç </span><br><span class="line">mysql&gt; <span class="built_in">set</span> password=PASSWORD(<span class="string">&#x27;222&#x27;</span>);</span><br><span class="line"></span><br><span class="line">4ï¼‰åªæœ‰åœ¨ä½¿ç”¨updateä¿®æ”¹ç”¨æˆ·å¯†ç æ—¶ï¼Œæ‰éœ€è¦æ‰§è¡Œflush privileges;</span><br><span class="line"></span><br><span class="line">`MySQL5.6`</span><br><span class="line">mysql&gt; update mysql.user <span class="built_in">set</span> password=PASSWORD(<span class="string">&#x27;333&#x27;</span>) <span class="built_in">where</span> user=<span class="string">&#x27;root&#x27;</span> and</span><br><span class="line">host=<span class="string">&#x27;localhost&#x27;</span>;</span><br><span class="line">mysql&gt; flush privileges; // å±é™©ï¼Œå…¨å±€SQLè¯­å¥</span><br><span class="line"></span><br><span class="line">`MySQL5.7`</span><br><span class="line">mysql&gt; update mysql.user <span class="built_in">set</span> authentication_string=PASSWORD(<span class="string">&#x27;333&#x27;</span>) <span class="built_in">where</span></span><br><span class="line">user=<span class="string">&#x27;root&#x27;</span> and host=<span class="string">&#x27;localhost&#x27;</span>;</span><br><span class="line">mysql&gt; flush privileges; // å±é™©ï¼Œå…¨å±€SQLè¯­å¥</span><br><span class="line"></span><br><span class="line">5)ä½¿ç”¨grantæ–¹å¼æ”¹</span><br><span class="line">mysql&gt; grant all on *.* to root@<span class="string">&#x27;localhost&#x27;</span> identified by <span class="string">&#x27;1111&#x27;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong><code>æŸ¥</code></strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## æŸ¥ï¼šæŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line"><span class="comment">#æŸ¥çœ‹ç”¨æˆ·å’Œä¸»æœºåŸŸ</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> user,host from mysql.user;</span><br><span class="line">+------+-----------+</span><br><span class="line">| user | host      |</span><br><span class="line">+------+-----------+</span><br><span class="line">| root | localhost |</span><br><span class="line">+------+-----------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ ¼å¼åŒ–è¾“å‡º</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> * from mysql.user\G</span><br><span class="line">*************************** 1. row ***************************</span><br><span class="line">                  Host: localhost</span><br><span class="line">                  User: root</span><br><span class="line">              Password: </span><br><span class="line">           Select_priv: Y</span><br><span class="line">           Insert_priv: Y</span><br><span class="line">           Update_priv: Y</span><br><span class="line">           Delete_priv: Y</span><br><span class="line">           Create_priv: Y</span><br><span class="line">             Drop_priv: Y</span><br><span class="line">           Reload_priv: Y</span><br><span class="line">         Shutdown_priv: Y</span><br><span class="line">          Process_priv: Y</span><br><span class="line">             File_priv: Y</span><br><span class="line">            Grant_priv: Y</span><br><span class="line">            </span><br><span class="line"><span class="comment">#æŸ¥çœ‹å¦‚ä½•æˆæƒ</span></span><br><span class="line">mysql&gt; show grants <span class="keyword">for</span> root@<span class="string">&#x27;localhost&#x27;</span>;</span><br><span class="line">+---------------------------------------------------------------------+</span><br><span class="line">| Grants <span class="keyword">for</span> root@localhost                                           |</span><br><span class="line">+---------------------------------------------------------------------+</span><br><span class="line">| GRANT ALL PRIVILEGES ON *.* TO <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> WITH GRANT OPTION |</span><br><span class="line">| GRANT PROXY ON <span class="string">&#x27;&#x27;</span>@<span class="string">&#x27;&#x27;</span> TO <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> WITH GRANT OPTION        |</span><br><span class="line">+---------------------------------------------------------------------+</span><br></pre></td></tr></table></figure><h3 id="MySQLæƒé™ç®¡ç†">MySQLæƒé™ç®¡ç†</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ‰€æœ‰æƒé™</span></span><br><span class="line">INSERT,SELECT, UPDATE, DELETE, CREATE, DROP, RELOAD, SHUTDOWN, PROCESS, FILE,</span><br><span class="line">REFERENCES, INDEX, ALTER, SHOW DATABASES, SUPER, CREATE TEMPORARY TABLES, LOCK</span><br><span class="line">TABLES, EXECUTE, REPLICATION SLAVE, REPLICATION CLIENT, CREATE VIEW, SHOW VIEW,</span><br><span class="line">CREATE ROUTINE, ALTER ROUTINE, CREATE USER, EVENT, TRIGGER, CREATE TABLESPACE</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ›å»ºçš„ç”¨æˆ·åŠ ä¸Šåˆ›å»ºæƒé™</span></span><br><span class="line">with grant option</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¸¤ç§å†™æ³•ä¸€æ ·</span></span><br><span class="line">grant all on *.* to root@<span class="string">&#x27;10.0.0.%&#x27;</span> identified by <span class="string">&#x27;123&#x27;</span> with grant option;</span><br><span class="line">grant all privileges on *.* to <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> identified by <span class="string">&#x27;123&#x27;</span> with grant option;</span><br><span class="line">æƒé™ ä½œç”¨å¯¹è±¡ å½’å± å¯†ç </span><br><span class="line"></span><br><span class="line"><span class="comment">#ç»™å¼€å‘æƒé™</span></span><br><span class="line">INSERT,SELECT, UPDATE</span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾ç½®æƒé™</span></span><br><span class="line">grant all on *.*[å½“å‰MySQLå®ä¾‹ä¸­æ‰€æœ‰åº“ä¸‹çš„æ‰€æœ‰è¡¨]</span><br><span class="line">grant all on wordpress.* [å½“å‰MySQLå®ä¾‹ä¸­wordpressåº“ä¸­æ‰€æœ‰è¡¨ï¼ˆå•åº“çº§åˆ«ï¼‰] ï¼ˆå¸¸ç”¨ï¼‰</span><br><span class="line">grant all on wordpress.user [å½“å‰MySQLå®ä¾‹ä¸­wordpressåº“ä¸­çš„userè¡¨ï¼ˆå•è¡¨çº§åˆ«ï¼‰]</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¦‚ä½•æˆæƒåªæœ‰å­—æ®µæƒé™  è„±æ•å¤„ç†</span></span><br><span class="line">mysql&gt; grant insert,<span class="keyword">select</span>(user,host), update on mysql.user to dev1@<span class="string">&#x27;localhost&#x27;</span> identified by <span class="string">&#x27;123&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼€å‘è®©ä½ å¼€ç”¨æˆ·æµç¨‹å®¡æ‰¹å·¥å•</span></span><br><span class="line">å¼€å‘ -&gt; å¼€å‘æ€»ç›‘ -&gt; è¿ç»´æ€»ç›‘ -&gt; ä½ </span><br><span class="line">1.ç”¨æˆ·å</span><br><span class="line">2.ä»å“ªè¿</span><br><span class="line">3.å¯†ç </span><br><span class="line">4.ç”¨æˆ·</span><br><span class="line">5.æ“ä½œçš„åº“è¡¨</span><br></pre></td></tr></table></figure><h2 id="3-è¿æ¥åŠå¯åŠ¨ç®¡ç†">3.è¿æ¥åŠå¯åŠ¨ç®¡ç†</h2><p><strong>è¿æ¥ç®¡ç†</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@db01 ~]# mysql</span><br><span class="line">-uï¼šæŒ‡å®šç”¨æˆ·</span><br><span class="line">-pï¼šæŒ‡å®šå¯†ç </span><br><span class="line">-hï¼šæŒ‡å®šä¸»æœº</span><br><span class="line">-Sï¼šæŒ‡å®šsocket</span><br><span class="line">-Pï¼šæŒ‡å®šç«¯å£</span><br><span class="line">-eï¼šå…äº¤äº’æŒ‡å®šMySQLçš„SQLè¯­å¥</span><br></pre></td></tr></table></figure><h3 id="MySQLå¯åŠ¨å…³é—­æµç¨‹">MySQLå¯åŠ¨å…³é—­æµç¨‹</h3><p><img src="https://cos.lukme.top/Pic/QQ_1723257413195.png" alt="QQ_1723257413195"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯åŠ¨</span></span><br><span class="line">/etc/init.d/mysqld start</span><br><span class="line">systemctl mysqld start</span><br><span class="line">mysqld_safe --defaults-file=/etc/my.cnf &amp;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœæ­¢</span></span><br><span class="line">/etc/init.d/mysqld stop</span><br><span class="line">systemctl mysqld stop</span><br><span class="line">[root@db01 ~]# mysqladmin -uroot -p123 shutdown</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»¥ä¸‹åœæ­¢æ–¹å¼åˆ«ç”¨</span></span><br><span class="line"><span class="built_in">kill</span> -9 pid ?</span><br><span class="line">killall mysqld ?</span><br><span class="line">pkill mysqld ?</span><br><span class="line">pkill -9 mysqld ?</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="MySQLå¯åŠ¨é…ç½®">MySQLå¯åŠ¨é…ç½®</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">é¢„ç¼–è¯‘ï¼šMySQLé…ç½® datadir=/app/mysql/data</span><br><span class="line">é…ç½®æ–‡ä»¶ï¼šMySQLé…ç½® datadir=/app/tmp/data</span><br><span class="line">å‘½ä»¤è¡Œï¼šmysqld_safe --datadir=/app/xxx/data</span><br><span class="line"></span><br><span class="line">é…ç½®æ–‡ä»¶ï¼š</span><br><span class="line">/etc/my.cnf</span><br><span class="line">/etc/mysql/my.cnf</span><br><span class="line"><span class="variable">$besedir</span>/my.cnf</span><br><span class="line">mysqld_safe --defaults-extra-file=/opt/my.cnf</span><br><span class="line">~/.my.cnf</span><br><span class="line"></span><br><span class="line"><span class="comment">## å½“MySQLå¯åŠ¨æ—¶ï¼ŒæŒ‡å®šäº†è¯¥å‚æ•°ï¼Œé‚£ä¹ˆå…¶ä»–é…ç½®æ–‡ä»¶éƒ½ä¸è¯»å– --defaults-file</span></span><br><span class="line">æ€è€ƒï¼šsocketæ–‡ä»¶åœ¨å“ªï¼Ÿï¼ˆæ€ä¹ˆåŠ è½½é…ç½®æ–‡ä»¶ï¼‰</span><br><span class="line"><span class="comment"># cmakeï¼š</span></span><br><span class="line">socket=/application/mysql/tmp/mysql.sock</span><br><span class="line"><span class="comment"># å‘½ä»¤è¡Œï¼š</span></span><br><span class="line">--socket=/tmp/mysql.sock</span><br><span class="line"><span class="comment"># é…ç½®æ–‡ä»¶ï¼š</span></span><br><span class="line">/etc/my.cnfä¸­[mysqld]æ ‡ç­¾ä¸‹ï¼šsocket=/opt/mysql.sock</span><br><span class="line"><span class="comment"># defaultå‚æ•°ï¼š</span></span><br><span class="line">--defaults-file=/tmp/a.txté…ç½®æ–‡ä»¶ä¸­[mysqld]æ ‡ç­¾ä¸‹ï¼šsocket=/tmp/test.sock</span><br><span class="line"></span><br><span class="line"><span class="comment">#å‘½ä»¤è¡Œä¼˜å…ˆçº§æœ€é«˜ï¼Œæ‰€ä»¥æœ€åsocketæ–‡ä»¶ä¼šåœ¨</span></span><br><span class="line">/tmp/mysql.sock</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## åœ¨ç›¸åŒé…ç½®æƒ…å†µä¸‹ï¼Œé…ç½®ç”Ÿæ•ˆçš„ä¼˜å…ˆçº§</span></span><br><span class="line">é¢„ç¼–è¯‘ &lt; é…ç½®æ–‡ä»¶ ï¼ˆ /etc/my.cnf &lt; /etc/mysql/my.cnf &lt; <span class="variable">$besedir</span>/my.cnf &lt; defaults-extra-file &lt; ~/.my.cnf &lt; defaults-file ï¼‰ &lt; å‘½ä»¤è¡Œ</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLæ¦‚è¿°åŠå®‰è£…</title>
      <link href="/posts/341216ac.html"/>
      <url>/posts/341216ac.html</url>
      
        <content type="html"><![CDATA[<h2 id="1-åˆè¯†æ•°æ®åº“">1.åˆè¯†æ•°æ®åº“</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ</span><br><span class="line">DBMSï¼ˆdatabase management systemï¼‰</span><br><span class="line">-ç®¡ç†æ•°æ®</span><br><span class="line">-å­˜å‚¨æ•°æ®</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ•°æ®åº“ç®¡ç†ç³»ç»Ÿç±»å‹</span></span><br><span class="line">1.å…³ç³»å‹æ•°æ®åº“ RDBMS</span><br><span class="line">-æ‰€æœ‰çš„è¡¨éƒ½æ˜¯æœ‰äºŒç»´è¡¨ç»„æˆ</span><br><span class="line">-è¡¨ä¸è¡¨ä¹‹é—´æœ‰å…³è”</span><br><span class="line">-ä½¿ç”¨SQLï¼ˆç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼‰è¯­å¥æ¥ç®¡ç†</span><br><span class="line">2.éå…³ç³»å‹æ•°æ®åº“NoSQL</span><br><span class="line">-ä¸éœ€è¦ä½¿ç”¨SQLè¯­å¥ï¼Œæ²¡æœ‰äºŒç»´è¡¨</span><br><span class="line"></span><br><span class="line"><span class="comment">#å…³ç³»å‹æ•°æ®åº“å’Œéå…³ç³»å‹æ•°æ®åº“å¸¸è§çš„åº“</span></span><br><span class="line">å…³ç³»å‹ï¼š MySQLã€mariadbã€Oracleã€PostgreSQLã€MSSQL</span><br><span class="line">éå…³ç³»å‹ï¼šRedisï¼ˆé”®å€¼å¯¹ï¼‰ã€MongoDBï¼ˆæ–‡æ¡£å‹æ•°æ®åº“ï¼‰ã€elasticsearchï¼ˆæœç´¢å¼•æ“æ•°æ®åº“ï¼‰ã€memcachedï¼ˆé”®å€¼å¯¹ï¼‰</span><br><span class="line">InfluxDBï¼šTime Series æ—¶åºæ•°æ®åº“ï¼ˆé€‚åˆå‡ºå›¾ï¼ŒæŸ¥è¯¢æ—¶é—´è½´æ•°æ®æ–¹ä¾¿ï¼‰</span><br><span class="line">OpenTSDBï¼šTime Series æ—¶åºæ•°æ®åº“ï¼ˆé€‚åˆå‡ºå›¾ï¼ŒæŸ¥è¯¢æ—¶é—´è½´æ•°æ®æ–¹ä¾¿ï¼‰</span><br><span class="line">etcdï¼šé”®å€¼å¯¹æ•°æ®åº“ï¼ˆé…ç½®æ–‡ä»¶ç®¡ç†ä¸­å¿ƒï¼‰</span><br><span class="line"></span><br><span class="line"><span class="comment">#MySQLå®‰è£…æ–¹å¼</span></span><br><span class="line">1.yumå®‰è£…</span><br><span class="line">2.äºŒè¿›åˆ¶å®‰è£…</span><br><span class="line">3.æºç å®‰è£…</span><br><span class="line">4.dockerå®¹å™¨</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">root@(none) &gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| linux50            |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| student            |</span><br><span class="line">| <span class="built_in">test</span>               |</span><br><span class="line">| world              |</span><br><span class="line">| zrlog              |</span><br><span class="line">+--------------------+</span><br><span class="line">8 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.21 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#å­˜æ”¾MySQæ‰€æœ‰å…ƒæ•°æ®çš„åº“ï¼Œå¹¶ä¸”åœ¨ç£ç›˜ä¸æ˜¾ç¤º</span></span><br><span class="line">information_schema</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ•°æ®åº“å­˜å‚¨æœåŠ¡æ¦‚è¿°">æ•°æ®åº“å­˜å‚¨æœåŠ¡æ¦‚è¿°</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä»Šæ—¶ä»Šâ½‡ï¼Œæ•°æ®åº“ç³»ç»Ÿå·²ç»æˆä¸ºå„ä¸ªåŠ¨æ€â½¹ç«™ä¸Š web åº”â½¤ç¨‹åºçš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚ ç”±äºâ¾®å¸¸æ•æ„Ÿå’Œæœºå¯†çš„æ•°æ®æœ‰å¯èƒ½ä¿å­˜åœ¨æ•°æ®åº“ä¸­ï¼Œæ‰€ä»¥å¯¹æ•°æ®åº“å®æ–½ä¿æŠ¤å°±æ˜¾å¾—å°¤ä¸ºé‡è¦äº†ã€‚ è¦ä»æ•°æ®åº“ä¸­æå–æˆ–è€…å­˜â¼Šæ•°æ®ï¼Œå°±å¿…é¡»ç»è¿‡è¿æ¥æ•°æ®åº“ã€å‘é€â¼€æ¡åˆæ³•æŸ¥è¯¢ã€è·å–ç»“æœã€å…³é—­è¿æ¥ç­‰æ­¥éª¤ã€‚ â½¬å‰ï¼Œèƒ½å®Œæˆè¿™â¼€ç³»åˆ—åŠ¨ä½œçš„æœ€å¸¸â½¤çš„æŸ¥è¯¢è¯­â¾”æ˜¯ç»“æ„åŒ–æŸ¥è¯¢è¯­â¾” Structured Query Language (SQL)ã€‚ å¹¶ä¸”åœ¨å¯¹æ•°æ®åº“è¿›â¾ç®¡ç†ä¸ç»´æŠ¤çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦å¯¹æ•°æ®åº“çš„ç›¸å…³çŸ¥è¯†è¿›â¾å……åˆ†çš„æŒæ¡ï¼Œæœ€ç»ˆæ‰èƒ½ä¿è¯ä¼ä¸šæ ¸â¼¼æ•°æ®çš„å®‰å…¨æ€§ã€‚</span><br></pre></td></tr></table></figure><h3 id="è·å–-MySQL">è·å– MySQL</h3><p>å®˜æ–¹ï¼š<a href="https://www.mysql.com/">https://www.mysql.com/</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">MySQL5.6ï¼šGA 6-12ä¸ªæœˆï¼Œå°ç‰ˆæœ¬å·ä¸ºå¶æ•°ç‰ˆçš„</span><br><span class="line">MySQL5.7ï¼šGA 6-12ä¸ªæœˆï¼Œå°ç‰ˆæœ¬å·ä¸ºå¶æ•°ç‰ˆçš„ï¼Œ5.7.20ä»¥ä¸Šç‰ˆæœ¬ï¼ˆMGR MySQLè‡ªå¸¦çš„é«˜å¯ç”¨åŠŸèƒ½ï¼‰</span><br><span class="line"></span><br><span class="line">è·å–çš„åŒ…bugå°‘</span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/240807%20162316.gif" alt="240807 162316"></p><p><img src="https://cos.lukme.top/Pic/QQ_1723024541340.png" alt="QQ_1723024541340"></p><h3 id="å­—ç¬¦é›†">å­—ç¬¦é›†</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŸ¥è¯¢å­—ç¬¦é›†</span></span><br><span class="line"></span><br><span class="line">root@(none) &gt; show collation;</span><br><span class="line">+--------------------------+----------+-----+---------+----------+---------+</span><br><span class="line">| Collation                | Charset  | Id  | Default | Compiled | Sortlen |</span><br><span class="line">+--------------------------+----------+-----+---------+----------+---------+</span><br><span class="line">| big5_chinese_ci          | big5     |   1 | Yes     | Yes      |       1 |</span><br><span class="line">| big5_bin                 | big5     |  84 |         | Yes      |       1 |</span><br><span class="line">| dec8_swedish_ci          | dec8     |   3 | Yes     | Yes      |       1 |</span><br><span class="line">| dec8_bin                 | dec8     |  69 |         | Yes      |       1 |</span><br><span class="line">| cp850_general_ci         | cp850    |   4 | Yes     | Yes      |       1 |</span><br><span class="line">| cp850_bin                | cp850    |  80 |         | Yes      |       1 |</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ ¡éªŒè§„åˆ™</span></span><br><span class="line">1ï¼‰ciï¼šå¤§å°å†™ä¸æ•æ„Ÿ</span><br><span class="line">2ï¼‰csæˆ–binï¼šå¤§å°å†™æ•æ„Ÿ</span><br><span class="line"></span><br><span class="line"><span class="comment">## æŸ¥çœ‹å½“å‰ç³»ç»Ÿçš„å­—ç¬¦é›†</span></span><br><span class="line">[root@db04 ~]# <span class="built_in">echo</span> <span class="variable">$LANG</span></span><br><span class="line">en_US.UTF-8</span><br><span class="line"></span><br><span class="line"><span class="comment">## ä¸´æ—¶ä¿®æ”¹ç³»ç»Ÿå­—ç¬¦é›†</span></span><br><span class="line">[root@db04 ~]# <span class="built_in">export</span> LANG=en_US.UTF-8</span><br><span class="line"></span><br><span class="line"><span class="comment">## æ°¸ä¹…ä¿®æ”¹ CentOS7</span></span><br><span class="line">[root@db04 ~]# vim /etc/locale.conf</span><br><span class="line">LANG=<span class="string">&quot;en_US.UTF-8&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## æ°¸ä¹…ä¿®æ”¹ CentOS6</span></span><br><span class="line">[root@db04 ~]# vim /etc/sysconfig/i18n</span><br><span class="line">LANG=<span class="string">&quot;en_US.UTF-8</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">åº”ç”¨ä¿®æ”¹å­—ç¬¦é›†</span></span><br><span class="line"><span class="string">[root@db04 ~]# vim /etc/my.cnf</span></span><br><span class="line"><span class="string">[mysqld]</span></span><br><span class="line"><span class="string">character_set_server=utf8</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">mysql&gt; show create database mysql;</span></span><br><span class="line"><span class="string">+----------+------------------------------------------------------------------+</span></span><br><span class="line"><span class="string">| Database | Create Database |</span></span><br><span class="line"><span class="string">+----------+------------------------------------------------------------------+</span></span><br><span class="line"><span class="string">| mysql | CREATE DATABASE `mysql` /*!40100 DEFAULT CHARACTER SET latin1 */ |</span></span><br><span class="line"><span class="string">+----------+------------------------------------------------------------------+</span></span><br><span class="line"><span class="string">mysql&gt; alter database mysql charset utf8;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#æŸ¥è¯¢æ‰€æœ‰ä¸æ˜¯utf8çš„å­—ç¬¦é›†</span></span><br><span class="line"><span class="string">mysql&gt; select * from information_schema.tables where table_collation not like &#x27;%utf8%&#x27;;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">### ä¿®æ”¹å•å¼ è¡¨å­—ç¬¦é›†</span></span><br><span class="line"><span class="string">mysql&gt; alter table zls.test111 charset utf8;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">### æ‰¹é‡ä¿®æ”¹è¡¨çš„å­—ç¬¦é›†</span></span><br><span class="line"><span class="string">## æ–¹æ³•ä¸€ï¼š</span></span><br><span class="line"><span class="string">[root@db04 ~]# for n in `seq 7`;do mysql -uroot -p123 -e &quot;</span>alter table</span><br><span class="line">zabbix.zabbix<span class="variable">$n</span> charset utf8<span class="string">&quot; ;done</span></span><br><span class="line"><span class="string">## æ–¹æ³•äºŒï¼š</span></span><br><span class="line"><span class="string">[root@db04 ~]# mysqldump -uroot -p123 -B zabbix &gt; /tmp/zabbix.sql</span></span><br><span class="line"><span class="string">[root@db04 ~]# vim /tmp/zabbix.sql</span></span><br><span class="line"><span class="string">:%s#CHARSET=latin1#CHARSET=utf8#g</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[root@db04 ~]# sed -i &#x27;s#CHARSET=latin1#CHARSET=utf8#g&#x27; /tmp/zabbix.sql</span></span><br><span class="line"><span class="string">[root@db04 ~]# mysql -uroot -p123 &lt; /tmp/zabbix.sql</span></span><br></pre></td></tr></table></figure><h2 id="2-å®‰è£…MySQL">2.å®‰è£…MySQL</h2><h3 id="æºç å®‰è£…MySQL5-6">æºç å®‰è£…MySQL5.6</h3><p><strong>ä»¥5.6.50ç‰ˆæœ¬ä¸ºä¾‹</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è·å–mysqlåŒ…</span></span><br><span class="line"><span class="comment">#æºç å®‰è£…</span></span><br><span class="line">wget https://downloads.mysql.com/archives/get/p/23/file/mysql-5.6.50.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment">#äºŒè¿›åˆ¶å®‰è£…</span></span><br><span class="line">wget https://downloads.mysql.com/archives/get/p/23/file/mysql-5.6.50-linux-glibc2.12-x86_64.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment">#å›½å¤–ç½‘ç«™ä¸‹è½½æ…¢ï¼Œæœ‰æ¡ä»¶å¼€é­”æ³•</span></span><br></pre></td></tr></table></figure><h4 id="ç¼–è¯‘-å®‰è£…">ç¼–è¯‘ &amp;&amp; å®‰è£…</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#0.åˆ›å»ºå®‰è£…ç›®å½•</span></span><br><span class="line"><span class="built_in">mkdir</span> /app</span><br><span class="line"></span><br><span class="line"><span class="comment">#1.å®‰è£…ä¾èµ–</span></span><br><span class="line">yum install -y cmake  gcc gcc-c++ git openssl-devel ncurses-devel autoconf libaio-devel</span><br><span class="line"></span><br><span class="line"><span class="comment">#2.è§£å‹</span></span><br><span class="line">tar xf mysql-5.6.50.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment">#3.ç”Ÿæˆ ./configure --prefix=xxx cmakeï¼ˆè¿™ä¸€æ­¥éœ€è¦cmakeä¾èµ–ï¼Œå’ŒCç¯å¢ƒï¼‰</span></span><br><span class="line">cmake . -DCMAKE_INSTALL_PREFIX=/app/mysql-5.6.50 \</span><br><span class="line">-DMYSQL_DATADIR=/app/mysql-5.6.50/data \</span><br><span class="line">-DMYSQL_UNIX_ADDR=/app/mysql-5.6.50/tmp/mysql.sock \</span><br><span class="line">-DDEFAULT_CHARSET=utf8 \</span><br><span class="line">-DDEFAULT_COLLATION=utf8_general_ci \</span><br><span class="line">-DWITH_EXTRA_CHARSETS=all \</span><br><span class="line">-DWITH_INNOBASE_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITH_FEDERATED_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITH_BLACKHOLE_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITHOUT_EXAMPLE_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITH_ZLIB=bundled \</span><br><span class="line">-DWITH_SSL=system \</span><br><span class="line">-DENABLED_LOCAL_INFILE=1 \</span><br><span class="line">-DWITH_EMBEDDED_SERVER=1 \</span><br><span class="line">-DENABLE_DOWNLOADS=1 \</span><br><span class="line">-DWITH_DEBUG=0</span><br><span class="line"></span><br><span class="line"><span class="comment">#####æ³¨ï¼š</span></span><br><span class="line">å¦‚æœé‡åˆ°æŠ¥é”™ï¼Œä¸‹æ¬¡cmakeä¹‹å‰ä¸€å®šè¦åˆ é™¤CMakeCache.txtæ–‡ä»¶ï¼ˆæ‰§è¡Œcmakeéƒ½ä¼šäº§ç”Ÿï¼‰</span><br><span class="line">å¦‚æœæ˜¯ç¼ºå°‘gccç­‰ç¯å¢ƒæŠ¥é”™ï¼Œå®‰è£…å®Œæ¯•cç¯å¢ƒä¹‹åï¼Œè¦åˆ é™¤æ•´ä¸ªåŒ…åœ¨é‡æ–°è§£å‹å†å»é‡ï¼Œcmake</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ç¨‹åºå­˜æ”¾ä½ç½®</span></span><br><span class="line">cmake . -DCMAKE_INSTALL_PREFIX=/app/mysql-5.6.50 \</span><br><span class="line"><span class="comment">#æ•°æ®å­˜æ”¾ä½ç½®</span></span><br><span class="line">-DMYSQL_DATADIR=/app/mysql-5.6.50/data \</span><br><span class="line"><span class="comment">#socketæ–‡ä»¶å­˜æ”¾ä½ç½®</span></span><br><span class="line">-DMYSQL_UNIX_ADDR=/app/mysql-5.6.50/tmp/mysql.sock \</span><br><span class="line"><span class="comment">#ä½¿ç”¨utf8å­—ç¬¦é›†</span></span><br><span class="line">-DDEFAULT_CHARSET=utf8 \</span><br><span class="line"><span class="comment">#æ ¡éªŒè§„åˆ™</span></span><br><span class="line">-DDEFAULT_COLLATION=utf8_general_ci \</span><br><span class="line"><span class="comment">#ä½¿ç”¨å…¶ä»–é¢å¤–çš„å­—ç¬¦é›†</span></span><br><span class="line">-DWITH_EXTRA_CHARSETS=all \</span><br><span class="line"><span class="comment">#æ”¯æŒçš„å­˜å‚¨å¼•æ“</span></span><br><span class="line">-DWITH_INNOBASE_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITH_FEDERATED_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITH_BLACKHOLE_STORAGE_ENGINE=1 \</span><br><span class="line"><span class="comment">#ç¦ç”¨çš„å­˜å‚¨å¼•æ“</span></span><br><span class="line">-DWITHOUT_EXAMPLE_STORAGE_ENGINE=1 \</span><br><span class="line"><span class="comment">#å¯ç”¨zlibåº“æ”¯æŒï¼ˆzibã€gzibç›¸å…³ï¼‰</span></span><br><span class="line">-DWITH_ZLIB=bundled \</span><br><span class="line"><span class="comment">#å¯ç”¨SSLåº“æ”¯æŒï¼ˆå®‰å…¨å¥—æ¥å±‚ï¼‰</span></span><br><span class="line">-DWITH_SSL=bundled \</span><br><span class="line"><span class="comment">#å¯ç”¨æœ¬åœ°æ•°æ®å¯¼å…¥æ”¯æŒ</span></span><br><span class="line">-DENABLED_LOCAL_INFILE=1 \</span><br><span class="line"><span class="comment">#ç¼–è¯‘åµŒå…¥å¼æœåŠ¡å™¨æ”¯æŒ</span></span><br><span class="line">-DWITH_EMBEDDED_SERVER=1 \</span><br><span class="line"><span class="comment"># mysql5.6æ”¯æŒäº†googleçš„c++mockæ¡†æ¶äº†ï¼Œå…è®¸ä¸‹è½½ï¼Œå¦åˆ™ä¼šå®‰è£…æŠ¥é”™ã€‚</span></span><br><span class="line">-DENABLE_DOWNLOADS=1 \</span><br><span class="line"><span class="comment">#ç¦ç”¨debugï¼ˆé»˜è®¤ä¸ºç¦ç”¨ï¼‰</span></span><br><span class="line">-DWITH_DEBUG=0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.ç¼–è¯‘å’Œå®‰è£…</span></span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><h4 id="å®‰è£…æ•°æ®åº“">å®‰è£…æ•°æ®åº“</h4><p><strong>å’ŒäºŒè¿›åˆ¶å®‰è£…ä¸€æ ·æ­¥éª¤ï¼ŒæŠ¥é”™ä¸ä¸€æ ·</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.æ‹·è´å¯åŠ¨è„šæœ¬åˆ°init.dä¸‹</span></span><br><span class="line"><span class="built_in">cp</span> /app/mysql-5.6.50/support-files/mysql.server /etc/init.d/mysqld</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 2.åˆ›å»ºMySQLç¨‹åºç”¨æˆ·</span></span><br><span class="line">useradd mysql -s /sbin/nologin -M</span><br><span class="line"></span><br><span class="line"><span class="comment">#3.åˆå§‹åŒ–mysqlç›®å½•</span></span><br><span class="line">/app/mysql-5.6.50/scripts/mysql_install_db --user=mysql --basedir=/app/mysql-5.6.50 --datadir=/app/mysql-5.6.50/data</span><br><span class="line"></span><br><span class="line"><span class="comment">###########################</span></span><br><span class="line">--useræŒ‡å®šç”¨æˆ· </span><br><span class="line">--basediræŒ‡å®šå®‰è£…ç›®å½•</span><br><span class="line">--datadirç¼–è¯‘çš„æ—¶å€™æŒ‡å®šçš„dataç›®å½•</span><br><span class="line"><span class="comment">###########################</span></span><br><span class="line"></span><br><span class="line">[root@db01 mysql-5.6.50]# <span class="built_in">echo</span> $?</span><br><span class="line">0</span><br><span class="line"></span><br><span class="line"><span class="comment">#4.å¯åŠ¨æ•°æ®åº“</span></span><br><span class="line">/etc/init.d/mysqld start<span class="comment">#ï¼ˆæŠ¥é”™åŸå› è§--å¯åŠ¨æŠ¥é”™è§£å†³ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#5.æ­£ç¡®å¯åŠ¨æµç¨‹å‰æ(æ³¨æ„æ˜¯å¦æœ‰mariadbæ•°æ®åº“)</span></span><br><span class="line"><span class="built_in">mkdir</span> /app/mysql-5.6.50/tmp</span><br><span class="line"><span class="built_in">chown</span> -R mysql.mysql /app/mysql-5.6.50/</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ£€æŸ¥æ˜¯å¦æœ‰mariadbå¹¶åˆ é™¤</span></span><br><span class="line">[root@db01 mysql-5.6.50]# rpm -qa|grep mariadb</span><br><span class="line">mariadb-libs-5.5.60-1.el7_5.x86_64</span><br><span class="line">[root@db01 mysql-5.6.50]# rpm -e --nodeps mariadb-libs-5.5.60-1.el7_5.x86_64</span><br><span class="line">[root@db01 mysql-5.6.50]# </span><br><span class="line"></span><br><span class="line"><span class="comment">#å†æ¬¡æ‰§è¡Œå¯åŠ¨å‘½ä»¤</span></span><br><span class="line">[root@db01 ~]# /etc/init.d/mysqld start</span><br><span class="line">Starting MySQL. SUCCESS! </span><br><span class="line"></span><br><span class="line"><span class="comment">#6.è®¾ç½®å¼€æœºå¯åŠ¨</span></span><br><span class="line">chkconfig --add mysqld</span><br><span class="line"></span><br><span class="line">chkconfig --list</span><br><span class="line">mysqld          0:off   1:off   2:on    3:on    4:on    5:on    6:off</span><br><span class="line"></span><br><span class="line"><span class="comment">#7.è¿æ¥æ•°æ®åº“ï¼ˆä¸ºå•¥éœ€è¦æ·»åŠ ç¯å¢ƒå˜é‡è¯¦æƒ…è§--è¿æ¥mysqlæŠ¥é”™ï¼‰</span></span><br><span class="line"><span class="comment">#æ·»åŠ ç¯å¢ƒå˜é‡</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;export PATH=&quot;/app/mysql-5.6.50/bin:$PATH&quot;&#x27;</span> &gt;/etc/profile.d/mysql.sh</span><br><span class="line"></span><br><span class="line"><span class="comment">#åŠ è½½ç¯å¢ƒå˜é‡</span></span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä½¿ç”¨mysqlå°±å¯ä»¥æ„‰å¿«è¿æ¥æ•°æ®åº“äº†</span></span><br><span class="line">[root@db01 ~]# mysql</span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection <span class="built_in">id</span> is 3</span><br><span class="line">Server version: 5.6.50 Source distribution</span><br><span class="line">Copyright (c) 2000, 2020, Oracle and/or its affiliates. All rights reserved.</span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line">Type <span class="string">&#x27;help;&#x27;</span> or <span class="string">&#x27;\h&#x27;</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">&#x27;\c&#x27;</span> to clear the current input statement.</span><br><span class="line">mysql&gt; </span><br></pre></td></tr></table></figure><h4 id="å¯åŠ¨æ•°æ®åº“æŠ¥é”™è§£å†³">å¯åŠ¨æ•°æ®åº“æŠ¥é”™è§£å†³</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@db01 ~]# /etc/init.d/mysqld start</span><br><span class="line">Starting MySQL.Logging to <span class="string">&#x27;/app/mysql-5.6.50/data/db01.err&#x27;</span>.</span><br><span class="line">240807 14:03:01 mysqld_safe Directory <span class="string">&#x27;/app/mysql-5.6.50/tmp&#x27;</span> <span class="keyword">for</span> UNIX socket file don<span class="string">&#x27;t exists.</span></span><br><span class="line"><span class="string"> ERROR! The server quit without updating PID file (/app/mysql-5.6.50/data/db01.pid).</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#æŠ¥é”™åˆ†æï¼š</span></span><br><span class="line"><span class="string">ERROR! The server quit without updating PID file (/app/mysql-5.6.50/data/db01.pid).</span></span><br><span class="line"><span class="string"> #æ²¡æœ‰pidæ–‡ä»¶ï¼Œä¸ºå•¥æ²¡æœ‰ï¼Ÿ</span></span><br><span class="line"><span class="string"> åªæœ‰ç¨‹åºå¯åŠ¨æ‰ä¼šæœ‰pidæ–‡ä»¶ï¼Œè¯´æ˜mysqlæ ¹æœ¬å°±æ²¡æœ‰æ­£å¸¸å¯åŠ¨</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#å¾€ä¸Šåˆ†æ</span></span><br><span class="line"><span class="string">240807 14:03:01 mysqld_safe Directory &#x27;</span>/app/mysql-5.6.50/tmp<span class="string">&#x27; for UNIX socket file don&#x27;</span>t exists.</span><br><span class="line"><span class="comment">#socket æ–‡ä»¶ä¸å­˜åœ¨ï¼Ÿ</span></span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/QQ_1723015942442.png" alt="QQ_1723015942442"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">æŠ¥é”™åˆ†æï¼š</span><br><span class="line">ç¼–è¯‘çš„æ—¶å€™æŒ‡å®šsocketæ–‡ä»¶å­˜æ”¾åœ¨æ­¤å¤„ï¼Œä½†æ˜¯æ²¡æœ‰è¿™ä¸ªç›®å½•</span><br><span class="line">è§£å†³ï¼š</span><br><span class="line"><span class="built_in">mkdir</span> /app/mysql-5.6.50/tmp</span><br><span class="line"></span><br><span class="line"><span class="comment">#å†æ¬¡æ‰§è¡Œå¯åŠ¨å‘½ä»¤</span></span><br><span class="line">[root@db01 ~]# /etc/init.d/mysqld start</span><br><span class="line">Starting MySQL.Logging to <span class="string">&#x27;/app/mysql-5.6.50/data/db01.err&#x27;</span>.</span><br><span class="line">... ERROR! The server quit without updating PID file (/app/mysql-5.6.50/data/db01.pid).</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ†æï¼šçœ‹æ—¥å¿—</span></span><br><span class="line">[root@db01 ~]# <span class="built_in">cat</span> /app/mysql-5.6.50/data/db01.err</span><br><span class="line">2024-08-07 15:04:15 24317 [Note] Plugin <span class="string">&#x27;FEDERATED&#x27;</span> is disabled.</span><br><span class="line">2024-08-07 15:04:15 24317 [Note] InnoDB: Using atomics to ref count buffer pool pages</span><br><span class="line">2024-08-07 15:04:15 24317 [Note] InnoDB: The InnoDB memory heap is disabled</span><br><span class="line">2024-08-07 15:04:15 24317 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins</span><br><span class="line">2024-08-07 15:04:15 24317 [Note] InnoDB: Memory barrier is not used</span><br><span class="line">2024-08-07 15:04:15 24317 [Note] InnoDB: Compressed tables use zlib 1.2.11</span><br><span class="line">2024-08-07 15:04:15 24317 [Note] InnoDB: Using Linux native AIO</span><br><span class="line">2024-08-07 15:04:15 24317 [Note] InnoDB: Using CPU crc32 instructions</span><br><span class="line">2024-08-07 15:04:15 24317 [Note] InnoDB: Initializing buffer pool, size = 128.0M</span><br><span class="line">2024-08-07 15:04:15 24317 [Note] InnoDB: Completed initialization of buffer pool</span><br><span class="line">2024-08-07 15:04:15 24317 [Note] InnoDB: Highest supported file format is Barracuda.</span><br><span class="line">2024-08-07 15:04:15 24317 [Note] InnoDB: 128 rollback segment(s) are active.</span><br><span class="line">2024-08-07 15:04:15 24317 [Note] InnoDB: Waiting <span class="keyword">for</span> purge to start</span><br><span class="line">2024-08-07 15:04:15 24317 [Note] InnoDB: 5.6.50 started; <span class="built_in">log</span> sequence number 1625987</span><br><span class="line">2024-08-07 15:04:15 24317 [Warning] No existing UUID has been found, so we assume that this is the first time that this server has been started. Generating a new UUID: 421a7ae9-548b-11ef-aa26-000c292b15c7.</span><br><span class="line">2024-08-07 15:04:15 24317 [Note] RSA private key file not found: /app/mysql-5.6.50/data//private_key.pem. Some authentication plugins will not work.</span><br><span class="line">2024-08-07 15:04:15 24317 [Note] RSA public key file not found: /app/mysql-5.6.50/data//public_key.pem. Some authentication plugins will not work.</span><br><span class="line">2024-08-07 15:04:15 24317 [Note] Server hostname (bind-address): <span class="string">&#x27;*&#x27;</span>; port: 3306</span><br><span class="line">2024-08-07 15:04:15 24317 [Note] IPv6 is available.</span><br><span class="line">2024-08-07 15:04:15 24317 [Note]   - <span class="string">&#x27;::&#x27;</span> resolves to <span class="string">&#x27;::&#x27;</span>;</span><br><span class="line">2024-08-07 15:04:15 24317 [Note] Server socket created on IP: <span class="string">&#x27;::&#x27;</span>.</span><br><span class="line">2024-08-07 15:04:15 24317 [ERROR] Can<span class="string">&#x27;t start server : Bind on unix socket: Permission denied</span></span><br><span class="line"><span class="string">2024-08-07 15:04:15 24317 [ERROR] Do you already have another mysqld server running on socket: /app/mysql-5.6.50/tmp/mysql.sock ?</span></span><br><span class="line"><span class="string">2024-08-07 15:04:15 24317 [ERROR] Aborting</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2024-08-07 15:04:15 24317 [Note] Binlog end</span></span><br><span class="line"><span class="string">2024-08-07 15:04:15 24317 [Note] Shutting down plugin &#x27;</span>partition<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:15 24317 [Note] Shutting down plugin &#x27;</span>PERFORMANCE_SCHEMA<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:15 24317 [Note] Shutting down plugin &#x27;</span>INNODB_SYS_DATAFILES<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:15 24317 [Note] Shutting down plugin &#x27;</span>INNODB_SYS_TABLESPACES<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:15 24317 [Note] Shutting down plugin &#x27;</span>INNODB_SYS_FOREIGN_COLS<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:15 24317 [Note] Shutting down plugin &#x27;</span>INNODB_SYS_FOREIGN<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:15 24317 [Note] Shutting down plugin &#x27;</span>INNODB_SYS_FIELDS<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:15 24317 [Note] Shutting down plugin &#x27;</span>INNODB_SYS_COLUMNS<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:15 24317 [Note] Shutting down plugin &#x27;</span>INNODB_SYS_INDEXES<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:15 24317 [Note] Shutting down plugin &#x27;</span>INNODB_SYS_TABLESTATS<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:15 24317 [Note] Shutting down plugin &#x27;</span>INNODB_SYS_TABLES<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:15 24317 [Note] Shutting down plugin &#x27;</span>INNODB_FT_INDEX_TABLE<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:15 24317 [Note] Shutting down plugin &#x27;</span>INNODB_FT_INDEX_CACHE<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:15 24317 [Note] Shutting down plugin &#x27;</span>INNODB_FT_CONFIG<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:15 24317 [Note] Shutting down plugin &#x27;</span>INNODB_FT_BEING_DELETED<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:15 24317 [Note] Shutting down plugin &#x27;</span>INNODB_FT_DELETED<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:15 24317 [Note] Shutting down plugin &#x27;</span>INNODB_FT_DEFAULT_STOPWORD<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:15 24317 [Note] Shutting down plugin &#x27;</span>INNODB_METRICS<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:15 24317 [Note] Shutting down plugin &#x27;</span>INNODB_BUFFER_POOL_STATS<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:15 24317 [Note] Shutting down plugin &#x27;</span>INNODB_BUFFER_PAGE_LRU<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:15 24317 [Note] Shutting down plugin &#x27;</span>INNODB_BUFFER_PAGE<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:15 24317 [Note] Shutting down plugin &#x27;</span>INNODB_CMP_PER_INDEX_RESET<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:15 24317 [Note] Shutting down plugin &#x27;</span>INNODB_CMP_PER_INDEX<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:15 24317 [Note] Shutting down plugin &#x27;</span>INNODB_CMPMEM_RESET<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:15 24317 [Note] Shutting down plugin &#x27;</span>INNODB_CMPMEM<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:15 24317 [Note] Shutting down plugin &#x27;</span>INNODB_CMP_RESET<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:15 24317 [Note] Shutting down plugin &#x27;</span>INNODB_CMP<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:15 24317 [Note] Shutting down plugin &#x27;</span>INNODB_LOCK_WAITS<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:15 24317 [Note] Shutting down plugin &#x27;</span>INNODB_LOCKS<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:15 24317 [Note] Shutting down plugin &#x27;</span>INNODB_TRX<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:15 24317 [Note] Shutting down plugin &#x27;</span>InnoDB<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:15 24317 [Note] InnoDB: FTS optimize thread exiting.</span></span><br><span class="line"><span class="string">2024-08-07 15:04:15 24317 [Note] InnoDB: Starting shutdown...</span></span><br><span class="line"><span class="string">2024-08-07 15:04:17 24317 [Note] InnoDB: Shutdown completed; log sequence number 1625997</span></span><br><span class="line"><span class="string">2024-08-07 15:04:17 24317 [Note] Shutting down plugin &#x27;</span>BLACKHOLE<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:17 24317 [Note] Shutting down plugin &#x27;</span>ARCHIVE<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:17 24317 [Note] Shutting down plugin &#x27;</span>MRG_MYISAM<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:17 24317 [Note] Shutting down plugin &#x27;</span>MyISAM<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:17 24317 [Note] Shutting down plugin &#x27;</span>MEMORY<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:17 24317 [Note] Shutting down plugin &#x27;</span>CSV<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:17 24317 [Note] Shutting down plugin &#x27;</span>sha256_password<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:17 24317 [Note] Shutting down plugin &#x27;</span>mysql_old_password<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:17 24317 [Note] Shutting down plugin &#x27;</span>mysql_native_password<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:17 24317 [Note] Shutting down plugin &#x27;</span>binlog<span class="string">&#x27;</span></span><br><span class="line"><span class="string">2024-08-07 15:04:17 24317 [Note] /app/mysql-5.6.50/bin/mysqld: Shutdown complete</span></span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/QQ_1723015890661.png" alt="QQ_1723015890661"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Can<span class="string">&#x27;t start server : Bind on unix socket: Permission denied</span></span><br><span class="line"><span class="string">åˆ†æï¼šæƒé™ä¸è¶³</span></span><br><span class="line"><span class="string">è§£å†³ï¼š</span></span><br><span class="line"><span class="string">chown -R mysql.mysql /app/mysql-5.6.50/</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#å†æ¬¡æ‰§è¡Œå¯åŠ¨å‘½ä»¤</span></span><br><span class="line"><span class="string">[root@db01 ~]# /etc/init.d/mysqld start</span></span><br><span class="line"><span class="string">Starting MySQL. SUCCESS! </span></span><br></pre></td></tr></table></figure><h4 id="è¿æ¥msyqlæŠ¥é”™">è¿æ¥msyqlæŠ¥é”™</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">[root@db01 mysql-5.6.50]# mysql</span><br><span class="line">-bash: mysql: <span class="built_in">command</span> not found</span><br><span class="line"><span class="comment">#ä¸ºå•¥æ²¡æœ‰mysqlå‘½ä»¤ï¼Ÿ</span></span><br><span class="line">æ²¡æœ‰æ·»åŠ ç¯å¢ƒå˜é‡ï¼Œmysqlå‘½ä»¤åœ¨/app/mysql-5.6.50/binä¸‹</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä½¿ç”¨ç»å¯¹è·¯å¾„ä¹Ÿå¯ä»¥å¯åŠ¨</span></span><br><span class="line">[root@db01 mysql-5.6.50]# /app/mysql-5.6.50/bin/mysql</span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection <span class="built_in">id</span> is 1</span><br><span class="line">Server version: 5.6.50 Source distribution</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2020, Oracle and/or its affiliates. All rights reserved.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type <span class="string">&#x27;help;&#x27;</span> or <span class="string">&#x27;\h&#x27;</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">&#x27;\c&#x27;</span> to clear the current input statement.</span><br><span class="line"></span><br><span class="line">mysql&gt; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">###æ€ä¹ˆè§£å†³ï¼Ÿ</span></span><br><span class="line">æ–¹æ³•1.</span><br><span class="line"><span class="comment">#æ·»åŠ ç¯å¢ƒå˜é‡</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;export PATH=&quot;/app/mysql-5.6.50/bin:$PATH&quot;&#x27;</span> &gt;/etc/profile.d/mysql.sh</span><br><span class="line"></span><br><span class="line"><span class="comment">#é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡</span></span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br><span class="line"></span><br><span class="line">æ–¹æ³•2.</span><br><span class="line"><span class="built_in">ln</span> -s /app/mysql-5.6.50/bin/* /usr/bin/</span><br><span class="line"></span><br><span class="line"><span class="comment">#å»ºè®®</span></span><br><span class="line">ç»™mysqlåšä¸ªè½¯é“¾æ¥ï¼Œå‡å¦‚mysqlå‡çº§å°±ä¸éœ€è¦å†æ¬¡åšè½¯é“¾æ¥äº†</span><br><span class="line"><span class="built_in">ln</span> -s /app/mysql-5.6.50/ /app/mysql</span><br><span class="line"><span class="built_in">ln</span> -s /app/mysql/bin/* /usr/bin/</span><br></pre></td></tr></table></figure><h4 id="åˆå§‹åŒ–æŠ¥é”™è§£å†³">åˆå§‹åŒ–æŠ¥é”™è§£å†³</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŠ¥é”™</span></span><br><span class="line">FATAL ERROR: please install the following Perl modules before executing /app/mysql-5.6.50/scripts/mysql_install_db:</span><br><span class="line">Data::Dumper</span><br><span class="line"><span class="comment">#è§£å†³æ–¹æ³•æ˜¯å®‰è£…autoconfåº“å’Œlibaioåº“æ–‡ä»¶</span></span><br><span class="line">yum -y install autoconf libaio-devel</span><br><span class="line"></span><br><span class="line"><span class="comment">#å†æ¬¡æ‰§è¡Œåˆå§‹åŒ–æ•°æ®åº“æ“ä½œ</span></span><br><span class="line">[root@db01 ~]# /app/mysql-5.6.50/scripts/mysql_install_db --user=mysql --basedir=/app/mysql-5.6.50 --datadir=/app/mysql-5.6.50/data</span><br><span class="line">Installing MySQL system tables...2024-08-07 14:00:39 0 [Warning] TIMESTAMP with implicit DEFAULT value is deprecated. Please use --explicit_defaults_for_timestamp server option (see documentation <span class="keyword">for</span> more details).</span><br><span class="line">2024-08-07 14:00:39 0 [Note] Ignoring --secure-file-priv value as server is running with --bootstrap.</span><br><span class="line">2024-08-07 14:00:39 0 [Note] /app/mysql-5.6.50/bin/mysqld (mysqld 5.6.50) starting as process 23552 ...</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: Using atomics to ref count buffer pool pages</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: The InnoDB memory heap is disabled</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: Memory barrier is not used</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: Compressed tables use zlib 1.2.11</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: Using Linux native AIO</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: Using CPU crc32 instructions</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: Initializing buffer pool, size = 128.0M</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: Completed initialization of buffer pool</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: The first specified data file ./ibdata1 did not exist: a new database to be created!</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: Setting file ./ibdata1 size to 12 MB</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: Database physically writes the file full: <span class="built_in">wait</span>...</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: Setting <span class="built_in">log</span> file ./ib_logfile101 size to 48 MB</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: Setting <span class="built_in">log</span> file ./ib_logfile1 size to 48 MB</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: Renaming <span class="built_in">log</span> file ./ib_logfile101 to ./ib_logfile0</span><br><span class="line">2024-08-07 14:00:39 23552 [Warning] InnoDB: New <span class="built_in">log</span> files created, LSN=45781</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: Doublewrite buffer not found: creating new</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: Doublewrite buffer created</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: 128 rollback segment(s) are active.</span><br><span class="line">2024-08-07 14:00:39 23552 [Warning] InnoDB: Creating foreign key constraint system tables.</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: Foreign key constraint system tables created</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: Creating tablespace and datafile system tables.</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: Tablespace and datafile system tables created.</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: Waiting <span class="keyword">for</span> purge to start</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: 5.6.50 started; <span class="built_in">log</span> sequence number 0</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] RSA private key file not found: /app/mysql-5.6.50/data//private_key.pem. Some authentication plugins will not work.</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] RSA public key file not found: /app/mysql-5.6.50/data//public_key.pem. Some authentication plugins will not work.</span><br><span class="line">2024-08-07 14:00:40 23552 [Note] Binlog end</span><br><span class="line">2024-08-07 14:00:40 23552 [Note] InnoDB: FTS optimize thread exiting.</span><br><span class="line">2024-08-07 14:00:40 23552 [Note] InnoDB: Starting shutdown...</span><br><span class="line">2024-08-07 14:00:41 23552 [Note] InnoDB: Shutdown completed; <span class="built_in">log</span> sequence number 1625977</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">Filling <span class="built_in">help</span> tables...2024-08-07 14:00:41 0 [Warning] TIMESTAMP with implicit DEFAULT value is deprecated. Please use --explicit_defaults_for_timestamp server option (see documentation <span class="keyword">for</span> more details).</span><br><span class="line">2024-08-07 14:00:41 0 [Note] Ignoring --secure-file-priv value as server is running with --bootstrap.</span><br><span class="line">2024-08-07 14:00:41 0 [Note] /app/mysql-5.6.50/bin/mysqld (mysqld 5.6.50) starting as process 23574 ...</span><br><span class="line">2024-08-07 14:00:41 23574 [Note] InnoDB: Using atomics to ref count buffer pool pages</span><br><span class="line">2024-08-07 14:00:41 23574 [Note] InnoDB: The InnoDB memory heap is disabled</span><br><span class="line">2024-08-07 14:00:41 23574 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins</span><br><span class="line">2024-08-07 14:00:41 23574 [Note] InnoDB: Memory barrier is not used</span><br><span class="line">2024-08-07 14:00:41 23574 [Note] InnoDB: Compressed tables use zlib 1.2.11</span><br><span class="line">2024-08-07 14:00:41 23574 [Note] InnoDB: Using Linux native AIO</span><br><span class="line">2024-08-07 14:00:41 23574 [Note] InnoDB: Using CPU crc32 instructions</span><br><span class="line">2024-08-07 14:00:41 23574 [Note] InnoDB: Initializing buffer pool, size = 128.0M</span><br><span class="line">2024-08-07 14:00:41 23574 [Note] InnoDB: Completed initialization of buffer pool</span><br><span class="line">2024-08-07 14:00:41 23574 [Note] InnoDB: Highest supported file format is Barracuda.</span><br><span class="line">2024-08-07 14:00:41 23574 [Note] InnoDB: 128 rollback segment(s) are active.</span><br><span class="line">2024-08-07 14:00:41 23574 [Note] InnoDB: Waiting <span class="keyword">for</span> purge to start</span><br><span class="line">2024-08-07 14:00:41 23574 [Note] InnoDB: 5.6.50 started; <span class="built_in">log</span> sequence number 1625977</span><br><span class="line">2024-08-07 14:00:41 23574 [Note] RSA private key file not found: /app/mysql-5.6.50/data//private_key.pem. Some authentication plugins will not work.</span><br><span class="line">2024-08-07 14:00:41 23574 [Note] RSA public key file not found: /app/mysql-5.6.50/data//public_key.pem. Some authentication plugins will not work.</span><br><span class="line">2024-08-07 14:00:41 23574 [Note] Binlog end</span><br><span class="line">2024-08-07 14:00:41 23574 [Note] InnoDB: FTS optimize thread exiting.</span><br><span class="line">2024-08-07 14:00:41 23574 [Note] InnoDB: Starting shutdown...</span><br><span class="line">2024-08-07 14:00:43 23574 [Note] InnoDB: Shutdown completed; <span class="built_in">log</span> sequence number 1625987</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">To start mysqld at boot time you have to copy</span><br><span class="line">support-files/mysql.server to the right place <span class="keyword">for</span> your system</span><br><span class="line"></span><br><span class="line">PLEASE REMEMBER TO SET A PASSWORD FOR THE MySQL root USER !</span><br><span class="line">To <span class="keyword">do</span> so, start the server, <span class="keyword">then</span> issue the following commands:</span><br><span class="line"></span><br><span class="line">  /app/mysql-5.6.50/bin/mysqladmin -u root password <span class="string">&#x27;new-password&#x27;</span></span><br><span class="line">  /app/mysql-5.6.50/bin/mysqladmin -u root -h db01 password <span class="string">&#x27;new-password&#x27;</span></span><br><span class="line"></span><br><span class="line">Alternatively you can run:</span><br><span class="line"></span><br><span class="line">  /app/mysql-5.6.50/bin/mysql_secure_installation</span><br><span class="line"></span><br><span class="line"><span class="built_in">which</span> will also give you the option of removing the <span class="built_in">test</span></span><br><span class="line">databases and anonymous user created by default.  This is</span><br><span class="line">strongly recommended <span class="keyword">for</span> production servers.</span><br><span class="line"></span><br><span class="line">See the manual <span class="keyword">for</span> more instructions.</span><br><span class="line"></span><br><span class="line">You can start the MySQL daemon with:</span><br><span class="line"></span><br><span class="line">  <span class="built_in">cd</span> . ; /app/mysql-5.6.50/bin/mysqld_safe &amp;</span><br><span class="line"></span><br><span class="line">You can <span class="built_in">test</span> the MySQL daemon with mysql-test-run.pl</span><br><span class="line"></span><br><span class="line">  <span class="built_in">cd</span> mysql-test ; perl mysql-test-run.pl</span><br><span class="line"></span><br><span class="line">Please report any problems at http://bugs.mysql.com/</span><br><span class="line"></span><br><span class="line">The latest information about MySQL is available on the web at</span><br><span class="line"></span><br><span class="line">  http://www.mysql.com</span><br><span class="line"></span><br><span class="line">Support MySQL by buying support/licenses at http://shop.mysql.com</span><br><span class="line"></span><br><span class="line">New default config file was created as /app/mysql-5.6.50/my.cnf and</span><br><span class="line">will be used by default by the server when you start it.</span><br><span class="line">You may edit this file to change server settings</span><br><span class="line"></span><br><span class="line">WARNING: Default config file /etc/my.cnf exists on the system</span><br><span class="line">This file will be <span class="built_in">read</span> by default by the MySQL server</span><br><span class="line">If you <span class="keyword">do</span> not want to use this, either remove it, or use the</span><br><span class="line">--defaults-file argument to mysqld_safe when starting the server</span><br><span class="line"></span><br><span class="line">æ‰§è¡Œå®Œæ¯•å ï¼Œè¿‡ç¨‹ä¸­ä¼šæœ‰ä¸¤ä¸ªOK</span><br><span class="line">[root@db01 ~]# <span class="built_in">echo</span> $?</span><br><span class="line">0</span><br></pre></td></tr></table></figure><h3 id="äºŒè¿›åˆ¶å®‰è£…MySQL5-6">äºŒè¿›åˆ¶å®‰è£…MySQL5.6</h3><h4 id="å®‰è£…æ•°æ®åº“-2">å®‰è£…æ•°æ®åº“</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#0.åˆ›å»ºå®‰è£…ç›®å½•</span></span><br><span class="line"><span class="built_in">mkdir</span> /app</span><br><span class="line"></span><br><span class="line"><span class="comment">#1.å®‰è£…ä¾èµ–</span></span><br><span class="line">yum -y install openssl-devel ncurses-devel autoconf libaio-devel</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.è§£å‹</span></span><br><span class="line">tar xf mysql-5.6.50-linux-glibc2.12-x86_64.tar.gz -C /app</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.æ”¹å</span></span><br><span class="line"><span class="built_in">mv</span> /app/mysql-5.6.50-linux-glibc2.12-x86_64 /app/mysql-5.6.50</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 4.åˆ›å»ºMySQLç¨‹åºç”¨æˆ·</span></span><br><span class="line">useradd mysql -s /sbin/nologin -M</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.æ‹·è´MySQLçš„é…ç½®æ–‡ä»¶åˆ°/etc/ä¸‹</span></span><br><span class="line">\<span class="built_in">cp</span> /app/mysql-5.6.50/support-files/my-default.cnf /etc/my.cnf</span><br><span class="line">[root@db01 mysql-5.6.50]# vim /etc/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.æ‹·è´å¯åŠ¨è„šæœ¬</span></span><br><span class="line"><span class="built_in">cp</span> /app/mysql-5.6.50/support-files/mysql.server /etc/init.d/mysqld</span><br><span class="line"></span><br><span class="line"><span class="comment"># 7.åˆå§‹åŒ–MySQL--æŠ¥é”™è§åˆå§‹åŒ–è§£å†³</span></span><br><span class="line">/app/mysql-5.6.50/scripts/mysql_install_db --user=mysql --basedir=/app/mysql-5.6.50 --datadir=/app/mysql-5.6.50/data</span><br><span class="line"></span><br><span class="line"><span class="comment">###########################</span></span><br><span class="line">--useræŒ‡å®šç”¨æˆ· </span><br><span class="line">--basediræŒ‡å®šå®‰è£…ç›®å½•</span><br><span class="line">--datadirç¼–è¯‘çš„æ—¶å€™æŒ‡å®šçš„dataç›®å½•</span><br><span class="line"><span class="comment">###########################</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 8.å¯åŠ¨MySQL ï¼ˆä¸ºå•¥éœ€è¦æŒ‡å®šdir?--è¯¦æƒ…è§äºŒè¿›åˆ¶å¯åŠ¨å¤±è´¥ï¼‰</span></span><br><span class="line">[root@db02 ~]# vim /etc/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">basedir=/app/mysql-5.6.50</span><br><span class="line">datadir=/app/mysql-5.6.50/data</span><br><span class="line">[root@db02 ~]# /etc/init.d/mysqld start</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#9.è¿æ¥mysqlï¼ˆä¸ºå•¥åŠ ç¯å¢ƒå˜é‡è§æ­¤ç« --æºç å®‰è£…mysqlï¼Œè¿æ¥mysqlå¤±è´¥ï¼‰</span></span><br><span class="line"><span class="comment">#æ·»åŠ ç¯å¢ƒå˜é‡</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;export PATH=&quot;/app/mysql-5.6.50/bin:$PATH&quot;&#x27;</span> &gt;/etc/profile.d/mysql.sh</span><br><span class="line"></span><br><span class="line"><span class="comment">#åŠ è½½ç¯å¢ƒå˜é‡</span></span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="comment">#è¿æ¥æ•°æ®åº“  </span></span><br><span class="line">msyql</span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Type <span class="string">&#x27;help;&#x27;</span> or <span class="string">&#x27;\h&#x27;</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">&#x27;\c&#x27;</span> to clear the current input statement.</span><br><span class="line">mysql&gt; </span><br></pre></td></tr></table></figure><h4 id="åˆå§‹åŒ–æŠ¥é”™è§£å†³-2">åˆå§‹åŒ–æŠ¥é”™è§£å†³</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŠ¥é”™</span></span><br><span class="line">FATAL ERROR: please install the following Perl modules before executing /app/mysql-5.6.50/scripts/mysql_install_db:</span><br><span class="line">Data::Dumper</span><br><span class="line"><span class="comment">#è§£å†³æ–¹æ³•æ˜¯å®‰è£…autoconfåº“å’Œlibaioåº“æ–‡ä»¶</span></span><br><span class="line">yum -y install autoconf libaio-devel</span><br><span class="line"></span><br><span class="line"><span class="comment">#å†æ¬¡æ‰§è¡Œåˆå§‹åŒ–æ•°æ®åº“æ“ä½œ</span></span><br><span class="line">[root@db01 ~]# /app/mysql-5.6.50/scripts/mysql_install_db --user=mysql --basedir=/app/mysql-5.6.50 --datadir=/app/mysql-5.6.50/data</span><br><span class="line">Installing MySQL system tables...2024-08-07 14:00:39 0 [Warning] TIMESTAMP with implicit DEFAULT value is deprecated. Please use --explicit_defaults_for_timestamp server option (see documentation <span class="keyword">for</span> more details).</span><br><span class="line">2024-08-07 14:00:39 0 [Note] Ignoring --secure-file-priv value as server is running with --bootstrap.</span><br><span class="line">2024-08-07 14:00:39 0 [Note] /app/mysql-5.6.50/bin/mysqld (mysqld 5.6.50) starting as process 23552 ...</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: Using atomics to ref count buffer pool pages</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: The InnoDB memory heap is disabled</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: Memory barrier is not used</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: Compressed tables use zlib 1.2.11</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: Using Linux native AIO</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: Using CPU crc32 instructions</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: Initializing buffer pool, size = 128.0M</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: Completed initialization of buffer pool</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: The first specified data file ./ibdata1 did not exist: a new database to be created!</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: Setting file ./ibdata1 size to 12 MB</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: Database physically writes the file full: <span class="built_in">wait</span>...</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: Setting <span class="built_in">log</span> file ./ib_logfile101 size to 48 MB</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: Setting <span class="built_in">log</span> file ./ib_logfile1 size to 48 MB</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: Renaming <span class="built_in">log</span> file ./ib_logfile101 to ./ib_logfile0</span><br><span class="line">2024-08-07 14:00:39 23552 [Warning] InnoDB: New <span class="built_in">log</span> files created, LSN=45781</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: Doublewrite buffer not found: creating new</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: Doublewrite buffer created</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: 128 rollback segment(s) are active.</span><br><span class="line">2024-08-07 14:00:39 23552 [Warning] InnoDB: Creating foreign key constraint system tables.</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: Foreign key constraint system tables created</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: Creating tablespace and datafile system tables.</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: Tablespace and datafile system tables created.</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: Waiting <span class="keyword">for</span> purge to start</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] InnoDB: 5.6.50 started; <span class="built_in">log</span> sequence number 0</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] RSA private key file not found: /app/mysql-5.6.50/data//private_key.pem. Some authentication plugins will not work.</span><br><span class="line">2024-08-07 14:00:39 23552 [Note] RSA public key file not found: /app/mysql-5.6.50/data//public_key.pem. Some authentication plugins will not work.</span><br><span class="line">2024-08-07 14:00:40 23552 [Note] Binlog end</span><br><span class="line">2024-08-07 14:00:40 23552 [Note] InnoDB: FTS optimize thread exiting.</span><br><span class="line">2024-08-07 14:00:40 23552 [Note] InnoDB: Starting shutdown...</span><br><span class="line">2024-08-07 14:00:41 23552 [Note] InnoDB: Shutdown completed; <span class="built_in">log</span> sequence number 1625977</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">Filling <span class="built_in">help</span> tables...2024-08-07 14:00:41 0 [Warning] TIMESTAMP with implicit DEFAULT value is deprecated. Please use --explicit_defaults_for_timestamp server option (see documentation <span class="keyword">for</span> more details).</span><br><span class="line">2024-08-07 14:00:41 0 [Note] Ignoring --secure-file-priv value as server is running with --bootstrap.</span><br><span class="line">2024-08-07 14:00:41 0 [Note] /app/mysql-5.6.50/bin/mysqld (mysqld 5.6.50) starting as process 23574 ...</span><br><span class="line">2024-08-07 14:00:41 23574 [Note] InnoDB: Using atomics to ref count buffer pool pages</span><br><span class="line">2024-08-07 14:00:41 23574 [Note] InnoDB: The InnoDB memory heap is disabled</span><br><span class="line">2024-08-07 14:00:41 23574 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins</span><br><span class="line">2024-08-07 14:00:41 23574 [Note] InnoDB: Memory barrier is not used</span><br><span class="line">2024-08-07 14:00:41 23574 [Note] InnoDB: Compressed tables use zlib 1.2.11</span><br><span class="line">2024-08-07 14:00:41 23574 [Note] InnoDB: Using Linux native AIO</span><br><span class="line">2024-08-07 14:00:41 23574 [Note] InnoDB: Using CPU crc32 instructions</span><br><span class="line">2024-08-07 14:00:41 23574 [Note] InnoDB: Initializing buffer pool, size = 128.0M</span><br><span class="line">2024-08-07 14:00:41 23574 [Note] InnoDB: Completed initialization of buffer pool</span><br><span class="line">2024-08-07 14:00:41 23574 [Note] InnoDB: Highest supported file format is Barracuda.</span><br><span class="line">2024-08-07 14:00:41 23574 [Note] InnoDB: 128 rollback segment(s) are active.</span><br><span class="line">2024-08-07 14:00:41 23574 [Note] InnoDB: Waiting <span class="keyword">for</span> purge to start</span><br><span class="line">2024-08-07 14:00:41 23574 [Note] InnoDB: 5.6.50 started; <span class="built_in">log</span> sequence number 1625977</span><br><span class="line">2024-08-07 14:00:41 23574 [Note] RSA private key file not found: /app/mysql-5.6.50/data//private_key.pem. Some authentication plugins will not work.</span><br><span class="line">2024-08-07 14:00:41 23574 [Note] RSA public key file not found: /app/mysql-5.6.50/data//public_key.pem. Some authentication plugins will not work.</span><br><span class="line">2024-08-07 14:00:41 23574 [Note] Binlog end</span><br><span class="line">2024-08-07 14:00:41 23574 [Note] InnoDB: FTS optimize thread exiting.</span><br><span class="line">2024-08-07 14:00:41 23574 [Note] InnoDB: Starting shutdown...</span><br><span class="line">2024-08-07 14:00:43 23574 [Note] InnoDB: Shutdown completed; <span class="built_in">log</span> sequence number 1625987</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">To start mysqld at boot time you have to copy</span><br><span class="line">support-files/mysql.server to the right place <span class="keyword">for</span> your system</span><br><span class="line"></span><br><span class="line">PLEASE REMEMBER TO SET A PASSWORD FOR THE MySQL root USER !</span><br><span class="line">To <span class="keyword">do</span> so, start the server, <span class="keyword">then</span> issue the following commands:</span><br><span class="line"></span><br><span class="line">  /app/mysql-5.6.50/bin/mysqladmin -u root password <span class="string">&#x27;new-password&#x27;</span></span><br><span class="line">  /app/mysql-5.6.50/bin/mysqladmin -u root -h db01 password <span class="string">&#x27;new-password&#x27;</span></span><br><span class="line"></span><br><span class="line">Alternatively you can run:</span><br><span class="line"></span><br><span class="line">  /app/mysql-5.6.50/bin/mysql_secure_installation</span><br><span class="line"></span><br><span class="line"><span class="built_in">which</span> will also give you the option of removing the <span class="built_in">test</span></span><br><span class="line">databases and anonymous user created by default.  This is</span><br><span class="line">strongly recommended <span class="keyword">for</span> production servers.</span><br><span class="line"></span><br><span class="line">See the manual <span class="keyword">for</span> more instructions.</span><br><span class="line"></span><br><span class="line">You can start the MySQL daemon with:</span><br><span class="line"></span><br><span class="line">  <span class="built_in">cd</span> . ; /app/mysql-5.6.50/bin/mysqld_safe &amp;</span><br><span class="line"></span><br><span class="line">You can <span class="built_in">test</span> the MySQL daemon with mysql-test-run.pl</span><br><span class="line"></span><br><span class="line">  <span class="built_in">cd</span> mysql-test ; perl mysql-test-run.pl</span><br><span class="line"></span><br><span class="line">Please report any problems at http://bugs.mysql.com/</span><br><span class="line"></span><br><span class="line">The latest information about MySQL is available on the web at</span><br><span class="line"></span><br><span class="line">  http://www.mysql.com</span><br><span class="line"></span><br><span class="line">Support MySQL by buying support/licenses at http://shop.mysql.com</span><br><span class="line"></span><br><span class="line">New default config file was created as /app/mysql-5.6.50/my.cnf and</span><br><span class="line">will be used by default by the server when you start it.</span><br><span class="line">You may edit this file to change server settings</span><br><span class="line"></span><br><span class="line">WARNING: Default config file /etc/my.cnf exists on the system</span><br><span class="line">This file will be <span class="built_in">read</span> by default by the MySQL server</span><br><span class="line">If you <span class="keyword">do</span> not want to use this, either remove it, or use the</span><br><span class="line">--defaults-file argument to mysqld_safe when starting the server</span><br><span class="line"></span><br><span class="line">æ‰§è¡Œå®Œæ¯•å ï¼Œè¿‡ç¨‹ä¸­ä¼šæœ‰ä¸¤ä¸ªOK</span><br><span class="line">[root@db01 ~]# <span class="built_in">echo</span> $?</span><br><span class="line">0</span><br></pre></td></tr></table></figure><h4 id="äºŒè¿›åˆ¶å®‰è£…å¯åŠ¨å¤±è´¥è§£å†³">äºŒè¿›åˆ¶å®‰è£…å¯åŠ¨å¤±è´¥è§£å†³</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å¯åŠ¨mysql</span></span><br><span class="line">[root@db02 mysql-5.6.50]#  /etc/init.d/mysqld start</span><br><span class="line">/etc/init.d/mysqld: line 244: my_print_defaults: <span class="built_in">command</span> not found</span><br><span class="line">/etc/init.d/mysqld: line 264: <span class="built_in">cd</span>: /usr/local/mysql: No such file or directory</span><br><span class="line">Starting MySQL ERROR! Couldn<span class="string">&#x27;t find MySQL server (/usr/local/mysql/bin/mysqld_safe)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">æŠ¥é”™åˆ†æï¼š</span></span><br><span class="line"><span class="string">å»/usr/local/mysqlæ‰¾my_print_defaultsè¿™ä¸ªå‘½ä»¤ï¼Œä½†æ˜¯å‘ç°æ‰¾ä¸åˆ°</span></span><br><span class="line"><span class="string">#ä¸ºå•¥è¦å»è¿™ä¸ªç›®å½•å»æ‰¾ï¼Ÿ</span></span><br><span class="line"><span class="string">æºç å®‰è£…æ—¶å€™æˆ‘ä»¬æŒ‡å®šäº†å®ƒçš„å®‰è£…ç›®å½•ï¼Œä½†æ˜¯æˆ‘ä»¬äºŒè¿›åˆ¶å®‰è£…çš„MySQLï¼ŒMySQLæ²¡æœ‰å®‰è£…åœ¨å®˜æ–¹é»˜è®¤çš„/usr/local/mysqlç›®å½•ä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨äºŒè¿›åˆ¶å®‰è£…æ˜¯å®˜æ–¹æŒ‡å®šäº†å®‰è£…ç›®å½•ï¼Œæ‰€ä»¥æ‰¾ä¸åˆ°è¿™ä¸ªå‘½ä»¤</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#æŸ¥çœ‹äºŒè¿›åˆ¶å®‰è£…çš„å¯åŠ¨è„šæœ¬</span></span><br><span class="line"><span class="string">å¾—çŸ¥ï¼Œå®˜æ–¹æŒ‡å®šé»˜è®¤å®‰è£…ä½ç½®æ˜¯/usr/local</span></span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/QQ_1723015813800.png" alt="QQ_1723015813800"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">è§£å†³ï¼š</span><br><span class="line">1.</span><br><span class="line"><span class="comment"># æŠ¥é”™åŸå› ï¼šäºŒè¿›åˆ¶å®‰è£…çš„MySQLï¼ŒMySQLæ²¡æœ‰å®‰è£…åœ¨é»˜è®¤çš„/usr/local/mysqlç›®å½•ä¸‹</span></span><br><span class="line"><span class="comment"># è§£å†³æ–¹æ¡ˆï¼š</span></span><br><span class="line">1ï¼‰ æ–¹æ³•ä¸€ï¼šä¿®æ”¹è„šæœ¬</span><br><span class="line">:%s#/usr/local/mysql#/app/mysql-5.6.50#g</span><br><span class="line"></span><br><span class="line">2ï¼‰æ–¹æ³•äºŒï¼šä¿®æ”¹é…ç½®æ–‡ä»¶</span><br><span class="line">[root@db02 ~]# vim /etc/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">basedir=/app/mysql-5.6.50</span><br><span class="line">datadir=/app/mysql-5.6.50/data</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/QQ_1723016585520.png" alt="QQ_1723016585520"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@db02 mysql-5.6.50]#  /etc/init.d/mysqld start</span><br><span class="line">Starting MySQL.Logging to <span class="string">&#x27;/app/mysql-5.6.50/data/db02.err&#x27;</span>.</span><br><span class="line">. SUCCESS! </span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä½¿ç”¨äºŒè¿›åˆ¶å®‰è£…çš„mysqlçš„socketæ–‡ä»¶åœ¨å“ªï¼Ÿ</span></span><br><span class="line">/tmp</span><br><span class="line"><span class="comment">#ä¸ºå•¥è¦åœ¨è¿™ï¼Ÿ</span></span><br><span class="line">å®˜æ–¹ä¹Ÿä¸çŸ¥é“ä½ è¦åœ¨å“ªå®‰è£…mysqlï¼Œæ‰€æœ‰æŠŠsocketæ–‡ä»¶æ”¾åœ¨tmpä¸‹ï¼Œæ‰€æœ‰ç”¨æˆ·éƒ½æœ‰æƒé™æ‰§è¡Œæ–‡ä»¶</span><br></pre></td></tr></table></figure><h4 id="è¿æ¥mysql">è¿æ¥mysql</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ·»åŠ ç¯å¢ƒå˜é‡</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;export PATH=&quot;/app/mysql-5.6.50/bin:$PATH&quot;&#x27;</span> &gt;/etc/profile.d/mysql.sh</span><br><span class="line"></span><br><span class="line"><span class="comment">#åŠ è½½ç¯å¢ƒå˜é‡</span></span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br><span class="line"></span><br><span class="line">msyql</span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection <span class="built_in">id</span> is 1</span><br><span class="line">Server version: 5.6.50 Source distribution</span><br><span class="line">Copyright (c) 2000, 2020, Oracle and/or its affiliates. All rights reserved.</span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners</span><br><span class="line">Type <span class="string">&#x27;help;&#x27;</span> or <span class="string">&#x27;\h&#x27;</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">&#x27;\c&#x27;</span> to clear the current input statement.</span><br><span class="line">mysql&gt; </span><br></pre></td></tr></table></figure><h3 id="æºç å®‰è£…MySQL5-7">æºç å®‰è£…MySQL5.7</h3><h4 id="ä¸‹è½½-ç¼–è¯‘">ä¸‹è½½ &amp;&amp; ç¼–è¯‘</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.ä¸‹è½½5.7msyqlæºç </span></span><br><span class="line">wget https://downloads.mysql.com/archives/get/p/23/file/mysql-boost-5.7.40.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment">#2.è§£å‹å¹¶è¿›å…¥ç›®å½•</span></span><br><span class="line">tar xf mysql-boost-5.7.40.tar.gz</span><br><span class="line"><span class="built_in">cd</span> mysql-5.7.40</span><br><span class="line"></span><br><span class="line"><span class="comment">#Boostæ˜¯ä¸€ä¸ªååˆ†å¼ºå¤§çš„C++åº“ï¼Œå®ƒåŒ…å«äº†ä¸€ç³»åˆ—ä¸ºC++è¯­è¨€æå‡çš„æ‰©å±•åº“ï¼Œæ¯”å¦‚æ­£åˆ™è¡¨è¾¾å¼ã€çº¿ç¨‹ã€æ–‡ä»¶ç³»ç»Ÿæ“ä½œç­‰ã€‚ç¼–è¯‘å™¨åœ¨ç¼–è¯‘ä¾èµ–Booståº“çš„C++ä»£ç æ—¶ï¼Œéœ€è¦æ‰¾åˆ°ç›¸åº”ç‰ˆæœ¬çš„Booståº“å¤´æ–‡ä»¶å’Œåº“æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">ç¼–è¯‘MySQL5.7ä»¥åŠæ›´é«˜çš„ç‰ˆæœ¬æ—¶ï¼Œéƒ½éœ€è¦ä¸‹è½½å¹¶å¼•ç”¨æˆ–è€…ç›´æ¥å®‰è£…booståº“ï¼Œå¦åˆ™åœ¨æ‰§è¡Œcmakeå‘½ä»¤æ—¶ä¼šæŠ¥å¦‚ä¸‹é”™è¯¯ï¼š</span><br><span class="line">-- Packaging as: mysql-5.7.40-Linux-x86_64</span><br><span class="line">-- Looked <span class="keyword">for</span> boost/version.hpp <span class="keyword">in</span>  and </span><br><span class="line">-- BOOST_INCLUDE_DIR BOOST_INCLUDE_DIR-NOTFOUND</span><br><span class="line">-- LOCAL_BOOST_DIR </span><br><span class="line">-- LOCAL_BOOST_ZIP </span><br><span class="line">-- Could not find (the correct version of) boost.</span><br><span class="line">-- MySQL currently requires boost_1_59_0</span><br><span class="line">CMake Error at cmake/boost.cmake:88 (MESSAGE):</span><br><span class="line">  You can download it with -DDOWNLOAD_BOOST=1 -DWITH_BOOST=&lt;directory&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">#è§£å†³</span></span><br><span class="line">å…ˆä¸‹è½½Booståº“ï¼Œç„¶åé€šè¿‡åœ¨cmakeå‘½ä»¤åé¢æ·»åŠ å‚æ•° -DWITH_BOOST=Booståº“è·¯å¾„å³å¯</span><br><span class="line"></span><br><span class="line"><span class="comment">#3.ä¸‹è½½boostsåº“</span></span><br><span class="line"><span class="built_in">mkdir</span> /usr/local/boost</span><br><span class="line"><span class="built_in">cd</span> /usr/local/boost</span><br><span class="line">wget http://www.sourceforge.net/projects/boost/files/boost/1.59.0/boost_1_59_0.tar.gz</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#4.å®‰è£…ä¾èµ–</span></span><br><span class="line">yum -y install openssl-devel ncurses-devel autoconf libaio-devel cmake</span><br><span class="line"></span><br><span class="line"><span class="comment">#5.å›åˆ°è§£å‹çš„æºç ç›®å½•å¹¶æ‰§è¡Œcmake</span></span><br><span class="line">cmake . -DCMAKE_INSTALL_PREFIX=/app/mysql-5.7.40 \</span><br><span class="line">-DMYSQL_DATADIR=/app/mysql-5.7.40/data \</span><br><span class="line">-DMYSQL_UNIX_ADDR=/app/mysql-5.7.40/tmp/mysql.sock \</span><br><span class="line">-DDEFAULT_CHARSET=utf8 \</span><br><span class="line">-DDEFAULT_COLLATION=utf8_general_ci \</span><br><span class="line">-DWITH_EXTRA_CHARSETS=all \</span><br><span class="line">-DWITH_INNOBASE_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITH_FEDERATED_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITH_BLACKHOLE_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITHOUT_EXAMPLE_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITH_ZLIB=bundled \</span><br><span class="line">-DWITH_SSL=system \</span><br><span class="line">-DENABLED_LOCAL_INFILE=1 \</span><br><span class="line">-DWITH_EMBEDDED_SERVER=1 \</span><br><span class="line">-DENABLE_DOWNLOADS=1 \</span><br><span class="line">-DWITH_DEBUG=0 \</span><br><span class="line">-DWITH_BOOST=/usr/local/boost/boost_1_59_0.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹æ˜¯å¦cmakeæˆåŠŸ</span></span><br><span class="line">[root@db03 mysql-5.7.40]#  <span class="built_in">echo</span> $?</span><br><span class="line">0</span><br><span class="line"></span><br><span class="line"><span class="comment">#6.ç¼–è¯‘ &amp;&amp; å®‰è£…</span></span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><h4 id="åˆå§‹åŒ–æ•°æ®åº“">åˆå§‹åŒ–æ•°æ®åº“</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.æ‹·è´å¯åŠ¨è„šæœ¬åˆ°init.dä¸‹</span></span><br><span class="line"><span class="built_in">cp</span> /app/mysql-5.7.40/support-files/mysql.server /etc/init.d/mysqld</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.åˆ›å»ºMySQLç¨‹åºç”¨æˆ·</span></span><br><span class="line">useradd mysql -s /sbin/nologin -M</span><br><span class="line"></span><br><span class="line"><span class="comment">#3.åˆå§‹åŒ–æ•°æ®åº“ç›®å½•ï¼ˆæ³¨æ„ä¿å­˜åˆå§‹å¯†ç ï¼‰(æ³¨æ„è¦å…ˆè®¾ç½®ç¯å¢ƒå˜é‡)</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;export PATH=&quot;/app/mysql-5.7.40/bin:$PATH&quot;&#x27;</span> &gt;/etc/profile.d/mysql57.sh</span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆå§‹åŒ–åå¸¦å¯†ç </span></span><br><span class="line">mysqld --initialize --user=mysql --basedir=/app/mysql-5.7.40 --datadir=/app/mysql-5.7.40/data</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆå§‹åŒ–åä¸å¸¦å¯†ç </span></span><br><span class="line">mysqld --initialize-insecure --user=mysql --basedir=/app/mysql-5.7.40 --datadir=/app/mysql-5.7.40/data</span><br><span class="line"></span><br><span class="line">userï¼šroot</span><br><span class="line">passwordï¼š5?U1o9/PhQfl</span><br></pre></td></tr></table></figure><h4 id="å¯åŠ¨MySQL">å¯åŠ¨MySQL</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#4.å¯åŠ¨mysql</span></span><br><span class="line">/etc/init.d/mysqld start</span><br><span class="line">[root@db03 mysql-5.7.40]# /etc/init.d/mysqld start</span><br><span class="line">Starting MySQL.2024-08-07T13:40:09.004006Z mysqld_safe error: log-error <span class="built_in">set</span> to <span class="string">&#x27;/var/log/mariadb/mariadb.log&#x27;</span>, however file don<span class="string">&#x27;t exists. Create writable for user &#x27;</span>mysql<span class="string">&#x27;.</span></span><br><span class="line"><span class="string">ERROR! The server quit without updating PID file (/var/lib/mysql/db03.pid).</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#è§£å†³æŠ¥é”™</span></span><br><span class="line"><span class="string">å‘ç°ç³»ç»Ÿä¸­æœ‰mariadbï¼Œæ—¥å¿—æ–‡ä»¶ä¸èƒ½å†™å…¥</span></span><br><span class="line"><span class="string">è§£å†³ï¼šåˆ é™¤mariadb</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[root@db03 mysql-5.7.40]# rpm -qa|grep mariadb</span></span><br><span class="line"><span class="string">mariadb-libs-5.5.60-1.el7_5.x86_64</span></span><br><span class="line"><span class="string">[root@db03 mysql-5.7.40]# rpm -e --nodeps mariadb-libs-5.5.60-1.el7_5.x86_64</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#4.1å†æ¬¡å¯åŠ¨mysql</span></span><br><span class="line"><span class="string">/etc/init.d/mysqld start</span></span><br><span class="line"><span class="string">Starting MySQL.Logging to &#x27;</span>/app/mysql-5.7.40/data/db03.err<span class="string">&#x27;.</span></span><br><span class="line"><span class="string">2024-08-07T13:44:36.244147Z mysqld_safe Directory &#x27;</span>/app/mysql-5.7.40/tmp<span class="string">&#x27; for UNIX socket file don&#x27;</span>t exists.</span><br><span class="line"> ERROR! The server quit without updating PID file (/app/mysql-5.7.40/data/db03.pid).</span><br><span class="line"> </span><br><span class="line"><span class="comment">#åŒ5.6ä¸€æ ·ï¼Œæ²¡æœ‰tmpç›®å½•æ— æ³•å†™å…¥socketæ–‡ä»¶</span></span><br><span class="line">è§£å†³ï¼š</span><br><span class="line"><span class="built_in">mkdir</span> /app/mysql-5.7.40/tmp</span><br><span class="line"></span><br><span class="line">æˆæƒï¼šå¦åˆ™æ— æ³•å†™å…¥æ–‡ä»¶</span><br><span class="line"><span class="built_in">chown</span> -R mysql.mysql /app/mysql-5.7.40/</span><br><span class="line"></span><br><span class="line"><span class="comment">#å†æ¬¡å¯åŠ¨æœåŠ¡ï¼ˆæ„‰å¿«å¯åŠ¨äº†ï¼‰</span></span><br><span class="line">[root@db03 mysql-5.7.40]# /etc/init.d/mysqld start</span><br><span class="line">Starting MySQL.Logging to <span class="string">&#x27;/app/mysql-5.7.40/data/db03.err&#x27;</span>.</span><br><span class="line"> SUCCESS! </span><br></pre></td></tr></table></figure><h4 id="è¿æ¥æ•°æ®åº“">è¿æ¥æ•°æ®åº“</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å†™å…¥ç¯å¢ƒå˜é‡</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;export PATH=&quot;/app/mysql-5.7.40/bin:$PATH&quot;&#x27;</span> &gt;/etc/profile.d/mysql57.sh</span><br><span class="line"></span><br><span class="line"><span class="comment">#é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡</span></span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="comment">#è¿æ¥æ•°æ®åº“ï¼ˆ</span></span><br><span class="line">[root@db03 mysql-5.7.40]# mysql</span><br><span class="line">ERROR 1045 (28000): Access denied <span class="keyword">for</span> user <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> (using password: NO)</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä½¿ç”¨ç»™çš„å¯†ç ç™»å½•</span></span><br><span class="line">mysql -uroot -p<span class="string">&#x27;5?U1o9/PhQfl&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#é‡ç½®å¯†ç </span></span><br><span class="line">mysql&gt; alter user root@localhost identified by <span class="string">&#x27;123&#x27;</span>;</span><br></pre></td></tr></table></figure><h3 id="äºŒè¿›åˆ¶å®‰è£…MySQL5-7">äºŒè¿›åˆ¶å®‰è£…MySQL5.7</h3><h4 id="å®‰è£…mysql">å®‰è£…mysql</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.ä¸‹è½½5.7ç‰ˆæœ¬åŒ…</span></span><br><span class="line">wget https://downloads.mysql.com/archives/get/p/23/file/mysql-5.7.40-linux-glibc2.12-x86_64.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment">#2.åˆ›å»ºå®‰è£…ç›®å½•</span></span><br><span class="line"><span class="built_in">mkdir</span> /app</span><br><span class="line"></span><br><span class="line"><span class="comment">#3.å®‰è£…ä¾èµ–</span></span><br><span class="line">yum -y install openssl-devel ncurses-devel autoconf libaio-devel</span><br><span class="line"></span><br><span class="line"><span class="comment">#4.è§£å‹è‡³/appç›®å½•</span></span><br><span class="line">tar xf mysql-5.7.40-linux-glibc2.12-x86_64.tar.gz -C /app</span><br><span class="line"></span><br><span class="line"><span class="comment">#5.æ”¹å</span></span><br><span class="line"><span class="built_in">mv</span> /app/mysql-5.7.40-linux-glibc2.12-x86_64/ /app/mysql-5.7.40</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 6.åˆ›å»ºMySQLç¨‹åºç”¨æˆ·</span></span><br><span class="line">useradd mysql -s /sbin/nologin -M</span><br><span class="line"></span><br><span class="line"><span class="comment"># 7.åˆ›å»ºMySQLçš„é…ç½®æ–‡ä»¶åˆ°/etc/ä¸‹ï¼ˆæ³¨æ„æŸ¥çœ‹ç³»ç»Ÿæ˜¯å¦è‡ªå¸¦mariadbï¼‰</span></span><br><span class="line"><span class="comment">#æŸ¥çœ‹ç³»ç»Ÿæ˜¯å¦æœ‰maroadb</span></span><br><span class="line">[root@db04 mysql-5.7.40]# rpm -qa |grep mariadb</span><br><span class="line">mariadb-libs-5.5.60-1.el7_5.x86_64</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¸è½½ï¼ˆå¦‚æœæœ‰å°±å¸è½½ï¼‰</span></span><br><span class="line">[root@db04 mysql-5.7.40]# rpm -e --nodeps mariadb-libs-5.5.60-1.el7_5.x86_64</span><br><span class="line">warning: /etc/my.cnf saved as /etc/my.cnf.rpmsave</span><br><span class="line"></span><br><span class="line"><span class="comment">#ç¼–è¾‘my.cnf</span></span><br><span class="line">[root@db01 mysql-5.6.50]# vim /etc/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 8.æ‹·è´å¯åŠ¨è„šæœ¬</span></span><br><span class="line"><span class="built_in">cp</span> /app/mysql-5.7.40/support-files/mysql.server /etc/init.d/mysqld</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆå§‹åŒ–æ•°æ®åº“ ï¼ˆæ³¨æ„ä¿å­˜æœ€åçš„å¯†ç ï¼‰ï¼ˆå…ˆåŠ ç¯å¢ƒå˜é‡ï¼‰</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;export PATH=&quot;/app/mysql-5.7.40/bin:$PATH&quot;&#x27;</span> &gt;/etc/profile.d/mysql57.sh</span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆå§‹åŒ–æ•°æ®åº“ç›®å½•</span></span><br><span class="line">mysqld --initialize-insecure --user=mysql --basedir=/app/mysql-5.7.40 --datadir=/app/mysql-5.7.40/data</span><br><span class="line"></span><br><span class="line">[root@db04 mysql-5.7.40]# bin/mysqld --initialize --user=mysql --basedir=/app/mysql-5.7.40 --datadir=/app/mysql-5.7.40/data</span><br><span class="line">2024-08-07T12:41:19.116519Z 0 [Warning] TIMESTAMP with implicit DEFAULT value is deprecated. Please use --explicit_defaults_for_timestamp server option (see documentation <span class="keyword">for</span> more details).</span><br><span class="line">2024-08-07T12:41:19.599490Z 0 [Warning] InnoDB: New <span class="built_in">log</span> files created, LSN=45790</span><br><span class="line">2024-08-07T12:41:19.676071Z 0 [Warning] InnoDB: Creating foreign key constraint system tables.</span><br><span class="line">2024-08-07T12:41:19.731472Z 0 [Warning] No existing UUID has been found, so we assume that this is the first time that this server has been started. Generating a new UUID: 58819e51-54ba-11ef-861d-000c290f3f79.</span><br><span class="line">2024-08-07T12:41:19.732381Z 0 [Warning] Gtid table is not ready to be used. Table <span class="string">&#x27;mysql.gtid_executed&#x27;</span> cannot be opened.</span><br><span class="line">2024-08-07T12:41:19.926326Z 0 [Warning] A deprecated TLS version TLSv1 is enabled. Please use TLSv1.2 or higher.</span><br><span class="line">2024-08-07T12:41:19.926344Z 0 [Warning] A deprecated TLS version TLSv1.1 is enabled. Please use TLSv1.2 or higher.</span><br><span class="line">2024-08-07T12:41:19.927081Z 0 [Warning] CA certificate ca.pem is self signed.</span><br><span class="line">2024-08-07T12:41:20.019287Z 1 [Note] A temporary password is generated <span class="keyword">for</span> root@localhost: a=G&amp;ufhfb4=*</span><br><span class="line">[root@db04 mysql-5.7.40]# <span class="built_in">echo</span> $?</span><br><span class="line">0</span><br><span class="line"></span><br><span class="line">mysql</span><br><span class="line">userï¼šroot</span><br><span class="line">password:-jDYsiuZ1?y#</span><br></pre></td></tr></table></figure><h4 id="å¯åŠ¨mysql">å¯åŠ¨mysql</h4><p><strong>å¯åŠ¨å¤±è´¥è§£å†³</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@db04 mysql-5.7.40]# service mysqld start</span><br><span class="line">/etc/init.d/mysqld: line 239: my_print_defaults: <span class="built_in">command</span> not found</span><br><span class="line">/etc/init.d/mysqld: line 259: <span class="built_in">cd</span>: /usr/local/mysql: No such file or directory</span><br><span class="line">Starting MySQL ERROR! Couldn<span class="string">&#x27;t find MySQL server (/usr/local/mysql/bin/mysqld_safe)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#å’Œ5.6å¯åŠ¨å¤±è´¥ä¸€æ ·ï¼Œé»˜è®¤å»æ‰¾/usr/local/mysqlä¸‹æ‰¾å¯åŠ¨å‘½ä»¤</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">è§£å†³ï¼š</span></span><br><span class="line"><span class="string">1ï¼‰ æ–¹æ³•ä¸€ï¼šä¿®æ”¹è„šæœ¬</span></span><br><span class="line"><span class="string">:%s#/usr/local/mysql#/app/mysql-5.7.40#g</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2ï¼‰æ–¹æ³•äºŒï¼šä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ˆå»ºè®®ï¼‰</span></span><br><span class="line"><span class="string">[root@db02 ~]# vim /etc/my.cnf</span></span><br><span class="line"><span class="string">[mysqld]</span></span><br><span class="line"><span class="string">basedir=/app/mysql-5.7.40</span></span><br><span class="line"><span class="string">datadir=/app/mysql-5.7.40/data</span></span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/QQ_1723035262266.png" alt="QQ_1723035262266"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å†æ¬¡å¯åŠ¨</span></span><br><span class="line">[root@db04 mysql-5.7.40]# service mysqld start</span><br><span class="line">Starting MySQL.Logging to <span class="string">&#x27;/app/mysql-5.7.40/data/db04.err&#x27;</span>.</span><br><span class="line">. SUCCESS! </span><br></pre></td></tr></table></figure><h4 id="è¿æ¥mysql-2">è¿æ¥mysql</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># å†™å…¥ç¯å¢ƒå˜é‡</span><br><span class="line">echo <span class="string">&#x27;export PATH=&quot;/app/mysql-5.7.40/bin:$PATH&quot;&#x27;</span> <span class="operator">&gt;</span><span class="operator">/</span>etc<span class="operator">/</span>profile.d<span class="operator">/</span>mysql57.sh</span><br><span class="line"></span><br><span class="line">#é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡</span><br><span class="line">source <span class="operator">/</span>etc<span class="operator">/</span>profile</span><br><span class="line"></span><br><span class="line">#è¿æ¥æ•°æ®åº“ï¼ˆ</span><br><span class="line">[root<span class="variable">@db03</span> mysql<span class="number">-5.7</span><span class="number">.40</span>]# mysql</span><br><span class="line">ERROR <span class="number">1045</span> (<span class="number">28000</span>): Access denied <span class="keyword">for</span> <span class="keyword">user</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> (<span class="keyword">using</span> password: <span class="keyword">NO</span>)</span><br><span class="line"></span><br><span class="line">#ä½¿ç”¨ç»™çš„å¯†ç ç™»å½•</span><br><span class="line">mysql <span class="operator">-</span>uroot <span class="operator">-</span>p<span class="string">&#x27;a=G&amp;ufhfb4=*&#x27;</span></span><br><span class="line"></span><br><span class="line">#é‡ç½®å¯†ç </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">alter</span> <span class="keyword">user</span> root<span class="variable">@localhost</span> identified <span class="keyword">by</span> <span class="string">&#x27;123&#x27;</span>;</span><br></pre></td></tr></table></figure><h2 id="3-å¯åŠ¨systemdç®¡ç†">3.å¯åŠ¨systemdç®¡ç†</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@db03 ~]# vim /usr/lib/systemd/system/mysqld.service </span><br><span class="line">[Unit]</span><br><span class="line">Description=MySQL Server</span><br><span class="line">After=network.target</span><br><span class="line">Wants=multi-user.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">ExecStart=/app/mysql5.7.40/bin/mysqld_safe --defaults-file=/etc/my.cnf</span><br><span class="line">Restart=on-failure</span><br><span class="line">RestartSec=42s</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br><span class="line"></span><br><span class="line"><span class="comment">#é‡æ–°åŠ è½½ä¸‹</span></span><br><span class="line">systemctl daemon-reload</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><hr>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>02.Bashåˆè¯†</title>
      <link href="/posts/6da43e5c.html"/>
      <url>/posts/6da43e5c.html</url>
      
        <content type="html"><![CDATA[<div class='wow animate__heartBeat' data-wow-duration='' data-wow-delay='1s' data-wow-offset=''  data-wow-iteration='2' ><div class="note red icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p><a href="https://www.lukeme.top/posts/4c7367cf.html">å‘Šåˆ«å°ç™½ï¼Œç‚¹å‡»ç›´è¾¾</a></p></div></div><h2 id="å˜é‡">å˜é‡</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">å¯å˜çš„é‡</span><br><span class="line"><span class="comment">## å¦‚ä½•å®šä¹‰å˜é‡</span></span><br><span class="line">å˜é‡å=å˜é‡å€¼     age=18</span><br><span class="line">ageï¼šå˜é‡å</span><br><span class="line">=ï¼šèµ‹å€¼ç¬¦å·</span><br><span class="line">18ï¼šå˜é‡å€¼</span><br><span class="line"><span class="comment"># å¦‚ä½•è°ƒç”¨å˜é‡</span></span><br><span class="line">åœ¨å˜é‡åå‰é¢åŠ ä¸Š<span class="string">&#x27;$&#x27;</span>å°±å¯ä»¥è°ƒç”¨å˜é‡</span><br><span class="line">    <span class="string">&#x27;$&#x27;</span> + å˜é‡å</span><br><span class="line"><span class="built_in">echo</span>ï¼šæ‰“å°è¾“å‡º   ä½œç”¨ æ‰€è§å³æ‰€å¾—</span><br><span class="line"></span><br><span class="line">[root@localhost tmp]# <span class="built_in">echo</span> <span class="variable">$age</span></span><br><span class="line">18</span><br><span class="line"><span class="comment">##  name=oldboy</span></span><br><span class="line">1.<span class="built_in">echo</span> <span class="string">&#x27;$oldboy&#x27;</span> ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ </span><br><span class="line"><span class="variable">$oldboy</span></span><br><span class="line">2.<span class="built_in">echo</span> <span class="string">&#x27;$name&#x27;</span> ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</span><br><span class="line"><span class="variable">$name</span></span><br><span class="line">3.<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$name</span>&quot;</span> ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</span><br><span class="line">oldboy </span><br><span class="line">4.1.<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$oldboy</span>&#x27; ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ </span></span><br><span class="line"><span class="string">ç©ºå€¼</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">old_ip=`ip a s ens33|awk -F &#x27;[ /.]+&#x27; &#x27;NR==3&#123;print <span class="variable">$6</span>&#125;&#x27;`</span></span><br><span class="line"><span class="string">old_ip=<span class="subst">$(ip a s ens33|awk -F &#x27;[ /.]+&#x27; &#x27;NR==3&#123;print $6&#125;&#x27;)</span></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#Linuxä¸­çš„ç¬¦å·ï¼š</span></span><br><span class="line"><span class="string">&#x27;&#x27;ï¼šæ‰€è§å³æ‰€å¾—ï¼Œå¼•ç”¨å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="string">&quot;</span><span class="string">&quot;ï¼šé»˜è®¤æƒ…å†µä¸‹å’Œ&#x27;&#x27;ä¸€æ ·ï¼Œç”¨æ¥å¼•ç”¨å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="string">``ï¼šåå¼•å·,åå¼•å·ä¸­çš„å†…å®¹ï¼Œä¼šå½“åšå‘½ä»¤æ‰§è¡Œåï¼Œç»“æœç•™ä¸‹</span></span><br><span class="line"><span class="string">åŒºåˆ«ï¼šåœ¨äºå¼•ç”¨å˜é‡ï¼ŒåŒå¼•å·å¼•ç”¨å˜é‡å¯ä»¥è¾“å‡ºå˜é‡çš„å€¼</span></span><br><span class="line"><span class="string">[root@localhost tmp]# echo &quot;</span><span class="variable">$age</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">18</span></span><br><span class="line"><span class="string">[root@localhost tmp]# echo &#x27;<span class="variable">$age</span>&#x27;</span></span><br><span class="line"><span class="string"><span class="variable">$age</span></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">echo &#123;1..5..2&#125;æ¯éš”2ä¸ªæ•°åœ¨1-5å–æ•°</span></span><br></pre></td></tr></table></figure><h2 id="ç¯å¢ƒå˜é‡ï¼ˆç³»ç»Ÿå˜é‡ï¼‰">ç¯å¢ƒå˜é‡ï¼ˆç³»ç»Ÿå˜é‡ï¼‰</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç³»ç»Ÿå®‰è£…å®Œæˆåï¼Œç³»ç»Ÿè‡ªå¸¦çš„å˜é‡</span></span><br><span class="line">[root@localhost ~] <span class="built_in">declare</span>    <span class="comment">#å¯ä»¥æŸ¥çœ‹ç³»ç»Ÿè‡ªå¸¦çš„æ‰€æœ‰å˜é‡ </span></span><br><span class="line"><span class="comment">## ç³»ç»Ÿç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶</span></span><br><span class="line">1.[root@localhost ~]# ll /root/.bashrc</span><br><span class="line">-rw-r--r--. 1 root root 176 Dec 29  2013 /root/.bashrc</span><br><span class="line"></span><br><span class="line">2.[root@localhost ~]# ll /etc/bashrc </span><br><span class="line">-rw-r--r--. 1 root root 2853 Oct 31  2018 /etc/bashrc</span><br><span class="line"></span><br><span class="line">3.[root@localhost ~]# ll /etc/profile</span><br><span class="line">-rw-r--r--. 1 root root 1819 Oct 31  2018 /etc/profile</span><br><span class="line"></span><br><span class="line">4.[root@localhost ~]# ll /etc/profile.d/</span><br><span class="line">256term.csh  colorgrep.csh  colorls.csh  csh.local  lang.sh   less.sh   which2.csh</span><br><span class="line">256term.sh   colorgrep.sh   colorls.sh   lang.csh   less.csh  sh.local  which2.sh</span><br></pre></td></tr></table></figure><h3 id="å‘½ä»¤æç¤ºç¬¦å˜é‡">å‘½ä»¤æç¤ºç¬¦å˜é‡</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# <span class="built_in">echo</span> <span class="variable">$PS1</span></span><br><span class="line">[\u@\h \W]\$</span><br><span class="line"></span><br><span class="line">åœ¨å‘½ä»¤è¡Œä¸­è®¾ç½®å˜é‡ï¼Œæ˜¯ä¸´æ—¶çš„</span><br><span class="line">å°†å˜é‡å†™åˆ°ç¯å¢ƒå˜é‡æ–‡ä»¶ä¸­ï¼Œåˆ™æ˜¯æ°¸ä¹…çš„ã€</span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/image-20240327165009589.png" alt="image-20240327165009589"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ä¿®æ”¹å®¶ç›®å½•ä¸‹çš„.bashrcæ–‡ä»¶  vi ~/.bashrc  viå®¶ç›®å½•ä¸‹çš„.bashrcæ–‡ä»¶</span><br><span class="line">[root@lb01 ~]# vi ~/.bashrc     /root/.bashrc</span><br><span class="line">[lgj@lb01 root]$ vi ~/.bashrc      /home/lgj/.bushrc</span><br><span class="line">è‹¥rootç”¨æˆ·ä¿®æ”¹</span><br><span class="line">è¶…çº§ç”¨æˆ·å’Œæ™®é€šç”¨æˆ·å®¶ç›®å½•ï¼š</span><br><span class="line">è¶…çº§ç”¨æˆ·rootï¼š/root</span><br><span class="line">æ™®é€šç”¨æˆ·ï¼š/home/æ™®é€šç”¨æˆ·å</span><br></pre></td></tr></table></figure><h2 id="BASHç‰¹æ€§â€”â€”Tabè¡¥å…¨">BASHç‰¹æ€§â€”â€”Tabè¡¥å…¨</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">å‘½ä»¤ é€‰é¡¹ å‚æ•°</span><br><span class="line">è¡¥å…¨å‘½ä»¤</span><br><span class="line">è¡¥å…¨å‚æ•°</span><br><span class="line">è¡¥å…¨é€‰é¡¹ï¼šyum install -y bash-completio</span><br></pre></td></tr></table></figure><h2 id="BASHç‰¹æ€§â€”â€”å¿«æ·é”®">BASHç‰¹æ€§â€”â€”å¿«æ·é”®</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Ctrl + w <span class="comment"># å°†å…‰æ ‡æ‰€åœ¨å­—ç¬¦å‰é¢çš„å†…å®¹åˆ é™¤ï¼Œä¸€ç›´åˆ é™¤åˆ°ç©ºæ ¼</span></span><br><span class="line">Ctrl + z <span class="comment"># å°†ä¸€ä¸ªè¿›ç¨‹æ”¾åœ¨åå°è¿è¡Œ</span></span><br><span class="line">Ctrl + k <span class="comment"># å°†å…‰æ ‡æ‰€åœ¨å­—ç¬¦å’Œåé¢æ‰€æœ‰å†…å®¹ï¼Œå…¨éƒ¨åˆ é™¤</span></span><br><span class="line">Ctrl + u <span class="comment"># å°†å…‰æ ‡æ‰€åœ¨å­—ç¬¦å‰é¢çš„å†…å®¹å…¨éƒ¨åˆ é™¤ï¼ˆå…‰æ ‡æ‰€åœ¨å­—ç¬¦ä¸ä¼šåˆ é™¤ï¼‰</span></span><br><span class="line">Ctrl + s <span class="comment"># é”å±</span></span><br><span class="line">Ctrl + q <span class="comment"># è§£é”</span></span><br><span class="line">Ctrl + å·¦å³ <span class="comment"># æŒ‰ç…§å•è¯è·³è½¬å…‰æ ‡</span></span><br><span class="line"><span class="comment">###########################################</span></span><br><span class="line">Ctrl + a <span class="comment"># å°†å…‰æ ‡ç§»åŠ¨åˆ°å‘½ä»¤è¡Œé¦–</span></span><br><span class="line">Ctrl + e <span class="comment"># å°†å…‰æ ‡ç§»åŠ¨åˆ°å‘½ä»¤è¡Œæœ«</span></span><br><span class="line">Ctrl + c <span class="comment"># å°†å‘½ä»¤ç»ˆæ­¢</span></span><br><span class="line">Ctrl + l <span class="comment"># æ¸…å±</span></span><br><span class="line">BASHç‰¹æ€§â€”â€”å†å²å‘½ä»¤</span><br><span class="line">BASHç‰¹æ€§â€”â€”å‘½ä»¤åˆ«å</span><br><span class="line">Ctrl + d <span class="comment"># é€€å‡ºå½“å‰ä¸€ä¸ªBASHç»ˆç«¯ ï¼ˆæ³¨é”€å½“å‰ç”¨æˆ·ï¼‰</span></span><br><span class="line">Ctrl + r <span class="comment"># æœç´¢å†å²å‘½ä»¤</span></span><br><span class="line">ESC + . <span class="comment"># å°†ä¸Šä¸€æ¡å‘½ä»¤æœ€åä¸€ä¸ªç©ºæ ¼ åé¢çš„å†…å®¹ï¼Œè¡¥å…¨åˆ°å½“å‰å‘½ä»¤è¡Œ</span></span><br><span class="line"><span class="string">&#x27;äº•å·&#x27;</span> <span class="comment"># :åœ¨BASHä¸­ä»£è¡¨æ³¨é‡Šï¼Œç³»ç»Ÿä¸è®¤è¯†ï¼Œbashä¹Ÿä¸ä¼šç¿»è¯‘</span></span><br></pre></td></tr></table></figure><h2 id="BASHç‰¹æ€§â€”â€”å†å²å‘½ä»¤">BASHç‰¹æ€§â€”â€”å†å²å‘½ä»¤</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## ä½œç”¨ï¼šç”¨æ¥å¯¹ç”¨æˆ·è¿›è¡Œå®¡è®¡</span></span><br><span class="line"><span class="comment">## æŸ¥çœ‹å†å²å‘½ä»¤     -history</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">history</span> </span><br><span class="line">    1  age=18</span><br><span class="line">    2  <span class="built_in">echo</span> age</span><br><span class="line">    3  <span class="built_in">echo</span> <span class="string">&quot;age&quot;</span></span><br><span class="line">    4  jjjsjsjsjsjsjjsjjsjsjjjsjss</span><br><span class="line">    5  <span class="built_in">history</span> </span><br><span class="line">    6  <span class="built_in">history</span> -d 1</span><br><span class="line">    7  hi</span><br><span class="line">    8  <span class="built_in">history</span> </span><br><span class="line">    9  ll /tmp</span><br><span class="line">   10  <span class="built_in">cd</span> /tmp0</span><br><span class="line"><span class="comment">## ä¿å­˜å†å²è®°å½•(write)     å†å²è®°å½•ä¿å­˜åœ¨ ~/.bash_history    æ™®é€šç”¨æˆ·/home/lgj/.bash_history</span></span><br><span class="line"><span class="built_in">history</span> -w</span><br><span class="line">[root@localhost ~]# <span class="built_in">history</span> -w</span><br><span class="line"><span class="comment">## æ¸…é™¤æ‰€æœ‰å†å²è®°å½•ï¼ˆclearï¼‰</span></span><br><span class="line"><span class="built_in">history</span> -c</span><br><span class="line">[root@localhost ~]# <span class="built_in">history</span> -c</span><br><span class="line"><span class="comment">## åˆ é™¤æŒ‡å®šçš„ä¸€æ¡å†å²è®°å½•ï¼ˆdeleteï¼‰</span></span><br><span class="line"><span class="built_in">history</span> -d 4</span><br><span class="line">[root@localhost ~]# <span class="built_in">history</span> -d 4</span><br><span class="line"></span><br><span class="line"><span class="comment">## æ‰§è¡Œä¸Šä¸€æ¡å¼€å¤´æ˜¯viçš„å‘½ä»¤</span></span><br><span class="line">[root@localhost ~]# !vi</span><br><span class="line"><span class="comment">## æ‰§è¡Œä¸Šä¸€æ¡å‘½ä»¤</span></span><br><span class="line">[root@localhost ~]# !!</span><br><span class="line"><span class="comment">## ä½¿ç”¨!+ç¼–å·ï¼Œé‡æ–°æ‰§è¡Œå‘½ä»¤</span></span><br><span class="line">[root@localhost ~]# !10</span><br><span class="line"></span><br><span class="line"><span class="comment">## é‡å¤æ‰§è¡Œå†å²å‘½ä»¤çš„å¿«æ·æ–¹æ³•</span></span><br><span class="line">!å­—ç¬¦ä¸²    !vi æ‰§è¡Œä¸Šä¸€æ¡viçš„å‘½ä»¤</span><br><span class="line">!!         æ‰§è¡Œä¸Šä¸€æ¡çš„å‘½ä»¤</span><br><span class="line">!ç¼–å·      æ‰§è¡ŒæŒ‡å®šè¡Œå·å†å²è®°å½•</span><br></pre></td></tr></table></figure><h2 id="BASHç‰¹æ€§â€”â€”å‘½ä»¤åˆ«å">BASHç‰¹æ€§â€”â€”å‘½ä»¤åˆ«å</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## æŸ¥çœ‹ç³»ç»Ÿä¸­çš„æ‰€æœ‰åˆ«åï¼ˆæŸ¥ï¼‰    alias</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">alias</span></span><br><span class="line"><span class="built_in">alias</span> <span class="built_in">cp</span>=<span class="string">&#x27;cp -i&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> egrep=<span class="string">&#x27;egrep --color=auto</span></span><br><span class="line"><span class="string">alias ens33=&#x27;</span>ip address show ens33<span class="string">&#x27;</span></span><br><span class="line"><span class="string">alias fgrep=&#x27;</span>fgrep --color=auto<span class="string">&#x27;</span></span><br><span class="line"><span class="string">alias grep=&#x27;</span>grep --color=auto<span class="string">&#x27;</span></span><br><span class="line"><span class="string">alias l.=&#x27;</span><span class="built_in">ls</span> -d .* --color=auto<span class="string">&#x27;</span></span><br><span class="line"><span class="string">alias ll=&#x27;</span><span class="built_in">ls</span> -l --color=auto<span class="string">&#x27;</span></span><br><span class="line"><span class="string">alias ls=&#x27;</span><span class="built_in">ls</span> --color=auto<span class="string">&#x27;</span></span><br><span class="line"><span class="string">alias mv=&#x27;</span><span class="built_in">mv</span> -i<span class="string">&#x27;</span></span><br><span class="line"><span class="string">alias net=&#x27;</span>vi /etc/sysconfig/network-scripts/ifcfg-ens33<span class="string">&#x27;</span></span><br><span class="line"><span class="string">alias rm=&#x27;</span><span class="built_in">rm</span> -i<span class="string">&#x27;</span></span><br><span class="line"><span class="string">alias which=&#x27;</span><span class="built_in">alias</span> | /usr/bin/which --tty-only --read-alias --show-dot --showtilde<span class="string">&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">## è®¾ç½®åˆ«åï¼ˆå¢ï¼‰ä¸´æ—¶</span></span><br><span class="line"><span class="string">alias åˆ«å=&#x27;</span>å‘½ä»¤<span class="string">&#x27;</span></span><br><span class="line"><span class="string">[root@localhost ~]# alias ens33=&#x27;</span>ip address show ens33<span class="string">&#x27;</span></span><br><span class="line"><span class="string">## åˆ é™¤åˆ«åï¼ˆåˆ ï¼‰</span></span><br><span class="line"><span class="string">unalias åˆ«å</span></span><br><span class="line"><span class="string">[root@localhost ~]# unalias net</span></span><br><span class="line"><span class="string">## ä¿®æ”¹åˆ«åï¼ˆæ”¹ï¼‰</span></span><br><span class="line"><span class="string">alias åˆ«å=&#x27;</span>å‘½ä»¤<span class="string">&#x27;</span></span><br><span class="line"><span class="string">alias net=&#x27;</span>vi /etc/sysconfig/network-scripts/ifcfg-ens34</span><br><span class="line"><span class="comment">## åˆ«åæ°¸ä¹…ç”Ÿæ•ˆ</span></span><br><span class="line">[root@localhost ~]# vi ~/.bashrc</span><br><span class="line"><span class="built_in">alias</span> net=<span class="string">&#x27;vi /etc/sysconfig/network-scripts/ifcfg-ens33&#x27;</span></span><br><span class="line"></span><br><span class="line">æ‰©å±•ï¼šip address show enss33  å±•ç¤ºip</span><br></pre></td></tr></table></figure><h2 id="BASHç‰¹æ€§â€”â€”è·å–å‘½ä»¤å¸®åŠ©">BASHç‰¹æ€§â€”â€”è·å–å‘½ä»¤å¸®åŠ©</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">man å‘½ä»¤</span><br><span class="line">å‘½ä»¤ --<span class="built_in">help</span></span><br><span class="line">http://linux.51yip.com/</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹ip-ä¸»æœºå">ä¿®æ”¹ip&amp;ä¸»æœºå</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">è„šæœ¬</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;è¯·è¾“å…¥è¦ä¿®æ”¹çš„IPåœ°å€æœ€åä¸€ä½: &quot;</span> ip</span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;è¯·è¾“å…¥è¦ä¿®æ”¹çš„ä¸»æœºå: &quot;</span> host_name</span><br><span class="line">sed -i <span class="string">&quot;s#128#<span class="variable">$ip</span>#g&quot;</span> /etc/sysconfig/network-scripts/ifcfg-ens33</span><br><span class="line">hostnamectl set-hostname <span class="variable">$host_name</span></span><br><span class="line">systemctl restart network</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linuxæ•²é—¨ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>01.è™šæ‹Ÿæœºä½¿ç”¨åŠxshell</title>
      <link href="/posts/bc179bbe.html"/>
      <url>/posts/bc179bbe.html</url>
      
        <content type="html"><![CDATA[<div class='wow animate__heartBeat' data-wow-duration='' data-wow-delay='1s' data-wow-offset=''  data-wow-iteration='2' ><div class="note red icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p><a href="https://www.lukeme.top/posts/4c7367cf.html">å‘Šåˆ«å°ç™½ï¼Œç‚¹å‡»ç›´è¾¾</a></p></div></div><h2 id="è™šæ‹ŸæœºåŸºç¡€">è™šæ‹ŸæœºåŸºç¡€</h2><blockquote><p>è‡ªè¡Œä¸‹è½½Vmwareä½¿ç”¨</p></blockquote><h3 id="è™šæ‹Ÿæœºç½‘ç»œ">è™šæ‹Ÿæœºç½‘ç»œ</h3><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">æ¡¥æ¥æ¨¡å¼ï¼šä½¿ç‰©ç†æœºå’Œè™šæ‹Ÿæœºå…±ç”¨åŒä¸€å—ç½‘å¡ï¼Œç§°ä½œç½‘æ¡¥</span><br><span class="line">ä»…ä¸»æœºæ¨¡å¼ï¼šå°†ç‰©ç†æœºå½“åšæ˜¯ä¸€ä¸ªæ²¡æœ‰ç½‘ç»œçš„äº¤æ¢æœºï¼Œæ‰€æœ‰è™šæ‹Ÿè¿æ¥åœ¨è¿™ä¸ªäº¤æ¢æœºä¸Šï¼Œä¸èƒ½ä¸Šå¤–ç½‘ï¼Œåªèƒ½äº’ç›¸</span><br><span class="line">é€šä¿¡</span><br><span class="line"><span class="symbol">NAT</span>æ¨¡å¼ï¼šå°†ä¸€ä¸ªå…¬ç½‘çš„<span class="built_in">IP</span>åœ°å€ï¼Œé€šè¿‡è·¯ç”±å™¨åŠ¨æ€è½¬æ¢ï¼Œè½¬æ¢æˆå¤šä¸ªè™šæ‹Ÿæœºçš„ç§æœ‰<span class="built_in">IP</span>åœ°å€</span><br><span class="line"><span class="comment"># ä¸ºä»€ä¹ˆä½¿ç”¨NATæ¨¡å¼</span></span><br><span class="line"><span class="number">1</span>.ä½¿ç”¨æ¡¥æ¥æ¨¡å¼ï¼Œè™šæ‹Ÿæœºçš„ç½‘ç»œå¿…é¡»å’Œç‰©ç†æœºåœ¨åŒä¸€ä¸ªç½‘æ®µï¼Œ<span class="built_in">IP</span>åœ°å€ä¸å¤Ÿç”¨</span><br><span class="line"><span class="number">2</span>.ä»…ä¸»æœºæ¨¡å¼ï¼Œæ— æ³•ä¸Šå¤–ç½‘</span><br></pre></td></tr></table></figure><h3 id="ç½‘ç»œç›¸å…³å†…å®¹">ç½‘ç»œç›¸å…³å†…å®¹</h3><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ç‰©ç†åœ°å€ï¼ˆMACåœ°å€ï¼‰ï¼šä¹°æ¥ç”µè„‘ï¼Œç½‘å¡ç”Ÿäº§å‡ºæ¥åï¼Œéœ€è¦æ‰“ä¸Šä¸€ä¸ª<span class="string">&quot;èº«ä»½è¯å·&quot;</span></span><br><span class="line"><span class="built_in">IP</span>åœ°å€ï¼ˆIPADDRï¼‰ï¼šä¸¤å°è®¾å¤‡ä¹‹é—´ï¼Œäº’ç›¸é€šä¿¡çš„<span class="string">&quot;æ‰‹æœºå·&quot;</span></span><br><span class="line">å­ç½‘æ©ç ï¼ˆNETMASKï¼‰ï¼šåˆ’åˆ†ç½‘æ®µï¼Œåˆ¤æ–­<span class="built_in">IP</span>åœ°å€æ˜¯å¦åœ¨åŒä¸€ä¸ªç½‘ç»œï¼ˆä¸¤ä¸ª<span class="built_in">IP</span>ä¹‹é—´æ˜¯å¦èƒ½é€šä¿¡ï¼Œå–å†³äºå­ç½‘æ©</span><br><span class="line">ç ï¼‰<span class="string">&quot;è¿è¥å•†&quot;</span></span><br><span class="line">ç½‘å…³ï¼ˆGATEWAYï¼‰ï¼šå¦‚æœè®¾å¤‡æƒ³è¦ä¸Šå±€åŸŸç½‘ä¹‹å¤–çš„å¤–ç½‘ï¼Œéœ€è¦ä¸€ä¸ªç½‘å…³<span class="string">&quot;æµ·å…³&quot;</span></span><br><span class="line">DNSï¼šåŸŸåè§£æå™¨ï¼Œå°†åŸŸåè§£ææˆä¸€ä¸ª<span class="built_in">IP</span>åœ°å€</span><br><span class="line">åŸŸåè§£æï¼š<span class="number">1</span>ï¼‰æ­£å‘è§£æ</span><br><span class="line"><span class="number">2</span>ï¼‰åå‘è§£æ</span><br></pre></td></tr></table></figure><h3 id="è·å–IPçš„æ–¹å¼">è·å–IPçš„æ–¹å¼</h3><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">åŠ¨æ€åˆ†é…DHCP:è‡ªåŠ¨åˆ†é…<span class="built_in">IP</span>åœ°å€ï¼Œ<span class="built_in">IP</span>åœ°å€ä¼šå­˜åœ¨ä¸€ä¸ªç§ŸæœŸ</span><br><span class="line">é™æ€åˆ†é…ï¼šæ‰‹åŠ¨é…ç½®<span class="built_in">IP</span>åœ°å€ï¼Œå›ºå®š<span class="built_in">IP</span>åœ°å€</span><br></pre></td></tr></table></figure><h3 id="ç£ç›˜åˆ†åŒº">ç£ç›˜åˆ†åŒº</h3><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/ï¼šæ ¹åˆ†åŒºï¼Œå­˜å‚¨æ•°æ®</span><br><span class="line">/bootï¼šå­˜æ”¾ç³»ç»Ÿå¯åŠ¨æ–‡ä»¶ <span class="number">500</span>M~<span class="number">1</span>G</span><br><span class="line"><span class="keyword">swap</span>ï¼šè™šæ‹Ÿå†…å­˜ï¼ˆæŠŠç£ç›˜è¿™ä¸€éƒ¨åˆ†ç©ºé—´ï¼Œå½“å†…å­˜ï¼‰ ç»™å†…å­˜çš„<span class="number">1</span><span class="number">-2</span>å€ï¼Œæœ€é«˜ä¸Šé™<span class="number">8</span>G</span><br></pre></td></tr></table></figure><h3 id="linuxåœ¨è™šæ‹Ÿæœºä¸­çš„å®‰è£…">linuxåœ¨è™šæ‹Ÿæœºä¸­çš„å®‰è£…</h3><p><img src="https://cos.lukme.top/Pic/image-20240328135426458.png" alt="image-20240328135426458"></p><p><img src="https://cos.lukme.top/Pic/%E8%99%9A%E6%8B%9F%E6%9C%BAstep01.png" alt="image-20240328135426458"></p><p><img src="https://cos.lukme.top/Pic/%E8%99%9A%E6%8B%9F%E6%9C%BAstep02.png" alt="image-20240328135426458"></p><p><img src="https://cos.lukme.top/Pic/%E8%99%9A%E6%8B%9F%E6%9C%BAstep03.png" alt="image-20240328135426458"></p><p><img src="https://cos.lukme.top/Pic/%E8%99%9A%E6%8B%9F%E6%9C%BAstep04.png" alt="image-20240328135426458"></p><h3 id="è™šæ‹Ÿæœºçš„ç½‘å¡é…ç½®">è™šæ‹Ÿæœºçš„ç½‘å¡é…ç½®</h3><p><img src="https://cos.lukme.top/Pic/%E8%99%9A%E6%8B%9F%E6%9C%BAstep05.png" alt="image-20240328135426458"></p><p><img src="https://cos.lukme.top/Pic/%E8%99%9A%E6%8B%9F%E6%9C%BAstep06.png" alt="image-20240328135426458"></p><h2 id="ç½‘ç»œ">ç½‘ç»œ</h2><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ipåœ°å€ï¼šè®¾å¤‡ä¹‹é—´äº’ç›¸é€šä¿¡ xxx.xxx.xxx.xxx <span class="number">4</span>æ®µ ç‚¹åˆ†åè¿›åˆ¶ èŒƒå›´ï¼š<span class="number">0</span>-<span class="number">255</span> <span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span> -<span class="number">255</span>.<span class="number">255</span>.<span class="number">255</span>.<span class="number">255</span></span><br><span class="line">å­ç½‘æ©ç ï¼šåˆ’åˆ†ç½‘æ®µï¼Œåˆ¤æ–­ipæ˜¯å¦åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘å†… <span class="number">255</span>.<span class="number">255</span>.<span class="number">255</span>.<span class="number">0</span> å­ç½‘ä¸€æ ·å°±æ˜¯åœ¨åŒä¸€ç½‘æ®µ</span><br><span class="line">ç½‘å…³ï¼šè®©è®¾å¤‡ä¸Šå±€åŸŸç½‘ä»¥å¤–çš„ç½‘ç«™ï¼Œéœ€è¦å‡ºç½‘å…³ï¼ˆå‡ºå›½çš„æµ·å…³ï¼‰ç½‘å…³åœ°å€å°±æ˜¯è·¯ç”±å™¨çš„IP</span><br><span class="line">DNSï¼šdomain name server åŸŸåè§£ææœåŠ¡</span><br><span class="line">è‹¥å­ä¸‹é¢ä¸¤ä¸ªipç½‘æ©ç å‰ä¸‰ä½ä¸€æ ·ï¼Œæœ€åä¸€ä½ä¸ä¸€æ ·ï¼Œåˆ™å‰ä¸‰ä½æ˜¯ç½‘ç»œä½ï¼‰</span><br><span class="line">å­ç½‘æ©ç             ç½‘ç»œä½       ä¸»æœºä½</span><br><span class="line"><span class="number">255.255.255.0</span>        <span class="number">192</span>.<span class="number">168</span>.<span class="number">0</span>.   <span class="number">69</span></span><br><span class="line"><span class="number">255.255.255.1</span>        <span class="number">192</span>.<span class="number">168</span>.<span class="number">0</span>.   <span class="number">37</span></span><br><span class="line">è‹¥å­ä¸‹é¢ä¸¤ä¸ªipç½‘æ©ç å‰ä¸¤ä½ä¸€æ ·ï¼Œæœ€åä¸¤ä½ä¸ä¸€æ ·ï¼Œåˆ™å‰ä¸¤ä½æ˜¯ç½‘ç»œä½</span><br><span class="line">å­ç½‘æ©ç             ç½‘ç»œä½       ä¸»æœºä½</span><br><span class="line"><span class="number">255.255.0.241</span>      <span class="number">192</span>.<span class="number">168</span>.     <span class="number">1</span>.<span class="number">5</span>       </span><br><span class="line"><span class="number">255.255.1.67</span>       <span class="number">192</span>.<span class="number">168</span>.     <span class="number">0</span>.<span class="number">241</span></span><br><span class="line"></span><br><span class="line">Windowsï¼šcmdä¸­  ipconfig -allæŸ¥çœ‹ip</span><br></pre></td></tr></table></figure><h3 id="éªŒè¯è®¾å¤‡ä¹‹é—´æ˜¯å¦å¯ä»¥é€šä¿¡">éªŒè¯è®¾å¤‡ä¹‹é—´æ˜¯å¦å¯ä»¥é€šä¿¡</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ping www.baidu.com</span><br><span class="line">ping 192.168.0.33</span><br><span class="line"><span class="comment"># æ­£å¸¸é€šä¿¡</span></span><br><span class="line">æ¥è‡ª 192.168.0.33 çš„å›å¤: å­—èŠ‚=32 æ—¶é—´=1ms TTL=128</span><br><span class="line">æ¥è‡ª 192.168.0.33 çš„å›å¤: å­—èŠ‚=32 æ—¶é—´&lt;1ms TTL=128</span><br><span class="line">æ¥è‡ª 192.168.0.33 çš„å›å¤: å­—èŠ‚=32 æ—¶é—´&lt;1ms TTL=128</span><br><span class="line">æ¥è‡ª 192.168.0.33 çš„å›å¤: å­—èŠ‚=32 æ—¶é—´&lt;1ms TTL=128</span><br><span class="line"><span class="comment"># éæ­£å¸¸é€šä¿¡</span></span><br><span class="line">æ­£åœ¨ Ping 192.168.3.13 å…·æœ‰ 32 å­—èŠ‚çš„æ•°æ®:</span><br><span class="line">è¯·æ±‚è¶…æ—¶ã€‚</span><br><span class="line">è¯·æ±‚è¶…æ—¶ã€‚</span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/image-20240328140421320.png" alt="image-20240328140421320"></p><h3 id="IPåˆ†é…åˆ†é…æ–¹å¼">IPåˆ†é…åˆ†é…æ–¹å¼</h3><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">é™æ€<span class="built_in">IP</span>ï¼šæ‰‹åŠ¨é…ç½®<span class="built_in">IP</span>åœ°å€ï¼ˆå›ºå®š<span class="built_in">IP</span>ï¼‰</span><br><span class="line">åŠ¨æ€<span class="built_in">IP</span>ï¼šè‡ªåŠ¨åˆ†é…<span class="built_in">IP</span>åœ°å€ï¼ˆ<span class="built_in">IP</span>ä¸å›ºå®šï¼‰</span><br><span class="line"><span class="symbol">DHCP</span>æœåŠ¡å™¨ï¼šåˆ†é…åœ°å€</span><br><span class="line">åˆ’åˆ†VLAN</span><br></pre></td></tr></table></figure><h2 id="è™šæ‹Ÿæœºçš„ç½‘ç»œæ¨¡å¼">è™šæ‹Ÿæœºçš„ç½‘ç»œæ¨¡å¼</h2><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æ¡¥æ¥æ¨¡å¼ï¼šå°†ç‰©ç†æœºçš„ç½‘å¡å’Œè™šæ‹Ÿæœºçš„ç½‘å¡è¿æ¥åœ¨ä¸€å—ï¼ˆç½‘æ¡¥ï¼‰ä½œç”¨ï¼šå…±äº«ç‰©ç†æœºçš„ç½‘ç»œï¼Œè®©è™šæ‹Ÿæœºçš„IPå’Œç‰©ç†æœºçš„IPåœ¨åŒä¸€ä¸ªç½‘æ®µï¼ˆå±€åŸŸç½‘ï¼‰</span><br><span class="line"><span class="number">192.168.10.142</span></span><br><span class="line"><span class="number">192</span>.<span class="number">168</span>.<span class="number">10</span>.xxx</span><br><span class="line">NATæ¨¡å¼ï¼šå°†ç‰©ç†æœºçš„IPåœ°å€ï¼ŒåŠ¨æ€è½¬æ¢æˆè™šæ‹Ÿæœºçš„ç§ç½‘IPï¼Œè¿™ä¸ªç§ç½‘IPä¹Ÿå¯ä»¥è‡ªå®šä¹‰</span><br><span class="line">ä»…ä¸»æœºæ¨¡å¼ï¼šå°†ç‰©ç†æœºçœ‹æˆæ˜¯ä¸€ä¸ªæ²¡æœ‰è·¯ç”±å™¨çš„äº¤æ¢æœºï¼Œæ‰€æœ‰çš„è™šæ‹Ÿæœºéƒ½è¿æ¥åœ¨è¿™ä¸ªäº¤æ¢æœºä¸Šï¼Œæ‰€æœ‰è™šæ‹Ÿæœºä¹‹é—´å¯ä»¥äº’ç›¸é€šä¿¡ï¼Œä½†æ˜¯æ— æ³•ä¸Šå¤–ç½‘</span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/image-20240328140752681.png" alt="image-20240328140752681"></p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ç½‘å¡åï¼š</span></span><br><span class="line"><span class="attribute">eth0</span></span><br><span class="line">eth1</span><br><span class="line">eth2</span><br><span class="line">eth3</span><br></pre></td></tr></table></figure><h2 id="ç½‘å¡">ç½‘å¡</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ä»¥å¤ªç½‘ï¼šä¹°å®Œç”µè„‘éƒ½ä¼šæœ‰è‡ªå¸¦çš„ä¸€å—ç½‘å¡ ä½œç”¨ï¼šå¦‚æœè™šæ‹Ÿæœºæƒ³è¦ä½¿ç”¨æ¡¥æ¥æ¨¡å¼ï¼Œå¿…é¡»ä½¿ç”¨ä»¥å¤ªç½‘ç½‘å¡</span><br><span class="line">ï¼ˆVMnet0ï¼‰</span><br><span class="line">VMnet1ï¼šå®‰è£…å®ŒVMware Workstation ä½œç”¨ï¼šå¦‚æœè™šæ‹Ÿæœºæƒ³è¦ä½¿ç”¨ä»…ä¸»æœºæ¨¡å¼ï¼Œé‚£ä¹ˆå¿…é¡»ä½¿ç”¨VMnet1</span><br><span class="line">ç½‘å¡ï¼ˆç›¸å½“äºæ²¡æœ‰å¤–ç½‘çš„äº¤æ¢æœºï¼‰</span><br><span class="line">VMnet8ï¼šå®‰è£…å®ŒVMware Workstation ä½œç”¨ï¼šå¦‚æœè™šæ‹Ÿæœºæƒ³è¦ä½¿ç”¨NATæ¨¡å¼ï¼Œé‚£ä¹ˆå¿…é¡»ä½¿ç”¨VMnet8ç½‘</span><br><span class="line">å¡ï¼ˆç›¸å½“äºNATæ¨¡å¼çš„äº¤æ¢æœºï¼‰</span><br><span class="line"></span><br><span class="line"><span class="comment">### ä¸ºä»€ä¹ˆä½¿ç”¨NATæ¨¡å¼</span></span><br><span class="line">1.ä½¿ç”¨æ¡¥æ¥æ¨¡å¼ï¼Œè™šæ‹Ÿæœºçš„ç½‘ç»œå¿…é¡»å’Œç‰©ç†æœºåœ¨åŒä¸€ä¸ªç½‘æ®µï¼ŒIPåœ°å€ä¸å¤Ÿç”¨</span><br><span class="line">2.ä»…ä¸»æœºæ¨¡å¼ï¼Œæ— æ³•ä¸Šå¤–ç½‘</span><br></pre></td></tr></table></figure><h3 id="é…ç½®è™šæ‹Ÿæœºçš„è·¯ç”±å™¨">é…ç½®è™šæ‹Ÿæœºçš„è·¯ç”±å™¨</h3><p><img src="https://cos.lukme.top/Pic/image-20240328140923241.png" alt="image-20240328140923241"></p><p><img src="https://cos.lukme.top/Pic/image-20240328141009976.png" alt="image-20240328141009976"></p><h3 id="å®‰è£…ç³»ç»Ÿå†…é…ç½®ç½‘å¡ä¿¡æ¯">å®‰è£…ç³»ç»Ÿå†…é…ç½®ç½‘å¡ä¿¡æ¯</h3><p><img src="https://cos.lukme.top/Pic/image-20240328141241797.png" alt="image-20240328141241797"></p><p><img src="https://cos.lukme.top/Pic/image-20240328141353938.png" alt="image-20240328141353938"></p><h2 id="ä½¿ç”¨å‘½ä»¤é…ç½®ç½‘å¡">ä½¿ç”¨å‘½ä»¤é…ç½®ç½‘å¡</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">1.[root@localhost ~]# nmtui   <span class="comment">#å›¾å½¢åŒ–é…ç½®</span></span><br><span class="line">2.[root@localhost ~]# vi /etc/sysconfig/network-scripts/ifcfg-ens33</span><br><span class="line">è¾“å…¥iï¼šè¿›å…¥ç¼–è¾‘æ¨¡å¼ -- INSERT --</span><br><span class="line">ï¼šwqä¿å­˜é€€å‡º</span><br><span class="line"><span class="comment">#ä¿®æ”¹å®Œé‡å¯ç½‘å¡</span></span><br><span class="line">[root@localhost ~]# systemctl restart network     </span><br><span class="line"><span class="comment">## ä¿å­˜é€€å‡º</span></span><br><span class="line">æŒ‰ESC</span><br><span class="line">è¾“å…¥å†’å·ï¼ˆè‹±æ–‡ï¼‰</span><br><span class="line">å†è¾“å…¥wq</span><br><span class="line">:wq ä¿å­˜å¹¶é€€å‡º</span><br><span class="line">:q ç›´æ¥é€€å‡º</span><br><span class="line">:q! å¼ºåˆ¶é€€å‡º</span><br><span class="line">wï¼šwrite å†™å…¥</span><br><span class="line">qï¼šquit é€€å‡º</span><br></pre></td></tr></table></figure><h3 id="å›¾å½¢åŒ–é…ç½®">å›¾å½¢åŒ–é…ç½®</h3><p><img src="https://cos.lukme.top/Pic/nmtui%E5%91%BD%E4%BB%A4%E6%AD%A5%E9%AA%A4.png" alt="image-20240328135426458"></p><h3 id="å‘½ä»¤è¡Œé…ç½®">å‘½ä»¤è¡Œé…ç½®</h3><p><img src="https://cos.lukme.top/Pic/image-20240328142122532.png" alt="image-20240328142122532"></p><p><img src="https://cos.lukme.top/Pic/image-20240328142637912.png" alt="image-20240328142637912"></p><h2 id="Linuxè¿œç¨‹è¿æ¥">Linuxè¿œç¨‹è¿æ¥</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">åè®®ï¼šSSH ssh:// ç«¯å£ï¼š22 è¿æ¥linux</span><br><span class="line">åè®®ï¼šrdp remote desktop protocol ç«¯å£ï¼š3389è¿æ¥windowsï¼Œæ¡Œé¢æ§åˆ¶</span><br><span class="line">http://åè®®    ç«¯å£80</span><br><span class="line">https://åè®®    ç«¯å£443</span><br><span class="line">file:// ç«¯å£   æµè§ˆå™¨è®¿é—®æ¡Œé¢æ–‡ä»¶åè®®</span><br></pre></td></tr></table></figure><h3 id="è®¤è¯†ä½¿ç”¨xshell">è®¤è¯†ä½¿ç”¨xshell</h3><p><img src="https://cos.lukme.top/Pic/image-20240401212225509.png" alt="image-20240401212225509"></p><p><img src="https://cos.lukme.top/Pic/image-20240401212249382.png" alt="image-20240401212249382"></p><h2 id="Xshellè¿æ¥ä¸ä¸Šè™šæ‹Ÿæœºæ’æŸ¥">Xshellè¿æ¥ä¸ä¸Šè™šæ‹Ÿæœºæ’æŸ¥</h2><h3 id="1-æŸ¥çœ‹è™šæ‹Ÿæœºç½‘å¡é…ç½®">1.æŸ¥çœ‹è™šæ‹Ÿæœºç½‘å¡é…ç½®</h3><p><img src="https://cos.lukme.top/Pic/image-20240401212405053.png" alt="image-20240401212405053"></p><h3 id="2-æ£€æŸ¥è·¯ç”±å™¨-è™šæ‹Ÿç½‘ç»œç¼–è¾‘å™¨-é…ç½®">2.æ£€æŸ¥è·¯ç”±å™¨ (è™šæ‹Ÿç½‘ç»œç¼–è¾‘å™¨)é…ç½®</h3><p><img src="https://cos.lukme.top/Pic/image-20240401212612086.png" alt="image-20240401212612086"></p><h3 id="3-è™šæ‹Ÿæœºç½‘å¡é…ç½®æ–‡ä»¶å†…å®¹">3.è™šæ‹Ÿæœºç½‘å¡é…ç½®æ–‡ä»¶å†…å®¹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">TYPE=Ethernet</span><br><span class="line">PROXY_METHOD=none</span><br><span class="line">BROWSER_ONLY=no</span><br><span class="line">BOOTPROTO=nonenone/dhcp/static</span><br><span class="line">DEFROUTE=<span class="built_in">yes</span></span><br><span class="line">IPV4_FAILURE_FATAL=no</span><br><span class="line">NAME=ens33</span><br><span class="line">DEVICE=ens33</span><br><span class="line">ONBOOT=<span class="built_in">yes</span>å¼€æœºå¯åŠ¨ç½‘å¡</span><br><span class="line">IPADDR=10.0.0.250ip</span><br><span class="line">NETMASK=255.255.255.0å­ç½‘æ©ç </span><br><span class="line">GATEWAY=10.0.0.2ç½‘å…³</span><br><span class="line">DNS1=223.5.5.5é¦–é€‰DNS</span><br><span class="line">DNS2=223.6.6.6å¤‡ç”¨DNS</span><br><span class="line">IPV6INIT=no</span><br><span class="line">UUID=c96bc909-188e-ec64-3a96-6a90982b08ad</span><br></pre></td></tr></table></figure><h3 id="4-æµ‹è¯•è™šæ‹Ÿæœºæ˜¯å¦èƒ½ä¸Šå¤–ç½‘-ping-baidu-com">4.æµ‹è¯•è™šæ‹Ÿæœºæ˜¯å¦èƒ½ä¸Šå¤–ç½‘ ping <a href="http://baidu.com">baidu.com</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## æµ‹è¯•è™šæ‹Ÿæœºæ˜¯å¦èƒ½ä¸Šå¤–ç½‘</span></span><br><span class="line">ping baidu.com</span><br><span class="line">åœ¨xshellé‡Œping10.0.0.250ï¼Œè°è¿æ¥è°ï¼Œå°±ç”¨è°å»pingè°</span><br></pre></td></tr></table></figure><p>5.æ£€æŸ¥ä¸‹ç«¯å£æ˜¯ä¸æ˜¯22ï¼ˆsshåè®®ç«¯å£22ï¼‰</p><p>telnet 10.0.0.250 22 [c:~]$ telnet 10.0.0.250 22</p><p>Windowså¼€å¯telnet</p><p><img src="https://cos.lukme.top/Pic/image-20240401213429309.png" alt="image-20240401213429309"></p>]]></content>
      
      
      <categories>
          
          <category> Linuxæ•²é—¨ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>04.åŸºç¡€åˆ›å»ºå‘½ä»¤</title>
      <link href="/posts/866ee0b1.html"/>
      <url>/posts/866ee0b1.html</url>
      
        <content type="html"><![CDATA[<div class='wow animate__heartBeat' data-wow-duration='' data-wow-delay='1s' data-wow-offset=''  data-wow-iteration='2' ><div class="note red icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p><a href="https://www.lukeme.top/posts/4c7367cf.html">å‘Šåˆ«å°ç™½ï¼Œç‚¹å‡»ç›´è¾¾</a></p></div></div><h3 id="æ–‡ä»¶ç®¡ç†å‘½ä»¤-cd">æ–‡ä»¶ç®¡ç†å‘½ä»¤-- cd</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">change directory <span class="comment">#äº¤æ¢ åˆ‡æ¢ ç›®å½•</span></span><br><span class="line">Windowsä¸Šé¼ æ ‡åŒå‡» ä¸èƒ½<span class="built_in">cd</span>æ–‡ä»¶</span><br><span class="line"><span class="comment">## è¯­æ³•:</span></span><br><span class="line"><span class="built_in">cd</span> ç›®æ ‡ç›®å½•</span><br><span class="line"><span class="comment">## ç›®æ ‡ç›®å½•</span></span><br><span class="line">ç»å¯¹è·¯å¾„çš„ç›®å½•</span><br><span class="line">ç›¸å¯¹è·¯å¾„çš„ç›®å½•</span><br><span class="line"><span class="comment">##å›åˆ°å½“å‰ç”¨æˆ·çš„å®¶ç›®å½•</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">cd</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">cd</span> ~</span><br><span class="line"><span class="comment">## å›åˆ°ä¸Šä¸€æ¬¡æ‰€åœ¨çš„ç›®å½•   cd -</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">cd</span> /etc/</span><br><span class="line">[root@lb02 etc]# <span class="built_in">cd</span> /etc/sysconfig/</span><br><span class="line">[root@lb02 sysconfig]# <span class="built_in">cd</span> -</span><br><span class="line">/etc</span><br><span class="line"></span><br><span class="line"><span class="comment">## è¿›å…¥å½“å‰ç›®å½•</span></span><br><span class="line">[root@lb02 etc]# <span class="built_in">cd</span> .</span><br><span class="line"><span class="comment">## è¿”å›ä¸Šä¸€çº§ç›®å½•</span></span><br><span class="line">[root@lb02 etc]# <span class="built_in">cd</span> ..</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å¸®åŠ©è¯­æ³•</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹å¸®åŠ©æ—¶ï¼Œè§åˆ°è¯­æ³•ä¸­çš„[]ï¼Œä»£è¡¨ []ä¸­æ‹¬å·ä¸­çš„å†…å®¹ å¯æœ‰å¯æ— </span></span><br><span class="line"><span class="built_in">ls</span> [OPTION]... [FILE]...</span><br></pre></td></tr></table></figure><h3 id="æ–‡ä»¶ç®¡ç†å‘½ä»¤â€“ls">æ–‡ä»¶ç®¡ç†å‘½ä»¤â€“ls</h3><table><thead><tr><th>é€‰é¡¹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>-l</td><td>æŸ¥çœ‹ç›®å½•ä¸‹æ–‡ä»¶çš„åå­—å’Œè¯¦ç»†ä¿¡æ¯</td></tr><tr><td>-a</td><td>æŸ¥çœ‹ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶åŒ…æ‹¬éšè—æ–‡ä»¶</td></tr><tr><td>-hï¼ˆä¸€èˆ¬é…åˆ-lä½¿ç”¨ï¼‰</td><td>ä»¥äººç±»å¯è¯»çš„æ–¹å¼æŸ¥çœ‹æ–‡ä»¶è¯¦ç»†ä¿¡æ¯</td></tr><tr><td>-tï¼ˆä¸€èˆ¬é…åˆ-lä½¿ç”¨ï¼‰</td><td>æŒ‰ç…§æ–‡ä»¶ä¿®æ”¹æ—¥æœŸæ’åºï¼Œæœ€æ–°çš„åœ¨æœ€ä¸Šé¢</td></tr><tr><td>-rï¼ˆä¸€èˆ¬é…åˆ-lä½¿ç”¨ï¼‰</td><td>reverseç¿»è½¬ï¼ˆå€’å™æ’åºï¼‰</td></tr><tr><td>-dï¼ˆä¸€èˆ¬é…åˆ-lä½¿ç”¨ï¼‰</td><td>åªæŸ¥çœ‹ç›®å½•æœ¬èº«ä¿¡æ¯ä¸æŸ¥çœ‹æ–‡ä»¶</td></tr><tr><td>-iï¼ˆä¸€èˆ¬é…åˆ-lä½¿ç”¨ï¼‰</td><td>æ˜¾ç¤ºinodeå·</td></tr><tr><td>-S(ä¸€èˆ¬é…åˆ-lä½¿ç”¨)</td><td>ä¾æ®å†…å®¹å¤§å°å°†æ–‡ä»¶æ’åºæ˜¾ç¤º</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">list <span class="comment">#åˆ—è¡¨</span></span><br><span class="line"><span class="comment">##  æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶å(ä¸åŒ…å«éšè—æ–‡ä»¶)</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">ls</span></span><br><span class="line">anaconda-ks.cfg  ip_host.sh  ip_host.sh~</span><br><span class="line"><span class="comment">##æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶çš„åå’Œè¯¦ç»†ä¿¡æ¯(ä¸åŒ…å«éšè—æ–‡ä»¶)</span></span><br><span class="line">-l use a long listing format ä½¿ç”¨ä¸€ä¸ªé•¿çš„åˆ—è¡¨æ ¼å¼</span><br><span class="line">[root@lb02 ~]# <span class="built_in">ls</span> -l</span><br><span class="line">total 12</span><br><span class="line">-rw-------. 1 root root 1447 Mar 27 12:11 anaconda-ks.cfg</span><br><span class="line">-rw-r--r--. 1 root root  377 Mar 27 23:50 ip_host.sh</span><br><span class="line">-rw-r--r--. 1 root root  366 Mar 27 23:33 ip_host.sh~</span><br><span class="line"></span><br><span class="line">[root@lb02 ~]# ll</span><br><span class="line">total 12</span><br><span class="line">-rw-------. 1 root root 1447 Mar 27 12:11 anaconda-ks.cfg</span><br><span class="line">-rw-r--r--. 1 root root  377 Mar 27 23:50 ip_host.sh</span><br><span class="line">-rw-r--r--. 1 root root  366 Mar 27 23:33 ip_host.sh~</span><br><span class="line"></span><br><span class="line"><span class="comment">## æŸ¥çœ‹æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶è¯¦ç»†ä¿¡æ¯ï¼ˆä¸åŒ…å«éšè—æ–‡ä»¶ï¼‰</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">ls</span> -l /etc/sysconfig/</span><br><span class="line">total 84</span><br><span class="line">-rw-r--r--. 1 root root  379 Mar 27 12:11 anaconda</span><br><span class="line">-rw-r--r--. 1 root root  483 Mar 27 12:10 authconfig</span><br><span class="line">drwxr-xr-x. 2 root root   43 Mar 27 12:07 cbq</span><br><span class="line">drwxr-xr-x. 2 root root    6 Oct 31  2018 console</span><br><span class="line"></span><br><span class="line"><span class="comment">#åœ¨linuxä¸­ï¼Œéšè—æ–‡ä»¶åå­—ä»¥&#x27;.&#x27;å¼€å¤´</span></span><br><span class="line"><span class="comment">## æŸ¥çœ‹æ‰€æœ‰æ–‡ä»¶åŒ…æ‹¬éšè—æ–‡ä»¶ï¼ˆå¤šä¸ªé€‰é¡¹å¯ä»¥åˆå¹¶æ‰§è¡Œï¼‰</span></span><br><span class="line">-aï¼Œ--all <span class="keyword">do</span> not ignore entries starting with . <span class="comment"># ä¸å¿½ç•¥ä»¥ç‚¹å¼€å¤´çš„æ–‡ä»¶</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">ls</span> -l -a   æˆ–è€…[root@lb02 ~]# <span class="built_in">ls</span> -la/ls -al</span><br><span class="line">[root@lb02 ~]# <span class="built_in">ls</span> -l -a</span><br><span class="line">total 48</span><br><span class="line">dr-xr-x---.  2 root root   195 Mar 27 23:50 .</span><br><span class="line">dr-xr-xr-x. 17 root root   224 Mar 27 12:10 ..</span><br><span class="line">-rw-------.  1 root root  1447 Mar 27 12:11 anaconda-ks.cfg</span><br><span class="line"></span><br><span class="line"><span class="comment">## ä»¥äººç±»å¯è¯»çš„æ–¹å¼æŸ¥çœ‹æ–‡ä»¶è¯¦ç»†ä¿¡æ¯ï¼ˆå¤§å°+å•ä½ é…åˆ-lä½¿ç”¨ï¼‰</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">ls</span> -l /etc/sysconfig/ebtables-config </span><br><span class="line">-rw-------. 1 root root 1390 Apr 11  2018 /etc/sysconfig/ebtables-config</span><br><span class="line">[root@lb02 ~]# <span class="built_in">ls</span> -hl /etc/sysconfig/ebtables-config </span><br><span class="line">-rw-------. 1 root root 1.4K Apr 11  2018 /etc/sysconfig/ebtables-config</span><br><span class="line"></span><br><span class="line"><span class="comment">## æŒ‰ç…§ä¿®æ”¹æ—¥æœŸæ’åºï¼ˆæœ€æ–°çš„åœ¨æœ€ä¸Šé¢ï¼‰</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">ls</span> -l    //ä¸æ’åº</span><br><span class="line">total 12</span><br><span class="line">-rw-------. 1 root root 1447 Mar 27 12:11 anaconda-ks.cfg</span><br><span class="line">-rw-r--r--. 1 root root  377 Mar 27 23:50 ip_host.sh</span><br><span class="line">-rw-r--r--. 1 root root  366 Mar 27 23:33 ip_host.sh~</span><br><span class="line">[root@lb02 ~]# <span class="built_in">ls</span> -lt</span><br><span class="line">total 12</span><br><span class="line">-rw-r--r--. 1 root root  377 Mar 27 23:50 ip_host.sh</span><br><span class="line">-rw-r--r--. 1 root root  366 Mar 27 23:33 ip_host.sh~</span><br><span class="line">-rw-------. 1 root root 1447 Mar 27 12:11 anaconda-ks.cfg</span><br><span class="line"></span><br><span class="line"><span class="comment">## æŒ‰ç…§ä¿®æ”¹æ—¶é—´ï¼Œå€’å™æ’åºï¼ˆæœ€æ–°çš„åœ¨æœ€ä¸‹é¢ï¼‰</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">ls</span> -ltr</span><br><span class="line">total 12</span><br><span class="line">-rw-------. 1 root root 1447 Mar 27 12:11 anaconda-ks.cfg</span><br><span class="line">-rw-r--r--. 1 root root  366 Mar 27 23:33 ip_host.sh~</span><br><span class="line">-rw-r--r--. 1 root root  377 Mar 27 23:50 ip_host.sh</span><br><span class="line"></span><br><span class="line"><span class="comment">## åªæŸ¥çœ‹ç›®å½•æœ¬èº«ï¼Œä¸æŸ¥çœ‹ç›®å½•ä¸‹é¢çš„æ‰€æœ‰æ–‡ä»¶</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">ls</span> -ld /etc/sysconfig</span><br><span class="line">drwxr-xr-x. 6 root root 4096 Mar 27 12:11 /etc/sysconfig</span><br></pre></td></tr></table></figure><h3 id="æ–‡ä»¶ç®¡ç†å‘½ä»¤â€“mkdir">æ–‡ä»¶ç®¡ç†å‘½ä»¤â€“mkdir</h3><table><thead><tr><th>é€‰é¡¹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>-p</td><td>é€’å½’åˆ›å»ºï¼Œå¦‚æœç›®å½•å·²å­˜åœ¨åˆ™ä¸åˆ›å»ºï¼Œå¦‚æœç›®å½•ä¸å­˜åœ¨åˆ™åˆ›å»º</td></tr><tr><td>-v</td><td>æ˜¾ç¤ºåˆ›å»ºçš„è¯¦ç»†ä¿¡æ¯ï¼ˆåˆ›å»ºçš„è¿‡ç¨‹ï¼‰</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">make directory</span><br><span class="line"><span class="comment">## è¯­æ³•ï¼š</span></span><br><span class="line"><span class="built_in">mkdir</span> ç›®æ ‡ç›®å½•</span><br><span class="line"><span class="comment">#åŒæ—¶åˆ›å»ºå¤šä¸ªç›®å½•</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">mkdir</span> /abc /123 /456  æ¯ä¸ªç›®å½•è¦æœ‰ç©ºæ ¼</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ›å»ºå±‚çº§ç›®å½•</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">mkdir</span> -p /abc/123/456 789  789æ˜¯åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºçš„</span><br><span class="line"></span><br><span class="line"><span class="comment"># å½“è¦åˆ›å»ºçš„ç›®æ ‡ç›®å½•å·²ç»å­˜åœ¨æ—¶ ä¼šæŠ¥é”™</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">mkdir</span> a</span><br><span class="line"><span class="built_in">mkdir</span>: cannot create directory â€˜aâ€™: File exists</span><br><span class="line"></span><br><span class="line"><span class="comment">## æŸ¥çœ‹åˆ›å»ºè¿‡ç¨‹</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">mkdir</span> -pv a/b/c     </span><br><span class="line"><span class="built_in">mkdir</span>: created directory â€˜a/bâ€™   å› ä¸ºaå·²ç»å­˜åœ¨ï¼Œè‹¥ä¸å­˜åœ¨åˆ™ä¼šæœ‰<span class="built_in">mkdir</span>: created directory â€˜aâ€™</span><br><span class="line"><span class="built_in">mkdir</span>: created directory â€˜a/b/câ€™</span><br><span class="line"></span><br><span class="line"><span class="comment">## ä¸èƒ½åœ¨æ–‡ä»¶ä¸‹é¢åˆ›å»ºç›®å½•</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">mkdir</span> /etc/passwd/123</span><br><span class="line"><span class="built_in">mkdir</span>: cannot create directory â€˜/etc/passwd/123â€™: Not a directory     // ä¸æ˜¯ä¸€ä¸ªç›®å½•</span><br><span class="line"></span><br><span class="line"><span class="comment">## åˆ›å»ºå¤šä¸ªåºåˆ—ç›®å½•</span></span><br><span class="line">[root@lb01 ~]# <span class="built_in">mkdir</span> &#123;a..c&#125;</span><br><span class="line">[root@lb01 ~]# <span class="built_in">ls</span></span><br><span class="line">a  b  c</span><br><span class="line"></span><br><span class="line"><span class="comment">## æŒ‡å®šç›®å½•ä¸‹åˆ›å»ºå¹³çº§ç›®å½•</span></span><br><span class="line">[root@lb01 ~]#  <span class="built_in">mkdir</span> /tmp/&#123;a,b,c,d&#125;åœ¨/tmpä¸‹åˆ›å»ºa,b,c,då››ä¸ªç›®å½•</span><br><span class="line"></span><br><span class="line"><span class="comment">#-pï¼šé€’å½’åˆ›å»ºç›®å½•ï¼Œæ²¡æŠ¥é”™ï¼ˆå¦‚æœç›®å½•ä¸å­˜åœ¨ï¼Œå°±åˆ›å»ºï¼Œç›®å½•å­˜åœ¨ï¼Œå°±ä¸æ‰§è¡Œå‘½ä»¤ï¼‰</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">mkdir</span> -p 111/&#123;2,3&#125;/abcåˆ†åˆ«åœ¨111/2å’Œ111/3åˆ›å»ºabc</span><br><span class="line">ç›®å½•</span><br><span class="line"><span class="comment"># åˆ›å»ºç›®å½•ï¼š</span></span><br><span class="line">/tmp/a</span><br><span class="line">/tmp/b</span><br><span class="line">/tmp/1</span><br><span class="line">/tmp/2</span><br><span class="line">1.[root@www ~]# <span class="built_in">mkdir</span> &#123;/tmp/a,/tmp/b,/tmp/1,/tmp/2</span><br><span class="line"></span><br><span class="line">2.[root@www ~]# <span class="built_in">mkdir</span> /tmp/&#123;a,b,1,2&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="Linuxä¸­çš„ç‰¹æ®Šç¬¦å·">Linuxä¸­çš„ç‰¹æ®Šç¬¦å·</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">\ï¼šè½¬ä¹‰ç¬¦ï¼Œè®©ç‰¹æ®Šç¬¦å·ï¼Œåšä»–æœ¬èº«</span><br><span class="line">&#123;&#125;ï¼šåºåˆ—ç¬¦å·,æœ‰è§„å¾‹çš„åºåˆ—ä½¿ç”¨<span class="string">&#x27;..&#x27;</span> æ²¡æœ‰è§„å¾‹çš„åºåˆ—ä½¿ç”¨<span class="string">&#x27;,&#x27;</span>éš”å¼€</span><br></pre></td></tr></table></figure><h3 id="æ–‡ä»¶ç®¡ç†å‘½ä»¤â€“touch">æ–‡ä»¶ç®¡ç†å‘½ä»¤â€“touch</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºæ™®é€šæ–‡ä»¶ï¼ˆå¯ç¼–è¾‘æ–‡ä»¶ï¼‰</span></span><br><span class="line"><span class="built_in">touch</span> ç›®æ ‡æ–‡ä»¶</span><br><span class="line"><span class="built_in">touch</span> [OPTION]... FILE...</span><br><span class="line"><span class="comment">## åˆ›å»ºå¤šä¸ªæ–‡ä»¶</span></span><br><span class="line">[root@www ~]# <span class="built_in">touch</span> 1.txt abc/2.txt /tmp/3.txt</span><br><span class="line"><span class="comment">## æŠ¥é”™ï¼šåˆ›å»ºæ–‡ä»¶å‰æï¼Œä¸Šä¸€çº§ç›®å½•å¿…é¡»å­˜åœ¨</span></span><br><span class="line">[root@www ~]# <span class="built_in">touch</span> /iskshda/1.txt</span><br><span class="line"><span class="built_in">touch</span>: cannot <span class="built_in">touch</span> â€˜/iskshda/1.txtâ€™: No such file or directory</span><br><span class="line"><span class="comment">## å½“åˆ›å»ºçš„ç›®æ ‡æ–‡ä»¶å·²ç»å­˜åœ¨æ—¶ï¼Œä¸ä¼šæŠ¥é”™ï¼Œä½†ä¼šæ›´æ–°ä¿®æ”¹æ—¶é—´</span></span><br><span class="line">[root@www ~]# <span class="built_in">touch</span> 1.txt</span><br><span class="line"></span><br><span class="line">1ï¼‰å½“åˆ›å»ºçš„ç›®æ ‡æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ™®é€šæ–‡ä»¶</span><br><span class="line">2ï¼‰å½“åˆ›å»ºçš„ç›®æ ‡æ–‡ä»¶å­˜åœ¨æ—¶ï¼Œåˆ™ä¿®æ”¹è¯¥æ–‡ä»¶çš„æ—¶é—´</span><br><span class="line">3ï¼‰å½“åˆ›å»ºçš„ç›®æ ‡æ˜¯ä¸€ä¸ªç›®å½•æ—¶ï¼Œåˆ™ä¿®æ”¹ç›®å½•çš„æ—¶é—´</span><br><span class="line"><span class="comment">#åœ¨linuxç³»ç»Ÿä¸­ï¼Œä¸¥æ ¼åŒºåˆ†å¤§å°å†™</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linuxæ•²é—¨ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>08.æ–‡ä»¶å±æ€§</title>
      <link href="/posts/1fbc6f0a.html"/>
      <url>/posts/1fbc6f0a.html</url>
      
        <content type="html"><![CDATA[<div class='wow animate__heartBeat' data-wow-duration='' data-wow-delay='1s' data-wow-offset=''  data-wow-iteration='2' ><div class="note red icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p><a href="https://www.lukeme.top/posts/4c7367cf.html">å‘Šåˆ«å°ç™½ï¼Œç‚¹å‡»ç›´è¾¾</a></p></div></div><h3 id="æ–‡ä»¶çš„å±æ€§">æ–‡ä»¶çš„å±æ€§</h3><table><thead><tr><th>æ–‡ä»¶å­—ç¬¦ç±»å‹</th><th>æ–‡ä»¶ç±»å‹</th></tr></thead><tbody><tr><td>-</td><td>file æ™®é€šæ–‡ä»¶</td></tr><tr><td>d</td><td>directory ç›®å½•</td></tr><tr><td>c</td><td>char å­—ç¬¦è®¾å¤‡</td></tr><tr><td>b</td><td>block å—è®¾å¤‡</td></tr><tr><td>l</td><td>link é“¾æ¥æ–‡ä»¶</td></tr><tr><td>s</td><td>socket å®‰å…¨ ï¼ˆå¥—æ¥å­—ï¼‰æ–‡ä»¶</td></tr><tr><td>p</td><td>pipe ç®¡é“æ–‡ä»¶</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ–‡ä»¶ç±»å‹ æ–‡ä»¶æƒé™rï¼šread è¯» wï¼šwrite å†™ xï¼šexecuteæ‰§è¡Œ </span></span><br><span class="line">             ç¡¬é“¾æ¥æ•° æ‰€å±ç”¨æˆ· æ‰€å±ç”¨æˆ·ç»„ æ–‡ä»¶å¤§å°      æ—¶é—´        æ–‡ä»¶å</span><br><span class="line">- rw-r--r--.    1     root     root       289    Apr 7 16:40     11.txt</span><br><span class="line">d rwxr-xr-x.    4     root     root       41     Apr 3 18:04     zls</span><br><span class="line"><span class="comment">## æ–‡ä»¶ç±»å‹</span></span><br><span class="line">[root@localhost ~]# ll /dev/null -d</span><br><span class="line">crw-rw-rw-. 1 root root 1, 3 Apr 7 16:21 /dev/null</span><br><span class="line">[root@localhost ~]# ll /dev/sda1</span><br><span class="line">brw-rw----. 1 root disk 8, 1 Apr 7 16:21 /dev/sda1</span><br><span class="line">[root@localhost ~]# ll /run/systemd/initctl/fifo</span><br><span class="line">prw-------. 1 root root 0 Apr 7 16:21 /run/systemd/initctl/fifo</span><br><span class="line">[root@localhost ~]# ll /dev/log</span><br><span class="line">srw-rw-rw-. 1 root root 0 Apr 7 16:21 /dev/log</span><br><span class="line">[root@localhost ~]# ll -d zls/</span><br><span class="line">drwxr-xr-x. 4 root root 41 Apr 3 18:04 zls/</span><br><span class="line">[root@localhost ~]# ll</span><br><span class="line">-rw-r--r--. 1 root root 289 Apr 7 16:40 11.txt</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨fileå‘½ä»¤æ¥é‰´åˆ«æ–‡ä»¶ç±»å‹">ä½¿ç”¨fileå‘½ä»¤æ¥é‰´åˆ«æ–‡ä»¶ç±»å‹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ll *.jpg</span><br><span class="line">-rw-r--r--. 1 root root 20735 Mar 13 09:08 w700d1q75cms.jpg</span><br><span class="line">-rw-r--r--. 1 root root 4 Apr 7 19:50 zls.jpg</span><br><span class="line">[root@localhost ~]# file w700d1q75cms.jpg</span><br><span class="line">w700d1q75cms.jpg: JPEG image data, EXIF standard</span><br><span class="line">[root@localhost ~]# file zls.jpg</span><br><span class="line">zls.jpg: empty</span><br><span class="line">[root@localhost ~]# <span class="built_in">echo</span> 111 &gt; zls.jpg</span><br><span class="line">[root@localhost ~]# file zls.jpg</span><br><span class="line">zls.jpg: ASCII text</span><br><span class="line"><span class="comment">## æŸ¥çœ‹æ–‡ä»¶ç±»å‹</span></span><br><span class="line">[root@localhost ~]# file /dev/null</span><br><span class="line">/dev/null: character special</span><br><span class="line">[root@localhost ~]# file /dev/sda1</span><br><span class="line">/dev/sda1: block special</span><br><span class="line">[root@localhost ~]# file /run/systemd/initctl/fifo</span><br><span class="line">/run/systemd/initctl/fifo: fifo (named pipe)</span><br><span class="line">[root@localhost ~]# file /dev/log</span><br><span class="line">/dev/log: socket</span><br><span class="line">[root@localhost ~]# file /root/zls</span><br><span class="line">/root/zls: directory</span><br><span class="line"><span class="comment">##æ³¨æ„: Linuxæ–‡ä»¶æ‰©å±•åä¸ä»£è¡¨ä»»ä½•å«ä¹‰, ä»…ä»…æ˜¯ä¸ºäº†è¿ç»´äººå‘˜ä¾¿äºè¯†åˆ«</span></span><br></pre></td></tr></table></figure><h3 id="ç³»ç»Ÿé“¾æ¥æ–‡ä»¶">ç³»ç»Ÿé“¾æ¥æ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">æ–‡ä»¶æœ‰æ–‡ä»¶åå’Œæ•°æ®ï¼Œåœ¨Linuxä¸Šè¢«åˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ï¼šç”¨æˆ·æ•°æ®(user data)ä¸å…ƒæ•°æ®(metadata)</span><br><span class="line"></span><br><span class="line">ç”¨æˆ·æ•°æ®ï¼šæ–‡ä»¶æ•°æ®å—(data block),æ•°æ®å—æ˜¯è®°å½•æ–‡ä»¶çœŸå®å†…å®¹çš„åœ°æ–¹ï¼Œæˆ‘ä»¬å°†å…¶ç§°ä¸º#Block</span><br><span class="line">å…ƒæ•°æ®ï¼šæ–‡ä»¶çš„é™„åŠ å±æ€§ï¼Œä¾‹å¦‚ï¼šæ–‡ä»¶å¤§å°ï¼Œåˆ›å»ºæ—¶é—´ï¼Œå±ç»„ï¼Œå±ä¸»ç­‰ï¼Œæˆ‘ä»¬ç§°å…¶ä¸º#Inode</span><br><span class="line">åœ¨Linuxä¸­ï¼Œinodeæ˜¯æ–‡ä»¶å…ƒæ•°æ®çš„ä¸€éƒ¨åˆ†ï¼Œä½†å…¶å¹¶ä¸åŒ…å«æ–‡ä»¶åï¼Œinodeå·å³ç´¢å¼•èŠ‚ç‚¹å·</span><br><span class="line">æ–‡ä»¶åä»…æ˜¯ä¸ºäº†æ–¹ä¾¿äººä»¬çš„è®°å¿†å’Œä½¿ç”¨ï¼Œç³»ç»Ÿæˆ–è€…ç¨‹åºé€šè¿‡inodeå·å¯»æ‰¾æ­£ç¡®çš„æ–‡ä»¶æ•°æ®å—ã€‚</span><br><span class="line"></span><br><span class="line"><span class="comment">#inodeæè¿°</span></span><br><span class="line">åœ¨Linuxä¸­ï¼Œinodeï¼ˆç´¢å¼•èŠ‚ç‚¹ï¼‰æ˜¯æ–‡ä»¶ç³»ç»Ÿä¸­çš„ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œç”¨äºå­˜å‚¨æ–‡ä»¶æˆ–ç›®å½•çš„å…ƒæ•°æ®ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ–‡ä»¶ç±»å‹ã€æƒé™ã€æ‰€æœ‰è€…ã€å¤§å°ã€æ•°æ®å—çš„ä½ç½®ç­‰ã€‚å®ƒé€šè¿‡ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ç¬¦æ¥æ ‡è¯†æ–‡ä»¶æˆ–ç›®å½•ï¼Œå¹¶ä¸”åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­å…·æœ‰å›ºå®šçš„ä½ç½®ã€‚ç®€è€Œè¨€ä¹‹ï¼Œinodeæ˜¯æ–‡ä»¶ç³»ç»Ÿä¸­ç”¨äºæè¿°æ–‡ä»¶æˆ–ç›®å½•å±æ€§çš„æ•°æ®ç»“æ„ã€‚</span><br><span class="line"></span><br><span class="line"><span class="comment">#å…ƒæ•°æ®ï¼šç”¨æ¥æè¿°æ•°æ®çš„æ•°æ®</span></span><br><span class="line"><span class="comment">#çœŸå®æ•°æ®ï¼šç”¨æˆ·äº§ç”Ÿçš„æ•°æ®ï¼ˆæ–‡ä»¶å†…å®¹ï¼‰</span></span><br><span class="line"><span class="comment">#inode:ç”¨äºå­˜å‚¨æ–‡ä»¶æˆ–ç›®å½•å…ƒæ•°æ®ä¿¡æ¯çš„æ•°æ®ç»“æ„ã€‚</span></span><br><span class="line"><span class="comment">#block:ç”¨äºå­˜æ”¾ç”¨æˆ·çœŸå®æ•°æ®çš„éƒ¨åˆ†</span></span><br><span class="line"><span class="built_in">cat</span> 1.txt</span><br><span class="line">aaa</span><br><span class="line">-rw-r--r--. 1 root root   583919 Oct 29 02:33 1.txt  &gt;&gt;==å…ƒæ•°æ®inode</span><br><span class="line">aaa çœŸå®æ•°æ®   Block</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ–‡ä»¶è¯»å–æµç¨‹">æ–‡ä»¶è¯»å–æµç¨‹</h3><p><img src="https://cos.lukme.top/Pic/image-20240407164513997.png" alt="image-20240407164513997"></p><h3 id="blockä»‹ç»">blockä»‹ç»</h3><p><img src="https://cos.lukme.top/Pic/image-20240407164729805.png" alt="image-20240407164729805"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">blocké»˜è®¤å¤§å°ä¸º4k</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç£ç›˜å­˜å‚¨æ•°æ®ä¼šè¢«åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š</span></span><br><span class="line">ä¸€éƒ¨åˆ†å­˜å‚¨å…ƒæ•°æ®ï¼Œå­˜å‚¨å…ƒæ•°æ®çš„éƒ¨åˆ†å«åšinodeï¼Œæ¯ä¸ªæ–‡ä»¶éƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„inodeå·ï¼Œè¿™ä¸ªinodeå·å¯ä»¥ç†è§£ä¸ºæ–‡ä»¶å­˜å‚¨åœ¨ç£ç›˜ä¸Šçš„æˆ¿é—´å·</span><br><span class="line">ä¸€éƒ¨åˆ†å­˜å‚¨çœŸå®æ•°æ®ï¼Œå­˜å‚¨çœŸå®æ•°æ®çš„éƒ¨åˆ†å«åšblockï¼Œä¸€ä¸ªblocké»˜è®¤æ˜¯4k</span><br><span class="line"></span><br><span class="line"><span class="comment">#  å¦‚ä¸Šå›¾ï¼Œå½“å­˜æ”¾çš„ä¸€ä¸ªblockä¸è¶³4kæ—¶ï¼Œå†æ¬¡å­˜æ–°æ–‡ä»¶ä¸ä¼šå ç”¨ä¸Šæ¬¡ä¸è¶³4kçš„block</span></span><br></pre></td></tr></table></figure><h3 id="è½¯é“¾æ¥">è½¯é“¾æ¥</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## è½¯é“¾æ¥çš„åˆ›å»ºæ–¹å¼ lnï¼ˆlinkï¼‰</span></span><br><span class="line">è½¯é“¾æ¥ ==&gt; ç¬¦å·é“¾æ¥</span><br><span class="line">soft_link symbolic <span class="built_in">link</span></span><br><span class="line"><span class="built_in">ln</span> -s æºæ–‡ä»¶ï¼ˆè¦ç»™è°åˆ›å»ºå¿«æ·æ–¹å¼ï¼‰ ç›®æ ‡æ–‡ä»¶ï¼ˆå¿«æ·æ–¹å¼çš„ä½ç½®ï¼‰</span><br><span class="line">[root@localhost ~]# ll -i zls111 1.txt</span><br><span class="line">16803484 -rw-r--r--. 1 root root 279 Apr 7 17:55 1.txt</span><br><span class="line">16799371 lrwxrwxrwx. 1 root root 11 Apr 7 22:34 zls111 -&gt; /root/1.txt</span><br><span class="line">[root@localhost ~]# <span class="built_in">ln</span> -s /root/1.txt /opt</span><br><span class="line">æ€»ç»“ï¼š</span><br><span class="line">1ï¼‰åˆ›å»ºè½¯é“¾æ¥æ—¶ï¼Œç›´æ¥æ¥ä¸€ä¸ªå·²å­˜åœ¨çš„ç›®å½•ï¼Œä»¥æºæ–‡ä»¶åå­—æ¥å‘½åæ–°çš„æ–‡ä»¶ååˆ›å»ºåˆ°æŒ‡å®šç›®å½•ä¸‹</span><br><span class="line">2ï¼‰åˆ›å»ºè½¯é“¾æ¥æ—¶ï¼ŒæŒ‡å®šä¸€ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œå¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºè½¯é“¾æ¥å¹¶æ”¹å</span><br><span class="line">2ï¼‰åˆ›å»ºè½¯é“¾æ¥æ—¶ï¼ŒæŒ‡å®šä¸€ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œå¦‚æœè¯¥æ–‡ä»¶å­˜åœ¨ï¼Œåˆ™æŠ¥é”™ï¼Œæ— æ³•åˆ›å»º</span><br><span class="line">[root@localhost ~]# <span class="built_in">ln</span> -s /root/1.txt /tmp/1.txt</span><br><span class="line"><span class="built_in">ln</span>: failed to create symbolic <span class="built_in">link</span> â€˜/tmp/1.txtâ€™: File exists</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ç¡¬é“¾æ¥">ç¡¬é“¾æ¥</h3><p>è‹¥ä¸€ä¸ª inode å·å¯¹åº”å¤šä¸ªæ–‡ä»¶åï¼Œåˆ™ç§°è¿™äº›æ–‡ä»¶ä¸ºç¡¬é“¾æ¥ã€‚æ¢å¥è¯è¯´ï¼Œç¡¬é“¾æ¥å°±æ˜¯åŒä¸€ä¸ªæ–‡ä»¶ä½¿ç”¨äº†å¤š ä¸ªåˆ«åï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º hard link å°±æ˜¯fileçš„ä¸€ä¸ªåˆ«åï¼Œä»–ä»¬æœ‰å…±åŒçš„ inode</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## åˆ›å»ºç¡¬é“¾æ¥æ–¹å¼</span></span><br><span class="line"><span class="built_in">ln</span> æºæ–‡ä»¶ï¼ˆè¦ç»™è°åˆ›å»ºç¡¬é“¾æ¥ï¼‰ ç›®æ ‡æ–‡ä»¶ï¼ˆç¡¬é“¾æ¥çš„ä½ç½®ï¼‰</span><br><span class="line">[root@localhost ~]# ll -i</span><br><span class="line">total 24</span><br><span class="line">16797812 lrwxrwxrwx. 1 root root 11 Apr 7 23:35 123 -&gt; /root/1.txt</span><br><span class="line">16797823 -rw-r--r--. 6 root root 4 Apr 7 23:37 1.txt</span><br><span class="line">16797823 -rw-r--r--. 6 root root 4 Apr 7 23:37 abc</span><br><span class="line">16797823 -rw-r--r--. 6 root root 4 Apr 7 23:37 abc1</span><br><span class="line">16797823 -rw-r--r--. 6 root root 4 Apr 7 23:37 abc2</span><br><span class="line">16797823 -rw-r--r--. 6 root root 4 Apr 7 23:37 abc3</span><br><span class="line">16797823 -rw-r--r--. 6 root root 4 Apr 7 23:37 abc4</span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/image-20240407201426083.png" alt="image-20240407201426083"></p><h3 id="ç¡¬é“¾æ¥å’Œè½¯é“¾æ¥çš„åŒºåˆ«">ç¡¬é“¾æ¥å’Œè½¯é“¾æ¥çš„åŒºåˆ«</h3><table><thead><tr><th>åŒºåˆ«</th><th>ç¡¬é“¾æ¥</th><th>è½¯é“¾æ¥</th></tr></thead><tbody><tr><td>å‘½ä»¤</td><td>ln</td><td>ln -s</td></tr><tr><td>inode</td><td>å’Œæºæ–‡ä»¶inodeå·ç›¸åŒ</td><td>å’Œæºæ–‡ä»¶inodeå·ä¸åŒ</td></tr><tr><td>æºæ–‡ä»¶</td><td>åˆ é™¤æºæ–‡ä»¶ä¸å½±å“é“¾æ¥æ–‡ä»¶</td><td>åˆ é™¤æºæ–‡ä»¶å½±å“é“¾æ¥æ–‡ä»¶</td></tr><tr><td>è·¨åˆ†åŒºåˆ›å»º</td><td>ä¸èƒ½</td><td>å¯ä»¥</td></tr><tr><td>ç›®å½•åˆ›å»º</td><td>ä¸èƒ½</td><td>å¯ä»¥</td></tr><tr><td>æ–‡ä»¶ç±»å‹</td><td>æ™®é€šæ–‡ä»¶</td><td>l é“¾æ¥æ–‡ä»¶</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹ç£ç›˜å‘½ä»¤</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">df</span></span><br><span class="line">Filesystem 1K-blocks Used Available Use% Mounted on</span><br><span class="line">/dev/sda3 8913920 1609880 7304040 19% /</span><br><span class="line">devtmpfs 487048 0 487048 0% /dev</span><br><span class="line">tmpfs 497948 0 497948 0% /dev/shm</span><br><span class="line">tmpfs 497948 7748 490200 2% /run</span><br><span class="line">tmpfs 497948 0 497948 0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1 508580 122216 386364 25% /boot</span><br><span class="line">tmpfs 99592 0 99592 0% /run/user/0</span><br><span class="line"><span class="comment"># -hä»¥äººç±»å¯è¯»çš„æ–¹å¼æ˜¾ç¤ºï¼Œç£ç›˜å¤§å°åŠ ä¸Šäº†å•ä½</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">df</span> -h</span><br><span class="line">Filesystem Size Used Avail Use% Mounted on</span><br><span class="line">/dev/sda3 8.6G 1.6G 7.0G 19% /</span><br><span class="line">devtmpfs 476M 0 476M 0% /dev</span><br><span class="line">tmpfs 487M 0 487M 0% /dev/shm</span><br><span class="line">tmpfs 487M 7.6M 479M 2% /run</span><br><span class="line">tmpfs 487M 0 487M 0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1 497M 120M 378M 25% /boot</span><br><span class="line">tmpfs 98M 0 98M 0% /run/user/0</span><br><span class="line"><span class="comment"># -i æŸ¥çœ‹inodeå¯ç”¨ç©ºé—´</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">df</span> -i</span><br><span class="line">Filesystem Inodes IUsed IFree IUse% Mounted on</span><br><span class="line">/dev/sda3 4462080 34791 4427289 1% /</span><br><span class="line">devtmpfs 121762 380 121382 1% /dev</span><br><span class="line">tmpfs 124487 1 124486 1% /dev/shm</span><br><span class="line">tmpfs 124487 699 123788 1% /run</span><br><span class="line">tmpfs 124487 16 124471 1% /sys/fs/cgroup</span><br><span class="line">/dev/sda1 256000 326 255674 1% /boot</span><br><span class="line">tmpfs 124487 1 124486 1% /run/user/0</span><br><span class="line">[root@localhost ~]# <span class="built_in">df</span> -ih</span><br><span class="line">Filesystem Inodes IUsed IFree IUse% Mounted on</span><br><span class="line">/dev/sda3 4.3M 34K 4.3M 1% /</span><br><span class="line">devtmpfs 119K 380 119K 1% /dev</span><br><span class="line">tmpfs 122K 1 122K 1% /dev/shm</span><br><span class="line">tmpfs 122K 699 121K 1% /run</span><br><span class="line">tmpfs 122K 16 122K 1% /sys/fs/cgroup</span><br><span class="line">/dev/sda1 250K 326 250K 1% /boot</span><br><span class="line">tmpfs 122K 1 122K 1% /run/user/0</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CentOS 6ï¼šé»˜è®¤ä½¿ç”¨çš„æ˜¯ext4çš„æ–‡ä»¶ç³»ç»Ÿ13ã€‚</span><br><span class="line">CentOS 7ï¼šé»˜è®¤ä½¿ç”¨çš„æ˜¯xfsï¼ˆeXtended File Systemï¼‰æ–‡ä»¶ç³»ç»Ÿç±»å‹</span><br></pre></td></tr></table></figure><p>å½“å‰ç£ç›˜ç©ºé—´è¿˜å‰©ä½™500Gï¼Œä½†æ˜¯å°±æ— æ³•å¾€é‡Œé¢å†™å…¥æ•°æ®ï¼ŒæŠ¥é”™ï¼Œç£ç›˜ç©ºé—´æ»¡äº†ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.inodeå·å‚¨å­˜ç£ç›˜ç©ºé—´ä¸è¶³</span><br><span class="line">2.blockå‚¨å­˜ç”¨æˆ·çœŸå®æ•°æ®ç£ç›˜ç©ºé—´ä¸è¶³</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linuxæ•²é—¨ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>03.ç›®å½•ç»“æ„</title>
      <link href="/posts/1f886c8a.html"/>
      <url>/posts/1f886c8a.html</url>
      
        <content type="html"><![CDATA[<div class='wow animate__heartBeat' data-wow-duration='' data-wow-delay='1s' data-wow-offset=''  data-wow-iteration='2' ><div class="note red icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p><a href="https://www.lukeme.top/posts/4c7367cf.html">å‘Šåˆ«å°ç™½ï¼Œç‚¹å‡»ç›´è¾¾</a></p></div></div><blockquote><p>æ–‡ä»¶ç®¡ç†æ— éå°±æ˜¯</p><p>åˆ›å»º    å¤åˆ¶   ç§»åŠ¨   æŸ¥çœ‹   ç¼–è¾‘    å‹ç¼©    æŸ¥æ‰¾    åˆ é™¤ ç­‰ç­‰</p><p>ä¸è¿‡å…ˆè®¤è¯†ä¸‹ç›®å½•ç»“æ„å§</p></blockquote><h2 id="ç³»ç»Ÿç›®å½•ç»“æ„">ç³»ç»Ÿç›®å½•ç»“æ„</h2><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">  å‡ ä¹æ‰€æœ‰çš„è®¡ç®—æœºæ“ä½œç³»ç»Ÿéƒ½æ˜¯ä½¿ç”¨ç›®å½•ç»“æ„ç»„ç»‡æ–‡ä»¶ã€‚å…·ä½“æ¥è¯´å°±æ˜¯åœ¨ä¸€ä¸ªç›®å½•ä¸­å­˜æ”¾å­ç›®å½•å’Œæ–‡ä»¶ï¼Œè€Œåœ¨å­ç›®å½•ä¸­åˆä¼šè¿›ä¸€æ­¥å­˜æ”¾å­ç›®å½•å’Œæ–‡ä»¶ï¼Œä»¥æ­¤ç±»æ¨å½¢æˆä¸€ä¸ªæ ‘çŠ¶çš„æ–‡ä»¶ç»“æ„ï¼Œç”±äºå…¶ç»“æ„å¾ˆåƒä¸€æ£µæ ‘çš„åˆ†æ”¯ï¼Œæ‰€ä»¥è¯¥ç»“æ„åˆè¢«ç§°ä¸ºç›®å½•æ ‘ã€‚</span><br><span class="line">windowsï¼šä¸€å¤šæ ¹çš„æ–¹å¼ç»„ç»‡æ–‡ä»¶C:<span class="string">\</span> D:<span class="string">\</span></span><br><span class="line">Linuxï¼šä»¥å•æ ¹çš„æ–¹å¼ç»„ç»‡æ–‡ä»¶ /</span><br></pre></td></tr></table></figure><h3 id="ç›®å½•å±‚æ¬¡çš„æ ‡å‡†FHS">ç›®å½•å±‚æ¬¡çš„æ ‡å‡†FHS</h3><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">FHSå…¨ç§°ï¼ˆ<span class="keyword">File</span><span class="params">system</span> Hierarchy Standardï¼‰ï¼Œä¸­æ–‡æ„æ€æ˜¯ç›®å½•å±‚æ¬¡æ ‡å‡†ï¼Œæ˜¯Linuxçš„ç›®å½•è§„èŒƒæ ‡å‡†ã€‚</span><br><span class="line">FHSå®šä¹‰äº†ä¸¤æ¬¡è§„èŒƒï¼š</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>.â€œ/â€ç›®å½•ä¸‹çš„å„ä¸ªç›®å½•åº”è¯¥æ”¾ä»€ä¹ˆæ–‡ä»¶æ•°æ®ã€‚</span><br><span class="line"><span class="number">2</span>.é’ˆå¯¹/usr å’Œ /<span class="keyword">var</span> è¿™ä¸¤ä¸ªç›®å½•çš„å­ç›®å½•æ¥å®šä¹‰ã€‚</span><br></pre></td></tr></table></figure><blockquote><p>bin -&gt; usr/bin   è¿™ä¸ªæ˜¯usr/binçš„å¿«æ·æ–¹å¼</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">-rw-r--r--.   1 root root    0 Mar 28 11:29 1.txt</span><br><span class="line">lrwxrwxrwx.   1 root root    7 Mar 27 12:07 bin -&gt; usr/bin</span><br><span class="line">dr-xr-xr-x.   5 root root 4096 Mar 27 12:11 boot</span><br><span class="line">-å¼€å¤´çš„æ˜¯æ–‡ä»¶</span><br><span class="line">lå¼€å¤´çš„æ˜¯å¿«æ·æ–¹å¼   -&gt;</span><br><span class="line">drå¼€å¤´çš„æ˜¯æ–‡ä»¶å¤¹</span><br><span class="line"><span class="comment">## /ç›®å½•ä¸‹</span></span><br><span class="line"><span class="comment">###ç³»ç»Ÿå‘½ä»¤</span></span><br><span class="line">bin -&gt; usr/bin <span class="comment"># å­˜æ”¾ç³»ç»Ÿå‘½ä»¤ï¼ˆæ™®é€šç”¨æˆ·å¯ä»¥æ‰§è¡Œï¼‰</span></span><br><span class="line">sbin -&gt; usr/sbin <span class="comment"># å­˜æ”¾ç³»ç»Ÿå‘½ä»¤ï¼ˆå¤§éƒ¨åˆ†å‘½ä»¤åªèƒ½è¶…çº§ç”¨æˆ·æ‰§è¡Œï¼‰</span></span><br><span class="line"><span class="comment">#ç³»ç»Ÿåº“æ–‡ä»¶ç›®å½•</span></span><br><span class="line">lib -&gt; usr/lib <span class="comment"># åº“æ–‡ä»¶ï¼ˆæ“ä½œç³»ç»Ÿéœ€è¦ç”¨åˆ°çš„ç»„ä»¶ æ’ä»¶...ï¼‰</span></span><br><span class="line">lib64 -&gt; usr/lib64 <span class="comment"># åº“æ–‡ä»¶ï¼ˆ64ä½æ“ä½œç³»ç»Ÿåº“æ–‡ä»¶ï¼‰</span></span><br><span class="line"><span class="comment"># ç³»ç»Ÿå¯åŠ¨æ—¶æ–‡ä»¶ç›®å½•</span></span><br><span class="line">boot    <span class="comment"># å­˜æ”¾ç³»ç»Ÿå¯åŠ¨æ–‡ä»¶</span></span><br><span class="line"><span class="comment">#ç©ºæ–‡ä»¶å¤¹</span></span><br><span class="line">media   <span class="comment"># åª’ä½“åº“ç›®å½•ï¼ˆå¯ä»¥å­˜æ”¾è§†é¢‘ï¼Œå›¾ç‰‡...ï¼‰      //åª’ä½“åº“ å­˜æ”¾è§†é¢‘ï¼Œå›¾ç‰‡ï¼ŒéŸ³ä¹</span></span><br><span class="line">mnt     <span class="comment"># mount å¦‚æœæœ‰Uç›˜ å…‰é©±ä»¥å¤–çš„è®¾å¤‡ï¼ŒæŒ‚è½½ç›®å½•     //æŒ‚è½½ç›®å½•   mount </span></span><br><span class="line"><span class="comment">#ä¸´æ—¶æŒ‚è½½çš„æ–‡ä»¶ç³»ç»Ÿã€‚æ¯”å¦‚cdrom,uç›˜ç­‰ï¼Œç›´æ¥æ’å…¥å…‰é©±æ— æ³•ä½¿ç”¨ï¼Œè¦å…ˆæŒ‚è½½åä½¿ç”¨  /dev/cdrom /mnt</span></span><br><span class="line"></span><br><span class="line">opt      <span class="comment"># å­˜æ”¾ç¬¬ä¸‰æ–¹åº”ç”¨å®‰è£…åŒ…çš„ç›®å½•</span></span><br><span class="line">srv    <span class="comment"># ç½‘ç«™æ•°æ®å­˜æ”¾ç›®å½•</span></span><br><span class="line"></span><br><span class="line">*****é‡ç‚¹*****</span><br><span class="line">1ï¼‰root    <span class="comment"># è¶…çº§ç”¨æˆ·rootçš„å®¶ç›®å½•</span></span><br><span class="line">2ï¼‰home    <span class="comment"># æ™®é€šç”¨æˆ·çš„å®¶ç›®å½•</span></span><br><span class="line">3ï¼‰run    <span class="comment"># å­˜æ”¾ç³»ç»Ÿä¸­è¿è¡Œçš„æ‰€æœ‰è¿›ç¨‹PIDæ–‡ä»¶(#ç³»ç»Ÿå¯åŠ¨å, è¿è¡Œçš„ç¨‹åºäº§ç”Ÿçš„è¿è¡Œæ—¶æ•°æ®, åŒ…æ‹¬è¿›ç¨‹çš„pidæ–‡ä»¶,é”æ–‡ä»¶ç­‰)</span></span><br><span class="line">4ï¼‰sys    <span class="comment"># æ“ä½œç³»ç»Ÿç›¸å…³æ–‡ä»¶å­˜æ”¾ç›®å½•</span></span><br><span class="line">5)tmp      <span class="comment"># æ‰€æœ‰ç”¨æˆ·éƒ½å¯ä»¥æ“ä½œçš„ç›®å½•ï¼ˆå›æ”¶ç«™ï¼‰å­˜æ”¾ä¸´æ—¶æ–‡ä»¶, ä¸€èˆ¬å­˜æ”¾è¶…è¿‡10å¤©ä»¥ä¸Šéƒ½ä¼šè‡ªåŠ¨åˆ é™¤,å¯ä»¥æ›´æ”¹åˆ é™¤ä¸´æ—¶æ–‡ä»¶çš„æœŸé™</span></span><br><span class="line">6)usr   <span class="comment"># ç”¨æˆ·æ–‡ä»¶å­˜æ”¾ç›®å½•</span></span><br><span class="line"> <span class="comment">#é»˜è®¤è½¯ä»¶éƒ½ä¼šå­˜äºè¯¥ç›®å½•ä¸‹ã€‚ç”¨äºå­˜å‚¨åªè¯»ç”¨æˆ·æ•°æ®çš„ç¬¬äºŒå±‚æ¬¡ï¼›åŒ…å«ç»å¤§å¤šæ•°çš„(å¤š)ç”¨æˆ·å·¥å…·å’Œåº”ç”¨ç¨‹åºã€‚</span></span><br><span class="line">7)dev    <span class="comment"># è®¾å¤‡æ–‡ä»¶</span></span><br><span class="line">8)etc    <span class="comment"># ç³»ç»Ÿé…ç½®æ–‡ä»¶ .conf .cfg .configure .cnf ä»¥åŠå¸¸ç”¨é…ç½®æ–‡ä»¶</span></span><br><span class="line">9)proc    <span class="comment"># ç³»ç»Ÿä¿¡æ¯éƒ½å­˜æ”¾è¿™ç›®å½•ä¸‹ï¼ˆç¡¬ä»¶ä¿¡æ¯ï¼Œè¿›ç¨‹ä¿¡æ¯ å˜åŒ–ä¿¡æ¯)</span></span><br><span class="line">10)var    <span class="comment"># å­˜æ”¾ä¸€äº›ç³»ç»Ÿä¸­å˜é‡æ–‡ä»¶ï¼Œå’Œä¸€äº›ä¸æ–­å‘ç”Ÿå˜åŒ–çš„å¯å˜æ–‡ä»¶</span></span><br></pre></td></tr></table></figure><h3 id="devç›®å½•">/devç›®å½•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/dev/sda <span class="comment"># ç³»ç»Ÿä¸­çš„ç¬¬ä¸€å—ç¡¬ç›˜</span></span><br><span class="line">/dev/sda1 <span class="comment"># ç³»ç»Ÿä¸­çš„ç¬¬ä¸€å—ç¡¬ç›˜çš„ç¬¬ä¸€ä¸ªåˆ†åŒº</span></span><br><span class="line">/dev/sda2 <span class="comment"># ç³»ç»Ÿä¸­çš„ç¬¬ä¸€å—ç¡¬ç›˜çš„ç¬¬äºŒä¸ªåˆ†åŒº</span></span><br><span class="line">/dev/sdb <span class="comment"># ç³»ç»Ÿä¸­çš„ç¬¬äºŒå—ç¡¬ç›˜</span></span><br><span class="line">/dev/random <span class="comment"># ç”Ÿæˆéšæœºæ•°çš„</span></span><br><span class="line">/dev/null <span class="comment"># é»‘æ´ï¼Œå°†ç»ˆç«¯ä¸Šè¾“å‡ºçš„å†…å®¹ï¼Œæ”¾å…¥é»‘æ´</span></span><br><span class="line">/dev/cdrom <span class="comment"># å…‰é©±</span></span><br><span class="line">/dev/pts/&#123;0 1 2 3&#125; <span class="comment"># è¿æ¥æœåŠ¡å™¨çš„è™šæ‹Ÿç»ˆç«¯è®¾å¤‡</span></span><br></pre></td></tr></table></figure><h3 id="etcç›®å½•">/etcç›®å½•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/etc/hosts <span class="comment"># æœ¬åœ°DNSè§£ææ–‡ä»¶      ip åŸŸå</span></span><br><span class="line">/etc/passwd <span class="comment"># å­˜æ”¾ç”¨æˆ·ä¿¡æ¯æ–‡ä»¶</span></span><br><span class="line">/etc/sysconfig/network-scripts/ifcfg-ç½‘å¡å <span class="comment"># ç½‘å¡é…ç½®æ–‡ä»¶</span></span><br><span class="line">/etc/hostname <span class="comment"># ä¸»æœºåé…ç½®æ–‡ä»¶</span></span><br><span class="line">/etc/resolv.conf <span class="comment"># DNSé…ç½®æ–‡ä»¶</span></span><br></pre></td></tr></table></figure><h3 id="etcå…¶å®ƒç›®å½•-äº†è§£">/etcå…¶å®ƒç›®å½•     *äº†è§£</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/etc/opt/       <span class="comment">#/opt/çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">/etc/X11/       <span class="comment">#X_Windowç³»ç»Ÿ(ç‰ˆæœ¬11)çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">/etc/sgml/      <span class="comment">#SGMLçš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">/etc/xml/       <span class="comment">#XMLçš„é…ç½®æ–‡ä»¶</span></span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/image-20240328131046094.png" alt="image-20240328131046094"></p><h3 id="procç›®å½•">/procç›®å½•</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/proc/m</span>eminfo <span class="comment"># å†…å­˜ä¿¡æ¯</span></span><br><span class="line"><span class="regexp">/proc/</span>cpuinfo <span class="comment"># CPUä¿¡æ¯</span></span><br><span class="line">åœ¨Linuxä¸­ï¼Œå¯¹åº”Procfsæ ¼å¼æŒ‚è½½ã€‚è¯¥ç›®å½•ä¸‹æ–‡ä»¶åªèƒ½çœ‹ä¸èƒ½æ”¹ï¼ˆåŒ…æ‹¬rootï¼‰</span><br></pre></td></tr></table></figure><h3 id="varç›®å½•">/varç›®å½•</h3><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/var/<span class="built_in">log</span>/messages <span class="meta"># ç³»ç»Ÿæ—¥å¿—</span></span><br><span class="line">/var/<span class="built_in">log</span>/secure <span class="meta"># ç³»ç»Ÿç™»å½•æ—¥å¿—</span></span><br><span class="line"><span class="meta">#å˜é‡æ–‡ä»¶â€”â€”åœ¨æ­£å¸¸è¿è¡Œçš„ç³»ç»Ÿä¸­å…¶å†…å®¹ä¸æ–­å˜åŒ–çš„æ–‡ä»¶ï¼Œå¦‚æ—¥å¿—ï¼Œè„±æœºæ–‡ä»¶å’Œä¸´æ—¶ç”µå­é‚®ä»¶æ–‡ä»¶ã€‚æœ‰æ—¶æ˜¯ä¸€ä¸ªå•ç‹¬çš„åˆ†åŒºã€‚å¦‚æœä¸å•ç‹¬åˆ†åŒºï¼Œæœ‰å¯èƒ½ä¼šæŠŠæ•´ä¸ªåˆ†åŒºå……æ»¡ã€‚å¦‚æœå•ç‹¬åˆ†åŒºï¼Œç»™å¤§ç»™å°éƒ½ä¸åˆé€‚ã€‚</span></span><br></pre></td></tr></table></figure><h3 id="æ–‡ä»¶çš„è·¯å¾„å®šä½">æ–‡ä»¶çš„è·¯å¾„å®šä½</h3><p><img src="https://cos.lukme.top/Pic/image-20240328131213563.png" alt="image-20240328131213563"></p><h3 id="ç‰¹æ®Šç›®å½•â€™-â€™-å’Œâ€™â€¦â€™">ç‰¹æ®Šç›®å½•â€™.â€™ å’Œâ€™â€¦â€™</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">.. </span>ï¼šå½“å‰ç›®å½•çš„ä¸Šä¸€çº§ç›®å½•</span><br><span class="line"><span class="bullet">. </span>ï¼šå½“å‰ç›®å½•</span><br></pre></td></tr></table></figure><h3 id="å…¶å®ƒç›®å½•">å…¶å®ƒç›®å½•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/lost+found     <span class="comment">#åœ¨ext3æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œå½“ç³»ç»Ÿæ„å¤–å´©æºƒæˆ–æœºå™¨æ„å¤–å…³æœºï¼Œä¼šäº§ç”Ÿä¸€äº›æ–‡ä»¶ç¢ç‰‡åœ¨è¿™é‡Œã€‚å½“ç³»ç»Ÿåœ¨å¼€æœºå¯åŠ¨çš„è¿‡ç¨‹ä¸­fsckå·¥å…·ä¼šæ£€æŸ¥è¿™é‡Œï¼Œå¹¶ä¿®å¤å·²ç»æŸåçš„æ–‡ä»¶ç³»ç»Ÿã€‚å½“ç³»ç»Ÿå‘ç”Ÿé—®é¢˜ã€‚å¯èƒ½ä¼šæœ‰æ–‡ä»¶è¢«ç§»åŠ¨åˆ°è¿™ä¸ªç›®å½•ä¸­ï¼Œå¯èƒ½éœ€è¦ç”¨æ‰‹å·¥çš„æ–¹å¼æ¥ä¿®å¤ï¼Œæˆ–ç§»åˆ°æ–‡ä»¶åˆ°åŸæ¥çš„ä½ç½®ä¸Šã€‚</span></span><br></pre></td></tr></table></figure><h3 id="ç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„">ç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ç›¸å¯¹è·¯å¾„ï¼šæµ¦ä¸œæ–°åŒº/å»ºéŸµè·¯<span class="number">399</span>å·</span><br><span class="line">ç»å¯¹è·¯å¾„ï¼ˆå®Œæ•´è·¯å¾„ï¼‰ï¼šä¸­å›½<span class="regexp">/ä¸Šæµ·/</span>æµ¦ä¸œæ–°åŒº/å»ºéŸµè·¯<span class="number">399</span>å·</span><br><span class="line">ä»¥ <span class="string">&#x27;/&#x27;</span> å¼€å¤´çš„è·¯å¾„ï¼Œéƒ½æ˜¯ç»å¯¹è·¯å¾„</span><br><span class="line">ä¸ä»¥<span class="string">&#x27;/&#x27;</span>å¼€å¤´çš„éƒ½æ˜¯ç›¸å¯¹è·¯å¾„</span><br></pre></td></tr></table></figure><h4 id="å…¶å®ƒç›®å½•-2">å…¶å®ƒç›®å½•</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## /etc/ç›®å½•</span></span><br><span class="line"></span><br><span class="line">/etc/rc /etc/rc.d   ***** <span class="comment">#/etc/rc*.d å¯åŠ¨ã€æˆ–æ”¹å˜è¿è¡Œçº§æ—¶è¿è¡Œçš„scriptsæˆ–scriptsçš„ç›®å½•.</span></span><br><span class="line">/etc/hosts          ***** <span class="comment">#æœ¬åœ°åŸŸåè§£ææ–‡ä»¶</span></span><br><span class="line">/etc/sysconfig/network  ***** <span class="comment">#IPã€æ©ç ã€ç½‘å…³ã€ä¸»æœºåé…ç½®</span></span><br><span class="line">/etc/resolv.conf    ***** <span class="comment">#DNSæœåŠ¡å™¨é…ç½®</span></span><br><span class="line">/etc/fstab          ***** <span class="comment">#å¼€æœºè‡ªåŠ¨æŒ‚è½½ç³»ç»Ÿï¼Œæ‰€æœ‰åˆ†åŒºå¼€æœºéƒ½ä¼šè‡ªåŠ¨æŒ‚è½½</span></span><br><span class="line">/etc/inittab        ***** <span class="comment">#è®¾å®šç³»ç»Ÿå¯åŠ¨æ—¶Initè¿›ç¨‹å°†æŠŠç³»ç»Ÿè®¾ç½®æˆä»€ä¹ˆæ ·çš„runlevelåŠåŠ è½½ç›¸å…³çš„å¯åŠ¨æ–‡ä»¶é…ç½®</span></span><br><span class="line">/etc/exports        ***** <span class="comment">#è®¾ç½®NFSç³»ç»Ÿç”¨çš„é…ç½®æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">/etc/init.d/        ***** <span class="comment">#è¿™ä¸ªç›®å½•æ¥å­˜æ”¾ç³»ç»Ÿå¯åŠ¨è„šæœ¬</span></span><br><span class="line">/etc/profile        ***** <span class="comment">#å…¨å±€ç³»ç»Ÿç¯å¢ƒé…ç½®å˜é‡</span></span><br><span class="line">/etc/csh.login,  /etc/csh.cshrc</span><br><span class="line">/etc/issue          ***** <span class="comment">#è®¤è¯å‰çš„è¾“å‡ºä¿¡æ¯ï¼Œé»˜è®¤è¾“å‡ºç‰ˆæœ¬å†…æ ¸ä¿¡æ¯</span></span><br><span class="line">/etc/motd           <span class="comment">#è®¾ç½®è®¤è¯åçš„è¾“å‡ºä¿¡æ¯</span></span><br><span class="line">/etc/mtab           <span class="comment">#å½“å‰å®‰è£…çš„æ–‡ä»¶ç³»ç»Ÿåˆ—è¡¨.ç”±scriptsåˆå§‹åŒ–ï¼Œå¹¶ç”±mount å‘½ä»¤è‡ªåŠ¨æ›´æ–°.éœ€è¦ä¸€ä¸ªå½“å‰å®‰è£…çš„æ–‡ä»¶ç³»ç»Ÿçš„åˆ—è¡¨æ—¶ä½¿ç”¨ï¼Œä¾‹å¦‚df å‘½ä»¤</span></span><br><span class="line">/etc/group          ***** <span class="comment">#ç±»ä¼¼/etc/passwd ï¼Œä½†è¯´æ˜çš„ä¸æ˜¯ç”¨æˆ·è€Œæ˜¯ç»„.</span></span><br><span class="line">/etc/passwd         ***** <span class="comment">#ç”¨æˆ·æ•°æ®åº“ï¼Œå…¶ä¸­çš„åŸŸç»™å‡ºäº†ç”¨æˆ·åã€çœŸå®å§“åã€å®¶ç›®å½•ã€åŠ å¯†çš„å£ä»¤å’Œç”¨æˆ·çš„å…¶ä»–ä¿¡æ¯.</span></span><br><span class="line">/etc/shadow         ****** <span class="comment">#åœ¨å®‰è£…äº†å½±å­å£ä»¤è½¯ä»¶çš„ç³»ç»Ÿä¸Šçš„å½±å­å£ä»¤æ–‡ä»¶.å½±å­å£ä»¤æ–‡ä»¶å°†/etc/passwd æ–‡ä»¶ä¸­çš„åŠ å¯†å£ä»¤ç§»åŠ¨åˆ°/etc/shadow ä¸­ï¼Œè€Œåè€…åªå¯¹rootå¯è¯».è¿™ä½¿ç ´è¯‘å£ä»¤æ›´å›°éš¾.</span></span><br><span class="line">/etc/sudoers        ***** <span class="comment">#å¯ä»¥sudoå‘½ä»¤çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">/etc/syslog.conf    ***** <span class="comment">#ç³»ç»Ÿæ—¥å¿—å‚æ•°é…ç½®</span></span><br><span class="line">/etc/login.defs     <span class="comment">#è®¾ç½®ç”¨æˆ·å¸å·é™åˆ¶çš„æ–‡ä»¶</span></span><br><span class="line">/etc/securetty      <span class="comment">#ç¡®è®¤å®‰å…¨ç»ˆç«¯ï¼Œå³å“ªä¸ªç»ˆç«¯å…è®¸rootç™»å½•.ä¸€èˆ¬åªåˆ—å‡ºè™šæ‹Ÿæ§åˆ¶å°ï¼Œè¿™æ ·å°±ä¸å¯èƒ½(è‡³å°‘å¾ˆå›°éš¾)é€šè¿‡modemæˆ–ç½‘ç»œé—¯å…¥ç³»ç»Ÿå¹¶å¾—åˆ°è¶…çº§ç”¨æˆ·ç‰¹æƒ.</span></span><br><span class="line">/etc/printca        <span class="comment">#ç±»ä¼¼/etc/termcap ï¼Œä½†é’ˆå¯¹æ‰“å°æœº.è¯­æ³•ä¸åŒ.</span></span><br><span class="line">/etc/shells         <span class="comment">#åˆ—å‡ºå¯ä¿¡ä»»çš„shell.chsh å‘½ä»¤å…è®¸ç”¨æˆ·åœ¨æœ¬æ–‡ä»¶æŒ‡å®šèŒƒå›´å†…æ”¹å˜ç™»å½•shell.æä¾›ä¸€å°æœºå™¨FTPæœåŠ¡çš„æœåŠ¡è¿›ç¨‹ftpd æ£€æŸ¥ç”¨æˆ·shellæ˜¯å¦åˆ—åœ¨ /etc/shells æ–‡ä»¶ä¸­ï¼Œå¦‚æœä¸æ˜¯å°†ä¸å…è®¸è¯¥ç”¨æˆ·ç™»å½•.</span></span><br><span class="line">/etc/xinetd.d       <span class="comment">#å¦‚æœæœåŠ¡å™¨æ˜¯é€šè¿‡xinetdæ¨¡å¼è¿è¡Œçš„ï¼Œå®ƒçš„è„šæœ¬è¦æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ã€‚æœ‰äº›ç³»ç»Ÿæ²¡æœ‰è¿™ä¸ªç›®å½•ï¼Œæ¯”å¦‚Slackwareï¼Œæœ‰äº›è€çš„ç‰ˆæœ¬ä¹Ÿæ²¡æœ‰ã€‚åœ¨Redhat Fedoraä¸­æ¯”è¾ƒæ–°çš„ç‰ˆæœ¬ä¸­å­˜åœ¨ã€‚</span></span><br><span class="line">/etc/opt/           <span class="comment">#/opt/çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">/etc/X11/           <span class="comment">#X_Windowç³»ç»Ÿ(ç‰ˆæœ¬11)çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">/etc/sgml/          <span class="comment">#SGMLçš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">/etc/xml/           <span class="comment">#XMLçš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">/etc/skel/          ***** <span class="comment">#é»˜è®¤åˆ›å»ºç”¨æˆ·æ—¶ï¼ŒæŠŠè¯¥ç›®å½•æ‹·è´åˆ°å®¶ç›®å½•ä¸‹</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##usr/ç›®å½•</span></span><br><span class="line"></span><br><span class="line">/usr/X11R6          <span class="comment">#å­˜æ”¾X-Windowsçš„ç›®å½•ï¼›</span></span><br><span class="line">/usr/games          <span class="comment">#å­˜æ”¾ç€XteamLinuxè‡ªå¸¦çš„å°æ¸¸æˆï¼›</span></span><br><span class="line">/usr/doc            <span class="comment">#LinuxæŠ€æœ¯æ–‡æ¡£ï¼›</span></span><br><span class="line">/usr/include        <span class="comment">#ç”¨æ¥å­˜æ”¾Linuxä¸‹å¼€å‘å’Œç¼–è¯‘åº”ç”¨ç¨‹åºæ‰€éœ€è¦çš„å¤´æ–‡ä»¶ï¼›</span></span><br><span class="line">/usr/lib            <span class="comment">#å­˜æ”¾ä¸€äº›å¸¸ç”¨çš„åŠ¨æ€é“¾æ¥å…±äº«åº“å’Œé™æ€æ¡£æ¡ˆåº“ï¼›</span></span><br><span class="line">/usr/man            <span class="comment">#å¸®åŠ©æ–‡æ¡£æ‰€åœ¨çš„ç›®å½•ï¼›</span></span><br><span class="line">/usr/src            <span class="comment">#Linuxå¼€æ”¾çš„æºä»£ç ï¼Œå°±å­˜åœ¨è¿™ä¸ªç›®å½•ï¼Œçˆ±å¥½è€…ä»¬åˆ«æ”¾è¿‡å“¦ï¼›</span></span><br><span class="line">/usr/bin/           <span class="comment">#éå¿…è¦å¯æ‰§è¡Œæ–‡ä»¶ (åœ¨å•ç”¨æˆ·æ¨¡å¼ä¸­ä¸éœ€è¦)ï¼›é¢å‘æ‰€æœ‰ç”¨æˆ·ã€‚</span></span><br><span class="line">/usr/lib/           <span class="comment">#/usr/bin/å’Œ/usr/sbin/ä¸­äºŒè¿›åˆ¶æ–‡ä»¶çš„åº“ã€‚</span></span><br><span class="line">/usr/sbin/          <span class="comment">#éå¿…è¦çš„ç³»ç»ŸäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼šå¤§é‡ç½‘ç»œæœåŠ¡çš„å®ˆæŠ¤è¿›ç¨‹ã€‚</span></span><br><span class="line">/usr/share/         <span class="comment">#ä½“ç³»ç»“æ„æ— å…³ï¼ˆå…±äº«ï¼‰æ•°æ®ã€‚</span></span><br><span class="line">/usr/src/           <span class="comment">#æºä»£ç ,ä¾‹å¦‚:å†…æ ¸æºä»£ç åŠå…¶å¤´æ–‡ä»¶ã€‚</span></span><br><span class="line">/usr/X11R6/         <span class="comment">#X Windowç³»ç»Ÿç‰ˆæœ¬ 11, Release 6.</span></span><br><span class="line">/usr/local/         <span class="comment">#æœ¬åœ°æ•°æ®çš„ç¬¬ä¸‰å±‚æ¬¡ï¼Œå…·ä½“åˆ°æœ¬å°ä¸»æœºã€‚é€šå¸¸è€Œè¨€æœ‰è¿›ä¸€æ­¥çš„å­ç›®å½•ï¼Œä¾‹å¦‚ï¼šbin/ã€lib/ã€share/.è¿™æ˜¯æä¾›ç»™ä¸€èˆ¬ç”¨æˆ·çš„/usrç›®å½•ï¼Œåœ¨è¿™é‡Œå®‰è£…ä¸€èˆ¬çš„åº”ç”¨è½¯ä»¶ï¼›</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## /var/ç›®å½•  </span></span><br><span class="line"></span><br><span class="line">/var/log/message            ***** <span class="comment">#ç³»ç»Ÿæ—¥å¿—ä¿¡æ¯ï¼ŒæŒ‰å‘¨è‡ªåŠ¨è½®è¯¢</span></span><br><span class="line">/var/spool/cron/root        ***** <span class="comment">#å®šæ—¶å™¨é…ç½®æ–‡ä»¶ç›®å½•ï¼Œé»˜è®¤æŒ‰ç”¨æˆ·å‘½å</span></span><br><span class="line">/var/log/secure             ***** <span class="comment">#è®°å½•ç™»é™†ç³»ç»Ÿå­˜å–ä¿¡æ¯çš„æ–‡ä»¶ï¼Œä¸ç®¡è®¤è¯æˆåŠŸè¿˜æ˜¯è®¤è¯å¤±è´¥éƒ½ä¼šè®°å½•</span></span><br><span class="line">/var/log/wtmp               <span class="comment">#è®°å½•ç™»é™†è€…ä¿¡æ¯çš„æ–‡ä»¶ï¼Œlast,who,wå‘½ä»¤ä¿¡æ¯æ¥æºäºæ­¤</span></span><br><span class="line">/var/spool/clientmqueue/    <span class="comment">#å½“é‚®ä»¶æœåŠ¡æœªå¼€å¯æ—¶ï¼Œæ‰€æœ‰åº”å‘ç»™ç³»ç»Ÿç®¡ç†å‘˜çš„é‚®ä»¶éƒ½å°†å †æ”¾åœ¨æ­¤</span></span><br><span class="line">/var/spool/mail/            <span class="comment">#é‚®ä»¶ç›®å½•</span></span><br><span class="line">/var/tmp                    <span class="comment">#æ¯”/tmp å…è®¸çš„å¤§æˆ–éœ€è¦å­˜åœ¨è¾ƒé•¿æ—¶é—´çš„ä¸´æ—¶æ–‡ä»¶. (è™½ç„¶ç³»ç»Ÿç®¡ç†å‘˜å¯èƒ½ä¸å…è®¸/var/tmp æœ‰å¾ˆæ—§çš„æ–‡ä»¶.)</span></span><br><span class="line">/var/lib                    <span class="comment">#ç³»ç»Ÿæ­£å¸¸è¿è¡Œæ—¶è¦æ”¹å˜çš„æ–‡ä»¶.  </span></span><br><span class="line">/var/local                  <span class="comment">#/usr/local ä¸­å®‰è£…çš„ç¨‹åºçš„å¯å˜æ•°æ®(å³ç³»ç»Ÿç®¡ç†å‘˜å®‰è£…çš„ç¨‹åº).æ³¨æ„ï¼Œå¦‚æœå¿…è¦ï¼Œå³ä½¿æœ¬åœ°å®‰è£…çš„ç¨‹åºä¹Ÿä¼šä½¿ç”¨å…¶ä»–/var ç›®å½•ï¼Œä¾‹å¦‚/var/lock .  </span></span><br><span class="line">/var/lock                   <span class="comment">#é”å®šæ–‡ä»¶.è®¸å¤šç¨‹åºéµå¾ªåœ¨/var/lock ä¸­äº§ç”Ÿä¸€ä¸ªé”å®šæ–‡ä»¶çš„çº¦å®šï¼Œä»¥æ”¯æŒä»–ä»¬æ­£åœ¨ä½¿ç”¨æŸä¸ªç‰¹å®šçš„è®¾å¤‡æˆ–æ–‡ä»¶.å…¶ä»–ç¨‹åºæ³¨æ„åˆ°è¿™ä¸ªé”å®šæ–‡ä»¶ï¼Œå°†ä¸è¯•å›¾ä½¿ç”¨è¿™ä¸ªè®¾å¤‡æˆ–æ–‡ä»¶.</span></span><br><span class="line">/var/log/                   ***** <span class="comment">#å„ç§ç¨‹åºçš„Logæ–‡ä»¶ï¼Œç‰¹åˆ«æ˜¯login   (/var/log/wtmp logæ‰€æœ‰åˆ°ç³»ç»Ÿçš„ç™»å½•å’Œæ³¨é”€) å’Œsyslog (/var/log/messages é‡Œå­˜å‚¨æ‰€æœ‰æ ¸å¿ƒå’Œç³»ç»Ÿç¨‹åºä¿¡æ¯. /var/log é‡Œçš„æ–‡ä»¶ç»å¸¸ä¸ç¡®å®šåœ°å¢é•¿ï¼Œåº”è¯¥å®šæœŸæ¸…é™¤.  </span></span><br><span class="line">/var/run                    <span class="comment">#ä¿å­˜åˆ°ä¸‹æ¬¡å¼•å¯¼å‰æœ‰æ•ˆçš„å…³äºç³»ç»Ÿçš„ä¿¡æ¯æ–‡ä»¶.ä¾‹å¦‚ï¼Œ /var/run/utmp åŒ…å«å½“å‰ç™»å½•çš„ç”¨æˆ·çš„ä¿¡æ¯.</span></span><br><span class="line">/var/cache/                 <span class="comment">#åº”ç”¨ç¨‹åºç¼“å­˜æ•°æ®ã€‚è¿™äº›æ•°æ®æ˜¯åœ¨æœ¬åœ°ç”Ÿæˆçš„ä¸€ä¸ªè€—æ—¶çš„I/Oæˆ–è®¡ç®—ç»“æœã€‚åº”ç”¨ç¨‹åºå¿…é¡»èƒ½å¤Ÿå†ç”Ÿæˆ–æ¢å¤æ•°æ®ã€‚ç¼“å­˜çš„æ–‡ä»¶å¯ä»¥è¢«åˆ é™¤è€Œä¸å¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## /proc/ç›®å½•</span></span><br><span class="line"></span><br><span class="line">/proc/meminfo           ***** <span class="comment">#æŸ¥çœ‹å†…å­˜ä¿¡æ¯</span></span><br><span class="line">/proc/loadavg           ***** <span class="comment">#è¿˜è®°å¾— top ä»¥åŠ uptime å§ï¼Ÿæ²¡é”™ï¼ä¸Šå¤´çš„ä¸‰ä¸ªå¹³å‡æ•°å€¼å°±æ˜¯è®°å½•åœ¨æ­¤ï¼</span></span><br><span class="line">/proc/uptime            ***** <span class="comment">#å°±æ˜¯ç”¨ uptime çš„æ—¶å€™ï¼Œä¼šå‡ºç°çš„èµ„è®¯å•¦ï¼</span></span><br><span class="line">/proc/cpuinfo           ***** <span class="comment">#å…³äºå¤„ç†å™¨çš„ä¿¡æ¯ï¼Œå¦‚ç±»å‹ã€å‚å®¶ã€å‹å·å’Œæ€§èƒ½ç­‰ã€‚</span></span><br><span class="line">/proc/cmdline           <span class="comment">#åŠ è½½ kernel æ—¶æ‰€ä¸‹è¾¾çš„ç›¸å…³å‚æ•°ï¼æŸ¥é˜…æ­¤æ–‡ä»¶ï¼Œå¯äº†è§£ç³»ç»Ÿæ˜¯å¦‚ä½•å¯åŠ¨çš„ï¼</span></span><br><span class="line">/proc/filesystems       <span class="comment">#ç›®å‰ç³»ç»Ÿå·²ç»åŠ è½½çš„æ–‡ä»¶ç³»ç»Ÿç½—ï¼</span></span><br><span class="line">/proc/interrupts        <span class="comment">#ç›®å‰ç³»ç»Ÿä¸Šé¢çš„ IRQ åˆ†é…çŠ¶æ€ã€‚</span></span><br><span class="line">/proc/ioports           <span class="comment">#ç›®å‰ç³»ç»Ÿä¸Šé¢å„ä¸ªè£…ç½®æ‰€é…ç½®çš„ I/O ä½å€ã€‚</span></span><br><span class="line">/proc/kcore             <span class="comment">#è¿™ä¸ªå°±æ˜¯å†…å­˜çš„å¤§å°å•¦ï¼å¥½å¤§å¯¹å§ï¼ä½†æ˜¯ä¸è¦è¯»ä»–å•¦ï¼</span></span><br><span class="line">/proc/modules           <span class="comment">#ç›®å‰æˆ‘ä»¬çš„ Linux å·²ç»åŠ è½½çš„æ¨¡å—åˆ—è¡¨ï¼Œä¹Ÿå¯ä»¥æƒ³æˆæ˜¯é©±åŠ¨ç¨‹åºå•¦ï¼</span></span><br><span class="line">/proc/mounts            <span class="comment">#ç³»ç»Ÿå·²ç»æŒ‚è½½çš„æ•°æ®ï¼Œå°±æ˜¯ç”¨ mount è¿™ä¸ªå‘½ä»¤å‘¼å«å‡ºæ¥çš„æ•°æ®å•¦ï¼</span></span><br><span class="line">/proc/swaps             <span class="comment">#åˆ°åº•ç³»ç»ŸæŒ‚åŠ è½½çš„å†…å­˜åœ¨å“ªé‡Œï¼Ÿå‘µå‘µï¼ä½¿ç”¨æ‰çš„ partition å°±è®°å½•åœ¨æ­¤å•¦ï¼</span></span><br><span class="line">/proc/partitions        <span class="comment">#ä½¿ç”¨ fdisk -l ä¼šå‡ºç°ç›®å‰æ‰€æœ‰çš„ partition å§ï¼Ÿåœ¨è¿™ä¸ªæ–‡ä»¶å½“ä¸­ä¹Ÿæœ‰çºªå½•å–”ï¼</span></span><br><span class="line">/proc/pci               <span class="comment">#åœ¨ PCI æ±‡æµæ’ä¸Šé¢ï¼Œæ¯ä¸ªè£…ç½®çš„è¯¦ç»†æƒ…å†µï¼å¯ç”¨ lspci æ¥æŸ¥é˜…ï¼</span></span><br><span class="line">/proc/version           <span class="comment">#æ ¸å¿ƒçš„ç‰ˆæœ¬ï¼Œå°±æ˜¯ç”¨ uname -a æ˜¾ç¤ºçš„å†…å®¹å•¦ï¼</span></span><br><span class="line">/proc/bus/*             <span class="comment">#ä¸€äº›æ±‡æµæ’çš„è£…ç½®ï¼Œè¿˜æœ‰ Uç›˜çš„è£…ç½®ä¹Ÿè®°å½•åœ¨æ­¤å–”ï¼</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#/dev/ç›®å½•Â·</span></span><br><span class="line"></span><br><span class="line">/dev/hd[a-t]            <span class="comment">#IDEè®¾å¤‡</span></span><br><span class="line">/dev/sd[a-z]            <span class="comment">#SCSIè®¾å¤‡</span></span><br><span class="line">/dev/fd[0-7]            <span class="comment">#æ ‡å‡†è½¯é©±</span></span><br><span class="line">/dev/md[0-31]           <span class="comment">#è½¯raidè®¾å¤‡</span></span><br><span class="line">/dev/loop[0-7]          <span class="comment">#æœ¬åœ°å›ç¯è®¾å¤‡</span></span><br><span class="line">/dev/ram[0-15]          <span class="comment">#å†…å­˜</span></span><br><span class="line">/dev/null               <span class="comment">#æ— é™æ•°æ®æ¥æ”¶è®¾å¤‡,ç›¸å½“äºé»‘æ´</span></span><br><span class="line">/dev/zero               <span class="comment">#æ— é™é›¶èµ„æº</span></span><br><span class="line">/dev/tty[0-63]          <span class="comment">#è™šæ‹Ÿç»ˆç«¯</span></span><br><span class="line">/dev/ttyS[0-3]          <span class="comment">#ä¸²å£</span></span><br><span class="line">/dev/lp[0-3]            <span class="comment">#å¹¶å£</span></span><br><span class="line">/dev/console            <span class="comment">#æ§åˆ¶å°</span></span><br><span class="line">/dev/fb[0-31]           <span class="comment">#framebuffer</span></span><br><span class="line">/dev/cdrom              <span class="comment">#=&gt; /dev/hdc</span></span><br><span class="line">/dev/modem              <span class="comment">#=&gt; /dev/ttyS[0-9]</span></span><br><span class="line">/dev/pilot              <span class="comment">#=&gt; /dev/ttyS[0-9]</span></span><br><span class="line">/dev/random             <span class="comment">#éšæœºæ•°è®¾å¤‡</span></span><br><span class="line">/dev/urandom            <span class="comment">#éšæœºæ•°è®¾å¤‡</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linuxæ•²é—¨ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>05.æ–‡ä»¶æ“ä½œå‘½ä»¤</title>
      <link href="/posts/3f8f4a3c.html"/>
      <url>/posts/3f8f4a3c.html</url>
      
        <content type="html"><![CDATA[<div class='wow animate__heartBeat' data-wow-duration='' data-wow-delay='1s' data-wow-offset=''  data-wow-iteration='2' ><div class="note red icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p><a href="https://www.lukme.top/posts/4c7367cf.html">å‘Šåˆ«å°ç™½ï¼Œç‚¹å‡»ç›´è¾¾</a></p></div></div><h2 id="æ–‡ä»¶ç®¡ç†å‘½ä»¤â€“tree">æ–‡ä»¶ç®¡ç†å‘½ä»¤â€“tree</h2><table><thead><tr><th>é€‰é¡¹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>-L</td><td>æŒ‡å®šå±‚çº§æ˜¾ç¤ºç»“æ„</td></tr><tr><td>-d</td><td>åªæŸ¥çœ‹ç›®å½•ä¸æŸ¥çœ‹æ–‡ä»¶</td></tr><tr><td>-a</td><td>æ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶å’Œç›®å½•åŒ…æ‹¬éšè—æ–‡ä»¶</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## å‘½ä»¤æ‰¾ä¸åˆ°</span></span><br><span class="line">[root@localhost ~]# tree</span><br><span class="line">-bash: tree: <span class="built_in">command</span> not found</span><br><span class="line"><span class="comment">## å®‰è£…å‘½ä»¤</span></span><br><span class="line">[root@localhost ~]# yum install -y tree</span><br><span class="line"><span class="comment">#treeåŠŸèƒ½ï¼šä»¥æ ‘çŠ¶ç»“æ„æ˜¾ç¤ºæ–‡ä»¶å’Œç›®å½•</span></span><br><span class="line"><span class="comment">## æŸ¥çœ‹ç›®å½•ç»“æ„   </span></span><br><span class="line">[root@lb01 ~]# tree /usr/local/</span><br><span class="line">/usr/local/</span><br><span class="line">â”œâ”€â”€ bin</span><br><span class="line">â”œâ”€â”€ etc</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ applications</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ info</span><br><span class="line">â”‚Â Â  â””â”€â”€ man</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ man1</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ man1x</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ man2</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ man2x</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ man3</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ man9x</span><br><span class="line">â”‚Â Â      â””â”€â”€ mann</span><br><span class="line">â””â”€â”€ src</span><br><span class="line">32 directories, 0 files</span><br><span class="line"></span><br><span class="line"><span class="comment"># -Lï¼šlevel æŸ¥çœ‹æŒ‡å®šå±‚çº§çš„ç›®å½•ç»“æ„   å¦‚æœç›®å½•å±‚çº§å¤ªå¤šï¼Œå¯ä»¥æŸ¥çœ‹æŒ‡å®šå‡ å±‚ç›®å½•</span></span><br><span class="line">[root@lb01 ~]# tree -L 2 /usr/local/</span><br><span class="line"></span><br><span class="line"><span class="comment">## -dï¼šåªæŸ¥çœ‹ç›®å½•ä¸æŸ¥çœ‹æ–‡ä»¶ï¼ŒæŸ¥çœ‹æŒ‡å®šç›®å½•å±‚çº§çš„æ‰€æœ‰ç›®å½•</span></span><br><span class="line">[root@localhost ~]# tree -L 2 -d /etc/</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æ–‡ä»¶ç®¡ç†å‘½ä»¤â€”cp">æ–‡ä»¶ç®¡ç†å‘½ä»¤â€”cp</h2><table><thead><tr><th>é€‰é¡¹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>-rã€-R</td><td>é€’å½’å¤åˆ¶ç›®å½•ï¼ˆåŒ…æ‹¬ç›®å½•ä¸‹çš„æ‰€æœ‰å†…å®¹ï¼‰</td></tr><tr><td>-v</td><td>æ˜¾ç¤ºå¤åˆ¶çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¤åˆ¶è¿‡ç¨‹</td></tr><tr><td>-p</td><td>ä¿æŒæ–‡ä»¶å±æ€§</td></tr><tr><td>-a</td><td>å³ä¿æŒç›®å½•å±æ€§ï¼Œåˆå¯ä»¥é€’å½’æ‹·è´ç›®å½•</td></tr><tr><td>-i</td><td>è¯¢é—® ï¼ˆæ˜¯å¦è¦†ç›–ï¼‰</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">copy å¤åˆ¶ï¼Œæ‹·è´</span><br><span class="line"><span class="comment">#è¯­æ³•</span></span><br><span class="line">1.<span class="built_in">cp</span> [é€‰é¡¹]... [-T] æºæ–‡ä»¶ ç›®æ ‡ ï¼ˆå¤‡ä»½ï¼‰</span><br><span class="line">2.<span class="built_in">cp</span> [é€‰é¡¹]... æºæ–‡ä»¶... ç›®å½•</span><br><span class="line">3.<span class="built_in">cp</span> [é€‰é¡¹]... -t ç›®å½• æºæ–‡ä»¶...</span><br><span class="line"></span><br><span class="line"><span class="comment">## è¯­æ³•ä¸€ï¼šcp [é€‰é¡¹]... [-T] æºæ–‡ä»¶ ç›®æ ‡ ï¼ˆå¤‡ä»½ï¼‰</span></span><br><span class="line"><span class="built_in">cp</span> [OPTION]... [-T] SOURCE DEST</span><br><span class="line"><span class="comment">## å°†saomiao.shè„šæœ¬å¤åˆ¶åˆ°å½“å‰ç›®å½•ä¸‹å¹¶æ”¹åä¸º123</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> saomiao.sh 123</span><br><span class="line"><span class="comment">## å°†saomiao.shè„šæœ¬å¤åˆ¶åˆ°/optç›®å½•ä¸‹å¹¶æ”¹åä¸ºabc</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> saomiao.sh /opt/abc</span><br><span class="line"></span><br><span class="line"><span class="comment">## è¯­æ³•äºŒï¼šcp [é€‰é¡¹]... æºæ–‡ä»¶... ç›®å½•</span></span><br><span class="line"><span class="built_in">cp</span> [OPTION]... SOURCE... DIRECTORY</span><br><span class="line"><span class="comment">## å°†saomiao.shè„šæœ¬å¤åˆ¶åˆ°/tmpç›®å½•ä¸‹</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> saomiao.sh /tmp/</span><br><span class="line"><span class="comment">## å°†saomiao.shè„šæœ¬æ‹·è´åˆ°/tmpä¸‹å¹¶æ”¹åä¸º2.txtï¼Œè‹¥2.txtæ–‡ä»¶å·²å­˜åœ¨ä¼šè¯¢é—®ï¼Œæ˜¯å¦è¦è¦†ç›–</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> saomiao.sh /tmp/2.txt</span><br><span class="line"><span class="comment">## ä¸€æ¬¡æ€§å¤åˆ¶å¤šä¸ªæ–‡ä»¶</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> 123 saomiao.sh cheak_student.sh anaconda-ks.cfg /opt/</span><br><span class="line"><span class="comment">## æŠ¥é”™ç¤ºèŒƒ</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> 123 saomiao.sh cheak_student.sh anaconda-ks.cfg abcï¼ˆå¿…é¡»æ˜¯ç›®å½•ï¼Œä¸èƒ½æ˜¯æ–‡ä»¶ï¼‰</span><br><span class="line"><span class="built_in">cp</span>: target â€˜abcâ€™ is not a directory</span><br><span class="line"><span class="comment">## å¤åˆ¶ç›®å½•</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> -r /opt/ /tmp/å°†optç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶å¤åˆ¶åˆ°tmpä¸‹ï¼ŒåŒ…æ‹¬optç›®å½•</span><br><span class="line"><span class="comment">## æ”¹å</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> -r /opt/ /root/xxx</span><br><span class="line"><span class="comment">## å¤åˆ¶ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œä½†ä¸å¤åˆ¶ç›®å½•æœ¬èº«</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> -r /opt/* /tmp/</span><br><span class="line"><span class="comment">## å¤åˆ¶å¤šä¸ªæ–‡ä»¶    æ˜¾ç¤ºå¤åˆ¶è¿‡ç¨‹</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> -rv 123 anaconda-ks.cfg </span><br><span class="line">/tmp/</span><br><span class="line">â€˜123â€™ -&gt; â€˜/tmp/123â€™</span><br><span class="line">â€˜anaconda-ks.cfgâ€™ -&gt; â€˜/tmp/anaconda-ks.cfgâ€™</span><br><span class="line"></span><br><span class="line"><span class="comment">## ä¿æŒæ–‡ä»¶å±æ€§</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> -rp /home/zls1 /tmp/</span><br><span class="line"><span class="comment">## è¯­æ³•äºŒï¼šcp [é€‰é¡¹]... æºæ–‡ä»¶... ç›®å½•</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> -a /home/zls1 /tmp/</span><br><span class="line">----</span><br><span class="line"><span class="comment">## è¯­æ³•ä¸‰ï¼šcp [é€‰é¡¹]... -t ç›®å½• æºæ–‡ä»¶... (åäººç±»)</span></span><br><span class="line"><span class="built_in">cp</span> [OPTION]... -t DIRECTORY SOURCE...</span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> -t /tmp/ saomiao.sh</span><br><span class="line"><span class="comment">## æ€»ç»“ï¼š</span></span><br><span class="line">1.å½“å¤åˆ¶çš„ç›®æ ‡ä¸å­˜åœ¨æ—¶ï¼Œå°†æºæ–‡ä»¶å¤åˆ¶å‡ºæ¥å¹¶æ”¹åä¸ºç›®æ ‡å</span><br><span class="line">2.å½“å¤åˆ¶ç›®æ ‡å­˜åœ¨æ—¶ï¼Œä¸”æ˜¯ä¸€ä¸ªç›®å½•ï¼Œåˆ™ç›´æ¥å°†æ–‡ä»¶å¤åˆ¶åˆ°æŒ‡å®šçš„ç›®å½•ä¸‹ï¼ˆåå­—ä¸å˜ï¼‰</span><br><span class="line">3.å½“å¤åˆ¶ç›®æ ‡å­˜åœ¨æ—¶ï¼Œä¸”æ˜¯ä¸€ä¸ªæ™®é€šæ–‡ä»¶ï¼Œåˆ™æç¤ºæ˜¯å¦è¦è¦†ç›–ï¼Œè¾“å…¥yæ˜¯è¦†ç›–ï¼Œè¾“å…¥næ˜¯ä¸è¦†ç›–</span><br><span class="line">4.å½“å¤åˆ¶å¤šä¸ªæ–‡ä»¶æ—¶ï¼Œæœ€åä¸€ä¸ªå¿…é¡»å†™å·²å­˜åœ¨çš„ç›®å½•ï¼Œå¦åˆ™ä¼šæŠ¥é”™</span><br><span class="line">5.<span class="built_in">cp</span>å‘½ä»¤é»˜è®¤æƒ…å†µä¸‹æ— æ³•æ‹·è´ç›®å½•ï¼Œå¿…é¡»åŠ -ré€‰é¡¹ï¼Œé€’å½’å¤åˆ¶ç›®å½•</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æ–‡ä»¶ç®¡ç†å‘½ä»¤â€“mv">æ–‡ä»¶ç®¡ç†å‘½ä»¤â€“mv</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">-iè¯¢é—®ï¼ˆæ˜¯å¦è¦è¦†ç›–ï¼‰</span><br><span class="line">move ç§»åŠ¨ï¼Œå‰ªåˆ‡</span><br><span class="line">1.<span class="built_in">mv</span> [é€‰é¡¹]... [-T] æºæ–‡ä»¶ ç›®æ ‡ï¼ˆé‡å‘½åï¼‰</span><br><span class="line">2.<span class="built_in">mv</span> [é€‰é¡¹]... æºæ–‡ä»¶... ç›®å½•</span><br><span class="line">3.<span class="built_in">mv</span> [é€‰é¡¹]... -t ç›®å½• æºæ–‡ä»¶... (åäººç±»)</span><br><span class="line"></span><br><span class="line"><span class="comment">## è¯­æ³•ä¸€ï¼šmv [é€‰é¡¹]... [-T] æºæ–‡ä»¶ ç›®æ ‡ï¼ˆé‡å‘½åï¼‰</span></span><br><span class="line"><span class="built_in">mv</span> [OPTION]... [-T] SOURCE DEST</span><br><span class="line"><span class="comment">## ç»™saomiao.shæ–‡ä»¶æ”¹åå†…å®¹è¦†ç›–å¹¶æ”¹åï¼Œæºæ–‡ä»¶æ¶ˆå¤±</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">mv</span> saomiao.sh zls.sh</span><br><span class="line"><span class="comment">## è¯­æ³•äºŒï¼šmv [é€‰é¡¹]... æºæ–‡ä»¶... ç›®å½•</span></span><br><span class="line"><span class="built_in">mv</span> [OPTION]... SOURCE... DIRECTORY</span><br><span class="line">[root@localhost ~]# <span class="built_in">mv</span> zls.sh /opt/</span><br><span class="line"><span class="comment">## è¦†ç›–æ–‡ä»¶</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">mv</span> nginx.conf 123</span><br><span class="line"><span class="built_in">mv</span>: overwrite â€˜123â€™? y</span><br><span class="line"><span class="comment">## ç§»åŠ¨å¤šä¸ªæ–‡ä»¶    ç§»åŠ¨æ–‡ä»¶åˆ°å½“å‰ç›®å½•</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">mv</span> /tmp/&#123;123,anaconda,ks.cfg,cheak_student.sh,nginx.conf.bak&#125; .</span><br><span class="line">[root@localhost ~]# ll</span><br><span class="line">total 8</span><br><span class="line">-rw-r--r--. 1 root root 0 Apr 1 19:18 123</span><br><span class="line">-rw-------. 1 root root 1379 Mar 21 20:58 anaconda-ks.cfg</span><br><span class="line">-rw-r--r--. 1 root root 392 Aug 11 2022 cheak_student.sh</span><br><span class="line">-rw-r--r--. 1 root root 0 Apr 1 19:18 nginx.conf.bak</span><br><span class="line"><span class="comment">## é”™è¯¯æ¼”ç¤º</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">mv</span> 123 anaconda-ks.cfg cheak_student.sh nginx.conf.bak abcåŒ<span class="built_in">cp</span>ï¼Œabcä¸æ˜¯ç›®å½•</span><br><span class="line"><span class="built_in">mv</span>: target â€˜abcâ€™ is not a directory</span><br><span class="line"><span class="comment">## æ€»ç»“ï¼š</span></span><br><span class="line">1.å½“ç§»åŠ¨çš„ç›®æ ‡ä¸å­˜åœ¨æ—¶ï¼Œå°†æºæ–‡ä»¶é‡å‘½å</span><br><span class="line">2.å½“ç§»åŠ¨ç›®æ ‡å­˜åœ¨æ—¶ï¼Œä¸”æ˜¯ä¸€ä¸ªç›®å½•ï¼Œåˆ™ç›´æ¥å°†æ–‡ä»¶å‰ªåˆ‡åˆ°æŒ‡å®šçš„ç›®å½•ä¸‹ï¼ˆåå­—ä¸å˜ï¼‰</span><br><span class="line">3.å½“ç§»åŠ¨ç›®æ ‡å­˜åœ¨æ—¶ï¼Œä¸”æ˜¯ä¸€ä¸ªæ™®é€šæ–‡ä»¶ï¼Œåˆ™æç¤ºæ˜¯å¦è¦è¦†ç›–ï¼Œè¾“å…¥yæ˜¯è¦†ç›–ï¼Œè¾“å…¥næ˜¯ä¸è¦†ç›–</span><br><span class="line">4.å½“ç§»åŠ¨å¤šä¸ªæ–‡ä»¶æ—¶ï¼Œæœ€åä¸€ä¸ªå¿…é¡»å†™å·²å­˜åœ¨çš„ç›®å½•ï¼Œå¦åˆ™ä¼šæŠ¥é”™</span><br><span class="line"><span class="comment">## è¯­æ³•ä¸‰ï¼šmv [é€‰é¡¹]... -t ç›®å½• æºæ–‡ä»¶... (åäººç±»)</span></span><br><span class="line"><span class="built_in">mv</span> [OPTION]... -t DIRECTORY SOURCE...</span><br></pre></td></tr></table></figure><h2 id="æ–‡ä»¶ç®¡ç†å‘½ä»¤â€”rm">æ–‡ä»¶ç®¡ç†å‘½ä»¤â€”rm</h2><table><thead><tr><th>é€‰é¡¹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>-i</td><td>è¯¢é—®ï¼ˆæ˜¯å¦è¦åˆ é™¤ï¼‰</td></tr><tr><td>-r</td><td>é€’å½’åˆ é™¤</td></tr><tr><td>-f</td><td>force å¼ºåˆ¶åˆ é™¤</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">remove åˆ é™¤ï¼ˆdeleteï¼‰</span><br><span class="line"><span class="comment">## è¯­æ³•ï¼šrm [é€‰é¡¹]... æ–‡ä»¶...</span></span><br><span class="line"><span class="built_in">rm</span> [OPTION]... FILE...</span><br><span class="line"><span class="comment">## åˆ é™¤æ–‡ä»¶</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">rm</span> 123</span><br><span class="line"><span class="comment">## åˆ é™¤ç›®å½•</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">rm</span> -r zls2</span><br><span class="line"><span class="comment">## åˆ é™¤ç›®å½•ä¸‹çš„æ‰€æœ‰å†…å®¹ï¼Œä¸åŒ…æ‹¬ç›®å½•æœ¬èº«</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">rm</span> -r zls2/*</span><br><span class="line"><span class="built_in">rm</span>: remove regular empty file â€˜123â€™? y</span><br><span class="line"><span class="comment">## å¼ºåˆ¶åˆ é™¤</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">rm</span> -rf zls2/</span><br><span class="line">[root@localhost ~]# <span class="built_in">rm</span> -fr /tmp/*</span><br><span class="line">1.<span class="built_in">rm</span>åˆ é™¤æ™®é€šæ–‡ä»¶çš„å‘½ä»¤ï¼Œé»˜è®¤åªèƒ½åˆ é™¤æ™®é€šæ–‡ä»¶</span><br><span class="line">[root@localhost ~]# <span class="built_in">rm</span> zls1</span><br><span class="line"><span class="built_in">rm</span>: cannot remove â€˜zls1â€™: Is a directory</span><br><span class="line">2.åˆ é™¤æ–‡ä»¶ï¼Œä¸æƒ³è¯¢é—®ï¼Œ<span class="built_in">rm</span> -f</span><br><span class="line">3.åˆ é™¤ç›®å½•ï¼Œä¸æƒ³è¯¢é—®ï¼Œ<span class="built_in">rm</span> -fr ã€ <span class="built_in">rm</span> -rf</span><br><span class="line"><span class="comment">## ä¸¤ç§è®©å‘½ä»¤ä¸èµ°åˆ«åçš„æ–¹æ³•ï¼šä¾‹å¦‚rm -iï¼ˆæé†’ï¼‰åˆ«åæ˜¯alias rm=&#x27;rm -i&#x27;ï¼Œå¦‚æœä¸æƒ³è®©rmèµ°åˆ«åæé†’</span></span><br><span class="line">1.åœ¨å‘½ä»¤å‰é¢åŠ \ï¼ˆè½¬ä¹‰ç¬¦ï¼‰[root@lb01 ~]# \<span class="built_in">rm</span> -r ac</span><br><span class="line">2.ä½¿ç”¨å‘½ä»¤çš„ç»å¯¹è·¯å¾„    æŸ¥çœ‹å‘½ä»¤çš„ç»å¯¹è·¯å¾„åœ¨å“ª<span class="built_in">which</span> <span class="built_in">rm</span>    /usr/bin/rm </span><br><span class="line">ä½¿ç”¨ç»å¯¹è·¯å¾„åˆ é™¤/usr/bin/rm -r ab  å°±æ²¡æœ‰æé†’æ˜¯å¦åˆ é™¤å³ä¸èµ°åˆ«å</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linuxæ•²é—¨ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>06.æ–‡ä»¶æŸ¥æ‰¾å‘½ä»¤</title>
      <link href="/posts/b1e58ba1.html"/>
      <url>/posts/b1e58ba1.html</url>
      
        <content type="html"><![CDATA[<div class='wow animate__heartBeat' data-wow-duration='' data-wow-delay='1s' data-wow-offset=''  data-wow-iteration='2' ><div class="note red icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p><a href="https://www.lukeme.top/posts/4c7367cf.html">å‘Šåˆ«å°ç™½ï¼Œç‚¹å‡»ç›´è¾¾</a></p></div></div><h2 id="æ–‡ä»¶ç®¡ç†å‘½ä»¤">æ–‡ä»¶ç®¡ç†å‘½ä»¤</h2><h3 id="æŸ¥â€”cat">æŸ¥â€”cat</h3><table><thead><tr><th>é€‰é¡¹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>-n</td><td>æ˜¾ç¤ºè¡Œå·</td></tr><tr><td>-T</td><td>ç”¨æ¥åŒºåˆ†æ–‡ä»¶ä¸­æ˜¯å¦æœ‰åˆ¶è¡¨ç¬¦</td></tr><tr><td>-E</td><td>åˆ¤æ–­æ–‡ä»¶ä¸­å†…å®¹æ¯ä¸€è¡Œç»“æŸä½ç½®</td></tr><tr><td>-A</td><td>ç›¸å½“äº-E -T</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## è¯­æ³•</span></span><br><span class="line"><span class="built_in">cat</span> [é€‰é¡¹]... [æ–‡ä»¶]...</span><br><span class="line"><span class="built_in">cat</span> [OPTION]... [FILE]...</span><br><span class="line"><span class="comment">## æŸ¥çœ‹/etc/passwdæ–‡ä»¶å†…å®¹</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> /etc/passwd</span><br><span class="line"><span class="comment">## æŸ¥çœ‹å¤šä¸ªæ–‡ä»¶å†…å®¹</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> 1.txt 2.txt</span><br><span class="line">123</span><br><span class="line">abc</span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> 2.txt 1.txt</span><br><span class="line">abc</span><br><span class="line">123</span><br><span class="line"><span class="comment">## æ ‡å‡†è¾“å‡ºï¼šå½“æ‰§è¡Œä¸€ä¸ªå‘½ä»¤åï¼Œå‘½ä»¤æ‰§è¡Œæ­£ç¡®ï¼Œæ‰€äº§ç”Ÿçš„ç»“æœï¼ˆåœ¨ç»ˆç«¯ä¸Šèƒ½çœ‹åˆ°çš„è¾“å‡ºç»“æœï¼‰</span></span><br><span class="line">OOMï¼š out of memory å†…å­˜æº¢å‡º</span><br><span class="line">OOM killer</span><br><span class="line"><span class="comment">## -nï¼šæ˜¾ç¤ºè¡Œå·</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> -n /etc/passwd</span><br><span class="line">1 root:x:0:0:root:/root:/bin/bash</span><br><span class="line">2 bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">3 daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">4 adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">5 lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line">6 <span class="built_in">sync</span>:x:5:0:<span class="built_in">sync</span>:/sbin:/bin/sync</span><br><span class="line">7 shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line">8 halt:x:7:0:halt:/sbin:/sbin/halt</span><br><span class="line">9 mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</span><br><span class="line">10 operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line"><span class="comment">## -Tï¼šç”¨æ¥åŒºåˆ†æ–‡ä»¶ä¸­æ˜¯å¦æœ‰åˆ¶è¡¨ç¬¦ï¼ˆä¸€ä¸ªåˆ¶è¡¨ç¬¦ç”¨^Iæ¥è¡¨ç¤ºï¼‰</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> -T 1.txt</span><br><span class="line">abc 123 789</span><br><span class="line">qwe^Iwww^I777</span><br><span class="line">a^I^I^I^I</span><br><span class="line">aaaaa</span><br><span class="line">bbbb</span><br><span class="line"><span class="comment">## -Eï¼šåˆ¤æ–­æ–‡ä»¶ä¸­å†…å®¹æ¯ä¸€è¡Œç»“æŸä½ç½®ï¼ˆæŸ¥çœ‹æ˜¯å¦æœ‰å¤šä½™çš„ç©ºæ ¼ï¼‰ç»“å°¾ç”¨$è¡¨ç¤º</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> -E 1.txt</span><br><span class="line">abc 123 789$</span><br><span class="line">$</span><br><span class="line">qwe www 777 $</span><br><span class="line">aaaa$</span><br><span class="line">$</span><br><span class="line">$</span><br><span class="line"><span class="comment">## -Aï¼šç›¸å½“äº-E -T</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> -A 1.txt</span><br><span class="line">abc 123 789$</span><br><span class="line">$</span><br><span class="line">qwe^Iwww^I777 $</span><br><span class="line">aaaa$</span><br><span class="line">$</span><br><span class="line">Tab åˆ¶è¡¨ç¬¦</span><br><span class="line">å›è½¦ æ¢è¡Œç¬¦</span><br><span class="line"><span class="comment">## å¾€æ–‡ä»¶ä¸­å†™å…¥å†…å®¹</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> &gt;&gt; suibian.txt &lt;&lt;<span class="string">EOF(ä¸ä¸€å®šæ˜¯Eofï¼Œèµ·åˆ°ç»ˆæ­¢ä½œç”¨)</span></span><br><span class="line"><span class="string">ä½†ä½¿é¾™åŸfreeå°†åœ¨</span></span><br><span class="line"><span class="string">xxx</span></span><br><span class="line"><span class="string">aaa</span></span><br><span class="line"><span class="string">ccc</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> &gt;&gt; gushi.txt &lt;&lt;<span class="string">zls ï¼ˆè¿™é‡Œå°±ä¸ä¸€å®šæ˜¯Eofï¼‰</span></span><br><span class="line"><span class="string">&gt; 1111</span></span><br><span class="line"><span class="string">&gt; 2222</span></span><br><span class="line"><span class="string">&gt; 3333</span></span><br><span class="line"><span class="string">&gt; zls</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> &gt; 1.txt &lt;&lt;<span class="string">EOF#ä¸€ä¸ª &gt; æ˜¯å†™å…¥æ–°å†…å®¹å¹¶è¦†ç›–</span></span><br><span class="line"><span class="string">&gt; abc</span></span><br><span class="line"><span class="string">&gt; EOF</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> 1.txt</span><br><span class="line">abc</span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> &gt;&gt; 1.txt &lt;&lt;<span class="string">EOF  #ä¸¤ä¸ª&gt;&gt;æ˜¯è¿½åŠ å†…å®¹ä¸è¦†ç›–</span></span><br><span class="line"><span class="string">&gt; 123</span></span><br><span class="line"><span class="string">&gt; 456</span></span><br><span class="line"><span class="string">&gt; EOF</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> 1.txt</span><br><span class="line">abc</span><br><span class="line">123</span><br><span class="line">456</span><br></pre></td></tr></table></figure><h3 id="æŸ¥â€”more">æŸ¥â€”more</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@db04 ~]# more /etc/services</span><br></pre></td></tr></table></figure><h3 id="æŸ¥â€”less">æŸ¥â€”less</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@db04 ~]# less /etc/services</span><br><span class="line"><span class="comment">#æ˜¾ç¤ºè¡Œå·ï¼Œç¼ºé™·ï¼šæ–‡ä»¶å†…å®¹è¿‡å¤šä¸èƒ½æ˜¾ç¤ºæœ€åä¸€è¡Œçš„å†…å®¹ï¼Œéœ€è¦ä½¿ç”¨ç¿»é¡µé”®PageDownå‘åç¿»</span></span><br><span class="line">[root@db04 ~]# less -N /etc/services</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æŸ¥â€”head">æŸ¥â€”head</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#é€‰é¡¹ï¼š-n</span></span><br><span class="line">ä½œç”¨ï¼šæŒ‡å®šæŸ¥çœ‹å¤šå°‘è¡Œ number</span><br><span class="line"><span class="comment">## é»˜è®¤æƒ…å†µä¸‹headæŸ¥çœ‹ä¸€ä¸ªæ–‡ä»¶çš„å‰10è¡Œå†…å®¹</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">head</span> /etc/passwd</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"><span class="built_in">sync</span>:x:5:0:<span class="built_in">sync</span>:/sbin:/bin/sync</span><br><span class="line">shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line">halt:x:7:0:halt:/sbin:/sbin/halt</span><br><span class="line">mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</span><br><span class="line">operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line"><span class="comment">## æŸ¥çœ‹æŒ‡å®šè¡Œæ•°-n3/-n 3/-3éƒ½å¯ä»¥æŸ¥çœ‹å‰ä¸‰è¡Œå†…å®¹  nä¹Ÿå¯çœç•¥</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">head</span> -n3 /etc/passwd</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">[root@localhost ~]# <span class="built_in">head</span> -n 3 /etc/passwd</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">[root@localhost ~]# <span class="built_in">head</span> -3 /etc/passwd</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æŸ¥â€”tail">æŸ¥â€”tail</h3><table><thead><tr><th>é€‰é¡¹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>-n</td><td>æŒ‡å®šæŸ¥çœ‹å¤šå°‘è¡Œ number</td></tr><tr><td>-f</td><td>follow è·Ÿéšï¼Œè·Ÿè¸ªæ–‡ä»¶æœ«å°¾</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## é»˜è®¤æƒ…å†µä¸‹tailæŸ¥çœ‹ä¸€ä¸ªæ–‡ä»¶çš„å10è¡Œå†…å®¹</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">tail</span> /etc/passwd</span><br><span class="line">ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin</span><br><span class="line">nobody:x:99:99:Nobody:/:/sbin/nologin</span><br><span class="line">systemd-network:x:192:192:systemd Network Management:/:/sbin/nologin</span><br><span class="line">dbus:x:81:81:System message bus:/:/sbin/nologin</span><br><span class="line">polkitd:x:999:998:User <span class="keyword">for</span> polkitd:/:/sbin/nologin</span><br><span class="line">sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin</span><br><span class="line">postfix:x:89:89::/var/spool/postfix:/sbin/nologin</span><br><span class="line">zls1:x:1000:1000::/home/zls1:/bin/bash</span><br><span class="line">apache:x:48:48:Apache:/usr/share/httpd:/sbin/nologin</span><br><span class="line">zls100:x:1001:1001::/home/zls100:/bin/bash</span><br><span class="line"><span class="comment">## æŸ¥çœ‹æŒ‡å®šè¡Œæ•°</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">tail</span> -n2 /etc/passwd</span><br><span class="line">apache:x:48:48:Apache:/usr/share/httpd:/sbin/nologin</span><br><span class="line">zls100:x:1001:1001::/home/zls100:/bin/bash</span><br><span class="line">[root@localhost ~]# <span class="built_in">tail</span> -2 /etc/passwd</span><br><span class="line">apache:x:48:48:Apache:/usr/share/httpd:/sbin/nologin</span><br><span class="line">zls100:x:1001:1001::/home/zls100:/bin/bash</span><br><span class="line"><span class="comment">## å®æ—¶è¿½è¸ªæ—¥å¿—æ–‡ä»¶æœ«å°¾tail -f == tailf</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">tail</span> -f 1.txt</span><br><span class="line">å¯ä»¥æŸ¥çœ‹å®æ—¶æ›´æ–°çš„æ—¥å¿—</span><br></pre></td></tr></table></figure><h3 id="æŸ¥â€”grepï¼ˆä¸»è¦ç”¨äºè¿‡æ»¤æ–‡ä»¶å†…å®¹ï¼‰">æŸ¥â€”grepï¼ˆä¸»è¦ç”¨äºè¿‡æ»¤æ–‡ä»¶å†…å®¹ï¼‰</h3><table><thead><tr><th>é€‰é¡¹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>-n</td><td>æ˜¾ç¤ºè¡Œå·</td></tr><tr><td>-A</td><td>After è¿‡æ»¤å…³é”®å­—å¹¶æ‰“å°å‡ºåNè¡Œ</td></tr><tr><td>-B</td><td>Before è¿‡æ»¤å…³é”®å­—å¹¶æ‰“å°å‡ºå‰Nè¡Œ</td></tr><tr><td>-C</td><td>Center è¿‡æ»¤å…³é”®å­—å¹¶æ‰“å°å‡ºå‰åNè¡Œ</td></tr><tr><td>-v</td><td>å–å</td></tr><tr><td>-o</td><td>åªæ˜¾ç¤ºå…³é”®å­—å†…å®¹</td></tr><tr><td>-i</td><td>å¿½ç•¥å¤§å°å†™</td></tr><tr><td>-w</td><td>ç²¾ç¡®åŒ¹é…,æ˜¾ç¤ºåŒ¹é…çš„è¿™ä¸€è¡Œ</td></tr><tr><td>-c</td><td>ç›¸å½“äºcountï¼Œç”¨äºç»Ÿè®¡è¡Œæ•°</td></tr><tr><td>-r/-R</td><td>é€’å½’æœç´¢ç›®å½•åŠç›®å½•ä¸‹å¾—æ–‡ä»¶</td></tr></tbody></table><table><thead><tr><th>å…³é”®å­—å¯ä»¥ä½¿ç”¨çš„ç¬¦å·</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>^</td><td>ä»¥â€¦å¼€å¤´</td></tr><tr><td>$</td><td>ä»¥â€¦ç»“å°¾     ^$å¯ä»¥è¡¨ç¤ºç©ºè¡Œ</td></tr><tr><td>.</td><td>ä»»æ„ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td>*</td><td>*å·å‰é¢çš„å•ä¸ªå­—ç¬¦åŒ¹é…0æ¬¡æˆ–å¤šæ¬¡</td></tr><tr><td>|</td><td>æ­£åˆ™è¡¨è¾¾å¼é‡Œé¢æˆ–è€…æ„æ€ï¼Œgrepé»˜è®¤ä¸æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ï¼Œéœ€è¦ç”¨-E</td></tr><tr><td>\b</td><td>è¾¹ç•Œç¬¦</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## è¯­æ³•ï¼š</span></span><br><span class="line">grep [é€‰é¡¹]... <span class="string">&#x27;å…³é”®å­—&#x27;</span> [æ–‡ä»¶å]...</span><br><span class="line"><span class="comment">## è¿‡æ»¤å…³é”®å­—</span></span><br><span class="line">[root@localhost ~]# grep <span class="string">&#x27;é£æ™¯&#x27;</span> zls.txt</span><br><span class="line">æ±Ÿå±±é£æ™¯ç¾å¦‚ç”»ï¼Œ</span><br><span class="line"><span class="comment">## è¿‡æ»¤å…³é”®å­—å¹¶æ˜¾ç¤ºè¡Œå·</span></span><br><span class="line">[root@localhost ~]# grep -n <span class="string">&#x27;root&#x27;</span> /etc/passwd</span><br><span class="line">1:root:x:0:0:root:/root:/bin/bash</span><br><span class="line">10:operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> zls.txt</span><br><span class="line">å§æ§½</span><br><span class="line">ä½œè€…ï¼šæ›¾è€æ¹¿</span><br><span class="line">æ±Ÿå±±é£æ™¯ç¾å¦‚ç”»ï¼Œ</span><br><span class="line">æœ¬æƒ³åŸè¯—èµ å¤©ä¸‹ã€‚</span><br><span class="line">å¥ˆä½•è‡ªå·±æ²¡æ–‡åŒ–ï¼Œ</span><br><span class="line">ä¸€å¥å§æ§½é£å¥½å¤§ã€‚</span><br><span class="line">å°±è¿™ä¹ˆåœ°å§ã€‚</span><br><span class="line">è°¢è°¢å¤§å®¶ã€‚</span><br><span class="line">ä¸€äºŒä¸‰å››äº”å…­ä¸ƒï¼Œ</span><br><span class="line">ä¸ƒå…­äº”å››ä¸‰äºŒä¸€ã€‚</span><br><span class="line"><span class="comment">## è¿‡æ»¤å‡ºzls.txtæ–‡ä»¶ä¸­ åŒ…å«ä¸€çš„è¡Œ</span></span><br><span class="line">[root@localhost ~]#grep <span class="string">&#x27;ä¸€&#x27;</span> zls.txt</span><br><span class="line">ä¸€å¥å§æ§½é£å¥½å¤§ã€‚</span><br><span class="line">ä¸€äºŒä¸‰å››äº”å…­ä¸ƒï¼Œ</span><br><span class="line">ä¸ƒå…­äº”å››ä¸‰äºŒä¸€ã€‚</span><br><span class="line"><span class="comment">## è¿‡æ»¤å‡ºzls.txtæ–‡ä»¶ä¸­ä»¥ä¸€å¼€å¤´çš„è¡Œ</span></span><br><span class="line">[root@localhost ~]#grep <span class="string">&#x27;^ä¸€&#x27;</span> zls.txtt</span><br><span class="line">ä¸€å¥å§æ§½é£å¥½å¤§ã€‚</span><br><span class="line">ä¸€äºŒä¸‰å››äº”å…­ä¸ƒï¼Œ</span><br><span class="line"><span class="comment">## è¿‡æ»¤å‡ºzls.txtæ–‡ä»¶ä¸­ä»¥ä¸€å¼€å¤´çš„è¡Œï¼Œå¹¶æ˜¾ç¤ºè¡Œå·</span></span><br><span class="line">[root@localhost ~]# grep -n <span class="string">&#x27;^ä¸€&#x27;</span> zls.txt</span><br><span class="line">6:ä¸€å¥å§æ§½é£å¥½å¤§ã€‚</span><br><span class="line">9:ä¸€äºŒä¸‰å››äº”å…­ä¸ƒï¼Œ</span><br><span class="line"><span class="comment">## è¿‡æ»¤å‡º/etc/passwdæ–‡ä»¶ä¸­ï¼Œä»¥loginç»“å°¾çš„è¡Œ</span></span><br><span class="line">[root@localhost ~]# grep <span class="string">&#x27;login$&#x27;</span> /etc/passwd</span><br><span class="line"><span class="comment">## è¿‡æ»¤å‡ºmailå…³é”®å­—æ‰€åœ¨è¡ŒåŠåä¸¤è¡Œå†…å®¹</span></span><br><span class="line">[root@localhost ~]# grep <span class="string">&#x27;mail&#x27;</span> -A 2 /etc/passwd</span><br><span class="line">mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</span><br><span class="line">operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line">games:x:12:100:games:/usr/games:/sbin/nologin</span><br><span class="line"><span class="comment">## è¿‡æ»¤å‡ºmailå…³é”®å­—æ‰€åœ¨è¡ŒåŠå‰ä¸¤è¡Œå†…å®¹</span></span><br><span class="line">[root@localhost ~]# grep -B 2 <span class="string">&#x27;mail&#x27;</span> /etc/passwd</span><br><span class="line">shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line">halt:x:7:0:halt:/sbin:/sbin/halt</span><br><span class="line">mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</span><br><span class="line"><span class="comment">## è¿‡æ»¤å‡ºmailå…³é”®å­—æ‰€åœ¨è¡ŒåŠå‰ä¸¤è¡Œå†…å®¹å’Œåä¸‰è¡Œå†…å®¹</span></span><br><span class="line">[root@localhost ~]# grep -A3 -B2 <span class="string">&#x27;mail&#x27;</span> /etc/passwd</span><br><span class="line">shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line">halt:x:7:0:halt:/sbin:/sbin/halt</span><br><span class="line">mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</span><br><span class="line">operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line">games:x:12:100:games:/usr/games:/sbin/nologin</span><br><span class="line">ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin</span><br><span class="line"><span class="comment">## ## è¿‡æ»¤å‡ºmailå…³é”®å­—æ‰€åœ¨è¡ŒåŠå‰ä¸¤è¡Œå†…å®¹å’Œåä¸¤è¡Œå†…å®¹</span></span><br><span class="line">[root@localhost ~]# grep -C2 <span class="string">&#x27;mail&#x27;</span> /etc/passwd</span><br><span class="line">shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line">halt:x:7:0:halt:/sbin:/sbin/halt</span><br><span class="line">mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</span><br><span class="line">operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line">games:x:12:100:games:/usr/games:/sbin/nologin</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="Linuxä¸­çš„ç®¡é“ç¬¦">Linuxä¸­çš„ç®¡é“ç¬¦</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">|ï¼šShift + \ ä½œç”¨ï¼šå°†ç®¡é“ç¬¦å·¦è¾¹å‘½ä»¤çš„æ ‡å‡†è¾“å‡ºäº¤ç»™ç®¡é“ç¬¦å³è¾¹å‘½ä»¤æ¥å¤„ç†</span><br><span class="line"><span class="built_in">command</span>|<span class="built_in">command</span>|<span class="built_in">command</span></span><br><span class="line"><span class="comment">## è¿‡æ»¤å‡º/etc/servicesæ–‡ä»¶ä¸­ä»¥ httpå¼€å¤´çš„è¡Œä¸”ä»¥Lç»“å°¾çš„è¡Œ</span></span><br><span class="line">[root@localhost ~]# grep <span class="string">&#x27;^http&#x27;</span> /etc/services</span><br><span class="line">http 80/tcp www www-http <span class="comment"># WorldWideWeb HTTP</span></span><br><span class="line">http 80/udp www www-http <span class="comment"># HyperText Transfer Protocol</span></span><br><span class="line">http 80/sctp <span class="comment"># HyperText Transfer Protocol</span></span><br><span class="line">https 443/tcp <span class="comment"># http protocol over TLS/SSL</span></span><br><span class="line">https 443/udp <span class="comment"># http protocol over TLS/SSL</span></span><br><span class="line">https 443/sctp <span class="comment"># http protocol over TLS/SSL</span></span><br><span class="line">http-mgmt 280/tcp <span class="comment"># http-mgmt</span></span><br><span class="line">http-mgmt 280/udp <span class="comment"># http-mgmt</span></span><br><span class="line">http-rpc-epmap 593/tcp <span class="comment"># HTTP RPC Ep Map</span></span><br><span class="line">http-rpc-epmap 593/udp <span class="comment"># HTTP RPC Ep Map</span></span><br><span class="line">httpx 4180/tcp <span class="comment"># HTTPX</span></span><br><span class="line">httpx 4180/udp <span class="comment"># HTTPX</span></span><br><span class="line">http-wmap 8990/tcp <span class="comment"># webmail HTTP service</span></span><br><span class="line">http-wmap 8990/udp <span class="comment"># webmail HTTP service</span></span><br><span class="line">https-wmap 8991/tcp <span class="comment"># webmail HTTPS service</span></span><br><span class="line">https-wmap 8991/udp <span class="comment"># webmail HTTPS service</span></span><br><span class="line"></span><br><span class="line">[root@localhost ~]# grep <span class="string">&#x27;^http&#x27;</span> /etc/services|grep <span class="string">&#x27;L$&#x27;</span></span><br><span class="line">https 443/tcp <span class="comment"># http protocol over TLS/SSL</span></span><br><span class="line">https 443/udp <span class="comment"># http protocol over TLS/SSL</span></span><br><span class="line">https 443/sctp <span class="comment"># http protocol over TLS/SSL</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linuxæ•²é—¨ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>09.vimç¼–è¾‘å™¨</title>
      <link href="/posts/473690bb.html"/>
      <url>/posts/473690bb.html</url>
      
        <content type="html"><![CDATA[<div class='wow animate__heartBeat' data-wow-duration='' data-wow-delay='1s' data-wow-offset=''  data-wow-iteration='2' ><div class="note red icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p><a href="https://www.lukeme.top/posts/4c7367cf.html">å‘Šåˆ«å°ç™½ï¼Œç‚¹å‡»ç›´è¾¾</a></p></div></div><h3 id="VIMæ–‡æœ¬ç¼–è¾‘å™¨">VIMæ–‡æœ¬ç¼–è¾‘å™¨</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vi å’Œ vim å‘½ä»¤æ˜¯linuxä¸­å¼ºå¤§çš„æ–‡æœ¬ç¼–è¾‘å™¨, ç”±äºLinuxç³»ç»Ÿä¸€åˆ‡çš†æ–‡ä»¶ï¼Œè€Œé…ç½®ä¸€ä¸ªæœåŠ¡å°±æ˜¯åœ¨ä¿®æ”¹å…¶</span><br><span class="line">é…ç½®æ–‡ä»¶çš„å‚æ•°ã€‚</span><br><span class="line">vim ç¼–è¾‘å™¨æ˜¯è¿ç»´å·¥ç¨‹å¸ˆå¿…é¡»æŒæ¡çš„ä¸€ä¸ªå·¥å…·, æ²¡æœ‰å®ƒå¾ˆå¤šå·¥ä½œéƒ½æ— æ³•å®Œæˆã€‚</span><br><span class="line">vim å…¶å®æ˜¯ vi çš„å‡çº§ç‰ˆ</span><br></pre></td></tr></table></figure><h3 id="vimä¸‰ç§å·¥ä½œæ¨¡å¼">vimä¸‰ç§å·¥ä½œæ¨¡å¼</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Vimç¼–è¾‘å™¨ä¸­è®¾ç½®äº†ä¸‰ç§æ¨¡å¼: å‘½ä»¤æ¨¡å¼ã€ç¼–è¾‘æ¨¡å¼ã€æœ«è¡Œæ¨¡å¼ï¼Œæ¯ç§æ¨¡å¼åˆ†åˆ«åˆæ”¯æŒå¤šç§ä¸åŒçš„å‘½ä»¤å¿«æ·é”®ï¼Œå¤§å¤§æé«˜äº†å·¥ä½œæ•ˆç‡ï¼Œè€Œä¸”ç”¨æˆ·åœ¨ä¹ æƒ¯ä¹‹åä¹Ÿä¼šè§‰å¾—ç›¸å½“é¡ºæ‰‹ã€‚è¦æƒ³é«˜æ•ˆç‡åœ°æ“ä½œæ–‡æœ¬ï¼Œå°±å¿…é¡»å…ˆææ¸…è¿™ä¸‰ç§æ¨¡å¼çš„æ“ä½œåŒºåˆ«ä»¥åŠæ¨¡å¼ä¹‹é—´çš„åˆ‡æ¢æ–¹æ³•ã€‚</span><br></pre></td></tr></table></figure><h3 id="å‘½ä»¤æ¨¡å¼">å‘½ä»¤æ¨¡å¼</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è¿›è¡Œå¿«æ·é”®æ“ä½œ</span></span><br><span class="line"><span class="comment">##å…‰æ ‡çš„è·³è½¬</span></span><br><span class="line">Shift + g |G    //å°†å…‰æ ‡è·³è½¬åˆ°æ–‡ä»¶æœ€åä¸€è¡Œ</span><br><span class="line">gg              //å°†å…‰æ ‡è·³è½¬åˆ°æ–‡ä»¶çš„ç¬¬ä¸€è¡Œ</span><br><span class="line">Ngg   //å°†å…‰æ ‡è·³è½¬åˆ°æŒ‡å®šè¡Œ(Nä¸ºé˜¿æ‹‰ä¼¯æ•°å­—)</span><br><span class="line">Shift +4 |$    //å°†å…‰æ ‡è·³è½¬åˆ°å½“å‰æ‰€åœ¨è¡Œçš„è¡Œæœ«</span><br><span class="line">Shift +6 |^  |0 // å°†å…‰æ ‡è·³è½¬åˆ°å½“å‰æ‰€åœ¨è¡Œçš„è¡Œé¦–</span><br><span class="line"><span class="comment">## å¤åˆ¶ç²˜è´´</span></span><br><span class="line">yy   //å¤åˆ¶å…‰æ ‡æ‰€åœ¨è¡Œçš„æ•´è¡Œå†…å®¹</span><br><span class="line">p(å°å†™p)  //å°†å¤åˆ¶çš„å†…å®¹ç²˜è´´åˆ°å…‰æ ‡æ‰€åœ¨è¡Œçš„ä¸‹ä¸€è¡Œ</span><br><span class="line">P(å¤§å†™P)  //å°†å¤åˆ¶çš„å†…å®¹ç²˜è´´åˆ°å…‰æ ‡æ‰€åœ¨è¡Œçš„ä¸Šä¸€è¡Œ</span><br><span class="line">Nyy | yNy    //å°†å…‰æ ‡æ‰€åœ¨è¡Œæ•´è¡Œå†…å®¹åŠä¸‹é¢N-1è¡Œå†…å®¹å¤åˆ¶(Nä¸ºé˜¿æ‹‰ä¼¯æ•°å­—)</span><br><span class="line"><span class="comment">## å‰ªåˆ‡åˆ é™¤</span></span><br><span class="line"><span class="built_in">dd</span>   // å°†å…‰æ ‡æ‰€åœ¨è¡Œä¸€æ•´è¡Œå†…å®¹ï¼Œå‰ªåˆ‡(åˆ é™¤)</span><br><span class="line">Ndd | dNd    //å°†å…‰æ ‡æ‰€åœ¨è¡ŒåŠä¸‹é¢N-1è¡Œå†…å®¹å‰ªåˆ‡(Nä¸ºé˜¿æ‹‰ä¼¯æ•°å­—)</span><br><span class="line">Shift + d|D// å°†å…‰æ ‡æ‰€åœ¨å­—ç¬¦åŠåé¢æ•´è¡Œå†…å®¹å‰ªåˆ‡(åˆ é™¤)</span><br><span class="line">x   // åˆ é™¤å½“å‰å…‰æ ‡æ‰€åœ¨å­—ç¬¦</span><br><span class="line">Shift +x|X    //å°†å…‰æ ‡æ‰€åœ¨å½“å‰å­—ç¬¦çš„å‰ä¸€ä¸ªå­—ç¬¦åˆ é™¤</span><br><span class="line">d+<span class="built_in">shift</span> +g|dG  //å°†å…‰æ ‡æ‰€åœ¨è¡ŒåŠåé¢æ‰€æœ‰è¡Œå†…å®¹åˆ é™¤</span><br><span class="line"><span class="comment">## æ’¤é”€å›æ»šæ›¿æ¢</span></span><br><span class="line">U        // æ’¤é”€ä¸Šä¸€æ¬¡æ“ä½œ</span><br><span class="line">Ctrl + r//æ¢å¤ä¸Šä¸€æ¬¡æ’¤é”€çš„æ“ä½œ</span><br><span class="line">r// æ›¿æ¢å…‰æ ‡å½“å‰æ‰€åœ¨çš„ä¸€ä¸ªå­—ç¬¦</span><br><span class="line">Shift +r |R//ä»å…‰æ ‡æ‰€åœ¨å­—ç¬¦å¼€å§‹è¿›è¡Œæ›¿æ¢ç›´åˆ°æŒ‰ESCç»“æŸ</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## ç¿»é¡µ</span></span><br><span class="line">Ctrl + b // å‘å‰ç¿»é¡µ</span><br><span class="line">Ctrl + f // å‘åç¿»é¡µ</span><br></pre></td></tr></table></figure><h3 id="ç¼–è¾‘æ¨¡å¼">ç¼–è¾‘æ¨¡å¼</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-- INSERT --</span><br><span class="line">åƒæ­£å¸¸çš„Windowsæ–‡æœ¬ç¼–è¾‘å™¨ä¸€æ ·ï¼Œå¯ä»¥éšæ„å†™å…¥å†…å®¹</span><br><span class="line"><span class="comment">## ä»å‘½ä»¤æ¨¡å¼å¦‚ä½•è¿›å…¥ç¼–è¾‘æ¨¡å¼</span></span><br><span class="line">i // åœ¨å…‰æ ‡æ‰€åœ¨ä½ç½®è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼ˆè¾“å…¥å†…å®¹åœ¨å…‰æ ‡ä¹‹å‰ï¼‰</span><br><span class="line">I // å°†å…‰æ ‡è·³è½¬åˆ°å…‰æ ‡æ‰€åœ¨è¡Œçš„è¡Œé¦–å¹¶è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼ˆè¾“å…¥å†…å®¹åœ¨å…‰æ ‡ä¹‹å‰ï¼‰</span><br><span class="line">a // å°†å…‰æ ‡è·³è½¬åˆ°å…‰æ ‡æ‰€åœ¨å­—ç¬¦çš„åä¸€ä¸ªå­—ç¬¦å¹¶è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼ˆè¾“å…¥å†…å®¹åœ¨å…‰æ ‡ä¹‹å‰ï¼‰</span><br><span class="line">A // å°†å…‰æ ‡è·³è½¬åˆ°å…‰æ ‡æ‰€åœ¨è¡Œçš„è¡Œæœ«å¹¶è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼ˆè¾“å…¥å†…å®¹åœ¨å…‰æ ‡ä¹‹å‰ï¼‰</span><br><span class="line">s // å°†å…‰æ ‡æ‰€åœ¨å­—ç¬¦åˆ é™¤å¹¶è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼ˆè¾“å…¥å†…å®¹åœ¨å…‰æ ‡ä¹‹å‰ï¼‰</span><br><span class="line">S // å°†å…‰æ ‡æ‰€åœ¨è¡Œçš„æ•´è¡Œå†…å®¹åˆ é™¤å¹¶è¿›å…¥ç¼–è¾‘æ¨¡å¼</span><br><span class="line">o // å°†å…‰æ ‡ç§»åŠ¨åˆ°å½“å‰æ‰€åœ¨è¡Œçš„ä¸‹ä¸€è¡Œå¹¶è¿›å…¥ç¼–è¾‘æ¨¡å¼</span><br><span class="line">O // å°†å…‰æ ‡ç§»åŠ¨åˆ°å…‰æ ‡æ‰€åœ¨è¡Œçš„ä¸Šä¸€è¡Œå¹¶è¿›å…¥ç¼–è¾‘æ¨¡å¼</span><br><span class="line"><span class="comment">## ä»ç¼–è¾‘æ¨¡å¼è¿”å›å‘½ä»¤æ¨¡å¼</span></span><br><span class="line">ESC</span><br></pre></td></tr></table></figure><h3 id="æœ«è¡Œæ¨¡å¼ï¼ˆåº•è¡Œæ¨¡å¼ï¼‰â€“ä¿æŒé€€å‡º">æœ«è¡Œæ¨¡å¼ï¼ˆåº•è¡Œæ¨¡å¼ï¼‰â€“ä¿æŒé€€å‡º</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨ç¼–è¾‘å™¨çš„å·¦ä¸‹è§’è¿›è¡Œæ“ä½œ</span></span><br><span class="line">æ˜¾ç¤ºè¡Œå·ã€æœç´¢ã€æ›¿æ¢ã€ä¿å­˜ã€é€€å‡º ...</span><br><span class="line"><span class="comment"># è¿›å…¥æœ«è¡Œæ¨¡å¼çš„æ–¹æ³•</span></span><br><span class="line">1ï¼‰åœ¨å‘½ä»¤æ¨¡å¼ä¸‹ï¼Œè¾“å…¥å†’å·</span><br><span class="line">2ï¼‰åœ¨å‘½ä»¤æ¨¡å¼ä¸‹ï¼Œè¾“å…¥/</span><br><span class="line"><span class="comment">## ä¿å­˜é€€å‡º</span></span><br><span class="line">wï¼šwriteå†™å…¥ï¼ˆä¿å­˜</span><br><span class="line">qï¼šquité€€å‡º</span><br><span class="line">:w // åªä¿å­˜ä½†æ˜¯ä¸é€€å‡º</span><br><span class="line">:q // é€€å‡ºä½†ä¸ä¿å­˜ ï¼ˆæ²¡æœ‰æ”¹å†…å®¹ï¼‰</span><br><span class="line">:wq // ä¿å­˜é€€å‡º å¿«æ·é”® Shift + zz | ZZ</span><br><span class="line">:x // ä¿å­˜é€€å‡º å’Œ:wqç›¸ç­‰</span><br><span class="line">:q! // å¼ºåˆ¶é€€å‡º</span><br><span class="line">:w! // å¼ºåˆ¶ä¿å­˜</span><br><span class="line">:wq! // å¼ºåˆ¶ä¿å­˜å¹¶é€€å‡º</span><br><span class="line"><span class="comment">########### é”™è¯¯ ###########</span></span><br><span class="line">:qw // é”™è¯¯å†™æ³•ï¼Œå…ˆé€€å‡ºåä¿å­˜</span><br><span class="line">E37: No write since last change (add ! to override) // æ–‡ä»¶å†™å…¥å†…å®¹ï¼Œæ²¡æœ‰ä¿å­˜ï¼Œæ— æ³•ç›´æ¥é€€å‡ºï¼Œé™¤éå¼ºåˆ¶é€€å‡º</span><br><span class="line">E45: <span class="string">&#x27;readonly&#x27;</span> option is <span class="built_in">set</span> (add ! to override) // åªè¯»æ–‡ä»¶ï¼Œæ— æ³•ä¿å­˜é€€å‡ºï¼Œåªæœ‰rootç”¨æˆ·å¯ä»¥å¼ºåˆ¶ä¿å­˜é€€å‡º</span><br><span class="line">E212: Unable to open and write files // æ–‡ä»¶æ— æ³•å†™å…¥</span><br><span class="line">E212: Can<span class="string">&#x27;t open file for writing // æ–‡ä»¶æ— æ³•å†™å…¥ï¼Œå‡ºç°åŸå› ï¼š1.æ²¡æœ‰å†™å…¥æƒé™2.æ–‡ä»¶å†™å…¥åˆ°ä¸€ä¸ªä¸å­˜åœ¨çš„ç›®å½•ä¸­</span></span><br></pre></td></tr></table></figure><h3 id="æœ«è¡Œæ¨¡å¼â€”æœç´¢">æœ«è¡Œæ¨¡å¼â€”æœç´¢</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/æƒ³è¦æœç´¢çš„å†…å®¹</span><br><span class="line">nï¼šä¸‹ç¿»ï¼ŒæŸ¥æ‰¾ä¸‹ä¸€ä¸ª</span><br><span class="line">Nï¼šä¸Šç¿»ï¼ŒæŸ¥æ‰¾ä¸Šä¸€ä¸ª</span><br></pre></td></tr></table></figure><h3 id="æœ«è¡Œæ¨¡å¼â€”æ›¿æ¢">æœ«è¡Œæ¨¡å¼â€”æ›¿æ¢</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">:%s#è¦è¢«æ›¿æ¢çš„å†…å®¹#æ›¿æ¢çš„å†…å®¹#g</span><br><span class="line">%ï¼šæ‰€æœ‰è¡Œ</span><br><span class="line">sï¼šsearch æœç´¢</span><br><span class="line">gï¼šå…¨å±€æ›¿æ¢</span><br></pre></td></tr></table></figure><h3 id="æœ«è¡Œæ¨¡å¼â€”å…‰æ ‡è·³è½¬åŠå‘½ä»¤">æœ«è¡Œæ¨¡å¼â€”å…‰æ ‡è·³è½¬åŠå‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## æ˜¾ç¤ºè¡Œå·</span></span><br><span class="line">:<span class="built_in">set</span> number ç®€å†™ :<span class="built_in">set</span> nu</span><br><span class="line"><span class="comment">## å–æ¶ˆæ˜¾ç¤ºè¡Œå·</span></span><br><span class="line">:<span class="built_in">set</span> nonumber ç®€å†™ :<span class="built_in">set</span> nonu</span><br><span class="line"><span class="comment">## å…‰æ ‡è·³è½¬åˆ°æŒ‡å®šè¡Œ</span></span><br><span class="line">:N (Nä¸ºé˜¿æ‹‰ä¼¯æ•°å­—)</span><br><span class="line"><span class="comment">## å¿½ç•¥å¤§å°å†™</span></span><br><span class="line">:<span class="built_in">set</span> ic</span><br><span class="line"><span class="comment">## å–æ¶ˆå¿½ç•¥å¤§å°å†™</span></span><br><span class="line">:<span class="built_in">set</span> noic</span><br><span class="line"><span class="comment">## è‡ªåŠ¨ç¼©è¿›</span></span><br><span class="line">:<span class="built_in">set</span> ai</span><br><span class="line"><span class="comment">## å–æ¶ˆè‡ªåŠ¨ç¼©è¿›</span></span><br><span class="line">:<span class="built_in">set</span> noai</span><br><span class="line"><span class="comment">## æ˜¾ç¤ºåˆ¶è¡¨ç¬¦ï¼Œç»“æŸç¬¦...</span></span><br><span class="line">:<span class="built_in">set</span> list</span><br><span class="line"><span class="comment">## å–æ¶ˆ</span></span><br><span class="line">:<span class="built_in">set</span> nolist</span><br><span class="line"><span class="comment">## è®¾ç½®ç¯å¢ƒå˜é‡ åœ¨å½“å‰ç™»å½•ç”¨æˆ·çš„å®¶ç›®å½•ä¸‹ åˆ›å»ºä¸€ä¸ª .vimrc</span></span><br><span class="line"><span class="built_in">set</span> fenc=utf-8</span><br><span class="line"><span class="built_in">set</span> fencs=utf-8,usc-bom,euc-jp,gb18030,gbk,gb2312,cp936</span><br><span class="line"><span class="built_in">set</span> number</span><br><span class="line"><span class="built_in">set</span> autoindent</span><br><span class="line"><span class="built_in">set</span> smartindent</span><br><span class="line"><span class="built_in">set</span> tabstop=4</span><br><span class="line"><span class="built_in">set</span> shiftwidth=4</span><br><span class="line"><span class="built_in">set</span> ruler</span><br><span class="line"><span class="built_in">set</span> incsearch</span><br><span class="line"><span class="built_in">set</span> showmatch</span><br><span class="line"><span class="built_in">set</span> matchtime=10</span><br><span class="line"><span class="built_in">set</span> ignorecase</span><br><span class="line"><span class="built_in">set</span> cursorline</span><br><span class="line"><span class="built_in">set</span> t_Co=256</span><br><span class="line"><span class="comment">#è®¾å®šé»˜è®¤è§£ç </span></span><br><span class="line"><span class="built_in">set</span>?fenc=utf-8?</span><br><span class="line"><span class="built_in">set</span>?fencs=utf-8,usc-bom,euc-jp,gb18030,gbk,gb2312,cp936</span><br><span class="line"><span class="comment">#æ˜¾ç¤ºè¡Œå·</span></span><br><span class="line"><span class="built_in">set</span> number</span><br><span class="line"><span class="comment">#vimä½¿ç”¨è‡ªåŠ¨å¯¹é½ï¼Œä¹Ÿå°±æ˜¯æŠŠå½“å‰è¡Œçš„å¯¹é½æ ¼å¼åº”ç”¨åˆ°ä¸‹ä¸€è¡Œ</span></span><br><span class="line"><span class="built_in">set</span> autoindent </span><br><span class="line"><span class="comment">#ä¾æ®ä¸Šé¢çš„å¯¹é½æ ¼å¼ï¼Œæ™ºèƒ½çš„é€‰æ‹©å¯¹é½æ–¹å¼</span></span><br><span class="line"><span class="built_in">set</span> smartindent </span><br><span class="line"><span class="comment">#è®¾ç½®tabé”®ä¸º4ä¸ªç©ºæ ¼</span></span><br><span class="line"><span class="built_in">set</span> tabstop=4</span><br><span class="line"><span class="comment">#è®¾ç½®å½“è¡Œä¹‹é—´äº¤é”™æ—¶ä½¿ç”¨4ä¸ªç©ºæ ¼</span></span><br><span class="line"><span class="built_in">set</span> shiftwidth=4</span><br><span class="line"><span class="comment">#è®¾ç½®åœ¨ç¼–è¾‘è¿‡ç¨‹ä¸­,äºå³ä¸‹è§’æ˜¾ç¤ºå…‰æ ‡ä½ç½®çš„çŠ¶æ€è¡Œ</span></span><br><span class="line"><span class="built_in">set</span> ruler</span><br><span class="line"><span class="comment">#è®¾ç½®å¢é‡æœç´¢,è¿™æ ·çš„æŸ¥è¯¢æ¯”è¾ƒsmart</span></span><br><span class="line"><span class="built_in">set</span> incsearch </span><br><span class="line"><span class="comment">#é«˜äº®æ˜¾ç¤ºåŒ¹é…çš„æ‹¬å·</span></span><br><span class="line"><span class="built_in">set</span> showmatch </span><br><span class="line"><span class="comment">#åŒ¹é…æ‹¬å·é«˜äº®æ—¶é—´(å•ä½ä¸º 1/10 s)</span></span><br><span class="line"><span class="built_in">set</span> matchtime=10 </span><br><span class="line"><span class="comment">#åœ¨æœç´¢çš„æ—¶å€™å¿½ç•¥å¤§å°å†™</span></span><br><span class="line"><span class="built_in">set</span> ignorecase </span><br><span class="line"><span class="comment">#ç¦æ­¢ç”Ÿæˆä¸´æ—¶</span></span><br><span class="line"><span class="comment">#set nobackup </span></span><br><span class="line"><span class="comment">#å½“å‰è¡Œé«˜äº®</span></span><br><span class="line"><span class="built_in">set</span> cursorline </span><br><span class="line"><span class="comment">#æ”¯æŒ256è‰²</span></span><br><span class="line"><span class="built_in">set</span> t_Co=256</span><br></pre></td></tr></table></figure><h3 id="vimç¼–è¾‘å™¨å†™å…¥æµç¨‹">vimç¼–è¾‘å™¨å†™å…¥æµç¨‹</h3><p><img src="C:%5CUsers%5CDell%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Caaa.jpg" alt="aaa"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">å½“æˆ‘ä»¬åœ¨ä½¿ç”¨vimç¼–è¾‘æ–‡ä»¶æ—¶</span><br><span class="line">1ï¼‰é¦–å…ˆä¼šåœ¨æºæ–‡ä»¶ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª.swpçš„ä¸´æ—¶æ–‡ä»¶</span><br><span class="line">2ï¼‰å¦‚æœviméæ­£å¸¸é€€å‡ºçš„æƒ…å†µä¸‹ï¼Œè¯¥ä¸´æ—¶æ–‡ä»¶ä¸€ç›´å­˜åœ¨</span><br><span class="line">3ï¼‰ä¸‹ä¸€æ¬¡ç¼–è¾‘åˆ™ä¼šæç¤º</span><br><span class="line">[O]pen Read-Only, (E)dit anyway, (R)ecover, (Q)uit, (A)bort:</span><br><span class="line">åªè¯»æ¨¡å¼æ‰“å¼€ ç»§ç»­ç¼–è¾‘ è¦†ç›– é€€å‡º</span><br><span class="line">è§£å†³æ–¹æ¡ˆï¼š</span><br><span class="line">1ï¼‰æŸ¥çœ‹modifiedçŠ¶æ€ å¦‚æœæ˜¯<span class="built_in">yes</span>ï¼Œåˆ™éœ€è¦è¦†ç›–æºæ–‡ä»¶</span><br><span class="line">- vim -r /etc/sysconfig/network-scripts/ifcfg-ens33</span><br><span class="line">- vim /etc/sysconfig/network-scripts/ifcfg-ens3</span><br><span class="line">(R)ecover æŒ‰ r</span><br><span class="line">2ï¼‰åˆ é™¤.swpä¸´æ—¶æ–‡ä»¶å³å¯</span><br><span class="line"><span class="built_in">rm</span> -f /etc/sysconfig/network-scripts/.ifcfg-ens33.swp</span><br><span class="line">1ï¼‰æŸ¥çœ‹modifiedçŠ¶æ€ å¦‚æœæ˜¯noï¼Œåˆ™éœ€è¦è¦†ç›–æºæ–‡ä»¶</span><br><span class="line">(Q)uit æŒ‰qé€€å‡º</span><br><span class="line">2ï¼‰ç›´æ¥åˆ é™¤.swpä¸´æ—¶æ–‡ä»¶</span><br><span class="line"><span class="built_in">rm</span> -f /etc/sysconfig/network-scripts/.ifcfg-ens33.swp</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="è§†å›¾æ¨¡å¼ï¼ˆå‘½ä»¤æ¨¡å¼ï¼‰">è§†å›¾æ¨¡å¼ï¼ˆå‘½ä»¤æ¨¡å¼ï¼‰</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">å—è§†å›¾æ¨¡å¼ -- VISUAL BLOCK -- Ctrl + v</span><br><span class="line"><span class="comment"># æ‰¹é‡æ³¨é‡Š</span></span><br><span class="line">1ï¼‰Ctrl + v è¿›å…¥å—è§†å›¾æ¨¡å¼</span><br><span class="line">2ï¼‰æŒ‰é”®ç›˜çš„ä¸Šä¸‹å·¦å³ï¼Œé€‰ä¸­æƒ³è¦çš„å†…å®¹</span><br><span class="line">3ï¼‰å¦‚æœæ˜¯åœ¨è¡Œå‰åŠ å…¥å†…å®¹ï¼ŒShift + i</span><br><span class="line">4ï¼‰å¦‚æœæ˜¯åœ¨è¡ŒååŠ å…¥å†…å®¹ï¼ŒShift + a</span><br><span class="line">5ï¼‰è¾“å…¥æƒ³è¦çš„å†…å®¹åï¼Œè¿”å›å‘½ä»¤æ¨¡å¼ï¼ˆESCï¼‰</span><br><span class="line">è¡Œè§†å›¾æ¨¡å¼ -- VISUAL LINE -- Shit + v</span><br></pre></td></tr></table></figure><h3 id="vimæ‰©å±•çŸ¥è¯†">vimæ‰©å±•çŸ¥è¯†</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## ç¼–è¾‘æ–‡ä»¶ç›´æ¥è·³è½¬åˆ°æŒ‡å®šè¡Œ</span></span><br><span class="line">[root@localhost ~]# vim +N 1.txt // Nä¸ºé˜¿æ‹‰ä¼¯æ•°å­—</span><br><span class="line">[root@localhost ~]# vim +3 1.txt</span><br><span class="line"><span class="comment">## å¯¹æ¯”æ–‡ä»¶ä¸åŒä¹‹å¤„</span></span><br><span class="line">[root@localhost ~]# vimdiff 1.txt 2.txt</span><br><span class="line">[root@localhost ~]# diff 1.txt 3.txt</span><br><span class="line">3,6c3,6</span><br><span class="line">&lt; http://pxost.baidu.com/index.html</span><br><span class="line">&lt; http://mp3.baiadu.com/index.html</span><br><span class="line">&lt; http://www.baidu.com/3.html</span><br><span class="line">&lt; http://post.baidxu.com/2.html</span><br><span class="line">---</span><br><span class="line">&gt; http:aaaaa//pxost.baidu.com/index.html</span><br><span class="line">&gt; http://mp3xxx.baiadu.com/index.html</span><br><span class="line">&gt; http://www.baxxidu.com/3.html</span><br><span class="line">&gt; http://post.baixxdxu.com/2.html</span><br><span class="line"><span class="comment">## åŒæ—¶ç¼–è¾‘å¤šä¸ªæ–‡ä»¶ ï¼ˆä½¿ç”¨Ctrl + ww è¿›è¡Œåˆ‡æ¢ï¼‰</span></span><br><span class="line">[root@localhost ~]# vim -o 1.txt 2.txt // æ°´å¹³æ‹†åˆ†</span><br><span class="line">[root@localhost ~]# vim -O 1.txt 2.txt // å‚ç›´æ‹†åˆ†</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linuxæ•²é—¨ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>03.ç³»ç»Ÿå‘½ä»¤</title>
      <link href="/posts/f8f45c19.html"/>
      <url>/posts/f8f45c19.html</url>
      
        <content type="html"><![CDATA[<div class='wow animate__heartBeat' data-wow-duration='' data-wow-delay='1s' data-wow-offset=''  data-wow-iteration='2' ><div class="note red icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p><a href="https://www.lukeme.top/posts/4c7367cf.html">å‘Šåˆ«å°ç™½ï¼Œç‚¹å‡»ç›´è¾¾</a></p></div></div><h3 id="ç”¨æˆ·ç®¡ç†">ç”¨æˆ·ç®¡ç†</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##Linuxä¸‹çš„ç”¨æˆ·æœ‰ä»€ä¹ˆä½œç”¨</span></span><br><span class="line">1ï¼‰ç³»ç»Ÿä¸Šçš„æ¯ä¸€ä¸ªè¿›ç¨‹(è¿è¡Œçš„ç¨‹åº)éƒ½éœ€è¦ç‰¹å®šçš„ç”¨æˆ·è¿è¡Œ</span><br><span class="line">2ï¼‰æ¯ä¸€ä¸ªæ–‡ä»¶éƒ½æœ‰ç‰¹å®šçš„ç”¨æˆ·æ‹¥æœ‰ï¼Œæ‰€ä»¥è®¿é—®ä¸€ä¸ªæ–‡ä»¶æˆ–ç›®å½•å—åˆ°ç”¨æˆ·çš„é™åˆ¶</span><br><span class="line">3ï¼‰è¿›ç¨‹èƒ½å¤Ÿä»¥ä½•ç§æ–¹å¼è®¿é—®æŸä¸€ä¸ªæ–‡ä»¶æˆ–ç›®å½•, ä¸è¿›ç¨‹æ‰€å…³è”çš„ç”¨æˆ·æœ‰å…³</span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/image-20240409145014306.png" alt="image-20240409145014306"></p><h3 id="ç”¨æˆ·ç›¸å…³æŸ¥çœ‹å‘½ä»¤">ç”¨æˆ·ç›¸å…³æŸ¥çœ‹å‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¯­æ³•</span></span><br><span class="line"><span class="built_in">id</span> [option] [user]</span><br><span class="line"><span class="built_in">id</span> [é€‰é¡¹] [ç”¨æˆ·å]</span><br><span class="line">[root@localhost ~]# <span class="built_in">id</span></span><br><span class="line">uid=0(root) gid=0(root) <span class="built_in">groups</span>=0(root)</span><br><span class="line">uidï¼šuser <span class="built_in">id</span>å·</span><br><span class="line">gidï¼šgroup <span class="built_in">id</span>å·</span><br><span class="line"><span class="built_in">groups</span>ï¼šç»„å</span><br><span class="line"><span class="comment">## åªæ˜¾ç¤ºuid</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">id</span> -u root</span><br><span class="line">0</span><br><span class="line"><span class="comment">## åªæ˜¾ç¤ºgid</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">id</span> -g root</span><br><span class="line">0</span><br><span class="line">ç³»ç»Ÿåªè®¤uidï¼Œç”¨æˆ·åæ˜¯ç»™è¿ç»´äººå‘˜çœ‹çš„</span><br><span class="line">åœ¨Linuxç³»ç»Ÿä¸­ï¼Œuidä¸º0çš„ç”¨æˆ·æ‰æ˜¯è¶…çº§ç”¨æˆ·</span><br><span class="line"><span class="comment">## æŸ¥çœ‹ç”¨æˆ·ç™»å½•å“ªä¸ªç»ˆç«¯ï¼Œç™»å½•æ—¶é—´   who</span></span><br><span class="line">root     tty1         2024-04-09 14:54</span><br><span class="line">root     pts/0        2024-04-09 11:09 (10.0.0.1)</span><br><span class="line">root     pts/1        2024-04-09 11:33 (10.0.0.1)</span><br><span class="line"><span class="built_in">tty</span>ä»£è¡¨çš„æ˜¯æœåŠ¡å™¨ç»ˆç«¯ç™»å½•</span><br><span class="line">ptsä»£è¡¨çš„æ˜¯è¿œç¨‹é“¾æ¥å·¥å…·ç™»å½•</span><br><span class="line">[root@localhost ~]# <span class="built_in">whoami</span><span class="comment">## æŸ¥çœ‹å½“å‰ç™»å½•çš„ç”¨æˆ·å</span></span><br><span class="line">root</span><br><span class="line"><span class="comment">## æŸ¥çœ‹ç”¨æˆ·ä¿¡æ¯æ–‡ä»¶</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> /etc/passwd</span><br></pre></td></tr></table></figure><h3 id="ç”¨æˆ·ä¿¡æ¯æ–‡ä»¶-etc-passwd">ç”¨æˆ·ä¿¡æ¯æ–‡ä»¶ /etc/passwd</h3><p><img src="https://cos.lukme.top/Pic/image-20240409145743758.png" alt="image-20240409145743758"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## ä»¥å†’å·ä¸ºåˆ†éš”ç¬¦çš„æƒ…å†µä¸‹ï¼Œæ–‡ä»¶è¢«åˆ†ä¸º7åˆ—</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">cat</span> /etc/passwd</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"><span class="built_in">sync</span>:x:5:0:<span class="built_in">sync</span>:/sbin:/bin/sync</span><br><span class="line"></span><br><span class="line">[zls@localhost ~]# useradd wyl -c <span class="string">&#x27;abc&#x27;</span>  æ·»åŠ å¤‡æ³¨</span><br><span class="line"></span><br><span class="line">ç¬¬ä¸€åˆ—ï¼šç”¨æˆ·å</span><br><span class="line">ç¬¬äºŒåˆ—ï¼šå¯†ç å ä½ç¬¦</span><br><span class="line">ç¬¬ä¸‰åˆ—ï¼šç”¨æˆ·çš„uid</span><br><span class="line">ç¬¬å››åˆ—ï¼šç”¨æˆ·æ‰€åœ¨ç»„çš„gid</span><br><span class="line">ç¬¬äº”åˆ—ï¼šç”¨æˆ·çš„æè¿°ä¿¡æ¯ï¼ˆå¤‡æ³¨ã€æ³¨é‡Šï¼‰</span><br><span class="line">ç¬¬å…­åˆ—ï¼šç”¨æˆ·å®¶ç›®å½•æ‰€åœ¨è·¯å¾„</span><br><span class="line">ç¬¬ä¸ƒåˆ—ï¼šç”¨æˆ·ç™»å½•ä½¿ç”¨çš„bash</span><br><span class="line"><span class="comment">##  /sbin/nologin ä¸å…è®¸ç™»å½•çš„ç”¨æˆ· bash</span></span><br></pre></td></tr></table></figure><h3 id="ç”¨æˆ·å¯†ç å­˜æ”¾æ–‡ä»¶-etc-shadow">ç”¨æˆ·å¯†ç å­˜æ”¾æ–‡ä»¶/etc/shadow</h3><p><img src="https://cos.lukme.top/Pic/image-20240409150039322.png" alt="image-20240409150039322"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">daemon:*:17834:0:99999:7:2:6627567:</span><br><span class="line">ç¬¬ä¸€åˆ—ï¼šç”¨æˆ·å</span><br><span class="line">ç¬¬äºŒåˆ—ï¼šå¯†ç    *å’Œ!! ä»£è¡¨æ²¡æœ‰å¯†ç </span><br><span class="line">ç¬¬ä¸‰åˆ—ï¼šå¯†ç ä¿®æ”¹çš„æ—¶é—´ ä»1970å¹´å¼€å§‹è®¡ç®—åˆ°ä¸Šä¸€æ¬¡å˜æ›´å¯†ç çš„æ—¶é—´è¿‡äº†å¤šå°‘å¤©</span><br><span class="line">ç¬¬å››åˆ—ï¼šå¯†ç æœ€å°‘ä½¿ç”¨å¤©æ•° 0ä»£è¡¨æ— é™åˆ¶</span><br><span class="line">ç¬¬äº”åˆ—ï¼šå¯†ç æœ€é•¿ä½¿ç”¨å¤©æ•° 99999ä»£è¡¨æ— é™åˆ¶</span><br><span class="line">ç¬¬å…­åˆ—ï¼šå¯†ç åˆ°æœŸä¹‹å‰å¤šå°‘å¤©å¼€å§‹æé†’ æå‰7å¤©æé†’éœ€è¦æ”¹å¯†ç äº†</span><br><span class="line">ç¬¬ä¸ƒåˆ—ï¼šå¯†ç è¿‡æœŸåNå¤©å¼ºåˆ¶å˜æ›´å¯†ç  å¯†ç è¿‡æœŸå2å¤©ï¼Œå¼ºåˆ¶æ”¹å¯†ç </span><br><span class="line">ç¬¬å…«åˆ—ï¼šè´¦æˆ·å¤±æ•ˆæ—¶é—´ï¼Œä»1970å¹´å¼€å§‹è®¡ç®—å¤šå°‘å¤©</span><br><span class="line">ç¬¬ä¹åˆ—ï¼šç©º ä¿ç•™åˆ—</span><br></pre></td></tr></table></figure><p>ç»ƒä¹ åˆ›å»º1000ä¸ªç”¨æˆ·ï¼Œå¯†ç éƒ½ä¸º1</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;1&#x27;</span> |passwd --stdin lgj</span><br><span class="line"></span><br><span class="line">ï¼›åˆ†å·å¯ä»¥è¡”æ¥å¤šä¸ªå‘½ä»¤æ‰§è¡Œï¼Œ</span><br><span class="line">&amp;&amp;è¡”æ¥å¤šä¸ªå‘½ä»¤ï¼Œä½†æ˜¯éœ€è¦åˆ¤æ–­å‰é¢çš„å‘½ä»¤æ‰§è¡ŒæˆåŠŸåï¼Œå†æ‰§è¡Œåé¢çš„å‘½ä»¤</span><br><span class="line"><span class="comment">#è¡”æ¥å‘½ä»¤</span></span><br><span class="line">useradd lgj1;<span class="built_in">echo</span> <span class="string">&quot;1&quot;</span> | passwd --stdin lgj1  ==&gt;;åˆ†å·ä¸¤è¾¹åˆ†åˆ«æ‰§è¡Œç»“æœ</span><br><span class="line"></span><br><span class="line">[root@lb01 ~]# <span class="built_in">seq</span> 1000|awk <span class="string">&#x27;&#123;print &quot;useradd lgj&quot;$1&quot;;echo 1|passwd --stdin lgj&quot;$1&#125;&#x27;</span>|bash</span><br><span class="line"></span><br><span class="line"><span class="comment">#è„šæœ¬</span></span><br><span class="line">vim useradd.sh</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..1000&#125;; <span class="keyword">do</span></span><br><span class="line">  username=<span class="string">&quot;lgj<span class="variable">$i</span>&quot;</span></span><br><span class="line">  useradd <span class="variable">$username</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;1&quot;</span> | passwd --stdin <span class="variable">$username</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">è¿è¡Œshæ–‡ä»¶</span><br><span class="line">sh useradd.sh &gt; /dev/null</span><br></pre></td></tr></table></figure><h3 id="Linuxç³»ç»Ÿä¸­ç”¨æˆ·çš„çº¦å®šå’Œè§„èŒƒ">Linuxç³»ç»Ÿä¸­ç”¨æˆ·çš„çº¦å®šå’Œè§„èŒƒ</h3><table><thead><tr><th style="text-align:center"></th><th style="text-align:center">centOS7</th><th style="text-align:center"></th><th style="text-align:center">centOS7</th></tr></thead><tbody><tr><td style="text-align:center">ç”¨æˆ·UID</td><td style="text-align:center">ä½œç”¨</td><td style="text-align:center">ç”¨æˆ·UID</td><td style="text-align:center">ä½œç”¨</td></tr><tr><td style="text-align:center">0</td><td style="text-align:center">ç³»ç»Ÿç®¡ç†å‘˜ï¼ˆè¶…çº§ç”¨æˆ·ï¼‰</td><td style="text-align:center">0</td><td style="text-align:center">ç³»ç»Ÿç®¡ç†å‘˜ï¼ˆè¶…çº§ç”¨æˆ·ï¼‰</td></tr><tr><td style="text-align:center">1-200</td><td style="text-align:center">ç³»ç»Ÿç”¨æˆ·ï¼Œç”±ç³»ç»Ÿåˆ†é…ç»™è¿›ç¨‹ä½¿ç”¨</td><td style="text-align:center">1-500</td><td style="text-align:center">ç³»ç»Ÿç”¨æˆ·ï¼Œç”±ç³»ç»Ÿåˆ†é…ç»™è¿›ç¨‹ä½¿ç”¨è¿è¡ŒæœåŠ¡ï¼Œä¸éœ€è¦ç™»å½•ç³»ç»Ÿ</td></tr><tr><td style="text-align:center">201-999</td><td style="text-align:center">ç³»ç»Ÿç”¨æˆ·ï¼Œè¿è¡ŒæœåŠ¡ï¼Œä¸éœ€è¦ç™»å½•ç³»ç»Ÿ</td><td style="text-align:center">500+</td><td style="text-align:center">å¸¸è§„çš„æ™®é€šç”¨æˆ·</td></tr><tr><td style="text-align:center">1000+</td><td style="text-align:center">å¸¸è§„çš„æ™®é€šç”¨æˆ·</td><td style="text-align:center"><strong>/</strong></td><td style="text-align:center"><strong>/</strong></td></tr></tbody></table><h3 id="ä¿®æ”¹ç”¨æˆ·å¯†ç ç›¸å…³ä¿¡æ¯-chage-ï¼ˆäº†è§£ï¼‰">ä¿®æ”¹ç”¨æˆ·å¯†ç ç›¸å…³ä¿¡æ¯ chage   ï¼ˆäº†è§£ï¼‰</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">bin:*:17834:0:99999:7:10::</span><br><span class="line">-d //è®¾ç½®æœ€è¿‘ä¸€æ¬¡æ›´æ”¹å¯†ç æ—¶é—´, 0ä¸‹æ¬¡ç™»é™†ç³»ç»Ÿå¼ºåˆ¶ä¿®æ”¹å¯†ç  // /etc/shadow ç¬¬ä¸‰åˆ—</span><br><span class="line">-m //è®¾ç½®ç”¨æˆ·ä¸¤æ¬¡æ”¹å˜å¯†ç ä¹‹é—´ä½¿ç”¨<span class="string">&quot;æœ€å°å¤©æ•°&quot;</span> // /etc/shadow ç¬¬å››åˆ—</span><br><span class="line">-M //è®¾ç½®ç”¨æˆ·ä¸¤æ¬¡æ”¹å˜å¯†ç ä¹‹é—´ä½¿ç”¨<span class="string">&quot;æœ€å¤§å¤©æ•°&quot;</span> // /etc/shadow ç¬¬äº”åˆ—</span><br><span class="line">-W //è®¾ç½®å¯†ç æ›´æ”¹è­¦å‘Šæ—¶é—´ å°†è¿‡æœŸè­¦å‘Šå¤©æ•°è®¾ä¸ºâ€œè­¦å‘Šå¤©æ•°â€ // /etc/shadow ç¬¬å…­åˆ—</span><br><span class="line">-I //è®¾ç½®å¯†ç è¿‡æœŸå¤©æ•°å, å¯†ç ä¸ºå¤±æ•ˆçŠ¶æ€ // /etc/shadow ç¬¬ä¸ƒåˆ—</span><br><span class="line">-E //è®¾ç½®ç”¨æˆ·è¿‡æœŸæ—¶é—´, è´¦æˆ·å¤±æ•ˆåæ— æ³•ç™»é™† // /etc/shadow ç¬¬å…«åˆ—</span><br><span class="line">-l //æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯</span><br><span class="line">[root@lgj ~]# chage -l lgj</span><br><span class="line">Last password change : Sep 01, 2014    //æœ€è¿‘ä¸€æ¬¡æ›´æ”¹å¯†ç æ—¶é—´</span><br><span class="line">Password expires : Sep 16, 2014    //å¯†ç è¿‡æœŸæ—¶é—´</span><br><span class="line">Password inactive : Sep 21, 2014    //å¯†ç å¤±æ•ˆæ—¶é—´</span><br><span class="line">Account expires : Aug 31, 2015   //ç”¨æˆ·å¤±æ•ˆæ—¶é—´</span><br><span class="line">Minimum number of days between password change : 2 //å¯†ç æœ€çŸ­ä½¿ç”¨æ—¶é—´</span><br><span class="line">Maximum number of days between password change : 15 //å¯†ç æœ€é•¿ä½¿ç”¨æ—¶é—´</span><br><span class="line">Number of days of warning before password expires : 7 //å¯†ç è¿‡æœŸå‰è­¦å‘Šå¤©æ•°</span><br></pre></td></tr></table></figure><h3 id="ç”¨æˆ·ç›¸å…³å‘½ä»¤â€“åˆ›å»ºç”¨æˆ·ï¼ˆå¢ï¼‰">ç”¨æˆ·ç›¸å…³å‘½ä»¤â€“åˆ›å»ºç”¨æˆ·ï¼ˆå¢ï¼‰</h3><table><thead><tr><th style="text-align:center">é€‰é¡¹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td style="text-align:center">-u</td><td>æŒ‡å®šuid</td></tr><tr><td style="text-align:center">-g</td><td>æŒ‡å®šgidï¼ˆå¿…é¡»æŒ‡å®šä¸€ä¸ªå·²å­˜åœ¨çš„ç»„ï¼‰</td></tr><tr><td style="text-align:center">-c</td><td>æŒ‡å®šç”¨æˆ·çš„å¤‡æ³¨ï¼ˆæ³¨é‡Šï¼‰</td></tr><tr><td style="text-align:center">-d</td><td>æŒ‡å®šç”¨æˆ·çš„å®¶ç›®å½•</td></tr><tr><td style="text-align:center">-M</td><td>ä¸åˆ›å»ºå®¶ç›®å½•</td></tr><tr><td style="text-align:center">-s</td><td>æŒ‡å®šç”¨æˆ·ç™»å½•çš„shell</td></tr><tr><td style="text-align:center">-G</td><td>æŒ‡å®šé™„åŠ ç»„</td></tr><tr><td style="text-align:center">-r</td><td>åˆ›å»ºä¸€ä¸ªç”¨æˆ·uidåœ¨200 - 999ä¹‹é—´</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨useraddåˆ›å»ºç”¨æˆ·å°†å½±å“åˆ°å››ä¸ªæ–‡ä»¶</span><br><span class="line">/etc/passwdå­˜æ”¾ç”¨æˆ·åç­‰ä¿¡æ¯</span><br><span class="line">/etc/shadowå­˜æ”¾å¯†ç ç­‰ä¿¡æ¯</span><br><span class="line">/etc/groupå­˜æ”¾ç»„ä¿¡æ¯</span><br><span class="line">/etc/gshadowå­˜æ”¾ç»„å¯†ç ä¿¡æ¯</span><br><span class="line"></span><br><span class="line">å¦‚æœæ‰‹åŠ¨åˆ›å»ºç”¨æˆ·ä¸ä½¿ç”¨å‘½ä»¤ï¼Œéœ€è¦åˆ†åˆ«åœ¨1./etc/passwd  2./etc/shadow  3./etc/group  4./etc/gshadowåˆ›å»ºç”¨æˆ·åç»„ç­‰ä¿¡æ¯ï¼Œ5.åˆ›å»ºç”¨æˆ·åçš„å®¶ç›®å½•6.æ‹·è´ç¯å¢ƒå˜é‡æ–‡ä»¶<span class="built_in">cp</span> /etc/skel/.bash* /home/abc111/</span><br><span class="line"></span><br><span class="line"><span class="comment">##åˆ›å»ºç”¨æˆ·å‘½ä»¤ useradd</span></span><br><span class="line">useradd [é€‰é¡¹]... ç”¨æˆ·å</span><br><span class="line"></span><br><span class="line">åˆ›å»ºç”¨æˆ·åæ˜¯lgj2 uid1004 ç”¨æˆ·ç»„1001 å¤‡æ³¨-cæ˜¯é«˜æ°å¤§å¤§   <span class="comment">#//å…¶ä¸­-gæŒ‡å®šgidéœ€è¦æŒ‡å®šå·²ç»å­˜åœ¨çš„uid</span></span><br><span class="line">[root@lb01 ~]# useradd -u 1004 -g 1001 -c é«˜æ°å¤§å¤§ lgj2</span><br><span class="line"></span><br><span class="line">-dåˆ›å»ºç”¨æˆ·lgj6å¹¶æŒ‡å®šå®¶ç›®å½•ï¼ˆå¦‚æœæŒ‡å®šçš„å®¶ç›®å½•å·²ç»å­˜åœ¨ï¼Œå¦‚æŒ‡å®šaaaï¼ˆå­˜åœ¨ï¼‰ä¸ºå®¶ç›®å½•ï¼Œä¼šæŠ¥é”™ç›®å½•å®¶ç›®å½•å·²ç»å­˜åœ¨ï¼Œä½†æ˜¯è¿˜æ˜¯ä¼šåˆ›å»ºæœ‰lgj6ç”¨æˆ·ï¼Œä½†æ˜¯æ²¡æœ‰ç¯å¢ƒå˜é‡ï¼‰</span><br><span class="line">[root@lb01 ~]# useradd lgj6 -d /root/aaa/lgj666</span><br><span class="line">[root@lb01 ~]# useradd lgj7 -M   ä¸åˆ›å»ºå®¶ç›®å½•</span><br><span class="line"></span><br><span class="line"><span class="comment">## æŒ‡å®šç”¨æˆ·é™„åŠ ç»„</span></span><br><span class="line">[root@lb01 ~]# useradd lgj7 -G 1001,1005</span><br><span class="line">[root@lb01 ~]# useradd lgj8 -G lgj,lgj5    åŒæ ·æŒ‡å®šçš„ç»„éœ€è¦å·²å­˜åœ¨</span><br><span class="line">[root@lb01 ~]# <span class="built_in">id</span> lgj7</span><br><span class="line">uid=1007(lgj7) gid=1007(lgj7) <span class="built_in">groups</span>=1007(lgj7),1001(lgj),1005(lgj5)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ç”¨æˆ·ç›¸å…³å‘½ä»¤â€“ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯ï¼ˆæ”¹ï¼‰">ç”¨æˆ·ç›¸å…³å‘½ä»¤â€“ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯ï¼ˆæ”¹ï¼‰</h3><table><thead><tr><th>ç”¨æˆ·</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>-u</td><td>æŒ‡å®šç”¨æˆ·çš„uid</td></tr><tr><td>-g</td><td>æŒ‡å®šç”¨æˆ·çš„gidï¼Œæ›´æ¢ç”¨æˆ·æ‰€åœ¨çš„ä¸»ç»„ï¼ˆæŒ‡å®šçš„ç»„å¿…é¡»å­˜åœ¨ï¼‰</td></tr><tr><td>-c</td><td>ä¿®æ”¹å¤‡æ³¨ä¿¡æ¯</td></tr><tr><td>-d</td><td>ä¿®æ”¹ç”¨æˆ·å®¶ç›®å½•ï¼Œä¿®æ”¹/etc/passwdæ–‡ä»¶å†…å®¹</td></tr><tr><td>-m</td><td>é…åˆ-dé€‰é¡¹ï¼Œä¿®æ”¹å®Œå®¶ç›®å½•åï¼Œè¿ç§»å®¶ç›®å½•</td></tr><tr><td>-s</td><td>ä¿®æ”¹ç”¨æˆ·ç™»å½•çš„shell</td></tr><tr><td>-G</td><td>ä¿®æ”¹ç”¨æˆ·çš„é™„åŠ ç»„ï¼Œä¼šæ›¿æ¢åŸæ¥çš„é™„åŠ ç»„</td></tr><tr><td>-a</td><td>ä¿®æ”¹ç”¨æˆ·çš„é™„åŠ ç»„ï¼Œé…åˆ-Gä½¿ç”¨ï¼Œè¿½åŠ é™„åŠ ç»„</td></tr><tr><td>-L</td><td>é”å®šç”¨æˆ·ï¼ˆå°å·ï¼‰</td></tr><tr><td>-U</td><td>è§£é”ç”¨æˆ·ï¼ˆè§£å°ï¼‰</td></tr><tr><td>-l</td><td>ä¿®æ”¹ç”¨æˆ·å</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## user modify</span></span><br><span class="line">usermod [é€‰é¡¹]... ç”¨æˆ·å</span><br><span class="line"></span><br><span class="line">ä¿®æ”¹ç”¨æˆ·lgj2çš„uidä¸º1002ï¼Œgidä¸º1000ï¼Œå¤‡æ³¨ä¿¡æ¯æ˜¯ä½ å¥½   <span class="comment">#æŒ‡å®šçš„gidéœ€è¦å·²å­˜åœ¨</span></span><br><span class="line">[root@lb01 ~]# usermod  lgj2 -u 1002 -g 1000 -c ä½ å¥½ </span><br><span class="line"></span><br><span class="line"><span class="comment">## ä¿®æ”¹ç”¨æˆ·å®¶ç›®å½• æ³¨æ„ï¼šä¸èƒ½åªä½¿ç”¨-d</span></span><br><span class="line">[root@localhost ~]# usermod zls000 -d /home/zls000å®¶ç›®å½•ä¸‹çš„ç¯å¢ƒå˜é‡ä¸ä¼šè¿ç§»è¿‡å»</span><br><span class="line">[root@localhost ~]# usermod zls66 -m -d /opt/zls666   éœ€è¦é…åˆ-mä½¿ç”¨</span><br><span class="line"></span><br><span class="line">å¦‚æœlgj2ä¸»è¦ç»„ä¸åœ¨lgj2é‡Œï¼ˆé€šè¿‡usermodä¿®æ”¹äº†ï¼‰ï¼Œé‚£ä¹ˆä½¿ç”¨userdelåˆ é™¤ç”¨æˆ·çš„æ—¶å€™lgj2ç”¨æˆ·ç»„ä¸ä¼šè¢«åˆ é™¤ï¼Œä¼šæé†’lgj2ç”¨æˆ·çš„ç°åœ¨ç”¨æˆ·ç»„ä¸æ˜¯lgj2çš„ä¸»è¦ç»„</span><br><span class="line"></span><br><span class="line">[root@lb01 ~]# usermod lgj -G 0   ä¿®æ”¹lgjçš„é™„åŠ ç»„ï¼ˆè¦†ç›–åŸæœ‰çš„ï¼‰</span><br><span class="line">[root@lb01 ~]# usermod lgj -aG 100ï¼Œ110   ä¿®æ”¹lgjçš„é™„åŠ ç»„ï¼ˆè¿½åŠ ç”¨æˆ·ç»„ï¼‰</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¿®æ”¹ç”¨æˆ·ç™»å½•çš„shell</span></span><br><span class="line">[root@lb01 ~]# usermod lgj -s /sbin/nologin</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¿®æ”¹ç”¨æˆ·å</span></span><br><span class="line">[root@lb01 ~]# usermod lgj1 -l lgj2  </span><br><span class="line">å¦‚æœä¿®æ”¹å®Œå°†æé†’æ—§çš„é‚®ç®±lgj1å°†ä¸å±äºlgj1ç”¨æˆ·äº†ï¼Œvar/spool/mail/</span><br></pre></td></tr></table></figure><h3 id="ç”¨æˆ·ç›¸å…³å‘½ä»¤â€“åˆ é™¤ç”¨æˆ·ï¼ˆåˆ ï¼‰">ç”¨æˆ·ç›¸å…³å‘½ä»¤â€“åˆ é™¤ç”¨æˆ·ï¼ˆåˆ ï¼‰</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># user delete</span></span><br><span class="line">userdel [é€‰é¡¹]... ç”¨æˆ·å</span><br><span class="line"><span class="comment">## ç›´æ¥åˆ é™¤ç”¨æˆ·ï¼Œç±»ä¼¼äºåœ¨/etc/passwdæ–‡ä»¶ä¸­æŠŠè¯¥ç”¨æˆ·è¡Œä¿¡æ¯åˆ é™¤ï¼ˆå®¶ç›®å½•è¿˜åœ¨å’Œæ‰€æœ‰ç”¨æˆ·ç›¸å…³æ–‡ä»¶éƒ½åœ¨ï¼‰</span></span><br><span class="line">[root@localhost ~]# userdel abd</span><br><span class="line"><span class="comment">## é€’å½’åˆ é™¤ç”¨æˆ·åŠç”¨æˆ·æ‰€æœ‰ç›¸å…³æ–‡ä»¶</span></span><br><span class="line">[root@localhost ~]# userdel -r wyl</span><br><span class="line"></span><br><span class="line"><span class="comment">## å› ä¸ºç”¨æˆ·åˆ›å»ºæ—¶æ²¡æœ‰åˆ›å»ºå®¶ç›®å½•ï¼Œæ‰€ä»¥ä¼šæœ‰æç¤ºï¼Œä½†æ˜¯ç”¨æˆ·å®é™…ä¸Šè¿˜æ˜¯è¢«åˆ é™¤äº†</span></span><br><span class="line">[root@localhost ~]# userdel -r zls888</span><br><span class="line">userdel: zls888 home directory (/home/zls888) not found</span><br></pre></td></tr></table></figure><hr><h3 id="ç”¨æˆ·æ‰©å±•çŸ¥è¯†">ç”¨æˆ·æ‰©å±•çŸ¥è¯†</h3><p>åˆ›å»ºç”¨æˆ·æ—¶å€™ä¼šä»¥ä¸‹ä¸¤ä¸ªæ–‡ä»¶ä½œä¸ºå‚ç…§ç‰©</p><p>/etc/login.defs</p><p>/etc/defaults/useradd</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## åˆ›å»ºç”¨æˆ·æ—¶ï¼Œuseraddå‘½ä»¤éœ€è¦è¯»å–çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">è¿‡æ»¤ä¸éœ€è¦çš„ç©ºè¡Œ</span><br><span class="line">[root@localhost ~]# grep -i <span class="string">&#x27;^[a-z]&#x27;</span> /etc/login.defs </span><br><span class="line">[root@localhost ~]# grep -Ev <span class="string">&#x27;^$|^#&#x27;</span> /etc/login.defs</span><br><span class="line"><span class="comment">## ç”¨æˆ·å­˜æ”¾é‚®ä»¶çš„ç›®å½•</span></span><br><span class="line">MAIL_DIR/var/spool/mail</span><br><span class="line"><span class="comment">## ç”¨æˆ·é»˜è®¤å¯†ç æœ€é•¿ä½¿ç”¨å¤©æ•°</span></span><br><span class="line">PASS_MAX_DAYS 99999</span><br><span class="line"><span class="comment">## ç”¨æˆ·é»˜è®¤å¯†ç æœ€çŸ­ä½¿ç”¨å¤©æ•°</span></span><br><span class="line">PASS_MIN_DAYS 0</span><br><span class="line"><span class="comment">## å¯†ç æœ€å°é•¿åº¦5ä½æ•°</span></span><br><span class="line">PASS_MIN_LEN 5</span><br><span class="line"><span class="comment">## å¯†ç å¿«è¿‡æœŸåï¼Œæå‰7å¤©æé†’</span></span><br><span class="line">PASS_WARN_AGE 7</span><br><span class="line"><span class="comment">## æ™®é€šç”¨æˆ·æœ€å°UID</span></span><br><span class="line">UID_MIN 1000</span><br><span class="line"><span class="comment">## æ™®é€šç”¨æˆ·æœ€å¤§UID</span></span><br><span class="line">UID_MAX 60000</span><br><span class="line"><span class="comment">## ç³»ç»Ÿç”¨æˆ·æœ€å°UID</span></span><br><span class="line">SYS_UID_MIN 201</span><br><span class="line"><span class="comment">## ç³»ç»Ÿç”¨æˆ·æœ€å¤§UID</span></span><br><span class="line">SYS_UID_MAX 999</span><br><span class="line"><span class="comment">## ç»„æœ€å°ID</span></span><br><span class="line">GID_MIN 1000</span><br><span class="line"><span class="comment">## ç»„æœ€å¤§ID</span></span><br><span class="line">GID_MAX 60000</span><br><span class="line"><span class="comment">## ç³»ç»Ÿç»„æœ€å°ID</span></span><br><span class="line">SYS_GID_MIN 201</span><br><span class="line"><span class="comment">## ç³»ç»Ÿç»„æœ€å¤§ID</span></span><br><span class="line">SYS_GID_MAX 999</span><br><span class="line"><span class="comment">## é»˜è®¤æƒ…å†µä¸‹ï¼Œåˆ›å»ºç”¨æˆ·ä¼šåˆ›å»ºè¯¥ç”¨æˆ·çš„å®¶ç›®å½•</span></span><br><span class="line">CREATE_HOME <span class="built_in">yes</span></span><br><span class="line"><span class="comment">## åˆ›å»ºç”¨æˆ·å®¶ç›®å½•æ—¶ï¼Œæƒé™çš„umaskä¸º077ï¼Œä¹Ÿå°±æ˜¯ç”¨æˆ·å®¶ç›®å½•çš„ç›®å½•æƒé™ä¸º700</span></span><br><span class="line">UMASK 077</span><br><span class="line"><span class="comment">## åˆ›å»ºç”¨æˆ·æ—¶ï¼Œæ˜¯å¦åˆ›å»ºå‡ºç”¨æˆ·çš„åŒåç»„ yesï¼šåˆ›å»º noï¼šä¸åˆ›å»º</span></span><br><span class="line">USERGROUPS_ENAB <span class="built_in">yes</span></span><br><span class="line"><span class="comment">## ç”¨æˆ·å¯†ç çš„åŠ å¯†ç®—æ³•</span></span><br><span class="line">ENCRYPT_METHOD SHA512</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## åˆ›å»ºç”¨æˆ·æ—¶ï¼Œuseraddå‘½ä»¤éœ€è¦è¯»å–çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@localhost ~] <span class="built_in">cat</span> /etc/default/useradd</span><br><span class="line"><span class="comment">## å¦‚æœ/etc/login.defs ä¸­çš„USERGROUPS_ENABæ˜¯yesï¼Œé‚£å°±ä¸è¯»å–æ”¹è¡Œé…ç½®</span></span><br><span class="line"><span class="comment">## å¦‚æœ/etc/login.defs ä¸­çš„USERGROUPS_ENABæ˜¯noï¼Œé‚£å°±èµ°è¯¥è¡Œé…ç½®ï¼ŒæŠŠåˆ›å»ºçš„ç”¨æˆ·åŠ å…¥gidä¸º100çš„ç»„</span></span><br><span class="line">GROUP=100</span><br><span class="line"><span class="comment">## åˆ›å»ºç”¨æˆ·æ—¶ï¼Œé»˜è®¤ç”¨æˆ·å®¶ç›®å½•æ”¾åœ¨/homeä¸‹</span></span><br><span class="line">HOME=/home</span><br><span class="line"><span class="comment">## ç”¨æˆ·è´¦æˆ·æœ‰æ²¡æœ‰æœŸé™ -1è¡¨ç¤ºä¸å¯ç”¨</span></span><br><span class="line">INACTIVE=-1</span><br><span class="line"><span class="comment">## è´¦å·ç»ˆæ­¢æ—¥æœŸï¼Œä¸è®¾ç½®è¡¨ç¤ºä¸å¯ç”¨</span></span><br><span class="line">EXPIRE=</span><br><span class="line"><span class="comment">## ç”¨æˆ·ç™»å½•æ—¶çš„shell</span></span><br><span class="line">SHELL=/bin/bash</span><br><span class="line"><span class="comment">## ç”¨æˆ·å®¶ç›®å½•ä¸‹çš„ç¯å¢ƒå˜é‡æ–‡ä»¶å­˜æ”¾åŸå§‹ç›®å½•</span></span><br><span class="line">SKEL=/etc/skel</span><br><span class="line"><span class="comment">## åˆ›å»ºç”¨æˆ·æ˜¯å¦åŒæ—¶åˆ›å»ºé‚®ç®±</span></span><br><span class="line">CREATE_MAIL_SPOOL=<span class="built_in">yes</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linuxæ•²é—¨ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>11.ç”¨æˆ·ç»„ç®¡ç†</title>
      <link href="/posts/17033fe9.html"/>
      <url>/posts/17033fe9.html</url>
      
        <content type="html"><![CDATA[<div class='wow animate__heartBeat' data-wow-duration='' data-wow-delay='1s' data-wow-offset=''  data-wow-iteration='2' ><div class="note red icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p><a href="https://www.lukeme.top/posts/4c7367cf.html">å‘Šåˆ«å°ç™½ï¼Œç‚¹å‡»ç›´è¾¾</a></p></div></div><h3 id="ç”¨æˆ·å¯†ç ç®¡ç†">ç”¨æˆ·å¯†ç ç®¡ç†</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">passwd ç”¨æˆ·å</span><br><span class="line"><span class="comment">## é»˜è®¤ä¿®æ”¹å½“å‰ç™»å½•ç”¨æˆ·çš„å¯†ç </span></span><br><span class="line">[root@localhost ~]# passwd</span><br><span class="line"><span class="comment">## è¯¥å‘½ä»¤åªæœ‰è¶…çº§ç”¨æˆ·å¯ä»¥æ‰§è¡Œ</span></span><br><span class="line">[root@localhost ~]# passwd zls</span><br><span class="line"><span class="comment">## æ™®é€šç”¨æˆ·åªèƒ½ä¿®æ”¹è‡ªå·±çš„å¯†ç </span></span><br><span class="line">[zls@localhost ~]$ passwd</span><br><span class="line">Changing password <span class="keyword">for</span> user zls.</span><br><span class="line">Changing password <span class="keyword">for</span> zls.</span><br><span class="line">(current) UNIX password:</span><br><span class="line">åŸå¯†ç ï¼š</span><br><span class="line">æ–°å¯†ç ï¼š</span><br><span class="line">ç¡®è®¤å¯†ç ï¼š</span><br><span class="line"></span><br><span class="line"><span class="comment">## å…äº¤äº’æ”¹å¯†ç </span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;å¯†ç &#x27;</span>|passwd --stdin ç”¨æˆ·å</span><br><span class="line">CMDBï¼šèµ„äº§ç®¡ç†ç³»ç»Ÿ</span><br><span class="line"></span><br><span class="line"><span class="comment">## ç”Ÿæˆéšæœºå¯†ç </span></span><br><span class="line">[root@localhost ~]# <span class="built_in">echo</span> <span class="variable">$RANDOM</span>|<span class="built_in">md5sum</span>|<span class="built_in">cut</span> -c <span class="string">&#x27;1-10&#x27;</span></span><br><span class="line">be1e4bbb9b</span><br><span class="line">md5ï¼šæ ¡éªŒæ–‡ä»¶å®Œæ•´æ€§</span><br><span class="line"><span class="built_in">md5sum</span>ï¼šå¯ä»¥ç»™ä¸€ä¸ªå­—ç¬¦ä¸²ç”Ÿæˆä¸€æ®µåŠ å¯†åçš„å­—ç¬¦ä¸²</span><br><span class="line"><span class="comment"># -lï¼šæŒ‡å®šå¯†ç æ€»é•¿åº¦</span></span><br><span class="line"><span class="comment"># -dï¼šæŒ‡å®šæ•°å­—çš„ä¸ªæ•°</span></span><br><span class="line"><span class="comment"># -cï¼šæŒ‡å®šå°å†™å­—æ¯ä¸ªæ•°</span></span><br><span class="line"><span class="comment"># -Cï¼šæŒ‡å®šå¤§å†™å­—æ¯ä¸ªæ•°</span></span><br><span class="line"><span class="comment"># -sï¼šæŒ‡å®šç‰¹æ®Šç¬¦å·ä¸ªæ•°</span></span><br><span class="line">[root@localhost ~]# mkpasswd -l 24 -d 3 -c 6 -C 7 -s 8</span><br><span class="line">%t[.xl5&amp;74<span class="string">&quot;LP&#x27;inQPr+_PWY</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure><h3 id="ç”¨æˆ·ç»„ç®¡ç†ï¼ˆç®€å•äº†è§£ï¼‰">ç”¨æˆ·ç»„ç®¡ç†ï¼ˆç®€å•äº†è§£ï¼‰</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##ç›¸å…³æ–‡ä»¶</span></span><br><span class="line">/etc/group</span><br><span class="line">/etc/gshadow</span><br><span class="line"><span class="comment">#groupæ¯åˆ—ä½œç”¨</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">head</span> -1 /etc/group</span><br><span class="line">root:x:0:zls444444,zls666</span><br><span class="line">ç¬¬ä¸€åˆ—ï¼šç»„å</span><br><span class="line">ç¬¬äºŒåˆ—ï¼šç»„å¯†ç å ä½ç¬¦</span><br><span class="line">ç¬¬ä¸‰åˆ—ï¼šç»„GID</span><br><span class="line">ç¬¬å››åˆ—ï¼šç»„ä¸­çš„é™„åŠ æˆå‘˜</span><br><span class="line"></span><br><span class="line"><span class="comment">#gshadowæ¯åˆ—ä½œç”¨</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">head</span> -1 /etc/gshadow</span><br><span class="line">root:::zls444444,zls666</span><br><span class="line">root:$6<span class="variable">$q0sHS</span>/5GA2D/ARX<span class="variable">$KlEkprHkTddlN9tTej7</span>/ONeMswVmIFASVnhTQMfwN.ue2hDTmqlqXhiM</span><br><span class="line">b6oBz8vDCQ/zBzDU2gS88j3pNoIXO.::zls444444,zls666</span><br><span class="line">ç¬¬ä¸€åˆ—ï¼šç»„å</span><br><span class="line">ç¬¬äºŒåˆ—ï¼šç»„å¯†ç </span><br><span class="line">ç¬¬ä¸‰åˆ—ï¼šç»„ç®¡ç†å‘˜</span><br><span class="line">ç¬¬å››åˆ—ï¼šç»„ä¸­çš„é™„åŠ æˆå‘˜</span><br></pre></td></tr></table></figure><h3 id="ç»„ç›¸å…³å‘½ä»¤">ç»„ç›¸å…³å‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å¢</span></span><br><span class="line">groupadd [é€‰é¡¹] ç»„å</span><br><span class="line"><span class="comment">## åˆ›å»ºç»„</span></span><br><span class="line">[root@localhost ~]# groupadd ooo</span><br><span class="line"><span class="comment">## åˆ›å»ºç»„å¹¶æŒ‡å®šGID</span></span><br><span class="line">[root@localhost ~]# groupadd ppp -g 666</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ”¹</span></span><br><span class="line"><span class="comment">## ä¿®æ”¹ç»„çš„gid</span></span><br><span class="line">[root@localhost ~]# groupmod ooo -g 888</span><br><span class="line"><span class="comment">## ä¿®æ”¹ç»„å</span></span><br><span class="line">[root@localhost ~]# groupmod ooo -n xxx</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ </span></span><br><span class="line">[root@localhost ~]# groupdel xxx</span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾ç½®ç»„å¯†ç </span></span><br><span class="line">[root@localhost ~]# gpasswd ppp</span><br><span class="line">Changing the password <span class="keyword">for</span> group ppp</span><br><span class="line">New Password</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ‡æ¢ç»„èº«ä»½</span></span><br><span class="line">[root@localhost ~]# newgrp ç»„å</span><br></pre></td></tr></table></figure><h3 id="Linuxä¸­ç”¨æˆ·èº«ä»½åˆ‡æ¢">Linuxä¸­ç”¨æˆ·èº«ä»½åˆ‡æ¢</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">su åˆ‡æ¢ç”¨æˆ·ï¼Œä½¿ç”¨æ™®é€šç”¨æˆ·ç™»å½•ï¼Œç„¶åä½¿ç”¨suå‘½ä»¤åˆ‡æ¢åˆ°rootã€‚</span><br><span class="line">ä¼˜ç‚¹ï¼šç®€å•ï¼Œæ–¹ä¾¿</span><br><span class="line">ç¼ºç‚¹ï¼šéœ€è¦çŸ¥é“rootå¯†ç ,ä¸å®‰å…¨ï¼Œåˆ‡æ¢åˆ°rootæ²¡æœ‰æ—¥å¿—å®¡è®¡åŠŸèƒ½</span><br><span class="line"></span><br><span class="line">su - ç”¨æˆ·å -c <span class="string">&#x27;å‘½ä»¤&#x27;</span>ï¼ˆ<span class="string">&#x27;touch 1.txt&#x27;</span>ï¼‰ å¯ä»¥ä¸åˆ‡æ¢ç”¨æˆ·ä½†æ˜¯ä»¥æ™®é€šç”¨æˆ·æ‰§è¡Œå‘½ä»¤</span><br><span class="line"></span><br><span class="line">su - ç”¨æˆ·åsu ç”¨æˆ·åï¼Œä¼šå°‘åŠ è½½ä¸€ä¸ªprofileçš„å…¨å±€å˜é‡</span><br><span class="line"><span class="comment">## ä»rootç”¨æˆ·åˆ‡æ¢åˆ°å…¶ä»–ç”¨æˆ·ï¼Œä¸éœ€è¦è¾“å…¥å¯†ç </span></span><br><span class="line"><span class="comment">## æ™®é€šç”¨æˆ·åˆ‡æ¢åˆ°å…¶ä»–ç”¨æˆ·ï¼Œéœ€è¦è¾“å…¥å¯†ç </span></span><br><span class="line"><span class="comment">## åŠ è½½é¡ºåº</span></span><br><span class="line">/etc/profile &gt; /etc/profile.d/1.sh &gt; /root/.bashrc &gt; /etc/bashrc</span><br><span class="line">/etc/profile</span><br><span class="line">/etc/profile.d/1.sh</span><br><span class="line">.bash_profile</span><br><span class="line">/root/.bashrc</span><br><span class="line">/etc/bashrc</span><br><span class="line">ä¸ªäººé…ç½®æ–‡ä»¶ï¼š ~/.bash_profile ~/.bashrc</span><br><span class="line">å…¨å±€é…ç½®æ–‡ä»¶ï¼š/etc/profile /etc/profile.d/*.sh /etc/bashrc</span><br></pre></td></tr></table></figure><h3 id="ç”¨æˆ·èº«ä»½ææƒ">ç”¨æˆ·èº«ä»½ææƒ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> ææƒï¼Œå½“éœ€è¦ä½¿ç”¨rootæƒé™æ—¶ï¼Œè¿›è¡Œææƒï¼Œè€Œæ— éœ€åˆ‡æ¢è‡³rootç”¨æˆ·ã€‚</span><br><span class="line">ä¼˜ç‚¹ï¼šå®‰å…¨ï¼Œæ–¹ä¾¿</span><br><span class="line">ç¼ºç‚¹ï¼šå¤æ‚</span><br><span class="line"></span><br><span class="line"><span class="comment">## ææƒæ‰§è¡Œå‘½ä»¤</span></span><br><span class="line">[zls@localhost ~]$ <span class="built_in">sudo</span> <span class="built_in">mkdir</span> /opt/abc</span><br><span class="line">We trust you have received the usual lecture from the <span class="built_in">local</span> System</span><br><span class="line">Administrator. It usually boils down to these three things:</span><br><span class="line"><span class="comment">#1) Respect the privacy of others.</span></span><br><span class="line"><span class="comment">#2) Think before you type.</span></span><br><span class="line"><span class="comment">#3) With great power comes great responsibility.</span></span><br><span class="line">[<span class="built_in">sudo</span>] password <span class="keyword">for</span> zls:</span><br><span class="line">zls is not <span class="keyword">in</span> the sudoers file. This incident will be reported.</span><br><span class="line"><span class="comment">## é¢å‘åœ£æ—¨ï¼ˆææƒé…ç½®æ–‡ä»¶ï¼‰</span></span><br><span class="line">[root@localhost ~]# vim /etc/sudoers</span><br><span class="line">åœ¨é‡Œé¢æ·»åŠ lgjç”¨æˆ·æƒé™</span><br><span class="line">æˆ–è€…visudoå‘½ä»¤æ·»åŠ ï¼Œä¾‹å¦‚</span><br><span class="line"><span class="comment">## Allow root to run any commands anywhere</span></span><br><span class="line">root    ALL=(ALL)       ALL</span><br><span class="line">lgj     ALL=(ALL)       ALL</span><br><span class="line"></span><br><span class="line">ä¸Šé¢æ³¨é‡Šçš„æœ‰åˆ«åï¼Œå†™ä¸Šåˆ«åå°±å¯ä»¥è®¾ç½®æƒé™ï¼Œæˆ–è€…è‡ªå·±å†™æŸä¸ªå‘½ä»¤çš„ç›®å½•</span><br><span class="line">root    ALL=(ALL)       ALL</span><br><span class="line">lgj     ALL=(ALL)/usr/bin/mkdirï¼ˆè¿™é‡Œä¹Ÿå¯ä¹ŸæŠŠä¸Šé¢æŸä¸ªåˆ«åæ³¨é‡Šå»æ‰ï¼Œå†™ä¸Šåˆ«åå³å¯ä½¿ç”¨é‚£ä¸ªæƒé™ï¼‰</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## è®¾ç½®å‘½ä»¤åˆ«å</span></span><br><span class="line">Cmnd_Alias CREATE = /bin/mkdir,/bin/touch</span><br><span class="line"><span class="comment">## ç”¨æˆ·ææƒæ–¹æ³•ï¼š</span></span><br><span class="line">æ–¹æ³•ä¸€ï¼š</span><br><span class="line"><span class="comment">### visudoä¸è®¾ç½®ç”¨æˆ·å¯†ç </span></span><br><span class="line">[root@localhost ~]# visudo</span><br><span class="line"><span class="comment">## Allow root to run any commands anywhere</span></span><br><span class="line">root ALL=(ALL) ALL</span><br><span class="line">zls ALL=(ALL) CREATE</span><br><span class="line">cls1 ALL=(ALL) NOPASSWD: ALL</span><br><span class="line">æ–¹æ³•äºŒï¼šåªè¦ç»™ç”¨æˆ·åŠ å…¥wheelç»„ä¸­ï¼Œå°±æœ‰<span class="built_in">sudo</span>æƒé™</span><br><span class="line"><span class="comment">## Allows people in group wheel to run all commands</span></span><br><span class="line">%wheel ALL=(ALL) ALL</span><br><span class="line">%lgj ALL=(ALL) NOPASSWD: ALL</span><br><span class="line">[root@localhost ~]# useradd lhq1 -G wheel</span><br><span class="line"><span class="comment">## åˆ‡æ¢æˆæ™®é€šç”¨æˆ·å¯ä»¥æŸ¥çœ‹æˆ‘è¿™ä¸ªç”¨æˆ·èƒ½æ‰§è¡Œå“ªäº›å‘½ä»¤</span></span><br><span class="line">[lhq2@localhost ~]$ <span class="built_in">sudo</span> -l</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linuxæ•²é—¨ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>12.ç”¨æˆ·æƒé™ç®¡ç†</title>
      <link href="/posts/9341c2be.html"/>
      <url>/posts/9341c2be.html</url>
      
        <content type="html"><![CDATA[<div class='wow animate__heartBeat' data-wow-duration='' data-wow-delay='1s' data-wow-offset=''  data-wow-iteration='2' ><div class="note red icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p><a href="https://www.lukeme.top/posts/4c7367cf.html">å‘Šåˆ«å°ç™½ï¼Œç‚¹å‡»ç›´è¾¾</a></p></div></div><h3 id="æƒé™ç®¡ç†">æƒé™ç®¡ç†</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æƒé™å’Œç”¨æˆ·çš„å…³ç³»</span></span><br><span class="line">Linuxä¸­çš„æ–‡ä»¶æˆ–ç›®å½•çš„æƒé™å’Œç”¨æˆ·åŠç”¨æˆ·ç»„å…³è”å¾ˆå¤§ï¼ŒLinuxä¸­æ¯ä¸ªæ–‡ä»¶æˆ–ç›®å½•éƒ½æœ‰ä¸€ç»„å…±9ä¸ªåŸºç¡€æƒ</span><br><span class="line">é™ä½ï¼Œæ¯ä¸‰ä¸ªå­—ç¬¦è¢«åˆ†ä¸ºä¸€ç»„ï¼Œä»–ä»¬åˆ†åˆ«æ˜¯å±ä¸»æƒé™ä½(å ä¸‰ä¸ªå­—ç¬¦)ã€å±ç»„æƒé™ä½(å ä¸‰ä¸ªå­—ç¬¦)ã€å…¶ä»–ç”¨</span><br><span class="line">æˆ·æƒé™ä½(å ä¸‰ä¸ªå­—ç¬¦)</span><br><span class="line">æ¯”å¦‚ rwxr-xr-x linuxä¸­æ­£æ˜¯è¿™9ä¸ªæƒé™ä½æ¥æ§åˆ¶æ–‡ä»¶å±ä¸»(User)ã€å±ç»„(Group)ã€å…¶ä»–ç”¨æˆ·(Other)åŸºç¡€æƒ</span><br><span class="line">é™ã€‚</span><br><span class="line">æ¯ç§èº«ä»½ï¼Œåˆå¯¹åº”äº†3ç§æƒé™ï¼šrï¼ˆreadableï¼‰ã€wï¼ˆwriteableï¼‰ã€xï¼ˆexcutableï¼‰</span><br><span class="line">r=4</span><br><span class="line">w=2</span><br><span class="line">x=1</span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/image-20240413153515306.png" alt="image-20240413153515306"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">User</span><br><span class="line">Group</span><br><span class="line">Other</span><br><span class="line"><span class="comment">## æ‰€å±ç”¨æˆ·ï¼šå±ä¸»</span></span><br><span class="line"><span class="comment">## æ‰€å±ç”¨æˆ·ç»„ï¼šå±ç»„</span></span><br><span class="line"><span class="comment">## ugoæƒé™</span></span><br><span class="line">//ç”¨æˆ·å¯¹èµ„æºæ¥è¯´, æœ‰ä¸‰ç§è§’è‰²</span><br><span class="line">User(u): å±ä¸»ç”¨æˆ·(æ–‡ä»¶æ‰€æœ‰è€…)</span><br><span class="line">Group(g): å±ç»„ç”¨æˆ·(åŒ…å«ç»„æˆå‘˜)</span><br><span class="line">Other(o): å…¶ä»–ç”¨æˆ·</span><br></pre></td></tr></table></figure><table><thead><tr><th>å­—æ¯</th><th>å«ä¹‰</th><th>å¯¹åº”æƒé™</th></tr></thead><tbody><tr><td>r(read)</td><td>è¯»å–æƒé™</td><td>4</td></tr><tr><td>w(write)</td><td>å†™å…¥æƒé™</td><td>2</td></tr><tr><td>x(execute)</td><td>æ‰§è¡Œæƒé™</td><td>1</td></tr><tr><td>-(æ²¡æœ‰æƒé™)</td><td>æ²¡æœ‰æƒé™</td><td>0</td></tr></tbody></table><h3 id="ä¿®æ”¹æƒé™å‘½ä»¤">ä¿®æ”¹æƒé™å‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># change mode</span></span><br><span class="line"><span class="built_in">chmod</span> [é€‰é¡¹] æƒé™ æ–‡ä»¶å</span><br><span class="line"><span class="comment">## æ•°å­—ä¿®æ”¹æ–¹å¼</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> 777 test1.txt</span><br><span class="line">[root@localhost ~]# ll test1.txt</span><br><span class="line">-rwxrwxrwx. 1 root root 0 Apr 12 17:01 test1.txt</span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> 700 test1.txt</span><br><span class="line">[root@localhost ~]# ll test1.txt</span><br><span class="line">-rwx------. 1 root root 0 Apr 12 17:01 test1.txt</span><br><span class="line"><span class="comment">## ugoä¿®æ”¹æ–¹å¼</span></span><br><span class="line"><span class="comment"># åŠ æƒé™</span></span><br><span class="line"><span class="comment">## u+æƒé™ rwx</span></span><br><span class="line"><span class="comment">## g+æƒé™ w</span></span><br><span class="line"><span class="comment">## o+æƒé™ x</span></span><br><span class="line"><span class="comment">## a+æƒé™ å³aæ˜¯all   å¯çœç•¥a +x +r +w +rw +rx +rwx +wx</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> g+xw test1.txt</span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> +x test1.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¿®æ”¹ugoä¸‰ä¸ªæƒé™</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> u=rwx,g=w,o=x test1.txt ä¸å¦‚ç›´æ¥ä¿®æ”¹æ•°å­—æ–¹å¼</span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> 721 test1.txt</span><br><span class="line"><span class="comment">## é€’å½’ä¿®æ”¹ç›®å½•æƒé™</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> -R 222 zls121</span><br><span class="line">[root@localhost ~]# ll -d zls121/</span><br><span class="line">d-w--w--w-. 3 zls121 zls121 139 Apr 12 18:31 zls121/</span><br><span class="line">[root@localhost ~]# ll zls121/</span><br><span class="line">total 0</span><br><span class="line">--w--w--w-. 1 root root 0 Apr 12 18:30 1.txt</span><br><span class="line">--w--w--w-. 1 root root 0 Apr 12 18:30 2.txt</span><br><span class="line">--w--w--w-. 1 root root 0 Apr 12 18:30 3.txt</span><br><span class="line">--w--w--w-. 1 root root 0 Apr 12 18:30 4.txt</span><br><span class="line">[root@localhost ~]# ll zls121/zls1/</span><br><span class="line">total 0</span><br><span class="line">--w--w--w-. 1 root root 0 Apr 12 18:31 1.txt</span><br></pre></td></tr></table></figure><h3 id="æƒé™å¯¹æ–‡ä»¶çš„å½±å“">æƒé™å¯¹æ–‡ä»¶çš„å½±å“</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">å½“æ–‡ä»¶åªæœ‰ræƒé™æ—¶ï¼Œå¯ä»¥æŸ¥çœ‹å†…å®¹ï¼Œä¸èƒ½å†™å…¥ï¼ˆæ–‡ä»¶æ‰€å±ç”¨æˆ·å¯ä»¥ä½¿ç”¨viå¼ºåˆ¶ä¿å­˜ï¼‰ï¼Œä¸èƒ½æ‰§è¡Œ</span><br><span class="line">å½“æ–‡ä»¶åªæœ‰wæƒé™æ—¶ï¼Œä¸èƒ½æŸ¥çœ‹ï¼Œåªèƒ½å†™å…¥ï¼ˆä½¿ç”¨viä¼šè¦†ç›–æ–‡ä»¶å†…å®¹ï¼Œä½¿ç”¨<span class="built_in">echo</span> &gt;&gt;å¯ä»¥è¿½åŠ ï¼‰ï¼Œä¸èƒ½æ‰§è¡Œ</span><br><span class="line">å½“æ–‡ä»¶åªæœ‰xæƒé™æ—¶ï¼Œä¸èƒ½æŸ¥çœ‹ï¼Œä¸èƒ½å†™å…¥ï¼Œä¸èƒ½æ‰§è¡Œ(éƒ½çœ‹ä¸äº†æ— æ³•æ‰§è¡Œ)</span><br><span class="line"></span><br><span class="line">å½“æ–‡ä»¶åªæœ‰rwæƒé™æ—¶ï¼Œå¯ä»¥æŸ¥çœ‹ï¼Œå¯ä»¥å†™å…¥ï¼Œä¸èƒ½æ‰§è¡Œ</span><br><span class="line">å½“æ–‡ä»¶åªæœ‰rxæƒé™æ—¶ï¼Œå¯ä»¥æŸ¥çœ‹ï¼Œä¸èƒ½å†™å…¥ï¼Œå¯ä»¥æ‰§è¡Œ</span><br><span class="line">å½“æ–‡ä»¶åªæœ‰wxæƒé™æ—¶ï¼Œä¸èƒ½çœ‹ï¼Œèƒ½å†™å…¥ï¼Œä¸èƒ½æ‰§è¡Œ</span><br><span class="line"></span><br><span class="line">å½“æ–‡ä»¶æœ‰rwxæƒé™æ—¶ï¼Œå¯ä»¥æŸ¥çœ‹ï¼Œå¯ä»¥å†™å…¥ï¼Œå¯ä»¥æ‰§è¡Œ</span><br><span class="line"></span><br><span class="line"><span class="comment">##æ€»ç»“ï¼šxæƒé™ä¸èƒ½å•ç‹¬å‡ºç°ï¼Œéœ€è¦é…åˆræƒé™ä½¿ç”¨ï¼Œä¹Ÿä¸èƒ½é…åˆwï¼ˆå› ä¸ºæ²¡æœ‰è¯»å–æƒé™ï¼Œå°±ä¸çŸ¥é“æ–‡ä»¶å†…å®¹ï¼Œæ‰€ä»¥æ²¡æ³•æ‰§è¡Œï¼‰</span></span><br></pre></td></tr></table></figure><h3 id="æƒé™å¯¹ç›®å½•çš„å½±å“">æƒé™å¯¹ç›®å½•çš„å½±å“</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[zls@localhost ~]$ ll /opt/</span><br><span class="line"><span class="built_in">ls</span>: cannot open directory /opt/: Permission denied</span><br><span class="line">[zls@localhost ~]$ <span class="built_in">mkdir</span> /opt/zls</span><br><span class="line"><span class="built_in">mkdir</span>: cannot create directory â€˜/opt/zlsâ€™: Permission denied</span><br><span class="line">[zls@localhost ~]$ ./opt</span><br><span class="line">-bash: ./opt: No such file or directory</span><br><span class="line">å½“ç›®å½•æƒé™ä¸º---æ—¶ï¼Œä¸èƒ½æŸ¥çœ‹ï¼Œä¸èƒ½è¿›å…¥ï¼Œä¸èƒ½æ‹·è´ï¼Œä¸èƒ½ç§»åŠ¨ï¼Œä¸èƒ½åˆ›å»ºï¼Œä¸èƒ½åˆ é™¤</span><br><span class="line">å½“ç›®å½•æƒé™ä¸ºræ—¶ï¼Œèƒ½æŸ¥çœ‹ç›®å½•ä¸‹çš„æ–‡ä»¶åï¼ˆçœ‹ä¸åˆ°æ–‡ä»¶å±æ€§ï¼‰ï¼Œä¸èƒ½è¿›å…¥ï¼Œä¸èƒ½æ‹·è´ï¼Œä¸èƒ½ç§»åŠ¨ï¼Œä¸èƒ½åˆ›å»ºï¼Œä¸èƒ½åˆ é™¤</span><br><span class="line">å½“ç›®å½•æƒé™ä¸ºwæ—¶ï¼Œä¸èƒ½æŸ¥çœ‹ï¼Œä¸èƒ½è¿›å…¥ï¼Œä¸èƒ½æ‹·è´ï¼Œä¸èƒ½ç§»åŠ¨ï¼Œä¸èƒ½åˆ›å»ºï¼Œä¸èƒ½åˆ é™¤</span><br><span class="line">å½“ç›®å½•æƒé™ä¸ºxæ—¶ï¼Œä¸èƒ½æŸ¥çœ‹ï¼Œèƒ½è¿›å…¥ï¼Œä¸èƒ½æ‹·è´ï¼Œä¸èƒ½ç§»åŠ¨ï¼Œä¸èƒ½åˆ›å»ºï¼Œä¸èƒ½åˆ é™¤</span><br><span class="line"></span><br><span class="line">å½“ç›®å½•æƒé™ä¸ºrwæ—¶ï¼Œèƒ½æŸ¥çœ‹ç›®å½•ä¸‹çš„æ–‡ä»¶åï¼ˆçœ‹ä¸åˆ°æ–‡ä»¶å±æ€§ï¼‰ï¼Œä¸èƒ½è¿›å…¥ï¼Œä¸èƒ½æ‹·è´ï¼Œä¸èƒ½ç§»åŠ¨ï¼Œä¸èƒ½åˆ›å»ºï¼Œä¸èƒ½åˆ é™¤</span><br><span class="line">å½“ç›®å½•æƒé™ä¸ºrxæ—¶ï¼Œå¯ä»¥æŸ¥çœ‹ï¼Œèƒ½è¿›å…¥ï¼Œèƒ½æ‹·è´ï¼Œä¸èƒ½ç§»åŠ¨ï¼Œä¸èƒ½åˆ›å»ºï¼Œä¸èƒ½åˆ é™¤</span><br><span class="line">å½“ç›®å½•æƒé™ä¸ºwxæ—¶ï¼Œä¸èƒ½æŸ¥çœ‹ï¼Œèƒ½è¿›å…¥ï¼Œèƒ½æ‹·è´ï¼Œèƒ½ç§»åŠ¨ï¼Œèƒ½åˆ›å»ºï¼Œèƒ½åˆ é™¤</span><br><span class="line"><span class="comment">## åªæœ‰xæƒé™æ‰èƒ½cdè¿›å…¥</span></span><br><span class="line"><span class="comment">## ç›®å½•æƒé™ï¼Œå¿…é¡»ä¸¤ä¸¤ç»„åˆä½¿ç”¨</span></span><br><span class="line"><span class="comment">## ç›®å½•æƒé™ï¼Œå¿…é¡»ç»„åˆxæƒé™ä½¿ç”¨</span></span><br><span class="line"><span class="comment">## ç›®å½•æƒé™ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ™®é€šç”¨æˆ·ï¼Œåªç»™rxï¼Œè¶…çº§ç”¨æˆ· rwx</span></span><br></pre></td></tr></table></figure><h3 id="æ–‡ä»¶å±ä¸»å±ç»„ä¿®æ”¹">æ–‡ä»¶å±ä¸»å±ç»„ä¿®æ”¹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## change owner</span></span><br><span class="line"><span class="built_in">chown</span> [é€‰é¡¹] å±ä¸»:å±ç»„ æ–‡ä»¶å</span><br><span class="line"><span class="comment">## ä¿®æ”¹å±ä¸»å’Œå±ç»„</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">chown</span> zls:zls student.txt</span><br><span class="line">[root@localhost ~]# <span class="built_in">chown</span> root.root student.txt</span><br><span class="line"><span class="comment">## å±ä¸»ä¸å˜ï¼Œä¿®æ”¹å±ç»„</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">chown</span> :tls student.txt</span><br><span class="line"><span class="comment">## å±ç»„ä¸å˜ï¼Œä¿®æ”¹å±ä¸»  åªåŠ ä¸€ä¸ªé»˜è®¤å°±æ˜¯ä¿®æ”¹å±ä¸»</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">chown</span> zls student.txt    </span><br><span class="line"></span><br><span class="line">ä¸€ä¸ªç”¨æˆ·ï¼Œåˆ›å»ºå‡ºæ¥çš„æ–‡ä»¶ï¼Œä¸ä¸€å®šæƒé™å±äºä»–çš„ä¸»ç»„ï¼Œnewgrpåªè¦åˆ‡æ¢è¿‡ç»„ï¼Œåœ¨å“ªä¸ªç»„å·¥ä½œï¼Œåˆ›å»ºå‡ºçš„æ–‡ä»¶å±ç»„å°±å±äºå“ªä¸ªç»„</span><br><span class="line"><span class="comment">## ä¿®æ”¹ç›®å½•å±ä¸»å’Œå±ç»„ä¸‹é¢æ–‡ä»¶æƒé™ä¸å˜</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">chown</span> www.www /code/</span><br><span class="line"><span class="comment">## é€’å½’ä¿®æ”¹ç›®å½•çš„å±ä¸»å’Œå±ç»„</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">chown</span> -R www.www /code/s</span><br></pre></td></tr></table></figure><h2 id="Linuxä¸­çš„ç‰¹æ®Šæƒé™"><strong>Linux</strong>ä¸­çš„ç‰¹æ®Šæƒé™</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ™®é€šç”¨æˆ·å¯ä»¥ä¿®æ”¹è‡ªå·±çš„å¯†ç ï¼Œåœ¨äºpasswdå‘½ä»¤ï¼Œè¯¥å‘½ä»¤æ‹¥æœ‰ç‰¹æ®Šæƒé™ï¼ŒSetUIDï¼Œä¹Ÿå°±æ˜¯å’±ä»¬çœ‹åˆ°çš„ï¼Œåœ¨å±ä¸»çš„æƒé™ä½çš„æ‰§è¡Œæƒé™ä¸Šæ˜¯ s.å½“...æ™®é€šç”¨æˆ·ä½¿ç”¨passwdå‘½ä»¤æ¥æ›´æ”¹è‡ªå·±çš„å¯†ç æ—¶ï¼Œå®é™…ä¸Šæ˜¯åœ¨ç”¨passwdå‘½ä»¤çš„æ‰€æœ‰è€…ï¼Œæ‰€æœ‰è€…æ˜¯è°ï¼Ÿå°±æ˜¯rootçš„èº«ä»½åœ¨æ‰§è¡Œpasswdå‘½ä»¤</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œæœ‰ä¸‰ç§ç‰¹æ®Šæƒé™ï¼Œåˆ†åˆ«æ˜¯ SUID æƒé™ã€SGID æƒé™å’Œ SBIT æƒé™ï¼š</span><br><span class="line"><span class="comment">#sUID æƒé™ï¼ˆSet User IDï¼‰ï¼š</span></span><br><span class="line">å…è®¸ç”¨æˆ·åœ¨æ‰§è¡Œå¯æ‰§è¡Œæ–‡ä»¶æ—¶ä»¥æ–‡ä»¶æ‰€æœ‰è€…çš„èº«ä»½è¿è¡Œã€‚å…·æœ‰ SUID æƒé™çš„æ–‡ä»¶åœ¨æ‰§è¡Œæ—¶å°†ç»§æ‰¿æ–‡ä»¶æ‰€æœ‰è€…çš„æƒé™ï¼Œè€Œä¸æ˜¯æ‰§è¡Œè€…è‡ªå·±çš„æƒé™ã€‚è¿™å¯¹äºéœ€è¦ç‰¹å®šæƒé™æ‰èƒ½æ‰§è¡Œçš„ç¨‹åºéå¸¸æœ‰ç”¨ã€‚</span><br><span class="line"></span><br><span class="line"><span class="comment">#SGID æƒé™ï¼ˆSet Group IDï¼‰ï¼š</span></span><br><span class="line">SGID æƒé™ç±»ä¼¼äº SUID æƒé™ï¼Œä½†æ˜¯å®ƒæ˜¯é’ˆå¯¹ç¾¤ç»„è€Œä¸æ˜¯ç”¨æˆ·ã€‚å…·æœ‰ SGID æƒé™çš„æ–‡ä»¶åœ¨æ‰§è¡Œæ—¶å°†ç»§æ‰¿æ–‡ä»¶æ‰€å±ç¾¤ç»„çš„æƒé™ï¼Œè€Œä¸æ˜¯æ‰§è¡Œè€…æ‰€å±ç¾¤ç»„çš„æƒé™ã€‚</span><br><span class="line"></span><br><span class="line"><span class="comment">#SBIT æƒé™ï¼ˆSticky Bitï¼‰ï¼š</span></span><br><span class="line">ä¸»è¦ç”¨äºç›®å½•ã€‚å½“ç›®å½•å…·æœ‰ SBIT æƒé™æ—¶ï¼Œåªæœ‰ç›®å½•æ‰€æœ‰è€…ã€æ–‡ä»¶æ‰€æœ‰è€…å’Œ root ç”¨æˆ·æ‰èƒ½åˆ é™¤æˆ–ç§»åŠ¨è¯¥ç›®å½•ä¸­çš„æ–‡ä»¶ã€‚è¿™å¯ä»¥é˜²æ­¢å…¶ä»–ç”¨æˆ·æ„å¤–åˆ é™¤æˆ–ç§»åŠ¨ä»–äººçš„æ–‡ä»¶</span><br></pre></td></tr></table></figure><h3 id="ç‰¹æ®Šæƒé™suidä»‹ç»ï¼ˆset-uidï¼‰">ç‰¹æ®Šæƒé™suidä»‹ç»ï¼ˆset uidï¼‰</h3><p><img src="https://cos.lukme.top/Pic/image-20240415143350501.png" alt="image-20240415143350501"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## ä¿®æ”¹å¯†ç çš„å‘½ä»¤</span></span><br><span class="line">[root@localhost ~]# passwd</span><br><span class="line"><span class="comment">## ä¿®æ”¹å¯†ç çš„å‘½ä»¤ä½ç½®</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">which</span> passwd</span><br><span class="line">/usr/bin/passwd</span><br><span class="line"><span class="comment">## ç”¨æˆ·å¯†ç ä¿¡æ¯å­˜æ”¾æ–‡ä»¶</span></span><br><span class="line">[root@localhost ~]# ll /etc/shadow</span><br><span class="line">----------. 1 root root 641 Apr 12 19:50 /etc/shadow</span><br><span class="line"><span class="comment">## ç”¨æˆ·å¯†ç ä¿¡æ¯å­˜æ”¾æ–‡ä»¶</span></span><br><span class="line">æ–‡ä»¶æƒé™ï¼š000</span><br><span class="line">æ‰€æœ‰ç”¨æˆ·ï¼Œæ²¡æœ‰è¯»å–æƒé™ï¼Œå†™å…¥æƒé™ï¼Œæ‰§è¡Œæƒé™</span><br><span class="line"><span class="comment">## ä¸€ä¸ªæ™®é€šç”¨æˆ·ï¼Œæ˜¯å¦å¯ä»¥ä¿®æ”¹å¯†ç ï¼Ÿ</span></span><br><span class="line">åªèƒ½ä¿®æ”¹è‡ªå·±çš„å¯†ç </span><br><span class="line"><span class="comment">## é—®é¢˜ï¼šä¸ºä»€ä¹ˆä¸€ä¸ªæ™®é€šç”¨æˆ·ï¼Œå¯¹/etc/shadowæ–‡ä»¶æ²¡æœ‰ä»»ä½•æ“ä½œæƒé™ï¼Œå´å¯ä»¥ä¿®æ”¹è‡ªå·±çš„å¯†ç ï¼Ÿ</span></span><br><span class="line"><span class="comment">## åŸå› ï¼šå› ä¸ºpasswdå‘½ä»¤ï¼Œå±ä¸»æƒé™ä½ä¸Šæœ‰ä¸ªsæƒé™</span></span><br><span class="line">[zls@localhost ~]$ ll /usr/bin/passwd</span><br><span class="line">-rwsr-xr-x. 1 root root 27832 Jun 10 2014 /usr/bin/passwd</span><br><span class="line">suidæˆæƒæ–¹å¼</span><br><span class="line">ç‰¹æ®Šæƒé™â€”â€”setgid</span><br><span class="line">æˆæƒæ–¹å¼</span><br><span class="line">å¦‚æœåœ¨ä¸€ä¸ªæ–‡ä»¶çš„å±ä¸»æƒé™ä½ä¸Šï¼Œå‡ºç°sæƒé™ï¼Œä»£è¡¨ï¼Œè¯¥æ–‡ä»¶å…·æœ‰<span class="built_in">set</span> uidæƒé™</span><br><span class="line"><span class="built_in">set</span> uidï¼ˆsuidï¼‰æƒé™ä½œç”¨ï¼šè®©ä½¿ç”¨è¯¥æ–‡ä»¶çš„ç”¨æˆ·ï¼Œä»¥è¯¥æ–‡ä»¶çš„å±ä¸»èº«ä»½æ‰§è¡Œ</span><br><span class="line"><span class="comment">## å› ä¸ºpasswdå‘½ä»¤æœ‰suidæƒé™ï¼Œé‚£ä¹ˆæ™®é€šç”¨æˆ·å¯ä»¥ä»¥rootèº«ä»½æ‰§è¡Œè¯¥å‘½ä»¤ï¼Œä½†æ˜¯ä¸ºå•¥ä¸èƒ½ä¿®æ”¹å…¶ä»–ç”¨æˆ·å¯†ç </span></span><br><span class="line">åŸå› ï¼šæ™®é€šç”¨æˆ·åœ¨æ‰§è¡Œpasswdå‘½ä»¤æ—¶ï¼Œæœ‰ä¸ªåˆ¤æ–­ï¼Œå°±æ˜¯è¯¥å‘½ä»¤åé¢ä¸èƒ½åŠ ä»»ä½•å‚æ•°</span><br></pre></td></tr></table></figure><h3 id="suidæˆæƒæ–¹å¼">suidæˆæƒæ–¹å¼</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">suidæ•°å­—æƒé™ï¼š4000</span><br><span class="line"><span class="comment">## æ•°å­—æƒé™æˆæƒ</span></span><br><span class="line"><span class="built_in">chmod</span> 4xxx æ–‡ä»¶å</span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> 4644 cheak_student.sh</span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> 4755 /bin/passwd</span><br><span class="line"><span class="comment">## ugoæ–¹å¼</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> u+s student.txt</span><br><span class="line">sï¼šä»£è¡¨è¯¥æ–‡ä»¶çš„å±ä¸»æƒé™ä½ä¸Šï¼Œæœ¬èº«æœ‰xï¼ˆæ‰§è¡Œï¼‰æƒé™</span><br><span class="line">Sï¼šä»£è¡¨è¯¥æ–‡ä»¶çš„å±ä¸»æƒé™ä½ä¸Šï¼Œæœ¬èº«æ²¡æœ‰xï¼ˆæ‰§è¡Œï¼‰æƒé™</span><br><span class="line"><span class="comment">## æ€»ç»“ï¼š</span></span><br><span class="line">1.è®©æ™®é€šç”¨æˆ·å¯¹å¯æ‰§è¡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¸´æ—¶æ‹¥æœ‰äºŒè¿›åˆ¶æ–‡ä»¶çš„æ‰€å±æƒé™</span><br><span class="line">2.å¦‚æœè®¾ç½®çš„äºŒè¿›åˆ¶æ–‡ä»¶æ²¡æœ‰æ‰§è¡Œæƒé™ï¼Œé‚£ä¹ˆsuidçš„æƒé™æ˜¾ç¤ºå°±æ˜¯S</span><br><span class="line">3.ç‰¹æ®Šæƒé™suidä»…å¯¹äºŒè¿›åˆ¶å¯æ‰§è¡Œç¨‹åºæœ‰æ•ˆï¼Œå…¶ä»–æ–‡ä»¶æˆ–ç›®å½•åˆ™æ— æ•ˆ</span><br><span class="line">æ³¨æ„ï¼šsuidæå…¶å±é™©ï¼Œä¸ä¿¡å¯ä»¥å°è¯•å¯¹vimæˆ–è€…<span class="built_in">rm</span>å‘½ä»¤è¿›è¡Œè®¾å®šsuid</span><br></pre></td></tr></table></figure><h3 id="ç‰¹æ®Šæƒé™â€”â€”setgid">ç‰¹æ®Šæƒé™â€”â€”setgid</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">å°†ç›®å½•è®¾ç½®ä¸ºSGIDåï¼Œå¦‚æœåœ¨è¯¥ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶ï¼Œéƒ½å°†ä¸è¯¥ç›®å½•çš„æ‰€å±ç»„ä¿æŒä¸€è‡´</span><br><span class="line"><span class="comment">## åœ¨æ–‡ä»¶çš„å±ç»„æƒé™ä½ä¸Šå‡ºç°sæƒé™</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">mkdir</span> /opt/test</span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> g+s /opt/test/</span><br><span class="line">[root@localhost ~]# ll /opt/test/ -d</span><br><span class="line">drwxr-sr-x. 2 root root 6 Apr 15 18:40 /opt/test/</span><br></pre></td></tr></table></figure><h3 id="æˆæƒæ–¹å¼">æˆæƒæ–¹å¼</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">sgidæ•°å­—æƒé™ï¼š2000</span><br><span class="line"><span class="comment">## æ•°å­—æƒé™æˆæƒ</span></span><br><span class="line"><span class="built_in">chmod</span> 2xxx æ–‡ä»¶å</span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> 2644 dir1</span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> 2755 dir1</span><br><span class="line">å°ç»ƒä¹ </span><br><span class="line"><span class="comment">## ugoæ–¹å¼</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> g+s dir1</span><br><span class="line">sï¼šä»£è¡¨è¯¥æ–‡ä»¶çš„å±ç»„æƒé™ä½ä¸Šï¼Œæœ¬èº«æœ‰xï¼ˆæ‰§è¡Œï¼‰æƒé™</span><br><span class="line">Sï¼šä»£è¡¨è¯¥æ–‡ä»¶çš„å±ç»„æƒé™ä½ä¸Šï¼Œæœ¬èº«æ²¡æœ‰xï¼ˆæ‰§è¡Œï¼‰æƒé™</span><br><span class="line"><span class="comment">## æ€»ç»“ï¼š</span></span><br><span class="line">1.é’ˆå¯¹ç”¨æˆ·ç»„æƒé™ä½ä¿®æ”¹ï¼Œç”¨æˆ·åˆ›å»ºçš„ç›®å½•æˆ–æ–‡ä»¶æ‰€å±ç»„å’Œè¯¥ç›®å½•çš„æ‰€å±ç»„ä¸€è‡´ã€‚</span><br><span class="line">2.å½“æŸä¸ªç›®å½•è®¾ç½®äº†sgidåï¼Œåœ¨è¯¥ç›®å½•ä¸­æ–°å»ºçš„æ–‡ä»¶ä¸åœ¨æ˜¯åˆ›å»ºè¯¥æ–‡ä»¶çš„é»˜è®¤æ‰€å±ç»„</span><br><span class="line">3.ä½¿ç”¨sgidå¯ä»¥ä½¿å¾—å¤šä¸ªç”¨æˆ·ä¹‹é—´å…±äº«ä¸€ä¸ªç›®å½•çš„æ‰€æœ‰æ–‡ä»¶å˜å¾—ç®€å•ã€‚</span><br></pre></td></tr></table></figure><h3 id="ç‰¹æ®Šæƒé™â€”â€”ç²˜æ»ä½æƒé™ï¼ˆSBITï¼‰">ç‰¹æ®Šæƒé™â€”â€”ç²˜æ»ä½æƒé™ï¼ˆSBITï¼‰</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">stickyï¼ˆSI TI KIï¼‰ç²˜æ»ï¼Œç›®å‰åªå¯¹ç›®å½•æœ‰æ•ˆï¼Œä½œç”¨å¦‚ä¸‹ï¼š</span><br><span class="line">æ™®é€šç”¨æˆ·å¯¹è¯¥ç›®å½•æ‹¥æœ‰wå’Œxæƒé™ï¼Œå³æ™®é€šç”¨æˆ·å¯ä»¥åœ¨æ­¤ç›®å½•ä¸­æ‹¥æœ‰å†™å…¥æƒé™ï¼Œå¦‚æœæ²¡æœ‰ç²˜æ»ä½ï¼Œé‚£ä¹ˆæ™®é€šç”¨æˆ·æ‹¥æœ‰wæƒé™ï¼Œå°±å¯ä»¥åˆ é™¤æ­¤ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼ŒåŒ…æ‹¬å…¶ä»–ç”¨æˆ·ç®€å†çš„æ–‡ä»¶ã€‚ä½†æ˜¯ä¸€æ—¦è¢«èµ‹äºˆäº†ç²˜æ»ä½ï¼Œé™¤äº†rootå¯ä»¥åˆ é™¤æ‰€æœ‰æ–‡ä»¶ï¼Œæ™®é€šç”¨æˆ·å°±ç®—æœ‰wæƒé™ä¹Ÿåªèƒ½åˆ é™¤è‡ªå·±å»ºç«‹çš„æ–‡ä»¶ï¼Œè€Œä¸èƒ½åˆ é™¤å…¶ä»–ç”¨æˆ·ç®€å†çš„æ–‡ä»¶ã€‚ç³»ç»Ÿä¸­å­˜åœ¨çš„/tmpç›®å½•æ˜¯ç»å…¸çš„ç²˜æ»ä½ç›®å½•ï¼Œè°éƒ½æœ‰å†™æƒé™ï¼Œå› æ­¤å®‰å…¨æˆé—®é¢˜ï¼Œå¸¸å¸¸æ˜¯æœ¨é©¬ç¬¬ä¸€æ‰‹è·³æ¿ã€‚</span><br></pre></td></tr></table></figure><h3 id="æˆæƒæ–¹å¼-2">æˆæƒæ–¹å¼</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">SBITæ•°å­—æƒé™ï¼š1000</span><br><span class="line">suid=4000</span><br><span class="line">sgid=2000</span><br><span class="line">sbit=1000</span><br><span class="line">r=4</span><br><span class="line">w=2</span><br><span class="line">x=1</span><br><span class="line">-=0</span><br><span class="line"><span class="comment">## æ•°å­—æƒé™æˆæƒ</span></span><br><span class="line"><span class="built_in">chmod</span> 1xxx æ–‡ä»¶å</span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> 1644 dir1</span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> 1755 dir1</span><br><span class="line"><span class="comment">## ugoæ–¹å¼</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> o+t dir1</span><br><span class="line">tï¼šä»£è¡¨è¯¥æ–‡ä»¶çš„å…¶ä»–ç”¨æˆ·æƒé™ä½ä¸Šï¼Œæœ¬èº«æœ‰xï¼ˆæ‰§è¡Œï¼‰æƒé™</span><br><span class="line">Tï¼šä»£è¡¨è¯¥æ–‡ä»¶çš„å…¶ä»–ç”¨æˆ·æƒé™ä½ä¸Šï¼Œæœ¬èº«æ²¡æœ‰xï¼ˆæ‰§è¡Œï¼‰æƒé™</span><br><span class="line"><span class="comment">## æ€»ç»“ï¼š</span></span><br><span class="line">1.è®©å¤šä¸ªç”¨æˆ·éƒ½å…·æœ‰å†™æƒé™çš„ç›®å½•ï¼Œå¹¶è®©æ¯ä¸ªç”¨æˆ·åªèƒ½åˆ è‡ªå·±çš„æ–‡ä»¶ï¼ˆrooté™¤å¤–ï¼‰ã€‚</span><br><span class="line">2.ç‰¹æ®Šstickyç›®å½•è¡¨ç°åœ¨othersçš„xä½ï¼Œç”¨å°tè¡¨ç¤ºï¼Œå¦‚æœæ²¡æœ‰æ‰§è¡Œæƒé™æ˜¯T</span><br><span class="line">3.ä¸€ä¸ªç›®å½•å³ä½¿å®ƒçš„æƒé™ä¸º<span class="string">&quot;777&quot;</span>å¦‚æœæ˜¯è®¾ç½®äº†ç²˜æ»ä½ï¼Œé™¤äº†ç›®å½•çš„å±ä¸»å’Œ<span class="string">&quot;root&quot;</span>ç”¨æˆ·æœ‰æƒé™åˆ é™¤ï¼Œé™¤æ­¤ä¹‹</span><br><span class="line">å¤–å…¶ä»–ç”¨æˆ·éƒ½ä¸å…è®¸åˆ é™¤è¯¥ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶</span><br></pre></td></tr></table></figure><h3 id="chattræƒé™">chattræƒé™</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">chattråªæœ‰rootç”¨æˆ·å¯ä»¥ä½¿ç”¨ï¼Œç”¨æ¥ä¿®æ”¹æ–‡ä»¶ç³»ç»Ÿçš„æƒé™å±æ€§ï¼Œå»ºç«‹å‡Œé©¾äºrwxåŸºç¡€æƒé™ä¹‹ä¸Šçš„æˆæƒ</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹æœ‰æ²¡æœ‰åŠ chattræƒé™</span></span><br><span class="line">lsattr /etc/passwd </span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆæƒæ–¹å¼</span></span><br><span class="line">[root@localhost ~]# chattr +i /etc/passwd</span><br><span class="line">chattrå‘½ä»¤æ ¼å¼ï¼šchattr [+-=][é€‰é¡¹] æ–‡ä»¶åæˆ–ç›®å½•å</span><br><span class="line"><span class="comment">#iï¼šä¸å¾—ä»»æ„æ›´åŠ¨æ–‡ä»¶æˆ–ç›®å½•</span></span><br><span class="line"><span class="comment">#aï¼šappendå¯ä»¥è¿½åŠ ï¼Œä½†æ— æ³•æ›´æ”¹æ–‡ä»¶å†…å®¹</span></span><br><span class="line">[root@localhost ~]# chattr +a /etc/passwd /etc/shadow /etc/group /etc/gshadow</span><br></pre></td></tr></table></figure><h3 id="Linuxè¿›ç¨‹æ©ç umask">Linuxè¿›ç¨‹æ©ç umask</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">ç³»ç»Ÿé»˜è®¤<span class="built_in">umask</span>ä¸º022ï¼Œé‚£ä¹ˆå½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç›®å½•æ—¶ï¼Œæ­£å¸¸æƒ…å†µä¸‹ç›®å½•çš„æƒé™åº”è¯¥æ˜¯777ï¼Œä½†æ˜¯<span class="built_in">umask</span>è¡¨ç¤ºè¦å‡</span><br><span class="line">å»çš„å€¼ï¼Œæ‰€ä»¥æ–°ç›®å½•æ–‡ä»¶çš„æƒé™åº”è¯¥æ˜¯777-022=755ã€‚è‡³äºæ–‡ä»¶çš„æƒé™ä¹Ÿä¾æ¬¡ç±»æ¨ï¼š666-022=644</span><br><span class="line"><span class="comment">## æŸ¥çœ‹ç³»ç»Ÿé»˜è®¤umask</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">umask</span></span><br><span class="line">0022</span><br><span class="line"><span class="comment">## ç›®å½•æƒé™ä½¿ç”¨777-umask</span></span><br><span class="line"><span class="comment">## æ–‡ä»¶æƒé™ä½¿ç”¨666-umask</span></span><br><span class="line">ä½†æ˜¯å½“<span class="built_in">umask</span>å‡ºç°å¥‡æ•°ä½æ—¶ï¼Œéœ€è¦åœ¨è¯¥ä½ä¸Šå¾—åˆ°ç»“æœå+1</span><br><span class="line"><span class="comment">## umask 147</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">umask</span> 147</span><br><span class="line">[root@localhost ~]# <span class="built_in">mkdir</span> zls789 // 630</span><br><span class="line">[root@localhost ~]# <span class="built_in">touch</span> zls456 // 620</span><br><span class="line"><span class="comment">## æ¡ä»¶</span></span><br><span class="line">[root@localhost ~]# <span class="comment"># 1.uid &gt; 199</span></span><br><span class="line">[root@localhost ~]# <span class="comment"># 2.uid name = gid name</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cat</span> /etc/profile</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$UID</span> -gt 199 ] &amp;&amp; [ <span class="string">&quot;`/usr/bin/id -gn`&quot;</span> = <span class="string">&quot;`/usr/bin/id -un`&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line"><span class="built_in">umask</span> 002</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">umask</span> 022</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment"># UIDå¤§äº199 å¹¶ä¸” ç”¨æˆ·åå’Œç»„åå­ä¸€æ · æ­¤æ—¶ ï¼š umask=002    (å¹³å°ç”¨æˆ·)</span></span><br><span class="line"><span class="comment"># UIDå°äº199æ—¶ æ­¤æ—¶ umask=022ï¼ˆrootç”¨æˆ·ï¼‰</span></span><br><span class="line"><span class="comment"># ç”¨æˆ·åå’Œç»„åä¸ä¸€æ ·æ—¶ æ­¤æ—¶umask=022</span></span><br><span class="line"></span><br><span class="line">ç”¨æˆ·å®¶ç›®å½•<span class="built_in">umask</span> 077</span><br><span class="line">[root@lb01 ~]# <span class="built_in">cat</span> /etc/login.defs  </span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹æ–‡ä»¶çš„æ•°å­—æƒé™</span></span><br><span class="line"><span class="built_in">stat</span> -c a% æ–‡ä»¶   </span><br><span class="line"><span class="built_in">stat</span> æ–‡ä»¶</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linuxæ•²é—¨ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>15.æ–‡ä»¶è§£å‹ç¼©</title>
      <link href="/posts/35303a1a.html"/>
      <url>/posts/35303a1a.html</url>
      
        <content type="html"><![CDATA[<div class='wow animate__heartBeat' data-wow-duration='' data-wow-delay='1s' data-wow-offset=''  data-wow-iteration='2' ><div class="note red icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p><a href="https://www.lukeme.top/posts/4c7367cf.html">å‘Šåˆ«å°ç™½ï¼Œç‚¹å‡»ç›´è¾¾</a></p></div></div><h3 id="å¸¸è§å‹ç¼©åŒ…ç±»å‹">å¸¸è§å‹ç¼©åŒ…ç±»å‹</h3><table><thead><tr><th>æ ¼å¼</th><th>å‹ç¼©å·¥å…·</th></tr></thead><tbody><tr><td>.zip</td><td>zipå‹ç¼©å·¥å…·</td></tr><tr><td>.gz</td><td>gzipå‹ç¼©å·¥å…·ï¼Œåªèƒ½å‹ç¼©æ–‡ä»¶ï¼Œä¼šåˆ é™¤æºæ–‡ä»¶ï¼ˆé€šå¸¸é…åˆtarä½¿ç”¨ï¼‰</td></tr><tr><td>bz2</td><td>bzip2å‹ç¼©å·¥å…·ï¼Œåªèƒ½å‹ç¼©æ–‡ä»¶ï¼Œä¼šåˆ é™¤æºæ–‡ä»¶ï¼ˆé€šå¸¸é…åˆtarä½¿ç”¨ï¼‰</td></tr><tr><td>.tar.gz</td><td>å…ˆä½¿ç”¨tarå‘½ä»¤å½’æ¡£æ‰“åŒ…ï¼Œç„¶åä½¿ç”¨gzipå‹ç¼©</td></tr><tr><td>tar.bz2</td><td>å…ˆä½¿ç”¨tarå‘½ä»¤å½’æ¡£æ‰“åŒ…ï¼Œç„¶åä½¿ç”¨bzip2å‹ç¼©</td></tr></tbody></table><h3 id="å‹ç¼©è§£å‹å‘½ä»¤â€”gzip">å‹ç¼©è§£å‹å‘½ä»¤â€”gzip</h3><p>æ³¨æ„ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨æ‰“åŒ…å‹ç¼©å‘½ä»¤ï¼Œæœ€å¥½åˆ°éœ€è¦è¢«æ‰“åŒ…ç›®å½•çš„ä¸Šçº§ç›®å½•,</span><br><span class="line">è§£å‹æ—¶ï¼Œ-Cæœ€å¥½ä¸è¦æŒ‡å®š/ç›®å½• å¯èƒ½ä¼šè¦†ç›–/ä¸‹æŸäº›åŸæ–‡ä»¶</span><br><span class="line">[root@localhost ~]# tar xf mysql.tgz -C /  </span><br><span class="line">/etc/profile</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## å‹ç¼©æ–‡ä»¶</span></span><br><span class="line">è¯­æ³•ï¼šgzip æ–‡ä»¶å</span><br><span class="line">[root@localhost ~]# gzip file1</span><br><span class="line">[root@driver-zeng ~]# <span class="built_in">echo</span> 22222|gzip &gt; zls.txt.gz</span><br><span class="line"></span><br><span class="line"><span class="comment">## è§£å‹    -dï¼šè§£å‹æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">[root@localhost ~]# gzip -d file1.gz</span><br><span class="line"><span class="comment">## æŸ¥çœ‹æ–‡ä»¶ç±»å‹</span></span><br><span class="line">[root@localhost ~]# file file2.gz</span><br><span class="line">file2.gz: gzip compressed data, was <span class="string">&quot;file2&quot;</span>, from Unix, last modified: Thu Apr</span><br><span class="line">18 17:33:26 2024</span><br><span class="line"></span><br><span class="line"><span class="comment">## å¯ä»¥ç›´æ¥æŸ¥çœ‹å‹ç¼©åŒ…ä¸­æ–‡ä»¶çš„å†…å®¹</span></span><br><span class="line">[root@localhost ~]# zcat file4.gz</span><br><span class="line">xxx</span><br><span class="line"><span class="comment">## ç‰¹ç‚¹ï¼š</span></span><br><span class="line">1.å‹ç¼©åŒ…åç¼€.gz</span><br><span class="line">2.å‹ç¼©åæºæ–‡ä»¶ä¸å­˜åœ¨</span><br><span class="line">3.å‹ç¼©ç‡å¾ˆé«˜</span><br><span class="line">4.ç¼ºé™·å°±æ˜¯ï¼Œä¸èƒ½å‹ç¼©ç›®å½•ï¼Œä¸èƒ½å‹ç¼©å¤šä¸ªæ–‡ä»¶</span><br><span class="line">5.è§£å‹åï¼Œå‹ç¼©åŒ…ä¸åœ¨äº†ï¼Œæºæ–‡ä»¶å‡ºæ¥äº†</span><br><span class="line">6.å¯ä»¥ç›´æ¥ä½¿ç”¨å‘½ä»¤æŸ¥çœ‹å‹ç¼©åŒ…ä¸­æ–‡ä»¶çš„å†…å®¹</span><br></pre></td></tr></table></figure><h3 id="å‹ç¼©è§£å‹å‘½ä»¤â€”zip">å‹ç¼©è§£å‹å‘½ä»¤â€”zip</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## å®‰è£…</span></span><br><span class="line">[root@localhost ~]# yum install -y zip</span><br><span class="line"></span><br><span class="line"><span class="comment">## è¯­æ³•ï¼š</span></span><br><span class="line">zip åŒ…å æ–‡ä»¶å...</span><br><span class="line"></span><br><span class="line"><span class="comment">## å‹ç¼©æ–‡ä»¶</span></span><br><span class="line">[root@localhost ~]# zip file1.zip file1</span><br><span class="line"></span><br><span class="line"><span class="comment">## å‹ç¼©å¤šä¸ªæ–‡ä»¶</span></span><br><span class="line">[root@localhost ~]# zip file.zip file1 file10</span><br><span class="line"></span><br><span class="line"><span class="comment">## æŸ¥çœ‹æ–‡ä»¶ç±»å‹</span></span><br><span class="line">[root@localhost ~]# file file.zip</span><br><span class="line">file.zip: Zip archive data, at least v1.0 to extract</span><br><span class="line"></span><br><span class="line"><span class="comment">## å‹ç¼©ç›®å½•    -r åŒ…å«ç›®å½•å†…å®¹ä¸€èµ·å‹ç¼©</span></span><br><span class="line">[root@localhost ~]# zip -r dir1.zip dir1/</span><br><span class="line"></span><br><span class="line"><span class="comment">## æŒ‡å®šè·¯å¾„å‹ç¼©    å‹ç¼©testä¸‹æ‰€æœ‰æ–‡ä»¶åˆ°tmpä¸‹ï¼Œæ–‡ä»¶åæ˜¯test.zip</span></span><br><span class="line">[root@localhost ~]# zip -r /tmp/test.zip <span class="built_in">test</span>/</span><br><span class="line"></span><br><span class="line"><span class="comment">## è§£å‹</span></span><br><span class="line">[root@localhost ~]# yum install -y unzip</span><br><span class="line">[root@localhost opt]# unzip dir1.zip</span><br><span class="line">[root@localhost tmp]# unzip /opt/dir1.zipè§£å‹æŒ‡å®šç›®å½•æ–‡ä»¶</span><br><span class="line"><span class="comment">## æŸ¥çœ‹åŒ…é‡Œæœ‰å“ªäº›æ–‡ä»¶æˆ–ç›®å½•</span></span><br><span class="line">[root@localhost <span class="built_in">local</span>]# unzip -l /opt/dir1.zip</span><br><span class="line">Archive: /opt/dir1.zip</span><br><span class="line">Length Date Time Name</span><br><span class="line">--------- ---------- ----- ----</span><br><span class="line">0 04-18-2024 18:40 dir1/</span><br><span class="line">26 04-18-2024 18:40 dir1/file1.gz</span><br><span class="line">27 04-18-2024 18:40 dir1/file10.gz</span><br><span class="line">26 04-18-2024 18:40 dir1/file2.gz</span><br><span class="line">26 04-18-2024 18:40 dir1/file3.gz</span><br><span class="line">26 04-18-2024 18:40 dir1/file4.gz</span><br><span class="line">261 11 files</span><br><span class="line"><span class="comment">## ç‰¹ç‚¹ï¼š</span></span><br><span class="line">1.å‹ç¼©åŒ…åç¼€.zip</span><br><span class="line">2.å‹ç¼©åæºæ–‡ä»¶å­˜åœ¨</span><br><span class="line">3.å‹ç¼©ç‡å¾ˆé«˜</span><br><span class="line">4.é»˜è®¤æƒ…å†µä¸‹ä¸èƒ½å‹ç¼©ç›®å½•ï¼Œèƒ½å‹ç¼©å¤šä¸ªæ–‡ä»¶ï¼Œå‹ç¼©ç›®å½•éœ€è¦é€‰é¡¹</span><br><span class="line">5.å‹ç¼©æ—¶å¯ä»¥æŒ‡å®šå‹ç¼©åŒ…çš„è·¯å¾„</span><br><span class="line">6.è§£å‹åï¼Œå‹ç¼©åŒ…è¿˜åœ¨ï¼Œæºæ–‡ä»¶å‡ºæ¥äº†</span><br><span class="line">7.ä¸å¯ä»¥ç›´æ¥ä½¿ç”¨å‘½ä»¤æŸ¥çœ‹å‹ç¼©åŒ…ä¸­æ–‡ä»¶çš„å†…å®¹</span><br></pre></td></tr></table></figure><h3 id="å‹ç¼©è§£å‹å‘½ä»¤â€”tar">å‹ç¼©è§£å‹å‘½ä»¤â€”tar</h3><table><thead><tr><th>é€‰é¡¹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>c</td><td>åˆ›å»ºå½’æ¡£æ–‡ä»¶</td></tr><tr><td>f</td><td>æŒ‡å®šå½’æ¡£æ–‡ä»¶çš„åŒ…å</td></tr><tr><td>z</td><td>ä½¿ç”¨gzipæ¥å‹ç¼©å½’æ¡£åçš„æ–‡ä»¶ï¼Œxfè§£å‹.tar.gzåŒ…</td></tr><tr><td>x</td><td>å¯¹å½’æ¡£æ–‡ä»¶è¿›è¡Œè§£å‹</td></tr><tr><td>v</td><td>æ˜¾ç¤ºè¿‡ç¨‹</td></tr><tr><td>t</td><td>æŸ¥çœ‹å‹ç¼©åŒ…ä¸­çš„æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•</td></tr><tr><td>X</td><td>å¯ä»¥æ’é™¤å¤šä¸ªä¸æƒ³æ‰“åŒ…çš„æ–‡ä»¶ï¼ŒæŒ‡å®šæ–‡ä»¶å   (æŠŠä¸æƒ³æ‰“åŒ…çš„æ–‡ä»¶åå†™å…¥ä¸€ä¸ªæ–‡ä»¶ï¼ŒXæŒ‡å®šè¿™ä¸ªæ–‡ä»¶å°±è¡Œï¼Œè‹¥æ’é™¤çš„æ–‡ä»¶åœ¨åµŒå¥—ç›®å½•ï¼Œåˆ™æŠŠç›¸å¯¹è·¯å¾„å†™ä¸Šå³å¯)</td></tr><tr><td>h</td><td>æ‰“åŒ…è½¯é“¾æ¥çš„æºæ–‡ä»¶</td></tr><tr><td></td><td></td></tr><tr><td>J</td><td>ä½¿ç”¨xzå‹ç¼©å½’æ¡£åçš„æ–‡ä»¶ï¼Œxf è§£å‹.tar.xzåŒ…</td></tr><tr><td>-P</td><td>ä½¿ç”¨ç»å¯¹è·¯å¾„æ‰“åŒ…</td></tr><tr><td>j</td><td>ä½¿ç”¨bzip2å‹ç¼©å½’æ¡£åçš„æ–‡ä»¶ï¼Œxfè§£å‹ .tar.bz2åŒ…</td></tr><tr><td>-C</td><td>è§£å‹åˆ°æŒ‡å®šç›®å½•</td></tr><tr><td>â€“exclude</td><td>æ’é™¤ä¸æƒ³è¦çš„æ–‡ä»¶</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## tarå‘½ä»¤æœ¬èº«åªæ˜¯ä¸€ä¸ªå½’æ¡£å‘½ä»¤</span></span><br><span class="line"><span class="comment">## è¯­æ³•ï¼š</span></span><br><span class="line">tar [é€‰é¡¹] åŒ…å æ–‡ä»¶...</span><br><span class="line">[root@localhost ~]# file abc.tar</span><br><span class="line">abc.tar: POSIX tar archive (GNU)</span><br><span class="line">[root@localhost ~]# file nginx-1.22.1.tar.gz</span><br><span class="line">nginx-1.22.1.tar.gz: gzip compressed data, from Unix, last modified: Wed Oct 19</span><br><span class="line">16:02:28 2022</span><br><span class="line"><span class="comment">## æ–‡ä»¶å½’æ¡£</span></span><br><span class="line">[root@localhost ~]# tar cf dir1.tar dir1</span><br><span class="line"><span class="comment">## æ–‡ä»¶å½’æ¡£å¹¶æŒ‡å®šè·¯å¾„</span></span><br><span class="line">[root@localhost ~]# tar cf /tmp/dir1_xxx.tar dir1</span><br><span class="line"><span class="comment">## å‹ç¼©ç›®å½•</span></span><br><span class="line">[root@localhost ~]# tar zcf dir1.tgz dir1/</span><br><span class="line"><span class="comment">## å‹ç¼©å¹¶æ˜¾ç¤ºè¿‡ç¨‹</span></span><br><span class="line">[root@localhost ~]# tar zcvf dir1.tgz dir1/</span><br><span class="line"><span class="comment">## è§£å‹</span></span><br><span class="line">[root@localhost ~]# tar zxf dir1.tgz</span><br><span class="line"><span class="comment">## æŸ¥çœ‹</span></span><br><span class="line">[root@localhost ~]# tar tf nginx-1.22.1.tar.gz</span><br><span class="line"><span class="comment">## è§£å‹åˆ°æŒ‡å®šç›®å½•</span></span><br><span class="line">[root@localhost ~]# tar zxf nginx-1.22.1.tar.gz -C /tmp/</span><br><span class="line"><span class="comment">## æ‰“åŒ…æ—¶æ’é™¤ä¸æƒ³è¦çš„æ–‡ä»¶</span></span><br><span class="line">[root@localhost tmp]# tar zcf root2.tgz --exclude=file6 --exclude=file7 /root</span><br><span class="line">1.å½’æ¡£åŒ…åç¼€.tar</span><br><span class="line">2.å½’æ¡£åæºæ–‡ä»¶å­˜åœ¨</span><br><span class="line">3.æ²¡æœ‰å‹ç¼©ç‡</span><br><span class="line">4.é»˜è®¤æƒ…å†µä¸‹èƒ½å½’æ¡£ç›®å½•ï¼Œèƒ½å½’æ¡£å¤šä¸ªæ–‡ä»¶</span><br><span class="line">5.å½’æ¡£æ—¶å¯ä»¥æŒ‡å®šå½’æ¡£çš„è·¯å¾„</span><br><span class="line">6.è§£å‹åï¼Œå‹ç¼©åŒ…è¿˜åœ¨ï¼Œæºæ–‡ä»¶å‡ºæ¥äº†</span><br><span class="line">7.ä¸å¯ä»¥ç›´æ¥ä½¿ç”¨å‘½ä»¤æŸ¥çœ‹å‹ç¼©åŒ…ä¸­æ–‡ä»¶çš„å†…å®¹</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ç§»åŠ¨æµ·é‡å°æ–‡ä»¶ä½¿ç”¨tar</span></span><br><span class="line">[root@localhost abc]# tar czf - ./ | tar xzf - -C /tmp</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linuxæ•²é—¨ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>13.é‡å®šå‘</title>
      <link href="/posts/30ec03be.html"/>
      <url>/posts/30ec03be.html</url>
      
        <content type="html"><![CDATA[<div class='wow animate__heartBeat' data-wow-duration='' data-wow-delay='1s' data-wow-offset=''  data-wow-iteration='2' ><div class="note red icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p><a href="https://www.lukeme.top/posts/4c7367cf.html">å‘Šåˆ«å°ç™½ï¼Œç‚¹å‡»ç›´è¾¾</a></p></div></div><h3 id="é‡å®šå‘">é‡å®šå‘</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å°†åŸæœ¬è¦è¾“å‡ºåˆ°å±å¹•çš„æ•°æ®ä¿¡æ¯ï¼Œé‡æ–°å®šå‘åˆ°æŒ‡å®šçš„æ–‡ä»¶ä¸­ã€‚</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä½¿ç”¨é‡å®šå‘åœºæ™¯</span></span><br><span class="line">1.å½“å±å¹•è¾“å‡ºçš„ä¿¡æ¯å¾ˆé‡è¦ï¼Œè€Œä¸”å¸Œæœ›ä¿å­˜é‡è¦çš„ä¿¡æ¯æ—¶ã€‚</span><br><span class="line">2.åå°æ‰§è¡Œä¸­çš„ç¨‹åºï¼Œä¸å¸Œæœ›ä»–å¹²æ‰°å±å¹•æ­£å¸¸çš„è¾“å‡ºç»“æœæ—¶ã€‚</span><br><span class="line">3.ç³»ç»Ÿçš„ä¾‹è¡Œå‘½ä»¤ï¼Œä¾‹å¦‚å®šæ—¶ä»»åŠ¡çš„æ‰§è¡Œç»“æœï¼Œå¸Œæœ›ä»–å¯ä»¥å­˜ä¸‹æ¥æ—¶ã€‚</span><br><span class="line">4.ä¸€äº›æ‰§è¡Œå‘½ä»¤ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ä»–å¯èƒ½å‡ºç°é”™è¯¯ä¿¡æ¯ï¼Œæƒ³å°†ä»–ç›´æ¥ä¸¢å¼ƒæ—¶ã€‚</span><br><span class="line">5.æ‰§è¡Œä¸€ä¸ªå‘½ä»¤ï¼Œå¯èƒ½æŠ¥é”™å’Œæ­£ç¡®çš„è¾“å‡ºå¹¶å­˜ï¼Œç±»ä¼¼é”™è¯¯æ—¥å¿—ä¸æ ‡å‡†æ­£ç¡®æ—¥å¿—éœ€è¦åˆ†åˆ«è¾“å‡ºè‡³ä¸åŒçš„æ–‡ä»¶ã€‚</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä¸€ä¸ªshellç¨‹åºæ—¶é€šå¸¸ä¼šè‡ªåŠ¨æ‰“å¼€ä¸‰ä¸ªæ–‡ä»¶æè¿°ç¬¦</p><table><thead><tr><th style="text-align:center">åç§°</th><th style="text-align:center">æ–‡ä»¶æè¿°ç¬¦</th><th style="text-align:center">ä½œç”¨</th></tr></thead><tbody><tr><td style="text-align:center">æ ‡å‡†è¾“å…¥ (stdin)</td><td style="text-align:center">0</td><td style="text-align:center">é€šå¸¸æ˜¯é”®ç›˜ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶ä»–æ–‡ä»¶æˆ–è€…å‘½ä»¤çš„è¾“å‡ºçš„å†…å®¹å¯ä»¥ä½œä¸ºæ ‡å‡†è¾“å…¥</td></tr><tr><td style="text-align:center">æ ‡å‡†è¾“å‡º (stdout)</td><td style="text-align:center">1</td><td style="text-align:center">é»˜è®¤è¾“å‡ºåˆ°å±å¹•</td></tr><tr><td style="text-align:center">é”™è¯¯è¾“å‡º (stderr)</td><td style="text-align:center">2</td><td style="text-align:center">é»˜è®¤è¾“å‡ºåˆ°å±å¹•</td></tr><tr><td style="text-align:center">æ–‡ä»¶åç§° (filename)</td><td style="text-align:center">3+</td><td style="text-align:center"></td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">æ ‡å‡†è¾“å…¥ï¼šstdin</span><br><span class="line">æ ‡å‡†è¾“å‡ºï¼šstdout</span><br><span class="line">é”™è¯¯è¾“å‡ºï¼šstderr</span><br><span class="line">[root@localhost ~]# ll /dev/std*</span><br><span class="line">lrwxrwxrwx. 1 root root 15 Apr 16 15:52 /dev/stderr -&gt; /proc/self/fd/2</span><br><span class="line">lrwxrwxrwx. 1 root root 15 Apr 16 15:52 /dev/stdin -&gt; /proc/self/fd/0</span><br><span class="line">lrwxrwxrwx. 1 root root 15 Apr 16 15:52 /dev/stdout -&gt; /proc/self/fd/1</span><br><span class="line">æ–‡ä»¶æè¿°ç¬¦fdï¼šä¸€ä¸ªå‘½ä»¤æˆ–è€…ç¨‹åºåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œè‡³å°‘è¦æ‰“å¼€4ä¸ªæ–‡ä»¶æè¿°ç¬¦</span><br><span class="line">æ–‡ä»¶æè¿°ç¬¦0ï¼šæ ‡å‡†è¾“å…¥</span><br><span class="line">æ–‡ä»¶æè¿°ç¬¦1ï¼šæ ‡å‡†è¾“å‡º</span><br><span class="line">æ–‡ä»¶æè¿°ç¬¦2ï¼šé”™è¯¯è¾“å‡º</span><br><span class="line">æ–‡ä»¶æè¿°ç¬¦3+ï¼šæ–‡ä»¶å</span><br><span class="line"></span><br></pre></td></tr></table></figure><table><thead><tr><th>è¾“å…¥è¾“å‡º</th><th>ç¬¦å·</th></tr></thead><tbody><tr><td>æ ‡å‡†è¾“å…¥é‡å®šå‘</td><td>&lt; æˆ– 0&lt;</td></tr><tr><td>æ ‡å‡†è¾“å‡ºé‡å®šå‘</td><td>&gt; æˆ– 1&gt;</td></tr><tr><td>é”™è¯¯è¾“å‡ºé‡å®šå‘</td><td>2&gt;</td></tr></tbody></table><p>æŸ¥çœ‹æ ‡å‡†è¾“å…¥è¾“å‡ºè®¾å¤‡</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@lb01 ~]# ll /dev/std*</span><br><span class="line">lrwxrwxrwx. 1 root root 15 Apr 16 08:16 /dev/stderr -&gt; /proc/self/fd/2é”™è¯¯è¾“å‡º</span><br><span class="line">lrwxrwxrwx. 1 root root 15 Apr 16 08:16 /dev/stdin -&gt; /proc/self/fd/0æ ‡å‡†è¾“å…¥</span><br><span class="line">lrwxrwxrwx. 1 root root 15 Apr 16 08:16 /dev/stdout -&gt; /proc/self/fd/1æ ‡å‡†è¾“å‡º</span><br></pre></td></tr></table></figure><table><thead><tr><th>ç±»å‹</th><th>æ“ä½œç¬¦</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td>æ ‡å‡†è¦†ç›–è¾“å‡ºé‡å®šå‘</td><td>1&gt;æˆ–&gt;</td><td>å°†å‘½ä»¤çš„æ‰§è¡Œç»“æœè¾“å‡ºåˆ°æŒ‡å®šçš„æ–‡ä»¶ä¸­, è€Œä¸æ˜¯ç›´æ¥æ˜¾ç¤ºåœ¨å±å¹•ä¸Š</td></tr><tr><td>æ ‡å‡†è¿½åŠ è¾“å‡ºé‡å®šå‘</td><td>&gt;&gt;1æˆ–1&gt;&gt;</td><td>å°†å‘½ä»¤æ‰§è¡Œçš„ç»“æœè¿½åŠ è¾“å‡ºåˆ°æŒ‡å®šæ–‡ä»¶</td></tr><tr><td>é”™è¯¯è¦†ç›–è¾“å‡ºé‡å®šå‘</td><td>2&gt;</td><td>å°†ç¨‹åºçš„é”™è¯¯ç»“æœè¾“å‡ºåˆ°æ‰§è¡Œçš„æ–‡ä»¶ä¸­ï¼Œä¼šè¦†ç›–æºæ–‡ä»¶å†…å®¹</td></tr><tr><td>é”™è¯¯è¿½åŠ è¾“å‡ºé‡å®šå‘</td><td>2&gt;&gt;</td><td>å°†ç¨‹åºè¾“å‡ºçš„é”™è¯¯ç»“æœä»¥è¿½åŠ çš„æ–¹å¼è¾“å‡ºåˆ°æŒ‡å®šæ–‡ä»¶ä¸­ï¼Œä¸ä¼šè¦†ç›–æºæ–‡ä»¶</td></tr><tr><td>æ ‡å‡†è¾“å…¥é‡å®šå‘</td><td>&lt;&lt;</td><td>å°†å‘½ä»¤ä¸­æ¥æ”¶è¾“å…¥çš„é€”å¾„ç”±é»˜è®¤çš„é”®ç›˜æ›´æ”¹ä¸ºæŒ‡å®šçš„æ–‡ä»¶</td></tr></tbody></table><h3 id="é‡å®šå‘ä½¿ç”¨">é‡å®šå‘ä½¿ç”¨</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">æ ‡å‡†è¾“å‡ºè¿½åŠ é‡å®šå‘</span><br><span class="line">[root@lb01 ~]# <span class="built_in">echo</span> <span class="string">&quot;111&quot;</span> &gt;&gt;1.txt</span><br><span class="line">æ ‡å‡†è¾“å‡ºè¦†ç›–é‡å®šå‘</span><br><span class="line">[root@lb01 ~]# <span class="built_in">echo</span> <span class="string">&quot;111&quot;</span> &gt;1.txt</span><br><span class="line">é”™è¯¯è¾“å‡ºè¦†ç›–é‡å®šå‘</span><br><span class="line">[root@lb01 ~]# nginx -V 2&gt;&gt; 1.txt</span><br><span class="line">é”™è¯¯è¾“å‡ºè¿½åŠ é‡å®šå‘</span><br><span class="line">[root@lb01 ~]# nginx -V 2&gt; 1.txt</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="é”™è¯¯è¾“å‡ºå’Œæ­£ç¡®è¾“å‡ºï¼Œéƒ½è¾“å‡ºåˆ°åŒä¸€ä¸ªæ–‡ä»¶ä¸­">é”™è¯¯è¾“å‡ºå’Œæ­£ç¡®è¾“å‡ºï¼Œéƒ½è¾“å‡ºåˆ°åŒä¸€ä¸ªæ–‡ä»¶ä¸­</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## æ–¹æ³•ä¸€ï¼š</span></span><br><span class="line">[root@lb01 ~]# find /etc/ -<span class="built_in">type</span> d &gt; /tmp/1.<span class="built_in">log</span> 2&gt;/tmp/1.<span class="built_in">log</span></span><br><span class="line"><span class="comment">## æ–¹æ³•äºŒï¼š</span></span><br><span class="line">æ ‡å‡†è¾“å‡ºåˆ°2.<span class="built_in">log</span>æ–‡ä»¶é‡Œï¼Œé”™è¯¯è¾“å‡ºåˆ°å’Œæ ‡å‡†è¾“å‡ºä¸€æ ·ä½ç½®</span><br><span class="line">[root@lb01 ~]# find /etc/ -<span class="built_in">type</span> d 1&gt; /tmp/2.<span class="built_in">log</span> 2&gt;&amp;1</span><br><span class="line">å’Œä¸Šé¢ç›¸å</span><br><span class="line">[root@lb01 ~]# find /etc/ -<span class="built_in">type</span> d 2&gt; /tmp/6.<span class="built_in">log</span> 1&gt;&amp;2</span><br><span class="line"><span class="comment">## æ–¹æ³•ä¸‰ï¼š</span></span><br><span class="line">[root@lb01 ~]# find /etc/ -<span class="built_in">type</span> d &amp;&gt; /tmp/11.<span class="built_in">log</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#å°†å‘½ä»¤ç»“æœé‡å®šå‘åˆ°é»‘æ´</span></span><br><span class="line">[zls@localhost ~]$ find /etc/ -<span class="built_in">type</span> d 1&gt; /tmp/6.<span class="built_in">log</span> 2&gt;/dev/null æ ‡å‡†è¾“å‡ºåˆ°6.<span class="built_in">log</span>ï¼Œé”™è¯¯è¾“å‡ºåˆ°é»‘æ´</span><br><span class="line">[zls@localhost ~]$ find /etc/ -<span class="built_in">type</span> d &amp;&gt;/dev/null  æ‰€æœ‰è¾“å‡ºç»“æœåˆ°é»‘æ´</span><br></pre></td></tr></table></figure><h3 id="æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯è¾“å‡ºåˆ°ä¸¤ä¸ªæ–‡ä»¶">æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯è¾“å‡ºåˆ°ä¸¤ä¸ªæ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /etc -name <span class="string">&quot;*.conf&quot;</span> 1&gt;a 2&gt;b</span><br></pre></td></tr></table></figure><p>#å°†æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯è¾“å‡ºé‡å®šå‘åˆ°åŒä¸€ä¸ªæ–‡ä»¶, æ··åˆè¾“å‡º</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[zls@zls ~]$ find /etc -name <span class="string">&quot;*.conf&quot;</span> &amp;&gt;ab </span><br><span class="line">[zls@zls ~]$ find /etc -name <span class="string">&quot;*.conf&quot;</span> &gt;ab 2&amp;&gt;1</span><br><span class="line">[zls@zls ~]$ find /etc -name <span class="string">&quot;*.conf&quot;</span> &gt;ab 2&gt;&amp;1</span><br><span class="line">åˆå¹¶ä¸¤ä¸ªæ–‡ä»¶åˆ°ä¸€ä¸ªæ–‡ä»¶</span><br><span class="line"><span class="built_in">cat</span> 1 2 &gt;3</span><br></pre></td></tr></table></figure><h3 id="è¾“å…¥é‡å®šå‘">è¾“å…¥é‡å®šå‘</h3><p>è¾“å…¥é‡å®šå‘ï¼Œå³åŸæœ¬ä»é”®ç›˜ç­‰è®¾å¤‡ä¸Šè·å¾—çš„è¾“å…¥ä¿¡æ¯ï¼Œé‡å®šå‘ç”±å‘½ä»¤çš„è¾“å‡ºä½œä¸ºè¾“å…¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# cat &gt;1.txtç­‰å¾…é”®ç›˜è¾“å…¥é‡å®šå‘åˆ°1.txtï¼ŒCtrl+cç»ˆæ­¢è¾“å…¥</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# cat &lt;&lt;EOF &gt; 1.txt   ç­‰å¾…é”®ç›˜è¾“å…¥ï¼Œé‡åˆ°Eofç»“æŸé‡å®šå‘åˆ°1.txt</span><br><span class="line">111</span><br><span class="line">222</span><br><span class="line">333</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><h3 id="ä¸¤æ¡å‘½ä»¤é‡å®šå‘">ä¸¤æ¡å‘½ä»¤é‡å®šå‘</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# (<span class="built_in">ls</span>;ifconfig) &gt; /tmp/1.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">## å°†å†…å®¹è¾“å‡ºåˆ°æ–‡ä»¶ï¼Œç„¶åæ”¾åå°æ‰§è¡Œ åŠ ä¸ª&amp;</span></span><br><span class="line">[root@localhost ~]# ping baidu.com &amp;&gt;/tmp/a.log &amp;</span><br><span class="line"></span><br><span class="line">æ‰©å±•ç‚¹: subshell</span><br><span class="line">[root@zls ~]# <span class="built_in">cd</span> /boot; <span class="built_in">ls</span></span><br><span class="line"><span class="comment">#subshell ä¸­æ‰§è¡Œ</span></span><br><span class="line">[root@zls ~]# (<span class="built_in">cd</span> /boot; <span class="built_in">ls</span>)</span><br><span class="line"><span class="comment">#å¦‚æœä¸å¸Œæœ›æŸäº›å‘½ä»¤çš„æ‰§è¡Œå¯¹å½“å‰ shell ç¯å¢ƒäº§ç”Ÿå½±å“ï¼Œè¯·åœ¨subshellä¸­æ‰§è¡Œ</span></span><br></pre></td></tr></table></figure><h3 id="ç®¡é“æŠ€æœ¯">ç®¡é“æŠ€æœ¯</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ç®¡é“ç¬¦ä½œç”¨ï¼šå°†ç®¡é“ç¬¦å·¦è¾¹å‘½ä»¤çš„æ ‡å‡†è¾“å‡ºäº¤ç»™ç®¡é“ç¬¦å³è¾¹å‘½ä»¤çš„æ ‡å‡†è¾“å…¥æ¥å¤„ç†</span><br><span class="line">1ï¼‰å·¦è¾¹å‘½ä»¤ä»–å¾—æ˜¯æ ‡å‡†è¾“å‡º 1&gt;</span><br><span class="line">2ï¼‰å³è¾¹å‘½ä»¤å¿…é¡»æœ‰æ ‡å‡†è¾“å…¥</span><br></pre></td></tr></table></figure><h3 id="teeç®¡é“æŠ€æœ¯">teeç®¡é“æŠ€æœ¯</h3><p><img src="https://cos.lukme.top/Pic/image-20240416145607541.png" alt="image-20240416145607541"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tee</span>ç›¸å½“äºå¼€ä¸ªä¾§é—¨è¾“å‡ºé‡å®šå‘åˆ°æŸä¸ªæ–‡ä»¶ï¼ŒåŸç†è§ä¸Šå›¾</span><br><span class="line">[root@localhost ~]# <span class="built_in">echo</span> <span class="variable">$RANDOM</span>|<span class="built_in">tee</span> /dev/pts/3|passwd --stdin zls</span><br><span class="line">[root@localhost ~]# <span class="built_in">echo</span> <span class="variable">$RANDOM</span>|<span class="built_in">tee</span> /tmp/pass.txt|passwd --stdin zls</span><br><span class="line"><span class="comment">## -aï¼šappend è¿½åŠ åˆ°æ–‡ä»¶ä¸­</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">echo</span> <span class="variable">$RANDOM</span>|<span class="built_in">tee</span> -a /tmp/pass.txt|passwd --stdin zls</span><br></pre></td></tr></table></figure><h3 id="xargsä¼ å‚">xargsä¼ å‚</h3><p><strong>xarasåé¢ä¸è¯†åˆ«åˆ«å</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">xargså°†ç®¡é“ç¬¦å‰é¢å‘½ä»¤çš„æ ‡å‡†è¾“å‡ºï¼Œå½“æˆç»“æœï¼Œæ”¾åˆ°ç®¡é“ç¬¦å³è¾¹xargsåé¢çš„å‘½ä»¤çš„åé¢æ‰§è¡Œ</span><br><span class="line">[root@localhost ~]# <span class="built_in">echo</span> &#123;1..10&#125;</span><br><span class="line">1 2 3 4 5 6 7 8 9 10</span><br><span class="line">[root@localhost ~]# <span class="built_in">echo</span> &#123;1..5&#125;|xargs -n1</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">[root@localhost ~]# <span class="built_in">echo</span> &#123;1..10&#125;|xargs -n2    -n2æ¯ä¸¤ä¸ªä¸€è¡Œ -n3æ¯ä¸‰ä¸ªæ‹ä¸€è¡Œ</span><br><span class="line">1 2</span><br><span class="line">3 4</span><br><span class="line">5 6</span><br><span class="line">7 8</span><br><span class="line">9 10</span><br><span class="line">[root@lb01 ~]# <span class="built_in">seq</span> 10|xargs -n3</span><br><span class="line">1 2 3</span><br><span class="line">4 5 6</span><br><span class="line">7 8 9</span><br><span class="line">10</span><br><span class="line"></span><br><span class="line"><span class="comment">## æ‰¾å‡ºæ¥çš„æ–‡ä»¶æ‹·è´åˆ°/tmp</span></span><br><span class="line">[root@localhost ~]# grep -rl <span class="string">&#x27;xxx&#x27;</span> ./|xargs <span class="built_in">cp</span> -t /tmp/</span><br><span class="line">[root@localhost ~]# grep -rl <span class="string">&#x27;xxx&#x27;</span> ./|xargs -I &#123;&#125; <span class="built_in">cp</span> &#123;&#125; /opt</span><br><span class="line"></span><br><span class="line">æ³¨æ„äº‹é¡¹:</span><br><span class="line">1.åœ¨ç®¡é“åé¢çš„å‘½ä»¤ï¼Œéƒ½ä¸åº”è¯¥åœ¨å†™æ–‡ä»¶å</span><br><span class="line">2.åœ¨ç®¡é“ä¸­åªæœ‰æ ‡å‡†è¾“å‡ºæ‰å¯ä»¥ä¼ é€’ä¸‹ä¸€ä¸ªå‘½ä»¤, æ ‡å‡†é”™è¯¯è¾“å‡ºä¼šç›´æ¥è¾“å‡ºç»ˆç«¯æ˜¾ç¤º, å»ºè®®åœ¨ä½¿ç”¨ç®¡</span><br><span class="line">é“å‰å°†æ ‡å‡†é”™è¯¯è¾“å‡ºé‡å®šå‘ã€‚</span><br><span class="line">ä¾‹å¦‚: find /etc -name <span class="string">&quot;*.conf&quot;</span> 2&gt;/dev/null | grep rc</span><br><span class="line">3.æœ‰äº›å‘½ä»¤ä¸æ”¯æŒç®¡é“æŠ€æœ¯, ä½†æ˜¯å¯ä»¥é€šè¿‡ xargs æ¥å®ç°ç®¡é“ä¼ é€’ã€‚</span><br><span class="line">ä¾‹å¦‚: <span class="built_in">which</span> <span class="built_in">cat</span>|xargs ls-l</span><br><span class="line">ä¾‹å¦‚: <span class="built_in">ls</span> |xargs <span class="built_in">rm</span> -rvf</span><br><span class="line">-I é€‰é¡¹ä½œç”¨æ˜¯å°†å‰é¢è¾“å‡ºç»“æœæ‰“åŒ…åˆ°&#123;&#125;å†…</span><br><span class="line">ä¾‹å¦‚: <span class="built_in">ls</span> |xargs <span class="built_in">cp</span> -rvft /tmp/ ==&gt; <span class="built_in">ls</span> | xargs -I &#123;&#125; <span class="built_in">cp</span> -rvf &#123;&#125; /tmp</span><br><span class="line">ä¾‹å¦‚: <span class="built_in">ls</span> |xargs <span class="built_in">mv</span> -t /tmp/ ==&gt; <span class="built_in">ls</span> | xargs -I &#123;&#125; <span class="built_in">mv</span> &#123;&#125; /tmp</span><br></pre></td></tr></table></figure><table><thead><tr><th>-a</th><th>è®¾ç½®ä»æ–‡ä»¶ä¸­è¯»å–æ•°æ®</th></tr></thead><tbody><tr><td>-d</td><td>è®¾ç½®è‡ªå®šä¹‰å®šç•Œç¬¦</td></tr><tr><td>-l</td><td>è®¾ç½®æ›¿æ¢å­—ç¬¦ä¸²</td></tr><tr><td>-n</td><td>è®¾ç½®å¤šè¡Œè¾“å‡º</td></tr><tr><td>-p</td><td>æ‰§è¡Œå‘½ä»¤å‰è¯¢é—®ç”¨æˆ·æ˜¯å¦ç¡®è®¤</td></tr><tr><td>-r</td><td>å¦‚æœè¾“å…¥æ•°æ®ä¸ºç©ºï¼Œåˆ™ä¸æ‰§è¡Œ</td></tr><tr><td>-s</td><td>è®¾ç½®æ¯æ¡å‘½ä»¤æœ€å¤§å­—ç¬¦æ•°</td></tr><tr><td>-t</td><td>æ˜¾ç¤ºxargsæ‰§è¡Œçš„å‘½ä»¤</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> Linuxæ•²é—¨ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>14.findæŸ¥æ‰¾</title>
      <link href="/posts/2f6f2c7.html"/>
      <url>/posts/2f6f2c7.html</url>
      
        <content type="html"><![CDATA[<div class='wow animate__heartBeat' data-wow-duration='' data-wow-delay='1s' data-wow-offset=''  data-wow-iteration='2' ><div class="note red icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p><a href="https://www.lukeme.top/posts/4c7367cf.html">å‘Šåˆ«å°ç™½ï¼Œç‚¹å‡»ç›´è¾¾</a></p></div></div><h3 id="findç”¨é€”">findç”¨é€”</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1.å¿˜äº†æŸä¸ªæ–‡ä»¶æ‰€åœ¨çš„ä½ç½®ï¼Œå¯ä»¥é€šè¿‡findæ¥æŸ¥æ‰¾ã€‚</span><br><span class="line">2.å¯ä»¥æŸ¥æ‰¾æŸä¸ªç›®å½•ä¸‹ï¼Œæ‰€æœ‰å°äº1kçš„æ–‡ä»¶ã€‚</span><br><span class="line">3.å¯ä»¥æŸ¥æ‰¾æŸä¸ªç›®å½•ä¸‹ï¼Œ7å¤©ä¹‹å‰åˆ›å»ºçš„æ–‡ä»¶ã€‚</span><br><span class="line">4.å¯ä»¥æŸ¥æ‰¾æŸç›®å½•ä¸‹æ‰€æœ‰ä»¥.shç»“å°¾çš„è„šæœ¬ã€‚</span><br><span class="line"></span><br><span class="line">å®ƒå¯ä»¥æ ¹æ®ä¸åŒçš„æ¡ä»¶æ¥è¿›è¡ŒæŸ¥æ‰¾æ–‡ä»¶:ä¾‹å¦‚æƒé™ã€æ‹¥æœ‰è€…ã€ä¿®æ”¹æ—¥æœŸ/æ—¶é—´ã€æ–‡ä»¶å¤§å°ç­‰ç­‰ã€‚ åŒæ—¶findå‘½ä»¤æ˜¯Linuxä¸‹å¿…é¡»æŒæ¡çš„ã€‚</span><br><span class="line"></span><br><span class="line">[root@lb01 code]# find /code/ -size -4k ! -<span class="built_in">type</span> d -delete</span><br></pre></td></tr></table></figure><table><thead><tr><th>å‘½ä»¤</th><th>è·¯å¾„</th><th>é€‰é¡¹</th><th>è¡¨è¾¾å¼</th><th>åŠ¨ä½œ</th></tr></thead><tbody><tr><td>find</td><td>[pathâ€¦]</td><td>[optionsâ€¦]</td><td>[expression]</td><td>[action]</td></tr></tbody></table><table><thead><tr><th>é€»è¾‘è¿ç®—ç¬¦</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>-a</td><td>ä¸”   &amp;&amp;</td></tr><tr><td>-o</td><td>æˆ–  ||</td></tr><tr><td>!</td><td>é</td></tr></tbody></table><p><strong>findçš„é€‰é¡¹</strong></p><table><thead><tr><th>é€‰é¡¹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>-name<br />-iname</td><td>æ ¹æ®æ–‡ä»¶åæŸ¥æ‰¾<br />ä¸åŒºåˆ†æ–‡ä»¶åå¤§å°å†™æŸ¥æ‰¾</td></tr><tr><td>-type</td><td>æ ¹æ®æ–‡ä»¶ç±»å‹æŸ¥æ‰¾</td></tr><tr><td>-size</td><td>æ ¹æ®æ–‡ä»¶å¤§å°æ‰¾</td></tr><tr><td>-time</td><td>æ ¹æ®æ–‡ä»¶çš„æ—¶é—´æ‰¾</td></tr><tr><td>-user <br />-group <br />-nouser <br />-nogroup</td><td>æŸ¥æ‰¾æŒ‡å®šç”¨æˆ·<br />æŸ¥æ‰¾æŒ‡å®šç”¨æˆ·ç»„<br />æŸ¥æ‰¾æ²¡æœ‰ç”¨æˆ·çš„æ–‡ä»¶æŸ¥æ‰¾<br />æ²¡æœ‰ç”¨æˆ·ç»„çš„æ–‡ä»¶</td></tr><tr><td>-perm</td><td>æ ¹æ®æ–‡ä»¶æƒé™æ‰¾</td></tr><tr><td>-maxdepth</td><td>æ ¹æ®å¥æ·±åº¦æŸ¥æ‰¾</td></tr><tr><td>-empty</td><td>æŸ¥æ‰¾ç©ºæ–‡ä»¶ï¼ˆå’Œ-type dé…åˆå¯ä»¥æŒ‡å®šç©ºç›®å½•ï¼‰</td></tr></tbody></table><h3 id="æ ¹æ®æ–‡ä»¶åæŸ¥æ‰¾">æ ¹æ®æ–‡ä»¶åæŸ¥æ‰¾</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">-name</span><br><span class="line"><span class="comment">## æ‰¾åˆ°/etc/ç›®å½•ä¸‹ç½‘å¡ä¿¡æ¯é…ç½®æ–‡ä»¶åœ¨å“ª</span></span><br><span class="line">[root@localhost ~]# find /etc -name <span class="string">&#x27;*ens33*&#x27;</span>      åŠ ä¸Š*æ˜¯æ¨¡ç³ŠæŸ¥æ‰¾</span><br><span class="line"></span><br><span class="line"><span class="comment">## åœ¨/etc/ç›®å½•ä¸‹æ‰¾ä»¥.confç»“å°¾çš„æ‰€æœ‰é…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@localhost ~]# find /etc -name <span class="string">&#x27;*.conf&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## åœ¨/etc/ç›®å½•ä¸‹æ‰¾åˆ°ä»¥.confç»“å°¾çš„æ–‡ä»¶å’Œ.shç»“å°¾çš„æ–‡ä»¶</span></span><br><span class="line">[root@localhost ~]# find /etc/ -name <span class="string">&#x27;*.conf&#x27;</span> &amp;&amp; find /etc/ -name <span class="string">&#x27;*.sh&#x27;</span></span><br><span class="line">[root@localhost ~]# find /etc/ -name <span class="string">&#x27;*.conf&#x27;</span>;find /etc/ -name <span class="string">&#x27;*.sh&#x27;</span></span><br><span class="line">[root@localhost ~]# find /etc/ -name <span class="string">&#x27;*.conf&#x27;</span> -o -name <span class="string">&#x27;*.sh&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## åœ¨/etc/ç›®å½•ä¸‹æ‰¾åˆ°ä¸æ˜¯ä»¥.confç»“å°¾çš„æ–‡ä»¶</span></span><br><span class="line">[root@localhost ~]# find /etc/ ! -name <span class="string">&#x27;*.conf&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## ç²¾ç¡®åŒ¹é…</span></span><br><span class="line">[root@localhost ~]# find /etc/ -name <span class="string">&#x27;ifcfg-ens33&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## ä¸åŒºåˆ†å¤§å°å†™æŸ¥æ‰¾æ–‡ä»¶å</span></span><br><span class="line">[root@localhost ~]# find ./ -iname <span class="string">&#x27;*zls*&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="æ ¹æ®æ–‡ä»¶ç±»å‹æŸ¥æ‰¾">æ ¹æ®æ–‡ä»¶ç±»å‹æŸ¥æ‰¾</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">-<span class="built_in">type</span></span><br><span class="line"><span class="comment">## æ–‡ä»¶ç±»å‹</span></span><br><span class="line">æ™®é€šæ–‡ä»¶ï¼šf</span><br><span class="line">ç›®å½•ï¼šd</span><br><span class="line">è½¯é“¾æ¥æ–‡ä»¶ï¼šl</span><br><span class="line">å¥—æ¥å­—æ–‡ä»¶ï¼šs</span><br><span class="line">å­—ç¬¦è®¾å¤‡æ–‡ä»¶ï¼šc</span><br><span class="line">å—è®¾å¤‡æ–‡ä»¶ï¼šb</span><br><span class="line">ç®¡é“æ–‡ä»¶ï¼šp</span><br><span class="line">//f æ–‡ä»¶</span><br><span class="line">[root@zls ~]# find /dev -<span class="built_in">type</span> f</span><br><span class="line">//d ç›®å½•</span><br><span class="line">[root@zls ~]# find /dev -<span class="built_in">type</span> d</span><br><span class="line">//l é“¾æ¥</span><br><span class="line">[root@zls ~]# find /dev -<span class="built_in">type</span> l</span><br><span class="line">//b å—è®¾å¤‡</span><br><span class="line">[root@zls ~]# find /dev -<span class="built_in">type</span> b</span><br><span class="line">//c å­—ç¬¦è®¾å¤‡</span><br><span class="line">[root@zls ~]# find /dev -<span class="built_in">type</span> c</span><br><span class="line">//s å¥—æ¥å­—</span><br><span class="line">[root@zls ~]# find /dev -<span class="built_in">type</span> s</span><br><span class="line">//p ç®¡é“æ–‡ä»¶</span><br><span class="line">[root@zls ~]# find /dev -<span class="built_in">type</span> p</span><br><span class="line"></span><br><span class="line"><span class="comment">## æŸ¥æ‰¾/etc/ç›®å½•ä¸‹ï¼Œæ–‡ä»¶åä¸­åŒ…å«confçš„ç›®å½•</span></span><br><span class="line">[root@localhost ~]# find /etc -name <span class="string">&#x27;*conf*&#x27;</span> -<span class="built_in">type</span> d</span><br><span class="line">[root@localhost ~]# find /etc -name <span class="string">&#x27;*conf*&#x27;</span> -<span class="built_in">type</span> d -<span class="built_in">ls</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ ¹æ®æ–‡ä»¶å¤§å°æŸ¥æ‰¾">æ ¹æ®æ–‡ä»¶å¤§å°æŸ¥æ‰¾</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">-size</span><br><span class="line">+ï¼šå¤§äº</span><br><span class="line">-ï¼šå°äº</span><br><span class="line"><span class="comment">## æ‰¾å°äºå¤šå°‘çš„æ–‡ä»¶</span></span><br><span class="line">[root@localhost ~]# find /tmp -size -4k</span><br><span class="line"><span class="comment">## æ‰¾å¤§äºå¤šå°‘çš„æ–‡ä»¶</span></span><br><span class="line">[root@localhost ~]# find /tmp -size +4k</span><br><span class="line"><span class="comment">## æ‰¾ç­‰äºå¤šå°‘</span></span><br><span class="line">[root@localhost ~]# find /tmp -size 4k</span><br><span class="line"></span><br><span class="line"><span class="comment">## æ‰¾åˆ°/codeç›®å½•ä¸‹å°äº4kçš„æ–‡ä»¶å¹¶åˆ é™¤</span></span><br><span class="line">[root@localhost ~]# find /code -size -4k -delete</span><br><span class="line"></span><br><span class="line"><span class="comment">## æ‰¾åˆ°/codeç›®å½•ä¸‹å°äº4kçš„æ–‡ä»¶å¹¶åˆ é™¤ï¼ˆä¸åˆ é™¤ç›®å½•ï¼‰</span></span><br><span class="line">[root@localhost ~]# find /code -size -4k ! -<span class="built_in">type</span> d -delete   </span><br><span class="line"><span class="comment">##! -type d -deleteéç›®å½•</span></span><br></pre></td></tr></table></figure><h3 id="æ ¹æ®æ–‡ä»¶çš„æ—¶é—´æŸ¥æ‰¾">æ ¹æ®æ–‡ä»¶çš„æ—¶é—´æŸ¥æ‰¾</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## ä¸€ä¸ªæ–‡ä»¶çš„æ—¶é—´</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">stat</span> 1.txt</span><br><span class="line">File: â€˜1.txtâ€™</span><br><span class="line">Size: 4 Blocks: 8 IO Block: 4096 regular file</span><br><span class="line">Device: 803h/2051d Inode: 16797763 Links: 1</span><br><span class="line">Access: (0644/-rw-r--r--) Uid: ( 0/ root) Gid: ( 0/ root)</span><br><span class="line">Context: unconfined_u:object_r:admin_home_t:s0</span><br><span class="line">Access: 2024-04-17 19:25:18.951724354 +0800</span><br><span class="line">Modify: 2024-04-17 19:25:18.951724354 +0800</span><br><span class="line">Change: 2024-04-17 19:25:18.951724354 +0800</span><br><span class="line"></span><br><span class="line">-mtimeï¼šModifyä¿®æ”¹æ—¶é—´</span><br><span class="line">-atimeï¼šAccessè®¿é—®æ—¶é—´</span><br><span class="line">-ctimeï¼šChangeæ—¶é—´æˆ³ä¿®æ”¹æ—¶é—´</span><br><span class="line"></span><br><span class="line">+ï¼šæŸ¥æ‰¾Nå¤©ä¹‹å‰çš„ï¼ˆä¸åŒ…å«ä»Šå¤©ï¼‰</span><br><span class="line">-ï¼šæŸ¥æ‰¾Nå¤©ä¹‹å†…çš„ï¼ˆåŒ…å«ä»Šå¤©ï¼‰</span><br><span class="line">Nï¼šæŸ¥æ‰¾å¾€å‰æ•°ç¬¬Nå¤©çš„ï¼ˆä¸åŒ…å«ä»Šå¤©ï¼‰  ï¼ˆ-mtimeååªæœ‰æ•°å­—çš„ï¼‰</span><br><span class="line"></span><br><span class="line"><span class="comment">## ä¸åŠ ä»»ä½•ç¬¦å·ï¼šæŸ¥æ‰¾ä¸ç®—ä»Šå¤©å¾€å‰æ•°ç¬¬7å¤©çš„æ–‡ä»¶</span></span><br><span class="line">-mtime 7</span><br><span class="line">[root@localhost find]# find /root/find/ -mtime 7</span><br><span class="line"></span><br><span class="line"><span class="comment">## +7 ä¸ç®—ä»Šå¤©å¾€å‰æ•°ç¬¬ä¸ƒå¤©ä¹‹å‰çš„æ–‡ä»¶</span></span><br><span class="line">[root@localhost find]# find /root/find/ -mtime +7</span><br><span class="line"><span class="comment">## -7 ç®—ä»Šå¤©ï¼Œæœ€è¿‘7å¤©çš„æ–‡ä»¶</span></span><br><span class="line">[root@localhost find]# find /root/find/ -mtime -7</span><br><span class="line"><span class="comment">## éœ€æ±‚ï¼šä¿ç•™ä¸€å‘¨çš„æ•°æ®</span></span><br><span class="line">[root@localhost find]# find /root/find/ ! -mtime -7 -delete</span><br></pre></td></tr></table></figure><h3 id="æ ¹æ®ç”¨æˆ·æŸ¥æ‰¾">æ ¹æ®ç”¨æˆ·æŸ¥æ‰¾</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">-userï¼šæŸ¥æ‰¾æŒ‡å®šç”¨æˆ·</span><br><span class="line">-groupï¼šæŸ¥æ‰¾æŒ‡å®šç”¨æˆ·ç»„</span><br><span class="line">-nouserï¼šæŸ¥æ‰¾æ²¡æœ‰ç”¨æˆ·çš„æ–‡ä»¶</span><br><span class="line">-nogroupï¼šæŸ¥æ‰¾æ²¡æœ‰ç”¨æˆ·ç»„çš„æ–‡ä»¶</span><br><span class="line"><span class="comment">## æŸ¥æ‰¾å±äºrootç”¨æˆ·admç»„çš„æ–‡ä»¶</span></span><br><span class="line">[root@localhost ~]# find /root/ -user root -group adm -<span class="built_in">ls</span></span><br><span class="line"><span class="comment">## æŸ¥æ‰¾useræ˜¯zlsï¼Œæˆ–groupæ˜¯admç»„çš„æ–‡ä»¶</span></span><br><span class="line">[root@localhost ~]# find /root/ \( -group adm -o -user zls \) -<span class="built_in">ls</span></span><br><span class="line">16797763 4 -rw-r--r-- 1 zls root 4 Apr 17 2024 /root/1.txt</span><br><span class="line">16797778 4 -rw-r--r-- 1 zls root 4 Apr 16 2024 /root/2.txt</span><br><span class="line">16797816 4 -rw-r--r-- 1 root adm 4 Apr 17 2024</span><br><span class="line">/root/zls.txt</span><br><span class="line">16851189 4 -rw-r--r-- 1 root adm 4 Apr 16 2024</span><br><span class="line">/root/zls1.txt</span><br><span class="line">16851191 4 -rw-r--r-- 1 root adm 4 Apr 16 2024</span><br><span class="line">/root/zls2.txt</span><br><span class="line">16797780 4 -rw-r--r-- 1 root adm 4 Apr 16 2024</span><br><span class="line">/root/zls3.txt</span><br><span class="line">16797813 4 -rw-r--r-- 1 root adm 4 Apr 16 2024</span><br><span class="line">/root/zls4.txt</span><br><span class="line">[root@localhost ~]# find /root/ \( -user zls -o -group adm \)</span><br><span class="line">-rw-r--r--. 1 zls root 4 Apr 17 2024 /root/1.txt</span><br><span class="line">-rw-r--r--. 1 zls root 4 Apr 16 2024 /root/2.txt</span><br><span class="line">-rw-r--r--. 1 root adm 4 Apr 16 2024 /root/zls1.txt</span><br><span class="line">-rw-r--r--. 1 root adm 4 Apr 16 2024 /root/zls2.txt</span><br><span class="line">-rw-r--r--. 1 root adm 4 Apr 16 2024 /root/zls3.txt</span><br><span class="line">-rw-r--r--. 1 root adm 4 Apr 16 2024 /root/zls4.txt</span><br><span class="line">-rw-r--r--. 1 root adm 4 Apr 17 2024 /root/zls.txt</span><br><span class="line"><span class="comment">## æŸ¥æ‰¾æ²¡æœ‰ç”¨æˆ·æˆ–è€…æ²¡æœ‰ç»„çš„æ–‡ä»¶</span></span><br><span class="line">[root@localhost opt]# find /opt/ -nouser -o -nogroup</span><br></pre></td></tr></table></figure><h3 id="æ ¹æ®æ–‡ä»¶æƒé™æŸ¥æ‰¾">æ ¹æ®æ–‡ä»¶æƒé™æŸ¥æ‰¾</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">perm</span><br><span class="line"><span class="comment">## ç²¾ç¡®æŸ¥æ‰¾æ–‡ä»¶çš„æƒé™644</span></span><br><span class="line">[root@localhost opt]# find /opt/ -perm 644 -<span class="built_in">ls</span></span><br><span class="line">16851186 0 -rw-r--r-- 1 1000 oldboyedu 0 Apr 15 2024</span><br><span class="line">/opt/sbit/1.txt</span><br><span class="line">16851188 0 -rw-r--r-- 1 oldboy oldboyedu 0 Apr 15 2024</span><br><span class="line">/opt/sbit/2.txt</span><br><span class="line">8393463 0 -rw-r--r-- 1 1002 root 0 Mar 30 00:19 /opt/1.txt</span><br><span class="line">8393464 0 -rw-r--r-- 1 root 1000 0 Mar 30 00:19 /opt/2.txt</span><br><span class="line"><span class="comment">## -ï¼šä»£è¡¨è¯¥æƒé™ä½ä¸Šï¼Œå¿…é¡»åŒ…å«è¯¥æ•°å­—æƒé™622 rw w w</span></span><br><span class="line">[root@localhost opt]# find /opt/ -perm -622 -<span class="built_in">ls</span></span><br><span class="line">16851181 0 drwxrwxrwt 2 root root 32 Apr 15 2024 /opt/sbit</span><br><span class="line"><span class="comment">## /ï¼šæ‹¥æœ‰è€…è‡³å°‘æœ‰ræˆ–wæƒé™, æˆ–è€…æ‹¥æœ‰ç»„è‡³å°‘æœ‰wæƒé™, æˆ–è€…åŒ¿åè‡³å°‘æœ‰wæƒé™</span></span><br><span class="line">[root@zls ~]# find /home -perm /622</span><br><span class="line">8405111 0 drwxr-xr-x 4 root root 77 Mar 30 00:19 /opt/</span><br><span class="line">16777 0 drwxr-sr-x 2 1000 root 19 Apr 15 2024 /opt/test</span><br><span class="line">16779 0 -rw-rw-r-- 1 1000 root 0 Apr 15 2024</span><br><span class="line">/opt/test/1.txt</span><br><span class="line">16851181 0 drwxrwxrwt 2 root root 32 Apr 15 2024 /opt/sbit</span><br><span class="line">16851186 0 -rw-r--r-- 1 1000 oldboyedu 0 Apr 15 2024</span><br><span class="line">/opt/sbit/1.txt</span><br><span class="line">16851188 0 -rw-r--r-- 1 oldboy oldboyedu 0 Apr 15 2024</span><br><span class="line">/opt/sbit/2.txt</span><br><span class="line">8393448 12 -rw------- 1 root root 9567 Apr 16 2024</span><br><span class="line">/opt/.bash_history</span><br><span class="line">8393463 0 -rw-r--r-- 1 1002 root 0 Mar 30 00:19 /opt/1.txt</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ ¹æ®æ·±åº¦æŸ¥æ‰¾">æ ¹æ®æ·±åº¦æŸ¥æ‰¾</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# find /etc/ -maxdepth 1 -<span class="built_in">type</span> d</span><br></pre></td></tr></table></figure><h3 id="åŠ¨ä½œ">åŠ¨ä½œ</h3><table><thead><tr><th>åŠ¨ä½œ</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>-print</td><td>æ‰“å°ç»“æœï¼ˆfind é»˜è®¤å°±æ‰“å°ç»“æœï¼‰</td></tr><tr><td>-ls</td><td>æŸ¥çœ‹æ–‡ä»¶è¯¦ç»†ä¿¡æ¯ï¼ˆå¦‚æœæœ‰é€»è¾‘è¿ç®—ç¬¦ï¼Œå°±åªæŸ¥çœ‹é€»è¾‘è¿ç®—ç¬¦åé¢æ–‡ä»¶è¯¦ç»†ä¿¡æ¯ï¼Œé™¤é ä½¿ç”¨å°æ‹¬å·æ•´ä½“æ‹¬èµ·æ¥ï¼‰</td></tr><tr><td>- delete</td><td>åˆ é™¤æŸ¥æ‰¾åˆ°çš„æ–‡ä»¶ï¼ˆå¦‚æœæœ‰é€»è¾‘è¿ç®—ç¬¦ï¼Œå°±åªæŸ¥çœ‹é€»è¾‘è¿ç®—ç¬¦åé¢æ–‡ä»¶è¯¦ç»†ä¿¡æ¯ï¼Œé™¤é ä½¿ç”¨å°æ‹¬å·æ•´ä½“æ‹¬èµ·æ¥ï¼‰</td></tr><tr><td>-ok</td><td>æ‰§è¡Œåé¢çš„shellå‘½ä»¤ï¼ˆä¼šè¯¢é—®ï¼‰ï¼ˆå¦‚æœæœ‰é€»è¾‘è¿ç®—ç¬¦ï¼Œå°±åªæŸ¥çœ‹é€»è¾‘è¿ç®—ç¬¦åé¢æ–‡ä»¶è¯¦ ç»†ä¿¡æ¯ï¼Œé™¤éä½¿ç”¨å°æ‹¬å·æ•´ä½“æ‹¬èµ·æ¥ï¼‰</td></tr><tr><td>-exec</td><td>æ‰§è¡Œåé¢çš„shellå‘½ä»¤ï¼ˆä¸è¯¢é—®ï¼‰ï¼ˆå¦‚æœæœ‰é€»è¾‘è¿ç®—ç¬¦ï¼Œå°±åªæŸ¥çœ‹é€»è¾‘è¿ç®—ç¬¦åé¢æ–‡ä»¶è¯¦ ç»†ä¿¡æ¯ï¼Œé™¤éä½¿ç”¨å°æ‹¬å·æ•´ä½“æ‹¬èµ·æ¥ï¼‰</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# find /opt/ -<span class="built_in">type</span> f -o -name <span class="string">&#x27;*st&#x27;</span> -<span class="built_in">exec</span> <span class="built_in">rm</span> -fr &#123;&#125; \;</span><br><span class="line">[root@localhost ~]# find /opt/ -<span class="built_in">type</span> f -o -name <span class="string">&#x27;*st&#x27;</span> -ok <span class="built_in">rm</span> -fr &#123;&#125; \;</span><br><span class="line"><span class="comment">## ä»¥ååŠ¨ä½œéƒ½æ”¹ä¸ºxargs åé¢åŠ å‘½ä»¤</span></span><br><span class="line">[root@localhost ~]# find /opt/ -<span class="built_in">type</span> f -o -name <span class="string">&#x27;*st&#x27;</span>|xargs <span class="built_in">rm</span> -fr</span><br><span class="line"><span class="comment">## æ‹·è´</span></span><br><span class="line">[root@localhost ~]# find /root/ -<span class="built_in">type</span> f|xargs <span class="built_in">cp</span> -t /tmp/</span><br><span class="line">[root@localhost ~]# find /root/ -<span class="built_in">type</span> d|xargs -I &#123;&#125; <span class="built_in">cp</span> -r &#123;&#125; /opt/</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linuxæ•²é—¨ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>16.rpmåŒ…ç®¡ç†</title>
      <link href="/posts/ece47c22.html"/>
      <url>/posts/ece47c22.html</url>
      
        <content type="html"><![CDATA[<div class='wow animate__heartBeat' data-wow-duration='' data-wow-delay='1s' data-wow-offset=''  data-wow-iteration='2' ><div class="note red icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p><a href="https://www.lukeme.top/posts/4c7367cf.html">å‘Šåˆ«å°ç™½ï¼Œç‚¹å‡»ç›´è¾¾</a></p></div></div><h3 id="RPMåŒ…ç®¡ç†">RPMåŒ…ç®¡ç†</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># RPMå…¨ç§° RPM Package Manager ç¼©å†™ï¼Œç”±çº¢å¸½å¼€å‘ç”¨äºè½¯ä»¶åŒ…çš„å®‰è£…ï¼Œå‡çº§å¸è½½ä¸æŸ¥è¯¢</span></span><br></pre></td></tr></table></figure><p><strong>RPMåŒ…å</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tree-  1.6.0  -  10        . el7      .     x86_64    .rpm</span><br><span class="line">åŒ…å   ç‰ˆæœ¬å·   å‘å¸ƒäº†10æ¬¡   é€‚ç”¨äº7ç³»ç³»ç»Ÿ    ç³»ç»Ÿæ¶æ„   æ–‡ä»¶åç¼€</span><br></pre></td></tr></table></figure><h3 id="Linuxä¸­è½¯ä»¶åŒ…ç±»å‹">Linuxä¸­è½¯ä»¶åŒ…ç±»å‹</h3><table><thead><tr><th>åˆ†ç±»</th><th>å®‰è£…</th><th>ç‰ˆæœ¬</th></tr></thead><tbody><tr><td>rpmåŒ…ï¼ˆéœ€è¦å®‰è£…ï¼‰</td><td>é¢„å…ˆç¼–è¯‘æ‰“åŒ…,å®‰è£…ç®€å•</td><td>è½¯ä»¶ç‰ˆæœ¬åä½</td></tr><tr><td>æºç åŒ…ï¼ˆéœ€è¦ç¼–è¯‘ã€å®‰è£…ï¼‰</td><td>æ‰‹åŠ¨ç¼–è¯‘æ‰“åŒ…,å®‰è£…ç¹ç</td><td>è½¯ä»¶ç‰ˆæœ¬æœ€æ–°</td></tr><tr><td>äºŒè¿›åˆ¶åŒ…(ç»¿è‰²å…å®‰è£…è½¯ä»¶)</td><td>è§£å‹å³å¯ä½¿ç”¨, å®‰è£…ç®€å•</td><td>ç‰ˆæœ¬è·Ÿå®˜æ–¹ä¿æŒä¸€è‡´ï¼Œä¸èƒ½ä¿®æ”¹æºç </td></tr></tbody></table><p>##æ³¨æ„: ä¸ç®¡æ˜¯æºç åŒ…ï¼Œè¿˜æ˜¯rpmåŒ…,å®‰è£…æ—¶éƒ½å¯èƒ½ä¼šæœ‰ä¾èµ–å…³ç³»</p><h3 id="å¦‚ä½•è·å–RPMåŒ…">å¦‚ä½•è·å–RPMåŒ…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">1.RedHatå…‰ç›˜æˆ–å®˜æ–¹ç½‘ç«™ ï¼ˆé€šè¿‡æŒ‚è½½çš„æ–¹å¼è®¿é—®ï¼‰</span><br><span class="line">[root@localhost ~]# mount /dev/cdrom /mnt    mountæŒ‚è½½è™šæ‹Ÿæœºè®¾ç½®é•œåƒä¿æŒè¿æ¥çŠ¶æ€</span><br><span class="line">mount: /dev/sr0 is write-protected, mounting read-only</span><br><span class="line">[root@localhost ~]# <span class="built_in">ls</span> -1 /mnt/Packages/|<span class="built_in">wc</span> -l     <span class="built_in">ls</span> -1æŸ¥çœ‹å†…å®¹ç«–å‘æ’åˆ—</span><br><span class="line">4022</span><br><span class="line"><span class="built_in">df</span> -h   å¯ä»¥æŸ¥çœ‹æŒ‚è½½æƒ…å†µ</span><br><span class="line">[root@lb01 ~]# <span class="built_in">df</span> -h</span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/sda3        19G  1.6G   18G   9% /</span><br><span class="line">devtmpfs        476M     0  476M   0% /dev</span><br><span class="line">tmpfs           487M     0  487M   0% /dev/shm</span><br><span class="line">tmpfs           487M  7.6M  479M   2% /run</span><br><span class="line">tmpfs           487M     0  487M   0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1       497M  120M  378M  25% /boot</span><br><span class="line">tmpfs            98M     0   98M   0% /run/user/0</span><br><span class="line">/dev/sr0        4.3G  4.3G     0 100% /mnt</span><br><span class="line"></span><br><span class="line">2.RPMåŒ…å®˜ç½‘ http://rpmfind.net/</span><br><span class="line">ä»¥åæŠ¥é”™ä¸­ï¼ŒlibCHARSET3-samba4.so .soç»“å°¾çš„æ–‡ä»¶ä¸å­˜åœ¨ï¼Œéœ€è¦å®‰è£…ï¼Œä¸çŸ¥é“è¾“å…¥å“ªä¸ªRPMåŒ…ï¼Œå»RPMå®˜ç½‘æŸ¥è¯¢å³å¯</span><br><span class="line"></span><br><span class="line"><span class="comment">## å„å¤§æœåŠ¡çš„å®˜ç½‘</span></span><br><span class="line">mysqlï¼šhttps://www.mysql.com/</span><br><span class="line">nginxï¼šhttps://www.nginx.org/</span><br><span class="line"></span><br><span class="line"><span class="comment"># å„å¤§é•œåƒç«™ï¼ˆyumä»“åº“ï¼Œyumæºï¼‰ï¼š</span></span><br><span class="line">é˜¿é‡Œäº‘ï¼šhttps://developer.aliyun.com/mirror/</span><br><span class="line">ç½‘æ˜“é•œåƒç«™ï¼šhttps://mirrors.163.com/</span><br><span class="line">åä¸ºæºï¼šhttps://mirrors.huaweicloud.com/</span><br><span class="line">æ¸…åæºï¼šhttps://mirrors.tuna.tsinghua.edu.cn/</span><br><span class="line">ä¸­ç§‘å¤§ï¼šhttps://mirrors.ustc.edu.cn/</span><br></pre></td></tr></table></figure><h3 id="RPMåŒ…ç®¡ç†-2">RPMåŒ…ç®¡ç†</h3><h3 id="â€“å®‰è£…RPMåŒ…">â€“å®‰è£…RPMåŒ…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## è¯­æ³•ï¼š</span></span><br><span class="line">rpm [é€‰é¡¹] å®‰è£…åŒ…å</span><br><span class="line">iï¼šinstall å®‰è£…</span><br><span class="line">vï¼šæ˜¾ç¤ºå®‰è£…è¿‡ç¨‹</span><br><span class="line">hï¼šæ˜¾ç¤ºè¿›åº¦æ¡</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--<span class="built_in">test</span>ï¼šæ£€æµ‹æ˜¯å¦èƒ½å®‰è£…æˆåŠŸ</span><br><span class="line">--forceï¼šå¼ºåˆ¶å®‰è£…</span><br><span class="line">--nodepsï¼šå¿½ç•¥ä¾èµ–å…³ç³»</span><br><span class="line"></span><br><span class="line"><span class="comment">## æœ¬åœ°å®‰è£…    éœ€è¦æŒ‚è½½é•œåƒè¿›å…¥åˆ°Packagesæ–‡ä»¶é‡Œ</span></span><br><span class="line">[root@localhost Packages]# rpm -i tree-1.6.0-10.el7.x86_64.rpm  </span><br><span class="line">[root@localhost ~]# rpm -ivh /mnt/Packages/unzip-6.0-19.el7.x86_64.rpm</span><br><span class="line"></span><br><span class="line"><span class="comment">## è¿œç¨‹å®‰è£…</span></span><br><span class="line">[root@localhost Packages]# rpm -i https://mirrors.aliyun.com/centos/7.9.2009/os/x86_64/Packages/tree-1.6.0-10.el7.x86_64.rpm</span><br><span class="line">[root@localhost Packages]# rpm -ivh https://mirrors.aliyun.com/centos/7.9.2009/os/x86_64/Packages/tree-1.6.0-10.el7.x86_64.rpm     </span><br><span class="line">æ˜¾ç¤ºè¿›åº¦æ¡å’Œå®‰è£…è¿‡ç¨‹</span><br></pre></td></tr></table></figure><h3 id="æŸ¥è¯¢RPMåŒ…">æŸ¥è¯¢RPMåŒ…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">-qï¼š query æŸ¥è¯¢</span><br><span class="line">-qaï¼šæŸ¥è¯¢ç³»ç»Ÿå†…æ‰€æœ‰å®‰è£…è¿‡çš„åŒ…</span><br><span class="line">-qlï¼šæŸ¥è¯¢è½¯ä»¶åŒ…å®‰è£…å®Œåï¼Œé…ç½®æ–‡ä»¶ã€å¸®åŠ©æ–‡æ¡£ã€ç¨‹åº....çš„æ‰€åœ¨ç›®å½•ï¼ˆ[# rpm -ql nginxï¼‰</span><br><span class="line">-qcï¼šæŸ¥è¯¢è½¯ä»¶å®‰è£…åé…ç½®æ–‡ä»¶  confé…ç½®æ–‡ä»¶ï¼ˆ# rpm -qc nginxï¼‰</span><br><span class="line">-qfï¼šé€†å‘æŸ¥è¯¢ï¼Œæ ¹æ®æ–‡ä»¶åï¼Œå¯ä»¥æŸ¥å‡ºè¯¥æ–‡ä»¶æ˜¯å®‰è£…äº†å“ªä¸ªRPMåŒ…   ï¼ˆéœ€è¦å®Œæ•´ç›®å½•ï¼‰ï¼ˆ# rpm -qf /usr/sbin/nginxï¼‰</span><br><span class="line"><span class="comment">## è¿™ä¸ªæ–‡ä»¶/etc/redhat-releaseå±äºå“ªä¸ªRPMåŒ…ï¼Œè¯¥åŒ…çš„ç›¸å…³ä¿¡æ¯æ‰“å°å‡ºæ¥</span></span><br><span class="line">1.[root@localhost ~]# rpm -qi $(rpm -qf /etc/redhat-release)</span><br><span class="line">2.[root@localhost ~]# rpm -qf /etc/redhat-release|xargs rpm -qi</span><br><span class="line">3.[root@localhost ~]# rpm -qif /etc/redhat-release</span><br><span class="line"></span><br><span class="line">----</span><br><span class="line"><span class="comment">## -q --scripts æŸ¥è¯¢å®‰è£…æ—¶è¦æ‰§è¡Œçš„è„šæœ¬</span></span><br><span class="line">[root@localhost ~]# rpm -q --scripts nginx</span><br><span class="line">----</span><br><span class="line"></span><br><span class="line">-qiï¼šæŸ¥çœ‹å·²å®‰è£…å®‰è£…åŒ…çš„è¯¦ç»†ä¿¡æ¯   (åé¢è·ŸåŒ…å)</span><br><span class="line">-qdï¼šæŸ¥çœ‹å¸®åŠ©æ–‡æ¡£ä½ç½®</span><br><span class="line">-qipï¼šå¯ä»¥æŸ¥çœ‹æœªå®‰è£…çš„åŒ…è¯¦ç»†ä¿¡æ¯  å‰æï¼šå¾—æœ‰è¿™ä¸ªåŒ…</span><br><span class="line">[root@localhost ~]# rpm -qip /mnt/Packages/zip-3.0-11.el7.x86_64.rpm</span><br><span class="line">-qlpï¼šå¯ä»¥æŸ¥çœ‹æœªå®‰è£…çš„åŒ…ï¼Œå®‰è£…åä¼šäº§ç”Ÿå“ªäº›æ–‡ä»¶</span><br><span class="line">[root@localhost ~]# rpm -qlp /mnt/Packages/zip-3.0-11.el7.x86_64.rpm</span><br><span class="line">/usr/bin/zip</span><br><span class="line">/usr/bin/zipcloak</span><br><span class="line">/usr/bin/zipnote</span><br><span class="line">/usr/bin/zipsplit</span><br><span class="line">/usr/share/doc/zip-3.0</span><br><span class="line">/usr/share/doc/zip-3.0/CHANGES</span><br><span class="line">/usr/share/doc/zip-3.0/LICENSE</span><br><span class="line"></span><br><span class="line"><span class="comment">## -qåé¢æ¥åŒ…å</span></span><br><span class="line">[root@localhost ~]# rpm -q tree // å®‰è£…è¿‡äº†</span><br><span class="line">tree-1.6.0-10.el7.x86_64</span><br><span class="line">[root@localhost ~]# rpm -q tree // æ²¡æœ‰å®‰è£…</span><br><span class="line">package tree is not installed</span><br><span class="line"><span class="comment">## è¿‡æ»¤æŸ¥è¯¢æ˜¯å¦å®‰è£…</span></span><br><span class="line">[root@localhost ~]# rpm -qa|grep tree</span><br><span class="line">tree-1.6.0-10.el7.x86_64</span><br><span class="line">[root@localhost ~]# rpm -qa|grep mysql</span><br><span class="line">[root@localhost ~]# rpm -qa|grep nginx</span><br><span class="line"><span class="comment">## æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line">[root@localhost ~]# rpm -qi tree</span><br><span class="line">Name : tree</span><br><span class="line">Version : 1.6.0</span><br><span class="line">Release : 10.el7</span><br><span class="line">Architecture: x86_64</span><br><span class="line">Install Date: Fri 19 Apr 2024 08:05:31 PM CST</span><br><span class="line">Group : Applications/File</span><br><span class="line">Size : 89505</span><br><span class="line">License : GPLv2+</span><br><span class="line">Signature : RSA/SHA256, Fri 04 Jul 2014 01:36:46 PM CST, Key ID</span><br><span class="line">24c6a8a7f4a80eb5</span><br><span class="line">Source RPM : tree-1.6.0-10.el7.src.rpm</span><br><span class="line">Build Date : Tue 10 Jun 2014 03:28:53 AM CST</span><br><span class="line">Build Host : worker1.bsys.centos.org</span><br><span class="line">Relocations : (not relocatable)</span><br><span class="line">Packager : CentOS BuildSystem &lt;http://bugs.centos.org&gt;</span><br><span class="line">Vendor : CentOS</span><br><span class="line">URL : http://mama.indstate.edu/users/ice/tree/</span><br><span class="line">Summary : File system tree viewer</span><br><span class="line">Description :</span><br><span class="line">The tree utility recursively displays the contents of directories <span class="keyword">in</span> a</span><br><span class="line">tree-like format. Tree is basically a UNIX port of the DOS tree</span><br><span class="line">utility.</span><br><span class="line"><span class="comment">## æŸ¥æ‰¾å®‰è£…åç¨‹åºçš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@localhost ~]# rpm -qc nginx</span><br><span class="line">/etc/logrotate.d/nginx</span><br><span class="line">/etc/nginx/fastcgi.conf</span><br><span class="line">/etc/nginx/fastcgi.conf.default</span><br><span class="line">/etc/nginx/fastcgi_params</span><br><span class="line">/etc/nginx/fastcgi_params.default</span><br><span class="line">/etc/nginx/koi-utf</span><br><span class="line">/etc/nginx/koi-win</span><br><span class="line">/etc/nginx/mime.types</span><br><span class="line">/etc/nginx/mime.types.default</span><br><span class="line">/etc/nginx/nginx.conf</span><br><span class="line">/etc/nginx/nginx.conf.default</span><br><span class="line">/etc/nginx/scgi_params</span><br><span class="line">/etc/nginx/scgi_params.default</span><br><span class="line">/etc/nginx/uwsgi_params</span><br><span class="line">/etc/nginx/uwsgi_params.default</span><br><span class="line">/etc/nginx/win-utf</span><br><span class="line"><span class="comment">## é€†å‘æŸ¥è¯¢</span></span><br><span class="line">[root@localhost ~]# rpm -qf /etc/hosts</span><br><span class="line">setup-2.8.71-10.el7.noarch</span><br><span class="line">[root@localhost ~]# rpm -qf /usr/sbin/ifconfig</span><br><span class="line">net-tools-2.0-0.25.20131004git.el7.x86_64</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å¸è½½RPMåŒ…">å¸è½½RPMåŒ…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## å¸è½½</span></span><br><span class="line">[root@localhost ~]# rpm -e tree</span><br></pre></td></tr></table></figure><h3 id="å‡çº§RPMåŒ…">å‡çº§RPMåŒ…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-U å¦‚æœè€ç‰ˆæœ¬ä¸å­˜åœ¨ï¼Œå°±å…¨æ–°å®‰è£…ï¼Œå¦‚æœå­˜åœ¨æœ‰æ–°ç‰ˆå³å‡çº§</span><br><span class="line">-f è€ç‰ˆæœ¬å¿…é¡»å­˜åœ¨</span><br><span class="line">[root@localhost ~]# rpm -fvh tree-1.8.0-2.mga8.x86_64.rpm</span><br><span class="line">[root@localhost ~]# rpm -Uvh tree-1.8.0-2.mga8.x86_64.rpm</span><br></pre></td></tr></table></figure><h3 id="rpmæ€»ç»“">rpmæ€»ç»“</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ç¼ºé™·</span><br><span class="line">1.rpmåŒ…ç®¡ç†æ— æ³•è§£å†³åŒ…ä¸åŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»</span><br><span class="line">2.rpmåŒ…çš„æŸ¥è¯¢ï¼ŒåŸºæœ¬ä¸Šéƒ½éœ€è¦å·²ç»å®‰è£…è¿‡çš„åŒ…</span><br><span class="line"></span><br><span class="line">ä¼˜ç‚¹ï¼š</span><br><span class="line">1.ä¸éœ€è¦ç½‘ç»œå®‰è£…</span><br><span class="line">2.å®‰è£…é€Ÿåº¦å¿«</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linuxæ•²é—¨ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>07.æ–‡ä»¶æˆªå–è¿‡æ»¤å‘½ä»¤</title>
      <link href="/posts/f88bbfea.html"/>
      <url>/posts/f88bbfea.html</url>
      
        <content type="html"><![CDATA[<div class='wow animate__heartBeat' data-wow-duration='' data-wow-delay='1s' data-wow-offset=''  data-wow-iteration='2' ><div class="note red icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p><a href="https://www.lukeme.top/posts/4c7367cf.html">å‘Šåˆ«å°ç™½ï¼Œç‚¹å‡»ç›´è¾¾</a></p></div></div><h3 id="æ–‡ä»¶ä¸Šä¼ ä¸‹è½½å‘½ä»¤wget">æ–‡ä»¶ä¸Šä¼ ä¸‹è½½å‘½ä»¤wget</h3><table><thead><tr><th>é€‰é¡¹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>-O</td><td>æŒ‡å®šä¸‹è½½è·¯å¾„ï¼Œä¹Ÿå¯ä»¥ç»™å®ƒæ”¹å</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## ä¸‹è½½</span></span><br><span class="line">wget å¯ä»¥ç”¨å¤–ç½‘ä¸‹è½½ä¸œè¥¿åˆ°æœåŠ¡å™¨ä¸­</span><br><span class="line">-bash: wget: <span class="built_in">command</span> not foundæ²¡æœ‰æ‰¾åˆ°wgetå‘½ä»¤</span><br><span class="line">[root@localhost ~]# yum install -y wget</span><br><span class="line">[root@localhost ~]# wget https://dldir1.qq.com/qqfile/qq/QQNT/Linux/QQ_3.2.7_240401_x86_64_01.rpm</span><br><span class="line"></span><br><span class="line"><span class="comment">##æœåŠ¡å™¨ä¸Šä¼ ä¸‹è½½</span></span><br><span class="line">[root@localhost ~]# yum install -y lrzsz</span><br><span class="line"><span class="comment">## è™šæ‹Ÿæœºæ–‡ä»¶ä¸‹è½½åˆ°ç‰©ç†æœº</span></span><br><span class="line">[root@localhost ~]# sz w700d1q75cms.jpg</span><br><span class="line"><span class="comment">## ç‰©ç†æœºæ–‡ä»¶ä¸Šä¼ åˆ°è™šæ‹Ÿæœº</span></span><br><span class="line">[root@localhost ~]# rz</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ–‡ä»¶æŸ¥æ‰¾å‘½ä»¤">æ–‡ä»¶æŸ¥æ‰¾å‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## æŸ¥çœ‹å‘½ä»¤çš„ç»å¯¹è·¯å¾„</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">which</span> <span class="built_in">ls</span></span><br><span class="line"><span class="built_in">alias</span> <span class="built_in">ls</span>=<span class="string">&#x27;ls --color=auto&#x27;</span></span><br><span class="line">/usr/bin/ls</span><br><span class="line">[root@localhost ~]# <span class="built_in">which</span> ifconfig</span><br><span class="line">/usr/sbin/ifconfig</span><br></pre></td></tr></table></figure><h3 id="å­—ç¬¦ä¸²å¤„ç†å‘½ä»¤sort">å­—ç¬¦ä¸²å¤„ç†å‘½ä»¤sort</h3><table><thead><tr><th>é€‰é¡¹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>-k</td><td>æŒ‰ç…§æŒ‡å®šåˆ—è¿›è¡Œæ’åºï¼ˆé»˜è®¤ä»¥ç©ºæ ¼ä¸ºåˆ†éš”ç¬¦ï¼‰</td></tr><tr><td>-t</td><td>æŒ‡å®šæ–‡ä»¶çš„åˆ†éš”ç¬¦</td></tr><tr><td>-n</td><td>ä»¥é˜¿æ‹‰ä¼¯æ•°å­—çš„å½¢å¼è¿›è¡Œæ’åº</td></tr><tr><td>-r</td><td>reverse å€’å™æ’åº</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">è¯­æ³•ï¼š</span><br><span class="line"><span class="built_in">sort</span> [é€‰é¡¹]... [æ–‡ä»¶]...</span><br><span class="line"><span class="comment">## æ’åº1.txtæ–‡ä»¶</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">sort</span> 1.txt</span><br><span class="line">a:4</span><br><span class="line">b:3</span><br><span class="line">c:2</span><br><span class="line">d:1</span><br><span class="line">e:5</span><br><span class="line">f:11</span><br><span class="line">æ€»ç»“ï¼š</span><br><span class="line">1ï¼‰é»˜è®¤æƒ…å†µä¸‹ <span class="built_in">sort</span>æŒ‰ç…§æ–‡ä»¶æ¯ä¸€è¡Œçš„é¦–å­—æ¯è¿›è¡Œæ’åº</span><br><span class="line">2ï¼‰é»˜è®¤æƒ…å†µä¸‹ åœ¨<span class="built_in">sort</span>çœ¼é‡Œåˆ†éš”ç¬¦åªæœ‰ç©ºæ ¼</span><br><span class="line">3ï¼‰åœ¨<span class="built_in">sort</span>å‘½ä»¤ä¸­ï¼Œåˆ†éš”ç¬¦ï¼Œå¿…é¡»æ˜¯ä¸€ä¸ªå­—ç¬¦ï¼Œä¸èƒ½ä¸ºç©º</span><br><span class="line"><span class="comment">## å¦‚æœç¬¬å››åˆ—é»˜è®¤ç›¸åŒï¼Œè¿˜å¯ä»¥åŠ ä¸€ä¸ª-k2å†ä»¥ç¬¬äºŒåˆ—æ’åº</span></span><br><span class="line"><span class="built_in">sort</span> -k2 -k4 11.txt</span><br></pre></td></tr></table></figure><h3 id="å»é‡å¤å‘½ä»¤â€”uniq">å»é‡å¤å‘½ä»¤â€”uniq</h3><table><thead><tr><th>é€‰é¡¹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>-c</td><td>ç»Ÿè®¡é‡å¤æ¬¡æ•°ï¼Œå¹¶æ˜¾ç¤º</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">uniq</span> [é€‰é¡¹]... [æ–‡ä»¶]...</span><br><span class="line">å‰ææ¡ä»¶ï¼šé‡å¤è¡Œçš„å†…å®¹ï¼Œå¿…é¡»æŒ¨ç€ï¼Œå¦åˆ™æ— æ³•å»é‡</span><br><span class="line"><span class="comment">## æ— æ³•å»é‡</span></span><br><span class="line">abc</span><br><span class="line">123</span><br><span class="line">abc</span><br><span class="line">123</span><br><span class="line"><span class="comment">## å¯ä»¥å»é‡</span></span><br><span class="line">abc</span><br><span class="line">abc</span><br><span class="line">123</span><br><span class="line">123</span><br><span class="line"><span class="comment">## åªå»é‡</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> uniq.txt</span><br><span class="line">abc</span><br><span class="line">123</span><br><span class="line">abc</span><br><span class="line">123</span><br><span class="line">[root@localhost ~]# <span class="built_in">sort</span> uniq.txt |<span class="built_in">uniq</span></span><br><span class="line">123</span><br><span class="line">abc</span><br><span class="line"><span class="comment">## å»é‡å¹¶ç»Ÿè®¡é‡å¤æ¬¡æ•°</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">sort</span> uniq.txt|<span class="built_in">uniq</span> -c</span><br><span class="line">2 123</span><br><span class="line">2 abc</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æˆªå–å‘½ä»¤â€”cut">æˆªå–å‘½ä»¤â€”cut</h3><table><thead><tr><th>é€‰é¡¹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>-d</td><td>æŒ‡å®šåˆ†éš”ç¬¦</td></tr><tr><td>-f</td><td>æŒ‡å®šåŒºåŸŸ</td></tr><tr><td>-n</td><td>æŒ‡å®šè¡Œ</td></tr><tr><td>-c</td><td>æŒ‰ç…§å­—ç¬¦æˆªå–</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¯­æ³•</span></span><br><span class="line"><span class="built_in">cut</span> OPTION... [FILE]...</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# <span class="built_in">cut</span> -d <span class="string">&#x27; &#x27;</span> -f 6 4.txt  </span><br><span class="line"><span class="comment">#æˆªå–ä»¥ç©ºæ ¼ä¸ºåˆ†éš”ç¬¦ï¼Œç¬¬6åˆ—å†…å®¹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#-få¯ä»¥æˆªå–å¤šæ®µï¼Œ-f </span></span><br><span class="line">[root@lb01 ~]# ifconfig ens33|grep -w <span class="string">&#x27;inet&#x27;</span>|<span class="built_in">cut</span> -d <span class="string">&#x27; &#x27;</span> -f 10,13</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# <span class="built_in">cut</span> -c 9-10 4.txt</span><br><span class="line"><span class="comment">#æˆªå–ä»¥å­—ç¬¦æ¥ç®—ç¬¬9-10ä¸ºå†…å®¹ï¼ˆéœ€è¦æ•°å­—ç¬¦æ•°ï¼Œä¸å¥½ç”¨ï¼‰</span></span><br><span class="line">ä½¿ç”¨awkå‘½ä»¤æˆªå–ä½¿ç”¨ç¤ºä¾‹</span><br><span class="line">[root@lb02 ~]# ip a|awk -F <span class="string">&#x27;[ /]&#x27;</span> <span class="string">&#x27;NR==9&#123;print $6&#125;&#x27;</span></span><br><span class="line">10.0.0.6</span><br><span class="line">æ³¨æ„ï¼š</span><br><span class="line">1ï¼‰<span class="built_in">cut</span>é»˜è®¤æ²¡æœ‰åˆ†éš”ç¬¦ï¼Œå¿…é¡»æŒ‡å®š</span><br></pre></td></tr></table></figure><h3 id="æ–‡ä»¶ç»Ÿè®¡å‘½ä»¤â€”wc">æ–‡ä»¶ç»Ÿè®¡å‘½ä»¤â€”wc</h3><table><thead><tr><th>é€‰é¡¹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>-l</td><td>line ç»Ÿè®¡è¡Œæ•°</td></tr><tr><td>-w</td><td>word ç»Ÿè®¡å•è¯æ•°é‡</td></tr><tr><td>-c</td><td>char ç»Ÿè®¡å­—ç¬¦æ•°é‡</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">wc</span> [option]... file...</span><br><span class="line"><span class="comment">## ç»Ÿè®¡æ–‡ä»¶çš„ è¡Œæ•° å•è¯æ•° å­—ç¬¦æ•°</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">wc</span> /etc/services</span><br><span class="line">11176 61033 670293 /etc/services</span><br><span class="line">[root@localhost ~]# <span class="built_in">wc</span> -l /etc/services</span><br><span class="line">11176 /etc/services</span><br><span class="line">[root@localhost ~]# <span class="built_in">wc</span> -w /etc/services</span><br><span class="line">61033 /etc/services</span><br><span class="line">[root@localhost ~]# <span class="built_in">wc</span> -c /etc/services</span><br><span class="line">670293 /etc/services</span><br><span class="line"><span class="comment">## éœ€è¦ç»Ÿè®¡çš„å†…å®¹ï¼Œä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œå·¦è¾¹æ˜¯ä¸€ä¸ªäººå‘½ä»¤è¾“å‡ºç»“æœå¯ä»¥éœ€è¦ä½¿ç”¨ç®¡é“ç¬¦</span></span><br><span class="line">[root@localhost ~]# ifconfig |<span class="built_in">wc</span> -w</span><br><span class="line">108</span><br><span class="line">[root@localhost ~]# ip a |<span class="built_in">wc</span> -w</span><br></pre></td></tr></table></figure><h3 id="æ–‡ä»¶ç®¡ç†å‘½ä»¤â€”â€”æ›¿æ¢tr">æ–‡ä»¶ç®¡ç†å‘½ä»¤â€”â€”æ›¿æ¢tr</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## tråªèƒ½æŒ‰ç…§å­—ç¬¦ ä¸€ä¸€å¯¹åº”å–æ›¿æ¢ï¼Œå¦‚æœå‡ºç°ç›¸åŒçš„å­—ç¬¦ï¼Œé‚£ä¹ˆåé¢çš„èµ‹å€¼ä¼šå°†å‰é¢çš„èµ‹å€¼è¦†ç›–</span></span><br><span class="line"><span class="built_in">tr</span> <span class="string">&#x27;è¢«æ›¿æ¢çš„å†…å®¹&#x27;</span> <span class="string">&#x27;æ›¿æ¢å†…å®¹&#x27;</span> &lt; æ–‡ä»¶å</span><br><span class="line">[root@localhost ~]# <span class="built_in">tr</span> <span class="string">&#x27;name&#x27;</span> <span class="string">&#x27;address&#x27;</span> &lt; 2.txt</span><br><span class="line">addr=10.0.0.100</span><br><span class="line">[root@localhost ~]# <span class="built_in">tr</span> <span class="string">&#x27;nameqws&#x27;</span> <span class="string">&#x27;address&#x27;</span> &lt; 2.txt</span><br><span class="line">address=10.0.0.100</span><br><span class="line"><span class="comment">## è¯­æ³•</span></span><br><span class="line">sed <span class="string">&#x27;s/è¢«æ›¿æ¢å†…å®¹/æ›¿æ¢å†…å®¹/g&#x27;</span> æ–‡ä»¶å</span><br><span class="line">[root@localhost ~]# sed <span class="string">&#x27;s///g&#x27;</span> 2.txt</span><br><span class="line">[root@localhost ~]# sed <span class="string">&#x27;s/name/address/g&#x27;</span> 2.txt</span><br><span class="line">address=10.0.0.100</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linuxæ•²é—¨ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>17.yumç®¡ç†</title>
      <link href="/posts/1efb0820.html"/>
      <url>/posts/1efb0820.html</url>
      
        <content type="html"><![CDATA[<div class='wow animate__heartBeat' data-wow-duration='' data-wow-delay='1s' data-wow-offset=''  data-wow-iteration='2' ><div class="note red icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p><a href="https://www.lukeme.top/posts/4c7367cf.html">å‘Šåˆ«å°ç™½ï¼Œç‚¹å‡»ç›´è¾¾</a></p></div></div><h3 id="yumä»‹ç»">yumä»‹ç»</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">1.è”ç½‘è·å–è½¯ä»¶</span><br><span class="line">2.åŸºäºRPMç®¡ç†</span><br><span class="line">3.è‡ªåŠ¨è§£å†³ä¾èµ–ï¼ˆå‰æï¼š1.yumä»“åº“ä¸­å¿…é¡»æœ‰è¯¥ä¾èµ–åŒ… 2.ç‰ˆæœ¬è¦ä¸€è‡´ï¼‰</span><br><span class="line">4.å‘½ä»¤ç®€å•å¥½è®°</span><br><span class="line">5.ç”Ÿäº§æœ€ä½³å®è·µ</span><br><span class="line"></span><br><span class="line">yumæ˜¯RedHatä»¥åŠCentOSä¸­çš„è½¯ä»¶åŒ…ç®¡ç†å™¨ï¼Œèƒ½å¤Ÿé€šè¿‡äº’è”ç½‘ä¸‹è½½ä»¥rpmç»“å°¾çš„åŒ…ï¼Œå¹¶ä¸”å®‰è£…ï¼Œå¹¶å¯ä»¥è‡ªåŠ¨</span><br><span class="line">å¤„ç†ä¾èµ–æ€§å…³ç³»ï¼Œæ— éœ€ç¹ççš„ä¸€æ¬¡æ¬¡ä¸‹è½½å®‰è£…ã€‚</span><br><span class="line">yumä»“åº“ | yumæº</span><br><span class="line"><span class="comment"># CentOS7å’Œ7ä¹‹å‰æ‰€æœ‰ç‰ˆæœ¬ï¼šYUM</span></span><br><span class="line">yum install -y xx</span><br><span class="line"><span class="comment"># CentOS8ä»¥åï¼šdnf</span></span><br><span class="line">dnf install xxx</span><br><span class="line"><span class="comment">## ç³»ç»Ÿè‡ªå¸¦çš„åŸºç¡€åŒ…ä»“åº“</span></span><br><span class="line">Baseæº</span><br><span class="line"><span class="comment">## æ›´æ¢yumæºï¼Œä¸€å®šè¦è‡³å°‘æ¢ä¸¤ä¸ªæº</span></span><br><span class="line">- Baseæº åŸºç¡€åŒ…</span><br><span class="line">- epelæº æ‰©å±•åŒ…</span><br></pre></td></tr></table></figure><h3 id="å¦‚ä½•é…ç½®yumæº">å¦‚ä½•é…ç½®yumæº</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">å„å¤§é•œåƒæºï¼š</span><br><span class="line">é˜¿é‡Œäº‘ï¼šhttps://opsx.alibaba.com/mirror</span><br><span class="line">æ¸…åæºï¼šhttps://mirrors.tuna.tsinghua.edu.cn/</span><br><span class="line">163æºï¼šhttp://mirrors.163.com/</span><br><span class="line">åä¸ºæºï¼šhttps://mirrors.huaweicloud.com/</span><br><span class="line">ç§‘å¤§æºï¼šhttp://mirrors.ustc.edu.cn/</span><br></pre></td></tr></table></figure><h3 id="é…ç½®Baseæº">é…ç½®Baseæº</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@lb01 ~]# ll /etc/yum.repos.d/    yumæºé…ç½®æ–‡ä»¶</span><br><span class="line"><span class="comment">## æ³¨æ„ï¼šæ‰€æœ‰çš„é…ç½®æ–‡ä»¶ï¼Œå¿…é¡»ä»¥repoç»“å°¾</span></span><br><span class="line">wget</span><br><span class="line">-Oï¼šæŒ‡å®šä¿å­˜çš„è·¯å¾„å’Œæ–‡ä»¶å</span><br><span class="line">https://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class="line">curl -o = wget -O</span><br><span class="line"><span class="comment">## æ¢æºæ­¥éª¤</span></span><br><span class="line">1ï¼‰æ¸…ç©º/etc/yum.repos.dä¸‹é¢æ‰€æœ‰æºé…ç½®æ–‡ä»¶ï¼ˆ<span class="built_in">mv</span> <span class="built_in">rm</span>ï¼‰</span><br><span class="line">[root@localhost ~]# <span class="built_in">mv</span> /etc/yum.repos.d/*.repo /tmp/</span><br><span class="line">[root@localhost ~]# gzip /etc/yum.repos.d/*</span><br><span class="line">2ï¼‰ä¸‹è½½å›½å†…å„å¤§é•œåƒç«™æº</span><br><span class="line">wget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class="line">curl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="æ¢æº">æ¢æº</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##ä½¿ç”¨é•œåƒç«™æº</span></span><br><span class="line">wget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-vault-8.5.2111.repo</span><br><span class="line"></span><br><span class="line"><span class="comment">## å…¶ä»–é•œåƒç«™æ¢æºæ–¹å¼   ï¼ˆç¼ºé™·ï¼š1.éº»çƒ¦2.å¦‚æœä¸æ˜¯é»˜è®¤çš„å®˜æ–¹baseæºï¼Œè¿™ä¸ªæ›¿æ¢å°±ä¸æˆç«‹ï¼‰</span></span><br><span class="line">sed -e <span class="string">&#x27;s|^mirrorlist=|#mirrorlist=|g&#x27;</span> \</span><br><span class="line">    -e <span class="string">&#x27;s|^#baseurl=http://mirror.centos.org/centos|baseurl=https://mirrors.tuna.tsinghua.edu.cn/centos|g&#x27;</span> \</span><br><span class="line">    -i.bak \</span><br><span class="line">    /etc/yum.repos.d/CentOS-*.repo</span><br></pre></td></tr></table></figure><h3 id="æ›´æ¢epelæº">æ›´æ¢epelæº</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# curl -o /etc/yum.repos.d/epel.repo https://mirrors.aliyun.com/repo/epel-7.repo</span><br><span class="line">[root@localhost ~]# ll /etc/yum.repos.d/</span><br><span class="line">total 8</span><br><span class="line">-rw-r--r--. 1 root root 1759 Apr 22 18:55 CentOS-Base.repo</span><br><span class="line">-rw-r--r--. 1 root root 664 Apr 22 19:08 epel.repo</span><br></pre></td></tr></table></figure><h3 id="yumç®¡ç†å‘½ä»¤">yumç®¡ç†å‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ ¹æ®å‘½ä»¤æœç´¢å¯¹åº”çš„åŒ…å</span></span><br><span class="line">[root@yum_repo ~]# yum provides pstree    æ³¨æ„ï¼šyum provideså‘½ä»¤åªèƒ½ç”¨äºå·²ç»å®‰è£…çš„è½¯ä»¶åŒ…</span><br><span class="line">[root@yum_repo ~]# yum search pstree</span><br><span class="line"></span><br><span class="line"><span class="comment">## æŸ¥çœ‹æˆ‘å½“å‰é…ç½®çš„æ‰€æœ‰ä»“åº“ä¸­çš„å¯ä»¥å®‰è£…çš„åŒ…</span></span><br><span class="line">[root@localhost ~]# yum list</span><br><span class="line">[root@localhost ~]# yum list|grep net-tools</span><br><span class="line"></span><br><span class="line"><span class="comment">## æŸ¥çœ‹ä»“åº“ä¸­æŒ‡å®šåŒ…çš„è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line">[root@localhost ~]# yum info åŒ…å</span><br><span class="line">[root@localhost ~]# yum info tree</span><br><span class="line"></span><br><span class="line"><span class="comment">## æŸ¥çœ‹å½“å‰æ‰€æœ‰å¯ç”¨ä»“åº“</span></span><br><span class="line">[root@lb01 yum.repos.d]# yum repolist</span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">Loading mirror speeds from cached hostfile</span><br><span class="line"><span class="comment">## ä»“åº“IDåå­— .repoæ–‡ä»¶ä¸­ [ä»“åº“ID]## ä»“åº“æè¿°ä¿¡æ¯ .repoæ–‡ä»¶ä¸­çš„name=## çŠ¶æ€ï¼šè¯¥ä»“åº“ä¸­æœ‰å¤šå°‘rpmåŒ…</span></span><br><span class="line">repo <span class="built_in">id</span>                               repo name                                                          status</span><br><span class="line">base/7/x86_64                         CentOS-7 - Base - mirrors.huaweicloud.com                          10,072</span><br><span class="line">extras/7/x86_64                       CentOS-7 - Extras - mirrors.huaweicloud.com                           526</span><br><span class="line">updates/7/x86_64                      CentOS-7 - Updates - mirrors.huaweicloud.com                        5,802</span><br><span class="line">repolist: 16,400</span><br><span class="line">repolist: 30,679<span class="comment">## æ‰€æœ‰å¯ç”¨ä»“åº“æ€»å…±åŒ…çš„æ•°é‡</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æ‰€æœ‰ä»“åº“ä¿¡æ¯ï¼Œå¯ç”¨å’Œä¸å¯ç”¨çš„éƒ½å±•ç¤ºå‡ºæ¥</span></span><br><span class="line">[root@localhost ~]# yum repolist all</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="yumå®‰è£…å‘½ä»¤">yumå®‰è£…å‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## å®‰è£…æŒ‡å®šè½¯ä»¶</span></span><br><span class="line">[root@localhost ~]# yum install åŒ…å</span><br><span class="line">[root@localhost ~]# yum install vim</span><br><span class="line">Is this ok [y/d/N]:</span><br><span class="line">è¾“å…¥yï¼š<span class="built_in">yes</span>å®‰è£…</span><br><span class="line">è¾“å…¥dï¼šdownload ä»…ä¸‹è½½ä¸å®‰è£…</span><br><span class="line">è¾“å…¥Nï¼šNoä¸å®‰è£…</span><br><span class="line"><span class="comment">## å…äº¤äº’å®‰è£…</span></span><br><span class="line">[root@localhost ~]# yum install vim -y</span><br><span class="line">[root@localhost ~]# yum -y install vim</span><br><span class="line">[root@localhost ~]# yum install -y vim</span><br><span class="line"><span class="comment">## yumå®‰è£…æ–¹å¼ï¼š</span></span><br><span class="line"><span class="comment"># æ–¹å¼ä¸€ï¼šå®‰è£…ä»“åº“ä¸­çš„åŒ…</span></span><br><span class="line">[root@localhost ~]# yum install vim</span><br><span class="line"><span class="comment"># æ–¹å¼äºŒï¼šå®‰è£…æœ¬åœ°çš„åŒ…</span></span><br><span class="line">[root@localhost Packages]# yum localinstall -y wget-1.14-18.el7.x86_64.rpm</span><br><span class="line"><span class="comment"># æ–¹å¼ä¸‰ï¼šè¿œç¨‹äº’è”ç½‘å®‰è£…</span></span><br><span class="line">[root@localhost Packages]# yum install -y http://test.driverzeng.com/MySQL_plugins/mha4mysql-node-0.56-0.el6.noarch.rpm</span><br><span class="line"></span><br><span class="line"><span class="comment">## æŒ‡å®šç›®å½•ä¸‹è½½</span></span><br><span class="line">[root@localhost ~]# yum install --downloadonly --downloaddir=/opt/ nginx</span><br></pre></td></tr></table></figure><h3 id="yumé‡è£…-æ›´æ–°-åˆ é™¤">yumé‡è£…/æ›´æ–°/åˆ é™¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## è¯¯åˆ é™¤æœåŠ¡çš„ç›¸å…³æ–‡ä»¶é‡è£…</span></span><br><span class="line">[root@localhost nginx]# yum reinstall -y nginx</span><br><span class="line"></span><br><span class="line"><span class="comment">## yumæŸ¥è¯¢å¯ä»¥æ›´æ–°çš„è½¯ä»¶</span></span><br><span class="line">[root@localhost nginx]# yum check-update</span><br><span class="line"><span class="comment">## æ›´æ–°æŒ‡å®šè½¯ä»¶</span></span><br><span class="line">[root@localhost nginx]# yum update acl -y</span><br><span class="line"><span class="comment">##å…¨éƒ¨è½¯ä»¶éƒ½æ›´æ–°ï¼ˆWaringï¼šæ…ç”¨ï¼‰</span></span><br><span class="line">[root@localhost nginx]# yum update -y</span><br><span class="line"></span><br><span class="line"><span class="comment">## åˆ é™¤æŒ‡å®šè½¯ä»¶</span></span><br><span class="line">[root@localhost nginx]# yum remove -y tree</span><br><span class="line">[root@localhost nginx]# yum erase -y tree</span><br></pre></td></tr></table></figure><h3 id="yumé€†å‘æŸ¥è¯¢-ç¼“å­˜">yumé€†å‘æŸ¥è¯¢/ç¼“å­˜</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŸ¥è¯¢æŸä¸ªå‘½ä»¤å±äºå“ªä¸ªåŒ…</span></span><br><span class="line">[root@localhost nginx]# yum provides */ifconfig</span><br><span class="line"></span><br><span class="line"><span class="comment">## åŠ è½½ç¼“å­˜</span></span><br><span class="line">[root@localhost nginx]# yum makecache</span><br><span class="line"><span class="comment">## æ¸…é™¤ç¼“å­˜</span></span><br><span class="line">[root@localhost nginx]# yum clean all</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="çˆ¬å–zabbix5-0ç›¸å…³æ‰€æœ‰rpmåŒ…">çˆ¬å–zabbix5.0ç›¸å…³æ‰€æœ‰rpmåŒ…</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/7/x86_64/?spm=a2c6h.25603864.0.0.239b5d4a bvLbEB</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">1.æŒ‡å®šä¸‹è½½ç›®å½•</span><br><span class="line">[root@lb01 ~]# curl -s https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/7/x86_64/?spm=a2c6h.25603864.0.0.239b5d4a bvLbEB|awk -F <span class="string">&#x27;&quot;&#x27;</span> <span class="string">&#x27;/rpm/&#123;print &quot;mkdir -p /repo/zabbix/;wget -O /repo/zabbix/&quot;$4&quot; https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/7/x86_64/&quot;$4&#125;&#x27;</span>|bash</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2.ä¸‹è½½åˆ°å½“å‰ç›®å½•</span><br><span class="line">[root@lb01 ~]# curl -s https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/7/x86_64|awk -F <span class="string">&#x27;&quot;&#x27;</span> <span class="string">&#x27;/rpm/&#123;print $4&#125;&#x27;</span>|sed <span class="string">&#x27;s#zabbix#https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/7/x86_64/zabbix#g&#x27;</span>|xargs wget</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1.curl ç½‘ç«™è·å–ç½‘é¡µå†…å®¹</span><br><span class="line">[root@lb01 ~]# curl -s https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/7/x86_64</span><br><span class="line">2.æˆªå–æ‰€æœ‰rpmåŒ…å</span><br><span class="line">[root@lb01 ~]# curl -s https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/7/x86_64|awk -F <span class="string">&#x27;&quot;&#x27;</span> <span class="string">&#x27;/rpm/&#123;print $4&#125;&#x27;</span></span><br><span class="line">zabbix-agent-5.0.0-1.el7.x86_64.rpm</span><br><span class="line">zabbix-agent-5.0.1-1.el7.x86_64.rpm</span><br><span class="line">zabbix-agent-5.0.10-1.el7.x86_64.rpm</span><br><span class="line">zabbix-agent-5.0.11-1.el7.x86_64.rpm</span><br><span class="line">3.è¡¥å…¨å…¬å…±ä¸‹è½½é“¾æ¥https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/7/x86_64/?spm=a2c6h.25603864.0.0.239b5d4a bvLbEB</span><br><span class="line">sed <span class="string">&#x27;s#zabbix#https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/7/x86_64/zabbix#g&#x27;</span></span><br><span class="line">4.æ‹¼æ¥å‘½ä»¤äº¤ç»™wget</span><br><span class="line">[root@lb01 ~]# curl -s https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/7/x86_64|awk -F <span class="string">&#x27;&quot;&#x27;</span> <span class="string">&#x27;/rpm/&#123;print $4&#125;&#x27;</span>|sed <span class="string">&#x27;s#zabbix#https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/7/x86_64/zabbix#g&#x27;</span>|xargs wget</span><br></pre></td></tr></table></figure><h3 id="yumç¨‹åºçš„é…ç½®æ–‡ä»¶">yumç¨‹åºçš„é…ç½®æ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# <span class="built_in">cat</span> /etc/yum.conf</span><br><span class="line">cachedir=/var/cache/yum/<span class="variable">$basearch</span>/<span class="variable">$releasever</span> //ç¼“å­˜ç›®å½•</span><br><span class="line">keepcache=0   //ç¼“å­˜è½¯ä»¶åŒ…, 1å¯åŠ¨ 0 å…³é—­</span><br><span class="line">debuglevel=2   //è°ƒè¯•çº§åˆ«</span><br><span class="line">logfile=/var/log/yum.log //æ—¥å¿—è®°å½•ä½ç½®</span><br><span class="line">exactarch=1 //æ£€æŸ¥å¹³å°æ˜¯å¦å…¼å®¹</span><br><span class="line">obsoletes=1 //æ£€æŸ¥åŒ…æ˜¯å¦åºŸå¼ƒ</span><br><span class="line">gpgcheck=1 //æ£€æŸ¥æ¥æºæ˜¯å¦åˆæ³•,éœ€è¦æœ‰åˆ¶ä½œè€…çš„å…¬é’¥ä¿¡æ¯</span><br><span class="line">plugins=1 //æ˜¯å¦å¯ç”¨æŸ¥è¯¢</span><br><span class="line">installonly_limit=5</span><br><span class="line">bugtracker_url</span><br><span class="line"><span class="comment"># metadata_expire=90m //æ¯å°æ—¶æ‰‹åŠ¨æ£€æŸ¥å…ƒæ•°æ®</span></span><br><span class="line"><span class="comment"># in /etc/yum.repos.d //åŒ…å«repos.dç›®å½•</span></span><br></pre></td></tr></table></figure><h3 id="yumåŒ…ç»„ç›¸å…³å‘½ä»¤">yumåŒ…ç»„ç›¸å…³å‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹æœ‰å“ªäº›åŒ…ç»„</span></span><br><span class="line">[root@localhost ~]# yum <span class="built_in">groups</span> list</span><br><span class="line"><span class="comment"># å®‰è£…æŒ‡å®šåŒ…ç»„</span></span><br><span class="line">[root@localhost ~]# yum <span class="built_in">groups</span> install Development tools Compatibility libraries</span><br><span class="line">Base Debugging Tools</span><br><span class="line"><span class="comment"># åˆ é™¤æŒ‡å®šåŒ…ç»„</span></span><br><span class="line">[root@localhost ~]# yum <span class="built_in">groups</span> remove -y Base</span><br></pre></td></tr></table></figure><h3 id="yumåŒ…å†å²ç›¸å…³å‘½ä»¤">yumåŒ…å†å²ç›¸å…³å‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## æŸ¥çœ‹yumæ‰§è¡Œçš„å†å²</span></span><br><span class="line">[root@localhost ~]# yum <span class="built_in">history</span></span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">ID | Login user | Date and time | Action(s) | Altered</span><br><span class="line">-------------------------------------------------------------------------------</span><br><span class="line">6 | root &lt;root&gt; | 2024-04-23 18:05 | Install | 1</span><br><span class="line">5 | root &lt;root&gt; | 2024-04-23 17:09 | Update | 2</span><br><span class="line">4 | root &lt;root&gt; | 2024-03-26 17:36 | Install | 1</span><br><span class="line">3 | root &lt;root&gt; | 2024-03-26 17:31 | Install | 1</span><br><span class="line">2 | root &lt;root&gt; | 2024-03-22 15:55 | Install | 1</span><br><span class="line">1 | System &lt;<span class="built_in">unset</span>&gt; | 2024-03-21 20:50 | Install | 308</span><br><span class="line"><span class="comment">## æŸ¥çœ‹æŒ‡å®šå†å²è®°å½•çš„è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line">[root@localhost ~]# yum <span class="built_in">history</span> info 6</span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">Transaction ID : 6</span><br><span class="line">Begin time : Tue Apr 23 18:05:41 2024</span><br><span class="line">Begin rpmdb : 311:bc74a8339d5853ce2035d376bffbbeeb40d44ae3</span><br><span class="line">End time : 18:05:42 2024 (1 seconds)</span><br><span class="line">End rpmdb : 312:44280ba9419b586ea77d5fa483785725fe7e9758</span><br><span class="line">User : root &lt;root&gt;</span><br><span class="line">Return-Code : Success</span><br><span class="line">Command Line : install -y tree</span><br><span class="line">Transaction performed with:</span><br><span class="line">Installed rpm-4.11.3-35.el7.x86_64 @anaconda</span><br><span class="line">Installed yum-3.4.3-161.el7.centos.noarch @anaconda</span><br><span class="line">Installed yum-plugin-fastestmirror-1.1.31-50.el7.noarch @anaconda</span><br><span class="line">Packages Altered:</span><br><span class="line">Install tree-1.6.0-10.el7.x86_64 @base</span><br><span class="line"><span class="built_in">history</span> info</span><br><span class="line"><span class="comment">## å›æ»šæŒ‡å®šæ“ä½œ</span></span><br><span class="line">[root@localhost ~]# yum <span class="built_in">history</span> undo 6 -y</span><br></pre></td></tr></table></figure><h2 id="åˆ¶ä½œyumä»“åº“">åˆ¶ä½œyumä»“åº“</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">æ¡ä»¶ï¼š</span><br><span class="line">1.åˆ¶ä½œä»“åº“ï¼Œä¸€å®šè¦æœ‰å­˜æ”¾rpmåŒ…çš„ç›®å½•</span><br><span class="line">2.ä¼šé…ç½®repoä»“åº“æ–‡ä»¶</span><br><span class="line"><span class="comment">## repoé…ç½®æ–‡ä»¶å†…å®¹è§£æ</span></span><br><span class="line"><span class="comment"># ä»“åº“å</span></span><br><span class="line">[base]</span><br><span class="line"><span class="comment"># æè¿°ä¿¡æ¯</span></span><br><span class="line">name=CentOS-<span class="variable">$releasever</span> - Base - mirrors.aliyun.com</span><br><span class="line"><span class="comment"># ä»“åº“åœ°å€</span></span><br><span class="line">baseurl=http://mirrors.aliyun.com/centos/<span class="variable">$releasever</span>/os/<span class="variable">$basearch</span>/</span><br><span class="line"><span class="comment"># æ˜¯å¦å¼€å¯yumä»“åº“ç­¾åæœºåˆ¶æ£€æµ‹</span></span><br><span class="line">gpgcheck=1 // 0 ä»£è¡¨å…³é—­ï¼Œä¸æ£€æµ‹ 1 ä»£è¡¨å¼€å¯ï¼Œæ£€æµ‹</span><br><span class="line"><span class="comment"># gpgé’¥åŒ™çš„åœ°å€</span></span><br><span class="line">gpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7</span><br><span class="line"><span class="comment">## æ˜¯å¦å¼€å¯yumä»“åº“</span></span><br><span class="line">enabled=0 // æ˜¯å¦å¼€å¯è¯¥ä»“åº“ï¼Œ0ä»£è¡¨å…³é—­ 1ä»£è¡¨å¼€å¯</span><br><span class="line"><span class="comment">## å¯†é’¥å¯¹</span></span><br><span class="line">é’¥åŒ™</span><br><span class="line">é”</span><br><span class="line"><span class="comment">## ä»“åº“åœ°å€æ”¯æŒçš„åè®®ï¼š</span></span><br><span class="line">- http:// è¿œç¨‹åè®®</span><br><span class="line">- https:// è¿œç¨‹åè®®</span><br><span class="line">- ftp:// è¿œç¨‹åè®®</span><br><span class="line">- file:// æœ¬åœ°åè®®ï¼Œåªèƒ½è®¿é—®æœ¬æœº</span><br></pre></td></tr></table></figure><h3 id="åˆ¶ä½œä»“åº“ï¼ˆæœ¬åœ°yumä»“åº“ï¼‰">åˆ¶ä½œä»“åº“ï¼ˆæœ¬åœ°yumä»“åº“ï¼‰</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.å®‰è£…createrepoå‘½ä»¤</span></span><br><span class="line">[root@localhost ~]# yum install -y createrepo</span><br><span class="line"><span class="comment"># 2.è®©ç›®å½•ç¼–ç¨‹yumä»“åº“ createrepo</span></span><br><span class="line">[root@localhost ~]# createrepo /repo/zabbix/</span><br><span class="line">Spawning worker 0 with 475 pkgs</span><br><span class="line"><span class="comment"># 3.é…ç½®ä»“åº“æ–‡ä»¶</span></span><br><span class="line">[root@localhost yum.repos.d]# vim zls.repo</span><br><span class="line">[zls_repo]</span><br><span class="line">name=zls<span class="string">&#x27;s yum repository xxxx</span></span><br><span class="line"><span class="string">baseurl=file:///repo/zabbix/</span></span><br><span class="line"><span class="string">gpgcheck=0</span></span><br><span class="line"><span class="string">enabled=1</span></span><br></pre></td></tr></table></figure><h3 id="å¦‚ä½•åœ¨ä»“åº“ä¸­æ–°åŠ RPMåŒ…">å¦‚ä½•åœ¨ä»“åº“ä¸­æ–°åŠ RPMåŒ…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.å°†rpmæ”¾å…¥ä»“åº“</span></span><br><span class="line">wget <span class="built_in">cp</span> <span class="built_in">mv</span> ...</span><br><span class="line"><span class="comment"># 2.é‡æ–°æ›´æ–°ä»“åº“</span></span><br><span class="line">[root@localhost repo]# createrepo --update /repo</span><br><span class="line"><span class="comment"># 3.ç”¨æˆ·ä½¿ç”¨ä»“åº“æ—¶ï¼Œéœ€è¦é‡æ–°åŠ è½½ç¼“å­˜</span></span><br><span class="line">[root@localhost ~]# yum makecache</span><br></pre></td></tr></table></figure><p><strong>éœ€æ±‚ï¼šå°†/dev/cdromä¸­çš„rpmåŒ…ï¼Œæ‹·è´åˆ° /zls/baseç›®å½•ä¸‹ï¼Œç„¶åå°†è¯¥ç›®å½•åˆ¶ä½œæˆæœ¬åœ°çš„yumä»“åº“</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.åˆ›å»ºç›®å½•</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">mkdir</span> -p /zls/base</span><br><span class="line"><span class="comment"># 2.æŒ‚è½½é•œåƒ</span></span><br><span class="line">[root@localhost ~]# mount /dev/cdrom /mnt</span><br><span class="line"><span class="comment"># 3.æ‹·è´rpmåŒ…</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> /mnt/Packages/*.rpm /zls/base/</span><br><span class="line"><span class="comment"># 4.åˆ¶ä½œä»“åº“</span></span><br><span class="line">[root@localhost ~]# createrepo /zls/base/</span><br><span class="line"><span class="comment"># 5.ç¼–å†™repoæ–‡ä»¶</span></span><br><span class="line">[root@localhost ~]# vi /etc/yum.repos.d/zls.repo</span><br><span class="line">[zls_repo]</span><br><span class="line">name=zls<span class="string">&#x27;s yum repository xxxx</span></span><br><span class="line"><span class="string">baseurl=file:///repo/</span></span><br><span class="line"><span class="string">gpgcheck=0</span></span><br><span class="line"><span class="string">enabled=1</span></span><br></pre></td></tr></table></figure><h3 id="åˆ¶ä½œè¿œç¨‹yumä»“åº“">åˆ¶ä½œè¿œç¨‹yumä»“åº“</h3><p><strong>ç¯å¢ƒå‡†å¤‡</strong></p><table><thead><tr><th>ä¸»æœº</th><th>ip</th><th>è§’è‰²</th></tr></thead><tbody><tr><td>yum_repo</td><td>10.0.0.101</td><td>yumä»“åº“</td></tr><tr><td>web01</td><td>10.0.0.102</td><td>ä½¿ç”¨yumä»“åº“çš„æœºå™¨</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## å¯é€‰åè®®ï¼š</span></span><br><span class="line">- http:// è¿œç¨‹åè®®</span><br><span class="line">- https:// è¿œç¨‹åè®®ï¼ˆåˆ«è€ƒè™‘ï¼‰</span><br><span class="line">- ftp:// è¿œç¨‹åè®®</span><br><span class="line"><span class="comment">## å…‹éš†æ–°çš„ä¸»æœºä¿®æ”¹ä¸»æœºåå’ŒIP</span></span><br><span class="line"><span class="comment"># ä¿®æ”¹ä¸»æœºå</span></span><br><span class="line">[root@web01 ~]# hostnamectl set-hostname yum_repo</span><br><span class="line">[root@web01 ~]# hostnamectl set-hostname web01</span><br><span class="line"><span class="comment"># ä¿®æ”¹IP</span></span><br><span class="line"><span class="comment">## å…³é—­é˜²ç«å¢™</span></span><br><span class="line">[root@yum_repo ~]# systemctl stop firewalld</span><br><span class="line">[root@web01 ~]# systemctl stop firewalld</span><br><span class="line"><span class="comment">## å…³é—­selinux</span></span><br><span class="line">[root@web01 ~]# setenforce 0</span><br><span class="line">[root@web01 ~]# getenforce</span><br><span class="line">Permissive</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨ftpåˆ¶ä½œyumä»“åº“">ä½¿ç”¨ftpåˆ¶ä½œyumä»“åº“</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.å®‰è£…ftpåè®®çš„è½¯ä»¶</span></span><br><span class="line">[root@yum_repo ~]# yum install -y vsftpd</span><br><span class="line"><span class="comment"># 2.å¯åŠ¨vsftpd</span></span><br><span class="line">[root@yum_repo ~]# systemctl start vsftpd</span><br><span class="line">[root@yum_repo ~]# systemctl <span class="built_in">enable</span> vsftpd</span><br><span class="line"><span class="comment"># 3.æ‰“å¼€æµè§ˆå™¨è®¿é—® ftp://10.0.0.101</span></span><br><span class="line"><span class="comment"># 4.æŸ¥æ‰¾ftpçš„ç›®å½•æ‰€åœ¨</span></span><br><span class="line">[root@yum_repo pub]# rpm -ql vsftpd|grep pub</span><br><span class="line">/var/ftp/pub</span><br><span class="line"><span class="comment"># 5.pubç›®å½•å°±å¯ä»¥å½“åšyumä»“åº“</span></span><br><span class="line">[root@yum_repo pub]# mount /dev/cdrom /mnt/</span><br><span class="line">[root@yum_repo pub]# <span class="built_in">cp</span> /mnt/Packages/tree-1.6.0-10.el7.x86_64.rpm /mnt/Packages/wget-1.14-18.el7.x86_64.rpm base/</span><br><span class="line"><span class="comment"># 6.å®‰è£…åˆ¶ä½œä»“åº“çš„å‘½ä»¤</span></span><br><span class="line">[root@yum_repo ~]# yum install -y createrepo</span><br><span class="line"><span class="comment"># 7.åˆ¶ä½œyumä»“åº“</span></span><br><span class="line">[root@yum_repo ~]# createrepo /var/ftp/pub/base/</span><br><span class="line">Spawning worker 0 with 2 pkgs</span><br><span class="line">Workers Finished</span><br><span class="line">Saving Primary metadata</span><br><span class="line">Saving file lists metadata</span><br><span class="line">Saving other metadata</span><br><span class="line">Generating sqlite DBs</span><br><span class="line">Sqlite DBs complete</span><br><span class="line"><span class="comment"># 8.å‡†å¤‡repoæ–‡ä»¶</span></span><br><span class="line">[root@yum_repo base]# vim zls_base.repo</span><br><span class="line">[zls_base_repo]</span><br><span class="line">name=<span class="built_in">test</span></span><br><span class="line">baseurl=ftp://10.0.0.101/pub/base/</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br><span class="line"><span class="comment">## å…¶ä»–ç”¨æˆ·æƒ³è¦ä½¿ç”¨è¯¥yumæºï¼Œåªéœ€è¦ä¸‹è½½</span></span><br><span class="line">[root@web01 ~]# curl -o /etc/yum.repos.d/zls_base.repo</span><br><span class="line">ftp://10.0.0.101/pub/base/zls_base.repo</span><br><span class="line">[root@web01 ~]# vim /etc/yum.repos.d/xxx.repo</span><br><span class="line">[zls_base_repo]</span><br><span class="line">name=<span class="built_in">test</span></span><br><span class="line">baseurl=ftp://10.0.0.101/pub/base/</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨nginxåˆ¶ä½œè¿œç¨‹yumä»“åº“">ä½¿ç”¨nginxåˆ¶ä½œè¿œç¨‹yumä»“åº“</h3><p><strong>ç¯å¢ƒå‡†å¤‡</strong></p><table><thead><tr><th>ä¸»æœº</th><th>ip</th><th>è§’è‰²</th></tr></thead><tbody><tr><td>yum_repo</td><td>10.0.0.101</td><td>yumä»“åº“</td></tr><tr><td>web01</td><td>10.0.0.102</td><td>ä½¿ç”¨yumä»“åº“çš„æœºå™¨</td></tr></tbody></table><p><strong>å‰æœŸå‡†å¤‡</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å…‹éš†è™šæ‹Ÿæœº</span></span><br><span class="line"><span class="comment"># å…‹éš†æ–°çš„ä¸»æœºä¿®æ”¹ä¸»æœºåå’ŒIP</span></span><br><span class="line">[root@web01 ~]# hostnamectl set-hostname yum_repo</span><br><span class="line">[root@web01 ~]# hostnamectl set-hostname web01</span><br><span class="line"><span class="comment"># ä¿®æ”¹IP</span></span><br><span class="line"><span class="comment">## å…³é—­é˜²ç«å¢™</span></span><br><span class="line">[root@yum_repo ~]# systemctl stop firewalld</span><br><span class="line">[root@web01 ~]# systemctl stop firewalld</span><br><span class="line"><span class="comment">## å…³é—­selinux</span></span><br><span class="line">[root@web01 ~]# setenforce 0</span><br><span class="line">[root@web01 ~]# getenforce</span><br><span class="line">Permissive</span><br></pre></td></tr></table></figure><p><strong>ä½¿ç”¨nginxåˆ¶ä½œyumä»“åº“</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.å®‰è£…nginx</span></span><br><span class="line">[root@yum_repo ~]# yum -y install nginx</span><br><span class="line"><span class="comment">#2.å¯åŠ¨nginx</span></span><br><span class="line">[root@yum_repo ~]# systemctl start nginx</span><br><span class="line">[root@yum_repo ~]# systemctl <span class="built_in">enable</span> nginx</span><br><span class="line"><span class="comment">#3.åˆ›å»ºbaseæºå’Œzabbixçš„yumåº“</span></span><br><span class="line">[root@yum_repo yum]# <span class="built_in">mkdir</span> /etc/repo/yum/&#123;base,zabbix&#125; -p</span><br><span class="line"></span><br><span class="line">[root@yum_repo yum]# <span class="built_in">mkdir</span> /etc/repo/yum/base/ -p</span><br><span class="line">[root@yum_repo yum]# <span class="built_in">mkdir</span> /etc/repo/yum/zabbix/ -p</span><br><span class="line"><span class="comment">#è·å–baseåŒ…</span></span><br><span class="line">[root@web01 ~]# mount /dev/cdrom /mnt/</span><br><span class="line">[root@yum_repo yum]# <span class="built_in">cp</span> /mnt/Packages/* /etc/repo/yum/base/</span><br><span class="line">æ‹·è´çˆ¬å–çš„zabbixçš„åŒ…åˆ°/etc/repo/yum/zabbixä¸‹</span><br><span class="line">[root@lb01 nginx]# <span class="built_in">cp</span> /repo/zabbix/* /etc/repo/yum/zabbix</span><br><span class="line"><span class="comment">#4.å®‰è£…åˆ¶ä½œä»“åº“çš„å‘½ä»¤</span></span><br><span class="line">[root@yum_repo ~]# yum install -y createrepo</span><br><span class="line"><span class="comment">#5.åˆ¶ä½œyumä»“åº“</span></span><br><span class="line">[root@yum_repo yum]# createrepo /etc/repo/yum/base/</span><br><span class="line">[root@yum_repo yum]# createrepo /etc/repo/yum/zabbix/</span><br><span class="line"><span class="comment">#6.ä¿®æ”¹ngingxé…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@yum_repo nginx]# vim /etc/nginx/nginx.conf</span><br><span class="line"></span><br><span class="line"><span class="comment">#åœ¨nginx.confpé…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼Œ</span></span><br><span class="line">location / &#123;</span><br><span class="line">    45        autoindex on;</span><br><span class="line">    46        root   /etc/repo/yum;<span class="comment">#æŒ‡å®šæœ¬åœ°yumä»“åº“ä½ç½®</span></span><br><span class="line">    47        &#125;</span><br><span class="line">    </span><br><span class="line">   <span class="comment"># æ·»åŠ ä½ç½®æ˜¯åœ¨server&#123;&#125;é‡Œå¦‚ä¸‹</span></span><br><span class="line">server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        listen       [::]:80;</span><br><span class="line">        server_name  _;</span><br><span class="line">       root         /usr/share/nginx/html;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">        autoindex on;</span><br><span class="line">        root   /etc/repo/yum;</span><br><span class="line">           &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line"><span class="comment">#æˆ–è€…[root@yum_repo ~]# cat /etc/nginx/conf.d/yum_repo.conf</span></span><br><span class="line">è¿™ä¸ªå‰ææ˜¯ï¼Œnginx.confpé…ç½®æ–‡ä»¶é‡Œæ²¡æœ‰server&#123; &#125;è¿™ä¸ªå†…å®¹ï¼Œç›¸å½“äºæŠŠè¿™æ®µå‘½ä»¤å†™åœ¨conf.dé…ç½®æ–‡ä»¶é‡Œ</span><br><span class="line">server&#123;</span><br><span class="line">listen 80;</span><br><span class="line">server_name _;</span><br><span class="line">location /&#123;</span><br><span class="line">autoindex on;</span><br><span class="line">root /yum_repo;</span><br><span class="line">index index.html;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ£€æµ‹è¯­æ³•æœ‰æ²¡æœ‰é—®é¢˜</span></span><br><span class="line">[root@yum_repo ~]# nginx -t</span><br><span class="line">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /etc/nginx/nginx.conf <span class="built_in">test</span> is successful</span><br><span class="line"></span><br><span class="line"><span class="comment">#é‡å¯nginx</span></span><br><span class="line"> [root@yum_repo ~]# systemctl restart nginx</span><br><span class="line"><span class="comment">#7.å‡†å¤‡repoæ–‡ä»¶</span></span><br><span class="line">[root@yum_repo base]# vim nginx.repo</span><br><span class="line">[nginx_repo]</span><br><span class="line">name=<span class="built_in">test</span></span><br><span class="line">baseurl=10.0.0.101/base/</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br><span class="line"></span><br><span class="line">[nginx_repo]</span><br><span class="line">name=<span class="built_in">test</span></span><br><span class="line">baseurl=10.0.0.101/zabbix/</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br><span class="line">å¯ä»¥å°†nginx.repoæ–‡ä»¶æ”¾åœ¨ /etc/repo/yum/ç›®å½•ä¸‹</span><br><span class="line"><span class="comment">#8.åˆ‡æ¢åˆ°web01å®¢æˆ·ç«¯</span></span><br><span class="line">ä¸‹è½½åˆ¶ä½œçš„nginx.repoæº</span><br><span class="line">[root@web01 ~]# wget -O /etc/yum.repos.d/ http://10.0.0.101/nginx.repo</span><br><span class="line">åˆ é™¤web01å®¢æˆ·ç«¯å…¶å®ƒæºï¼Œåªç•™nginx.repoæºï¼Œä½¿ç”¨å®‰è£…rpmåŒ…æµ‹è¯•æˆ‘ä»¬åˆ¶ä½œçš„yumæº</span><br></pre></td></tr></table></figure><p><img src="C:%5CUsers%5CDell%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240423210955932.png" alt="image-20240423210955932"></p>]]></content>
      
      
      <categories>
          
          <category> Linuxæ•²é—¨ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>19.ç³»ç»Ÿè´Ÿè½½</title>
      <link href="/posts/17977f57.html"/>
      <url>/posts/17977f57.html</url>
      
        <content type="html"><![CDATA[<div class='wow animate__heartBeat' data-wow-duration='' data-wow-delay='1s' data-wow-offset=''  data-wow-iteration='2' ><div class="note red icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p><a href="https://www.lukeme.top/posts/4c7367cf.html">å‘Šåˆ«å°ç™½ï¼Œç‚¹å‡»ç›´è¾¾</a></p></div></div><h3 id="è¿›ç¨‹ä¼˜å…ˆçº§">è¿›ç¨‹ä¼˜å…ˆçº§</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ä½œç”¨ï¼šå¯ä»¥è®©ä¼˜å…ˆçº§é«˜çš„è¿›ç¨‹ï¼Œä¼˜å…ˆä½¿ç”¨ç³»ç»Ÿèµ„æºï¼Œå†…å­˜ã€CPUã€ç£ç›˜ã€æ–‡ä»¶æè¿°ç¬¦...</span><br><span class="line"></span><br><span class="line"><span class="built_in">nice</span>å€¼è¶Šé«˜ï¼šè¡¨ç¤ºä¼˜å…ˆçº§è¶Šä½ï¼Œä¾‹å¦‚19ï¼Œè¯¥è¿›ç¨‹å®¹æ˜“å°†CPUä½¿ç”¨é‡è®©ç»™å…¶ä»–è¿›ç¨‹ã€‚</span><br><span class="line"><span class="built_in">nice</span>å€¼è¶Šä½ï¼šè¡¨ç¤ºä¼˜å…ˆçº§è¶Šé«˜ï¼Œä¾‹å¦‚-20ï¼Œè¯¥è¿›ç¨‹æ›´ä¸å€¾å‘äºè®©å‡ºCPUã€‚</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## æŸ¥çœ‹ä¼˜å…ˆçº§</span></span><br><span class="line">[root@localhost ~]# top -n 1 -p 6884</span><br><span class="line">[root@localhost ~]# ps axo pid,user,<span class="built_in">nice</span>,<span class="built_in">command</span>|grep sshd</span><br><span class="line"><span class="comment">## é…ç½®ä¼˜å…ˆçº§</span></span><br><span class="line"><span class="comment"># åœ¨è¿›ç¨‹å¯åŠ¨å‘½ä»¤ä¹‹å‰ï¼ŒåŠ ä¸Šnice</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">nice</span> -n ä¼˜å…ˆçº§ï¼ˆ-20 ~ 20ï¼‰ ç¨‹åºå¯åŠ¨å‘½ä»¤ï¼ˆsystemctlä¸è¡Œï¼‰</span><br><span class="line"><span class="comment">## é…ç½®nginxä¼˜å…ˆçº§</span></span><br><span class="line"><span class="comment"># 1.æ­£å¸¸å¯åŠ¨nginxæ‰¾åˆ°å¯åŠ¨å‘½ä»¤</span></span><br><span class="line">[root@localhost ~]# systemctl start nginx</span><br><span class="line">[root@localhost ~]# ps -ef|grep nginx</span><br><span class="line">root 10691 1 0 18:08 ? 00:00:00 nginx: master process</span><br><span class="line">/usr/sbin/nginx</span><br><span class="line"><span class="comment"># 2.å…ˆåœæ­¢æœåŠ¡</span></span><br><span class="line">[root@localhost ~]# systemctl stop nginx</span><br><span class="line"><span class="comment"># 3.é…ç½®ä¼˜å…ˆçº§å¯åŠ¨</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">nice</span> -n -15 /usr/sbin/nginx</span><br><span class="line"><span class="comment"># 4.æ£€æŸ¥æ˜¯å¦å¯åŠ¨æˆåŠŸ</span></span><br><span class="line">[root@localhost ~]# ps -ef|grep nginx</span><br><span class="line">[root@localhost ~]# netstat -lntup|grep nginx</span><br><span class="line">tcp 0 0 0.0.0.0:80 0.0.0.0:* LISTEN</span><br><span class="line">10770/nginx: master</span><br><span class="line">tcp6 0 0 :::80 :::* LISTEN</span><br><span class="line">10770/nginx: master</span><br><span class="line"><span class="comment"># 5.æ£€æŸ¥ä¼˜å…ˆçº§</span></span><br><span class="line">[root@localhost ~]# top -p 10770</span><br><span class="line">PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND</span><br><span class="line">10770 root 5 -15</span><br><span class="line">39304 1068 124 S 0.0 0.1 0:00.00 nginx</span><br></pre></td></tr></table></figure><p><strong>Linuxå‡æ­»</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ping é€šä¸€å°æœºå™¨ï¼Œä¸€å®šèƒ½sshè¿ä¸Šè¿™å°æœºå™¨å—ï¼Ÿ</span></span><br><span class="line">ä¸ä¸€å®š pingåè®®ï¼šicmp</span><br><span class="line">åŸå› ï¼šping é€šï¼Œåªèƒ½èƒ½è¯´æ˜icmpåè®®æ˜¯é€šçš„ï¼Œä¸èƒ½è¯´æ˜sshåè®®æ˜¯é€šçš„</span><br><span class="line"><span class="comment">#ping ä¸é€šä¸€å°æœºå™¨ï¼Œä¸€å®šsshè¿ä¸ä¸Šè¿™å°æœºå™¨å—ï¼Ÿ</span></span><br><span class="line">ä¸ä¸€å®š pingåè®®ï¼šicmp</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="Linuxåå°è¿›ç¨‹ç®¡ç†">Linuxåå°è¿›ç¨‹ç®¡ç†</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¦‚ä½•å°†è¿›ç¨‹æ”¾å…¥åå°è¿è¡Œ</span></span><br><span class="line"><span class="comment"># 1.æ–¹æ³•ä¸€ï¼šåœ¨æƒ³è¦æ‰§è¡Œçš„å‘½ä»¤åé¢åŠ ä¸Š&amp;</span></span><br><span class="line">[root@localhost ~]# ping baidu.com &amp;</span><br><span class="line">[root@localhost ~]# ping baidu.com &gt;&gt; /tmp/1.txt &amp;</span><br><span class="line"><span class="comment"># 2.æ–¹æ³•äºŒï¼šåœ¨éœ€è¦æ”¾å…¥åå°çš„å‘½ä»¤å‰é¢åŠ ä¸Šnohup åé¢åŠ ä¸Š &amp;</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">nohup</span> ping baidu.com &amp; // åœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªnohup.outæ–‡ä»¶ï¼Œ</span><br><span class="line">æ‰€æœ‰è¾“å‡ºç»“æœä¼šæ”¾å…¥è¯¥æ–‡ä»¶</span><br><span class="line"><span class="comment"># 3.æ–¹æ³•ä¸‰ï¼šå°†è¿›ç¨‹å…ˆæš‚åœåˆ°åå° è¾“å…¥ï¼šbg å°†ç¨‹åºæ”¾å…¥åå°è¿è¡Œï¼ˆbackgroundï¼‰</span></span><br><span class="line">[root@localhost ~]# ping baidu.com</span><br><span class="line">Ctrl + Z // å°†ç¨‹åºæš‚åœåˆ°åå°</span><br><span class="line"><span class="built_in">bg</span> // å°†æš‚åœçš„ç¨‹åºæ”¾å…¥åå°è¿è¡Œ</span><br><span class="line"><span class="built_in">fg</span> // å°†æš‚åœçš„ç¨‹åºè°ƒåˆ°å‰å°è¿è¡Œ æ ¹æ®ç¼–å·ï¼Œè°ƒç”¨æŒ‡å®šçš„è¿›ç¨‹åˆ°å‰å°</span><br><span class="line"><span class="built_in">jobs</span> // æŸ¥çœ‹åå°æš‚åœçš„ç¨‹åºæœ‰å“ªäº›</span><br><span class="line"><span class="comment"># 4.æ–¹æ³•å››ï¼šä½¿ç”¨screenï¼Œå¼€å¯æ–°å±å¹•</span></span><br><span class="line">[root@localhost ~]# yum install -y screen</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## æŸ¥çœ‹screenåå°è¿è¡Œä»»åŠ¡</span></span><br><span class="line">[root@localhost ~]# screen -<span class="built_in">ls</span></span><br><span class="line">[root@localhost ~]# screen -list</span><br><span class="line">There are screens on:</span><br><span class="line">11050.sina (Detached)</span><br><span class="line"><span class="comment">## åˆ›å»ºå·è½´</span></span><br><span class="line">[root@localhost ~]# screen // æ²¡æœ‰å‘½åçš„å·è½´</span><br><span class="line">[root@localhost ~]# screen -S baidu // æŒ‡å®šåå­—</span><br><span class="line"><span class="comment">## å°å° å›åˆ°å‰å°ç•Œé¢</span></span><br><span class="line">Ctrl + a + d</span><br><span class="line"><span class="comment">## åˆ é™¤çª—å£</span></span><br><span class="line">[root@localhost ~]# screen -S sina -X quit</span><br></pre></td></tr></table></figure><h3 id="ç³»ç»Ÿå¹³å‡è´Ÿè½½">ç³»ç»Ÿå¹³å‡è´Ÿè½½</h3><p>æ¯æ¬¡å‘ç°ç³»ç»Ÿå˜æ…¢æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸åšçš„ç¬¬ä¸€ä»¶äº‹ï¼Œå°±æ˜¯æ‰§è¡Œtopæˆ–è€…uptimeå‘½ä»¤ï¼Œæ¥äº†è§£ç³»ç»Ÿçš„è´Ÿè½½æƒ…å†µã€‚å¹³å‡è´Ÿè½½ä¸CPUä½¿ç”¨ç‡å¹¶æ²¡æœ‰ç›´æ¥å…³ç³»ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## æŸ¥çœ‹ç³»ç»Ÿè´Ÿè½½æƒ…å†µ</span></span><br><span class="line">[root@localhost ~]# w</span><br><span class="line">19:36:06 up 3:36, 3 <span class="built_in">users</span>, load average: 0.00, 0.01, 0.05</span><br><span class="line">[root@localhost ~]# <span class="built_in">uptime</span></span><br><span class="line">19:36:10 up 3:36, 3 <span class="built_in">users</span>, load average: 0.00, 0.01, 0.05</span><br><span class="line">[root@localhost ~]# top -n 1</span><br><span class="line">top - 19:36:15 up 3:36, 3 <span class="built_in">users</span>, load average: 0.00, 0.01, 0.05</span><br></pre></td></tr></table></figure><p><font color='red'><strong>å¹³å‡è´Ÿè½½æ˜¯æŒ‡ï¼Œå•ä½æ—¶é—´å†…ï¼Œç³»ç»Ÿå¤„äºå¯è¿è¡ŒçŠ¶æ€å’Œä¸å¯ä¸­æ–­çŠ¶æ€çš„å¹³å‡è¿›ç¨‹æ•°ï¼Œä¹Ÿå°±æ˜¯å¹³å‡æ´»è·ƒè¿›ç¨‹æ•°</strong></font></p><p><strong>å¯è¿è¡ŒçŠ¶æ€å’Œä¸å¯ä¸­æ–­çŠ¶æ€æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.å¯è¿è¡ŒçŠ¶æ€è¿›ç¨‹ï¼Œæ˜¯æŒ‡æ­£åœ¨ä½¿ç”¨CPUæˆ–è€…æ­£åœ¨ç­‰å¾…CPUçš„è¿›ç¨‹ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç”¨PSå‘½ä»¤çœ‹çš„å¤„äºRçŠ¶æ€çš„è¿›ç¨‹</span><br><span class="line">2.ä¸å¯ä¸­æ–­è¿›ç¨‹ï¼Œï¼ˆä½ åœ¨åšä»€ä¹ˆäº‹æƒ…çš„æ—¶å€™æ˜¯ä¸èƒ½è¢«æ‰“æ–­çš„å‘¢ï¼Ÿ...ä¸å¯æè¿°ï¼‰ç³»ç»Ÿä¸­æœ€å¸¸è§çš„æ˜¯ç­‰å¾…ç¡¬ä»¶è®¾å¤‡çš„IOç›¸åº”ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬PSå‘½ä»¤ä¸­çœ‹åˆ°çš„DçŠ¶æ€ï¼ˆä¹Ÿæˆä¸ºDisk Sleepï¼‰çš„è¿›ç¨‹ã€‚å¹³å‡è´Ÿè½½å…¶å®å°±æ˜¯å•ä½æ—¶é—´å†…çš„æ´»è·ƒè¿›ç¨‹æ•°</span><br></pre></td></tr></table></figure><p><strong>å¹³å‡è´Ÿè½½å¤šå°‘æ—¶åˆç†ï¼Ÿ</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">æœ€ç†æƒ³çš„çŠ¶æ€æ˜¯æ¯ä¸ªCPUä¸Šéƒ½åˆšè¿˜è¿è¡Œç€ä¸€ä¸ªè¿›ç¨‹ï¼Œè¿™æ ·æ¯ä¸ªCPUéƒ½å¾—åˆ°äº†å……åˆ†åˆ©ç”¨ã€‚</span><br><span class="line">æ‰€ä»¥åœ¨è¯„åˆ¤è´Ÿè½½æ—¶ï¼Œé¦–å…ˆä½ è¦çŸ¥é“ç³»ç»Ÿæœ‰å‡ ä¸ªCPUï¼Œè¿™å¯ä»¥é€šè¿‡topå‘½ä»¤è·å–ï¼Œæˆ–grep <span class="string">&#x27;model name&#x27;</span></span><br><span class="line">/proc/cpuinfo</span><br><span class="line"><span class="comment">## å¦‚ä½•æŸ¥çœ‹å½“å‰ç³»ç»ŸCPUæ ¸å¿ƒæ•°</span></span><br><span class="line">[root@localhost ~]# top</span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> /proc/cpuinfo</span><br><span class="line">[root@localhost ~]# lscpu</span><br><span class="line">å‡è®¾ç°åœ¨åœ¨4ï¼Œ2ï¼Œ1æ ¸çš„CPUä¸Šï¼Œå¦‚æœå¹³å‡è´Ÿè½½ä¸º2æ—¶ï¼Œæ„å‘³ç€ä»€ä¹ˆå‘¢ï¼Ÿ</span><br><span class="line">1.åœ¨4ä¸ªCPUçš„ç³»ç»Ÿä¸Šï¼Œæ„å‘³ç€CPUæœ‰50%ç©ºé—²ã€‚</span><br><span class="line">2.åœ¨2ä¸ªCPUçš„ç³»ç»Ÿä¸Šï¼Œä»¥ä¸ºè¿™æ‰€æœ‰çš„CPUéƒ½åˆšå¥½å®Œå…¨è¢«å ç”¨ã€‚</span><br><span class="line">3.åœ¨1ä¸ªCPUçš„ç³»ç»Ÿä¸Šï¼Œåˆ™æ„å‘³ç€æœ‰ä¸€åŠçš„è¿›ç¨‹ç«äº‰ä¸åˆ°CPUã€‚</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¸‰ä¸ªå€¼å…³æ³¨å“ªä¸ªåˆç†</span></span><br><span class="line">1ï¼‰ä¸‰ä¸ªå€¼ï¼Œä¸èƒ½åªå…³æ³¨å…¶ä¸­ä¸€ä¸ªå€¼ï¼ˆä¸‰ä¸ªéƒ½è¦çœ‹ï¼‰</span><br><span class="line">2ï¼‰ä¸èƒ½æ ¹æ®1åˆ†é’Ÿè´Ÿè½½ä½æƒ…å†µæ¥åˆ¤æ–­ï¼Œå½“å‰è´Ÿè½½å¤„äºä¸‹é™çŠ¶æ€ï¼ˆä¸å…³æ³¨æœåŠ¡å™¨çš„é—®é¢˜ï¼‰</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¡ç®—æ–¹å¼</span></span><br><span class="line">å‡è®¾æˆ‘ä»¬åœ¨æœ‰2ä¸ªCPUç³»ç»Ÿä¸Šçœ‹åˆ°å¹³å‡è´Ÿè½½ä¸º2.73ï¼Œ6.90ï¼Œ12.98é‚£ä¹ˆè¯´æ˜åœ¨è¿‡å»1åˆ†é’Ÿå†…ï¼Œç³»ç»Ÿæœ‰136%çš„è¶…è½½</span><br><span class="line">1åˆ†é’Ÿï¼šï¼ˆ2.73/2*100%=136%ï¼‰</span><br><span class="line">5åˆ†é’Ÿï¼šï¼ˆ6.90/2*100%=345%ï¼‰</span><br><span class="line">15åˆ†é’Ÿï¼š(12.98/2*100%=649%)</span><br><span class="line">è®¡ç®—å…¬å¼ï¼šï¼ˆè´Ÿè½½/æ ¸å¿ƒæ•°ï¼‰*100%</span><br></pre></td></tr></table></figure><p><strong>è´Ÿè½½è¿‡é«˜æ’æŸ¥</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">web01æœºå™¨å¾ˆå¡ï¼Œæ‰¾å‡ºåŸå› </span><br><span class="line"><span class="comment">### å‹æµ‹å‘½ä»¤</span></span><br><span class="line">stress ï¼ˆK8Sï¼‰æ˜¯Linuxç³»ç»Ÿå‹åŠ›æµ‹è¯•å·¥å…·ï¼Œè¿™é‡Œæˆ‘ä»¬ç”¨ä½œå¼‚å¸¸è¿›ç¨‹æ¨¡æ‹Ÿå¹³å‡è´Ÿè½½å‡é«˜çš„åœºæ™¯</span><br><span class="line"><span class="comment">##################################################################</span></span><br><span class="line"><span class="comment">### æ’æŸ¥å·¥å…·</span></span><br><span class="line">mpstatæ˜¯å¤šæ ¸CPUæ€§èƒ½åˆ†æå·¥å…·ï¼Œç”¨æ¥å®æ—¶æ£€æŸ¥æ¯ä¸ªCPUçš„æ€§èƒ½æŒ‡æ ‡ï¼Œä»¥åŠæ‰€æœ‰CPUçš„å¹³å‡æŒ‡æ ‡ã€‚</span><br><span class="line">pidstatæ˜¯ä¸€ä¸ªå¸¸ç”¨çš„è¿›ç¨‹æ€§èƒ½åˆ†æå·¥å…·ï¼Œç”¨æ¥å®æ—¶æŸ¥çœ‹è¿›ç¨‹çš„CPUï¼Œå†…å­˜ï¼ŒIOï¼Œä»¥åŠä¸Šä¸‹æ–‡åˆ‡æ¢ç­‰æ€§èƒ½æŒ‡æ ‡ã€‚</span><br></pre></td></tr></table></figure><h3 id="CPUå¯¹è´Ÿè½½å½±å“">CPUå¯¹è´Ÿè½½å½±å“</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# yum intall -y sysstat</span><br><span class="line"><span class="comment">## åˆ†æCPU</span></span><br><span class="line">[root@localhost ~]# mpstat -P ALL 1</span><br><span class="line">[root@localhost ~]# top</span><br><span class="line">%Cpu0 : 99.2 us, 0.0 sy, 0.0 ni, 0.0 <span class="built_in">id</span>, 0.0 wa, 0.0 hi, 0.8 si, 0.0 st</span><br><span class="line">%Cpu1 :100.0 us, 0.0 sy, 0.0 ni, 0.0 <span class="built_in">id</span>, 0.0 wa, 0.0 hi, 0.0 si, 0.0 st</span><br><span class="line">%Cpu2 : 0.0 us, 0.0 sy, 0.0 ni, 99.0 <span class="built_in">id</span>, 0.0 wa, 0.0 hi, 1.0 si, 0.0 st</span><br><span class="line">%Cpu3 :100.0 us, 0.0 sy, 0.0 ni, 0.0 <span class="built_in">id</span>, 0.0 wa, 0.0 hi, 0.0 si, 0.0 st</span><br><span class="line">[root@localhost ~]# pidstat -u 5 1</span><br><span class="line">Linux 3.10.0-957.el7.x86_64 (localhost.localdomain) 04/26/2024 _x86_64_(4 CPU)</span><br><span class="line">08:21:50 PM UID PID %usr %system %guest %CPU CPU Command</span><br><span class="line">08:21:55 PM 0 9 0.00 0.20 0.00 0.20 0 rcu_sched</span><br><span class="line">08:21:55 PM 0 60 0.00 0.20 0.00 0.20 0 kworker/0:1</span><br><span class="line">08:21:55 PM 0 6618 0.00 0.20 0.00 0.20 0 sshd</span><br><span class="line">08:21:55 PM 0 6803 99.60 0.20 0.00 99.80 3 java</span><br><span class="line">08:21:55 PM 0 6804 99.40 0.40 0.00 99.80 2 java</span><br><span class="line">08:21:55 PM 0 6805 99.60 0.40 0.00 100.00 1 java</span><br><span class="line">08:21:55 PM 0 6815 0.00 0.20 0.00 0.20 0 pidstat</span><br><span class="line">Average: UID PID %usr %system %guest %CPU CPU Command</span><br><span class="line">Average: 0 9 0.00 0.20 0.00 0.20 - rcu_sched</span><br><span class="line">Average: 0 60 0.00 0.20 0.00 0.20 - kworker/0:1</span><br><span class="line">Average: 0 6618 0.00 0.20 0.00 0.20 - sshd</span><br><span class="line">Average: 0 6803 99.60 0.20 0.00 99.80 - java</span><br><span class="line">Average: 0 6804 99.40 0.40 0.00 99.80 - java</span><br><span class="line">Average: 0 6805 99.60 0.40 0.00 100.00 - java</span><br><span class="line">Average: 0 6815 0.00 0.20 0.00 0.20 - pidstat</span><br><span class="line"><span class="comment">## æŸ¥æ‰¾å¯¹åº”ç¨‹åºçš„æ—¥å¿—</span></span><br><span class="line"><span class="built_in">tail</span> -f /var/log/nginx/access.log</span><br><span class="line">tial -f /var/log/java/xxxx.log</span><br><span class="line">errorï¼šæ‰¾åˆ°æŠ¥é”™</span><br><span class="line"><span class="comment">## å°†æ—¥å¿—äº¤ç»™å¼€å‘å¤„ç†/åˆ†æ</span></span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•ä¸€ä¸‹ç£ç›˜IOå¯¹è´Ÿè½½å½±å“">æµ‹è¯•ä¸€ä¸‹ç£ç›˜IOå¯¹è´Ÿè½½å½±å“</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## IOå¯¹CPUçš„å½±å“</span></span><br><span class="line">[root@localhost ~]# mpstat -P ALL 3</span><br><span class="line">Linux 3.10.0-957.el7.x86_64 (localhost.localdomain) 04/26/2024 _x86_64_(4 CPU)</span><br><span class="line">08:29:48 PM CPU %usr %<span class="built_in">nice</span> %sys %iowait %irq %soft %steal %guest %gnice %idle</span><br><span class="line">08:29:51 PM all 0.17 0.00 73.85 0.00 0.00 0.00 0.00 0.00 0.00 25.98</span><br><span class="line">08:29:51 PM 0 0.00 0.00 66.93 0.00 0.00 0.00 0.00 0.00 0.00 33.07</span><br><span class="line">08:29:51 PM 1 0.00 0.00 68.15 0.00 0.00 0.00 0.00 0.00 0.00 31.85</span><br><span class="line">08:29:51 PM 2 0.00 0.00 79.87 0.00 0.00 0.00 0.00 0.00 0.00 20.13</span><br><span class="line">08:29:51 PM 3 0.00 0.00 78.92 0.00 0.00 0.00 0.00 0.00 0.00 21.08</span><br><span class="line"><span class="comment">## iostat æŸ¥çœ‹ç£ç›˜IOä¿¡æ¯</span></span><br><span class="line">[root@localhost ~]# iostat</span><br><span class="line">Linux 3.10.0-957.el7.x86_64 (localhost.localdomain) 04/26/2024 _x86_64_(4 CPU)</span><br><span class="line">avg-cpu: %user %<span class="built_in">nice</span> %system %iowait %steal %idle</span><br><span class="line">16.40 0.00 3.49 0.01 0.00 80.10</span><br><span class="line">Device: tps kB_read/s kB_wrtn/s kB_read kB_wrtn</span><br><span class="line">scd0 0.01 0.53 0.00 1028 0</span><br><span class="line">sda 6.23 283.56 8.79 548598 17015</span><br><span class="line">[root@localhost ~]# pidstat -u 5 1</span><br><span class="line">08:30:36 PM 0 6831 0.40 76.74 0.00 77.14 3 stress</span><br><span class="line">08:30:36 PM 0 6832 0.00 78.13 0.00 78.13 1 stress</span><br><span class="line">08:30:36 PM 0 6833 0.00 74.55 0.00 74.55 3 stress</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•å¤§é‡è¿›ç¨‹å¯¹è´Ÿè½½å½±å“">æµ‹è¯•å¤§é‡è¿›ç¨‹å¯¹è´Ÿè½½å½±å“</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# mpstat -P ALL 3</span><br><span class="line">Linux 3.10.0-957.el7.x86_64 (localhost.localdomain) 04/26/2024 _x86_64_(4 CPU)</span><br><span class="line">08:33:45 PM CPU %usr %<span class="built_in">nice</span> %sys %iowait %irq %soft %steal %guest %gnice %idle</span><br><span class="line">08:33:48 PM all 53.94 0.00 0.25 0.00 0.00 0.25 0.00 0.00 0.00 45.57</span><br><span class="line">08:33:48 PM 0 53.00 0.00 0.50 0.00 0.00 0.00 0.00 0.00 0.00 46.50</span><br><span class="line">08:33:48 PM 1 54.41 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 45.59</span><br><span class="line">08:33:48 PM 2 52.50 0.00 0.50 0.00 0.00 0.50 0.00 0.00 0.00 46.50</span><br><span class="line">08:33:48 PM 3 55.02 0.00 0.00 0.00 0.00 0.48 0.00 0.00 0.00 44.50</span><br><span class="line">[root@localhost ~]# pidstat -u 5 1</span><br><span class="line">08:30:36 PM 0 6831 0.40 76.74 0.00 77.14 3 stress</span><br><span class="line">08:30:36 PM 0 6832 0.00 78.13 0.00 78.13 1 stress</span><br><span class="line">08:30:36 PM 0 6833 0.00 74.55 0.00 74.55 3 stress</span><br><span class="line"><span class="comment"># æ€»ç»“ï¼š</span></span><br><span class="line">1.å¹³å‡è´Ÿè½½é«˜æœ‰å¯èƒ½æ˜¯CPUå¯†é›†å‹è¿›ç¨‹å¯¼è‡´çš„</span><br><span class="line">2.å¹³å‡è´Ÿè½½é«˜å¹¶ä¸ä¸€å®šä»£è¡¨CPUçš„ä½¿ç”¨ç‡å°±ä¸€å®šé«˜ï¼Œè¿˜æœ‰å¯èƒ½æ˜¯I/Oç¹å¿™</span><br><span class="line">3.å½“å‘ç°è´Ÿè½½é«˜æ—¶ï¼Œå¯ä»¥ä½¿ç”¨mpstatã€pidstatç­‰å·¥å…·ï¼Œå¿«é€Ÿå®šä½åˆ°ï¼Œè´Ÿè½½é«˜çš„åŸå› ï¼Œä»è€Œåšå‡ºå¤„ç†</span><br></pre></td></tr></table></figure><p><strong>è´Ÿè½½è¾¾åˆ°å¤šå°‘æ—¶å€™éœ€è¦æ³¨æ„</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å½“å¹³å‡è´Ÿè½½é«˜äºCPUæ•°é‡70%çš„æ—¶å€™ï¼Œä½ å°±åº”è¯¥åˆ†ææ’æŸ¥è´Ÿè½½é«˜çš„é—®é¢˜äº†ï¼Œä¸€æ—¦è´Ÿè½½è¿‡é«˜ï¼Œå°±å¯èƒ½å¯¼è‡´è¿›ç¨‹ç›¸åº”å˜æ…¢ï¼Œè¿›è€Œå½±å“æœåŠ¡çš„æ­£å¸¸åŠŸèƒ½ã€‚</span><br><span class="line">ä½†70%è¿™ä¸ªæ•°å­—å¹¶ä¸æ˜¯ç»å¯¹çš„ï¼Œæœ€æ¨èçš„æ–¹æ³•ï¼Œè¿˜æ˜¯æŠŠç³»ç»Ÿçš„å¹³å‡è´Ÿè½½ç›‘æ§èµ·æ¥ï¼Œç„¶åæ ¹æ®æ›´å¤šçš„å†å²æ•°æ®ï¼Œåˆ¤æ–­è´Ÿè½½çš„å˜åŒ–è¶‹åŠ¿ï¼Œå½“å‘ç°è´Ÿè½½æœ‰æ˜æ˜¾å‡é«˜çš„è¶‹åŠ¿æ—¶ï¼Œæ¯”å¦‚è¯´è´Ÿè½½ç¿»å€äº†ï¼Œä½ å†å»åšåˆ†æå’Œè°ƒæŸ¥ã€‚</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linuxæ•²é—¨ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>20</title>
      <link href="/posts/8a707622.html"/>
      <url>/posts/8a707622.html</url>
      
        <content type="html"><![CDATA[<div class='wow animate__heartBeat' data-wow-duration='' data-wow-delay='1s' data-wow-offset=''  data-wow-iteration='2' ><div class="note red icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p><a href="https://www.lukeme.top/posts/4c7367cf.html">å‘Šåˆ«å°ç™½ï¼Œç‚¹å‡»ç›´è¾¾</a></p></div></div><h3 id="CentOS6å®‰è£…">CentOS6å®‰è£…</h3><p><img src="https://cos.lukme.top/Pic/image-20240429164147100.png" alt="image-20240429164147100"></p><p><strong>1.é€‰ç¬¬ä¸€ä¸ªï¼Œå›è½¦</strong></p><p><img src="C:%5CUsers%5CDell%5CDesktop%5CQQ%E6%88%AA%E5%9B%BE20240429144920.png" alt="QQæˆªå›¾20240429144920"></p><p><img src="https://cos.lukme.top/Pic/image-20240429150439219.png" alt="image-20240429150439219"></p><p><img src="https://cos.lukme.top/Pic/image-20240429150817328.png" alt="image-20240429150817328"></p><p><img src="https://cos.lukme.top/Pic/image-20240429150932495.png" alt="image-20240429150932495"></p><p><img src="https://cos.lukme.top/Pic/image-20240429151041651.png" alt="image-20240429151041651"></p><p><strong>é€‰æ‹©æ—¶åŒºå’Œå¡«å†™å¯†ç ç­‰çœç•¥</strong></p><p><img src="https://cos.lukme.top/Pic/image-20240429151453854.png" alt="image-20240429151453854"></p><p><img src="https://cos.lukme.top/Pic/image-20240429151714208.png" alt=""></p><p><img src="https://cos.lukme.top/Pic/image-20240429151940449.png" alt="image-20240429151940449"></p><p>é€‰æ‹©baseå’Œdevelopå·¥å…·</p><p><img src="https://cos.lukme.top/Pic/image-20240429152056178.png" alt="image-20240429152056178"></p><h3 id="é…ç½®CentOS6ç½‘å¡">é…ç½®CentOS6ç½‘å¡</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# vi /etc/sysconfig/network-scripts/ifcfg-eth0 </span><br><span class="line">DEVICE=eth0</span><br><span class="line">HWADDR=00:0C:29:5A:FC:82</span><br><span class="line">TYPE=Ethernet</span><br><span class="line">UUID=65c55f51-b929-49fa-b8c9-541e6230e11b</span><br><span class="line">ONBOOT=<span class="built_in">yes</span></span><br><span class="line">NM_CONTROLLED=<span class="built_in">yes</span></span><br><span class="line">BOOTPROTO=none</span><br><span class="line">IPADDR=10.0.0.10</span><br><span class="line">NETMASK=255.255.255.0</span><br><span class="line">GETEWAY=10.0.0.254</span><br><span class="line">DNS=223.5.5.5</span><br><span class="line">:wq</span><br><span class="line">é‡å¯ç½‘å¡ </span><br><span class="line">1./etc/init.d/network restart</span><br><span class="line">2.service network restart</span><br></pre></td></tr></table></figure><h3 id="CentOS6å¯åŠ¨æµç¨‹">CentOS6å¯åŠ¨æµç¨‹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Centos6</span><br><span class="line">1.BIOSåŠ ç”µè‡ªæ£€</span><br><span class="line">2.å†…æ ¸å¼•å¯¼</span><br><span class="line">3.è¯»å–GRUBèœå•</span><br><span class="line">4.è¿è¡Œinitï¼Œè¯»å–/etc/inittabé»˜è®¤è¿è¡Œçº§åˆ«</span><br><span class="line">5.æŒ‰é¡ºåºå¯åŠ¨å…¶ä»–æœåŠ¡/etc/rcN.d  </span><br><span class="line">6.å»ºç«‹ç»ˆç«¯</span><br><span class="line">7.ç”¨æˆ·ç™»å½•</span><br></pre></td></tr></table></figure><p><strong>2.å†…æ ¸å¼•å¯¼</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">æ‰“å¼€ç”µæºï¼ŒBiOSåŠ ç”µè‡ªæ£€</span><br><span class="line">æ£€æµ‹ç¡¬ä»¶æ˜¯å¦æŸåï¼šCPUã€å†…å­˜ã€ç£ç›˜</span><br><span class="line">è¯»å–/bootç›®å½•ä¸‹çš„æ–‡ä»¶ï¼ŒåŠ è½½å¯åŠ¨æ–‡ä»¶ï¼ŒGRUBèœå•</span><br><span class="line">GRUBèœå•æä¾›å·²å®‰è£…ç³»ç»Ÿçš„é€‰é¡¹ï¼Œå¦‚æœæ˜¯å¤šç³»ç»Ÿï¼Œé€‰æ‹©è¦è¿›å…¥çš„ç³»ç»Ÿ</span><br></pre></td></tr></table></figure><p><strong>3.è¿è¡Œinit</strong></p><p>initè¿è¡Œçº§åˆ« init åœ¨CentOSä¸­ï¼Œæ˜¯ç³»ç»Ÿæ‰€æœ‰è¿›ç¨‹çš„èµ·ç‚¹ï¼Œå¦‚æœè¿›ç¨‹æƒ³å¯åŠ¨ï¼Œé‚£å¿…é¡»æœ‰initï¼Œå¦‚æœæ²¡æœ‰initï¼Œç³»ç»Ÿä¸­çš„ä»» ä½•è¿›ç¨‹éƒ½ä¸ä¼šå¯åŠ¨ï¼Œé‚£å°±ç›¸å½“äºè¿™ä¸ªç³»ç»Ÿæ‰“ä¸å¼€</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">initæ˜¯CentOS6ä¸­PIDä¸º0çš„è¿›ç¨‹ï¼Œæ˜¯æ‰€æœ‰è¿›ç¨‹å¯åŠ¨çš„èµ·ç‚¹</span><br><span class="line">[root@localhost ~]# pstree</span><br><span class="line">initâ”€â”¬â”€abrtd</span><br><span class="line">     â”œâ”€acpid</span><br><span class="line">     â”œâ”€atd</span><br><span class="line">     â”œâ”€auditdâ”€â”€â”€&#123;auditd&#125;</span><br><span class="line">     â”œâ”€console-kit-daeâ”€â”€â”€63*[&#123;console-kit-da&#125;]</span><br><span class="line">     â”œâ”€sshdâ”€â”€â”€sshdâ”€â”€â”€bashâ”€â”€â”€pstree</span><br><span class="line">     â””â”€udevdâ”€â”€â”€2*[udevd]</span><br><span class="line">    </span><br></pre></td></tr></table></figure><h4 id="4-è¿è¡Œçº§åˆ«">4.è¿è¡Œçº§åˆ«</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">initç¨‹åºé¦–å…ˆæ˜¯éœ€è¦è¯»å–é…ç½®æ–‡ä»¶/etc/inittab</span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> /etc/inittab</span><br><span class="line"><span class="comment"># Default runlevel. The runlevels used are:</span></span><br><span class="line"><span class="comment"># 0 - halt (Do NOT set initdefault to this)</span></span><br><span class="line"><span class="comment"># 1 - Single user mode</span></span><br><span class="line"><span class="comment"># 2 - Multiuser, without NFS (The same as 3, if you do not have networking)</span></span><br><span class="line"><span class="comment"># 3 - Full multiuser mode</span></span><br><span class="line"><span class="comment"># 4 - unused</span></span><br><span class="line"><span class="comment"># 5 - X11</span></span><br><span class="line"><span class="comment"># 6 - reboot (Do NOT set initdefault to this)</span></span><br><span class="line"><span class="built_in">id</span>:3:initdefault:  <span class="comment">#è®¾ç½®è¿è¡Œçº§åˆ«ä¸º3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿è¡Œçº§åˆ«ï¼š</span></span><br><span class="line">0ï¼šå…³æœºè¿è¡Œçº§åˆ« <span class="comment">#å¼€æœºå³å…³æœº</span></span><br><span class="line">1ï¼šå•ç”¨æˆ·æ¨¡å¼è¿è¡Œçº§åˆ«</span><br><span class="line">2ï¼šå¤šç”¨æˆ·æ¨¡å¼ï¼Œä½†æ˜¯æ²¡æœ‰æ–‡ä»¶ç³»ç»Ÿï¼Œæ²¡æœ‰ç½‘ç»œ</span><br><span class="line">3ï¼šå®Œæ•´çš„å¤šç”¨æˆ·æ¨¡å¼ï¼Œæœ‰æ–‡ä»¶ç³»ç»Ÿï¼Œæœ‰ç½‘ç»œ</span><br><span class="line">4ï¼šæœªè¢«ä½¿ç”¨çš„è¿è¡Œçº§åˆ«</span><br><span class="line">5ï¼šå›¾å½¢åŒ–è¿è¡Œçº§åˆ«</span><br><span class="line">6ï¼šé‡å¯è¿è¡Œçº§åˆ« <span class="comment">#é»˜è®¤è¿è¡Œçº§åˆ«ä¸èƒ½è®¾ä¸º6ï¼Œå¦åˆ™ä¸èƒ½æ­£å¸¸å¯åŠ¨</span></span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/image-20240429154944112.png" alt="image-20240429154944112"></p><h4 id="æŸ¥çœ‹å½“å‰è¿è¡Œçº§åˆ«">æŸ¥çœ‹å½“å‰è¿è¡Œçº§åˆ«</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# runlevel</span><br><span class="line">N 3</span><br><span class="line"><span class="comment">#ä¸´æ—¶åˆ‡æ¢è¿è¡Œçº§åˆ«</span></span><br><span class="line">[root@localhost ~]# init 5</span><br><span class="line"><span class="comment">#æ°¸ä¹…åˆ‡æ¢è¿è¡Œçº§åˆ«</span></span><br><span class="line">[rootezls ~]vim /etc/inittab</span><br><span class="line"><span class="built_in">id</span>:3:initdefault</span><br></pre></td></tr></table></figure><p><strong>è¯»å–å®Œé…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ°å¯¹åº”çš„è¿è¡Œçº§åˆ« 3</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">æŸ¥è¯¢æ“ä½œç³»ç»Ÿåœ¨æ¯ä¸€ä¸ªæ‰§è¡Œç­‰çº§ä¸­ä¼šæ‰§è¡Œå“ªäº›ç³»ç»ŸæœåŠ¡ï¼Œå…¶ä¸­åŒ…æ‹¬å„ç±»å¸¸é©»æœåŠ¡ã€‚</span><br><span class="line">[root@localhost ~]# chkconfig</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# chkconfig |grep <span class="string">&#x27;3:on&#x27;</span></span><br><span class="line">auditd 0:off 1:off 2:on 3:on 4:on 5:on 6:off</span><br><span class="line">crond 0:off 1:off 2:on 3:on 4:on 5:on 6:off</span><br><span class="line">ip6tables 0:off 1:off 2:on 3:on 4:on 5:on 6:off</span><br><span class="line">iptables 0:off 1:off 2:on 3:on 4:on 5:on 6:off</span><br><span class="line">kdump 0:off 1:off 2:off 3:on 4:on 5:on 6:off</span><br><span class="line">mdmonitor 0:off 1:off 2:on 3:on 4:on 5:on 6:off</span><br><span class="line">netfs 0:off 1:off 2:off 3:on 4:on 5:on 6:off</span><br><span class="line">network 0:off 1:off 2:on 3:on 4:on 5:on 6:off</span><br><span class="line">postfix 0:off 1:off 2:on 3:on 4:on 5:on 6:off</span><br><span class="line">rsyslog 0:off 1:off 2:on 3:on 4:on 5:on 6:off</span><br><span class="line">sshd 0:off 1:off 2:on 3:on 4:on 5:on 6:off</span><br><span class="line">udev-post 0:off 1:on 2:on 3:on 4:on 5:on 6:off</span><br></pre></td></tr></table></figure><p><strong>5.ç³»ç»Ÿåˆå§‹åŒ–</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## è¯»å–3è¿è¡Œçº§åˆ«çš„æœåŠ¡å¯åŠ¨é¡ºåº</span></span><br><span class="line"><span class="comment">##Så¼€å¤´çš„æ˜¯å…³æœºæœåŠ¡åœæ­¢é¡ºåº</span></span><br><span class="line">[root@localhost ~]# ll /etc/rc3.d/</span><br><span class="line">total 0</span><br><span class="line">lrwxrwxrwx. 1 root root 19 Apr 29 17:06 K10saslauthd -&gt; ../init.d/saslauthd</span><br><span class="line">lrwxrwxrwx. 1 root root 21 Apr 29 17:06 K87restorecond -&gt; ../init.d/restorecond</span><br><span class="line">lrwxrwxrwx. 1 root root 20 Apr 29 17:06 K89netconsole -&gt; ../init.d/netconsole</span><br><span class="line">lrwxrwxrwx. 1 root root 15 Apr 29 17:06 K89rdisc -&gt; ../init.d/rdisc</span><br><span class="line">lrwxrwxrwx. 1 root root 19 Apr 29 17:06 S08ip6tables -&gt; ../init.d/ip6tables</span><br><span class="line">lrwxrwxrwx. 1 root root 18 Apr 29 17:06 S08iptables -&gt; ../init.d/iptables</span><br><span class="line">lrwxrwxrwx. 1 root root 17 Apr 29 17:06 S10network -&gt; ../init.d/network</span><br><span class="line">lrwxrwxrwx. 1 root root 16 Apr 29 17:07 S11auditd -&gt; ../init.d/auditd</span><br><span class="line">lrwxrwxrwx. 1 root root 17 Apr 29 17:06 S12rsyslog -&gt; ../init.d/rsyslog</span><br><span class="line">lrwxrwxrwx. 1 root root 19 Apr 29 17:06 S15mdmonitor -&gt; ../init.d/mdmonitor</span><br><span class="line">lrwxrwxrwx. 1 root root 15 Apr 29 17:06 S25netfs -&gt; ../init.d/netfs</span><br><span class="line">lrwxrwxrwx. 1 root root 19 Apr 29 17:06 S26udev-post -&gt; ../init.d/udev-post</span><br><span class="line">lrwxrwxrwx. 1 root root 15 Apr 29 17:07 S50kdump -&gt; ../init.d/kdump</span><br><span class="line">lrwxrwxrwx. 1 root root 14 Apr 29 17:07 S55sshd -&gt; ../init.d/sshd</span><br><span class="line">lrwxrwxrwx. 1 root root 17 Apr 29 17:06 S80postfix -&gt; ../init.d/postfix</span><br><span class="line">lrwxrwxrwx. 1 root root 15 Apr 29 17:06 S90crond -&gt; ../init.d/crond</span><br><span class="line">lrwxrwxrwx. 1 root root 11 Apr 29 17:06 S99local -&gt; ../rc.local</span><br><span class="line"><span class="comment"># chkconfig: 2345 55 25</span></span><br><span class="line"><span class="comment"># CentOS6ä¸­æ‰€æœ‰è„šæœ¬éƒ½æ˜¯shellè„šæœ¬</span></span><br><span class="line">[root@localhost ~]# ll /etc/init.d/      æŸ¥çœ‹æ‰€æœ‰ç¨‹åºçš„å¯åŠ¨è„šæœ¬</span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> /etc/init.d/sshd</span><br><span class="line"><span class="comment"># chkconfig: 2345 55 25</span></span><br><span class="line">åœ¨2345è¿è¡Œçº§åˆ«ä¸Šï¼Œé»˜è®¤å¼€æœºè‡ªå¯</span><br><span class="line">55ï¼šå¼€æœºç¬¬55ä¸ªå¯åŠ¨</span><br><span class="line">25ï¼šå…³æœºç¬¬25ä¸ªå…³é—­</span><br></pre></td></tr></table></figure><p><strong>å»ºç«‹ç»ˆç«¯</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">rcæ‰§è¡Œå®Œæ¯•åï¼Œè¿”å›initã€‚è¿™æ—¶åŸºæœ¬ç³»ç»Ÿç¯å¢ƒå·²ç»è®¾ç½®å¥½äº†ï¼Œå„ç§å®ˆæŠ¤è¿›ç¨‹ä¹Ÿå·²ç»å¯åŠ¨äº†ã€‚ initæ¥ä¸‹æ¥ä¼šæ‰“å¼€6ä¸ªç»ˆç«¯ï¼Œä»¥ä¾¿ç”¨æˆ·ç™»å½•ç³»ç»Ÿã€‚åœ¨inittabä¸­çš„ä»¥ä¸‹6è¡Œå°±æ˜¯å®šä¹‰äº†6ä¸ªç»ˆç«¯ï¼š</span><br><span class="line">1:2345:respawn:/sbin/mingetty tty1</span><br><span class="line">2:2345:respawn:/sbin/mingetty tty2</span><br><span class="line">3:2345:respawn:/sbin/mingetty tty3</span><br><span class="line">4:2345:respawn:/sbin/mingetty tty4</span><br><span class="line">5:2345:respawn:/sbin/mingetty tty5</span><br><span class="line">6:2345:respawn:/sbin/mingetty tty6</span><br><span class="line"></span><br><span class="line">è¿œç¨‹è¿æ¥å·¥å…·</span><br><span class="line">pts/0</span><br></pre></td></tr></table></figure><p><strong>ç”¨æˆ·ç™»å½•ç³»ç»Ÿ</strong></p><p>ä¸€èˆ¬æ¥è¯´ï¼Œç”¨æˆ·çš„ç™»å½•æ–¹å¼æœ‰ä¸‰ç§ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ï¼ˆ1ï¼‰å‘½ä»¤è¡Œç™»å½•</span><br><span class="line">ï¼ˆ2ï¼‰sshç™»å½•</span><br><span class="line">ï¼ˆ3ï¼‰å›¾å½¢ç•Œé¢ç™»å½•</span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/image-20240429161712973.png" alt="image-20240429161712973"></p><h4 id="ç³»ç»Ÿå…³æœºå‘½ä»¤">ç³»ç»Ÿå…³æœºå‘½ä»¤</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## å…³æœº</span></span><br><span class="line">halt</span><br><span class="line">shutdown -h now</span><br><span class="line">poweroff</span><br><span class="line"></span><br><span class="line"><span class="built_in">sync</span> å°†æ•°æ®ç”±å†…å­˜åŒæ­¥åˆ°ç¡¬ç›˜ä¸­ã€‚</span><br><span class="line">shutdown å…³æœºæŒ‡ä»¤</span><br><span class="line">shutdown â€“h 10      <span class="comment">#è®¡ç®—æœºå°†åœ¨10åˆ†é’Ÿåå…³æœºï¼Œå¹¶ä¸”ä¼šæ˜¾ç¤ºåœ¨ç™»é™†ç”¨æˆ·çš„å½“å‰å±å¹•ä¸­ã€‚</span></span><br><span class="line">shutdown â€“h now      <span class="comment">#ç«‹é©¬å…³æœº</span></span><br><span class="line">shutdown â€“h 20:25  <span class="comment">#ç³»ç»Ÿä¼šåœ¨ä»Šå¤©20:25å…³æœº</span></span><br><span class="line">shutdown â€“h +10      <span class="comment">#ååˆ†é’Ÿåå…³æœº</span></span><br><span class="line">shutdown â€“r now  <span class="comment">#ç³»ç»Ÿç«‹é©¬é‡å¯</span></span><br><span class="line">shutdown â€“r +10  <span class="comment">#ç³»ç»Ÿååˆ†é’Ÿåé‡å¯</span></span><br><span class="line">reboot     <span class="comment">#å°±æ˜¯é‡å¯ï¼Œç­‰åŒäº shutdown â€“r now</span></span><br><span class="line">halt     <span class="comment">#å…³é—­ç³»ç»Ÿï¼Œç­‰åŒäºshutdown â€“h now å’Œ poweroff</span></span><br><span class="line"><span class="comment">## é‡å¯</span></span><br><span class="line">reboot</span><br><span class="line">init 6</span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/image-20240429162103002.png" alt="image-20240429162103002"></p><h3 id="CentOS6å¿˜è®°rootå¯†ç è¿›å…¥-å•ç”¨æˆ·æ¨¡å¼">CentOS6å¿˜è®°rootå¯†ç è¿›å…¥     å•ç”¨æˆ·æ¨¡å¼</h3><p><strong>1ï¼‰é‡å¯ç³»ç»Ÿï¼Œåˆ°grubèœå•ç•Œé¢</strong></p><p><img src="https://cos.lukme.top/Pic/image-20240429164346037.png" alt="image-20240429164346037"></p><p><img src="https://cos.lukme.top/Pic/image-20240429164633863.png" alt="image-20240429164633863"></p><p><img src="https://cos.lukme.top/Pic/image-20240429165101506.png" alt="image-20240429165101506"></p><p><strong>å›è½¦è¿”å›å†…æ ¸èœå•</strong></p><p><img src="https://cos.lukme.top/Pic/image-20240429164943845.png" alt="image-20240429164943845"></p><p><strong>è¿›å…¥åå°±å¯ä»¥é‡æ–°è®¾ç½®å¯†ç äº†</strong></p><p><img src="https://cos.lukme.top/Pic/image-20240429165410448.png" alt="image-20240429165410448"></p><p>å¯†ç è®¾ç½®å¥½é‡å¯å°±OKäº†</p><p>reboot   init6</p><h3 id="CentOS7ç³»ç»Ÿå¯åŠ¨é¡ºåº">CentOS7ç³»ç»Ÿå¯åŠ¨é¡ºåº</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># C7</span></span><br><span class="line">1.BIOS(å¼€æœºè‡ªæ£€)</span><br><span class="line">2.MBR ( Master Boot Record ä¸»å¼•å¯¼è®°å½•)</span><br><span class="line">3.GRUB2 Bootloaderï¼ˆå¼•å¯¼èœå•ï¼‰</span><br><span class="line">4.Kernelï¼ˆå†…æ ¸å¼•å¯¼ï¼‰</span><br><span class="line">5.Systemd ï¼ˆä¸å†ä½¿ç”¨initï¼Œæ”¹æˆäº†systemdï¼‰</span><br><span class="line">6.æŒ‰é¡ºåºå¯åŠ¨å…¶ä»–æœåŠ¡ systemctl list-unit-files</span><br><span class="line">[root@lb01 ~]# systemctl list-unit-files</span><br><span class="line">UNIT FILE                                     STATE   </span><br><span class="line">proc-sys-fs-binfmt_misc.automount             static  </span><br><span class="line">dev-hugepages.mount                           static  </span><br><span class="line">dev-mqueue.mount                              static  </span><br><span class="line">proc-sys-fs-binfmt_misc.mount                 static  </span><br><span class="line">sys-fs-fuse-connections.mount                 static  </span><br><span class="line">sys-kernel-config.mount                       static  </span><br><span class="line">sys-kernel-debug.mount                        static</span><br><span class="line">7.å»ºç«‹ç»ˆç«¯</span><br><span class="line">8.ç”¨æˆ·ç™»å½•</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿è¡Œçº§åˆ«ï¼š</span></span><br><span class="line">/usr/lib/systemd/system/runlevel0.target -&gt; poweroff.target</span><br><span class="line">/usr/lib/systemd/system/runlevel1.target -&gt; rescue.target</span><br><span class="line">/usr/lib/systemd/system/runlevel2.target -&gt; multi-user.target</span><br><span class="line">/usr/lib/systemd/system/runlevel3.target -&gt; multi-user.target</span><br><span class="line">/usr/lib/systemd/system/runlevel4.target -&gt; multi-user.target</span><br><span class="line">/usr/lib/systemd/system/runlevel5.target -&gt; graphical.target</span><br><span class="line">/usr/lib/systemd/system/runlevel6.target -&gt; reboot.target</span><br><span class="line">0ï¼šå…³æœºè¿è¡Œçº§åˆ« (Do NOT <span class="built_in">set</span> initdefault to this)</span><br><span class="line">1ï¼šå•ç”¨æˆ·æ¨¡å¼è¿è¡Œçº§åˆ«</span><br><span class="line">2ï¼Œ3ï¼Œ4ï¼šå®Œæ•´çš„å¤šç”¨æˆ·æ¨¡å¼ï¼Œæœ‰æ–‡ä»¶ç³»ç»Ÿï¼Œæœ‰ç½‘ç»œ</span><br><span class="line">5ï¼šå›¾å½¢åŒ–è¿è¡Œçº§åˆ«</span><br><span class="line">6ï¼šé‡å¯è¿è¡Œçº§åˆ« (Do NOT <span class="built_in">set</span> initdefault to this)</span><br><span class="line"><span class="comment">#æŸ¥çœ‹å½“å‰è¿è¡Œçº§åˆ«ï¼š</span></span><br><span class="line">[root@yum_repo ~]# systemctl get-default</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# systemctl list-unit-files|grep <span class="string">&#x27;enabled&#x27;</span></span><br><span class="line"><span class="comment">## CentOS7ä¸­å¯åŠ¨æœåŠ¡ï¼Œæ‰€æœ‰æœåŠ¡çš„å¯åŠ¨è„šæœ¬</span></span><br><span class="line">/usr/lib/systemd/system/</span><br><span class="line"><span class="comment">#ä¿®æ”¹è¿è¡Œçº§åˆ«</span></span><br><span class="line">[root@yum_repo ~]# systemctl set-default multi-user.target    </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³¨æ„ï¼šcentos7ä¸­æ‰€æœ‰æœåŠ¡çš„å¯åŠ¨è„šæœ¬ï¼Œéƒ½ä¸æ˜¯shellä¸”å¿…é¡»ä»¥.serviceç»“å°¾</span></span><br><span class="line"><span class="comment">## å¼€æœºè‡ªå¯åŠ¨æœåŠ¡</span></span><br><span class="line">[root@localhost ~]# ll /etc/systemd/system/multi-user.target.wants/</span><br><span class="line">auditd.service -&gt; /usr/lib/systemd/system/auditd.service</span><br><span class="line">nginx.service -&gt; /usr/lib/systemd/system/nginx.service</span><br><span class="line">firewalld.service -&gt; /usr/lib/systemd/system/firewalld.service</span><br><span class="line">irqbalance.service -&gt; /usr/lib/systemd/system/irqbalance.service</span><br><span class="line">NetworkManager.service -&gt; /usr/lib/systemd/system/NetworkManager.service</span><br><span class="line">postfix.service -&gt; /usr/lib/systemd/system/postfix.service</span><br><span class="line">remote-fs.target -&gt; /usr/lib/systemd/system/remote-fs.target</span><br><span class="line">rhel-configure.service -&gt; /usr/lib/systemd/system/rhel-configure.service</span><br><span class="line">rsyslog.service -&gt; /usr/lib/systemd/system/rsyslog.service</span><br><span class="line">sshd.service -&gt; /usr/lib/systemd/system/sshd.service</span><br><span class="line">tuned.service -&gt; /usr/lib/systemd/system/tuned.service</span><br><span class="line">vmtoolsd.service -&gt; /usr/lib/systemd/system/vmtoolsd.service</span><br></pre></td></tr></table></figure><h3 id="CentOS7è¿›å…¥å•ç”¨æˆ·æ¨¡å¼">CentOS7è¿›å…¥å•ç”¨æˆ·æ¨¡å¼</h3><p><strong>1.é‡å¯ç³»ç»Ÿ</strong></p><p><img src="https://cos.lukme.top/Pic/image-20240429170437706.png" alt="image-20240429170437706"></p><p><strong>2.è¿›å…¥grub2èœå•</strong></p><p><img src="https://cos.lukme.top/Pic/image-20240429170649081.png" alt="image-20240429170649081"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨linux16è¡Œçš„æœ«å°¾è¾“å…¥,ç„¶åæŒ‰ä¸‹   Ctrl+Xå¼•å¯¼   ç»„åˆé”®æ¥è¿è¡Œä¿®æ”¹è¿‡çš„å†…æ ¸ç¨‹åº</span></span><br><span class="line">enforcing=0 init=/bin/bash</span><br><span class="line">enforcing=0   å…³é—­selinuxï¼ˆä¸´æ—¶çš„ï¼‰ï¼Œè¿›å…¥å•ç”¨æˆ·åé…ç½®æ–‡ä»¶é‡Œå…³é—­selinuxï¼Œå¦åˆ™é‡æ–°å¼€æœºåå¯†ç å°±ä¸ç”Ÿæ•ˆäº†</span><br></pre></td></tr></table></figure><p><strong>ä¸æŒ‚è½½æ–¹å¼</strong></p><p><img src="https://cos.lukme.top/Pic/image-20240429173119985.png" alt="image-20240429173119985"></p><p><strong>3.è¿›å…¥å•ç”¨æˆ·æ¨¡å¼</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.é‡æ–°æŒ‚è½½/ç›®å½•</span></span><br><span class="line">mount -o rw,remount /</span><br><span class="line"><span class="comment"># 2.ä¿®æ”¹å¯†ç </span></span><br><span class="line">passwd root</span><br><span class="line"><span class="comment"># 3.é‡æ–°å¼•å¯¼ç³»ç»Ÿ</span></span><br><span class="line"><span class="built_in">exec</span> /sbin/init</span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/image-20240429171621119.png" alt="image-20240429171621119"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">è¿›å…¥é…ç½®æ–‡ä»¶æ°¸ä¹…å…³é—­selinux</span><br><span class="line">[root@lb01 ~]# vi /etc/selinux/config</span><br><span class="line">SELINUX=disabled    å°†permissiveæ”¹ä¸ºdisabled</span><br><span class="line">SELINUXTYPE=targeted</span><br><span class="line"></span><br><span class="line">æŸ¥çœ‹selinuxå¼€å¯çŠ¶æ€</span><br><span class="line">[root@lb01 ~]# getenforce</span><br><span class="line">Disabled</span><br></pre></td></tr></table></figure><h4 id="ä¿®æ”¹CenOS7é»˜è®¤è¿è¡Œçº§åˆ«">ä¿®æ”¹CenOS7é»˜è®¤è¿è¡Œçº§åˆ«</h4><p><strong>å¦‚æœcentos7è¢«è®¾ç½®ä¸ºè¿è¡Œçº§åˆ«6ï¼Œå¯¼è‡´æ— é™é‡å¯æ€ä¹ˆè§£å†³ï¼Ÿ</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## æŸ¥çœ‹</span></span><br><span class="line">[root@yum_repo ~]# systemctl get-default</span><br><span class="line">multi-user.target    <span class="comment">#å®Œæ•´å¤šç”¨æˆ·æ¨¡å¼</span></span><br><span class="line"><span class="comment">## ä¿®æ”¹</span></span><br><span class="line">[root@yum_repo ~]# systemctl set-default reboot.target     <span class="comment">#è®¾ç½®è¿è¡Œçº§åˆ«6é‡å¯ï¼ˆæ— é™é‡å¯ï¼‰</span></span><br></pre></td></tr></table></figure><p><strong>è§£å†³åŠæ³•</strong></p><p>1.è¿›å…¥ç¼–è¾‘æ¨¡å¼</p><p><img src="https://cos.lukme.top/Pic/image-20240429173139767.png" alt="image-20240429173139767"></p><p>2.#åœ¨linux16è¡Œçš„æœ«å°¾è¾“å…¥,ç„¶åæŒ‰ä¸‹   Ctrl+X   ç»„åˆé”®æ¥è¿è¡Œä¿®æ”¹è¿‡çš„å†…æ ¸ç¨‹åº</p><p><img src="https://cos.lukme.top/Pic/image-20240429175105690.png" alt="image-20240429175105690"></p><p><img src="https://cos.lukme.top/Pic/image-20240429180423234.png" alt="image-20240429180423234"></p><p>exité€€å‡ºï¼Œrebooté‡å¯</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.é‡æ–°æŒ‚è½½/sysrootç›®å½•</span></span><br><span class="line">mount -o rw,remount /sysroot</span><br><span class="line"><span class="comment"># 2.è·å–rootæƒé™</span></span><br><span class="line"><span class="built_in">chroot</span> /sysroot</span><br><span class="line"><span class="comment"># 3.ä¿®æ”¹å¯†ç </span></span><br><span class="line">passwd root</span><br><span class="line"><span class="comment"># 4.ä¿®æ”¹è¿è¡Œçº§åˆ«</span></span><br><span class="line">systemctl set-default multi-user.target</span><br><span class="line"><span class="comment"># 5.é€€å‡º</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"><span class="comment"># 6.é‡å¯</span></span><br><span class="line">reboot</span><br><span class="line"><span class="comment">## å…³é—­selinux</span></span><br><span class="line"><span class="comment"># ä¸´æ—¶å…³é—­</span></span><br><span class="line">[root@yum_repo ~]# setenforce 0</span><br><span class="line"><span class="comment"># æ°¸ä¹…å…³é—­ï¼ˆé‡å¯ç³»ç»Ÿç”Ÿæ•ˆï¼‰</span></span><br><span class="line">[root@yum_repo ~]# vi /etc/sysconfig/selinux</span><br><span class="line">SELINUX=disabled</span><br><span class="line"><span class="comment">## ä¸¤ç§è¿›å…¥å•ç”¨æˆ·æ–¹æ³•</span></span><br><span class="line">1ï¼‰enforcing=0 init=/bin/bash // ä¿®æ”¹å¯†ç </span><br><span class="line">2ï¼‰rd.break // ä¿®æ”¹è¿è¡Œçº§åˆ«</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linuxæ•²é—¨ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>18.è¿›ç¨‹ç®¡ç†01</title>
      <link href="/posts/610ba7df.html"/>
      <url>/posts/610ba7df.html</url>
      
        <content type="html"><![CDATA[<div class='wow animate__heartBeat' data-wow-duration='' data-wow-delay='1s' data-wow-offset=''  data-wow-iteration='2' ><div class="note red icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p><a href="https://www.lukeme.top/posts/4c7367cf.html">å‘Šåˆ«å°ç™½ï¼Œç‚¹å‡»ç›´è¾¾</a></p></div></div><h2 id="è¿›ç¨‹çš„åŸºæœ¬æ¦‚è¿°">è¿›ç¨‹çš„åŸºæœ¬æ¦‚è¿°</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ç¨‹åºï¼šå®ƒæ˜¯ä¸€ä¸ªé™æ€çš„æ¦‚å¿µï¼Œå¼€å‘äººå‘˜å†™å¥½çš„ä»£ç </span><br><span class="line">è¿›ç¨‹ï¼šå®ƒæ˜¯ä¸€ä¸ªåŠ¨æ€çš„æ¦‚å¿µï¼Œå°†ç¨‹åºè¿è¡Œèµ·æ¥çš„è¿‡ç¨‹ï¼Œå°±å«åšè¿›ç¨‹</span><br><span class="line">è¿è¡Œç¯å¢ƒï¼šèƒ½è®©ç¨‹åºæ­£å¸¸è¿è¡Œçš„ç¯å¢ƒï¼Œå¯¹åº”å¼€å‘è¯­è¨€å†™çš„ä»£ç ï¼Œéœ€è¦å¯¹åº”çš„ç¯å¢ƒæ¥è¿è¡Œ</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.å½“ç¨‹åºè¿è¡Œä¸ºè¿›ç¨‹åï¼Œç³»ç»Ÿä¼šä¸ºè¯¥è¿›ç¨‹åˆ†é…å†…å­˜ï¼Œä»¥åŠè¿è¡Œçš„èº«ä»½å’Œæƒé™ã€‚ </span><br><span class="line">2.åœ¨è¿›ç¨‹è¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼ŒæœåŠ¡å™¨ä¸Šä¼šæœ‰å„ç§çŠ¶æ€æ¥è¡¨ç¤ºå½“å‰è¿›ç¨‹çš„æŒ‡æ ‡ä¿¡æ¯ã€‚</span><br></pre></td></tr></table></figure><p><strong>è¿›ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ</strong></p><p><img src="https://luay-1302975046.cos.ap-shanghai.myqcloud.com/Pic/image-20240424145131410.png" alt="image-20240424145131410"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è¿›ç¨‹/çˆ¶è¿›ç¨‹ï¼š</span></span><br><span class="line">- ç­‰å¾…ï¼š</span><br><span class="line">1ï¼‰æœ‰æ²¡æœ‰ç”¨æˆ·çš„æ–°è¯·æ±‚æ¥</span><br><span class="line">2ï¼‰å­è¿›ç¨‹æ˜¯å¦å¤„ç†å®Œè¿”å›ç»“æœ</span><br><span class="line"><span class="comment">#çº¿ç¨‹/å­è¿›ç¨‹</span></span><br><span class="line">1ï¼‰å¤„ç†è¯·æ±‚</span><br><span class="line">2ï¼‰å°†ç»“æœè¿”å›ç»™çˆ¶è¿›ç¨‹</span><br><span class="line"><span class="comment">#è¿›ç¨‹çŠ¶æ€ï¼š</span></span><br><span class="line">1ï¼‰æ­£å¸¸ç»“æŸ</span><br><span class="line">2ï¼‰åƒµå°¸è¿›ç¨‹</span><br><span class="line">3ï¼‰å­¤å„¿è¿›ç¨‹</span><br><span class="line"><span class="comment">#åç¨‹ï¼špython</span></span><br></pre></td></tr></table></figure><p><strong>åƒµå°¸è¿›ç¨‹</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åƒµå°¸è¿›ç¨‹ï¼š</span></span><br><span class="line">å­è¿›ç¨‹æ¯”çˆ¶è¿›ç¨‹å…ˆç»“æŸ,çˆ¶è¿›ç¨‹æ²¡æœ‰å›æ”¶å­è¿›ç¨‹çš„èµ„æº,æ­¤æ—¶çš„å­è¿›ç¨‹å°±ç§°ä¸º<span class="string">&quot;åƒµå°¸è¿›ç¨‹&quot;</span></span><br><span class="line"><span class="comment">#äº§ç”ŸåŸå› ï¼š</span></span><br><span class="line">å­è¿›ç¨‹çš„ç»“æŸå’Œçˆ¶è¿›ç¨‹çš„è¿è¡Œæ˜¯å¼‚æ­¥çš„,çˆ¶è¿›ç¨‹æ°¸è¿œä¸çŸ¥é“å­è¿›ç¨‹ä»€ä¹ˆæ—¶å€™ç»“æŸ,å­è¿›ç¨‹åœ¨ç»“æŸæ—¶ï¼Œçˆ¶è¿›ç¨‹ç¹å¿™æ¥ä¸åŠWaitå­è¿›ç¨‹åˆ™ä¼šå¯¼è‡´ï¼Œå­è¿›ç¨‹å˜æˆ<span class="string">&quot;åƒµå°¸è¿›ç¨‹&quot;</span></span><br></pre></td></tr></table></figure><p><strong>å­¤å„¿è¿›ç¨‹</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å­¤å„¿è¿›ç¨‹ï¼š</span></span><br><span class="line">çˆ¶è¿›ç¨‹æ¯”å­è¿›ç¨‹å…ˆç»“æŸ,å­è¿›ç¨‹è¿˜åœ¨æ‰§è¡Œä»»åŠ¡ï¼Œæ²¡æœ‰çˆ¶è¿›ç¨‹ç®¡ç†,æ­¤æ—¶çš„å­è¿›ç¨‹å°±ç§°ä¸º<span class="string">&quot;å­¤å„¿è¿›ç¨‹&quot;</span></span><br><span class="line"><span class="comment">#äº§ç”ŸåŸå› ï¼š</span></span><br><span class="line">å­è¿›ç¨‹çš„ç»“æŸå’Œçˆ¶è¿›ç¨‹çš„è¿è¡Œæ˜¯å¼‚æ­¥çš„,çˆ¶è¿›ç¨‹æ°¸è¿œä¸çŸ¥é“å­è¿›ç¨‹ä»€ä¹ˆæ—¶å€™ç»“æŸ,å½“çˆ¶è¿›ç¨‹æ­£å¸¸å®Œæˆå·¥ä½œæˆ–å…¶ä»–åŸå› è¢«ç»ˆæ­¢,åˆ™ä¼šå¯¼è‡´ï¼Œå­è¿›ç¨‹å˜æˆ<span class="string">&quot;å­¤å„¿è¿›ç¨‹&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.å½“çˆ¶è¿›ç¨‹æ¥æ”¶åˆ°ä»»åŠ¡è°ƒåº¦æ—¶ï¼Œä¼šé€šè¿‡forkæ´¾ç”Ÿå­è¿›ç¨‹æ¥å¤„ç†ï¼Œé‚£ä¹ˆå­è¿›ç¨‹ä¼šé›†æˆçˆ¶è¿›ç¨‹çš„è¡£é’µã€‚</span><br><span class="line">2.å­è¿›ç¨‹åœ¨å¤„ç†ä»»åŠ¡ä»£ç æ—¶ï¼Œçˆ¶è¿›ç¨‹ä¼šè¿›å…¥ç­‰å¾…çš„çŠ¶æ€...</span><br><span class="line">3.å¦‚æœå­è¿›ç¨‹åœ¨å¤„ç†ä»»åŠ¡è¿‡ç¨‹ä¸­ï¼Œçˆ¶è¿›ç¨‹é€€å‡ºäº†ï¼Œå­è¿›ç¨‹æ²¡æœ‰é€€å‡ºï¼Œé‚£ä¹ˆè¿™äº›å­è¿›ç¨‹å°±æ²¡æœ‰çˆ¶è¿›ç¨‹æ¥ç®¡ç†äº†ï¼Œå°±å˜æˆäº†å­¤å„¿è¿›ç¨‹ã€‚</span><br><span class="line">4.æ¯ä¸ªè¿›ç¨‹éƒ½ä¼šæœ‰è‡ªå·±çš„PIDå·ï¼Œï¼ˆprocess <span class="built_in">id</span>ï¼‰å­è¿›ç¨‹åˆ™PPID</span><br></pre></td></tr></table></figure><h2 id="è¿›ç¨‹ç®¡ç†å‘½ä»¤">è¿›ç¨‹ç®¡ç†å‘½ä»¤</h2><h3 id="pså‘½ä»¤ï¼ˆé™æ€ï¼‰">pså‘½ä»¤ï¼ˆé™æ€ï¼‰</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">[root@yum_repo ~]# ps aux[root@yum_repo ~]# ps -efä¹Ÿå¯ä»¥</span><br><span class="line">aï¼šæ˜¾ç¤ºç³»ç»Ÿä¸­æ‰€æœ‰å’Œç»ˆç«¯ç›¸å…³çš„è¿›ç¨‹</span><br><span class="line">uï¼šæ˜¾ç¤ºæ¯ä¸ªè¿›ç¨‹è¿è¡Œçš„ç”¨æˆ·</span><br><span class="line">xï¼šæ˜¾ç¤ºç³»ç»Ÿä¸­æ‰€æœ‰å’Œç»ˆç«¯æ— å…³çš„è¿›ç¨‹</span><br><span class="line">[root@yum_repo ~]# ps aux|<span class="built_in">head</span></span><br><span class="line">USER        PID %CPU %MEM    VSZ   RSS   TTY    STAT START   TIME   COMMAND</span><br><span class="line">root         1  0.0  0.6 127864  6500    ?      Ss   08:38   0:01   /usr/lib/systemd/systemd --switched-root --system --deserialize 22</span><br><span class="line">root         2  0.0  0.0      0     0    ?      S    08:38   0:00   [kthreadd]</span><br><span class="line">root         3  0.0  0.0      0     0    ?      S    08:38   0:00   [ksoftirqd/0]</span><br><span class="line">root         5  0.0  0.0      0     0    ?      S&lt;   08:38   0:00   [kworker/0:0H]</span><br><span class="line">root         6  0.0  0.0      0     0    ?      S    08:38   0:00   [kworker/u256:0]</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¸ªåˆ—ä»£ä¿¡æ¯è¡¨æ„æ€</span></span><br><span class="line">USERï¼šè¿è¡Œç¨‹åºçš„ç”¨æˆ·</span><br><span class="line">PIDï¼šæ¯ä¸ªè¿›ç¨‹è¿è¡Œèµ·æ¥åï¼Œéƒ½ä¼šæœ‰è‡ªå·±çš„ä¸€ä¸ªPIDå·ï¼Œè¿›ç¨‹å·Process ID</span><br><span class="line">%CPUï¼šè¯¥è¿›ç¨‹å ç”¨CPUçš„ç™¾åˆ†æ¯”</span><br><span class="line">%MEMï¼šè¯¥è¿›ç¨‹å ç”¨å†…å­˜çš„ç™¾åˆ†æ¯”</span><br><span class="line">VSZï¼šè¯¥è¿›ç¨‹å ç”¨è™šæ‹Ÿå†…å­˜çš„å¤§å°</span><br><span class="line">RSSï¼šè¯¥è¿›ç¨‹å ç”¨çœŸå®å†…å­˜çš„å¤§å°</span><br><span class="line">TTYï¼šç»ˆç«¯</span><br><span class="line">- ?ï¼šç”±å†…æ ¸å‘èµ·çš„ç»ˆç«¯</span><br><span class="line">- pts/0 pts/1ï¼šç”¨æˆ·çš„è™šæ‹Ÿç»ˆç«¯</span><br><span class="line">- tty1ï¼šç‰©ç†ç»ˆç«¯</span><br><span class="line">STATï¼šç¨‹åºè¿è¡ŒçŠ¶æ€</span><br><span class="line">STARTï¼šæœåŠ¡å¯åŠ¨çš„æ—¶é—´</span><br><span class="line">TIMEï¼šè¯¥è¿›ç¨‹å®é™…ä½¿ç”¨CPUçš„è¿è¡Œæ—¶é—´</span><br><span class="line">COMMANDï¼šæœåŠ¡è¿è¡Œèµ·æ¥çš„å‘½ä»¤</span><br><span class="line"></span><br><span class="line"><span class="comment">#STATï¼šçŠ¶æ€</span></span><br><span class="line">Dï¼šæ— æ³•ä¸­æ–­çš„ä¼‘çœ çŠ¶æ€ï¼ˆé€šIOçš„è¿›ç¨‹ï¼‰ ç£ç›˜IO Input/Output ååé‡ï¼ˆç£ç›˜æ—¢å†™å…¥åˆè¾“å‡ºï¼Œä¾‹å¦‚taræ‰“åŒ…æ•°æ®æ—¶å€™ï¼‰</span><br><span class="line">Rï¼šRunning æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹</span><br><span class="line">Sï¼šSleeping å¤„äºä¼‘çœ çŠ¶æ€çš„è¿›ç¨‹</span><br><span class="line">Tï¼šè¢«æš‚åœçš„è¿›ç¨‹çŠ¶æ€  ï¼ˆCtrl+zæš‚åœè¿›ç¨‹ï¼‰</span><br><span class="line">Z: åƒµå°¸è¿›ç¨‹</span><br><span class="line">&lt;ï¼šä¼˜å…ˆçº§è¾ƒé«˜çš„è¿›ç¨‹</span><br><span class="line">Nï¼šä¼˜å…ˆçº§è¾ƒä½çš„è¿›ç¨‹</span><br><span class="line">sï¼šçˆ¶è¿›ç¨‹ï¼ˆå¹¶ä¸”å®ƒä¸‹é¢æœ‰å­è¿›ç¨‹åœ¨è¿è¡Œï¼‰</span><br><span class="line">lï¼šä»¥çº¿ç¨‹çš„æ–¹å¼è¿è¡Œçš„è¿›ç¨‹</span><br><span class="line">|ï¼šå¤šè¿›ç¨‹</span><br><span class="line">+ï¼šåœ¨å‰å°è¿è¡Œçš„è¿›ç¨‹</span><br><span class="line">Lï¼šè¢«é”è¿›å†…å­˜é¡µçš„è¿›ç¨‹</span><br><span class="line">X:æ­»æ‰çš„è¿›ç¨‹ï¼ˆå°‘è§ï¼‰</span><br><span class="line">W:è¿›å…¥å†…å­˜äº¤æ¢ï¼ˆä»å†…æ ¸2.6å¼€å§‹æ— æ•ˆï¼‰</span><br></pre></td></tr></table></figure><h2 id="statå‘½ä»¤">statå‘½ä»¤</h2><h3 id="ä»‹ç»">ä»‹ç»</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##statå‘½ä»¤æ¥è‡ªè‹±æ–‡å•è¯statusçš„ç¼©å†™ï¼Œå…¶åŠŸèƒ½æ˜¯æ˜¾ç¤ºæ–‡ä»¶çš„çŠ¶æ€ä¿¡æ¯ã€‚åœ¨Linuxç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªæ–‡ä»¶éƒ½æœ‰3ä¸ªâ€œå†å²æ—¶é—´â€â€”â€”æœ€åè®¿é—®æ—¶é—´ï¼ˆATIMEï¼‰ã€æœ€åä¿®æ”¹æ—¶é—´ï¼ˆMTIMEï¼‰ã€æœ€åæ›´æ”¹æ—¶é—´ï¼ˆCTIMEï¼‰ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨statå‘½ä»¤æŸ¥çœ‹åˆ°å®ƒä»¬ï¼Œè¿›è€Œåˆ¤åˆ«æœ‰æ²¡æœ‰å…¶ä»–äººä¿®æ”¹è¿‡æ–‡ä»¶å†…å®¹ã€‚</span></span><br></pre></td></tr></table></figure><p><img src="https://luay-1302975046.cos.ap-shanghai.myqcloud.com/Pic/image-20240505095811234.png" alt="image-20240505095811234"></p><h3 id="åº”ç”¨">åº”ç”¨</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##[root@localhost ~]# stat /etc/passwd</span></span><br><span class="line">  File: â€˜/etc/passwdâ€™</span><br><span class="line">  Size: 945       Blocks: 8          IO Block: 4096   regular file</span><br><span class="line">Device: fd00h/64768dInode: 8902609     Links: 1</span><br><span class="line">Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)</span><br><span class="line">Context: system_u:object_r:passwd_file_t:s0</span><br><span class="line">Access: 2024-04-21 21:52:14.512000577 +0800</span><br><span class="line">Modify: 2024-04-20 13:49:48.339236224 +0800</span><br><span class="line">Change: 2024-04-20 13:49:48.341236224 +0800</span><br><span class="line"> Birth: -</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## -cç›´æ¥çœ‹æƒé™</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">stat</span> -c%a /etc/passwd</span><br><span class="line">644</span><br><span class="line">[root@localhost ~]# <span class="built_in">stat</span> -c%A /etc/passwd</span><br><span class="line">-rw-r--r--</span><br><span class="line"></span><br><span class="line"><span class="comment">##-cç›´æ¥çœ‹inodeç»“ç‚¹å·</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">stat</span> -c%i /etc/passwd</span><br><span class="line">8902609</span><br><span class="line"></span><br><span class="line"><span class="comment">##-cç›´æ¥çœ‹uidå’Œå±ä¸»</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">stat</span> -c%u /etc/passwd</span><br><span class="line">0</span><br><span class="line">[root@localhost ~]# <span class="built_in">stat</span> -c%U /etc/passwd</span><br><span class="line">root</span><br><span class="line"></span><br><span class="line"><span class="comment">##-cç›´æ¥çœ‹gidå’Œå±ç»„</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">stat</span> -c%g /etc/passwd</span><br><span class="line">0</span><br><span class="line">[root@localhost ~]# <span class="built_in">stat</span> -c%G /etc/passwd</span><br><span class="line">root</span><br><span class="line"></span><br><span class="line"><span class="comment">##-cç›´æ¥çœ‹æ–‡ä»¶å¤§å°</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">stat</span> -c%s /etc/passwd</span><br><span class="line">945</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## -f</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">stat</span> -f /etc/passwd</span><br><span class="line">  File: <span class="string">&quot;/etc/passwd&quot;</span></span><br><span class="line">    ID: fd0000000000 Namelen: 255     Type: xfs</span><br><span class="line">Block size: 4096       Fundamental block size: 4096</span><br><span class="line">Blocks: Total: 2361856    Free: 1896798    Available: 1896798</span><br><span class="line">Inodes: Total: 4728832    Free: 4664790</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-cåå¯ä»¥è·Ÿå“ªäº›å ä½ç¬¦</span><br><span class="line"><span class="built_in">stat</span> -c %a fileæ˜¾ç¤ºæ–‡ä»¶çš„å…«è¿›åˆ¶æƒé™</span><br><span class="line"><span class="built_in">stat</span> -c %N fileæ˜¾ç¤ºå®Œæ•´è·¯å¾„</span><br><span class="line"><span class="built_in">stat</span> -c %n fileæ˜¾ç¤ºæ–‡ä»¶åã€‚</span><br><span class="line"><span class="built_in">stat</span> -c %x fileæ˜¾ç¤ºæœ€åè®¿é—®æ—¶é—´</span><br><span class="line"><span class="built_in">stat</span> -c %y fileæ˜¾ç¤ºæœ€åä¿®æ”¹æ—¶é—´</span><br><span class="line"><span class="built_in">stat</span> -c <span class="string">&quot;%n %s %y&quot;</span> filename.txtè¿™å°†è¾“å‡ºæ–‡ä»¶åã€æ–‡ä»¶å¤§å°å’Œæœ€åä¿®æ”¹æ—¶é—´ã€‚</span><br></pre></td></tr></table></figure><h3 id="å†…å­˜-ç«¯å£">å†…å­˜/ç«¯å£</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># free æŸ¥çœ‹å†…å­˜ä¿¡æ¯</span></span><br><span class="line">free -h  ä»¥äººç±»å¯è¯»æ–¹å¼è¯»å–æ˜¾ç¤ºå†…å­˜ä¿¡æ¯</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç«¯å£ï¼š</span></span><br><span class="line">[root@localhost ~]# netstat -lntup</span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address Foreign Address State</span><br><span class="line">PID/Program name</span><br><span class="line">tcp 0 0 0.0.0.0:22 0.0.0.0:* LISTEN</span><br><span class="line">6866/sshd</span><br><span class="line">tcp 0 0 127.0.0.1:25 0.0.0.0:* LISTEN</span><br><span class="line">6950/master</span><br><span class="line">tcp6 0 0 :::22 :::* LISTEN</span><br><span class="line">6866/sshd</span><br><span class="line">tcp6 0 0 ::1:25 :::* LISTEN</span><br><span class="line">6950/master</span><br></pre></td></tr></table></figure><h4 id="pså…¶ä»–é€‰é¡¹">pså…¶ä»–é€‰é¡¹</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹æœ€å ç”¨å†…å­˜çš„è¿›ç¨‹</span></span><br><span class="line">[root@yum_repo ~]# ps aux|<span class="built_in">sort</span> -k 4 -nr</span><br><span class="line">[root@yum_repo ~]# ps aux --<span class="built_in">sort</span> %mem   (é»˜è®¤å æ¯”æœ€å°çš„æ˜¾ç¤ºæœ€å‰)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è‡ªå®šä¹‰åˆ—</span></span><br><span class="line">[root@yum_repo ~]# ps axo user,pid,ppid,%mem,<span class="built_in">command</span>,%cpu</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¦‚ä½•æ£€æµ‹æœåŠ¡æ˜¯å¦å¯åŠ¨æˆåŠŸï¼Ÿ</span></span><br><span class="line">1.å…ˆæŸ¥è¿˜æœ‰æ²¡æœ‰è¿™ä¸ªæœåŠ¡</span><br><span class="line">[root@localhost ~]# ps aux|grep nginx</span><br><span class="line">root 10021 0.0 0.0 39304 940 ? Ss 16:44 0:00 nginx: master</span><br><span class="line">process /usr/sbin/nginx</span><br><span class="line">nginx 10022 0.0 0.1 39692 1896 ? S 16:44 0:00 nginx: worker</span><br><span class="line">process</span><br><span class="line">2.ä½¿ç”¨ç«¯å£å·å‘½ä»¤æ¥æŸ¥çœ‹è¯¥ç«¯å£æ˜¯å¦è¢«ç›‘å¬ã€‚å¦‚æœç«¯å£å¤„äºç›‘å¬çŠ¶æ€ï¼Œåˆ™è¯´æ˜æœåŠ¡å·²ç»å¯åŠ¨ï¼ˆnginxé»˜è®¤80ç«¯å£ï¼Œhttpåè®®ï¼‰</span><br><span class="line"></span><br><span class="line">[root@lb01 ~]# netstat -lntup</span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    </span><br><span class="line">tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN      8752/nginx: master  </span><br><span class="line">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      6625/sshd           </span><br><span class="line">tcp        0      0 127.0.0.1:25            0.0.0.0:*               LISTEN      6708/master         </span><br><span class="line">tcp6       0      0 :::80                   :::*                    LISTEN      8752/nginx: master  </span><br><span class="line">tcp6       0      0 :::22                   :::*                    LISTEN      6625/sshd           </span><br><span class="line">tcp6       0      0 ::1:25                  :::*                    LISTEN      6708/master</span><br><span class="line">[root@lb01 ~]# netstat -tulun</span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State      </span><br><span class="line">tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN</span><br><span class="line"></span><br><span class="line"><span class="comment">## å†™è„šæœ¬ç”¨ï¼Œåˆ¤æ–­æœåŠ¡æ˜¯å¦å­˜æ´»</span></span><br><span class="line">[root@yum_repo ~]# ps aux |grep nginx|grep -v grep</span><br><span class="line">[root@yum_repo ~]# ps aux|grep nginx</span><br><span class="line">root 19740 0.0 0.1 39312 1044 ? Ss 12:00 0:00 nginx: master process /usr/sbin/nginx</span><br><span class="line">nginx 19741 0.0 0.1 39700 1816 ? S 12:00 0:00 nginx: worker process</span><br><span class="line">nginx 19742 0.0 0.1 39700 1816 ? S 12:00 0:00 nginx: worker process</span><br><span class="line">nginx 19759 0.0 0.1 39700 1816 ? S 12:00 0:00 nginx: worker process</span><br><span class="line">nginx 19760 0.0 0.1 39700 1556 ? S 12:00 0:00 nginx: worker process</span><br><span class="line">root 19823 0.0 0.0 112812 980 pts/2 R+ 12:05 0:00 grep -- color=auto nginx</span><br><span class="line"></span><br><span class="line">[root@yum_repo ~]# ps aux|grep [n]ginx grep nginx</span><br><span class="line">root 19823 0.0 0.0 112812 980 pts/2 R+ 12:05 0:00 grep --  color=auto [n]ginx</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ£€ç´¢pidå·ç  pgrep</span></span><br><span class="line"><span class="comment">#pgrepå¸¸ç”¨å‚æ•°, -l -a</span></span><br><span class="line">[root@zls ~]# pgrep sshd</span><br><span class="line">869</span><br><span class="line">1194</span><br><span class="line">1307</span><br><span class="line">1574</span><br><span class="line">[root@zls ~]# pgrep -l sshdæ˜¾ç¤ºè¿›ç¨‹ååŠID</span><br><span class="line">869 sshd</span><br><span class="line">1194 sshd</span><br><span class="line">1307 sshd</span><br><span class="line">1574 sshd</span><br><span class="line">[root@zls ~]# pgrep -l -a sshd</span><br><span class="line">869 /usr/sbin/sshd -D</span><br><span class="line">1194 sshd: root@pts/0</span><br><span class="line">1307 sshd: root@pts/1</span><br><span class="line">1574 sshd: root@pts/2</span><br><span class="line"><span class="comment">#æŸ¥çœ‹è¿›ç¨‹çš„pid</span></span><br><span class="line">[root@zls ~]# pidof sshd</span><br><span class="line">1574 1307 1194 869</span><br><span class="line"><span class="comment">## æ ‘çŠ¶å½¢å¼æ˜¾ç¤ºè¿›ç¨‹    éœ€è¦å®‰è£…psmiscæ”¯æŒpstree</span></span><br><span class="line">[root@yum_repo ~]# pstree</span><br><span class="line">systemdâ”€â”¬â”€NetworkManagerâ”€â”€â”€2*[&#123;NetworkManager&#125;]</span><br><span class="line">â”œâ”€VGAuthService</span><br><span class="line">â”œâ”€agetty</span><br><span class="line">â”œâ”€auditdâ”€â”€â”€&#123;auditd&#125;</span><br><span class="line">â”œâ”€crondâ”€â”€â”€crondâ”€â”€â”€shâ”€â”€â”€ntpdate</span><br><span class="line">â”œâ”€dbus-daemon</span><br><span class="line">â”œâ”€gssproxyâ”€â”€â”€5*[&#123;gssproxy&#125;]</span><br><span class="line">â”œâ”€nginxâ”€â”€â”€20*[nginx]</span><br><span class="line">â”œâ”€polkitdâ”€â”€â”€6*[&#123;polkitd&#125;]</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linuxæ•²é—¨ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>19.è¿›ç¨‹ç®¡ç†02</title>
      <link href="/posts/566a67f4.html"/>
      <url>/posts/566a67f4.html</url>
      
        <content type="html"><![CDATA[<div class='wow animate__heartBeat' data-wow-duration='' data-wow-delay='1s' data-wow-offset=''  data-wow-iteration='2' ><div class="note red icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p><a href="https://www.lukeme.top/posts/4c7367cf.html">å‘Šåˆ«å°ç™½ï¼Œç‚¹å‡»ç›´è¾¾</a></p></div></div><h3 id="topï¼ˆåŠ¨æ€å‘½ä»¤ï¼‰">topï¼ˆåŠ¨æ€å‘½ä»¤ï¼‰</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## ç¬¬ä¸€è¡Œ</span></span><br><span class="line">top - 14:41:23 up  3:38,  1 user,  load average: 0.00, 0.01, 0.05</span><br><span class="line">topï¼šå‘½ä»¤</span><br><span class="line">-ï¼šåˆ†éš”ç¬¦</span><br><span class="line">09:32:57 ï¼šå½“å‰ç³»ç»Ÿæ—¶é—´</span><br><span class="line">up 1:23 ï¼šæœåŠ¡å™¨è¿è¡Œæ—¶é—´</span><br><span class="line">1 user ï¼šå½“å‰ç™»å½•ç³»ç»Ÿçš„ç”¨æˆ·æ•°é‡</span><br><span class="line">load average: ç³»ç»Ÿè´Ÿè½½</span><br><span class="line">0.00ï¼š1åˆ†é’Ÿ</span><br><span class="line">0.01ï¼š5åˆ†é’Ÿ</span><br><span class="line">0.05ï¼š15åˆ†é’Ÿ</span><br><span class="line"><span class="comment"># ç¬¬äºŒè¡Œ</span></span><br><span class="line">Tasks:  98 total,   1 running,  97 sleeping,   0 stopped,   0 zombie</span><br><span class="line">Tasks: ä»»åŠ¡ï¼Œè¿›ç¨‹æ•°é‡</span><br><span class="line">116 total // è¿›ç¨‹æ€»é‡</span><br><span class="line">1 running // 1ä¸ªæ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ R</span><br><span class="line">115 sleeping // 115å¤„äºä¼‘çœ çŠ¶æ€çš„è¿›ç¨‹ S</span><br><span class="line">0 stopped // 0ä¸ªè¢«æš‚åœçŠ¶æ€çš„è¿›ç¨‹ T</span><br><span class="line">0 zombie // 0ä¸ªåƒµå°¸è¿›ç¨‹ Z</span><br><span class="line"><span class="comment"># ç¬¬ä¸‰è¡Œ</span></span><br><span class="line">%Cpu(s):  0.0 us,  0.3 sy,  0.0 ni, 99.7 <span class="built_in">id</span>,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st</span><br><span class="line">%Cpu(s):</span><br><span class="line">0.0 usï¼šuser ç”¨æˆ·æ€ ç”¨æˆ·ä½¿ç”¨ç¨‹åºå ç”¨CPUçš„ç™¾åˆ†æ¯”</span><br><span class="line">0.3 syï¼šsystem å†…æ ¸æ€ ç³»ç»Ÿä½¿ç”¨ç¨‹åºå ç”¨CPUçš„ç™¾åˆ†æ¯”</span><br><span class="line">0.0 niï¼š<span class="built_in">nice</span> ä¼˜å…ˆçº§ ä¼˜å…ˆçº§è°ƒåº¦çš„è¿›ç¨‹å ç”¨CPUçš„ç™¾åˆ†æ¯”</span><br><span class="line">99.7 <span class="built_in">id</span>ï¼šidle ç©ºé—² CPUçš„ç©ºé—²ç‡</span><br><span class="line">0.0 waï¼š <span class="built_in">wait</span> ç­‰å¾… å¤„äºç­‰å¾…çŠ¶æ€çš„è¿›ç¨‹å ç”¨CPUçš„ç™¾åˆ†æ¯”</span><br><span class="line">0.0 hiï¼š ç¡¬ä¸­æ–­ ç¡¬ä¸­æ–­å ç”¨CPUçš„ç™¾åˆ†æ¯”</span><br><span class="line">0.0 siï¼š è½¯ä¸­æ–­ è½¯ç»ˆç«¯å ç”¨CPUçš„ç™¾åˆ†æ¯”</span><br><span class="line">0.0 stï¼š è™šæ‹ŸåŒ– è™šæ‹ŸåŒ–å ç”¨CPUçš„ç™¾åˆ†æ¯”</span><br><span class="line"><span class="comment"># ç¬¬å››è¡Œ</span></span><br><span class="line">KiB Mem :   995896 total,   425312 free,   108804 used,   461780 buff/cache</span><br><span class="line">KiB Mem : å†…å­˜</span><br><span class="line">995896 totalï¼šæ€»å†…å­˜å¤§å°</span><br><span class="line">748564 freeï¼šç©ºé—²å†…å­˜å¤§å°</span><br><span class="line">107768 usedï¼šå·²ä½¿ç”¨å†…å­˜å¤§å°</span><br><span class="line">139564 buff/cacheï¼šç¼“å†²åŒº/ç¼“å­˜åŒºä½¿ç”¨å†…å­˜å¤§å°</span><br><span class="line"><span class="comment"># ç¬¬äº”è¡Œ</span></span><br><span class="line">KiB Swap:  1048572 total,  1048572 free,        0 used.   700372 avail Mem</span><br><span class="line">KiB Swap: äº¤æ¢åˆ†åŒºswap ï¼ˆè™šæ‹Ÿå†…å­˜ï¼‰</span><br><span class="line">1048572 totalï¼šè™šæ‹Ÿå†…å­˜æ€»å¤§å°</span><br><span class="line">1048572 freeï¼šè™šæ‹Ÿå†…å­˜ç©ºé—²å¤§å°</span><br><span class="line">0 usedï¼šè™šæ‹Ÿå†…å­˜ä½¿ç”¨å¤§å°</span><br><span class="line">729176 avail Memï¼šè™šæ‹Ÿå†…å­˜å¯ç”¨å¤§å°</span><br><span class="line">Windowsï¼šNTFSã€FAT32</span><br><span class="line">Linuxï¼š</span><br><span class="line">CentOS7ï¼šxfs file system</span><br><span class="line">CentOS6ï¼šext4</span><br><span class="line"><span class="comment"># ç¬¬å…­è¡Œ</span></span><br><span class="line">PID USER      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND</span><br><span class="line">PIDï¼šè¿›ç¨‹IDå·</span><br><span class="line">USERï¼šè¿›ç¨‹å¯åŠ¨ç”¨æˆ·</span><br><span class="line">PR NIï¼šæƒé‡ä¼˜å…ˆçº§ ä¸¤è€…ç›¸å·®20ï¼Œäº’æ–¥</span><br><span class="line">VIRTï¼šè™šæ‹Ÿå†…å­˜</span><br><span class="line">RESï¼šçœŸå®ç‰©ç†å†…å­˜</span><br><span class="line">SHRï¼šé—ªå­˜</span><br><span class="line">Sï¼šè¿›ç¨‹çŠ¶æ€</span><br><span class="line">%CPUï¼šCPUä½¿ç”¨ç‡</span><br><span class="line">%MEMï¼šå†…å­˜ä½¿ç”¨ç‡</span><br><span class="line">TIME+ ï¼šè¯¥è¿›ç¨‹åœ¨CPUå†…è¿è¡Œçš„æ—¶é—´</span><br><span class="line">COMMANDï¼šæœåŠ¡å¯åŠ¨çš„å‘½ä»¤</span><br></pre></td></tr></table></figure><h3 id="ä¸­æ–­">ä¸­æ–­</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ä¸­æ–­æ˜¯ç³»ç»Ÿç”¨æ¥å½±å“ç¡¬ä»¶è®¾å¤‡è¯·æ±‚çš„ä¸€ç§æœºåˆ¶ï¼Œå®ƒä¼šæ‰“æ–­è¿›ç¨‹çš„æ­£å¸¸è°ƒåº¦å’Œæ‰§è¡Œï¼Œç„¶åè°ƒç”¨å†…æ ¸ä¸­çš„ä¸­æ–­å¤„ç†ç¨‹åºæ¥å½±å“è®¾å¤‡çš„è¯·æ±‚</span><br><span class="line"><span class="comment">#ä¸­æ–­çš„ä½œç”¨ï¼š</span></span><br><span class="line">æ˜¯ä¸ºäº†è®©è®¡ç®—æœºå¯ä»¥å¤„ç†æ›´å¤šçš„è¯·æ±‚</span><br><span class="line"><span class="comment">#åªæœ‰ä¸­æ–­ï¼Œå­˜åœ¨çš„é—®é¢˜ï¼š</span></span><br><span class="line">ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±</span><br><span class="line"><span class="comment">#è§£å†³åŠæ³•ï¼š</span></span><br><span class="line">å°†ä¸­æ–­ï¼Œåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†</span><br><span class="line">ç¡¬ä¸­æ–­ï¼šå¿«é€Ÿå¤„ç†ä»»åŠ¡ï¼Œä¸´æ—¶ä¿å­˜åœ¨å†…å­˜é‡Œ</span><br><span class="line">è½¯ä¸­æ–­ï¼šå»¶è¿Ÿå¤„ç†æœªå®Œæˆçš„ä»»åŠ¡</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="topå‘½ä»¤çš„ä½¿ç”¨">topå‘½ä»¤çš„ä½¿ç”¨</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">[root@yum_repo ~]# yum install -y htop</span><br><span class="line">[root@yum_repo ~]# yum install -y glances</span><br><span class="line">[root@yum_repo ~]# top</span><br><span class="line">[root@yum_repo ~]# htop</span><br><span class="line">[root@yum_repo ~]# glances</span><br><span class="line"><span class="comment"># -nï¼šæŒ‡å®šæŸ¥çœ‹å‡ æ¬¡ç»“æœ</span></span><br><span class="line">[root@yum_repo ~]# top -n 5</span><br><span class="line"><span class="comment"># -dï¼šæŒ‡å®šæ›´æ–°æ—¶é—´ï¼ˆé»˜è®¤3sæ›´æ–°ä¸€æ¬¡æ•°æ®ï¼‰</span></span><br><span class="line">[root@yum_repo ~]# top -d 1 -n 5</span><br><span class="line"><span class="comment"># -pï¼šæŒ‡å®šæƒ³æŸ¥çœ‹çš„è¿›ç¨‹PID</span></span><br><span class="line">[root@yum_repo ~]# top -p 1278</span><br><span class="line">[root@yum_repo ~]# top -p $(pidof nginx|<span class="built_in">tr</span> <span class="string">&#x27; &#x27;</span> <span class="string">&#x27;,&#x27;</span>)</span><br><span class="line"><span class="comment"># -bï¼šå°†å¤šæ¬¡ç»“æœä¿å­˜åˆ°æ–‡ä»¶ä¸­</span></span><br><span class="line">[root@yum_repo ~]# top -d 1 -n 3 -b &gt; /tmp/1.txt</span><br><span class="line"></span><br><span class="line">æ³¨æ„ï¼š#ä¸ä½¿ç”¨-bé€‰é¡¹ï¼Œåªèƒ½å†™å…¥æœ€åä¸€æ¬¡çš„ç»“æœã€‚topæ˜¯åŠ¨æ€çš„ï¼Œåªæœ‰ç»“æŸæ‰èƒ½å¤Ÿå†™å…¥1.txtï¼Œç»“æŸçš„æ—¶å€™å†™å…¥çš„ä¹Ÿåªæ˜¯æœ€åä¸€æ¬¡çš„ç»“æœ</span><br><span class="line">top -n 3 &gt;1.txt   </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#top å¸¸è§æŒ‡ä»¤</span></span><br><span class="line">h æŸ¥çœ‹å¸®å‡º</span><br><span class="line">z é«˜äº®æ˜¾ç¤º</span><br><span class="line">1 æ˜¾ç¤ºæ‰€æœ‰CPUçš„è´Ÿè½½</span><br><span class="line">s è®¾ç½®åˆ·æ–°æ—¶é—´</span><br><span class="line">b é«˜äº®ç°å®å¤„äºRçŠ¶æ€çš„è¿›ç¨‹</span><br><span class="line">M æŒ‰å†…å­˜ä½¿ç”¨ç™¾åˆ†æ¯”æ’åºè¾“å‡º</span><br><span class="line">P æŒ‰CPUä½¿ç”¨ç™¾åˆ†æ¯”æ’åºè¾“å‡º</span><br><span class="line">R å¯¹æ’åºè¿›è¡Œåè½¬</span><br><span class="line">f è‡ªå®šä¹‰æ˜¾ç¤ºå­—æ®µ</span><br><span class="line">k <span class="built_in">kill</span>æ‰æŒ‡å®šPIDè¿›ç¨‹</span><br><span class="line">W ä¿å­˜topç¯å¢ƒè®¾ç½® ~/.toprc</span><br><span class="line">q é€€å‡º</span><br></pre></td></tr></table></figure><h3 id="killä¿¡å·ç®¡ç†">killä¿¡å·ç®¡ç†</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -l</span><br><span class="line">1) SIGHUP 2) SIGINT 3) SIGQUIT 4) SIGILL 5) SIGTRAP</span><br><span class="line">6) SIGABRT 7) SIGBUS 8) SIGFPE 9) SIGKILL 10) SIGUSR1</span><br><span class="line">11) SIGSEGV 12) SIGUSR2 13) SIGPIPE 14) SIGALRM 15) SIGTERM</span><br><span class="line">16) SIGSTKFLT 17) SIGCHLD 18) SIGCONT 19) SIGSTOP 20) SIGTSTP</span><br><span class="line">21) SIGTTIN 22) SIGTTOU 23) SIGURG 24) SIGXCPU 25) SIGXFSZ</span><br><span class="line">26) SIGVTALRM 27) SIGPROF 28) SIGWINCH 29) SIGIO 30) SIGPWR</span><br><span class="line">31) SIGSYS 34) SIGRTMIN 35) SIGRTMIN+1 36) SIGRTMIN+2 37) SIGRTMIN+3</span><br><span class="line">38) SIGRTMIN+4 39) SIGRTMIN+5 40) SIGRTMIN+6 41) SIGRTMIN+7 42) SIGRTMIN+8</span><br><span class="line">43) SIGRTMIN+9 44) SIGRTMIN+10 45) SIGRTMIN+11 46) SIGRTMIN+12 47) SIGRTMIN+13</span><br><span class="line">48) SIGRTMIN+14 49) SIGRTMIN+15 50) SIGRTMAX-14 51) SIGRTMAX-13 52) SIGRTMAX-12</span><br><span class="line">53) SIGRTMAX-11 54) SIGRTMAX-10 55) SIGRTMAX-9 56) SIGRTMAX-8 57) SIGRTMAX-7</span><br><span class="line">58) SIGRTMAX-6 59) SIGRTMAX-5 60) SIGRTMAX-4 61) SIGRTMAX-3 62) SIGRTMAX-2</span><br><span class="line">63) SIGRTMAX-1 64) SIGRTMAX</span><br><span class="line"></span><br><span class="line"><span class="comment">## é‡å¯ restart</span></span><br><span class="line">å…ˆå…³é—­æœåŠ¡ï¼Œå†å¼€å¯æœåŠ¡</span><br><span class="line"><span class="comment">## é‡æ–°åŠ è½½ reload</span></span><br><span class="line">åªé‡æ–°è¯»å–é…ç½®æ–‡ä»¶ï¼Œä¸ä¼šåœæ­¢æœåŠ¡</span><br><span class="line"></span><br><span class="line"><span class="comment">## é‡æ–°åŠ è½½æœåŠ¡é…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -1 8582</span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -HUP 8582</span><br><span class="line"></span><br><span class="line"><span class="comment">## ä¸­æ–­ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ç¨‹åº Ctrl + c</span></span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -2 8779</span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -INT 8779</span><br><span class="line"><span class="comment">## é€€å‡ºç¨‹åº</span></span><br><span class="line">[root@yum_repo ~]# systemctl stop nginx</span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -3 8582</span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -QUIT 8582</span><br><span class="line"><span class="comment">## å¼ºåˆ¶ç»“æŸç¨‹åºï¼Œè¯¥ä¿¡å·ä¸èƒ½è¢«æ•è·</span></span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -9 8847</span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -KILL 8847</span><br><span class="line"><span class="comment">## é»˜è®¤é€€å‡ºä¿¡å·</span></span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> 1122</span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -15 1122</span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -TERM 1122</span><br><span class="line"><span class="comment">## è®©è¢«æš‚åœçš„ç¨‹åºæ¢å¤è¿è¡Œ</span></span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -18 8870</span><br><span class="line"><span class="comment">## è®©ç¨‹åºæš‚åœ Ctrl + z</span></span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -19 8884</span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -20 8896</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linuxæ•²é—¨ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>21.systemdè¿›ç¨‹ç®¡ç†</title>
      <link href="/posts/4b44467c.html"/>
      <url>/posts/4b44467c.html</url>
      
        <content type="html"><![CDATA[<div class='wow animate__heartBeat' data-wow-duration='' data-wow-delay='1s' data-wow-offset=''  data-wow-iteration='2' ><div class="note red icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p><a href="https://www.lukeme.top/posts/4c7367cf.html">å‘Šåˆ«å°ç™½ï¼Œç‚¹å‡»ç›´è¾¾</a></p></div></div><h3 id="æ•‘æ´æ¨¡å¼">æ•‘æ´æ¨¡å¼</h3><p>å‰æï¼šè™šæ‹Ÿæœºè®¾ç½®å·²ç»æŒ‚è½½isoé•œåƒ</p><h4 id="MBRå¼•å¯¼è¢«ç ´åæ€ä¹ˆè§£å†³ï¼Ÿ">MBRå¼•å¯¼è¢«ç ´åæ€ä¹ˆè§£å†³ï¼Ÿ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ³¨ï¼šä»…æ¼”ç¤ºæ•‘æ´æ¨¡å¼æ¸…ç©ºMBRï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼</span></span><br><span class="line"><span class="built_in">dd</span> &lt; /dev/zero &gt;/dev/sda bs=1 count=446</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è§£å†³åŠæ³•</span></span><br><span class="line"><span class="comment"># 1.è·å–rootç¯å¢ƒ</span></span><br><span class="line"><span class="built_in">chroot</span> /mnt/sysimage</span><br><span class="line"><span class="comment"># 2.ä¿®å¤MBR</span></span><br><span class="line">grub2-install /dev/sda</span><br><span class="line"><span class="comment"># 3.é€€å‡º</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"><span class="comment"># 4.é‡å¯</span></span><br><span class="line">reboo</span><br><span class="line">è¿‡ç¨‹å¦‚ä¸‹â†“</span><br></pre></td></tr></table></figure><p><strong>MBRç ´ååå¯åŠ¨è‡ªåŠ¨è·³åˆ°è¿™é‡Œ</strong></p><p><img src="https://cos.lukme.top/Pic/image-20240501105112668.png" alt="image-20240501105112668"></p><p>è¿›å…¥æ•‘æ´æ¨¡å¼å‰è¿›å…¥BISO,ä¿®æ”¹ä¼˜å…ˆCD-ROMå¯åŠ¨åŠ è½½</p><p><img src="https://cos.lukme.top/Pic/image-20240501102743250.png" alt="image-20240501102743250"></p><p><img src="https://cos.lukme.top/Pic/image-20240501094910948.png" alt="image-20240501094910948"></p><p><img src="https://cos.lukme.top/Pic/image-20240501105511762.png" alt="image-20240501105511762"></p><p><img src="https://cos.lukme.top/Pic/image-20240501105829470.png" alt="image-20240501105829470"></p><p><img src="https://cos.lukme.top/Pic/image-20240501111423160.png" alt="image-20240501111423160"></p><h4 id="grubèœå•è¯¯åˆ æ€ä¹ˆè§£å†³ï¼Ÿ">grubèœå•è¯¯åˆ æ€ä¹ˆè§£å†³ï¼Ÿ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä»…åšæ¼”ç¤ºåˆ é™¤gruubèœå•ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼</span></span><br><span class="line">[root@lb01 ~]# <span class="built_in">rm</span> -fr /boot/grub2</span><br><span class="line">[root@lb01 ~]# reboot</span><br></pre></td></tr></table></figure><p><strong>è§£å†³è¿‡ç¨‹</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.è·å–rootç¯å¢ƒ</span></span><br><span class="line"><span class="built_in">chroot</span> /mnt/sysimage</span><br><span class="line"><span class="comment"># 2.ä¿®å¤ç£ç›˜MBR</span></span><br><span class="line">grub2-install /dev/sda</span><br><span class="line"><span class="comment"># 3.ä¿®å¤grubèœå•é…ç½®æ–‡ä»¶</span></span><br><span class="line">grub2-mkconfig -o /boot/grub2/grub.cfg</span><br><span class="line"><span class="comment"># 4.é€€å‡º</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"><span class="comment"># 5.é‡å¯</span></span><br><span class="line">reboot</span><br><span class="line">è¿‡ç¨‹å›¾å¦‚ä¸‹</span><br></pre></td></tr></table></figure><p><strong>grubèœå•è¢«åˆ å¯åŠ¨ç•Œé¢</strong></p><p><img src="https://cos.lukme.top/Pic/image-20240501112106766.png" alt="image-20240501112106766"></p><p><strong>åŒæ ·è¿›å…¥æ•‘æ´æ¨¡å¼</strong></p><p><img src="https://cos.lukme.top/Pic/image-20240501113156619.png" alt="image-20240501113156619"></p><h4 id="ç³»ç»ŸæŸåæ‹·è´æ–‡ä»¶ï¼Ÿ">ç³»ç»ŸæŸåæ‹·è´æ–‡ä»¶ï¼Ÿ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bash-4.2# mkfs.xfs -f /dev/sdc</span><br><span class="line">bash-4.2# <span class="built_in">mkdir</span> /data</span><br><span class="line">bash-4.2# mount /dev/sdc /data</span><br><span class="line">bash-4.2# <span class="built_in">cp</span> -a /raid0 /data</span><br><span class="line">bash-4.2# umount /dev/sdb</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹ç½‘å¡å-äº†è§£">ä¿®æ”¹ç½‘å¡å  äº†è§£</h3><p><img src="https://cos.lukme.top/Pic/image-20240501114139869.png" alt="image-20240501114139869"></p><p><img src="https://cos.lukme.top/Pic/image-20240501114157577.png" alt="image-20240501114157577"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">biosdevname=0 net.ifnames=0</span><br><span class="line">net.ifnames=0<span class="comment">#ä¸æ˜¯dellç‰©ç†æœºç¯å¢ƒ</span></span><br></pre></td></tr></table></figure><h3 id="Systemd-è¿›ç¨‹ç®¡ç†">Systemd è¿›ç¨‹ç®¡ç†</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemdå³ä¸ºsystem daemonå®ˆæŠ¤è¿›ç¨‹ï¼Œsystemdä¸»è¦è§£å†³ä¸Šæ–‡çš„é—®é¢˜è€Œè¯ç”Ÿï¼Œsystemdçš„ç›®æ ‡æ˜¯ï¼Œä¸ºç³»ç»Ÿçš„å¯åŠ¨å’Œç®¡ç†æä¾›ä¸€å¥—å®Œæ•´çš„è§£å†³æ–¹æ¡ˆã€‚</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#CentOS6å¯åŠ¨</span></span><br><span class="line">1.å¯åŠ¨æ—¶é—´é•¿ï¼Œinitè¿›ç¨‹æ˜¯ä¸²è¡Œå¯åŠ¨ï¼Œåªæœ‰å‰ä¸€ä¸ªè¿›ç¨‹å¯åŠ¨å®Œï¼Œæ‰ä¼šå¯åŠ¨ä¸‹ä¸€ä¸ªè¿›ç¨‹ã€‚</span><br><span class="line">2.å¯åŠ¨è„šæœ¬å¤æ‚ï¼Œåˆå§‹åŒ–å®Œæˆåï¼Œç³»ç»Ÿä¼šåŠ è½½å¾ˆå¤šè„šæœ¬ï¼Œè„šæœ¬éƒ½ä¼šå¤„ç†å„è‡ªçš„æƒ…å†µï¼Œè¿™å›è®©è„šæœ¬å¤šè€Œå¤æ‚ã€‚</span><br><span class="line"><span class="comment">#CentOS7å¯åŠ¨</span></span><br><span class="line">CtOS7æ‰€æœ‰è¿›ç¨‹æ— è®ºæœ‰æ— ä¾èµ–å…³ç³»ï¼Œéƒ½å¹¶è¡Œå¯åŠ¨ï¼Œå½“ç„¶æœ‰å¾ˆå¤šæ—¶å€™è¿›ç¨‹å¹¶æ²¡æœ‰çœŸæ­£çš„å¯åŠ¨è€Œæ˜¯åªæœ‰ä¸€ä¸ªä¿¡å·æˆ–è€…è¯´æ˜¯æ ‡è®°ï¼Œåœ¨çœŸæ­£åˆ©ç”¨çš„æ—¶å€™ï¼Œæ‰ä¼šçœŸæ­£å¯åŠ¨</span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/image-20240501114955720.png" alt="image-20240501114955720"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#systemdä¼˜åŠ¿</span></span><br><span class="line">1.æœ€æ–°ç³»ç»Ÿéƒ½é‡‡ç”¨systemdç®¡ç†ï¼ˆRedHat7ï¼ŒCentOS7ï¼ŒUbuntu15...ï¼‰</span><br><span class="line">2.CentOS7 æ”¯æŒå¼€æœºå¹¶è¡Œå¯åŠ¨æœåŠ¡,æ˜¾è‘—æé«˜å¼€æœºå¯åŠ¨æ•ˆç‡</span><br><span class="line">3.CentOS7å…³æœºåªå…³é—­æ­£åœ¨è¿è¡Œçš„æœåŠ¡ï¼Œè€ŒCentOS6ï¼Œå…¨éƒ¨éƒ½å…³é—­ä¸€æ¬¡ã€‚</span><br><span class="line">4.CentOS7æœåŠ¡çš„å¯åŠ¨ä¸åœæ­¢ä¸åœ¨ä½¿ç”¨è„šæœ¬è¿›è¡Œç®¡ç†ï¼Œä¹Ÿå°±æ˜¯/etc/init.dä¸‹ä¸åœ¨æœ‰è„šæœ¬ã€‚</span><br><span class="line">5.CentOS7ä½¿ç”¨systemdè§£å†³åŸæœ‰æ¨¡å¼ç¼ºé™·ï¼Œæ¯”å¦‚åŸæœ‰serviceä¸ä¼šå…³é—­ç¨‹åºäº§ç”Ÿçš„å­è¿›ç¨‹ã€‚</span><br></pre></td></tr></table></figure><table><thead><tr><th>ç›¸å…³é…ç½®æ–‡ä»¶</th><th>CentOS6</th><th>CentOS7</th></tr></thead><tbody><tr><td>æœåŠ¡å¯åŠ¨è„šæœ¬</td><td>/etc/init.d/</td><td>/usr/lib/systemd/system/</td></tr><tr><td>å¼€æœºå¯åŠ¨æœåŠ¡</td><td>/etc/rcN.d/</td><td>/etc/systemd/system/</td></tr></tbody></table><h4 id="systemdç›¸å…³å‘½ä»¤">systemdç›¸å…³å‘½ä»¤</h4><p><strong>å¯åŠ¨é‡å¯æœåŠ¡</strong></p><table><thead><tr><th>System V initï¼ˆ6ç³»ç»Ÿï¼‰</th><th>systemctlå‘½ä»¤ï¼ˆ7ç³»ç»Ÿï¼‰</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>service nginx start <br />/etc/init.d/nginx start</td><td>systemctl start nginx.service</td><td>å¯åŠ¨æœåŠ¡</td></tr><tr><td>service nginx stop <br />/etc/init.d/nginx stop</td><td>systemctl stop nginx.service</td><td>åœæ­¢æœåŠ¡</td></tr><tr><td>service nginx restart <br />/etc/init.d/nginx restart</td><td>systemctl restart nginx.service</td><td>é‡å¯æœåŠ¡</td></tr><tr><td>service nginx reload <br />/etc/init.d/nginx reload</td><td>systemctl reload nginx.service</td><td>é‡æ–°åŠ è½½é…ç½®(ä¸ç»ˆæ­¢æœåŠ¡)</td></tr><tr><td>service nginx status <br />/etc/init.d/nginx status</td><td>systemctl status nginx.servre</td><td>æŸ¥çœ‹æœåŠ¡è¿è¡ŒçŠ¶æ€</td></tr><tr><td></td><td>systemctl is-active sshd.service</td><td>æŸ¥çœ‹æœåŠ¡æ˜¯å¦åœ¨è¿è¡Œä¸­</td></tr><tr><td></td><td>systemctl mask nginx.servre</td><td>ç¦æ­¢æœåŠ¡è¿è¡Œ</td></tr><tr><td></td><td>systemctl unmask nginx.servre</td><td>å–æ¶ˆç¦æ­¢æœåŠ¡è¿è¡Œ</td></tr></tbody></table><p><strong>è®¾ç½®æœåŠ¡å¼€æœºè‡ªå¯ï¼ŒæŸ¥çœ‹å„çº§åˆ«ä¸‹æœåŠ¡å¯åŠ¨çŠ¶æ€</strong></p><table><thead><tr><th>System V initï¼ˆ6ç³» ç»Ÿï¼‰</th><th>systemctlå‘½ä»¤ï¼ˆ7ç³»ç»Ÿï¼‰</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>chkconfig nginx on</td><td>systemctl enable nginx.service</td><td>å¼€æœºè‡ªåŠ¨å¯åŠ¨</td></tr><tr><td>chkconfig nginx off</td><td>systemctl disable nginx.service</td><td>å¼€æœºä¸è‡ªåŠ¨å¯åŠ¨</td></tr><tr><td>chkconfig --list</td><td>systemctl list-unit-files</td><td>æŸ¥çœ‹å„ä¸ªçº§åˆ«ä¸‹æœåŠ¡çš„å¯åŠ¨ä¸ç¦ ç”¨</td></tr><tr><td>chkconfig --list nginx</td><td>systemctl is-enabled nginx.service</td><td>æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ˜¯å¦ä¸ºå¼€æœºè‡ªå¯åŠ¨</td></tr><tr><td>chkconfigâ€“add nginx</td><td>systemctl daemon-reload</td><td>åˆ›å»ºæ–°æœåŠ¡æ–‡ä»¶æˆ–è€…å˜æ›´è®¾ç½®</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">è®¾ç½®å¼€æœºè‡ªå¯ç›¸å½“äºç»™å¯åŠ¨è„šæœ¬åšä¸ªè½¯é“¾æ¥</span><br><span class="line"><span class="comment"># CentOS7ä¸­å¼€æœºè‡ªå¯</span></span><br><span class="line">[root@localhost ~]# systemctl <span class="built_in">enable</span> sshd</span><br><span class="line"><span class="built_in">ln</span> -s /usr/lib/systemd/system/sshd.service /etc/systemd/system/multiuser.target.wants/</span><br><span class="line"><span class="comment"># å–æ¶ˆå¼€æœºè‡ªå¯</span></span><br><span class="line">[root@localhost ~]# systemctl <span class="built_in">disable</span> sshd</span><br><span class="line">Removed symlink /etc/systemd/system/multi-user.target.wants/sshd.service</span><br><span class="line"><span class="built_in">rm</span> -f /etc/systemd/system/multi-user.target.wants/sshd.service</span><br></pre></td></tr></table></figure><p><strong>systemctlæœåŠ¡çŠ¶æ€è¯´æ˜</strong></p><table><thead><tr><th>æœåŠ¡çŠ¶æ€</th><th>çŠ¶æ€è¯´æ˜</th></tr></thead><tbody><tr><td>loaded</td><td>æœåŠ¡å•å…ƒçš„é…ç½®æ–‡ä»¶å·²ç»è¢«å¤„ç†</td></tr><tr><td>active(running)</td><td>æœåŠ¡çš„ä¸€ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹åœ¨è¿è¡Œä¸­</td></tr><tr><td>active(exited)</td><td>ä¸€æ¬¡æ€§è¿è¡Œçš„æœåŠ¡æˆåŠŸè¢«æ‰§è¡Œå¹¶é€€å‡º(æœåŠ¡è¿è¡Œåå®Œæˆä»»åŠ¡,ç›¸å…³è¿›ç¨‹ä¼šè‡ªåŠ¨é€€å‡º)</td></tr><tr><td>active(waiting)</td><td>æœåŠ¡å·²ç»è¿è¡Œä½†åœ¨ç­‰å¾…æŸä¸ªäº‹ä»¶</td></tr><tr><td>inactive</td><td>æœåŠ¡æ²¡æœ‰åœ¨è¿è¡Œ</td></tr><tr><td>enable</td><td>æœåŠ¡è®¾å®šä¸ºå¼€æœºè¿è¡Œ</td></tr><tr><td>disabled</td><td>æœåŠ¡è®¾å®šä¸ºå¼€æœºä¸è¿è¡Œ</td></tr><tr><td>static</td><td>æœåŠ¡ä¸èƒ½è¢«è®¾å®šå¼€æœºå¯åŠ¨,ä½†å¯ä»¥ç”±å…¶ä»–æœåŠ¡å¯åŠ¨è¯¥æœåŠ¡</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> Linuxæ•²é—¨ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>22.å®šæ—¶ä»»åŠ¡</title>
      <link href="/posts/d58f4e80.html"/>
      <url>/posts/d58f4e80.html</url>
      
        <content type="html"><![CDATA[<div class='wow animate__heartBeat' data-wow-duration='' data-wow-delay='1s' data-wow-offset=''  data-wow-iteration='2' ><div class="note red icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p><a href="https://www.lukeme.top/posts/4c7367cf.html">å‘Šåˆ«å°ç™½ï¼Œç‚¹å‡»ç›´è¾¾</a></p></div></div><h3 id="å®šæ—¶ä»»åŠ¡crond">å®šæ—¶ä»»åŠ¡crond</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä»€ä¹ˆæ˜¯crond</span></span><br><span class="line">crondå°±æ˜¯è®¡åˆ’ä»»åŠ¡ï¼Œç±»ä¼¼äºæˆ‘ä»¬å¹³æ—¶ç”Ÿæ´»ä¸­çš„é—¹é’Ÿï¼Œå®šç‚¹æ‰§è¡Œã€‚</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# ps aux|grep crond</span><br><span class="line">root 6349 0.0 0.1 126284 1612 ? Ss 16:00 0:00 /usr/sbin/crond -n</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#free æŸ¥çœ‹å†…å­˜æƒ…å†µ</span></span><br><span class="line">[root@lb01 ~]# free -mï¼ˆä»¥mæ˜¾ç¤ºå†…å­˜å¤šå°‘ï¼‰</span><br><span class="line">æ€»å†…å­˜ å·²ä½¿ç”¨ç©ºé—²å¯ä½¿ç”¨å†…å­˜</span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:            972          89         760           7         123         737</span><br><span class="line">Swap:          1023           0        1023</span><br><span class="line"></span><br><span class="line"><span class="comment">#Centos6å¯ä½¿ç”¨å†…å­˜</span></span><br><span class="line">[root@localhost ~]# free</span><br><span class="line">æ€»å†…å­˜ å·²ä½¿ç”¨ç©ºé—²</span><br><span class="line">             total       used       free     shared    buffers     cached</span><br><span class="line">Mem:       1004768     170984     833784        220      13336      48440</span><br><span class="line">-/+ buffers/cache:     109208     895560(å¯ä½¿ç”¨å†…å­˜) </span><br><span class="line">Swap:      1048572          0    1048572</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æˆªå–éœ€è¦çš„å†…å­˜ä¿¡æ¯</span></span><br><span class="line">æ€»å†…å­˜ï¼šfree -m|awk <span class="string">&#x27;/^Mem/&#123;print $2&#125;&#x27;</span></span><br><span class="line">å·²ä½¿ç”¨å†…å­˜ï¼šfree -m|awk <span class="string">&#x27;/^Mem/&#123;print $3&#125;&#x27;</span></span><br><span class="line">å¯ç”¨å†…å­˜ï¼šfree -m|awk <span class="string">&#x27;/^Mem/&#123;print $NF&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å†™è¿›è„šæœ¬</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line">mem_total=`free -m|awk <span class="string">&#x27;/^Mem/&#123;print $2&#125;&#x27;</span>`</span><br><span class="line">mem_used=`free -m|awk <span class="string">&#x27;/^Mem/&#123;print $3&#125;&#x27;</span>`</span><br><span class="line">mem_ava=`free -m|awk <span class="string">&#x27;/^Mem/&#123;print $NF&#125;&#x27;</span>`</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;------ å†…å­˜ä¿¡æ¯ ------&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;æ€»å†…å­˜ï¼š<span class="variable">$&#123;mem_total&#125;</span>M&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;å·²ä½¿ç”¨å†…å­˜ï¼š<span class="variable">$&#123;mem_used&#125;</span>M&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;å¯ç”¨å†…å­˜ï¼š<span class="variable">$&#123;mem_ava&#125;</span>M&quot;</span></span><br></pre></td></tr></table></figure><h4 id="å®šæ—¶ä»»åŠ¡è¯­æ³•">å®šæ—¶ä»»åŠ¡è¯­æ³•</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ï¼ï¼å®šæ—¶ä»»åŠ¡æœ€å°åªèƒ½è¾¾åˆ°åˆ†é’Ÿçº§</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## å®šæ—¶ä»»åŠ¡é…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> /etc/crontab</span><br><span class="line"><span class="comment">## å®šæ—¶ä»»åŠ¡ç¼–å†™çš„è¯­æ³•</span></span><br><span class="line">SHELL=/bin/bash</span><br><span class="line"><span class="comment">## å¯ç›´æ¥æ‰§è¡Œçš„å‘½ä»¤ï¼ˆä»¥åå†™åœ¨å®šæ—¶ä»»åŠ¡ä¸­çš„å‘½ä»¤ï¼Œæœ€å¥½åŠ ä¸Šç»å¯¹è·¯å¾„ï¼‰</span></span><br><span class="line">PATH=/sbin:/bin:/usr/sbin:/usr/bin</span><br><span class="line"><span class="comment">## å®šæ—¶ä»»åŠ¡è¾“å‡ºçš„å†…å®¹ï¼Œä¼šä»¥é‚®ä»¶çš„å½¢å¼å‘ç»™rootç”¨æˆ·</span></span><br><span class="line">MAILTO=root</span><br><span class="line"><span class="comment"># For details see man 4 crontabs</span></span><br><span class="line"><span class="comment"># Example of job definition:</span></span><br><span class="line"><span class="comment"># .---------------- minute (0 - 59)</span></span><br><span class="line"><span class="comment"># | .------------- hour (0 - 23)</span></span><br><span class="line"><span class="comment"># | | .---------- day of month (1 - 31)</span></span><br><span class="line"><span class="comment"># | | | .------- month (1 - 12) OR jan,feb,mar,apr ...</span></span><br><span class="line"><span class="comment"># | | | | .---- day of week (0 - 6) (Sunday=0 or 7) OR</span></span><br><span class="line">sun,mon,tue,wed,thu,fri,sat</span><br><span class="line"><span class="comment"># | | | | |</span></span><br><span class="line"><span class="comment"># * * * * * user-name command to be executed</span></span><br><span class="line"><span class="comment"># PATHçš„ä½œç”¨ï¼šæ˜¯ä¸€ä¸ªç¯å¢ƒå˜é‡ï¼Œæ‰€æœ‰çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¯ä»¥ä¸åŠ è·¯å¾„ç›´æ¥æ‰§è¡Œ</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">echo</span> <span class="variable">$PATH</span></span><br><span class="line">/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin</span><br><span class="line">* * * * * [ç”¨æˆ·] å¯æ‰§è¡Œçš„å‘½ä»¤</span><br><span class="line"></span><br><span class="line">åˆ† æ—¶ æ—¥ æœˆ å‘¨</span><br><span class="line">00 02 * * * <span class="built_in">ls</span> <span class="comment"># æ¯å¤©å‡Œæ™¨ä¸¤ç‚¹æ•´æ‰§è¡Œ ls å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">00 02 1 * * <span class="built_in">ls</span> <span class="comment"># æ¯æœˆçš„1å·å‡Œæ™¨ä¸¤ç‚¹æ‰§è¡Œ ls å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">00 02 14 2 * <span class="built_in">ls</span> <span class="comment"># æ¯å¹´çš„2æœˆ14å·å‡Œæ™¨2ç‚¹æ‰§è¡Œ ls å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">00 02 * * 7 <span class="built_in">ls</span> <span class="comment"># æ¯å‘¨å‘¨æ—¥å‡Œæ™¨2ç‚¹æ‰§è¡Œ ls å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">00 02 * 6 5 <span class="built_in">ls</span> <span class="comment"># æ¯ä¸ª6æœˆä»½çš„å‘¨äº”å‡Œæ™¨2ç‚¹æ‰§è¡Œ ls å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">00 02 14 * 7 <span class="built_in">ls</span> <span class="comment"># æ¯ä¸ªæœˆçš„14å·æ°å·§æ˜¯å‘¨æ—¥æ—¶å‡Œæ™¨2ç‚¹æ‰§è¡Œ ls å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">00 02 14 2 7 <span class="built_in">ls</span> <span class="comment"># æ¯å¹´2æœˆ14æ—¥æ°å·§æ˜¯å‘¨æ—¥çš„å‡Œæ™¨2ç‚¹æ‰§è¡Œ ls å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">*/10 02 * * * <span class="built_in">ls</span> <span class="comment"># æ¯å¤©å‡Œæ™¨2ç‚¹å¼€å§‹æ¯éš”10åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ ls å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">* * * * * <span class="built_in">ls</span> <span class="comment"># æ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡lså‘½ä»¤</span></span><br><span class="line">*/1 * * * * <span class="built_in">ls</span> <span class="comment"># æ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡lså‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">00 00 14 2 * <span class="built_in">ls</span> <span class="comment"># æ¯ä¸ª2æœˆ14æ—¥é›¶ç‚¹æ‰§è¡Œä¸€æ¬¡ ls å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">*/5 * * * * <span class="built_in">ls</span> <span class="comment"># æ¯éš”äº”åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ ls å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">00 02 * 1,5,8 * <span class="built_in">ls</span> <span class="comment"># æ¯å¹´çš„1æœˆ5æœˆ8æœˆçš„æ¯å¤©å‡Œæ™¨2ç‚¹æ‰§è¡Œä¸€æ¬¡ ls å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">00 02 1-8 * * <span class="built_in">ls</span> <span class="comment"># æ¯ä¸ªæœˆçš„1å·åˆ°8å·çš„å‡Œæ™¨2ç‚¹æ‰§è¡Œä¸€æ¬¡ ls å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">0 21 * * * <span class="built_in">ls</span> <span class="comment"># æ¯å¤©æ™šä¸Š9ç‚¹æ‰§è¡Œä¸€æ¬¡ ls å‘½ä»¤</span></span><br><span class="line">* 21 * * * <span class="built_in">ls</span> <span class="comment"># æ¯å¤©æ™šä¸Š9ç‚¹å¼€å§‹æ¯ä¸€åˆ†é’Ÿéƒ½æ‰§è¡Œä¸€æ¬¡ ls å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">45 4 1,10,22 * * <span class="built_in">ls</span> <span class="comment"># æ¯ä¸ªæœˆçš„1å· 10å· 22å·çš„å‡Œæ™¨4ç‚¹45åˆ†æ‰§è¡Œä¸€æ¬¡ ls å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">45 4 1-10 * * <span class="built_in">ls</span> <span class="comment"># æ¯ä¸ªæœˆçš„1å·åˆ°10å·çš„å‡Œæ™¨4ç‚¹45åˆ†æ‰§è¡Œä¸€æ¬¡ ls å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">3,15 8-11 */2 * * <span class="built_in">ls</span> <span class="comment"># æ¯éš”ä¸¤å¤©çš„8ç‚¹03 8ç‚¹15 ... 11ç‚¹03 11ç‚¹15æ‰§è¡Œä¸€æ¬¡ ls å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">0 23-7/1 * * * <span class="built_in">ls</span> <span class="comment"># æ¯å¤©çš„0ç‚¹åˆ°7ç‚¹å’Œ23ç‚¹åˆ°0ç‚¹æ•´æ‰§è¡Œä¸€æ¬¡ ls å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">15 21 * * 1-5 <span class="built_in">ls</span> <span class="comment"># æ¯å‘¨ä¸€åˆ°å‘¨äº”æ™šä¸Š9ç‚¹15åˆ†æ‰§è¡Œä¸€æ¬¡ ls å‘½ä»¤</span></span><br></pre></td></tr></table></figure><h4 id="crontabå‘½ä»¤é€‰é¡¹">crontabå‘½ä»¤é€‰é¡¹</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">-eï¼šedit ç¼–è¾‘</span><br><span class="line">-lï¼šæŸ¥çœ‹å½“å‰ç™»å½•ç”¨æˆ·éƒ½æœ‰å“ªäº›å®šæ—¶ä»»åŠ¡</span><br><span class="line">-uï¼šæŒ‡å®šç”¨æˆ·æŸ¥çœ‹å®šæ—¶ä»»åŠ¡</span><br><span class="line">-rï¼šæ¸…ç©ºæ‰€æœ‰å®šæ—¶ä»»åŠ¡</span><br><span class="line"><span class="comment">## æ¯åˆ†é’Ÿï¼ŒåŒæ­¥ä¸€ä¸‹ç³»ç»Ÿæ—¶é—´</span></span><br><span class="line">[root@localhost ~]# crontab -e</span><br><span class="line"><span class="comment"># By: zls Date: 2024-05-06 Name: sync system time</span></span><br><span class="line">* * * * * /usr/sbin/ntpdate ntp1.aliyun.com &amp;&gt;/dev/null</span><br><span class="line"><span class="comment"># æ³¨æ„ï¼š</span></span><br><span class="line">1ï¼‰å‘½ä»¤ç»å¯¹è·¯å¾„</span><br><span class="line">2ï¼‰è¾“å‡ºå®šå‘åˆ°ç©º</span><br><span class="line">3ï¼‰å®šæ—¶ä»»åŠ¡åŠ æ³¨é‡Š</span><br><span class="line"><span class="comment">## æ¯å¤©åšå¤‡ä»½ï¼Œå°†/etcç›®å½•æ‰“åŒ…ä¸ºï¼š2024-05-06_hostname_etc.tar.gz</span></span><br><span class="line">[root@web01 /]# <span class="built_in">cd</span> / &amp;&amp; tar zcf /tmp/$(<span class="built_in">date</span> +%F)_$(hostname -s)_etc.tar.gz etc</span><br><span class="line">[root@web01 ~]# vi /opt/backup.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="built_in">cd</span> / &amp;&amp; tar zcf /tmp/$(<span class="built_in">date</span> +%F)_$(hostname -s)_etc.tar.gz etc</span><br><span class="line"></span><br><span class="line"><span class="comment">#å®æ—¶æŸ¥çœ‹å®šæ—¶ä»»åŠ¡æ‰§è¡Œç»“æœ</span></span><br><span class="line">[root@lb01 ~]# <span class="built_in">tail</span> -f /var/log/cron</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ—¶é—´æ ¼å¼åŒ–è¾“å‡ºï¼š</span></span><br><span class="line"></span><br><span class="line">[root@localhost ~]# <span class="built_in">date</span> +%F-%H:%M:%S</span><br><span class="line">2024-05-13-17:35:25</span><br><span class="line"></span><br><span class="line">%Fï¼šå¹´æœˆæ—¥</span><br><span class="line">%Yï¼šyear å¹´</span><br><span class="line">%mï¼šmouth æœˆ</span><br><span class="line">%dï¼šday æ—¥</span><br><span class="line">%Hï¼šhouræ—¶</span><br><span class="line">%Mï¼šminuteåˆ†</span><br><span class="line">%Sï¼šsecondsç§’</span><br><span class="line">%A:æ˜ŸæœŸ</span><br><span class="line">%wï¼šæ˜ŸæœŸï¼ˆé˜¿æ‹‰ä¼¯æ•°å­—æ˜¾ç¤ºï¼‰</span><br></pre></td></tr></table></figure><h4 id="crontabæ³¨æ„äº‹é¡¹">crontabæ³¨æ„äº‹é¡¹</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1) ç»™å®šæ—¶ä»»åŠ¡æ³¨é‡Š</span><br><span class="line">2) å°†éœ€è¦å®šæœŸæ‰§è¡Œçš„ä»»åŠ¡å†™å…¥Shellè„šæœ¬ä¸­ï¼Œé¿å…ç›´æ¥ä½¿ç”¨å‘½ä»¤æ— æ³•æ‰§è¡Œçš„æƒ…å†µtar <span class="built_in">date</span></span><br><span class="line">3) å®šæ—¶ä»»åŠ¡çš„ç»“å°¾ä¸€å®šè¦æœ‰&amp;&gt;/dev/nullæˆ–è€…å°†ç»“æœè¿½åŠ é‡å®šå‘&gt;&gt;/tmp/date.logæ–‡ä»¶</span><br><span class="line">4) æ³¨æ„æœ‰äº›å‘½ä»¤æ˜¯æ— æ³•æˆåŠŸæ‰§è¡Œçš„ <span class="built_in">echo</span> <span class="string">&quot;123&quot;</span> &gt;&gt;/tmp/test.log &amp;&gt;/dev/null</span><br><span class="line">5.å¦‚æœä¸€å®šè¦æ˜¯ç”¨å‘½ä»¤ï¼Œå‘½ä»¤å¿…é¡»ä½¿ç”¨ç»å¯¹è·¯å¾„</span><br></pre></td></tr></table></figure><h4 id="å®šæ—¶ä»»åŠ¡â€”åšå¤‡ä»½">å®šæ—¶ä»»åŠ¡â€”åšå¤‡ä»½</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@web01 ~]# ll /var/spool/cron/</span><br><span class="line">total 8</span><br><span class="line">-rw------- 1 root root 165 May 6 11:32 root</span><br><span class="line">-rw------- 1 zls zls 27 May 6 2024 zls</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ‹’ç»ç”¨æˆ·ä½¿ç”¨å®šæ—¶ä»»åŠ¡</span></span><br><span class="line">[root@web01 ~]# <span class="built_in">echo</span> <span class="string">&#x27;username&#x27;</span> &gt; /etc/cron.deny</span><br></pre></td></tr></table></figure><h4 id="è®¡åˆ’ä»»åŠ¡è°ƒè¯•æ€è·¯">è®¡åˆ’ä»»åŠ¡è°ƒè¯•æ€è·¯</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">1.crondè°ƒè¯•</span><br><span class="line">1) è°ƒæ•´ä»»åŠ¡æ¯åˆ†é’Ÿæ‰§è¡Œçš„é¢‘ç‡, ä»¥ä¾¿åšåç»­çš„è°ƒè¯•ã€‚</span><br><span class="line">2) å¦‚æœä½¿ç”¨cronè¿è¡Œè„šæœ¬ï¼Œè¯·å°†è„šæœ¬æ‰§è¡Œçš„ç»“æœå†™å…¥æŒ‡å®šæ—¥å¿—æ–‡ä»¶, è§‚å¯Ÿæ—¥å¿—å†…å®¹æ˜¯å¦æ­£å¸¸ã€‚</span><br><span class="line">3) å‘½ä»¤ä½¿ç”¨ç»å¯¹è·¯å¾„, é˜²æ­¢æ— æ³•æ‰¾åˆ°å‘½ä»¤å¯¼è‡´å®šæ—¶ä»»åŠ¡æ‰§è¡Œäº§ç”Ÿæ•…éšœã€‚</span><br><span class="line">4) é€šè¿‡æŸ¥çœ‹/var/log/cronæ—¥å¿—ï¼Œä»¥ä¾¿æ£€æŸ¥æˆ‘ä»¬æ‰§è¡Œçš„ç»“æœï¼Œæ–¹ä¾¿è¿›è¡Œè°ƒè¯•ã€‚</span><br><span class="line">2.crondç¼–å†™æ€è·¯</span><br><span class="line">1.æ‰‹åŠ¨æ‰§è¡Œå‘½ä»¤ï¼Œç„¶åä¿ç•™æ‰§è¡ŒæˆåŠŸçš„ç»“æœã€‚</span><br><span class="line">2.ç¼–å†™è„šæœ¬</span><br><span class="line">è„šæœ¬éœ€è¦ç»Ÿä¸€è·¯å¾„/scripts</span><br><span class="line">è„šæœ¬å†…å®¹å¤åˆ¶æ‰§è¡ŒæˆåŠŸçš„å‘½ä»¤(å‡å°‘æ¯ä¸ªç¯èŠ‚å‡ºé”™å‡ ç‡)</span><br><span class="line">è„šæœ¬å†…å®¹å°½å¯èƒ½çš„ä¼˜åŒ–, ä½¿ç”¨ä¸€äº›å˜é‡æˆ–ä½¿ç”¨ç®€å•çš„åˆ¤æ–­è¯­å¥</span><br><span class="line">è„šæœ¬æ‰§è¡Œçš„è¾“å‡ºä¿¡æ¯å¯ä»¥é‡å®šå‘è‡³å…¶ä»–ä½ç½®ä¿ç•™æˆ–å†™å…¥/dev/null</span><br><span class="line">3.æ‰§è¡Œè„šæœ¬</span><br><span class="line">ä½¿ç”¨bashå‘½ä»¤æ‰§è¡Œ, é˜²æ­¢è„šæœ¬æ²¡æœ‰å¢åŠ æ‰§è¡Œæƒé™(/usr/bin/bash)</span><br><span class="line">æ‰§è¡Œè„šæœ¬æˆåŠŸåï¼Œå¤åˆ¶è¯¥æ‰§è¡Œçš„å‘½ä»¤ï¼Œä»¥ä¾¿å†™å…¥cron</span><br><span class="line">4.ç¼–å†™è®¡åˆ’ä»»åŠ¡</span><br><span class="line">åŠ ä¸Šå¿…è¦çš„æ³¨é‡Šä¿¡æ¯, äººã€æ—¶é—´ã€ä»»åŠ¡</span><br><span class="line">è®¾å®šè®¡åˆ’ä»»åŠ¡æ‰§è¡Œçš„å‘¨æœŸ</span><br><span class="line">ç²˜è´´æ‰§è¡Œè„šæœ¬çš„å‘½ä»¤(ä¸è¦æ‰‹æ•²)</span><br><span class="line">5.è°ƒè¯•è®¡åˆ’ä»»åŠ¡</span><br><span class="line">å¢åŠ ä»»åŠ¡é¢‘ç‡æµ‹è¯•</span><br><span class="line">æ£€æŸ¥ç¯å¢ƒå˜é‡é—®é¢˜</span><br><span class="line">æ£€æŸ¥crondæœåŠ¡æ—¥å¿—</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨å®šæ—¶ä»»åŠ¡å‘é‚®ä»¶">ä½¿ç”¨å®šæ—¶ä»»åŠ¡å‘é‚®ä»¶</h4><p><strong>é…ç½®é‚®ç®±</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.å®‰è£…å‘é€é‚®ä»¶çš„å·¥å…·</span></span><br><span class="line"></span><br><span class="line">[root@web01 ~]# yum install -y mailx</span><br><span class="line"><span class="comment"># 2.é…ç½®é‚®ç®±</span></span><br><span class="line">[root@web01 ~]# vi /etc/mail.rc</span><br><span class="line"><span class="built_in">set</span> from=é‚®ç®±<span class="comment">#å‘ä»¶äºº</span></span><br><span class="line"><span class="built_in">set</span> smtp=smtps://smtp.qq.com:465    <span class="comment">#é‚®ç®±åè®®ï¼Œç«¯å£</span></span><br><span class="line"><span class="built_in">set</span> smtp-auth-user=é‚®ç®± <span class="comment">#ç™»å½•é‚®ç®±è´¦å·</span></span><br><span class="line"><span class="built_in">set</span> smtp-auth-password=å®¢æˆ·ç«¯æˆæƒç    <span class="comment">#é‚®ç®±æˆæƒç </span></span><br><span class="line"><span class="built_in">set</span> smtp-auth=login</span><br><span class="line"><span class="built_in">set</span> ssl-verify=ignore</span><br><span class="line"><span class="built_in">set</span> nss-config-dir=/etc/pki/nssdb/</span><br></pre></td></tr></table></figure><p><strong>é‚®ç®±ç”Ÿæˆæˆæƒç </strong></p><p><img src="https://cos.lukme.top/Pic/image-20240506170025656.png" alt="image-20240506170025656"></p><p><strong>å‘é‚®ä»¶</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@web01 ~]# <span class="built_in">echo</span> <span class="string">&#x27;é‚®ä»¶å†…å®¹&#x27;</span> |mail -s <span class="string">&#x27;é‚®ä»¶æ ‡é¢˜&#x27;</span> 3078155561@qq.com</span><br><span class="line">[root@web01 ~]# <span class="built_in">cat</span> /etc/passwd|mail -s <span class="string">&#x27;test&#x27;</span> 3078155561@qq.com</span><br><span class="line"><span class="built_in">cat</span> /root/backup.log.txt|mail -s <span class="string">&#x27;å¤‡ä»½æ–‡ä»¶&#x27;</span> 3078155561@qq.com</span><br></pre></td></tr></table></figure><h3 id="å®šæ—¶ä»»åŠ¡å®ä¾‹">å®šæ—¶ä»»åŠ¡å®ä¾‹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">éœ€æ±‚ï¼šå°†å¤‡ä»½å‘½ä»¤å†™å…¥ä¸€ä¸ªè„šæœ¬ä¸­ </span><br><span class="line">1.æ¯å¤©å¤‡ä»½æ–‡ä»¶åè¦æ±‚æ ¼å¼ï¼š2018-0220_hostname_etc.tar.gz </span><br><span class="line">2.å­˜æ”¾å¤‡ä»½å†…å®¹çš„ç›®å½•è¦æ±‚åªä¿ç•™3å¤©çš„æ•°æ® </span><br><span class="line">3.åœ¨æ‰§è¡Œè®¡åˆ’ä»»åŠ¡æ—¶ï¼Œä¸è¦è¾“å‡ºä»»åŠ¡ä¿¡æ¯ </span><br><span class="line">4.å¤‡ä»½æ˜¯å¦æˆåŠŸç»“æœï¼Œå‘é€é‚®ä»¶ </span><br><span class="line"><span class="comment">## é‚®ä»¶å†…å®¹ï¼š</span></span><br><span class="line">å¤‡ä»½æ—¶é—´ï¼šç²¾ç¡®åˆ°ç§’</span><br><span class="line">å¤‡ä»½æ–‡ä»¶åï¼š2024-05-06_web01_etc.tar.gz </span><br><span class="line">å¤‡ä»½è·¯å¾„ï¼š/tmp </span><br><span class="line">æ˜¯å¦æˆåŠŸï¼š</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">vim backup.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment">#æ‰¾åˆ°æœ€è¿‘ä¸‰å¤©æ–‡ä»¶å¹¶æ‰“åŒ…</span></span><br><span class="line">find /etc/* -<span class="built_in">type</span> d -mtime -3|xargs tar zcf /tmp/$(<span class="built_in">date</span> +%F)_$(hostname -s)_etc.tar.gz</span><br><span class="line"><span class="comment">#echo &#x27;Backup Success!!!!&#x27;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;å¤‡ä»½æ—¶é—´ï¼š<span class="subst">$(date +%Y/%m/%d\ %H:%M:%S)</span>&quot;</span> &gt;&gt;backuplog.txt</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;å¤‡ä»½æ–‡ä»¶åï¼š<span class="subst">$(date +%F)</span>_<span class="subst">$(hostname -s)</span>_etc.tar.gz&quot;</span> &gt;&gt;backuplog.txt</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;å¤‡ä»½è·¯å¾„ï¼š/tmp&quot;</span> &gt;&gt;backuplog.txt</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;æ˜¯å¦å¤‡ä»½æˆåŠŸï¼šæ˜¯&quot;</span> &gt;&gt;backuplog.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ›å»ºå®šæ—¶ä»»åŠ¡å¹¶å‘é‚®ä»¶</span></span><br><span class="line">[root@lb01 ~]# crontab -e</span><br><span class="line"><span class="comment"># By: lgj Date: 2024-05-06 Name:Backup</span></span><br><span class="line"></span><br><span class="line">0 23 * * * /usr/bin/sh backup.sh  &amp;&gt;/dev/null</span><br><span class="line">0 00 * * * /usr/bin/cat /root/backup.log.txt|mail -s <span class="string">&#x27;å¤‡ä»½æ–‡ä»¶&#x27;</span> 3078155561@qq.com</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">éœ€æ±‚ï¼šå°†å¤‡ä»½å‘½ä»¤å†™å…¥ä¸€ä¸ªè„šæœ¬ä¸­</span><br><span class="line">ä»»åŠ¡ï¼š</span><br><span class="line">1.æ¯å¤©å¤‡ä»½æ–‡ä»¶åè¦æ±‚æ ¼å¼ï¼š2018-02-20_hostname_etc.tar.gz</span><br><span class="line">2.å­˜æ”¾å¤‡ä»½å†…å®¹çš„ç›®å½•è¦æ±‚åªä¿ç•™3å¤©çš„æ•°æ®</span><br><span class="line">3.åœ¨æ‰§è¡Œè®¡åˆ’ä»»åŠ¡æ—¶ï¼Œä¸è¦è¾“å‡ºä»»åŠ¡ä¿¡æ¯</span><br><span class="line">4.å¤‡ä»½æ˜¯å¦æˆåŠŸç»“æœï¼Œå‘é€é‚®ä»¶</span><br><span class="line"><span class="comment">## é‚®ä»¶å†…å®¹ï¼š</span></span><br><span class="line">å¤‡ä»½æ–‡ä»¶åï¼š2024-05-06_web01_etc.tar.gz</span><br><span class="line">å¤‡ä»½è·¯å¾„ï¼š/tmp</span><br><span class="line">æ˜¯å¦æˆåŠŸï¼š</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> / &amp;&amp; tar zcf $(<span class="built_in">date</span> +%F)_$(hostname -s)_etc.tar.gz</span><br><span class="line"></span><br><span class="line">find /etc/* -<span class="built_in">type</span> d -mtime -3</span><br><span class="line"></span><br><span class="line">tar zcf /tmp/$(<span class="built_in">date</span> +%F)_$(hostname -s)_etc.tar.gz /etc/*</span><br><span class="line"></span><br><span class="line">find /etc/* -<span class="built_in">type</span> d -mtime -3|xargs tar zcf /tmp/$(<span class="built_in">date</span> +%F)_$(hostname -s)_etc.tar.gz</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linuxæ•²é—¨ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>LinuxåŸºç¡€æ€»ç»“ç‰ˆ</title>
      <link href="/posts/4c7367cf.html"/>
      <url>/posts/4c7367cf.html</url>
      
        <content type="html"><![CDATA[<h2 id="ã€1ã€‘LinuxåŸºç¡€">ã€1ã€‘LinuxåŸºç¡€</h2><h3 id="1-ç½‘ç»œç›¸å…³">1.ç½‘ç»œç›¸å…³</h3><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ipåœ°å€ï¼šè®¾å¤‡ä¹‹é—´äº’ç›¸é€šä¿¡ xxx.xxx.xxx.xxx <span class="number">4</span>æ®µ ç‚¹åˆ†åè¿›åˆ¶ èŒƒå›´ï¼š<span class="number">0</span>-<span class="number">255</span> <span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span> -<span class="number">255</span>.<span class="number">255</span>.<span class="number">255</span>.<span class="number">255</span></span><br><span class="line">å­ç½‘æ©ç ï¼šåˆ’åˆ†ç½‘æ®µï¼Œåˆ¤æ–­ipæ˜¯å¦åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘å†… <span class="number">255</span>.<span class="number">255</span>.<span class="number">255</span>.<span class="number">0</span> å­ç½‘ä¸€æ ·å°±æ˜¯åœ¨åŒä¸€ç½‘æ®µ</span><br><span class="line">ç½‘å…³ï¼šè®©è®¾å¤‡ä¸Šå±€åŸŸç½‘ä»¥å¤–çš„ç½‘ç«™ï¼Œéœ€è¦å‡ºç½‘å…³ï¼ˆå‡ºå›½çš„æµ·å…³ï¼‰ç½‘å…³åœ°å€å°±æ˜¯è·¯ç”±å™¨çš„IP</span><br><span class="line">DNSï¼šdomain name server åŸŸåè§£ææœåŠ¡</span><br><span class="line">è‹¥å­ä¸‹é¢ä¸¤ä¸ªipç½‘æ©ç å‰ä¸‰ä½ä¸€æ ·ï¼Œæœ€åä¸€ä½ä¸ä¸€æ ·ï¼Œåˆ™å‰ä¸‰ä½æ˜¯ç½‘ç»œä½ï¼‰</span><br><span class="line">å­ç½‘æ©ç             ç½‘ç»œä½       ä¸»æœºä½</span><br><span class="line"><span class="number">255.255.255.0</span>        <span class="number">192</span>.<span class="number">168</span>.<span class="number">0</span>.   <span class="number">69</span></span><br><span class="line"><span class="number">255.255.255.1</span>        <span class="number">192</span>.<span class="number">168</span>.<span class="number">0</span>.   <span class="number">37</span></span><br><span class="line">è‹¥å­ä¸‹é¢ä¸¤ä¸ªipç½‘æ©ç å‰ä¸¤ä½ä¸€æ ·ï¼Œæœ€åä¸¤ä½ä¸ä¸€æ ·ï¼Œåˆ™å‰ä¸¤ä½æ˜¯ç½‘ç»œä½</span><br><span class="line">å­ç½‘æ©ç             ç½‘ç»œä½       ä¸»æœºä½</span><br><span class="line"><span class="number">255.255.0.241</span>      <span class="number">192</span>.<span class="number">168</span>.     <span class="number">1</span>.<span class="number">5</span>       </span><br><span class="line"><span class="number">255.255.1.67</span>       <span class="number">192</span>.<span class="number">168</span>.     <span class="number">0</span>.<span class="number">241</span></span><br><span class="line"></span><br><span class="line">Windowsï¼šcmdä¸­  ipconfig -allæŸ¥çœ‹ip</span><br></pre></td></tr></table></figure><h4 id="1-è™šæ‹Ÿæœºçš„ç½‘ç»œæ¨¡å¼">1.è™šæ‹Ÿæœºçš„ç½‘ç»œæ¨¡å¼</h4><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æ¡¥æ¥æ¨¡å¼ï¼šå°†ç‰©ç†æœºçš„ç½‘å¡å’Œè™šæ‹Ÿæœºçš„ç½‘å¡è¿æ¥åœ¨ä¸€å—ï¼ˆç½‘æ¡¥ï¼‰ä½œç”¨ï¼šå…±äº«ç‰©ç†æœºçš„ç½‘ç»œï¼Œè®©è™šæ‹Ÿæœºçš„IPå’Œç‰©ç†æœºçš„IPåœ¨åŒä¸€ä¸ªç½‘æ®µï¼ˆå±€åŸŸç½‘ï¼‰</span><br><span class="line"><span class="number">192.168.10.142</span></span><br><span class="line"><span class="number">192</span>.<span class="number">168</span>.<span class="number">10</span>.xxx</span><br><span class="line">NATæ¨¡å¼ï¼šå°†ç‰©ç†æœºçš„IPåœ°å€ï¼ŒåŠ¨æ€è½¬æ¢æˆè™šæ‹Ÿæœºçš„ç§ç½‘IPï¼Œè¿™ä¸ªç§ç½‘IPä¹Ÿå¯ä»¥è‡ªå®šä¹‰</span><br><span class="line">ä»…ä¸»æœºæ¨¡å¼ï¼šå°†ç‰©ç†æœºçœ‹æˆæ˜¯ä¸€ä¸ªæ²¡æœ‰è·¯ç”±å™¨çš„äº¤æ¢æœºï¼Œæ‰€æœ‰çš„è™šæ‹Ÿæœºéƒ½è¿æ¥åœ¨è¿™ä¸ªäº¤æ¢æœºä¸Šï¼Œæ‰€æœ‰è™šæ‹Ÿæœºä¹‹é—´å¯ä»¥äº’ç›¸é€šä¿¡ï¼Œä½†æ˜¯æ— æ³•ä¸Šå¤–ç½‘</span><br></pre></td></tr></table></figure><p><strong>NATæ¨¡å¼åŸç†å›¾</strong></p><p><img src="https://cos.lukme.top/Pic/image-20240328140421320.png" alt="image-20240328140421320"></p><p><img src="https://cos.lukme.top/Pic/image-20240328140752681.png" alt="image-20240328140752681"></p><h4 id="2-è™šæ‹Ÿæœºç½‘å¡é…ç½®">2.è™šæ‹Ÿæœºç½‘å¡é…ç½®</h4><p><img src="https://cos.lukme.top/Pic/image-20240328140923241.png" alt="image-20240328140923241"></p><p><img src="https://cos.lukme.top/Pic/image-20240328141009976.png" alt="image-20240328141009976"></p><p><img src="https://cos.lukme.top/Pic/image-20240328141241797.png" alt="image-20240328141241797"></p><p><img src="https://cos.lukme.top/Pic/image-20240328141353938.png" alt="image-20240328141353938"></p><h4 id="3-ç³»ç»Ÿå†…é…ç½®ç½‘å¡">3.ç³»ç»Ÿå†…é…ç½®ç½‘å¡</h4><p><strong>nmtuiå‘½ä»¤</strong></p><p><img src="https://cos.lukme.top/Pic/nmtui%E5%91%BD%E4%BB%A4%E6%AD%A5%E9%AA%A4.png" alt="image-20240328135426458"></p><p><strong>å‘½ä»¤è¡Œé…ç½®</strong></p><p><img src="https://cos.lukme.top/Pic/image-20240328142122532.png" alt="image-20240328142122532"></p><p><img src="https://cos.lukme.top/Pic/image-20240328142637912.png" alt="image-20240328142637912"></p><h4 id="4-Xshellè¿æ¥ä¸ä¸Šè™šæ‹Ÿæœºæ’æŸ¥">4.Xshellè¿æ¥ä¸ä¸Šè™šæ‹Ÿæœºæ’æŸ¥</h4><p><strong>1.æŸ¥çœ‹è™šæ‹Ÿæœºç½‘å¡é…ç½®</strong></p><p><img src="https://cos.lukme.top/Pic/image-20240401212405053.png" alt="image-20240401212405053"></p><p><strong>2.æ£€æŸ¥è·¯ç”±å™¨ (è™šæ‹Ÿç½‘ç»œç¼–è¾‘å™¨)é…ç½®</strong></p><p><img src="https://cos.lukme.top/Pic/image-20240401212612086.png" alt="image-20240401212612086"></p><p><strong>3.è™šæ‹Ÿæœºç½‘å¡é…ç½®æ–‡ä»¶å†…å®¹</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">TYPE=Ethernet</span><br><span class="line">PROXY_METHOD=none</span><br><span class="line">BROWSER_ONLY=no</span><br><span class="line">BOOTPROTO=nonenone/dhcp/static</span><br><span class="line">DEFROUTE=<span class="built_in">yes</span></span><br><span class="line">IPV4_FAILURE_FATAL=no</span><br><span class="line">NAME=ens33</span><br><span class="line">DEVICE=ens33</span><br><span class="line">ONBOOT=<span class="built_in">yes</span>å¼€æœºå¯åŠ¨ç½‘å¡</span><br><span class="line">IPADDR=10.0.0.250ip</span><br><span class="line">NETMASK=255.255.255.0å­ç½‘æ©ç </span><br><span class="line">GATEWAY=10.0.0.2ç½‘å…³</span><br><span class="line">DNS1=223.5.5.5é¦–é€‰DNS</span><br><span class="line">DNS2=223.6.6.6å¤‡ç”¨DNS</span><br><span class="line">IPV6INIT=no</span><br><span class="line">UUID=c96bc909-188e-ec64-3a96-6a90982b08ad</span><br></pre></td></tr></table></figure><p><strong>4.æµ‹è¯•è™šæ‹Ÿæœºæ˜¯å¦èƒ½ä¸Šå¤–ç½‘ ping <a href="http://baidu.com">baidu.com</a></strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## æµ‹è¯•è™šæ‹Ÿæœºæ˜¯å¦èƒ½ä¸Šå¤–ç½‘</span></span><br><span class="line">ping baidu.com</span><br><span class="line">åœ¨xshellé‡Œping10.0.0.250ï¼Œè°è¿æ¥è°ï¼Œå°±ç”¨è°å»pingè°</span><br></pre></td></tr></table></figure><p>5.æ£€æŸ¥ä¸‹ç«¯å£æ˜¯ä¸æ˜¯22ï¼ˆsshåè®®ç«¯å£22ï¼‰</p><p>telnet 10.0.0.250 22 [c:~]$ telnet 10.0.0.250 22</p><p>Windowså¼€å¯telnet</p><p><img src="https://cos.lukme.top/Pic/image-20240401213429309.png" alt="image-20240401213429309"></p><h3 id="2-C6-C7å®‰è£…">2.C6 &amp; C7å®‰è£…</h3><h4 id="1-Centos-6-å®‰è£…">1. Centos 6 å®‰è£…</h4><p><img src="https://cos.lukme.top/Pic/image-20240429164147100.png" alt="image-20240429164147100"></p><p><strong>1.é€‰ç¬¬ä¸€ä¸ªï¼Œå›è½¦</strong></p><p><img src="https://cos.lukme.top/Pic/202405202206220.png" alt="image-20240520220605042"></p><p><img src="https://cos.lukme.top/Pic/image-20240429150439219.png" alt="image-20240429150439219"></p><p><img src="https://cos.lukme.top/Pic/image-20240429150817328.png" alt="image-20240429150817328"></p><p><img src="https://cos.lukme.top/Pic/image-20240429150932495.png" alt="image-20240429150932495"></p><p><img src="https://cos.lukme.top/Pic/image-20240429151041651.png" alt="image-20240429151041651"></p><p><strong>é€‰æ‹©æ—¶åŒºå’Œå¡«å†™å¯†ç ç­‰çœç•¥</strong></p><p><img src="https://cos.lukme.top/Pic/image-20240429151453854.png" alt="image-20240429151453854"></p><p><img src="https://cos.lukme.top/Pic/image-20240429151714208.png" alt=""></p><p><img src="https://cos.lukme.top/Pic/image-20240429151940449.png" alt="image-20240429151940449"></p><p>é€‰æ‹©baseå’Œdevelopå·¥å…·</p><p><img src="https://cos.lukme.top/Pic/image-20240429152056178.png" alt="image-20240429152056178"></p><h4 id="2-é…ç½®CentOS6ç½‘å¡">2.é…ç½®CentOS6ç½‘å¡</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# vi /etc/sysconfig/network-scripts/ifcfg-eth0 </span><br><span class="line">DEVICE=eth0</span><br><span class="line">HWADDR=00:0C:29:5A:FC:82</span><br><span class="line">TYPE=Ethernet</span><br><span class="line">UUID=65c55f51-b929-49fa-b8c9-541e6230e11b</span><br><span class="line">ONBOOT=<span class="built_in">yes</span></span><br><span class="line">NM_CONTROLLED=<span class="built_in">yes</span></span><br><span class="line">BOOTPROTO=none</span><br><span class="line">IPADDR=10.0.0.10</span><br><span class="line">NETMASK=255.255.255.0</span><br><span class="line">GETEWAY=10.0.0.254</span><br><span class="line">DNS=223.5.5.5</span><br><span class="line">:wq</span><br><span class="line">é‡å¯ç½‘å¡ </span><br><span class="line">1./etc/init.d/network restart</span><br><span class="line">2.service network restart</span><br></pre></td></tr></table></figure><h4 id="3-CentOS7å®‰è£…">3.CentOS7å®‰è£…</h4><p><img src="https://cos.lukme.top/Pic/%E8%99%9A%E6%8B%9F%E6%9C%BAstep01.png" alt="image-20240328135426458"></p><p><img src="https://cos.lukme.top/Pic/%E8%99%9A%E6%8B%9F%E6%9C%BAstep02.png" alt="image-20240328135426458"></p><p><img src="https://cos.lukme.top/Pic/%E8%99%9A%E6%8B%9F%E6%9C%BAstep03.png" alt="image-20240328135426458"></p><h3 id="3-å˜é‡">3.å˜é‡</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## å¦‚ä½•å®šä¹‰å˜é‡</span></span><br><span class="line">å˜é‡å=å˜é‡å€¼     age=18</span><br><span class="line">[root@localhost tmp]# <span class="built_in">echo</span> <span class="variable">$age</span><span class="comment">#è°ƒç”¨å˜é‡</span></span><br><span class="line">18</span><br><span class="line"><span class="comment">##  name=oldboy</span></span><br><span class="line">1.<span class="built_in">echo</span> <span class="string">&#x27;$oldboy&#x27;</span> ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ </span><br><span class="line"><span class="variable">$oldboy</span></span><br><span class="line">2.<span class="built_in">echo</span> <span class="string">&#x27;$name&#x27;</span> ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</span><br><span class="line"><span class="variable">$name</span></span><br><span class="line">3.<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$name</span>&quot;</span> ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</span><br><span class="line">oldboy </span><br><span class="line">4.1.<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$oldboy</span>&#x27; ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ </span></span><br><span class="line"><span class="string">ç©ºå€¼</span></span><br><span class="line"><span class="string">echo &#123;1..5..2&#125;æ¯éš”2ä¸ªæ•°åœ¨1-5å–æ•°</span></span><br></pre></td></tr></table></figure><p><strong>ç¯å¢ƒå˜é‡ï¼ˆç³»ç»Ÿå˜é‡ï¼‰</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~] <span class="built_in">declare</span>    <span class="comment">#å¯ä»¥æŸ¥çœ‹ç³»ç»Ÿè‡ªå¸¦çš„æ‰€æœ‰å˜é‡ </span></span><br><span class="line">1.[root@localhost ~]# ll /root/.bashrc</span><br><span class="line">2.[root@localhost ~]# ll /etc/bashrc </span><br><span class="line">3.[root@localhost ~]# ll /etc/profile</span><br><span class="line">4.[root@localhost ~]# ll /etc/profile.d/</span><br></pre></td></tr></table></figure><p><strong>å‘½ä»¤æç¤ºç¬¦å˜é‡</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# <span class="built_in">echo</span> <span class="variable">$PS1</span></span><br><span class="line">[\u@\h \W]\$</span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/image-20240327165009589.png" alt="image-20240327165009589"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ä¿®æ”¹ç¯å¢ƒå˜é‡æ–‡ä»¶æ°¸ä¹…ç”Ÿæ•ˆ</span><br><span class="line">[root@lb01 ~]# vi ~/.bashrc     /root/.bashrc</span><br><span class="line">[lgj@lb01 root]$ vi ~/.bashrc      /home/lgj/.bushrc</span><br><span class="line">è‹¥rootç”¨æˆ·ä¿®æ”¹</span><br><span class="line">è¶…çº§ç”¨æˆ·å’Œæ™®é€šç”¨æˆ·å®¶ç›®å½•ï¼š</span><br><span class="line">è¶…çº§ç”¨æˆ·rootï¼š/root</span><br><span class="line">æ™®é€šç”¨æˆ·ï¼š/home/æ™®é€šç”¨æˆ·å</span><br></pre></td></tr></table></figure><h4 id="BASHç‰¹æ€§">BASHç‰¹æ€§</h4><p><strong>BASHç‰¹æ€§â€”â€”Tabè¡¥å…¨</strong></p><p><strong>BASHç‰¹æ€§â€”â€”å¿«æ·é”®</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Ctrl + w <span class="comment"># å°†å…‰æ ‡æ‰€åœ¨å­—ç¬¦å‰é¢çš„å†…å®¹åˆ é™¤ï¼Œä¸€ç›´åˆ é™¤åˆ°ç©ºæ ¼</span></span><br><span class="line">Ctrl + z <span class="comment"># å°†ä¸€ä¸ªè¿›ç¨‹æ”¾åœ¨åå°è¿è¡Œ</span></span><br><span class="line">Ctrl + k <span class="comment"># å°†å…‰æ ‡æ‰€åœ¨å­—ç¬¦å’Œåé¢æ‰€æœ‰å†…å®¹ï¼Œå…¨éƒ¨åˆ é™¤</span></span><br><span class="line">Ctrl + u <span class="comment"># å°†å…‰æ ‡æ‰€åœ¨å­—ç¬¦å‰é¢çš„å†…å®¹å…¨éƒ¨åˆ é™¤ï¼ˆå…‰æ ‡æ‰€åœ¨å­—ç¬¦ä¸ä¼šåˆ é™¤ï¼‰</span></span><br><span class="line">Ctrl + s <span class="comment"># é”å±</span></span><br><span class="line">Ctrl + q <span class="comment"># è§£é”</span></span><br><span class="line">Ctrl + å·¦å³ <span class="comment"># æŒ‰ç…§å•è¯è·³è½¬å…‰æ ‡</span></span><br><span class="line"><span class="comment">###########################################</span></span><br><span class="line">Ctrl + a <span class="comment"># å°†å…‰æ ‡ç§»åŠ¨åˆ°å‘½ä»¤è¡Œé¦–</span></span><br><span class="line">Ctrl + e <span class="comment"># å°†å…‰æ ‡ç§»åŠ¨åˆ°å‘½ä»¤è¡Œæœ«</span></span><br><span class="line">Ctrl + c <span class="comment"># å°†å‘½ä»¤ç»ˆæ­¢</span></span><br><span class="line">Ctrl + l <span class="comment"># æ¸…å±</span></span><br><span class="line">BASHç‰¹æ€§â€”â€”å†å²å‘½ä»¤</span><br><span class="line">BASHç‰¹æ€§â€”â€”å‘½ä»¤åˆ«å</span><br><span class="line">Ctrl + d <span class="comment"># é€€å‡ºå½“å‰ä¸€ä¸ªBASHç»ˆç«¯ ï¼ˆæ³¨é”€å½“å‰ç”¨æˆ·ï¼‰</span></span><br><span class="line">Ctrl + r <span class="comment"># æœç´¢å†å²å‘½ä»¤</span></span><br><span class="line">ESC + . <span class="comment"># å°†ä¸Šä¸€æ¡å‘½ä»¤æœ€åä¸€ä¸ªç©ºæ ¼ åé¢çš„å†…å®¹ï¼Œè¡¥å…¨åˆ°å½“å‰å‘½ä»¤è¡Œ</span></span><br><span class="line"><span class="string">&#x27;äº•å·&#x27;</span> <span class="comment"># :åœ¨BASHä¸­ä»£è¡¨æ³¨é‡Šï¼Œç³»ç»Ÿä¸è®¤è¯†ï¼Œbashä¹Ÿä¸ä¼šç¿»è¯‘</span></span><br></pre></td></tr></table></figure><p><strong>BASHç‰¹æ€§â€”â€”å†å²å‘½ä»¤</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## æŸ¥çœ‹å†å²å‘½ä»¤ </span></span><br><span class="line">[root@localhost ~]# <span class="built_in">history</span> </span><br><span class="line">    1  age=18</span><br><span class="line">    2  <span class="built_in">echo</span> age</span><br><span class="line">    3  <span class="built_in">echo</span> <span class="string">&quot;age&quot;</span></span><br><span class="line">    4  jjjsjsjsjsjsjjsjjsjsjjjsjss</span><br><span class="line">    5  <span class="built_in">history</span> </span><br><span class="line"><span class="comment">## ä¿å­˜å†å²è®°å½•(write)     å†å²è®°å½•ä¿å­˜åœ¨ ~/.bash_history    æ™®é€šç”¨æˆ·/home/lgj/.bash_history</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">history</span> -w</span><br><span class="line"><span class="comment">## æ¸…é™¤æ‰€æœ‰å†å²è®°å½•ï¼ˆclearï¼‰</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">history</span> -c</span><br><span class="line"><span class="comment">## åˆ é™¤æŒ‡å®šçš„ä¸€æ¡å†å²è®°å½•ï¼ˆdeleteï¼‰</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">history</span> -d 4</span><br><span class="line"></span><br><span class="line"><span class="comment">## æ‰§è¡Œä¸Šä¸€æ¡å¼€å¤´æ˜¯viçš„å‘½ä»¤</span></span><br><span class="line">[root@localhost ~]# !vi</span><br><span class="line"><span class="comment">## æ‰§è¡Œä¸Šä¸€æ¡å‘½ä»¤</span></span><br><span class="line">[root@localhost ~]# !!</span><br><span class="line"><span class="comment">## ä½¿ç”¨!+ç¼–å·ï¼Œé‡æ–°æ‰§è¡Œå‘½ä»¤</span></span><br><span class="line">[root@localhost ~]# !10</span><br></pre></td></tr></table></figure><p><strong>BASHç‰¹æ€§â€”â€”å‘½ä»¤åˆ«å</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## æŸ¥çœ‹ç³»ç»Ÿä¸­çš„æ‰€æœ‰åˆ«åï¼ˆæŸ¥ï¼‰    alias</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">alias</span></span><br><span class="line"><span class="built_in">alias</span> <span class="built_in">cp</span>=<span class="string">&#x27;cp -i&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> egrep=<span class="string">&#x27;egrep --color=auto</span></span><br><span class="line"><span class="string">alias ens33=&#x27;</span>ip address show ens33<span class="string">&#x27;</span></span><br><span class="line"><span class="string">alias fgrep=&#x27;</span>fgrep --color=auto<span class="string">&#x27;</span></span><br><span class="line"><span class="string">alias grep=&#x27;</span>grep --color=auto<span class="string">&#x27;</span></span><br><span class="line"><span class="string">alias l.=&#x27;</span><span class="built_in">ls</span> -d .* --color=auto<span class="string">&#x27;</span></span><br><span class="line"><span class="string">alias ll=&#x27;</span><span class="built_in">ls</span> -l --color=auto<span class="string">&#x27;</span></span><br><span class="line"><span class="string">alias ls=&#x27;</span><span class="built_in">ls</span> --color=auto<span class="string">&#x27;</span></span><br><span class="line"><span class="string">alias mv=&#x27;</span><span class="built_in">mv</span> -i<span class="string">&#x27;</span></span><br><span class="line"><span class="string">alias net=&#x27;</span>vi /etc/sysconfig/network-scripts/ifcfg-ens33<span class="string">&#x27;</span></span><br><span class="line"><span class="string">alias rm=&#x27;</span><span class="built_in">rm</span> -i<span class="string">&#x27;</span></span><br><span class="line"><span class="string">alias which=&#x27;</span><span class="built_in">alias</span> | /usr/bin/which --tty-only --read-alias --show-dot --showtilde<span class="string">&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">## è®¾ç½®åˆ«åï¼ˆå¢ï¼‰ä¸´æ—¶</span></span><br><span class="line"><span class="string">alias åˆ«å=&#x27;</span>å‘½ä»¤<span class="string">&#x27;</span></span><br><span class="line"><span class="string">[root@localhost ~]# alias ens33=&#x27;</span>ip address show ens33<span class="string">&#x27;</span></span><br><span class="line"><span class="string">## åˆ é™¤åˆ«åï¼ˆåˆ ï¼‰</span></span><br><span class="line"><span class="string">unalias åˆ«å</span></span><br><span class="line"><span class="string">[root@localhost ~]# unalias ens33</span></span><br><span class="line"><span class="string">## ä¿®æ”¹åˆ«åï¼ˆæ”¹ï¼‰</span></span><br><span class="line"><span class="string">alias åˆ«å=&#x27;</span>å‘½ä»¤<span class="string">&#x27;</span></span><br><span class="line"><span class="string">alias net=&#x27;</span>vi /etc/sysconfig/network-scripts/ifcfg-ens34</span><br><span class="line"><span class="comment">## åˆ«åæ°¸ä¹…ç”Ÿæ•ˆ</span></span><br><span class="line">[root@localhost ~]# vi ~/.bashrc</span><br><span class="line"><span class="built_in">alias</span> net=<span class="string">&#x27;vi /etc/sysconfig/network-scripts/ifcfg-ens33&#x27;</span></span><br></pre></td></tr></table></figure><p><strong>BASHç‰¹æ€§â€”â€”è·å–å‘½ä»¤å¸®åŠ©</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">man å‘½ä»¤</span><br><span class="line">å‘½ä»¤ --<span class="built_in">help</span></span><br><span class="line">http://linux.51yip.com/</span><br></pre></td></tr></table></figure><h3 id="4-å•ç”¨æˆ·æ¨¡å¼">4.å•ç”¨æˆ·æ¨¡å¼</h3><ul><li>å¿˜è®°rootè´¦æˆ·å¯†ç å¯¼è‡´æ— æ³•ç™»é™†ç³»ç»Ÿæ—¶ï¼Œåªéœ€è¦è¿›å…¥emergency modeï¼ˆå•ç”¨æˆ·æ¨¡å¼ï¼‰æ›´æ–°rootè´¦æˆ·çš„å¯†ç å³å¯ã€‚</li><li>å•ç”¨æˆ·æ¨¡å¼å¯ä»¥ç”¨æ¥ä¿®æ”¹æ–‡ä»¶ç³»ç»ŸæŸåã€è¿˜åŸé…ç½®æ–‡ä»¶ã€ç§»åŠ¨ç”¨æˆ·æ•°æ®ç­‰ã€‚</li></ul><h4 id="1-ä¿®æ”¹å¯†ç ">1.ä¿®æ”¹å¯†ç </h4><p><strong>CentOS6</strong></p><p><strong>1ï¼‰é‡å¯ç³»ç»Ÿï¼Œåˆ°grubèœå•ç•Œé¢</strong></p><p><img src="https://cos.lukme.top/Pic/image-20240429164346037.png" alt="image-20240429164346037"></p><p><img src="https://cos.lukme.top/Pic/image-20240429164633863.png" alt="image-20240429164633863"></p><p><img src="https://cos.lukme.top/Pic/image-20240429165101506.png" alt="image-20240429165101506"></p><p><strong>å›è½¦è¿”å›å†…æ ¸èœå•</strong></p><p><img src="https://cos.lukme.top/Pic/image-20240429164943845.png" alt="image-20240429164943845"></p><p><strong>è¿›å…¥åå°±å¯ä»¥é‡æ–°è®¾ç½®å¯†ç äº†</strong></p><p><img src="https://cos.lukme.top/Pic/image-20240429165410448.png" alt="image-20240429165410448"></p><p>å¯†ç è®¾ç½®å¥½é‡å¯å°±OKäº†</p><p><strong>CentOs7</strong></p><p><strong>1.é‡å¯ç³»ç»Ÿ</strong></p><p><img src="https://cos.lukme.top/Pic/image-20240429170437706.png" alt="image-20240429170437706"></p><p><strong>2.è¿›å…¥grub2èœå•</strong></p><p><img src="https://cos.lukme.top/Pic/image-20240429170649081.png" alt="image-20240429170649081"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨linux16è¡Œçš„æœ«å°¾è¾“å…¥,ç„¶åæŒ‰ä¸‹   Ctrl+Xå¼•å¯¼   ç»„åˆé”®æ¥è¿è¡Œä¿®æ”¹è¿‡çš„å†…æ ¸ç¨‹åº</span></span><br><span class="line">enforcing=0 init=/bin/bash</span><br><span class="line">enforcing=0   å…³é—­selinuxï¼ˆä¸´æ—¶çš„ï¼‰ï¼Œè¿›å…¥å•ç”¨æˆ·åé…ç½®æ–‡ä»¶é‡Œå…³é—­selinuxï¼Œå¦åˆ™é‡æ–°å¼€æœºåå¯†ç å°±ä¸ç”Ÿæ•ˆäº†</span><br></pre></td></tr></table></figure><p><strong>ä¸æŒ‚è½½æ–¹å¼</strong></p><p><img src="https://cos.lukme.top/Pic/image-20240429173119985.png" alt="image-20240429173119985"></p><p><strong>3.è¿›å…¥å•ç”¨æˆ·æ¨¡å¼</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.é‡æ–°æŒ‚è½½/ç›®å½•</span></span><br><span class="line">mount -o rw,remount /</span><br><span class="line"><span class="comment"># 2.ä¿®æ”¹å¯†ç </span></span><br><span class="line">passwd root</span><br><span class="line"><span class="comment"># 3.é‡æ–°å¼•å¯¼ç³»ç»Ÿ</span></span><br><span class="line"><span class="built_in">exec</span> /sbin/init</span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/image-20240429171621119.png" alt="image-20240429171621119"></p><h4 id="2-ä¿®æ”¹è¿è¡Œçº§åˆ«">2.ä¿®æ”¹è¿è¡Œçº§åˆ«</h4><p><strong>å¦‚æœcentos7è¢«è®¾ç½®ä¸ºè¿è¡Œçº§åˆ«6ï¼Œå¯¼è‡´æ— é™é‡å¯æ€ä¹ˆè§£å†³ï¼Ÿ</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## æŸ¥çœ‹</span></span><br><span class="line">[root@yum_repo ~]# systemctl get-default</span><br><span class="line">multi-user.target    <span class="comment">#å®Œæ•´å¤šç”¨æˆ·æ¨¡å¼</span></span><br><span class="line"><span class="comment">## ä¿®æ”¹</span></span><br><span class="line">[root@yum_repo ~]# systemctl set-default reboot.target     <span class="comment">#è®¾ç½®è¿è¡Œçº§åˆ«6é‡å¯ï¼ˆæ— é™é‡å¯ï¼‰</span></span><br></pre></td></tr></table></figure><p><strong>è§£å†³åŠæ³•</strong></p><p>1.è¿›å…¥ç¼–è¾‘æ¨¡å¼</p><p><img src="https://cos.lukme.top/Pic/image-20240429173139767.png" alt="image-20240429173139767"></p><p>2.#åœ¨linux16è¡Œçš„æœ«å°¾è¾“å…¥,ç„¶åæŒ‰ä¸‹   Ctrl+X   ç»„åˆé”®æ¥è¿è¡Œä¿®æ”¹è¿‡çš„å†…æ ¸ç¨‹åº</p><p><img src="https://cos.lukme.top/Pic/image-20240429175105690.png" alt="image-20240429175105690"></p><p><img src="https://cos.lukme.top/Pic/image-20240429180423234.png" alt="image-20240429180423234"></p><p>exité€€å‡ºï¼Œrebooté‡å¯</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.é‡æ–°æŒ‚è½½/sysrootç›®å½•</span></span><br><span class="line">mount -o rw,remount /sysroot</span><br><span class="line"><span class="comment"># 2.è·å–rootæƒé™</span></span><br><span class="line"><span class="built_in">chroot</span> /sysroot</span><br><span class="line"><span class="comment"># 3.ä¿®æ”¹å¯†ç </span></span><br><span class="line">passwd root</span><br><span class="line"><span class="comment"># 4.ä¿®æ”¹è¿è¡Œçº§åˆ«</span></span><br><span class="line">systemctl set-default multi-user.target</span><br><span class="line"><span class="comment"># 5.é€€å‡º</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"><span class="comment"># 6.é‡å¯</span></span><br><span class="line">reboot</span><br><span class="line"><span class="comment">## å…³é—­selinux</span></span><br><span class="line"><span class="comment"># ä¸´æ—¶å…³é—­</span></span><br><span class="line">[root@yum_repo ~]# setenforce 0</span><br><span class="line"><span class="comment"># æ°¸ä¹…å…³é—­ï¼ˆé‡å¯ç³»ç»Ÿç”Ÿæ•ˆï¼‰</span></span><br><span class="line">[root@yum_repo ~]# vi /etc/sysconfig/selinux</span><br><span class="line">SELINUX=disabled</span><br><span class="line"><span class="comment">## ä¸¤ç§è¿›å…¥å•ç”¨æˆ·æ–¹æ³•</span></span><br><span class="line">1ï¼‰enforcing=0 init=/bin/bash // ä¿®æ”¹å¯†ç </span><br><span class="line">2ï¼‰rd.break // ä¿®æ”¹è¿è¡Œçº§åˆ«</span><br></pre></td></tr></table></figure><h2 id="ã€2ã€‘æ–‡ä»¶å’Œç›®å½•ç®¡ç†">ã€2ã€‘æ–‡ä»¶å’Œç›®å½•ç®¡ç†</h2><h3 id="1-ç›®å½•ç»“æ„">1.ç›®å½•ç»“æ„</h3><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">  å‡ ä¹æ‰€æœ‰çš„è®¡ç®—æœºæ“ä½œç³»ç»Ÿéƒ½æ˜¯ä½¿ç”¨ç›®å½•ç»“æ„ç»„ç»‡æ–‡ä»¶ã€‚å…·ä½“æ¥è¯´å°±æ˜¯åœ¨ä¸€ä¸ªç›®å½•ä¸­å­˜æ”¾å­ç›®å½•å’Œæ–‡ä»¶ï¼Œè€Œåœ¨å­ç›®å½•ä¸­åˆä¼šè¿›ä¸€æ­¥å­˜æ”¾å­ç›®å½•å’Œæ–‡ä»¶ï¼Œä»¥æ­¤ç±»æ¨å½¢æˆä¸€ä¸ªæ ‘çŠ¶çš„æ–‡ä»¶ç»“æ„ï¼Œç”±äºå…¶ç»“æ„å¾ˆåƒä¸€æ£µæ ‘çš„åˆ†æ”¯ï¼Œæ‰€ä»¥è¯¥ç»“æ„åˆè¢«ç§°ä¸ºç›®å½•æ ‘ã€‚</span><br><span class="line">windowsï¼šä¸€å¤šæ ¹çš„æ–¹å¼ç»„ç»‡æ–‡ä»¶C:<span class="string">\</span> D:<span class="string">\</span></span><br><span class="line">Linuxï¼šä»¥å•æ ¹çš„æ–¹å¼ç»„ç»‡æ–‡ä»¶ /</span><br></pre></td></tr></table></figure><p><strong>ç›®å½•å±‚æ¬¡çš„æ ‡å‡†FHS</strong></p><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">FHSå…¨ç§°ï¼ˆ<span class="keyword">File</span><span class="params">system</span> Hierarchy Standardï¼‰ï¼Œä¸­æ–‡æ„æ€æ˜¯ç›®å½•å±‚æ¬¡æ ‡å‡†ï¼Œæ˜¯Linuxçš„ç›®å½•è§„èŒƒæ ‡å‡†ã€‚</span><br><span class="line">FHSå®šä¹‰äº†ä¸¤æ¬¡è§„èŒƒï¼š</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>.â€œ/â€ç›®å½•ä¸‹çš„å„ä¸ªç›®å½•åº”è¯¥æ”¾ä»€ä¹ˆæ–‡ä»¶æ•°æ®ã€‚</span><br><span class="line"><span class="number">2</span>.é’ˆå¯¹/usr å’Œ /<span class="keyword">var</span> è¿™ä¸¤ä¸ªç›®å½•çš„å­ç›®å½•æ¥å®šä¹‰ã€‚</span><br></pre></td></tr></table></figure><blockquote><p>bin -&gt; usr/bin   è¿™ä¸ªæ˜¯usr/binçš„å¿«æ·æ–¹å¼</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">-rw-r--r--.   1 root root    0 Mar 28 11:29 1.txt</span><br><span class="line">lrwxrwxrwx.   1 root root    7 Mar 27 12:07 bin -&gt; usr/bin</span><br><span class="line">dr-xr-xr-x.   5 root root 4096 Mar 27 12:11 boot</span><br><span class="line">-å¼€å¤´çš„æ˜¯æ–‡ä»¶</span><br><span class="line">lå¼€å¤´çš„æ˜¯å¿«æ·æ–¹å¼   -&gt;</span><br><span class="line">drå¼€å¤´çš„æ˜¯æ–‡ä»¶å¤¹</span><br><span class="line"><span class="comment">## /ç›®å½•ä¸‹</span></span><br><span class="line"><span class="comment">###ç³»ç»Ÿå‘½ä»¤</span></span><br><span class="line">bin -&gt; usr/bin <span class="comment"># å­˜æ”¾ç³»ç»Ÿå‘½ä»¤ï¼ˆæ™®é€šç”¨æˆ·å¯ä»¥æ‰§è¡Œï¼‰</span></span><br><span class="line">sbin -&gt; usr/sbin <span class="comment"># å­˜æ”¾ç³»ç»Ÿå‘½ä»¤ï¼ˆå¤§éƒ¨åˆ†å‘½ä»¤åªèƒ½è¶…çº§ç”¨æˆ·æ‰§è¡Œï¼‰</span></span><br><span class="line"><span class="comment">#ç³»ç»Ÿåº“æ–‡ä»¶ç›®å½•</span></span><br><span class="line">lib -&gt; usr/lib <span class="comment"># åº“æ–‡ä»¶ï¼ˆæ“ä½œç³»ç»Ÿéœ€è¦ç”¨åˆ°çš„ç»„ä»¶ æ’ä»¶...ï¼‰</span></span><br><span class="line">lib64 -&gt; usr/lib64 <span class="comment"># åº“æ–‡ä»¶ï¼ˆ64ä½æ“ä½œç³»ç»Ÿåº“æ–‡ä»¶ï¼‰</span></span><br><span class="line"><span class="comment"># ç³»ç»Ÿå¯åŠ¨æ—¶æ–‡ä»¶ç›®å½•</span></span><br><span class="line">boot    <span class="comment"># å­˜æ”¾ç³»ç»Ÿå¯åŠ¨æ–‡ä»¶</span></span><br><span class="line"><span class="comment">#ç©ºæ–‡ä»¶å¤¹</span></span><br><span class="line">media   <span class="comment"># åª’ä½“åº“ç›®å½•ï¼ˆå¯ä»¥å­˜æ”¾è§†é¢‘ï¼Œå›¾ç‰‡...ï¼‰      //åª’ä½“åº“ å­˜æ”¾è§†é¢‘ï¼Œå›¾ç‰‡ï¼ŒéŸ³ä¹</span></span><br><span class="line">mnt     <span class="comment"># mount å¦‚æœæœ‰Uç›˜ å…‰é©±ä»¥å¤–çš„è®¾å¤‡ï¼ŒæŒ‚è½½ç›®å½•     //æŒ‚è½½ç›®å½•   mount </span></span><br><span class="line"><span class="comment">#ä¸´æ—¶æŒ‚è½½çš„æ–‡ä»¶ç³»ç»Ÿã€‚æ¯”å¦‚cdrom,uç›˜ç­‰ï¼Œç›´æ¥æ’å…¥å…‰é©±æ— æ³•ä½¿ç”¨ï¼Œè¦å…ˆæŒ‚è½½åä½¿ç”¨  /dev/cdrom /mnt</span></span><br><span class="line"></span><br><span class="line">opt      <span class="comment"># å­˜æ”¾ç¬¬ä¸‰æ–¹åº”ç”¨å®‰è£…åŒ…çš„ç›®å½•</span></span><br><span class="line">srv    <span class="comment"># ç½‘ç«™æ•°æ®å­˜æ”¾ç›®å½•</span></span><br><span class="line"></span><br><span class="line">*****é‡ç‚¹*****</span><br><span class="line">1ï¼‰root    <span class="comment"># è¶…çº§ç”¨æˆ·rootçš„å®¶ç›®å½•</span></span><br><span class="line">2ï¼‰home    <span class="comment"># æ™®é€šç”¨æˆ·çš„å®¶ç›®å½•</span></span><br><span class="line">3ï¼‰run    <span class="comment"># å­˜æ”¾ç³»ç»Ÿä¸­è¿è¡Œçš„æ‰€æœ‰è¿›ç¨‹PIDæ–‡ä»¶(#ç³»ç»Ÿå¯åŠ¨å, è¿è¡Œçš„ç¨‹åºäº§ç”Ÿçš„è¿è¡Œæ—¶æ•°æ®, åŒ…æ‹¬è¿›ç¨‹çš„pidæ–‡ä»¶,é”æ–‡ä»¶ç­‰)</span></span><br><span class="line">4ï¼‰sys    <span class="comment"># æ“ä½œç³»ç»Ÿç›¸å…³æ–‡ä»¶å­˜æ”¾ç›®å½•</span></span><br><span class="line">5)tmp      <span class="comment"># æ‰€æœ‰ç”¨æˆ·éƒ½å¯ä»¥æ“ä½œçš„ç›®å½•ï¼ˆå›æ”¶ç«™ï¼‰å­˜æ”¾ä¸´æ—¶æ–‡ä»¶, ä¸€èˆ¬å­˜æ”¾è¶…è¿‡10å¤©ä»¥ä¸Šéƒ½ä¼šè‡ªåŠ¨åˆ é™¤,å¯ä»¥æ›´æ”¹åˆ é™¤ä¸´æ—¶æ–‡ä»¶çš„æœŸé™</span></span><br><span class="line">6)usr   <span class="comment"># ç”¨æˆ·æ–‡ä»¶å­˜æ”¾ç›®å½•</span></span><br><span class="line"> <span class="comment">#é»˜è®¤è½¯ä»¶éƒ½ä¼šå­˜äºè¯¥ç›®å½•ä¸‹ã€‚ç”¨äºå­˜å‚¨åªè¯»ç”¨æˆ·æ•°æ®çš„ç¬¬äºŒå±‚æ¬¡ï¼›åŒ…å«ç»å¤§å¤šæ•°çš„(å¤š)ç”¨æˆ·å·¥å…·å’Œåº”ç”¨ç¨‹åºã€‚</span></span><br><span class="line">7)dev    <span class="comment"># è®¾å¤‡æ–‡ä»¶</span></span><br><span class="line">8)etc    <span class="comment"># ç³»ç»Ÿé…ç½®æ–‡ä»¶ .conf .cfg .configure .cnf ä»¥åŠå¸¸ç”¨é…ç½®æ–‡ä»¶</span></span><br><span class="line">9)proc    <span class="comment"># ç³»ç»Ÿä¿¡æ¯éƒ½å­˜æ”¾è¿™ç›®å½•ä¸‹ï¼ˆç¡¬ä»¶ä¿¡æ¯ï¼Œè¿›ç¨‹ä¿¡æ¯ å˜åŒ–ä¿¡æ¯)</span></span><br><span class="line">10)var    <span class="comment"># å­˜æ”¾ä¸€äº›ç³»ç»Ÿä¸­å˜é‡æ–‡ä»¶ï¼Œå’Œä¸€äº›ä¸æ–­å‘ç”Ÿå˜åŒ–çš„å¯å˜æ–‡ä»¶</span></span><br></pre></td></tr></table></figure><h4 id="â‘ -devç›®å½•">â‘  /devç›®å½•</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/dev/sda <span class="comment"># ç³»ç»Ÿä¸­çš„ç¬¬ä¸€å—ç¡¬ç›˜</span></span><br><span class="line">/dev/sda1 <span class="comment"># ç³»ç»Ÿä¸­çš„ç¬¬ä¸€å—ç¡¬ç›˜çš„ç¬¬ä¸€ä¸ªåˆ†åŒº</span></span><br><span class="line">/dev/sda2 <span class="comment"># ç³»ç»Ÿä¸­çš„ç¬¬ä¸€å—ç¡¬ç›˜çš„ç¬¬äºŒä¸ªåˆ†åŒº</span></span><br><span class="line">/dev/sdb <span class="comment"># ç³»ç»Ÿä¸­çš„ç¬¬äºŒå—ç¡¬ç›˜</span></span><br><span class="line">/dev/random <span class="comment"># ç”Ÿæˆéšæœºæ•°çš„</span></span><br><span class="line">/dev/null <span class="comment"># é»‘æ´ï¼Œå°†ç»ˆç«¯ä¸Šè¾“å‡ºçš„å†…å®¹ï¼Œæ”¾å…¥é»‘æ´</span></span><br><span class="line">/dev/cdrom <span class="comment"># å…‰é©±</span></span><br><span class="line">/dev/pts/&#123;0 1 2 3&#125; <span class="comment"># è¿æ¥æœåŠ¡å™¨çš„è™šæ‹Ÿç»ˆç«¯è®¾å¤‡</span></span><br></pre></td></tr></table></figure><h4 id="â‘¡-etcç›®å½•">â‘¡ /etcç›®å½•</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/etc/hosts <span class="comment"># æœ¬åœ°DNSè§£ææ–‡ä»¶      ip åŸŸå</span></span><br><span class="line">/etc/passwd <span class="comment"># å­˜æ”¾ç”¨æˆ·ä¿¡æ¯æ–‡ä»¶</span></span><br><span class="line">/etc/sysconfig/network-scripts/ifcfg-ç½‘å¡å <span class="comment"># ç½‘å¡é…ç½®æ–‡ä»¶</span></span><br><span class="line">/etc/hostname <span class="comment"># ä¸»æœºåé…ç½®æ–‡ä»¶</span></span><br><span class="line">/etc/resolv.conf <span class="comment"># DNSé…ç½®æ–‡ä»¶</span></span><br></pre></td></tr></table></figure><h4 id="â‘¢-etcå…¶å®ƒç›®å½•-äº†è§£">â‘¢ /etcå…¶å®ƒç›®å½•     *äº†è§£</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/etc/opt/       <span class="comment">#/opt/çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">/etc/X11/       <span class="comment">#X_Windowç³»ç»Ÿ(ç‰ˆæœ¬11)çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">/etc/sgml/      <span class="comment">#SGMLçš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">/etc/xml/       <span class="comment">#XMLçš„é…ç½®æ–‡ä»¶</span></span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/image-20240328131046094.png" alt="image-20240328131046094"></p><h4 id="â‘£-procå’Œ-varç›®å½•">â‘£ /procå’Œ/varç›®å½•</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/proc/m</span>eminfo <span class="comment"># å†…å­˜ä¿¡æ¯</span></span><br><span class="line"><span class="regexp">/proc/</span>cpuinfo <span class="comment"># CPUä¿¡æ¯</span></span><br><span class="line">åœ¨Linuxä¸­ï¼Œå¯¹åº”Procfsæ ¼å¼æŒ‚è½½ã€‚è¯¥ç›®å½•ä¸‹æ–‡ä»¶åªèƒ½çœ‹ä¸èƒ½æ”¹ï¼ˆåŒ…æ‹¬rootï¼‰</span><br></pre></td></tr></table></figure><p><strong>/varç›®å½•</strong></p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/var/<span class="built_in">log</span>/messages <span class="meta"># ç³»ç»Ÿæ—¥å¿—</span></span><br><span class="line">/var/<span class="built_in">log</span>/secure <span class="meta"># ç³»ç»Ÿç™»å½•æ—¥å¿—</span></span><br><span class="line"><span class="meta">#å˜é‡æ–‡ä»¶â€”â€”åœ¨æ­£å¸¸è¿è¡Œçš„ç³»ç»Ÿä¸­å…¶å†…å®¹ä¸æ–­å˜åŒ–çš„æ–‡ä»¶ï¼Œå¦‚æ—¥å¿—ï¼Œè„±æœºæ–‡ä»¶å’Œä¸´æ—¶ç”µå­é‚®ä»¶æ–‡ä»¶ã€‚æœ‰æ—¶æ˜¯ä¸€ä¸ªå•ç‹¬çš„åˆ†åŒºã€‚å¦‚æœä¸å•ç‹¬åˆ†åŒºï¼Œæœ‰å¯èƒ½ä¼šæŠŠæ•´ä¸ªåˆ†åŒºå……æ»¡ã€‚å¦‚æœå•ç‹¬åˆ†åŒºï¼Œç»™å¤§ç»™å°éƒ½ä¸åˆé€‚ã€‚</span></span><br></pre></td></tr></table></figure><p><strong>æ–‡ä»¶çš„è·¯å¾„å®šä½</strong></p><p><img src="https://cos.lukme.top/Pic/image-20240328131213563.png" alt="image-20240328131213563"></p><p><strong>ç‰¹æ®Šç›®å½•â€™.â€™ å’Œâ€™â€¦â€™</strong></p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">.. </span>ï¼šå½“å‰ç›®å½•çš„ä¸Šä¸€çº§ç›®å½•</span><br><span class="line"><span class="bullet">. </span>ï¼šå½“å‰ç›®å½•</span><br></pre></td></tr></table></figure><h4 id="â‘¤-å…¶å®ƒç›®å½•">â‘¤ å…¶å®ƒç›®å½•</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/lost+found     <span class="comment">#åœ¨ext3æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œå½“ç³»ç»Ÿæ„å¤–å´©æºƒæˆ–æœºå™¨æ„å¤–å…³æœºï¼Œä¼šäº§ç”Ÿä¸€äº›æ–‡ä»¶ç¢ç‰‡åœ¨è¿™é‡Œã€‚å½“ç³»ç»Ÿåœ¨å¼€æœºå¯åŠ¨çš„è¿‡ç¨‹ä¸­fsckå·¥å…·ä¼šæ£€æŸ¥è¿™é‡Œï¼Œå¹¶ä¿®å¤å·²ç»æŸåçš„æ–‡ä»¶ç³»ç»Ÿã€‚å½“ç³»ç»Ÿå‘ç”Ÿé—®é¢˜ã€‚å¯èƒ½ä¼šæœ‰æ–‡ä»¶è¢«ç§»åŠ¨åˆ°è¿™ä¸ªç›®å½•ä¸­ï¼Œå¯èƒ½éœ€è¦ç”¨æ‰‹å·¥çš„æ–¹å¼æ¥ä¿®å¤ï¼Œæˆ–ç§»åˆ°æ–‡ä»¶åˆ°åŸæ¥çš„ä½ç½®ä¸Šã€‚</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## /etc/ç›®å½•</span></span><br><span class="line"></span><br><span class="line">/etc/rc /etc/rc.d   ***** <span class="comment">#/etc/rc*.d å¯åŠ¨ã€æˆ–æ”¹å˜è¿è¡Œçº§æ—¶è¿è¡Œçš„scriptsæˆ–scriptsçš„ç›®å½•.</span></span><br><span class="line">/etc/hosts          ***** <span class="comment">#æœ¬åœ°åŸŸåè§£ææ–‡ä»¶</span></span><br><span class="line">/etc/sysconfig/network  ***** <span class="comment">#IPã€æ©ç ã€ç½‘å…³ã€ä¸»æœºåé…ç½®</span></span><br><span class="line">/etc/resolv.conf    ***** <span class="comment">#DNSæœåŠ¡å™¨é…ç½®</span></span><br><span class="line">/etc/fstab          ***** <span class="comment">#å¼€æœºè‡ªåŠ¨æŒ‚è½½ç³»ç»Ÿï¼Œæ‰€æœ‰åˆ†åŒºå¼€æœºéƒ½ä¼šè‡ªåŠ¨æŒ‚è½½</span></span><br><span class="line">/etc/inittab        ***** <span class="comment">#è®¾å®šç³»ç»Ÿå¯åŠ¨æ—¶Initè¿›ç¨‹å°†æŠŠç³»ç»Ÿè®¾ç½®æˆä»€ä¹ˆæ ·çš„runlevelåŠåŠ è½½ç›¸å…³çš„å¯åŠ¨æ–‡ä»¶é…ç½®</span></span><br><span class="line">/etc/exports        ***** <span class="comment">#è®¾ç½®NFSç³»ç»Ÿç”¨çš„é…ç½®æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">/etc/init.d/        ***** <span class="comment">#è¿™ä¸ªç›®å½•æ¥å­˜æ”¾ç³»ç»Ÿå¯åŠ¨è„šæœ¬</span></span><br><span class="line">/etc/profile        ***** <span class="comment">#å…¨å±€ç³»ç»Ÿç¯å¢ƒé…ç½®å˜é‡</span></span><br><span class="line">/etc/csh.login,  /etc/csh.cshrc</span><br><span class="line">/etc/issue          ***** <span class="comment">#è®¤è¯å‰çš„è¾“å‡ºä¿¡æ¯ï¼Œé»˜è®¤è¾“å‡ºç‰ˆæœ¬å†…æ ¸ä¿¡æ¯</span></span><br><span class="line">/etc/motd           <span class="comment">#è®¾ç½®è®¤è¯åçš„è¾“å‡ºä¿¡æ¯</span></span><br><span class="line">/etc/mtab           <span class="comment">#å½“å‰å®‰è£…çš„æ–‡ä»¶ç³»ç»Ÿåˆ—è¡¨.ç”±scriptsåˆå§‹åŒ–ï¼Œå¹¶ç”±mount å‘½ä»¤è‡ªåŠ¨æ›´æ–°.éœ€è¦ä¸€ä¸ªå½“å‰å®‰è£…çš„æ–‡ä»¶ç³»ç»Ÿçš„åˆ—è¡¨æ—¶ä½¿ç”¨ï¼Œä¾‹å¦‚df å‘½ä»¤</span></span><br><span class="line">/etc/group          ***** <span class="comment">#ç±»ä¼¼/etc/passwd ï¼Œä½†è¯´æ˜çš„ä¸æ˜¯ç”¨æˆ·è€Œæ˜¯ç»„.</span></span><br><span class="line">/etc/passwd         ***** <span class="comment">#ç”¨æˆ·æ•°æ®åº“ï¼Œå…¶ä¸­çš„åŸŸç»™å‡ºäº†ç”¨æˆ·åã€çœŸå®å§“åã€å®¶ç›®å½•ã€åŠ å¯†çš„å£ä»¤å’Œç”¨æˆ·çš„å…¶ä»–ä¿¡æ¯.</span></span><br><span class="line">/etc/shadow         ****** <span class="comment">#åœ¨å®‰è£…äº†å½±å­å£ä»¤è½¯ä»¶çš„ç³»ç»Ÿä¸Šçš„å½±å­å£ä»¤æ–‡ä»¶.å½±å­å£ä»¤æ–‡ä»¶å°†/etc/passwd æ–‡ä»¶ä¸­çš„åŠ å¯†å£ä»¤ç§»åŠ¨åˆ°/etc/shadow ä¸­ï¼Œè€Œåè€…åªå¯¹rootå¯è¯».è¿™ä½¿ç ´è¯‘å£ä»¤æ›´å›°éš¾.</span></span><br><span class="line">/etc/sudoers        ***** <span class="comment">#å¯ä»¥sudoå‘½ä»¤çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">/etc/syslog.conf    ***** <span class="comment">#ç³»ç»Ÿæ—¥å¿—å‚æ•°é…ç½®</span></span><br><span class="line">/etc/login.defs     <span class="comment">#è®¾ç½®ç”¨æˆ·å¸å·é™åˆ¶çš„æ–‡ä»¶</span></span><br><span class="line">/etc/securetty      <span class="comment">#ç¡®è®¤å®‰å…¨ç»ˆç«¯ï¼Œå³å“ªä¸ªç»ˆç«¯å…è®¸rootç™»å½•.ä¸€èˆ¬åªåˆ—å‡ºè™šæ‹Ÿæ§åˆ¶å°ï¼Œè¿™æ ·å°±ä¸å¯èƒ½(è‡³å°‘å¾ˆå›°éš¾)é€šè¿‡modemæˆ–ç½‘ç»œé—¯å…¥ç³»ç»Ÿå¹¶å¾—åˆ°è¶…çº§ç”¨æˆ·ç‰¹æƒ.</span></span><br><span class="line">/etc/printca        <span class="comment">#ç±»ä¼¼/etc/termcap ï¼Œä½†é’ˆå¯¹æ‰“å°æœº.è¯­æ³•ä¸åŒ.</span></span><br><span class="line">/etc/shells         <span class="comment">#åˆ—å‡ºå¯ä¿¡ä»»çš„shell.chsh å‘½ä»¤å…è®¸ç”¨æˆ·åœ¨æœ¬æ–‡ä»¶æŒ‡å®šèŒƒå›´å†…æ”¹å˜ç™»å½•shell.æä¾›ä¸€å°æœºå™¨FTPæœåŠ¡çš„æœåŠ¡è¿›ç¨‹ftpd æ£€æŸ¥ç”¨æˆ·shellæ˜¯å¦åˆ—åœ¨ /etc/shells æ–‡ä»¶ä¸­ï¼Œå¦‚æœä¸æ˜¯å°†ä¸å…è®¸è¯¥ç”¨æˆ·ç™»å½•.</span></span><br><span class="line">/etc/xinetd.d       <span class="comment">#å¦‚æœæœåŠ¡å™¨æ˜¯é€šè¿‡xinetdæ¨¡å¼è¿è¡Œçš„ï¼Œå®ƒçš„è„šæœ¬è¦æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ã€‚æœ‰äº›ç³»ç»Ÿæ²¡æœ‰è¿™ä¸ªç›®å½•ï¼Œæ¯”å¦‚Slackwareï¼Œæœ‰äº›è€çš„ç‰ˆæœ¬ä¹Ÿæ²¡æœ‰ã€‚åœ¨Redhat Fedoraä¸­æ¯”è¾ƒæ–°çš„ç‰ˆæœ¬ä¸­å­˜åœ¨ã€‚</span></span><br><span class="line">/etc/opt/           <span class="comment">#/opt/çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">/etc/X11/           <span class="comment">#X_Windowç³»ç»Ÿ(ç‰ˆæœ¬11)çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">/etc/sgml/          <span class="comment">#SGMLçš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">/etc/xml/           <span class="comment">#XMLçš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">/etc/skel/          ***** <span class="comment">#é»˜è®¤åˆ›å»ºç”¨æˆ·æ—¶ï¼ŒæŠŠè¯¥ç›®å½•æ‹·è´åˆ°å®¶ç›®å½•ä¸‹</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##usr/ç›®å½•</span></span><br><span class="line"></span><br><span class="line">/usr/X11R6          <span class="comment">#å­˜æ”¾X-Windowsçš„ç›®å½•ï¼›</span></span><br><span class="line">/usr/games          <span class="comment">#å­˜æ”¾ç€XteamLinuxè‡ªå¸¦çš„å°æ¸¸æˆï¼›</span></span><br><span class="line">/usr/doc            <span class="comment">#LinuxæŠ€æœ¯æ–‡æ¡£ï¼›</span></span><br><span class="line">/usr/include        <span class="comment">#ç”¨æ¥å­˜æ”¾Linuxä¸‹å¼€å‘å’Œç¼–è¯‘åº”ç”¨ç¨‹åºæ‰€éœ€è¦çš„å¤´æ–‡ä»¶ï¼›</span></span><br><span class="line">/usr/lib            <span class="comment">#å­˜æ”¾ä¸€äº›å¸¸ç”¨çš„åŠ¨æ€é“¾æ¥å…±äº«åº“å’Œé™æ€æ¡£æ¡ˆåº“ï¼›</span></span><br><span class="line">/usr/man            <span class="comment">#å¸®åŠ©æ–‡æ¡£æ‰€åœ¨çš„ç›®å½•ï¼›</span></span><br><span class="line">/usr/src            <span class="comment">#Linuxå¼€æ”¾çš„æºä»£ç ï¼Œå°±å­˜åœ¨è¿™ä¸ªç›®å½•ï¼Œçˆ±å¥½è€…ä»¬åˆ«æ”¾è¿‡å“¦ï¼›</span></span><br><span class="line">/usr/bin/           <span class="comment">#éå¿…è¦å¯æ‰§è¡Œæ–‡ä»¶ (åœ¨å•ç”¨æˆ·æ¨¡å¼ä¸­ä¸éœ€è¦)ï¼›é¢å‘æ‰€æœ‰ç”¨æˆ·ã€‚</span></span><br><span class="line">/usr/lib/           <span class="comment">#/usr/bin/å’Œ/usr/sbin/ä¸­äºŒè¿›åˆ¶æ–‡ä»¶çš„åº“ã€‚</span></span><br><span class="line">/usr/sbin/          <span class="comment">#éå¿…è¦çš„ç³»ç»ŸäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼šå¤§é‡ç½‘ç»œæœåŠ¡çš„å®ˆæŠ¤è¿›ç¨‹ã€‚</span></span><br><span class="line">/usr/share/         <span class="comment">#ä½“ç³»ç»“æ„æ— å…³ï¼ˆå…±äº«ï¼‰æ•°æ®ã€‚</span></span><br><span class="line">/usr/src/           <span class="comment">#æºä»£ç ,ä¾‹å¦‚:å†…æ ¸æºä»£ç åŠå…¶å¤´æ–‡ä»¶ã€‚</span></span><br><span class="line">/usr/X11R6/         <span class="comment">#X Windowç³»ç»Ÿç‰ˆæœ¬ 11, Release 6.</span></span><br><span class="line">/usr/local/         <span class="comment">#æœ¬åœ°æ•°æ®çš„ç¬¬ä¸‰å±‚æ¬¡ï¼Œå…·ä½“åˆ°æœ¬å°ä¸»æœºã€‚é€šå¸¸è€Œè¨€æœ‰è¿›ä¸€æ­¥çš„å­ç›®å½•ï¼Œä¾‹å¦‚ï¼šbin/ã€lib/ã€share/.è¿™æ˜¯æä¾›ç»™ä¸€èˆ¬ç”¨æˆ·çš„/usrç›®å½•ï¼Œåœ¨è¿™é‡Œå®‰è£…ä¸€èˆ¬çš„åº”ç”¨è½¯ä»¶ï¼›</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## /var/ç›®å½•  </span></span><br><span class="line"></span><br><span class="line">/var/log/message            ***** <span class="comment">#ç³»ç»Ÿæ—¥å¿—ä¿¡æ¯ï¼ŒæŒ‰å‘¨è‡ªåŠ¨è½®è¯¢</span></span><br><span class="line">/var/spool/cron/root        ***** <span class="comment">#å®šæ—¶å™¨é…ç½®æ–‡ä»¶ç›®å½•ï¼Œé»˜è®¤æŒ‰ç”¨æˆ·å‘½å</span></span><br><span class="line">/var/log/secure             ***** <span class="comment">#è®°å½•ç™»é™†ç³»ç»Ÿå­˜å–ä¿¡æ¯çš„æ–‡ä»¶ï¼Œä¸ç®¡è®¤è¯æˆåŠŸè¿˜æ˜¯è®¤è¯å¤±è´¥éƒ½ä¼šè®°å½•</span></span><br><span class="line">/var/log/wtmp               <span class="comment">#è®°å½•ç™»é™†è€…ä¿¡æ¯çš„æ–‡ä»¶ï¼Œlast,who,wå‘½ä»¤ä¿¡æ¯æ¥æºäºæ­¤</span></span><br><span class="line">/var/spool/clientmqueue/    <span class="comment">#å½“é‚®ä»¶æœåŠ¡æœªå¼€å¯æ—¶ï¼Œæ‰€æœ‰åº”å‘ç»™ç³»ç»Ÿç®¡ç†å‘˜çš„é‚®ä»¶éƒ½å°†å †æ”¾åœ¨æ­¤</span></span><br><span class="line">/var/spool/mail/            <span class="comment">#é‚®ä»¶ç›®å½•</span></span><br><span class="line">/var/tmp                    <span class="comment">#æ¯”/tmp å…è®¸çš„å¤§æˆ–éœ€è¦å­˜åœ¨è¾ƒé•¿æ—¶é—´çš„ä¸´æ—¶æ–‡ä»¶. (è™½ç„¶ç³»ç»Ÿç®¡ç†å‘˜å¯èƒ½ä¸å…è®¸/var/tmp æœ‰å¾ˆæ—§çš„æ–‡ä»¶.)</span></span><br><span class="line">/var/lib                    <span class="comment">#ç³»ç»Ÿæ­£å¸¸è¿è¡Œæ—¶è¦æ”¹å˜çš„æ–‡ä»¶.  </span></span><br><span class="line">/var/local                  <span class="comment">#/usr/local ä¸­å®‰è£…çš„ç¨‹åºçš„å¯å˜æ•°æ®(å³ç³»ç»Ÿç®¡ç†å‘˜å®‰è£…çš„ç¨‹åº).æ³¨æ„ï¼Œå¦‚æœå¿…è¦ï¼Œå³ä½¿æœ¬åœ°å®‰è£…çš„ç¨‹åºä¹Ÿä¼šä½¿ç”¨å…¶ä»–/var ç›®å½•ï¼Œä¾‹å¦‚/var/lock .  </span></span><br><span class="line">/var/lock                   <span class="comment">#é”å®šæ–‡ä»¶.è®¸å¤šç¨‹åºéµå¾ªåœ¨/var/lock ä¸­äº§ç”Ÿä¸€ä¸ªé”å®šæ–‡ä»¶çš„çº¦å®šï¼Œä»¥æ”¯æŒä»–ä»¬æ­£åœ¨ä½¿ç”¨æŸä¸ªç‰¹å®šçš„è®¾å¤‡æˆ–æ–‡ä»¶.å…¶ä»–ç¨‹åºæ³¨æ„åˆ°è¿™ä¸ªé”å®šæ–‡ä»¶ï¼Œå°†ä¸è¯•å›¾ä½¿ç”¨è¿™ä¸ªè®¾å¤‡æˆ–æ–‡ä»¶.</span></span><br><span class="line">/var/log/                   ***** <span class="comment">#å„ç§ç¨‹åºçš„Logæ–‡ä»¶ï¼Œç‰¹åˆ«æ˜¯login   (/var/log/wtmp logæ‰€æœ‰åˆ°ç³»ç»Ÿçš„ç™»å½•å’Œæ³¨é”€) å’Œsyslog (/var/log/messages é‡Œå­˜å‚¨æ‰€æœ‰æ ¸å¿ƒå’Œç³»ç»Ÿç¨‹åºä¿¡æ¯. /var/log é‡Œçš„æ–‡ä»¶ç»å¸¸ä¸ç¡®å®šåœ°å¢é•¿ï¼Œåº”è¯¥å®šæœŸæ¸…é™¤.  </span></span><br><span class="line">/var/run                    <span class="comment">#ä¿å­˜åˆ°ä¸‹æ¬¡å¼•å¯¼å‰æœ‰æ•ˆçš„å…³äºç³»ç»Ÿçš„ä¿¡æ¯æ–‡ä»¶.ä¾‹å¦‚ï¼Œ /var/run/utmp åŒ…å«å½“å‰ç™»å½•çš„ç”¨æˆ·çš„ä¿¡æ¯.</span></span><br><span class="line">/var/cache/                 <span class="comment">#åº”ç”¨ç¨‹åºç¼“å­˜æ•°æ®ã€‚è¿™äº›æ•°æ®æ˜¯åœ¨æœ¬åœ°ç”Ÿæˆçš„ä¸€ä¸ªè€—æ—¶çš„I/Oæˆ–è®¡ç®—ç»“æœã€‚åº”ç”¨ç¨‹åºå¿…é¡»èƒ½å¤Ÿå†ç”Ÿæˆ–æ¢å¤æ•°æ®ã€‚ç¼“å­˜çš„æ–‡ä»¶å¯ä»¥è¢«åˆ é™¤è€Œä¸å¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## /proc/ç›®å½•</span></span><br><span class="line"></span><br><span class="line">/proc/meminfo           ***** <span class="comment">#æŸ¥çœ‹å†…å­˜ä¿¡æ¯</span></span><br><span class="line">/proc/loadavg           ***** <span class="comment">#è¿˜è®°å¾— top ä»¥åŠ uptime å§ï¼Ÿæ²¡é”™ï¼ä¸Šå¤´çš„ä¸‰ä¸ªå¹³å‡æ•°å€¼å°±æ˜¯è®°å½•åœ¨æ­¤ï¼</span></span><br><span class="line">/proc/uptime            ***** <span class="comment">#å°±æ˜¯ç”¨ uptime çš„æ—¶å€™ï¼Œä¼šå‡ºç°çš„èµ„è®¯å•¦ï¼</span></span><br><span class="line">/proc/cpuinfo           ***** <span class="comment">#å…³äºå¤„ç†å™¨çš„ä¿¡æ¯ï¼Œå¦‚ç±»å‹ã€å‚å®¶ã€å‹å·å’Œæ€§èƒ½ç­‰ã€‚</span></span><br><span class="line">/proc/cmdline           <span class="comment">#åŠ è½½ kernel æ—¶æ‰€ä¸‹è¾¾çš„ç›¸å…³å‚æ•°ï¼æŸ¥é˜…æ­¤æ–‡ä»¶ï¼Œå¯äº†è§£ç³»ç»Ÿæ˜¯å¦‚ä½•å¯åŠ¨çš„ï¼</span></span><br><span class="line">/proc/filesystems       <span class="comment">#ç›®å‰ç³»ç»Ÿå·²ç»åŠ è½½çš„æ–‡ä»¶ç³»ç»Ÿç½—ï¼</span></span><br><span class="line">/proc/interrupts        <span class="comment">#ç›®å‰ç³»ç»Ÿä¸Šé¢çš„ IRQ åˆ†é…çŠ¶æ€ã€‚</span></span><br><span class="line">/proc/ioports           <span class="comment">#ç›®å‰ç³»ç»Ÿä¸Šé¢å„ä¸ªè£…ç½®æ‰€é…ç½®çš„ I/O ä½å€ã€‚</span></span><br><span class="line">/proc/kcore             <span class="comment">#è¿™ä¸ªå°±æ˜¯å†…å­˜çš„å¤§å°å•¦ï¼å¥½å¤§å¯¹å§ï¼ä½†æ˜¯ä¸è¦è¯»ä»–å•¦ï¼</span></span><br><span class="line">/proc/modules           <span class="comment">#ç›®å‰æˆ‘ä»¬çš„ Linux å·²ç»åŠ è½½çš„æ¨¡å—åˆ—è¡¨ï¼Œä¹Ÿå¯ä»¥æƒ³æˆæ˜¯é©±åŠ¨ç¨‹åºå•¦ï¼</span></span><br><span class="line">/proc/mounts            <span class="comment">#ç³»ç»Ÿå·²ç»æŒ‚è½½çš„æ•°æ®ï¼Œå°±æ˜¯ç”¨ mount è¿™ä¸ªå‘½ä»¤å‘¼å«å‡ºæ¥çš„æ•°æ®å•¦ï¼</span></span><br><span class="line">/proc/swaps             <span class="comment">#åˆ°åº•ç³»ç»ŸæŒ‚åŠ è½½çš„å†…å­˜åœ¨å“ªé‡Œï¼Ÿå‘µå‘µï¼ä½¿ç”¨æ‰çš„ partition å°±è®°å½•åœ¨æ­¤å•¦ï¼</span></span><br><span class="line">/proc/partitions        <span class="comment">#ä½¿ç”¨ fdisk -l ä¼šå‡ºç°ç›®å‰æ‰€æœ‰çš„ partition å§ï¼Ÿåœ¨è¿™ä¸ªæ–‡ä»¶å½“ä¸­ä¹Ÿæœ‰çºªå½•å–”ï¼</span></span><br><span class="line">/proc/pci               <span class="comment">#åœ¨ PCI æ±‡æµæ’ä¸Šé¢ï¼Œæ¯ä¸ªè£…ç½®çš„è¯¦ç»†æƒ…å†µï¼å¯ç”¨ lspci æ¥æŸ¥é˜…ï¼</span></span><br><span class="line">/proc/version           <span class="comment">#æ ¸å¿ƒçš„ç‰ˆæœ¬ï¼Œå°±æ˜¯ç”¨ uname -a æ˜¾ç¤ºçš„å†…å®¹å•¦ï¼</span></span><br><span class="line">/proc/bus/*             <span class="comment">#ä¸€äº›æ±‡æµæ’çš„è£…ç½®ï¼Œè¿˜æœ‰ Uç›˜çš„è£…ç½®ä¹Ÿè®°å½•åœ¨æ­¤å–”ï¼</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#/dev/ç›®å½•Â·</span></span><br><span class="line"></span><br><span class="line">/dev/hd[a-t]            <span class="comment">#IDEè®¾å¤‡</span></span><br><span class="line">/dev/sd[a-z]            <span class="comment">#SCSIè®¾å¤‡</span></span><br><span class="line">/dev/fd[0-7]            <span class="comment">#æ ‡å‡†è½¯é©±</span></span><br><span class="line">/dev/md[0-31]           <span class="comment">#è½¯raidè®¾å¤‡</span></span><br><span class="line">/dev/loop[0-7]          <span class="comment">#æœ¬åœ°å›ç¯è®¾å¤‡</span></span><br><span class="line">/dev/ram[0-15]          <span class="comment">#å†…å­˜</span></span><br><span class="line">/dev/null               <span class="comment">#æ— é™æ•°æ®æ¥æ”¶è®¾å¤‡,ç›¸å½“äºé»‘æ´</span></span><br><span class="line">/dev/zero               <span class="comment">#æ— é™é›¶èµ„æº</span></span><br><span class="line">/dev/tty[0-63]          <span class="comment">#è™šæ‹Ÿç»ˆç«¯</span></span><br><span class="line">/dev/ttyS[0-3]          <span class="comment">#ä¸²å£</span></span><br><span class="line">/dev/lp[0-3]            <span class="comment">#å¹¶å£</span></span><br><span class="line">/dev/console            <span class="comment">#æ§åˆ¶å°</span></span><br><span class="line">/dev/fb[0-31]           <span class="comment">#framebuffer</span></span><br><span class="line">/dev/cdrom              <span class="comment">#=&gt; /dev/hdc</span></span><br><span class="line">/dev/modem              <span class="comment">#=&gt; /dev/ttyS[0-9]</span></span><br><span class="line">/dev/pilot              <span class="comment">#=&gt; /dev/ttyS[0-9]</span></span><br><span class="line">/dev/random             <span class="comment">#éšæœºæ•°è®¾å¤‡</span></span><br><span class="line">/dev/urandom            <span class="comment">#éšæœºæ•°è®¾å¤‡</span></span><br></pre></td></tr></table></figure><h3 id="2-æŸ¥çœ‹ç›¸å…³å‘½ä»¤">2.æŸ¥çœ‹ç›¸å…³å‘½ä»¤</h3><h4 id="â‘ -cat">â‘  cat</h4><table><thead><tr><th>é€‰é¡¹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>-n</td><td>æ˜¾ç¤ºè¡Œå·</td></tr><tr><td>-T</td><td>ç”¨æ¥åŒºåˆ†æ–‡ä»¶ä¸­æ˜¯å¦æœ‰åˆ¶è¡¨ç¬¦</td></tr><tr><td>-E</td><td>åˆ¤æ–­æ–‡ä»¶ä¸­å†…å®¹æ¯ä¸€è¡Œç»“æŸä½ç½®</td></tr><tr><td>-A</td><td>ç›¸å½“äº-E -T</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## è¯­æ³•</span></span><br><span class="line"><span class="built_in">cat</span> [é€‰é¡¹]... [æ–‡ä»¶]...</span><br><span class="line"><span class="built_in">cat</span> [OPTION]... [FILE]...</span><br><span class="line"><span class="comment">## æŸ¥çœ‹/etc/passwdæ–‡ä»¶å†…å®¹</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> /etc/passwd</span><br><span class="line"><span class="comment">## æŸ¥çœ‹å¤šä¸ªæ–‡ä»¶å†…å®¹</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> 1.txt 2.txt</span><br><span class="line">123</span><br><span class="line">abc</span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> 2.txt 1.txt</span><br><span class="line">abc</span><br><span class="line">123</span><br><span class="line"><span class="comment">## æ ‡å‡†è¾“å‡ºï¼šå½“æ‰§è¡Œä¸€ä¸ªå‘½ä»¤åï¼Œå‘½ä»¤æ‰§è¡Œæ­£ç¡®ï¼Œæ‰€äº§ç”Ÿçš„ç»“æœï¼ˆåœ¨ç»ˆç«¯ä¸Šèƒ½çœ‹åˆ°çš„è¾“å‡ºç»“æœï¼‰</span></span><br><span class="line">OOMï¼š out of memory å†…å­˜æº¢å‡º</span><br><span class="line">OOM killer</span><br><span class="line"><span class="comment">## -nï¼šæ˜¾ç¤ºè¡Œå·</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> -n /etc/passwd</span><br><span class="line">1 root:x:0:0:root:/root:/bin/bash</span><br><span class="line">2 bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">3 daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">4 adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">5 lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line">6 <span class="built_in">sync</span>:x:5:0:<span class="built_in">sync</span>:/sbin:/bin/sync</span><br><span class="line">7 shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line">8 halt:x:7:0:halt:/sbin:/sbin/halt</span><br><span class="line">9 mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</span><br><span class="line">10 operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line"><span class="comment">## -Tï¼šç”¨æ¥åŒºåˆ†æ–‡ä»¶ä¸­æ˜¯å¦æœ‰åˆ¶è¡¨ç¬¦ï¼ˆä¸€ä¸ªåˆ¶è¡¨ç¬¦ç”¨^Iæ¥è¡¨ç¤ºï¼‰</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> -T 1.txt</span><br><span class="line">abc 123 789</span><br><span class="line">qwe^Iwww^I777</span><br><span class="line">a^I^I^I^I</span><br><span class="line">aaaaa</span><br><span class="line">bbbb</span><br><span class="line"><span class="comment">## -Eï¼šåˆ¤æ–­æ–‡ä»¶ä¸­å†…å®¹æ¯ä¸€è¡Œç»“æŸä½ç½®ï¼ˆæŸ¥çœ‹æ˜¯å¦æœ‰å¤šä½™çš„ç©ºæ ¼ï¼‰ç»“å°¾ç”¨$è¡¨ç¤º</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> -E 1.txt</span><br><span class="line">abc 123 789$</span><br><span class="line">$</span><br><span class="line">qwe www 777 $</span><br><span class="line">aaaa$</span><br><span class="line">$</span><br><span class="line">$</span><br><span class="line"><span class="comment">## -Aï¼šç›¸å½“äº-E -T</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> -A 1.txt</span><br><span class="line">abc 123 789$</span><br><span class="line">$</span><br><span class="line">qwe^Iwww^I777 $</span><br><span class="line">aaaa$</span><br><span class="line">$</span><br><span class="line">Tab åˆ¶è¡¨ç¬¦</span><br><span class="line">å›è½¦ æ¢è¡Œç¬¦</span><br><span class="line"><span class="comment">## å¾€æ–‡ä»¶ä¸­å†™å…¥å†…å®¹</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> &gt;&gt; suibian.txt &lt;&lt;<span class="string">EOF(ä¸ä¸€å®šæ˜¯Eofï¼Œèµ·åˆ°ç»ˆæ­¢ä½œç”¨)</span></span><br><span class="line"><span class="string">ä½†ä½¿é¾™åŸfreeå°†åœ¨</span></span><br><span class="line"><span class="string">xxx</span></span><br><span class="line"><span class="string">aaa</span></span><br><span class="line"><span class="string">ccc</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> &gt;&gt; gushi.txt &lt;&lt;<span class="string">zls ï¼ˆè¿™é‡Œå°±ä¸ä¸€å®šæ˜¯Eofï¼‰</span></span><br><span class="line"><span class="string">&gt; 1111</span></span><br><span class="line"><span class="string">&gt; 2222</span></span><br><span class="line"><span class="string">&gt; 3333</span></span><br><span class="line"><span class="string">&gt; zls</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> &gt; 1.txt &lt;&lt;<span class="string">EOF#ä¸€ä¸ª &gt; æ˜¯å†™å…¥æ–°å†…å®¹å¹¶è¦†ç›–</span></span><br><span class="line"><span class="string">&gt; abc</span></span><br><span class="line"><span class="string">&gt; EOF</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> 1.txt</span><br><span class="line">abc</span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> &gt;&gt; 1.txt &lt;&lt;<span class="string">EOF  #ä¸¤ä¸ª&gt;&gt;æ˜¯è¿½åŠ å†…å®¹ä¸è¦†ç›–</span></span><br><span class="line"><span class="string">&gt; 123</span></span><br><span class="line"><span class="string">&gt; 456</span></span><br><span class="line"><span class="string">&gt; EOF</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> 1.txt</span><br><span class="line">abc</span><br><span class="line">123</span><br><span class="line">456</span><br></pre></td></tr></table></figure><h4 id="â‘¡-tail-head">â‘¡ tail &amp; head</h4><p><strong>==tail==</strong></p><table><thead><tr><th>é€‰é¡¹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>-n</td><td>æŒ‡å®šæŸ¥çœ‹å¤šå°‘è¡Œ number</td></tr><tr><td>-f</td><td>follow è·Ÿéšï¼Œè·Ÿè¸ªæ–‡ä»¶æœ«å°¾</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## é»˜è®¤æƒ…å†µä¸‹tailæŸ¥çœ‹ä¸€ä¸ªæ–‡ä»¶çš„å10è¡Œå†…å®¹</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">tail</span> /etc/passwd</span><br><span class="line">ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin</span><br><span class="line">nobody:x:99:99:Nobody:/:/sbin/nologin</span><br><span class="line">systemd-network:x:192:192:systemd Network Management:/:/sbin/nologin</span><br><span class="line">dbus:x:81:81:System message bus:/:/sbin/nologin</span><br><span class="line">polkitd:x:999:998:User <span class="keyword">for</span> polkitd:/:/sbin/nologin</span><br><span class="line">sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin</span><br><span class="line">postfix:x:89:89::/var/spool/postfix:/sbin/nologin</span><br><span class="line">zls1:x:1000:1000::/home/zls1:/bin/bash</span><br><span class="line">apache:x:48:48:Apache:/usr/share/httpd:/sbin/nologin</span><br><span class="line">zls100:x:1001:1001::/home/zls100:/bin/bash</span><br><span class="line"><span class="comment">## æŸ¥çœ‹æŒ‡å®šè¡Œæ•°</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">tail</span> -n2 /etc/passwd</span><br><span class="line">apache:x:48:48:Apache:/usr/share/httpd:/sbin/nologin</span><br><span class="line">zls100:x:1001:1001::/home/zls100:/bin/bash</span><br><span class="line">[root@localhost ~]# <span class="built_in">tail</span> -2 /etc/passwd</span><br><span class="line">apache:x:48:48:Apache:/usr/share/httpd:/sbin/nologin</span><br><span class="line">zls100:x:1001:1001::/home/zls100:/bin/bash</span><br><span class="line"><span class="comment">## å®æ—¶è¿½è¸ªæ—¥å¿—æ–‡ä»¶æœ«å°¾tail -f == tailf</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">tail</span> -f 1.txt</span><br><span class="line">å¯ä»¥æŸ¥çœ‹å®æ—¶æ›´æ–°çš„æ—¥</span><br></pre></td></tr></table></figure><p><strong>==head==</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#é€‰é¡¹ï¼š-n</span></span><br><span class="line">ä½œç”¨ï¼šæŒ‡å®šæŸ¥çœ‹å¤šå°‘è¡Œ number</span><br><span class="line"><span class="comment">## é»˜è®¤æƒ…å†µä¸‹headæŸ¥çœ‹ä¸€ä¸ªæ–‡ä»¶çš„å‰10è¡Œå†…å®¹</span></span><br><span class="line"></span><br><span class="line">[root@localhost ~]# <span class="built_in">head</span> /etc/passwd</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"><span class="built_in">sync</span>:x:5:0:<span class="built_in">sync</span>:/sbin:/bin/sync</span><br><span class="line">shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line">halt:x:7:0:halt:/sbin:/sbin/halt</span><br><span class="line">mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</span><br><span class="line">operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line"><span class="comment">## æŸ¥çœ‹æŒ‡å®šè¡Œæ•°-n3/-n 3/-3éƒ½å¯ä»¥æŸ¥çœ‹å‰ä¸‰è¡Œå†…å®¹  nä¹Ÿå¯çœç•¥</span></span><br><span class="line"></span><br><span class="line">[root@localhost ~]# <span class="built_in">head</span> -n3 /etc/passwd</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">[root@localhost ~]# <span class="built_in">head</span> -n 3 /etc/passwd</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# <span class="built_in">head</span> -3 /etc/passwd</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br></pre></td></tr></table></figure><h4 id="â‘¢-more-less">â‘¢ more &amp; less</h4><p><strong>==more==</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@db04 ~]# more /etc/services</span><br></pre></td></tr></table></figure><p><strong>==less==</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@db04 ~]# less /etc/services</span><br><span class="line"><span class="comment">#æ˜¾ç¤ºè¡Œå·ï¼Œç¼ºé™·ï¼šæ–‡ä»¶å†…å®¹è¿‡å¤šä¸èƒ½æ˜¾ç¤ºæœ€åä¸€è¡Œçš„å†…å®¹ï¼Œéœ€è¦ä½¿ç”¨ç¿»é¡µé”®PageDownå‘åç¿»</span></span><br><span class="line">[root@db04 ~]# less -N /etc/services</span><br></pre></td></tr></table></figure><h4 id="â‘£-grep">â‘£ grep</h4><table><thead><tr><th>é€‰é¡¹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>-n</td><td>æ˜¾ç¤ºè¡Œå·</td></tr><tr><td>-A</td><td>After è¿‡æ»¤å…³é”®å­—å¹¶æ‰“å°å‡ºåNè¡Œ</td></tr><tr><td>-B</td><td>Before è¿‡æ»¤å…³é”®å­—å¹¶æ‰“å°å‡ºå‰Nè¡Œ</td></tr><tr><td>-C</td><td>Center è¿‡æ»¤å…³é”®å­—å¹¶æ‰“å°å‡ºå‰åNè¡Œ</td></tr><tr><td>-v</td><td>å–å</td></tr><tr><td>-o</td><td>åªæ˜¾ç¤ºå…³é”®å­—å†…å®¹</td></tr><tr><td>-i</td><td>å¿½ç•¥å¤§å°å†™</td></tr><tr><td>-w</td><td>ç²¾ç¡®åŒ¹é…,æ˜¾ç¤ºåŒ¹é…çš„è¿™ä¸€è¡Œ</td></tr><tr><td>-c</td><td>ç›¸å½“äºcountï¼Œç”¨äºç»Ÿè®¡è¡Œæ•°</td></tr><tr><td>-r/-R</td><td>é€’å½’æœç´¢ç›®å½•åŠç›®å½•ä¸‹å¾—æ–‡ä»¶</td></tr></tbody></table><table><thead><tr><th>å…³é”®å­—å¯ä»¥ä½¿ç”¨çš„ç¬¦å·</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>^</td><td>ä»¥â€¦å¼€å¤´</td></tr><tr><td>$</td><td>ä»¥â€¦ç»“å°¾     ^$å¯ä»¥è¡¨ç¤ºç©ºè¡Œ</td></tr><tr><td>.</td><td>ä»»æ„ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td>*</td><td>*å·å‰é¢çš„å•ä¸ªå­—ç¬¦åŒ¹é…0æ¬¡æˆ–å¤šæ¬¡</td></tr><tr><td>|</td><td>æ­£åˆ™è¡¨è¾¾å¼é‡Œé¢æˆ–è€…æ„æ€ï¼Œgrepé»˜è®¤ä¸æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ï¼Œéœ€è¦ç”¨-E</td></tr><tr><td>\b</td><td>è¾¹ç•Œç¬¦</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## è¯­æ³•ï¼š</span></span><br><span class="line">grep [é€‰é¡¹]... <span class="string">&#x27;å…³é”®å­—&#x27;</span> [æ–‡ä»¶å]...</span><br><span class="line"></span><br><span class="line"><span class="comment">## è¿‡æ»¤å…³é”®å­—</span></span><br><span class="line">[root@localhost ~]# grep <span class="string">&#x27;é£æ™¯&#x27;</span> zls.txt</span><br><span class="line">æ±Ÿå±±é£æ™¯ç¾å¦‚ç”»ï¼Œ</span><br><span class="line"></span><br><span class="line"><span class="comment">## è¿‡æ»¤å…³é”®å­—å¹¶æ˜¾ç¤ºè¡Œå·</span></span><br><span class="line">[root@localhost ~]# grep -n <span class="string">&#x27;root&#x27;</span> /etc/passwd</span><br><span class="line">1:root:x:0:0:root:/root:/bin/bash</span><br><span class="line">10:operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> zls.txt</span><br><span class="line">å§æ§½</span><br><span class="line">ä½œè€…ï¼šæ›¾è€æ¹¿</span><br><span class="line">æ±Ÿå±±é£æ™¯ç¾å¦‚ç”»ï¼Œ</span><br><span class="line">æœ¬æƒ³åŸè¯—èµ å¤©ä¸‹ã€‚</span><br><span class="line">å¥ˆä½•è‡ªå·±æ²¡æ–‡åŒ–ï¼Œ</span><br><span class="line">ä¸€å¥å§æ§½é£å¥½å¤§ã€‚</span><br><span class="line">å°±è¿™ä¹ˆåœ°å§ã€‚</span><br><span class="line">è°¢è°¢å¤§å®¶ã€‚</span><br><span class="line">ä¸€äºŒä¸‰å››äº”å…­ä¸ƒï¼Œ</span><br><span class="line">ä¸ƒå…­äº”å››ä¸‰äºŒä¸€ã€‚</span><br><span class="line"></span><br><span class="line"><span class="comment">## è¿‡æ»¤å‡ºzls.txtæ–‡ä»¶ä¸­ åŒ…å«ä¸€çš„è¡Œ</span></span><br><span class="line">[root@localhost ~]#grep <span class="string">&#x27;ä¸€&#x27;</span> zls.txt</span><br><span class="line">ä¸€å¥å§æ§½é£å¥½å¤§ã€‚</span><br><span class="line">ä¸€äºŒä¸‰å››äº”å…­ä¸ƒï¼Œ</span><br><span class="line">ä¸ƒå…­äº”å››ä¸‰äºŒä¸€ã€‚</span><br><span class="line"></span><br><span class="line"><span class="comment">## è¿‡æ»¤å‡ºzls.txtæ–‡ä»¶ä¸­ä»¥ä¸€å¼€å¤´çš„è¡Œ</span></span><br><span class="line">[root@localhost ~]#grep <span class="string">&#x27;^ä¸€&#x27;</span> zls.txtt</span><br><span class="line">ä¸€å¥å§æ§½é£å¥½å¤§ã€‚</span><br><span class="line">ä¸€äºŒä¸‰å››äº”å…­ä¸ƒï¼Œ</span><br><span class="line"></span><br><span class="line"><span class="comment">## è¿‡æ»¤å‡ºzls.txtæ–‡ä»¶ä¸­ä»¥ä¸€å¼€å¤´çš„è¡Œï¼Œå¹¶æ˜¾ç¤ºè¡Œå·</span></span><br><span class="line">[root@localhost ~]# grep -n <span class="string">&#x27;^ä¸€&#x27;</span> zls.txt</span><br><span class="line">6:ä¸€å¥å§æ§½é£å¥½å¤§ã€‚</span><br><span class="line">9:ä¸€äºŒä¸‰å››äº”å…­ä¸ƒï¼Œ</span><br><span class="line"></span><br><span class="line"><span class="comment">## è¿‡æ»¤å‡º/etc/passwdæ–‡ä»¶ä¸­ï¼Œä»¥loginç»“å°¾çš„è¡Œ</span></span><br><span class="line">[root@localhost ~]# grep <span class="string">&#x27;login$&#x27;</span> /etc/passwd</span><br><span class="line"></span><br><span class="line"><span class="comment">## è¿‡æ»¤å‡ºmailå…³é”®å­—æ‰€åœ¨è¡ŒåŠåä¸¤è¡Œå†…å®¹</span></span><br><span class="line">[root@localhost ~]# grep <span class="string">&#x27;mail&#x27;</span> -A 2 /etc/passwd</span><br><span class="line">mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</span><br><span class="line">operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line">games:x:12:100:games:/usr/games:/sbin/nologin</span><br><span class="line"></span><br><span class="line"><span class="comment">## è¿‡æ»¤å‡ºmailå…³é”®å­—æ‰€åœ¨è¡ŒåŠå‰ä¸¤è¡Œå†…å®¹</span></span><br><span class="line">[root@localhost ~]# grep -B 2 <span class="string">&#x27;mail&#x27;</span> /etc/passwd</span><br><span class="line">shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line">halt:x:7:0:halt:/sbin:/sbin/halt</span><br><span class="line">mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</span><br><span class="line"></span><br><span class="line"><span class="comment">## è¿‡æ»¤å‡ºmailå…³é”®å­—æ‰€åœ¨è¡ŒåŠå‰ä¸¤è¡Œå†…å®¹å’Œåä¸‰è¡Œå†…å®¹</span></span><br><span class="line">[root@localhost ~]# grep -A3 -B2 <span class="string">&#x27;mail&#x27;</span> /etc/passwd</span><br><span class="line">shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line">halt:x:7:0:halt:/sbin:/sbin/halt</span><br><span class="line">mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</span><br><span class="line">operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line">games:x:12:100:games:/usr/games:/sbin/nologin</span><br><span class="line">ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin</span><br><span class="line"></span><br><span class="line"><span class="comment">## ## è¿‡æ»¤å‡ºmailå…³é”®å­—æ‰€åœ¨è¡ŒåŠå‰ä¸¤è¡Œå†…å®¹å’Œåä¸¤è¡Œå†…å®¹</span></span><br><span class="line">[root@localhost ~]# grep -C2 <span class="string">&#x27;mail&#x27;</span> /etc/passwd</span><br><span class="line">shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line">halt:x:7:0:halt:/sbin:/sbin/halt</span><br><span class="line">mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</span><br><span class="line">operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line">games:x:12:100:games:/usr/games:/sbin/nologin</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="â‘¤-ls">â‘¤ ls</h4><table><thead><tr><th>é€‰é¡¹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>-l</td><td>æŸ¥çœ‹ç›®å½•ä¸‹æ–‡ä»¶çš„åå­—å’Œè¯¦ç»†ä¿¡æ¯</td></tr><tr><td>-a</td><td>æŸ¥çœ‹ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶åŒ…æ‹¬éšè—æ–‡ä»¶</td></tr><tr><td>-hï¼ˆä¸€èˆ¬é…åˆ-lä½¿ç”¨ï¼‰</td><td>ä»¥äººç±»å¯è¯»çš„æ–¹å¼æŸ¥çœ‹æ–‡ä»¶è¯¦ç»†ä¿¡æ¯</td></tr><tr><td>-tï¼ˆä¸€èˆ¬é…åˆ-lä½¿ç”¨ï¼‰</td><td>æŒ‰ç…§æ–‡ä»¶ä¿®æ”¹æ—¥æœŸæ’åºï¼Œæœ€æ–°çš„åœ¨æœ€ä¸Šé¢</td></tr><tr><td>-rï¼ˆä¸€èˆ¬é…åˆ-lä½¿ç”¨ï¼‰</td><td>reverseç¿»è½¬ï¼ˆå€’å™æ’åºï¼‰</td></tr><tr><td>-dï¼ˆä¸€èˆ¬é…åˆ-lä½¿ç”¨ï¼‰</td><td>åªæŸ¥çœ‹ç›®å½•æœ¬èº«ä¿¡æ¯ä¸æŸ¥çœ‹æ–‡ä»¶</td></tr><tr><td>-iï¼ˆä¸€èˆ¬é…åˆ-lä½¿ç”¨ï¼‰</td><td>æ˜¾ç¤ºinodeå·</td></tr><tr><td>-S(ä¸€èˆ¬é…åˆ-lä½¿ç”¨)</td><td>ä¾æ®å†…å®¹å¤§å°å°†æ–‡ä»¶æ’åºæ˜¾ç¤º</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">list <span class="comment">#åˆ—è¡¨</span></span><br><span class="line"><span class="comment">##  æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶å(ä¸åŒ…å«éšè—æ–‡ä»¶)</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">ls</span></span><br><span class="line">anaconda-ks.cfg  ip_host.sh  ip_host.sh~</span><br><span class="line"><span class="comment">##æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶çš„åå’Œè¯¦ç»†ä¿¡æ¯(ä¸åŒ…å«éšè—æ–‡ä»¶)</span></span><br><span class="line">-l use a long listing format ä½¿ç”¨ä¸€ä¸ªé•¿çš„åˆ—è¡¨æ ¼å¼</span><br><span class="line">[root@lb02 ~]# <span class="built_in">ls</span> -l</span><br><span class="line">total 12</span><br><span class="line">-rw-------. 1 root root 1447 Mar 27 12:11 anaconda-ks.cfg</span><br><span class="line">-rw-r--r--. 1 root root  377 Mar 27 23:50 ip_host.sh</span><br><span class="line">-rw-r--r--. 1 root root  366 Mar 27 23:33 ip_host.sh~</span><br><span class="line"></span><br><span class="line">[root@lb02 ~]# ll</span><br><span class="line">total 12</span><br><span class="line">-rw-------. 1 root root 1447 Mar 27 12:11 anaconda-ks.cfg</span><br><span class="line">-rw-r--r--. 1 root root  377 Mar 27 23:50 ip_host.sh</span><br><span class="line">-rw-r--r--. 1 root root  366 Mar 27 23:33 ip_host.sh~</span><br><span class="line"></span><br><span class="line"><span class="comment">## æŸ¥çœ‹æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶è¯¦ç»†ä¿¡æ¯ï¼ˆä¸åŒ…å«éšè—æ–‡ä»¶ï¼‰</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">ls</span> -l /etc/sysconfig/</span><br><span class="line">total 84</span><br><span class="line">-rw-r--r--. 1 root root  379 Mar 27 12:11 anaconda</span><br><span class="line">-rw-r--r--. 1 root root  483 Mar 27 12:10 authconfig</span><br><span class="line">drwxr-xr-x. 2 root root   43 Mar 27 12:07 cbq</span><br><span class="line">drwxr-xr-x. 2 root root    6 Oct 31  2018 console</span><br><span class="line"></span><br><span class="line"><span class="comment">#åœ¨linuxä¸­ï¼Œéšè—æ–‡ä»¶åå­—ä»¥&#x27;.&#x27;å¼€å¤´</span></span><br><span class="line"><span class="comment">## æŸ¥çœ‹æ‰€æœ‰æ–‡ä»¶åŒ…æ‹¬éšè—æ–‡ä»¶ï¼ˆå¤šä¸ªé€‰é¡¹å¯ä»¥åˆå¹¶æ‰§è¡Œï¼‰</span></span><br><span class="line">-aï¼Œ--all <span class="keyword">do</span> not ignore entries starting with . <span class="comment"># ä¸å¿½ç•¥ä»¥ç‚¹å¼€å¤´çš„æ–‡ä»¶</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">ls</span> -l -a   æˆ–è€…[root@lb02 ~]# <span class="built_in">ls</span> -la/ls -al</span><br><span class="line">[root@lb02 ~]# <span class="built_in">ls</span> -l -a</span><br><span class="line">total 48</span><br><span class="line">dr-xr-x---.  2 root root   195 Mar 27 23:50 .</span><br><span class="line">dr-xr-xr-x. 17 root root   224 Mar 27 12:10 ..</span><br><span class="line">-rw-------.  1 root root  1447 Mar 27 12:11 anaconda-ks.cfg</span><br><span class="line"></span><br><span class="line"><span class="comment">## ä»¥äººç±»å¯è¯»çš„æ–¹å¼æŸ¥çœ‹æ–‡ä»¶è¯¦ç»†ä¿¡æ¯ï¼ˆå¤§å°+å•ä½ é…åˆ-lä½¿ç”¨ï¼‰</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">ls</span> -l /etc/sysconfig/ebtables-config </span><br><span class="line">-rw-------. 1 root root 1390 Apr 11  2018 /etc/sysconfig/ebtables-config</span><br><span class="line">[root@lb02 ~]# <span class="built_in">ls</span> -hl /etc/sysconfig/ebtables-config </span><br><span class="line">-rw-------. 1 root root 1.4K Apr 11  2018 /etc/sysconfig/ebtables-config</span><br><span class="line"></span><br><span class="line"><span class="comment">## æŒ‰ç…§ä¿®æ”¹æ—¥æœŸæ’åºï¼ˆæœ€æ–°çš„åœ¨æœ€ä¸Šé¢ï¼‰</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">ls</span> -l    //ä¸æ’åº</span><br><span class="line">total 12</span><br><span class="line">-rw-------. 1 root root 1447 Mar 27 12:11 anaconda-ks.cfg</span><br><span class="line">-rw-r--r--. 1 root root  377 Mar 27 23:50 ip_host.sh</span><br><span class="line">-rw-r--r--. 1 root root  366 Mar 27 23:33 ip_host.sh~</span><br><span class="line">[root@lb02 ~]# <span class="built_in">ls</span> -lt</span><br><span class="line">total 12</span><br><span class="line">-rw-r--r--. 1 root root  377 Mar 27 23:50 ip_host.sh</span><br><span class="line">-rw-r--r--. 1 root root  366 Mar 27 23:33 ip_host.sh~</span><br><span class="line">-rw-------. 1 root root 1447 Mar 27 12:11 anaconda-ks.cfg</span><br><span class="line"></span><br><span class="line"><span class="comment">## æŒ‰ç…§ä¿®æ”¹æ—¶é—´ï¼Œå€’å™æ’åºï¼ˆæœ€æ–°çš„åœ¨æœ€ä¸‹é¢ï¼‰</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">ls</span> -ltr</span><br><span class="line">total 12</span><br><span class="line">-rw-------. 1 root root 1447 Mar 27 12:11 anaconda-ks.cfg</span><br><span class="line">-rw-r--r--. 1 root root  366 Mar 27 23:33 ip_host.sh~</span><br><span class="line">-rw-r--r--. 1 root root  377 Mar 27 23:50 ip_host.sh</span><br><span class="line"></span><br><span class="line"><span class="comment">## åªæŸ¥çœ‹ç›®å½•æœ¬èº«ï¼Œä¸æŸ¥çœ‹ç›®å½•ä¸‹é¢çš„æ‰€æœ‰æ–‡ä»¶</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">ls</span> -ld /etc/sysconfig</span><br><span class="line">drwxr-xr-x. 6 root root 4096 Mar 27 12:11 /etc/sysconfig</span><br></pre></td></tr></table></figure><h4 id="â‘¥-tree">â‘¥ tree</h4><table><thead><tr><th>é€‰é¡¹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>-L</td><td>æŒ‡å®šå±‚çº§æ˜¾ç¤ºç»“æ„</td></tr><tr><td>-d</td><td>åªæŸ¥çœ‹ç›®å½•ä¸æŸ¥çœ‹æ–‡ä»¶</td></tr><tr><td>-a</td><td>æ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶å’Œç›®å½•åŒ…æ‹¬éšè—æ–‡ä»¶</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## å‘½ä»¤æ‰¾ä¸åˆ°</span></span><br><span class="line">[root@localhost ~]# tree</span><br><span class="line">-bash: tree: <span class="built_in">command</span> not found</span><br><span class="line"><span class="comment">## å®‰è£…å‘½ä»¤</span></span><br><span class="line">[root@localhost ~]# yum install -y tree</span><br><span class="line"><span class="comment">#treeåŠŸèƒ½ï¼šä»¥æ ‘çŠ¶ç»“æ„æ˜¾ç¤ºæ–‡ä»¶å’Œç›®å½•</span></span><br><span class="line"><span class="comment">## æŸ¥çœ‹ç›®å½•ç»“æ„   </span></span><br><span class="line">[root@lb01 ~]# tree /usr/local/</span><br><span class="line">/usr/local/</span><br><span class="line">â”œâ”€â”€ bin</span><br><span class="line">â”œâ”€â”€ etc</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ applications</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ info</span><br><span class="line">â”‚Â Â  â””â”€â”€ man</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ man1</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ man1x</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ man2</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ man2x</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ man3</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ man9x</span><br><span class="line">â”‚Â Â      â””â”€â”€ mann</span><br><span class="line">â””â”€â”€ src</span><br><span class="line">32 directories, 0 files</span><br><span class="line"></span><br><span class="line"><span class="comment"># -Lï¼šlevel æŸ¥çœ‹æŒ‡å®šå±‚çº§çš„ç›®å½•ç»“æ„   å¦‚æœç›®å½•å±‚çº§å¤ªå¤šï¼Œå¯ä»¥æŸ¥çœ‹æŒ‡å®šå‡ å±‚ç›®å½•</span></span><br><span class="line">[root@lb01 ~]# tree -L 2 /usr/local/</span><br><span class="line"></span><br><span class="line"><span class="comment">## -dï¼šåªæŸ¥çœ‹ç›®å½•ä¸æŸ¥çœ‹æ–‡ä»¶ï¼ŒæŸ¥çœ‹æŒ‡å®šç›®å½•å±‚çº§çš„æ‰€æœ‰ç›®å½•</span></span><br><span class="line">[root@localhost ~]# tree -L 2 -d /etc/</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-å¢åˆ æ”¹æ“ä½œ">3.å¢åˆ æ”¹æ“ä½œ</h3><h4 id="â‘ -cp">â‘  cp</h4><table><thead><tr><th>é€‰é¡¹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>-rã€-R</td><td>é€’å½’å¤åˆ¶ç›®å½•ï¼ˆåŒ…æ‹¬ç›®å½•ä¸‹çš„æ‰€æœ‰å†…å®¹ï¼‰</td></tr><tr><td>-v</td><td>æ˜¾ç¤ºå¤åˆ¶çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¤åˆ¶è¿‡ç¨‹</td></tr><tr><td>-p</td><td>ä¿æŒæ–‡ä»¶å±æ€§</td></tr><tr><td>-a</td><td>å³ä¿æŒç›®å½•å±æ€§ï¼Œåˆå¯ä»¥é€’å½’æ‹·è´ç›®å½•</td></tr><tr><td>-i</td><td>è¯¢é—® ï¼ˆæ˜¯å¦è¦†ç›–ï¼‰</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">copy å¤åˆ¶ï¼Œæ‹·è´</span><br><span class="line"><span class="comment">#è¯­æ³•</span></span><br><span class="line">1.<span class="built_in">cp</span> [é€‰é¡¹]... [-T] æºæ–‡ä»¶ ç›®æ ‡ ï¼ˆå¤‡ä»½ï¼‰</span><br><span class="line">2.<span class="built_in">cp</span> [é€‰é¡¹]... æºæ–‡ä»¶... ç›®å½•</span><br><span class="line">3.<span class="built_in">cp</span> [é€‰é¡¹]... -t ç›®å½• æºæ–‡ä»¶...</span><br><span class="line"></span><br><span class="line"><span class="comment">## è¯­æ³•ä¸€ï¼šcp [é€‰é¡¹]... [-T] æºæ–‡ä»¶ ç›®æ ‡ ï¼ˆå¤‡ä»½ï¼‰</span></span><br><span class="line"><span class="built_in">cp</span> [OPTION]... [-T] SOURCE DEST</span><br><span class="line"><span class="comment">## å°†saomiao.shè„šæœ¬å¤åˆ¶åˆ°å½“å‰ç›®å½•ä¸‹å¹¶æ”¹åä¸º123</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> saomiao.sh 123</span><br><span class="line"><span class="comment">## å°†saomiao.shè„šæœ¬å¤åˆ¶åˆ°/optç›®å½•ä¸‹å¹¶æ”¹åä¸ºabc</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> saomiao.sh /opt/abc</span><br><span class="line"></span><br><span class="line"><span class="comment">## è¯­æ³•äºŒï¼šcp [é€‰é¡¹]... æºæ–‡ä»¶... ç›®å½•</span></span><br><span class="line"><span class="built_in">cp</span> [OPTION]... SOURCE... DIRECTORY</span><br><span class="line"><span class="comment">## å°†saomiao.shè„šæœ¬å¤åˆ¶åˆ°/tmpç›®å½•ä¸‹</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> saomiao.sh /tmp/</span><br><span class="line"><span class="comment">## å°†saomiao.shè„šæœ¬æ‹·è´åˆ°/tmpä¸‹å¹¶æ”¹åä¸º2.txtï¼Œè‹¥2.txtæ–‡ä»¶å·²å­˜åœ¨ä¼šè¯¢é—®ï¼Œæ˜¯å¦è¦è¦†ç›–</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> saomiao.sh /tmp/2.txt</span><br><span class="line"><span class="comment">## ä¸€æ¬¡æ€§å¤åˆ¶å¤šä¸ªæ–‡ä»¶</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> 123 saomiao.sh cheak_student.sh anaconda-ks.cfg /opt/</span><br><span class="line"><span class="comment">## æŠ¥é”™ç¤ºèŒƒ</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> 123 saomiao.sh cheak_student.sh anaconda-ks.cfg abcï¼ˆå¿…é¡»æ˜¯ç›®å½•ï¼Œä¸èƒ½æ˜¯æ–‡ä»¶ï¼‰</span><br><span class="line"><span class="built_in">cp</span>: target â€˜abcâ€™ is not a directory</span><br><span class="line"><span class="comment">## å¤åˆ¶ç›®å½•</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> -r /opt/ /tmp/å°†optç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶å¤åˆ¶åˆ°tmpä¸‹ï¼ŒåŒ…æ‹¬optç›®å½•</span><br><span class="line"><span class="comment">## æ”¹å</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> -r /opt/ /root/xxx</span><br><span class="line"><span class="comment">## å¤åˆ¶ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œä½†ä¸å¤åˆ¶ç›®å½•æœ¬èº«</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> -r /opt/* /tmp/</span><br><span class="line"><span class="comment">## å¤åˆ¶å¤šä¸ªæ–‡ä»¶    æ˜¾ç¤ºå¤åˆ¶è¿‡ç¨‹</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> -rv 123 anaconda-ks.cfg </span><br><span class="line">/tmp/</span><br><span class="line">â€˜123â€™ -&gt; â€˜/tmp/123â€™</span><br><span class="line">â€˜anaconda-ks.cfgâ€™ -&gt; â€˜/tmp/anaconda-ks.cfgâ€™</span><br><span class="line"></span><br><span class="line"><span class="comment">## ä¿æŒæ–‡ä»¶å±æ€§</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> -rp /home/zls1 /tmp/</span><br><span class="line"><span class="comment">## è¯­æ³•äºŒï¼šcp [é€‰é¡¹]... æºæ–‡ä»¶... ç›®å½•</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> -a /home/zls1 /tmp/</span><br><span class="line">----</span><br><span class="line"><span class="comment">## è¯­æ³•ä¸‰ï¼šcp [é€‰é¡¹]... -t ç›®å½• æºæ–‡ä»¶... (åäººç±»)</span></span><br><span class="line"><span class="built_in">cp</span> [OPTION]... -t DIRECTORY SOURCE...</span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> -t /tmp/ saomiao.sh</span><br><span class="line"></span><br><span class="line"><span class="comment">## æ€»ç»“ï¼š</span></span><br><span class="line">1.å½“å¤åˆ¶çš„ç›®æ ‡ä¸å­˜åœ¨æ—¶ï¼Œå°†æºæ–‡ä»¶å¤åˆ¶å‡ºæ¥å¹¶æ”¹åä¸ºç›®æ ‡å</span><br><span class="line">2.å½“å¤åˆ¶ç›®æ ‡å­˜åœ¨æ—¶ï¼Œä¸”æ˜¯ä¸€ä¸ªç›®å½•ï¼Œåˆ™ç›´æ¥å°†æ–‡ä»¶å¤åˆ¶åˆ°æŒ‡å®šçš„ç›®å½•ä¸‹ï¼ˆåå­—ä¸å˜ï¼‰</span><br><span class="line">3.å½“å¤åˆ¶ç›®æ ‡å­˜åœ¨æ—¶ï¼Œä¸”æ˜¯ä¸€ä¸ªæ™®é€šæ–‡ä»¶ï¼Œåˆ™æç¤ºæ˜¯å¦è¦è¦†ç›–ï¼Œè¾“å…¥yæ˜¯è¦†ç›–ï¼Œè¾“å…¥næ˜¯ä¸è¦†ç›–</span><br><span class="line">4.å½“å¤åˆ¶å¤šä¸ªæ–‡ä»¶æ—¶ï¼Œæœ€åä¸€ä¸ªå¿…é¡»å†™å·²å­˜åœ¨çš„ç›®å½•ï¼Œå¦åˆ™ä¼šæŠ¥é”™</span><br><span class="line">5.<span class="built_in">cp</span>å‘½ä»¤é»˜è®¤æƒ…å†µä¸‹æ— æ³•æ‹·è´ç›®å½•ï¼Œå¿…é¡»åŠ -ré€‰é¡¹ï¼Œé€’å½’å¤åˆ¶ç›®å½•</span><br></pre></td></tr></table></figure><h4 id="â‘¡-mv">â‘¡ mv</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">-iè¯¢é—®ï¼ˆæ˜¯å¦è¦è¦†ç›–ï¼‰</span><br><span class="line">move ç§»åŠ¨ï¼Œå‰ªåˆ‡</span><br><span class="line">1.<span class="built_in">mv</span> [é€‰é¡¹]... [-T] æºæ–‡ä»¶ ç›®æ ‡ï¼ˆé‡å‘½åï¼‰</span><br><span class="line">2.<span class="built_in">mv</span> [é€‰é¡¹]... æºæ–‡ä»¶... ç›®å½•</span><br><span class="line">3.<span class="built_in">mv</span> [é€‰é¡¹]... -t ç›®å½• æºæ–‡ä»¶... (åäººç±»)</span><br><span class="line"></span><br><span class="line"><span class="comment">## è¯­æ³•ä¸€ï¼šmv [é€‰é¡¹]... [-T] æºæ–‡ä»¶ ç›®æ ‡ï¼ˆé‡å‘½åï¼‰</span></span><br><span class="line"><span class="built_in">mv</span> [OPTION]... [-T] SOURCE DEST</span><br><span class="line"><span class="comment">## ç»™saomiao.shæ–‡ä»¶æ”¹åå†…å®¹è¦†ç›–å¹¶æ”¹åï¼Œæºæ–‡ä»¶æ¶ˆå¤±</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">mv</span> saomiao.sh zls.sh</span><br><span class="line"><span class="comment">## è¯­æ³•äºŒï¼šmv [é€‰é¡¹]... æºæ–‡ä»¶... ç›®å½•</span></span><br><span class="line"><span class="built_in">mv</span> [OPTION]... SOURCE... DIRECTORY</span><br><span class="line">[root@localhost ~]# <span class="built_in">mv</span> zls.sh /opt/</span><br><span class="line"><span class="comment">## è¦†ç›–æ–‡ä»¶</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">mv</span> nginx.conf 123</span><br><span class="line"><span class="built_in">mv</span>: overwrite â€˜123â€™? y</span><br><span class="line"><span class="comment">## ç§»åŠ¨å¤šä¸ªæ–‡ä»¶    ç§»åŠ¨æ–‡ä»¶åˆ°å½“å‰ç›®å½•</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">mv</span> /tmp/&#123;123,anaconda,ks.cfg,cheak_student.sh,nginx.conf.bak&#125; .</span><br><span class="line">[root@localhost ~]# ll</span><br><span class="line">total 8</span><br><span class="line">-rw-r--r--. 1 root root 0 Apr 1 19:18 123</span><br><span class="line">-rw-------. 1 root root 1379 Mar 21 20:58 anaconda-ks.cfg</span><br><span class="line">-rw-r--r--. 1 root root 392 Aug 11 2022 cheak_student.sh</span><br><span class="line">-rw-r--r--. 1 root root 0 Apr 1 19:18 nginx.conf.bak</span><br><span class="line"><span class="comment">## é”™è¯¯æ¼”ç¤º</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">mv</span> 123 anaconda-ks.cfg cheak_student.sh nginx.conf.bak abcåŒ<span class="built_in">cp</span>ï¼Œabcä¸æ˜¯ç›®å½•</span><br><span class="line"><span class="built_in">mv</span>: target â€˜abcâ€™ is not a directory</span><br><span class="line"></span><br><span class="line"><span class="comment">## æ€»ç»“ï¼š</span></span><br><span class="line">1.å½“ç§»åŠ¨çš„ç›®æ ‡ä¸å­˜åœ¨æ—¶ï¼Œå°†æºæ–‡ä»¶é‡å‘½å</span><br><span class="line">2.å½“ç§»åŠ¨ç›®æ ‡å­˜åœ¨æ—¶ï¼Œä¸”æ˜¯ä¸€ä¸ªç›®å½•ï¼Œåˆ™ç›´æ¥å°†æ–‡ä»¶å‰ªåˆ‡åˆ°æŒ‡å®šçš„ç›®å½•ä¸‹ï¼ˆåå­—ä¸å˜ï¼‰</span><br><span class="line">3.å½“ç§»åŠ¨ç›®æ ‡å­˜åœ¨æ—¶ï¼Œä¸”æ˜¯ä¸€ä¸ªæ™®é€šæ–‡ä»¶ï¼Œåˆ™æç¤ºæ˜¯å¦è¦è¦†ç›–ï¼Œè¾“å…¥yæ˜¯è¦†ç›–ï¼Œè¾“å…¥næ˜¯ä¸è¦†ç›–</span><br><span class="line">4.å½“ç§»åŠ¨å¤šä¸ªæ–‡ä»¶æ—¶ï¼Œæœ€åä¸€ä¸ªå¿…é¡»å†™å·²å­˜åœ¨çš„ç›®å½•ï¼Œå¦åˆ™ä¼šæŠ¥é”™</span><br><span class="line"><span class="comment">## è¯­æ³•ä¸‰ï¼šmv [é€‰é¡¹]... -t ç›®å½• æºæ–‡ä»¶... (åäººç±»)</span></span><br><span class="line"><span class="built_in">mv</span> [OPTION]... -t DIRECTORY SOURCE...</span><br></pre></td></tr></table></figure><h4 id="â‘¢-rm">â‘¢ rm</h4><table><thead><tr><th>é€‰é¡¹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>-i</td><td>è¯¢é—®ï¼ˆæ˜¯å¦è¦åˆ é™¤ï¼‰</td></tr><tr><td>-r</td><td>é€’å½’åˆ é™¤</td></tr><tr><td>-f</td><td>force å¼ºåˆ¶åˆ é™¤</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">remove åˆ é™¤ï¼ˆdeleteï¼‰</span><br><span class="line"><span class="comment">## è¯­æ³•ï¼šrm [é€‰é¡¹]... æ–‡ä»¶...</span></span><br><span class="line"><span class="built_in">rm</span> [OPTION]... FILE...</span><br><span class="line"></span><br><span class="line"><span class="comment">## åˆ é™¤æ–‡ä»¶</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">rm</span> 123</span><br><span class="line"></span><br><span class="line"><span class="comment">## åˆ é™¤ç›®å½•</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">rm</span> -r zls2</span><br><span class="line"></span><br><span class="line"><span class="comment">## åˆ é™¤ç›®å½•ä¸‹çš„æ‰€æœ‰å†…å®¹ï¼Œä¸åŒ…æ‹¬ç›®å½•æœ¬èº«</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">rm</span> -r zls2/*</span><br><span class="line"><span class="built_in">rm</span>: remove regular empty file â€˜123â€™? y</span><br><span class="line"></span><br><span class="line"><span class="comment">## å¼ºåˆ¶åˆ é™¤</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">rm</span> -rf zls2/</span><br><span class="line">[root@localhost ~]# <span class="built_in">rm</span> -fr /tmp/*</span><br><span class="line">1.<span class="built_in">rm</span>åˆ é™¤æ™®é€šæ–‡ä»¶çš„å‘½ä»¤ï¼Œé»˜è®¤åªèƒ½åˆ é™¤æ™®é€šæ–‡ä»¶</span><br><span class="line">[root@localhost ~]# <span class="built_in">rm</span> zls1</span><br><span class="line"><span class="built_in">rm</span>: cannot remove â€˜zls1â€™: Is a directory</span><br><span class="line">2.åˆ é™¤æ–‡ä»¶ï¼Œä¸æƒ³è¯¢é—®ï¼Œ<span class="built_in">rm</span> -f</span><br><span class="line">3.åˆ é™¤ç›®å½•ï¼Œä¸æƒ³è¯¢é—®ï¼Œ<span class="built_in">rm</span> -fr ã€ <span class="built_in">rm</span> -rf</span><br><span class="line"></span><br><span class="line"><span class="comment">## ä¸¤ç§è®©å‘½ä»¤ä¸èµ°åˆ«åçš„æ–¹æ³•ï¼šä¾‹å¦‚rm -iï¼ˆæé†’ï¼‰åˆ«åæ˜¯alias rm=&#x27;rm -i&#x27;ï¼Œå¦‚æœä¸æƒ³è®©rmèµ°åˆ«åæé†’</span></span><br><span class="line">1.åœ¨å‘½ä»¤å‰é¢åŠ \ï¼ˆè½¬ä¹‰ç¬¦ï¼‰[root@lb01 ~]# \<span class="built_in">rm</span> -r ac</span><br><span class="line">2.ä½¿ç”¨å‘½ä»¤çš„ç»å¯¹è·¯å¾„    æŸ¥çœ‹å‘½ä»¤çš„ç»å¯¹è·¯å¾„åœ¨å“ª<span class="built_in">which</span> <span class="built_in">rm</span>    /usr/bin/rm </span><br><span class="line">ä½¿ç”¨ç»å¯¹è·¯å¾„åˆ é™¤/usr/bin/rm -r ab  å°±æ²¡æœ‰æé†’æ˜¯å¦åˆ é™¤å³ä¸èµ°åˆ«å</span><br></pre></td></tr></table></figure><h4 id="â‘£-touch">â‘£ touch</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºæ™®é€šæ–‡ä»¶ï¼ˆå¯ç¼–è¾‘æ–‡ä»¶ï¼‰</span></span><br><span class="line"><span class="built_in">touch</span> ç›®æ ‡æ–‡ä»¶</span><br><span class="line"><span class="built_in">touch</span> [OPTION]... FILE...</span><br><span class="line"><span class="comment">## åˆ›å»ºå¤šä¸ªæ–‡ä»¶</span></span><br><span class="line">[root@www ~]# <span class="built_in">touch</span> 1.txt abc/2.txt /tmp/3.txt</span><br><span class="line"><span class="comment">## æŠ¥é”™ï¼šåˆ›å»ºæ–‡ä»¶å‰æï¼Œä¸Šä¸€çº§ç›®å½•å¿…é¡»å­˜åœ¨</span></span><br><span class="line">[root@www ~]# <span class="built_in">touch</span> /iskshda/1.txt</span><br><span class="line"><span class="built_in">touch</span>: cannot <span class="built_in">touch</span> â€˜/iskshda/1.txtâ€™: No such file or directory</span><br><span class="line"><span class="comment">## å½“åˆ›å»ºçš„ç›®æ ‡æ–‡ä»¶å·²ç»å­˜åœ¨æ—¶ï¼Œä¸ä¼šæŠ¥é”™ï¼Œä½†ä¼šæ›´æ–°ä¿®æ”¹æ—¶é—´</span></span><br><span class="line">[root@www ~]# <span class="built_in">touch</span> 1.txt</span><br><span class="line"></span><br><span class="line">1ï¼‰å½“åˆ›å»ºçš„ç›®æ ‡æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ™®é€šæ–‡ä»¶</span><br><span class="line">2ï¼‰å½“åˆ›å»ºçš„ç›®æ ‡æ–‡ä»¶å­˜åœ¨æ—¶ï¼Œåˆ™ä¿®æ”¹è¯¥æ–‡ä»¶çš„æ—¶é—´</span><br><span class="line">3ï¼‰å½“åˆ›å»ºçš„ç›®æ ‡æ˜¯ä¸€ä¸ªç›®å½•æ—¶ï¼Œåˆ™ä¿®æ”¹ç›®å½•çš„æ—¶é—´</span><br><span class="line"><span class="comment">#åœ¨linuxç³»ç»Ÿä¸­ï¼Œä¸¥æ ¼åŒºåˆ†å¤§å°å†™</span></span><br></pre></td></tr></table></figure><h4 id="â‘¤-mkdir">â‘¤ mkdir</h4><table><thead><tr><th>é€‰é¡¹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>-p</td><td>é€’å½’åˆ›å»ºï¼Œå¦‚æœç›®å½•å·²å­˜åœ¨åˆ™ä¸åˆ›å»ºï¼Œå¦‚æœç›®å½•ä¸å­˜åœ¨åˆ™åˆ›å»º</td></tr><tr><td>-v</td><td>æ˜¾ç¤ºåˆ›å»ºçš„è¯¦ç»†ä¿¡æ¯ï¼ˆåˆ›å»ºçš„è¿‡ç¨‹ï¼‰</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">make directory</span><br><span class="line"><span class="comment">## è¯­æ³•ï¼š</span></span><br><span class="line"><span class="built_in">mkdir</span> ç›®æ ‡ç›®å½•</span><br><span class="line"><span class="comment">#åŒæ—¶åˆ›å»ºå¤šä¸ªç›®å½•</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">mkdir</span> /abc /123 /456  æ¯ä¸ªç›®å½•è¦æœ‰ç©ºæ ¼</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ›å»ºå±‚çº§ç›®å½•</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">mkdir</span> -p /abc/123/456 789  789æ˜¯åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºçš„</span><br><span class="line"></span><br><span class="line"><span class="comment"># å½“è¦åˆ›å»ºçš„ç›®æ ‡ç›®å½•å·²ç»å­˜åœ¨æ—¶ ä¼šæŠ¥é”™</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">mkdir</span> a</span><br><span class="line"><span class="built_in">mkdir</span>: cannot create directory â€˜aâ€™: File exists</span><br><span class="line"></span><br><span class="line"><span class="comment">## æŸ¥çœ‹åˆ›å»ºè¿‡ç¨‹</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">mkdir</span> -pv a/b/c     </span><br><span class="line"><span class="built_in">mkdir</span>: created directory â€˜a/bâ€™   å› ä¸ºaå·²ç»å­˜åœ¨ï¼Œè‹¥ä¸å­˜åœ¨åˆ™ä¼šæœ‰<span class="built_in">mkdir</span>: created directory â€˜aâ€™</span><br><span class="line"><span class="built_in">mkdir</span>: created directory â€˜a/b/câ€™</span><br><span class="line"></span><br><span class="line"><span class="comment">## ä¸èƒ½åœ¨æ–‡ä»¶ä¸‹é¢åˆ›å»ºç›®å½•</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">mkdir</span> /etc/passwd/123</span><br><span class="line"><span class="built_in">mkdir</span>: cannot create directory â€˜/etc/passwd/123â€™: Not a directory     // ä¸æ˜¯ä¸€ä¸ªç›®å½•</span><br><span class="line"></span><br><span class="line"><span class="comment">## åˆ›å»ºå¤šä¸ªåºåˆ—ç›®å½•</span></span><br><span class="line">[root@lb01 ~]# <span class="built_in">mkdir</span> &#123;a..c&#125;</span><br><span class="line">[root@lb01 ~]# <span class="built_in">ls</span></span><br><span class="line">a  b  c</span><br><span class="line"></span><br><span class="line"><span class="comment">## æŒ‡å®šç›®å½•ä¸‹åˆ›å»ºå¹³çº§ç›®å½•</span></span><br><span class="line">[root@lb01 ~]#  <span class="built_in">mkdir</span> /tmp/&#123;a,b,c,d&#125;åœ¨/tmpä¸‹åˆ›å»ºa,b,c,då››ä¸ªç›®å½•</span><br><span class="line"></span><br><span class="line"><span class="comment">#-pï¼šé€’å½’åˆ›å»ºç›®å½•ï¼Œæ²¡æŠ¥é”™ï¼ˆå¦‚æœç›®å½•ä¸å­˜åœ¨ï¼Œå°±åˆ›å»ºï¼Œç›®å½•å­˜åœ¨ï¼Œå°±ä¸æ‰§è¡Œå‘½ä»¤ï¼‰</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">mkdir</span> -p 111/&#123;2,3&#125;/abcåˆ†åˆ«åœ¨111/2å’Œ111/3åˆ›å»ºabc</span><br><span class="line">ç›®å½•</span><br><span class="line"><span class="comment"># åˆ›å»ºç›®å½•ï¼š</span></span><br><span class="line">/tmp/a</span><br><span class="line">/tmp/b</span><br><span class="line">/tmp/1</span><br><span class="line">/tmp/2</span><br><span class="line">1.[root@www ~]# <span class="built_in">mkdir</span> &#123;/tmp/a,/tmp/b,/tmp/1,/tmp/2</span><br><span class="line"></span><br><span class="line">2.[root@www ~]# <span class="built_in">mkdir</span> /tmp/&#123;a,b,1,2&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="â‘¥-tr-æ›¿æ¢">â‘¥ tr æ›¿æ¢</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## tråªèƒ½æŒ‰ç…§å­—ç¬¦ ä¸€ä¸€å¯¹åº”å–æ›¿æ¢ï¼Œå¦‚æœå‡ºç°ç›¸åŒçš„å­—ç¬¦ï¼Œé‚£ä¹ˆåé¢çš„èµ‹å€¼ä¼šå°†å‰é¢çš„èµ‹å€¼è¦†ç›–</span></span><br><span class="line"><span class="built_in">tr</span> <span class="string">&#x27;è¢«æ›¿æ¢çš„å†…å®¹&#x27;</span> <span class="string">&#x27;æ›¿æ¢å†…å®¹&#x27;</span> &lt; æ–‡ä»¶å</span><br><span class="line">[root@localhost ~]# <span class="built_in">tr</span> <span class="string">&#x27;name&#x27;</span> <span class="string">&#x27;address&#x27;</span> &lt; 2.txt</span><br><span class="line">addr=10.0.0.100</span><br><span class="line">[root@localhost ~]# <span class="built_in">tr</span> <span class="string">&#x27;nameqws&#x27;</span> <span class="string">&#x27;address&#x27;</span> &lt; 2.txt</span><br><span class="line">address=10.0.0.100</span><br><span class="line"><span class="comment">## è¯­æ³•</span></span><br><span class="line">sed <span class="string">&#x27;s/è¢«æ›¿æ¢å†…å®¹/æ›¿æ¢å†…å®¹/g&#x27;</span> æ–‡ä»¶å</span><br><span class="line">[root@localhost ~]# sed <span class="string">&#x27;s///g&#x27;</span> 2.txt</span><br><span class="line">[root@localhost ~]# sed <span class="string">&#x27;s/name/address/g&#x27;</span> 2.txt</span><br><span class="line">address=10.0.0.100</span><br></pre></td></tr></table></figure><h3 id="4-æ–‡ä»¶å¤„ç†å‘½ä»¤">4.æ–‡ä»¶å¤„ç†å‘½ä»¤</h3><h4 id="â‘ -sort">â‘  sort</h4><table><thead><tr><th>é€‰é¡¹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>-k</td><td>æŒ‰ç…§æŒ‡å®šåˆ—è¿›è¡Œæ’åºï¼ˆé»˜è®¤ä»¥ç©ºæ ¼ä¸ºåˆ†éš”ç¬¦ï¼‰</td></tr><tr><td>-t</td><td>æŒ‡å®šæ–‡ä»¶çš„åˆ†éš”ç¬¦</td></tr><tr><td>-n</td><td>ä»¥é˜¿æ‹‰ä¼¯æ•°å­—çš„å½¢å¼è¿›è¡Œæ’åº</td></tr><tr><td>-r</td><td>reverse å€’å™æ’åº</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">è¯­æ³•ï¼š</span><br><span class="line"><span class="built_in">sort</span> [é€‰é¡¹]... [æ–‡ä»¶]...</span><br><span class="line"><span class="comment">## æ’åº1.txtæ–‡ä»¶</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">sort</span> 1.txt</span><br><span class="line">a:4</span><br><span class="line">b:3</span><br><span class="line">c:2</span><br><span class="line">d:1</span><br><span class="line">e:5</span><br><span class="line">f:11</span><br><span class="line">æ€»ç»“ï¼š</span><br><span class="line">1ï¼‰é»˜è®¤æƒ…å†µä¸‹ <span class="built_in">sort</span>æŒ‰ç…§æ–‡ä»¶æ¯ä¸€è¡Œçš„é¦–å­—æ¯è¿›è¡Œæ’åº</span><br><span class="line">2ï¼‰é»˜è®¤æƒ…å†µä¸‹ åœ¨<span class="built_in">sort</span>çœ¼é‡Œåˆ†éš”ç¬¦åªæœ‰ç©ºæ ¼</span><br><span class="line">3ï¼‰åœ¨<span class="built_in">sort</span>å‘½ä»¤ä¸­ï¼Œåˆ†éš”ç¬¦ï¼Œå¿…é¡»æ˜¯ä¸€ä¸ªå­—ç¬¦ï¼Œä¸èƒ½ä¸ºç©º</span><br><span class="line"><span class="comment">## å¦‚æœç¬¬å››åˆ—é»˜è®¤ç›¸åŒï¼Œè¿˜å¯ä»¥åŠ ä¸€ä¸ª-k2å†ä»¥ç¬¬äºŒåˆ—æ’åº</span></span><br><span class="line"><span class="built_in">sort</span> -k2 -k4 11.txt</span><br></pre></td></tr></table></figure><h4 id="â‘¡-uniq-å»é‡">â‘¡ uniq å»é‡</h4><table><thead><tr><th>é€‰é¡¹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>-c</td><td>ç»Ÿè®¡é‡å¤æ¬¡æ•°ï¼Œå¹¶æ˜¾ç¤º</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">uniq</span> [é€‰é¡¹]... [æ–‡ä»¶]...</span><br><span class="line">å‰ææ¡ä»¶ï¼šé‡å¤è¡Œçš„å†…å®¹ï¼Œå¿…é¡»æŒ¨ç€ï¼Œå¦åˆ™æ— æ³•å»é‡</span><br><span class="line"><span class="comment">## æ— æ³•å»é‡</span></span><br><span class="line">abc</span><br><span class="line">123</span><br><span class="line">abc</span><br><span class="line">123</span><br><span class="line"><span class="comment">## å¯ä»¥å»é‡</span></span><br><span class="line">abc</span><br><span class="line">abc</span><br><span class="line">123</span><br><span class="line">123</span><br><span class="line"><span class="comment">## åªå»é‡</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> uniq.txt</span><br><span class="line">abc</span><br><span class="line">123</span><br><span class="line">abc</span><br><span class="line">123</span><br><span class="line">[root@localhost ~]# <span class="built_in">sort</span> uniq.txt |<span class="built_in">uniq</span></span><br><span class="line">123</span><br><span class="line">abc</span><br><span class="line"><span class="comment">## å»é‡å¹¶ç»Ÿè®¡é‡å¤æ¬¡æ•°</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">sort</span> uniq.txt|<span class="built_in">uniq</span> -c</span><br><span class="line">2 123</span><br><span class="line">2 abc</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="â‘¢-cut-æˆªå–">â‘¢ cut æˆªå–</h4><table><thead><tr><th>é€‰é¡¹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>-d</td><td>æŒ‡å®šåˆ†éš”ç¬¦</td></tr><tr><td>-f</td><td>æŒ‡å®šåŒºåŸŸ</td></tr><tr><td>-n</td><td>æŒ‡å®šè¡Œ</td></tr><tr><td>-c</td><td>æŒ‰ç…§å­—ç¬¦æˆªå–</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¯­æ³•</span></span><br><span class="line"><span class="built_in">cut</span> OPTION... [FILE]...</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# <span class="built_in">cut</span> -d <span class="string">&#x27; &#x27;</span> -f 6 4.txt  </span><br><span class="line"><span class="comment">#æˆªå–ä»¥ç©ºæ ¼ä¸ºåˆ†éš”ç¬¦ï¼Œç¬¬6åˆ—å†…å®¹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#-få¯ä»¥æˆªå–å¤šæ®µï¼Œ-f </span></span><br><span class="line">[root@lb01 ~]# ifconfig ens33|grep -w <span class="string">&#x27;inet&#x27;</span>|<span class="built_in">cut</span> -d <span class="string">&#x27; &#x27;</span> -f 10,13</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# <span class="built_in">cut</span> -c 9-10 4.txt</span><br><span class="line"><span class="comment">#æˆªå–ä»¥å­—ç¬¦æ¥ç®—ç¬¬9-10ä¸ºå†…å®¹ï¼ˆéœ€è¦æ•°å­—ç¬¦æ•°ï¼Œä¸å¥½ç”¨ï¼‰</span></span><br><span class="line">ä½¿ç”¨awkå‘½ä»¤æˆªå–ä½¿ç”¨ç¤ºä¾‹</span><br><span class="line">[root@lb02 ~]# ip a|awk -F <span class="string">&#x27;[ /]&#x27;</span> <span class="string">&#x27;NR==9&#123;print $6&#125;&#x27;</span></span><br><span class="line">10.0.0.6</span><br><span class="line">æ³¨æ„ï¼š</span><br><span class="line">1ï¼‰<span class="built_in">cut</span>é»˜è®¤æ²¡æœ‰åˆ†éš”ç¬¦ï¼Œå¿…é¡»æŒ‡å®š</span><br></pre></td></tr></table></figure><h4 id="â‘£-wc-ç»Ÿè®¡">â‘£ wc ç»Ÿè®¡</h4><table><thead><tr><th>é€‰é¡¹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>-l</td><td>line ç»Ÿè®¡è¡Œæ•°</td></tr><tr><td>-w</td><td>word ç»Ÿè®¡å•è¯æ•°é‡</td></tr><tr><td>-c</td><td>char ç»Ÿè®¡å­—ç¬¦æ•°é‡</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">wc</span> [option]... file...</span><br><span class="line"><span class="comment">## ç»Ÿè®¡æ–‡ä»¶çš„ è¡Œæ•° å•è¯æ•° å­—ç¬¦æ•°</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">wc</span> /etc/services</span><br><span class="line">11176 61033 670293 /etc/services</span><br><span class="line">[root@localhost ~]# <span class="built_in">wc</span> -l /etc/services</span><br><span class="line">11176 /etc/services</span><br><span class="line">[root@localhost ~]# <span class="built_in">wc</span> -w /etc/services</span><br><span class="line">61033 /etc/services</span><br><span class="line">[root@localhost ~]# <span class="built_in">wc</span> -c /etc/services</span><br><span class="line">670293 /etc/services</span><br><span class="line"><span class="comment">## éœ€è¦ç»Ÿè®¡çš„å†…å®¹ï¼Œä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œå·¦è¾¹æ˜¯ä¸€ä¸ªäººå‘½ä»¤è¾“å‡ºç»“æœå¯ä»¥éœ€è¦ä½¿ç”¨ç®¡é“ç¬¦</span></span><br><span class="line">[root@localhost ~]# ifconfig |<span class="built_in">wc</span> -w</span><br><span class="line">108</span><br><span class="line">[root@localhost ~]# ip a |<span class="built_in">wc</span> -w</span><br></pre></td></tr></table></figure><h4 id="â‘¤-wget-curl-ä¸‹è½½">â‘¤ wget &amp; curl ä¸‹è½½</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## ä¸‹è½½</span></span><br><span class="line">- O æŒ‡å®šä¸‹è½½è·¯å¾„ï¼Œä¹Ÿå¯ä»¥ç»™ä¸‹è½½çš„æ”¹å</span><br><span class="line"></span><br><span class="line">wget å¯ä»¥ç”¨å¤–ç½‘ä¸‹è½½ä¸œè¥¿åˆ°æœåŠ¡å™¨ä¸­</span><br><span class="line">-bash: wget: <span class="built_in">command</span> not foundæ²¡æœ‰æ‰¾åˆ°wgetå‘½ä»¤</span><br><span class="line">[root@localhost ~]# yum install -y wget</span><br><span class="line">[root@localhost ~]# wget https://dldir1.qq.com/qqfile/qq/QQNT/Linux/QQ_3.2.7_240401_x86_64_01.rpm</span><br><span class="line"></span><br><span class="line"><span class="comment">##æœåŠ¡å™¨ä¸Šä¼ ä¸‹è½½</span></span><br><span class="line">[root@localhost ~]# yum install -y lrzsz</span><br><span class="line"><span class="comment">## è™šæ‹Ÿæœºæ–‡ä»¶ä¸‹è½½åˆ°ç‰©ç†æœº</span></span><br><span class="line">[root@localhost ~]# sz w700d1q75cms.jpg</span><br><span class="line"><span class="comment">## ç‰©ç†æœºæ–‡ä»¶ä¸Šä¼ åˆ°è™šæ‹Ÿæœº</span></span><br><span class="line">[root@localhost ~]# rz</span><br><span class="line"></span><br><span class="line">curl -o é“¾æ¥ å¯ä»¥æŒ‡å®šä¸‹è½½è·¯å¾„ï¼Œè¿˜æœ‰å¯ä»¥ç»™ä¸‹è½½çš„æ–‡ä»¶æ”¹å</span><br></pre></td></tr></table></figure><h4 id="6-æ–‡ä»¶å±æ€§">6.æ–‡ä»¶å±æ€§</h4><table><thead><tr><th>æ–‡ä»¶å­—ç¬¦ç±»å‹</th><th>æ–‡ä»¶ç±»å‹</th></tr></thead><tbody><tr><td>-</td><td>file æ™®é€šæ–‡ä»¶</td></tr><tr><td>d</td><td>directory ç›®å½•</td></tr><tr><td>c</td><td>char å­—ç¬¦è®¾å¤‡</td></tr><tr><td>b</td><td>block å—è®¾å¤‡</td></tr><tr><td>l</td><td>link é“¾æ¥æ–‡ä»¶</td></tr><tr><td>s</td><td>socket å®‰å…¨ ï¼ˆå¥—æ¥å­—ï¼‰æ–‡ä»¶</td></tr><tr><td>p</td><td>pipe ç®¡é“æ–‡ä»¶</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ–‡ä»¶ç±»å‹ æ–‡ä»¶æƒé™rï¼šread è¯» wï¼šwrite å†™ xï¼šexecuteæ‰§è¡Œ </span></span><br><span class="line">             ç¡¬é“¾æ¥æ•° æ‰€å±ç”¨æˆ· æ‰€å±ç”¨æˆ·ç»„ æ–‡ä»¶å¤§å°      æ—¶é—´        æ–‡ä»¶å</span><br><span class="line">- rw-r--r--.    1     root     root       289    Apr 7 16:40     11.txt</span><br><span class="line">d rwxr-xr-x.    4     root     root       41     Apr 3 18:04     zls</span><br><span class="line"><span class="comment">## æ–‡ä»¶ç±»å‹</span></span><br><span class="line">[root@localhost ~]# ll /dev/null -d</span><br><span class="line">crw-rw-rw-. 1 root root 1, 3 Apr 7 16:21 /dev/null</span><br><span class="line">[root@localhost ~]# ll /dev/sda1</span><br><span class="line">brw-rw----. 1 root disk 8, 1 Apr 7 16:21 /dev/sda1</span><br><span class="line">[root@localhost ~]# ll /run/systemd/initctl/fifo</span><br><span class="line">prw-------. 1 root root 0 Apr 7 16:21 /run/systemd/initctl/fifo</span><br><span class="line">[root@localhost ~]# ll /dev/log</span><br><span class="line">srw-rw-rw-. 1 root root 0 Apr 7 16:21 /dev/log</span><br><span class="line">[root@localhost ~]# ll -d zls/</span><br><span class="line">drwxr-xr-x. 4 root root 41 Apr 3 18:04 zls/</span><br><span class="line">[root@localhost ~]# ll</span><br><span class="line">-rw-r--r--. 1 root root 289 Apr 7 16:40 11.txt</span><br></pre></td></tr></table></figure><h5 id="â‘ -æŸ¥çœ‹æ–‡ä»¶ç±»å‹">â‘  æŸ¥çœ‹æ–‡ä»¶ç±»å‹</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ll *.jpg</span><br><span class="line">-rw-r--r--. 1 root root 20735 Mar 13 09:08 w700d1q75cms.jpg</span><br><span class="line">-rw-r--r--. 1 root root 4 Apr 7 19:50 zls.jpg</span><br><span class="line">[root@localhost ~]# file w700d1q75cms.jpg</span><br><span class="line">w700d1q75cms.jpg: JPEG image data, EXIF standard</span><br><span class="line">[root@localhost ~]# file zls.jpg</span><br><span class="line">zls.jpg: empty</span><br><span class="line">[root@localhost ~]# <span class="built_in">echo</span> 111 &gt; zls.jpg</span><br><span class="line">[root@localhost ~]# file zls.jpg</span><br><span class="line">zls.jpg: ASCII text</span><br><span class="line"><span class="comment">## æŸ¥çœ‹æ–‡ä»¶ç±»å‹</span></span><br><span class="line">[root@localhost ~]# file /dev/null</span><br><span class="line">/dev/null: character special</span><br><span class="line">[root@localhost ~]# file /dev/sda1</span><br><span class="line">/dev/sda1: block special</span><br><span class="line">[root@localhost ~]# file /run/systemd/initctl/fifo</span><br><span class="line">/run/systemd/initctl/fifo: fifo (named pipe)</span><br><span class="line">[root@localhost ~]# file /dev/log</span><br><span class="line">/dev/log: socket</span><br><span class="line">[root@localhost ~]# file /root/zls</span><br><span class="line">/root/zls: directory</span><br><span class="line"><span class="comment">##æ³¨æ„: Linuxæ–‡ä»¶æ‰©å±•åä¸ä»£è¡¨ä»»ä½•å«ä¹‰, ä»…ä»…æ˜¯ä¸ºäº†è¿ç»´äººå‘˜ä¾¿äºè¯†åˆ«</span></span><br></pre></td></tr></table></figure><h5 id="â‘¡-ç³»ç»Ÿé“¾æ¥æ–‡ä»¶">â‘¡ ç³»ç»Ÿé“¾æ¥æ–‡ä»¶</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">æ–‡ä»¶æœ‰æ–‡ä»¶åå’Œæ•°æ®ï¼Œåœ¨Linuxä¸Šè¢«åˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ï¼šç”¨æˆ·æ•°æ®(user data)ä¸å…ƒæ•°æ®(metadata)</span><br><span class="line"></span><br><span class="line">ç”¨æˆ·æ•°æ®ï¼šæ–‡ä»¶æ•°æ®å—(data block),æ•°æ®å—æ˜¯è®°å½•æ–‡ä»¶çœŸå®å†…å®¹çš„åœ°æ–¹ï¼Œæˆ‘ä»¬å°†å…¶ç§°ä¸º#Block</span><br><span class="line">å…ƒæ•°æ®ï¼šæ–‡ä»¶çš„é™„åŠ å±æ€§ï¼Œä¾‹å¦‚ï¼šæ–‡ä»¶å¤§å°ï¼Œåˆ›å»ºæ—¶é—´ï¼Œå±ç»„ï¼Œå±ä¸»ç­‰ï¼Œæˆ‘ä»¬ç§°å…¶ä¸º#Inode</span><br><span class="line">åœ¨Linuxä¸­ï¼Œinodeæ˜¯æ–‡ä»¶å…ƒæ•°æ®çš„ä¸€éƒ¨åˆ†ï¼Œä½†å…¶å¹¶ä¸åŒ…å«æ–‡ä»¶åï¼Œinodeå·å³ç´¢å¼•èŠ‚ç‚¹å·</span><br><span class="line">æ–‡ä»¶åä»…æ˜¯ä¸ºäº†æ–¹ä¾¿äººä»¬çš„è®°å¿†å’Œä½¿ç”¨ï¼Œç³»ç»Ÿæˆ–è€…ç¨‹åºé€šè¿‡inodeå·å¯»æ‰¾æ­£ç¡®çš„æ–‡ä»¶æ•°æ®å—ã€‚</span><br><span class="line"></span><br><span class="line"><span class="comment">#inodeæè¿°</span></span><br><span class="line">åœ¨Linuxä¸­ï¼Œinodeï¼ˆç´¢å¼•èŠ‚ç‚¹ï¼‰æ˜¯æ–‡ä»¶ç³»ç»Ÿä¸­çš„ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œç”¨äºå­˜å‚¨æ–‡ä»¶æˆ–ç›®å½•çš„å…ƒæ•°æ®ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ–‡ä»¶ç±»å‹ã€æƒé™ã€æ‰€æœ‰è€…ã€å¤§å°ã€æ•°æ®å—çš„ä½ç½®ç­‰ã€‚å®ƒé€šè¿‡ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ç¬¦æ¥æ ‡è¯†æ–‡ä»¶æˆ–ç›®å½•ï¼Œå¹¶ä¸”åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­å…·æœ‰å›ºå®šçš„ä½ç½®ã€‚ç®€è€Œè¨€ä¹‹ï¼Œinodeæ˜¯æ–‡ä»¶ç³»ç»Ÿä¸­ç”¨äºæè¿°æ–‡ä»¶æˆ–ç›®å½•å±æ€§çš„æ•°æ®ç»“æ„ã€‚</span><br><span class="line"></span><br><span class="line"><span class="comment">#å…ƒæ•°æ®ï¼šç”¨æ¥æè¿°æ•°æ®çš„æ•°æ®</span></span><br><span class="line"><span class="comment">#çœŸå®æ•°æ®ï¼šç”¨æˆ·äº§ç”Ÿçš„æ•°æ®ï¼ˆæ–‡ä»¶å†…å®¹ï¼‰</span></span><br><span class="line"><span class="comment">#inode:ç”¨äºå­˜å‚¨æ–‡ä»¶æˆ–ç›®å½•å…ƒæ•°æ®ä¿¡æ¯çš„æ•°æ®ç»“æ„ã€‚</span></span><br><span class="line"><span class="comment">#block:ç”¨äºå­˜æ”¾ç”¨æˆ·çœŸå®æ•°æ®çš„éƒ¨åˆ†</span></span><br><span class="line"><span class="built_in">cat</span> 1.txt</span><br><span class="line">aaa</span><br><span class="line">-rw-r--r--. 1 root root   583919 Oct 29 02:33 1.txt  &gt;&gt;==å…ƒæ•°æ®inode</span><br><span class="line">aaa çœŸå®æ•°æ®   Block</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="â‘¢-æ–‡ä»¶è¯»å–æµç¨‹">â‘¢ æ–‡ä»¶è¯»å–æµç¨‹</h5><p><img src="https://cos.lukme.top/Pic/image-20240407164513997.png" alt="image-20240407164513997"></p><h5 id="â‘£-blockä»‹ç»">â‘£ blockä»‹ç»</h5><p><img src="https://cos.lukme.top/Pic/image-20240407164729805.png" alt="image-20240407164729805"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">blocké»˜è®¤å¤§å°ä¸º4k</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç£ç›˜å­˜å‚¨æ•°æ®ä¼šè¢«åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š</span></span><br><span class="line">ä¸€éƒ¨åˆ†å­˜å‚¨å…ƒæ•°æ®ï¼Œå­˜å‚¨å…ƒæ•°æ®çš„éƒ¨åˆ†å«åšinodeï¼Œæ¯ä¸ªæ–‡ä»¶éƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„inodeå·ï¼Œè¿™ä¸ªinodeå·å¯ä»¥ç†è§£ä¸ºæ–‡ä»¶å­˜å‚¨åœ¨ç£ç›˜ä¸Šçš„æˆ¿é—´å·</span><br><span class="line">ä¸€éƒ¨åˆ†å­˜å‚¨çœŸå®æ•°æ®ï¼Œå­˜å‚¨çœŸå®æ•°æ®çš„éƒ¨åˆ†å«åšblockï¼Œä¸€ä¸ªblocké»˜è®¤æ˜¯4k</span><br><span class="line"></span><br><span class="line"><span class="comment">#  å¦‚ä¸Šå›¾ï¼Œå½“å­˜æ”¾çš„ä¸€ä¸ªblockä¸è¶³4kæ—¶ï¼Œå†æ¬¡å­˜æ–°æ–‡ä»¶ä¸ä¼šå ç”¨ä¸Šæ¬¡ä¸è¶³4kçš„block</span></span><br></pre></td></tr></table></figure><h5 id="â‘¤-è½¯é“¾æ¥">â‘¤ è½¯é“¾æ¥</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## è½¯é“¾æ¥çš„åˆ›å»ºæ–¹å¼ lnï¼ˆlinkï¼‰</span></span><br><span class="line">è½¯é“¾æ¥ ==&gt; ç¬¦å·é“¾æ¥</span><br><span class="line">soft_link symbolic <span class="built_in">link</span></span><br><span class="line"><span class="built_in">ln</span> -s æºæ–‡ä»¶ï¼ˆè¦ç»™è°åˆ›å»ºå¿«æ·æ–¹å¼ï¼‰ ç›®æ ‡æ–‡ä»¶ï¼ˆå¿«æ·æ–¹å¼çš„ä½ç½®ï¼‰</span><br><span class="line">[root@localhost ~]# ll -i zls111 1.txt</span><br><span class="line">16803484 -rw-r--r--. 1 root root 279 Apr 7 17:55 1.txt</span><br><span class="line">16799371 lrwxrwxrwx. 1 root root 11 Apr 7 22:34 zls111 -&gt; /root/1.txt</span><br><span class="line">[root@localhost ~]# <span class="built_in">ln</span> -s /root/1.txt /opt</span><br><span class="line">æ€»ç»“ï¼š</span><br><span class="line">1ï¼‰åˆ›å»ºè½¯é“¾æ¥æ—¶ï¼Œç›´æ¥æ¥ä¸€ä¸ªå·²å­˜åœ¨çš„ç›®å½•ï¼Œä»¥æºæ–‡ä»¶åå­—æ¥å‘½åæ–°çš„æ–‡ä»¶ååˆ›å»ºåˆ°æŒ‡å®šç›®å½•ä¸‹</span><br><span class="line">2ï¼‰åˆ›å»ºè½¯é“¾æ¥æ—¶ï¼ŒæŒ‡å®šä¸€ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œå¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºè½¯é“¾æ¥å¹¶æ”¹å</span><br><span class="line">2ï¼‰åˆ›å»ºè½¯é“¾æ¥æ—¶ï¼ŒæŒ‡å®šä¸€ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œå¦‚æœè¯¥æ–‡ä»¶å­˜åœ¨ï¼Œåˆ™æŠ¥é”™ï¼Œæ— æ³•åˆ›å»º</span><br><span class="line">[root@localhost ~]# <span class="built_in">ln</span> -s /root/1.txt /tmp/1.txt</span><br><span class="line"><span class="built_in">ln</span>: failed to create symbolic <span class="built_in">link</span> â€˜/tmp/1.txtâ€™: File exists</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="â‘¥-ç¡¬é“¾æ¥">â‘¥ ç¡¬é“¾æ¥</h5><p>è‹¥ä¸€ä¸ª inode å·å¯¹åº”å¤šä¸ªæ–‡ä»¶åï¼Œåˆ™ç§°è¿™äº›æ–‡ä»¶ä¸ºç¡¬é“¾æ¥ã€‚æ¢å¥è¯è¯´ï¼Œç¡¬é“¾æ¥å°±æ˜¯åŒä¸€ä¸ªæ–‡ä»¶ä½¿ç”¨äº†å¤š ä¸ªåˆ«åï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º hard link å°±æ˜¯fileçš„ä¸€ä¸ªåˆ«åï¼Œä»–ä»¬æœ‰å…±åŒçš„ inode</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## åˆ›å»ºç¡¬é“¾æ¥æ–¹å¼</span></span><br><span class="line"><span class="built_in">ln</span> æºæ–‡ä»¶ï¼ˆè¦ç»™è°åˆ›å»ºç¡¬é“¾æ¥ï¼‰ ç›®æ ‡æ–‡ä»¶ï¼ˆç¡¬é“¾æ¥çš„ä½ç½®ï¼‰</span><br><span class="line">[root@localhost ~]# ll -i</span><br><span class="line">total 24</span><br><span class="line">16797812 lrwxrwxrwx. 1 root root 11 Apr 7 23:35 123 -&gt; /root/1.txt</span><br><span class="line">16797823 -rw-r--r--. 6 root root 4 Apr 7 23:37 1.txt</span><br><span class="line">16797823 -rw-r--r--. 6 root root 4 Apr 7 23:37 abc</span><br><span class="line">16797823 -rw-r--r--. 6 root root 4 Apr 7 23:37 abc1</span><br><span class="line">16797823 -rw-r--r--. 6 root root 4 Apr 7 23:37 abc2</span><br><span class="line">16797823 -rw-r--r--. 6 root root 4 Apr 7 23:37 abc3</span><br><span class="line">16797823 -rw-r--r--. 6 root root 4 Apr 7 23:37 abc4</span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/image-20240407201426083.png" alt="image-20240407201426083"></p><h5 id="â‘¦-è½¯ç¡¬é“¾æ¥åŒºåˆ«">â‘¦ è½¯ç¡¬é“¾æ¥åŒºåˆ«</h5><table><thead><tr><th>åŒºåˆ«</th><th>ç¡¬é“¾æ¥</th><th>è½¯é“¾æ¥</th></tr></thead><tbody><tr><td>å‘½ä»¤</td><td>ln</td><td>ln -s</td></tr><tr><td>inode</td><td>å’Œæºæ–‡ä»¶inodeå·ç›¸åŒ</td><td>å’Œæºæ–‡ä»¶inodeå·ä¸åŒ</td></tr><tr><td>æºæ–‡ä»¶</td><td>åˆ é™¤æºæ–‡ä»¶ä¸å½±å“é“¾æ¥æ–‡ä»¶</td><td>åˆ é™¤æºæ–‡ä»¶å½±å“é“¾æ¥æ–‡ä»¶</td></tr><tr><td>è·¨åˆ†åŒºåˆ›å»º</td><td>ä¸èƒ½</td><td>å¯ä»¥</td></tr><tr><td>ç›®å½•åˆ›å»º</td><td>ä¸èƒ½</td><td>å¯ä»¥</td></tr><tr><td>æ–‡ä»¶ç±»å‹</td><td>æ™®é€šæ–‡ä»¶</td><td>l é“¾æ¥æ–‡ä»¶</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹ç£ç›˜å‘½ä»¤</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">df</span></span><br><span class="line">Filesystem 1K-blocks Used Available Use% Mounted on</span><br><span class="line">/dev/sda3 8913920 1609880 7304040 19% /</span><br><span class="line">devtmpfs 487048 0 487048 0% /dev</span><br><span class="line">tmpfs 497948 0 497948 0% /dev/shm</span><br><span class="line">tmpfs 497948 7748 490200 2% /run</span><br><span class="line">tmpfs 497948 0 497948 0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1 508580 122216 386364 25% /boot</span><br><span class="line">tmpfs 99592 0 99592 0% /run/user/0</span><br><span class="line"><span class="comment"># -hä»¥äººç±»å¯è¯»çš„æ–¹å¼æ˜¾ç¤ºï¼Œç£ç›˜å¤§å°åŠ ä¸Šäº†å•ä½</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">df</span> -h</span><br><span class="line">Filesystem Size Used Avail Use% Mounted on</span><br><span class="line">/dev/sda3 8.6G 1.6G 7.0G 19% /</span><br><span class="line">devtmpfs 476M 0 476M 0% /dev</span><br><span class="line">tmpfs 487M 0 487M 0% /dev/shm</span><br><span class="line">tmpfs 487M 7.6M 479M 2% /run</span><br><span class="line">tmpfs 487M 0 487M 0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1 497M 120M 378M 25% /boot</span><br><span class="line">tmpfs 98M 0 98M 0% /run/user/0</span><br><span class="line"><span class="comment"># -i æŸ¥çœ‹inodeå¯ç”¨ç©ºé—´</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">df</span> -i</span><br><span class="line">Filesystem Inodes IUsed IFree IUse% Mounted on</span><br><span class="line">/dev/sda3 4462080 34791 4427289 1% /</span><br><span class="line">devtmpfs 121762 380 121382 1% /dev</span><br><span class="line">tmpfs 124487 1 124486 1% /dev/shm</span><br><span class="line">tmpfs 124487 699 123788 1% /run</span><br><span class="line">tmpfs 124487 16 124471 1% /sys/fs/cgroup</span><br><span class="line">/dev/sda1 256000 326 255674 1% /boot</span><br><span class="line">tmpfs 124487 1 124486 1% /run/user/0</span><br><span class="line">[root@localhost ~]# <span class="built_in">df</span> -ih</span><br><span class="line">Filesystem Inodes IUsed IFree IUse% Mounted on</span><br><span class="line">/dev/sda3 4.3M 34K 4.3M 1% /</span><br><span class="line">devtmpfs 119K 380 119K 1% /dev</span><br><span class="line">tmpfs 122K 1 122K 1% /dev/shm</span><br><span class="line">tmpfs 122K 699 121K 1% /run</span><br><span class="line">tmpfs 122K 16 122K 1% /sys/fs/cgroup</span><br><span class="line">/dev/sda1 250K 326 250K 1% /boot</span><br><span class="line">tmpfs 122K 1 122K 1% /run/user/0</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CentOS 6ï¼šé»˜è®¤ä½¿ç”¨çš„æ˜¯ext4çš„æ–‡ä»¶ç³»ç»Ÿ13ã€‚</span><br><span class="line">CentOS 7ï¼šé»˜è®¤ä½¿ç”¨çš„æ˜¯xfsï¼ˆeXtended File Systemï¼‰æ–‡ä»¶ç³»ç»Ÿç±»å‹</span><br></pre></td></tr></table></figure><p>å½“å‰ç£ç›˜ç©ºé—´è¿˜å‰©ä½™500Gï¼Œä½†æ˜¯å°±æ— æ³•å¾€é‡Œé¢å†™å…¥æ•°æ®ï¼ŒæŠ¥é”™ï¼Œç£ç›˜ç©ºé—´æ»¡äº†ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.inodeå·å‚¨å­˜ç£ç›˜ç©ºé—´ä¸è¶³</span><br><span class="line">2.blockå‚¨å­˜ç”¨æˆ·çœŸå®æ•°æ®ç£ç›˜ç©ºé—´ä¸è¶³</span><br></pre></td></tr></table></figure><h3 id="3-vimç¼–è¾‘å™¨">3.vimç¼–è¾‘å™¨</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vi å’Œ vim å‘½ä»¤æ˜¯linuxä¸­å¼ºå¤§çš„æ–‡æœ¬ç¼–è¾‘å™¨, ç”±äºLinuxç³»ç»Ÿä¸€åˆ‡çš†æ–‡ä»¶ï¼Œè€Œé…ç½®ä¸€ä¸ªæœåŠ¡å°±æ˜¯åœ¨ä¿®æ”¹å…¶</span><br><span class="line">é…ç½®æ–‡ä»¶çš„å‚æ•°ã€‚</span><br><span class="line">vim ç¼–è¾‘å™¨æ˜¯è¿ç»´å·¥ç¨‹å¸ˆå¿…é¡»æŒæ¡çš„ä¸€ä¸ªå·¥å…·, æ²¡æœ‰å®ƒå¾ˆå¤šå·¥ä½œéƒ½æ— æ³•å®Œæˆã€‚</span><br><span class="line">vim å…¶å®æ˜¯ vi çš„å‡çº§ç‰ˆ</span><br></pre></td></tr></table></figure><p><strong>vimä¸‰ç§å·¥ä½œæ¨¡å¼</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Vimç¼–è¾‘å™¨ä¸­è®¾ç½®äº†ä¸‰ç§æ¨¡å¼: å‘½ä»¤æ¨¡å¼ã€ç¼–è¾‘æ¨¡å¼ã€æœ«è¡Œæ¨¡å¼ï¼Œæ¯ç§æ¨¡å¼åˆ†åˆ«åˆæ”¯æŒå¤šç§ä¸åŒçš„å‘½ä»¤å¿«æ·é”®ï¼Œå¤§å¤§æé«˜äº†å·¥ä½œæ•ˆç‡ï¼Œè€Œä¸”ç”¨æˆ·åœ¨ä¹ æƒ¯ä¹‹åä¹Ÿä¼šè§‰å¾—ç›¸å½“é¡ºæ‰‹ã€‚è¦æƒ³é«˜æ•ˆç‡åœ°æ“ä½œæ–‡æœ¬ï¼Œå°±å¿…é¡»å…ˆææ¸…è¿™ä¸‰ç§æ¨¡å¼çš„æ“ä½œåŒºåˆ«ä»¥åŠæ¨¡å¼ä¹‹é—´çš„åˆ‡æ¢æ–¹æ³•ã€‚</span><br></pre></td></tr></table></figure><h4 id="1-å‘½ä»¤æ¨¡å¼">1.å‘½ä»¤æ¨¡å¼</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è¿›è¡Œå¿«æ·é”®æ“ä½œ</span></span><br><span class="line"><span class="comment">##å…‰æ ‡çš„è·³è½¬</span></span><br><span class="line">Shift + g |G    //å°†å…‰æ ‡è·³è½¬åˆ°æ–‡ä»¶æœ€åä¸€è¡Œ</span><br><span class="line">gg              //å°†å…‰æ ‡è·³è½¬åˆ°æ–‡ä»¶çš„ç¬¬ä¸€è¡Œ</span><br><span class="line">Ngg   //å°†å…‰æ ‡è·³è½¬åˆ°æŒ‡å®šè¡Œ(Nä¸ºé˜¿æ‹‰ä¼¯æ•°å­—)</span><br><span class="line">Shift +4 |$    //å°†å…‰æ ‡è·³è½¬åˆ°å½“å‰æ‰€åœ¨è¡Œçš„è¡Œæœ«</span><br><span class="line">Shift +6 |^  |0 // å°†å…‰æ ‡è·³è½¬åˆ°å½“å‰æ‰€åœ¨è¡Œçš„è¡Œé¦–</span><br><span class="line"><span class="comment">## å¤åˆ¶ç²˜è´´</span></span><br><span class="line">yy   //å¤åˆ¶å…‰æ ‡æ‰€åœ¨è¡Œçš„æ•´è¡Œå†…å®¹</span><br><span class="line">p(å°å†™p)  //å°†å¤åˆ¶çš„å†…å®¹ç²˜è´´åˆ°å…‰æ ‡æ‰€åœ¨è¡Œçš„ä¸‹ä¸€è¡Œ</span><br><span class="line">P(å¤§å†™P)  //å°†å¤åˆ¶çš„å†…å®¹ç²˜è´´åˆ°å…‰æ ‡æ‰€åœ¨è¡Œçš„ä¸Šä¸€è¡Œ</span><br><span class="line">Nyy | yNy    //å°†å…‰æ ‡æ‰€åœ¨è¡Œæ•´è¡Œå†…å®¹åŠä¸‹é¢N-1è¡Œå†…å®¹å¤åˆ¶(Nä¸ºé˜¿æ‹‰ä¼¯æ•°å­—)</span><br><span class="line"><span class="comment">## å‰ªåˆ‡åˆ é™¤</span></span><br><span class="line"><span class="built_in">dd</span>   // å°†å…‰æ ‡æ‰€åœ¨è¡Œä¸€æ•´è¡Œå†…å®¹ï¼Œå‰ªåˆ‡(åˆ é™¤)</span><br><span class="line">Ndd | dNd    //å°†å…‰æ ‡æ‰€åœ¨è¡ŒåŠä¸‹é¢N-1è¡Œå†…å®¹å‰ªåˆ‡(Nä¸ºé˜¿æ‹‰ä¼¯æ•°å­—)</span><br><span class="line">Shift + d|D// å°†å…‰æ ‡æ‰€åœ¨å­—ç¬¦åŠåé¢æ•´è¡Œå†…å®¹å‰ªåˆ‡(åˆ é™¤)</span><br><span class="line">x   // åˆ é™¤å½“å‰å…‰æ ‡æ‰€åœ¨å­—ç¬¦</span><br><span class="line">Shift +x|X    //å°†å…‰æ ‡æ‰€åœ¨å½“å‰å­—ç¬¦çš„å‰ä¸€ä¸ªå­—ç¬¦åˆ é™¤</span><br><span class="line">d+<span class="built_in">shift</span> +g|dG  //å°†å…‰æ ‡æ‰€åœ¨è¡ŒåŠåé¢æ‰€æœ‰è¡Œå†…å®¹åˆ é™¤</span><br><span class="line"><span class="comment">## æ’¤é”€å›æ»šæ›¿æ¢</span></span><br><span class="line">U        // æ’¤é”€ä¸Šä¸€æ¬¡æ“ä½œ</span><br><span class="line">Ctrl + r//æ¢å¤ä¸Šä¸€æ¬¡æ’¤é”€çš„æ“ä½œ</span><br><span class="line">r// æ›¿æ¢å…‰æ ‡å½“å‰æ‰€åœ¨çš„ä¸€ä¸ªå­—ç¬¦</span><br><span class="line">Shift +r |R//ä»å…‰æ ‡æ‰€åœ¨å­—ç¬¦å¼€å§‹è¿›è¡Œæ›¿æ¢ç›´åˆ°æŒ‰ESCç»“æŸ</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## ç¿»é¡µ</span></span><br><span class="line">Ctrl + b // å‘å‰ç¿»é¡µ</span><br><span class="line">Ctrl + f // å‘åç¿»é¡µ</span><br></pre></td></tr></table></figure><h4 id="2-ç¼–è¾‘æ¨¡å¼">2.ç¼–è¾‘æ¨¡å¼</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-- INSERT --</span><br><span class="line">åƒæ­£å¸¸çš„Windowsæ–‡æœ¬ç¼–è¾‘å™¨ä¸€æ ·ï¼Œå¯ä»¥éšæ„å†™å…¥å†…å®¹</span><br><span class="line"><span class="comment">## ä»å‘½ä»¤æ¨¡å¼å¦‚ä½•è¿›å…¥ç¼–è¾‘æ¨¡å¼</span></span><br><span class="line">i // åœ¨å…‰æ ‡æ‰€åœ¨ä½ç½®è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼ˆè¾“å…¥å†…å®¹åœ¨å…‰æ ‡ä¹‹å‰ï¼‰</span><br><span class="line">I // å°†å…‰æ ‡è·³è½¬åˆ°å…‰æ ‡æ‰€åœ¨è¡Œçš„è¡Œé¦–å¹¶è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼ˆè¾“å…¥å†…å®¹åœ¨å…‰æ ‡ä¹‹å‰ï¼‰</span><br><span class="line">a // å°†å…‰æ ‡è·³è½¬åˆ°å…‰æ ‡æ‰€åœ¨å­—ç¬¦çš„åä¸€ä¸ªå­—ç¬¦å¹¶è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼ˆè¾“å…¥å†…å®¹åœ¨å…‰æ ‡ä¹‹å‰ï¼‰</span><br><span class="line">A // å°†å…‰æ ‡è·³è½¬åˆ°å…‰æ ‡æ‰€åœ¨è¡Œçš„è¡Œæœ«å¹¶è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼ˆè¾“å…¥å†…å®¹åœ¨å…‰æ ‡ä¹‹å‰ï¼‰</span><br><span class="line">s // å°†å…‰æ ‡æ‰€åœ¨å­—ç¬¦åˆ é™¤å¹¶è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼ˆè¾“å…¥å†…å®¹åœ¨å…‰æ ‡ä¹‹å‰ï¼‰</span><br><span class="line">S // å°†å…‰æ ‡æ‰€åœ¨è¡Œçš„æ•´è¡Œå†…å®¹åˆ é™¤å¹¶è¿›å…¥ç¼–è¾‘æ¨¡å¼</span><br><span class="line">o // å°†å…‰æ ‡ç§»åŠ¨åˆ°å½“å‰æ‰€åœ¨è¡Œçš„ä¸‹ä¸€è¡Œå¹¶è¿›å…¥ç¼–è¾‘æ¨¡å¼</span><br><span class="line">O // å°†å…‰æ ‡ç§»åŠ¨åˆ°å…‰æ ‡æ‰€åœ¨è¡Œçš„ä¸Šä¸€è¡Œå¹¶è¿›å…¥ç¼–è¾‘æ¨¡å¼</span><br><span class="line"><span class="comment">## ä»ç¼–è¾‘æ¨¡å¼è¿”å›å‘½ä»¤æ¨¡å¼</span></span><br><span class="line">ESC</span><br></pre></td></tr></table></figure><h4 id="3-æœ«è¡Œæ¨¡å¼">3.æœ«è¡Œæ¨¡å¼</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨ç¼–è¾‘å™¨çš„å·¦ä¸‹è§’è¿›è¡Œæ“ä½œ</span></span><br><span class="line">æ˜¾ç¤ºè¡Œå·ã€æœç´¢ã€æ›¿æ¢ã€ä¿å­˜ã€é€€å‡º ...</span><br><span class="line"><span class="comment"># è¿›å…¥æœ«è¡Œæ¨¡å¼çš„æ–¹æ³•</span></span><br><span class="line">1ï¼‰åœ¨å‘½ä»¤æ¨¡å¼ä¸‹ï¼Œè¾“å…¥å†’å·</span><br><span class="line">2ï¼‰åœ¨å‘½ä»¤æ¨¡å¼ä¸‹ï¼Œè¾“å…¥/</span><br><span class="line"><span class="comment">## ä¿å­˜é€€å‡º</span></span><br><span class="line">wï¼šwriteå†™å…¥ï¼ˆä¿å­˜</span><br><span class="line">qï¼šquité€€å‡º</span><br><span class="line">:w // åªä¿å­˜ä½†æ˜¯ä¸é€€å‡º</span><br><span class="line">:q // é€€å‡ºä½†ä¸ä¿å­˜ ï¼ˆæ²¡æœ‰æ”¹å†…å®¹ï¼‰</span><br><span class="line">:wq // ä¿å­˜é€€å‡º å¿«æ·é”® Shift + zz | ZZ</span><br><span class="line">:x // ä¿å­˜é€€å‡º å’Œ:wqç›¸ç­‰</span><br><span class="line">:q! // å¼ºåˆ¶é€€å‡º</span><br><span class="line">:w! // å¼ºåˆ¶ä¿å­˜</span><br><span class="line">:wq! // å¼ºåˆ¶ä¿å­˜å¹¶é€€å‡º</span><br><span class="line"><span class="comment">########### é”™è¯¯ ###########</span></span><br><span class="line">:qw // é”™è¯¯å†™æ³•ï¼Œå…ˆé€€å‡ºåä¿å­˜</span><br><span class="line">E37: No write since last change (add ! to override) // æ–‡ä»¶å†™å…¥å†…å®¹ï¼Œæ²¡æœ‰ä¿å­˜ï¼Œæ— æ³•ç›´æ¥é€€å‡ºï¼Œé™¤éå¼ºåˆ¶é€€å‡º</span><br><span class="line">E45: <span class="string">&#x27;readonly&#x27;</span> option is <span class="built_in">set</span> (add ! to override) // åªè¯»æ–‡ä»¶ï¼Œæ— æ³•ä¿å­˜é€€å‡ºï¼Œåªæœ‰rootç”¨æˆ·å¯ä»¥å¼ºåˆ¶ä¿å­˜é€€å‡º</span><br><span class="line">E212: Unable to open and write files // æ–‡ä»¶æ— æ³•å†™å…¥</span><br><span class="line">E212: Can<span class="string">&#x27;t open file for writing // æ–‡ä»¶æ— æ³•å†™å…¥ï¼Œå‡ºç°åŸå› ï¼š1.æ²¡æœ‰å†™å…¥æƒé™2.æ–‡ä»¶å†™å…¥åˆ°ä¸€ä¸ªä¸å­˜åœ¨çš„ç›®å½•ä¸­</span></span><br></pre></td></tr></table></figure><p><strong>==æœ«è¡Œæ¨¡å¼â€”æœç´¢==</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/æƒ³è¦æœç´¢çš„å†…å®¹</span><br><span class="line">nï¼šä¸‹ç¿»ï¼ŒæŸ¥æ‰¾ä¸‹ä¸€ä¸ª</span><br><span class="line">Nï¼šä¸Šç¿»ï¼ŒæŸ¥æ‰¾ä¸Šä¸€ä¸ª</span><br></pre></td></tr></table></figure><p><strong>==æœ«è¡Œæ¨¡å¼â€”æ›¿æ¢==</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">:%s#è¦è¢«æ›¿æ¢çš„å†…å®¹#æ›¿æ¢çš„å†…å®¹#g</span><br><span class="line">%ï¼šæ‰€æœ‰è¡Œ</span><br><span class="line">sï¼šsearch æœç´¢</span><br><span class="line">gï¼šå…¨å±€æ›¿æ¢</span><br></pre></td></tr></table></figure><p><strong>==æœ«è¡Œæ¨¡å¼â€”å…‰æ ‡è·³è½¬åŠå‘½ä»¤==</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## æ˜¾ç¤ºè¡Œå·</span></span><br><span class="line">:<span class="built_in">set</span> number ç®€å†™ :<span class="built_in">set</span> nu</span><br><span class="line"><span class="comment">## å–æ¶ˆæ˜¾ç¤ºè¡Œå·</span></span><br><span class="line">:<span class="built_in">set</span> nonumber ç®€å†™ :<span class="built_in">set</span> nonu</span><br><span class="line"><span class="comment">## å…‰æ ‡è·³è½¬åˆ°æŒ‡å®šè¡Œ</span></span><br><span class="line">:N (Nä¸ºé˜¿æ‹‰ä¼¯æ•°å­—)</span><br><span class="line"><span class="comment">## å¿½ç•¥å¤§å°å†™</span></span><br><span class="line">:<span class="built_in">set</span> ic</span><br><span class="line"><span class="comment">## å–æ¶ˆå¿½ç•¥å¤§å°å†™</span></span><br><span class="line">:<span class="built_in">set</span> noic</span><br><span class="line"><span class="comment">## è‡ªåŠ¨ç¼©è¿›</span></span><br><span class="line">:<span class="built_in">set</span> ai</span><br><span class="line"><span class="comment">## å–æ¶ˆè‡ªåŠ¨ç¼©è¿›</span></span><br><span class="line">:<span class="built_in">set</span> noai</span><br><span class="line"><span class="comment">## æ˜¾ç¤ºåˆ¶è¡¨ç¬¦ï¼Œç»“æŸç¬¦...</span></span><br><span class="line">:<span class="built_in">set</span> list</span><br><span class="line"><span class="comment">## å–æ¶ˆ</span></span><br><span class="line">:<span class="built_in">set</span> nolist</span><br><span class="line"><span class="comment">## è®¾ç½®ç¯å¢ƒå˜é‡ åœ¨å½“å‰ç™»å½•ç”¨æˆ·çš„å®¶ç›®å½•ä¸‹ åˆ›å»ºä¸€ä¸ª .vimrc</span></span><br><span class="line"><span class="built_in">set</span> fenc=utf-8</span><br><span class="line"><span class="built_in">set</span> fencs=utf-8,usc-bom,euc-jp,gb18030,gbk,gb2312,cp936</span><br><span class="line"><span class="built_in">set</span> number</span><br><span class="line"><span class="built_in">set</span> autoindent</span><br><span class="line"><span class="built_in">set</span> smartindent</span><br><span class="line"><span class="built_in">set</span> tabstop=4</span><br><span class="line"><span class="built_in">set</span> shiftwidth=4</span><br><span class="line"><span class="built_in">set</span> ruler</span><br><span class="line"><span class="built_in">set</span> incsearch</span><br><span class="line"><span class="built_in">set</span> showmatch</span><br><span class="line"><span class="built_in">set</span> matchtime=10</span><br><span class="line"><span class="built_in">set</span> ignorecase</span><br><span class="line"><span class="built_in">set</span> cursorline</span><br><span class="line"><span class="built_in">set</span> t_Co=256</span><br><span class="line"><span class="comment">#è®¾å®šé»˜è®¤è§£ç </span></span><br><span class="line"><span class="built_in">set</span>?fenc=utf-8?</span><br><span class="line"><span class="built_in">set</span>?fencs=utf-8,usc-bom,euc-jp,gb18030,gbk,gb2312,cp936</span><br><span class="line"><span class="comment">#æ˜¾ç¤ºè¡Œå·</span></span><br><span class="line"><span class="built_in">set</span> number</span><br><span class="line"><span class="comment">#vimä½¿ç”¨è‡ªåŠ¨å¯¹é½ï¼Œä¹Ÿå°±æ˜¯æŠŠå½“å‰è¡Œçš„å¯¹é½æ ¼å¼åº”ç”¨åˆ°ä¸‹ä¸€è¡Œ</span></span><br><span class="line"><span class="built_in">set</span> autoindent </span><br><span class="line"><span class="comment">#ä¾æ®ä¸Šé¢çš„å¯¹é½æ ¼å¼ï¼Œæ™ºèƒ½çš„é€‰æ‹©å¯¹é½æ–¹å¼</span></span><br><span class="line"><span class="built_in">set</span> smartindent </span><br><span class="line"><span class="comment">#è®¾ç½®tabé”®ä¸º4ä¸ªç©ºæ ¼</span></span><br><span class="line"><span class="built_in">set</span> tabstop=4</span><br><span class="line"><span class="comment">#è®¾ç½®å½“è¡Œä¹‹é—´äº¤é”™æ—¶ä½¿ç”¨4ä¸ªç©ºæ ¼</span></span><br><span class="line"><span class="built_in">set</span> shiftwidth=4</span><br><span class="line"><span class="comment">#è®¾ç½®åœ¨ç¼–è¾‘è¿‡ç¨‹ä¸­,äºå³ä¸‹è§’æ˜¾ç¤ºå…‰æ ‡ä½ç½®çš„çŠ¶æ€è¡Œ</span></span><br><span class="line"><span class="built_in">set</span> ruler</span><br><span class="line"><span class="comment">#è®¾ç½®å¢é‡æœç´¢,è¿™æ ·çš„æŸ¥è¯¢æ¯”è¾ƒsmart</span></span><br><span class="line"><span class="built_in">set</span> incsearch </span><br><span class="line"><span class="comment">#é«˜äº®æ˜¾ç¤ºåŒ¹é…çš„æ‹¬å·</span></span><br><span class="line"><span class="built_in">set</span> showmatch </span><br><span class="line"><span class="comment">#åŒ¹é…æ‹¬å·é«˜äº®æ—¶é—´(å•ä½ä¸º 1/10 s)</span></span><br><span class="line"><span class="built_in">set</span> matchtime=10 </span><br><span class="line"><span class="comment">#åœ¨æœç´¢çš„æ—¶å€™å¿½ç•¥å¤§å°å†™</span></span><br><span class="line"><span class="built_in">set</span> ignorecase </span><br><span class="line"><span class="comment">#ç¦æ­¢ç”Ÿæˆä¸´æ—¶</span></span><br><span class="line"><span class="comment">#set nobackup </span></span><br><span class="line"><span class="comment">#å½“å‰è¡Œé«˜äº®</span></span><br><span class="line"><span class="built_in">set</span> cursorline </span><br><span class="line"><span class="comment">#æ”¯æŒ256è‰²</span></span><br><span class="line"><span class="built_in">set</span> t_Co=256</span><br></pre></td></tr></table></figure><h4 id="4-è§†å›¾æ¨¡å¼">4.è§†å›¾æ¨¡å¼</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">å—è§†å›¾æ¨¡å¼ -- VISUAL BLOCK -- Ctrl + v</span><br><span class="line"><span class="comment"># æ‰¹é‡æ³¨é‡Š</span></span><br><span class="line">1ï¼‰Ctrl + v è¿›å…¥å—è§†å›¾æ¨¡å¼</span><br><span class="line">2ï¼‰æŒ‰é”®ç›˜çš„ä¸Šä¸‹å·¦å³ï¼Œé€‰ä¸­æƒ³è¦çš„å†…å®¹</span><br><span class="line">3ï¼‰å¦‚æœæ˜¯åœ¨è¡Œå‰åŠ å…¥å†…å®¹ï¼ŒShift + i</span><br><span class="line">4ï¼‰å¦‚æœæ˜¯åœ¨è¡ŒååŠ å…¥å†…å®¹ï¼ŒShift + a</span><br><span class="line">5ï¼‰è¾“å…¥æƒ³è¦çš„å†…å®¹åï¼Œè¿”å›å‘½ä»¤æ¨¡å¼ï¼ˆESCï¼‰</span><br><span class="line">è¡Œè§†å›¾æ¨¡å¼ -- VISUAL LINE -- Shit + v</span><br></pre></td></tr></table></figure><h4 id="5-vimæ‰©å±•çŸ¥è¯†">5.vimæ‰©å±•çŸ¥è¯†</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## ç¼–è¾‘æ–‡ä»¶ç›´æ¥è·³è½¬åˆ°æŒ‡å®šè¡Œ</span></span><br><span class="line">[root@localhost ~]# vim +N 1.txt // Nä¸ºé˜¿æ‹‰ä¼¯æ•°å­—</span><br><span class="line">[root@localhost ~]# vim +3 1.txt</span><br><span class="line"><span class="comment">## å¯¹æ¯”æ–‡ä»¶ä¸åŒä¹‹å¤„</span></span><br><span class="line">[root@localhost ~]# vimdiff 1.txt 2.txt</span><br><span class="line">[root@localhost ~]# diff 1.txt 3.txt</span><br><span class="line">3,6c3,6</span><br><span class="line">&lt; http://pxost.baidu.com/index.html</span><br><span class="line">&lt; http://mp3.baiadu.com/index.html</span><br><span class="line">&lt; http://www.baidu.com/3.html</span><br><span class="line">&lt; http://post.baidxu.com/2.html</span><br><span class="line">---</span><br><span class="line">&gt; http:aaaaa//pxost.baidu.com/index.html</span><br><span class="line">&gt; http://mp3xxx.baiadu.com/index.html</span><br><span class="line">&gt; http://www.baxxidu.com/3.html</span><br><span class="line">&gt; http://post.baixxdxu.com/2.html</span><br><span class="line"><span class="comment">## åŒæ—¶ç¼–è¾‘å¤šä¸ªæ–‡ä»¶ ï¼ˆä½¿ç”¨Ctrl + ww è¿›è¡Œåˆ‡æ¢ï¼‰</span></span><br><span class="line">[root@localhost ~]# vim -o 1.txt 2.txt // æ°´å¹³æ‹†åˆ†</span><br><span class="line">[root@localhost ~]# vim -O 1.txt 2.txt // å‚ç›´æ‹†åˆ†</span><br></pre></td></tr></table></figure><h4 id="6-vimå†™å…¥æµç¨‹">6.vimå†™å…¥æµç¨‹</h4><p><img src="https://cos.lukme.top/Pic/aaa.jpg" alt="aaa"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">å½“æˆ‘ä»¬åœ¨ä½¿ç”¨vimç¼–è¾‘æ–‡ä»¶æ—¶</span><br><span class="line">1ï¼‰é¦–å…ˆä¼šåœ¨æºæ–‡ä»¶ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª.swpçš„ä¸´æ—¶æ–‡ä»¶</span><br><span class="line">2ï¼‰å¦‚æœviméæ­£å¸¸é€€å‡ºçš„æƒ…å†µä¸‹ï¼Œè¯¥ä¸´æ—¶æ–‡ä»¶ä¸€ç›´å­˜åœ¨</span><br><span class="line">3ï¼‰ä¸‹ä¸€æ¬¡ç¼–è¾‘åˆ™ä¼šæç¤º</span><br><span class="line">[O]pen Read-Only, (E)dit anyway, (R)ecover, (Q)uit, (A)bort:</span><br><span class="line">åªè¯»æ¨¡å¼æ‰“å¼€ ç»§ç»­ç¼–è¾‘ è¦†ç›– é€€å‡º</span><br><span class="line">è§£å†³æ–¹æ¡ˆï¼š</span><br><span class="line">1ï¼‰æŸ¥çœ‹modifiedçŠ¶æ€ å¦‚æœæ˜¯<span class="built_in">yes</span>ï¼Œåˆ™éœ€è¦è¦†ç›–æºæ–‡ä»¶</span><br><span class="line">- vim -r /etc/sysconfig/network-scripts/ifcfg-ens33</span><br><span class="line">- vim /etc/sysconfig/network-scripts/ifcfg-ens3</span><br><span class="line">(R)ecover æŒ‰ r</span><br><span class="line">2ï¼‰åˆ é™¤.swpä¸´æ—¶æ–‡ä»¶å³å¯</span><br><span class="line"><span class="built_in">rm</span> -f /etc/sysconfig/network-scripts/.ifcfg-ens33.swp</span><br><span class="line">1ï¼‰æŸ¥çœ‹modifiedçŠ¶æ€ å¦‚æœæ˜¯noï¼Œåˆ™éœ€è¦è¦†ç›–æºæ–‡ä»¶</span><br><span class="line">(Q)uit æŒ‰qé€€å‡º</span><br><span class="line">2ï¼‰ç›´æ¥åˆ é™¤.swpä¸´æ—¶æ–‡ä»¶</span><br><span class="line"><span class="built_in">rm</span> -f /etc/sysconfig/network-scripts/.ifcfg-ens33.swp</span><br></pre></td></tr></table></figure><h3 id="4-findå‘½ä»¤">4. findå‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1.å¿˜äº†æŸä¸ªæ–‡ä»¶æ‰€åœ¨çš„ä½ç½®ï¼Œå¯ä»¥é€šè¿‡findæ¥æŸ¥æ‰¾ã€‚</span><br><span class="line">2.å¯ä»¥æŸ¥æ‰¾æŸä¸ªç›®å½•ä¸‹ï¼Œæ‰€æœ‰å°äº1kçš„æ–‡ä»¶ã€‚</span><br><span class="line">3.å¯ä»¥æŸ¥æ‰¾æŸä¸ªç›®å½•ä¸‹ï¼Œ7å¤©ä¹‹å‰åˆ›å»ºçš„æ–‡ä»¶ã€‚</span><br><span class="line">4.å¯ä»¥æŸ¥æ‰¾æŸç›®å½•ä¸‹æ‰€æœ‰ä»¥.shç»“å°¾çš„è„šæœ¬ã€‚</span><br><span class="line"></span><br><span class="line">å®ƒå¯ä»¥æ ¹æ®ä¸åŒçš„æ¡ä»¶æ¥è¿›è¡ŒæŸ¥æ‰¾æ–‡ä»¶:ä¾‹å¦‚æƒé™ã€æ‹¥æœ‰è€…ã€ä¿®æ”¹æ—¥æœŸ/æ—¶é—´ã€æ–‡ä»¶å¤§å°ç­‰ç­‰ã€‚ åŒæ—¶findå‘½ä»¤æ˜¯Linuxä¸‹å¿…é¡»æŒæ¡çš„ã€‚</span><br><span class="line"></span><br><span class="line">[root@lb01 code]# find /code/ -size -4k ! -<span class="built_in">type</span> d -delete</span><br></pre></td></tr></table></figure><table><thead><tr><th>å‘½ä»¤</th><th>è·¯å¾„</th><th>é€‰é¡¹</th><th>è¡¨è¾¾å¼</th><th>åŠ¨ä½œ</th></tr></thead><tbody><tr><td>find</td><td>[pathâ€¦]</td><td>[optionsâ€¦]</td><td>[expression]</td><td>[action]</td></tr></tbody></table><table><thead><tr><th>é€»è¾‘è¿ç®—ç¬¦</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>-a</td><td>ä¸”   &amp;&amp;</td></tr><tr><td>-o</td><td>æˆ–  ||</td></tr><tr><td>!</td><td>é</td></tr></tbody></table><p><strong>findçš„é€‰é¡¹</strong></p><table><thead><tr><th>é€‰é¡¹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>-name<br />-iname</td><td>æ ¹æ®æ–‡ä»¶åæŸ¥æ‰¾<br />ä¸åŒºåˆ†æ–‡ä»¶åå¤§å°å†™æŸ¥æ‰¾</td></tr><tr><td>-type</td><td>æ ¹æ®æ–‡ä»¶ç±»å‹æŸ¥æ‰¾</td></tr><tr><td>-size</td><td>æ ¹æ®æ–‡ä»¶å¤§å°æ‰¾</td></tr><tr><td>-time</td><td>æ ¹æ®æ–‡ä»¶çš„æ—¶é—´æ‰¾</td></tr><tr><td>-user <br />-group <br />-nouser <br />-nogroup</td><td>æŸ¥æ‰¾æŒ‡å®šç”¨æˆ·<br />æŸ¥æ‰¾æŒ‡å®šç”¨æˆ·ç»„<br />æŸ¥æ‰¾æ²¡æœ‰ç”¨æˆ·çš„æ–‡ä»¶æŸ¥æ‰¾<br />æ²¡æœ‰ç”¨æˆ·ç»„çš„æ–‡ä»¶</td></tr><tr><td>-perm</td><td>æ ¹æ®æ–‡ä»¶æƒé™æ‰¾</td></tr><tr><td>-maxdepth</td><td>æ ¹æ®å¥æ·±åº¦æŸ¥æ‰¾</td></tr><tr><td>-empty</td><td>æŸ¥æ‰¾ç©ºæ–‡ä»¶ï¼ˆå’Œ-type dé…åˆå¯ä»¥æŒ‡å®šç©ºç›®å½•ï¼‰</td></tr></tbody></table><h4 id="1-æ ¹æ®æ–‡ä»¶åæŸ¥æ‰¾">1.æ ¹æ®æ–‡ä»¶åæŸ¥æ‰¾</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">-name</span><br><span class="line"><span class="comment">## æ‰¾åˆ°/etc/ç›®å½•ä¸‹ç½‘å¡ä¿¡æ¯é…ç½®æ–‡ä»¶åœ¨å“ª</span></span><br><span class="line">[root@localhost ~]# find /etc -name <span class="string">&#x27;*ens33*&#x27;</span>      åŠ ä¸Š*æ˜¯æ¨¡ç³ŠæŸ¥æ‰¾</span><br><span class="line"></span><br><span class="line"><span class="comment">## åœ¨/etc/ç›®å½•ä¸‹æ‰¾ä»¥.confç»“å°¾çš„æ‰€æœ‰é…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@localhost ~]# find /etc -name <span class="string">&#x27;*.conf&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## åœ¨/etc/ç›®å½•ä¸‹æ‰¾åˆ°ä»¥.confç»“å°¾çš„æ–‡ä»¶å’Œ.shç»“å°¾çš„æ–‡ä»¶</span></span><br><span class="line">[root@localhost ~]# find /etc/ -name <span class="string">&#x27;*.conf&#x27;</span> &amp;&amp; find /etc/ -name <span class="string">&#x27;*.sh&#x27;</span></span><br><span class="line">[root@localhost ~]# find /etc/ -name <span class="string">&#x27;*.conf&#x27;</span>;find /etc/ -name <span class="string">&#x27;*.sh&#x27;</span></span><br><span class="line">[root@localhost ~]# find /etc/ -name <span class="string">&#x27;*.conf&#x27;</span> -o -name <span class="string">&#x27;*.sh&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## åœ¨/etc/ç›®å½•ä¸‹æ‰¾åˆ°ä¸æ˜¯ä»¥.confç»“å°¾çš„æ–‡ä»¶</span></span><br><span class="line">[root@localhost ~]# find /etc/ ! -name <span class="string">&#x27;*.conf&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## ç²¾ç¡®åŒ¹é…</span></span><br><span class="line">[root@localhost ~]# find /etc/ -name <span class="string">&#x27;ifcfg-ens33&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## ä¸åŒºåˆ†å¤§å°å†™æŸ¥æ‰¾æ–‡ä»¶å</span></span><br><span class="line">[root@localhost ~]# find ./ -iname <span class="string">&#x27;*zls*&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="2-æ ¹æ®æ–‡ä»¶ç±»å‹æŸ¥æ‰¾">2.æ ¹æ®æ–‡ä»¶ç±»å‹æŸ¥æ‰¾</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">-<span class="built_in">type</span></span><br><span class="line"><span class="comment">## æ–‡ä»¶ç±»å‹</span></span><br><span class="line">æ™®é€šæ–‡ä»¶ï¼šf</span><br><span class="line">ç›®å½•ï¼šd</span><br><span class="line">è½¯é“¾æ¥æ–‡ä»¶ï¼šl</span><br><span class="line">å¥—æ¥å­—æ–‡ä»¶ï¼šs</span><br><span class="line">å­—ç¬¦è®¾å¤‡æ–‡ä»¶ï¼šc</span><br><span class="line">å—è®¾å¤‡æ–‡ä»¶ï¼šb</span><br><span class="line">ç®¡é“æ–‡ä»¶ï¼šp</span><br><span class="line">//f æ–‡ä»¶</span><br><span class="line">[root@zls ~]# find /dev -<span class="built_in">type</span> f</span><br><span class="line">//d ç›®å½•</span><br><span class="line">[root@zls ~]# find /dev -<span class="built_in">type</span> d</span><br><span class="line">//l é“¾æ¥</span><br><span class="line">[root@zls ~]# find /dev -<span class="built_in">type</span> l</span><br><span class="line">//b å—è®¾å¤‡</span><br><span class="line">[root@zls ~]# find /dev -<span class="built_in">type</span> b</span><br><span class="line">//c å­—ç¬¦è®¾å¤‡</span><br><span class="line">[root@zls ~]# find /dev -<span class="built_in">type</span> c</span><br><span class="line">//s å¥—æ¥å­—</span><br><span class="line">[root@zls ~]# find /dev -<span class="built_in">type</span> s</span><br><span class="line">//p ç®¡é“æ–‡ä»¶</span><br><span class="line">[root@zls ~]# find /dev -<span class="built_in">type</span> p</span><br><span class="line"></span><br><span class="line"><span class="comment">## æŸ¥æ‰¾/etc/ç›®å½•ä¸‹ï¼Œæ–‡ä»¶åä¸­åŒ…å«confçš„ç›®å½•</span></span><br><span class="line">[root@localhost ~]# find /etc -name <span class="string">&#x27;*conf*&#x27;</span> -<span class="built_in">type</span> d</span><br><span class="line">[root@localhost ~]# find /etc -name <span class="string">&#x27;*conf*&#x27;</span> -<span class="built_in">type</span> d -<span class="built_in">ls</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="3-æ ¹æ®æ–‡ä»¶å¤§å°æŸ¥æ‰¾">3.æ ¹æ®æ–‡ä»¶å¤§å°æŸ¥æ‰¾</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">-size</span><br><span class="line">+ï¼šå¤§äº</span><br><span class="line">-ï¼šå°äº</span><br><span class="line"><span class="comment">## æ‰¾å°äºå¤šå°‘çš„æ–‡ä»¶</span></span><br><span class="line">[root@localhost ~]# find /tmp -size -4k</span><br><span class="line"><span class="comment">## æ‰¾å¤§äºå¤šå°‘çš„æ–‡ä»¶</span></span><br><span class="line">[root@localhost ~]# find /tmp -size +4k</span><br><span class="line"><span class="comment">## æ‰¾ç­‰äºå¤šå°‘</span></span><br><span class="line">[root@localhost ~]# find /tmp -size 4k</span><br><span class="line"></span><br><span class="line"><span class="comment">## æ‰¾åˆ°/codeç›®å½•ä¸‹å°äº4kçš„æ–‡ä»¶å¹¶åˆ é™¤</span></span><br><span class="line">[root@localhost ~]# find /code -size -4k -delete</span><br><span class="line"></span><br><span class="line"><span class="comment">## æ‰¾åˆ°/codeç›®å½•ä¸‹å°äº4kçš„æ–‡ä»¶å¹¶åˆ é™¤ï¼ˆä¸åˆ é™¤ç›®å½•ï¼‰</span></span><br><span class="line">[root@localhost ~]# find /code -size -4k ! -<span class="built_in">type</span> d -delete   </span><br><span class="line"><span class="comment">##! -type d -deleteéç›®å½•</span></span><br></pre></td></tr></table></figure><h4 id="4-æ ¹æ®æ–‡ä»¶çš„æ—¶é—´æŸ¥æ‰¾">4.æ ¹æ®æ–‡ä»¶çš„æ—¶é—´æŸ¥æ‰¾</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## ä¸€ä¸ªæ–‡ä»¶çš„æ—¶é—´</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">stat</span> 1.txt</span><br><span class="line">File: â€˜1.txtâ€™</span><br><span class="line">Size: 4 Blocks: 8 IO Block: 4096 regular file</span><br><span class="line">Device: 803h/2051d Inode: 16797763 Links: 1</span><br><span class="line">Access: (0644/-rw-r--r--) Uid: ( 0/ root) Gid: ( 0/ root)</span><br><span class="line">Context: unconfined_u:object_r:admin_home_t:s0</span><br><span class="line">Access: 2024-04-17 19:25:18.951724354 +0800</span><br><span class="line">Modify: 2024-04-17 19:25:18.951724354 +0800</span><br><span class="line">Change: 2024-04-17 19:25:18.951724354 +0800</span><br><span class="line"></span><br><span class="line">-mtimeï¼šModifyä¿®æ”¹æ—¶é—´</span><br><span class="line">-atimeï¼šAccessè®¿é—®æ—¶é—´</span><br><span class="line">-ctimeï¼šChangeæ—¶é—´æˆ³ä¿®æ”¹æ—¶é—´</span><br><span class="line"></span><br><span class="line">+ï¼šæŸ¥æ‰¾Nå¤©ä¹‹å‰çš„ï¼ˆä¸åŒ…å«ä»Šå¤©ï¼‰</span><br><span class="line">-ï¼šæŸ¥æ‰¾Nå¤©ä¹‹å†…çš„ï¼ˆåŒ…å«ä»Šå¤©ï¼‰</span><br><span class="line">Nï¼šæŸ¥æ‰¾å¾€å‰æ•°ç¬¬Nå¤©çš„ï¼ˆä¸åŒ…å«ä»Šå¤©ï¼‰  ï¼ˆ-mtimeååªæœ‰æ•°å­—çš„ï¼‰</span><br><span class="line"></span><br><span class="line"><span class="comment">## ä¸åŠ ä»»ä½•ç¬¦å·ï¼šæŸ¥æ‰¾ä¸ç®—ä»Šå¤©å¾€å‰æ•°ç¬¬7å¤©çš„æ–‡ä»¶</span></span><br><span class="line">-mtime 7</span><br><span class="line">[root@localhost find]# find /root/find/ -mtime 7</span><br><span class="line"></span><br><span class="line"><span class="comment">## +7 ä¸ç®—ä»Šå¤©å¾€å‰æ•°ç¬¬ä¸ƒå¤©ä¹‹å‰çš„æ–‡ä»¶</span></span><br><span class="line">[root@localhost find]# find /root/find/ -mtime +7</span><br><span class="line"><span class="comment">## -7 ç®—ä»Šå¤©ï¼Œæœ€è¿‘7å¤©çš„æ–‡ä»¶</span></span><br><span class="line">[root@localhost find]# find /root/find/ -mtime -7</span><br><span class="line"><span class="comment">## éœ€æ±‚ï¼šä¿ç•™ä¸€å‘¨çš„æ•°æ®</span></span><br><span class="line">[root@localhost find]# find /root/find/ ! -mtime -7 -delete</span><br></pre></td></tr></table></figure><h4 id="5-æ ¹æ®ç”¨æˆ·æŸ¥æ‰¾">5.æ ¹æ®ç”¨æˆ·æŸ¥æ‰¾</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">-userï¼šæŸ¥æ‰¾æŒ‡å®šç”¨æˆ·</span><br><span class="line">-groupï¼šæŸ¥æ‰¾æŒ‡å®šç”¨æˆ·ç»„</span><br><span class="line">-nouserï¼šæŸ¥æ‰¾æ²¡æœ‰ç”¨æˆ·çš„æ–‡ä»¶</span><br><span class="line">-nogroupï¼šæŸ¥æ‰¾æ²¡æœ‰ç”¨æˆ·ç»„çš„æ–‡ä»¶</span><br><span class="line"><span class="comment">## æŸ¥æ‰¾å±äºrootç”¨æˆ·admç»„çš„æ–‡ä»¶</span></span><br><span class="line">[root@localhost ~]# find /root/ -user root -group adm -<span class="built_in">ls</span></span><br><span class="line"><span class="comment">## æŸ¥æ‰¾useræ˜¯zlsï¼Œæˆ–groupæ˜¯admç»„çš„æ–‡ä»¶</span></span><br><span class="line">[root@localhost ~]# find /root/ \( -group adm -o -user zls \) -<span class="built_in">ls</span></span><br><span class="line">16797763 4 -rw-r--r-- 1 zls root 4 Apr 17 2024 /root/1.txt</span><br><span class="line">16797778 4 -rw-r--r-- 1 zls root 4 Apr 16 2024 /root/2.txt</span><br><span class="line">16797816 4 -rw-r--r-- 1 root adm 4 Apr 17 2024</span><br><span class="line">/root/zls.txt</span><br><span class="line">16851189 4 -rw-r--r-- 1 root adm 4 Apr 16 2024</span><br><span class="line">/root/zls1.txt</span><br><span class="line">16851191 4 -rw-r--r-- 1 root adm 4 Apr 16 2024</span><br><span class="line">/root/zls2.txt</span><br><span class="line">16797780 4 -rw-r--r-- 1 root adm 4 Apr 16 2024</span><br><span class="line">/root/zls3.txt</span><br><span class="line">16797813 4 -rw-r--r-- 1 root adm 4 Apr 16 2024</span><br><span class="line">/root/zls4.txt</span><br><span class="line">[root@localhost ~]# find /root/ \( -user zls -o -group adm \)</span><br><span class="line">-rw-r--r--. 1 zls root 4 Apr 17 2024 /root/1.txt</span><br><span class="line">-rw-r--r--. 1 zls root 4 Apr 16 2024 /root/2.txt</span><br><span class="line">-rw-r--r--. 1 root adm 4 Apr 16 2024 /root/zls1.txt</span><br><span class="line">-rw-r--r--. 1 root adm 4 Apr 16 2024 /root/zls2.txt</span><br><span class="line">-rw-r--r--. 1 root adm 4 Apr 16 2024 /root/zls3.txt</span><br><span class="line">-rw-r--r--. 1 root adm 4 Apr 16 2024 /root/zls4.txt</span><br><span class="line">-rw-r--r--. 1 root adm 4 Apr 17 2024 /root/zls.txt</span><br><span class="line"><span class="comment">## æŸ¥æ‰¾æ²¡æœ‰ç”¨æˆ·æˆ–è€…æ²¡æœ‰ç»„çš„æ–‡ä»¶</span></span><br><span class="line">[root@localhost opt]# find /opt/ -nouser -o -nogroup</span><br></pre></td></tr></table></figure><h4 id="6-æ ¹æ®æ–‡ä»¶æƒé™æŸ¥æ‰¾">6.æ ¹æ®æ–‡ä»¶æƒé™æŸ¥æ‰¾</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">perm</span><br><span class="line"><span class="comment">## ç²¾ç¡®æŸ¥æ‰¾æ–‡ä»¶çš„æƒé™644</span></span><br><span class="line">[root@localhost opt]# find /opt/ -perm 644 -<span class="built_in">ls</span></span><br><span class="line">16851186 0 -rw-r--r-- 1 1000 oldboyedu 0 Apr 15 2024</span><br><span class="line">/opt/sbit/1.txt</span><br><span class="line">16851188 0 -rw-r--r-- 1 oldboy oldboyedu 0 Apr 15 2024</span><br><span class="line">/opt/sbit/2.txt</span><br><span class="line">8393463 0 -rw-r--r-- 1 1002 root 0 Mar 30 00:19 /opt/1.txt</span><br><span class="line">8393464 0 -rw-r--r-- 1 root 1000 0 Mar 30 00:19 /opt/2.txt</span><br><span class="line"><span class="comment">## -ï¼šä»£è¡¨è¯¥æƒé™ä½ä¸Šï¼Œå¿…é¡»åŒ…å«è¯¥æ•°å­—æƒé™622 rw w w</span></span><br><span class="line">[root@localhost opt]# find /opt/ -perm -622 -<span class="built_in">ls</span></span><br><span class="line">16851181 0 drwxrwxrwt 2 root root 32 Apr 15 2024 /opt/sbit</span><br><span class="line"><span class="comment">## /ï¼šæ‹¥æœ‰è€…è‡³å°‘æœ‰ræˆ–wæƒé™, æˆ–è€…æ‹¥æœ‰ç»„è‡³å°‘æœ‰wæƒé™, æˆ–è€…åŒ¿åè‡³å°‘æœ‰wæƒé™</span></span><br><span class="line">[root@zls ~]# find /home -perm /622</span><br><span class="line">8405111 0 drwxr-xr-x 4 root root 77 Mar 30 00:19 /opt/</span><br><span class="line">16777 0 drwxr-sr-x 2 1000 root 19 Apr 15 2024 /opt/test</span><br><span class="line">16779 0 -rw-rw-r-- 1 1000 root 0 Apr 15 2024</span><br><span class="line">/opt/test/1.txt</span><br><span class="line">16851181 0 drwxrwxrwt 2 root root 32 Apr 15 2024 /opt/sbit</span><br><span class="line">16851186 0 -rw-r--r-- 1 1000 oldboyedu 0 Apr 15 2024</span><br><span class="line">/opt/sbit/1.txt</span><br><span class="line">16851188 0 -rw-r--r-- 1 oldboy oldboyedu 0 Apr 15 2024</span><br><span class="line">/opt/sbit/2.txt</span><br><span class="line">8393448 12 -rw------- 1 root root 9567 Apr 16 2024</span><br><span class="line">/opt/.bash_history</span><br><span class="line">8393463 0 -rw-r--r-- 1 1002 root 0 Mar 30 00:19 /opt/1.txt</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="7-æ ¹æ®æ·±åº¦æŸ¥æ‰¾">7.æ ¹æ®æ·±åº¦æŸ¥æ‰¾</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# find /etc/ -maxdepth 1 -<span class="built_in">type</span> d</span><br></pre></td></tr></table></figure><h4 id="8-åŠ¨ä½œ">8.åŠ¨ä½œ</h4><table><thead><tr><th>åŠ¨ä½œ</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>-print</td><td>æ‰“å°ç»“æœï¼ˆfind é»˜è®¤å°±æ‰“å°ç»“æœï¼‰</td></tr><tr><td>-ls</td><td>æŸ¥çœ‹æ–‡ä»¶è¯¦ç»†ä¿¡æ¯ï¼ˆå¦‚æœæœ‰é€»è¾‘è¿ç®—ç¬¦ï¼Œå°±åªæŸ¥çœ‹é€»è¾‘è¿ç®—ç¬¦åé¢æ–‡ä»¶è¯¦ç»†ä¿¡æ¯ï¼Œé™¤é ä½¿ç”¨å°æ‹¬å·æ•´ä½“æ‹¬èµ·æ¥ï¼‰</td></tr><tr><td>- delete</td><td>åˆ é™¤æŸ¥æ‰¾åˆ°çš„æ–‡ä»¶ï¼ˆå¦‚æœæœ‰é€»è¾‘è¿ç®—ç¬¦ï¼Œå°±åªæŸ¥çœ‹é€»è¾‘è¿ç®—ç¬¦åé¢æ–‡ä»¶è¯¦ç»†ä¿¡æ¯ï¼Œé™¤é ä½¿ç”¨å°æ‹¬å·æ•´ä½“æ‹¬èµ·æ¥ï¼‰</td></tr><tr><td>-ok</td><td>æ‰§è¡Œåé¢çš„shellå‘½ä»¤ï¼ˆä¼šè¯¢é—®ï¼‰ï¼ˆå¦‚æœæœ‰é€»è¾‘è¿ç®—ç¬¦ï¼Œå°±åªæŸ¥çœ‹é€»è¾‘è¿ç®—ç¬¦åé¢æ–‡ä»¶è¯¦ ç»†ä¿¡æ¯ï¼Œé™¤éä½¿ç”¨å°æ‹¬å·æ•´ä½“æ‹¬èµ·æ¥ï¼‰</td></tr><tr><td>-exec</td><td>æ‰§è¡Œåé¢çš„shellå‘½ä»¤ï¼ˆä¸è¯¢é—®ï¼‰ï¼ˆå¦‚æœæœ‰é€»è¾‘è¿ç®—ç¬¦ï¼Œå°±åªæŸ¥çœ‹é€»è¾‘è¿ç®—ç¬¦åé¢æ–‡ä»¶è¯¦ ç»†ä¿¡æ¯ï¼Œé™¤éä½¿ç”¨å°æ‹¬å·æ•´ä½“æ‹¬èµ·æ¥ï¼‰</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# find /opt/ -<span class="built_in">type</span> f -o -name <span class="string">&#x27;*st&#x27;</span> -<span class="built_in">exec</span> <span class="built_in">rm</span> -fr &#123;&#125; \;</span><br><span class="line">[root@localhost ~]# find /opt/ -<span class="built_in">type</span> f -o -name <span class="string">&#x27;*st&#x27;</span> -ok <span class="built_in">rm</span> -fr &#123;&#125; \;</span><br><span class="line"><span class="comment">## ä»¥ååŠ¨ä½œéƒ½æ”¹ä¸ºxargs åé¢åŠ å‘½ä»¤</span></span><br><span class="line">[root@localhost ~]# find /opt/ -<span class="built_in">type</span> f -o -name <span class="string">&#x27;*st&#x27;</span>|xargs <span class="built_in">rm</span> -fr</span><br><span class="line"><span class="comment">## æ‹·è´</span></span><br><span class="line">[root@localhost ~]# find /root/ -<span class="built_in">type</span> f|xargs <span class="built_in">cp</span> -t /tmp/</span><br><span class="line">[root@localhost ~]# find /root/ -<span class="built_in">type</span> d|xargs -I &#123;&#125; <span class="built_in">cp</span> -r &#123;&#125; /opt/</span><br></pre></td></tr></table></figure><h2 id="ã€3ã€‘ç”¨æˆ·ç®¡ç†">ã€3ã€‘ç”¨æˆ·ç®¡ç†</h2><h3 id="1-ç”¨æˆ·ç®¡ç†ä¿¡æ¯">1.ç”¨æˆ·ç®¡ç†ä¿¡æ¯</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##Linuxä¸‹çš„ç”¨æˆ·æœ‰ä»€ä¹ˆä½œç”¨</span></span><br><span class="line">1ï¼‰ç³»ç»Ÿä¸Šçš„æ¯ä¸€ä¸ªè¿›ç¨‹(è¿è¡Œçš„ç¨‹åº)éƒ½éœ€è¦ç‰¹å®šçš„ç”¨æˆ·è¿è¡Œ</span><br><span class="line">2ï¼‰æ¯ä¸€ä¸ªæ–‡ä»¶éƒ½æœ‰ç‰¹å®šçš„ç”¨æˆ·æ‹¥æœ‰ï¼Œæ‰€ä»¥è®¿é—®ä¸€ä¸ªæ–‡ä»¶æˆ–ç›®å½•å—åˆ°ç”¨æˆ·çš„é™åˆ¶</span><br><span class="line">3ï¼‰è¿›ç¨‹èƒ½å¤Ÿä»¥ä½•ç§æ–¹å¼è®¿é—®æŸä¸€ä¸ªæ–‡ä»¶æˆ–ç›®å½•, ä¸è¿›ç¨‹æ‰€å…³è”çš„ç”¨æˆ·æœ‰å…³</span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/image-20240409145014306.png" alt="image-20240409145014306"></p><h4 id="â‘ -ç”¨æˆ·æŸ¥çœ‹å‘½ä»¤">â‘  ç”¨æˆ·æŸ¥çœ‹å‘½ä»¤</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¯­æ³•</span></span><br><span class="line"><span class="built_in">id</span> [option] [user]</span><br><span class="line"><span class="built_in">id</span> [é€‰é¡¹] [ç”¨æˆ·å]</span><br><span class="line">[root@localhost ~]# <span class="built_in">id</span></span><br><span class="line">uid=0(root) gid=0(root) <span class="built_in">groups</span>=0(root)</span><br><span class="line">uidï¼šuser <span class="built_in">id</span>å·</span><br><span class="line">gidï¼šgroup <span class="built_in">id</span>å·</span><br><span class="line"><span class="built_in">groups</span>ï¼šç»„å</span><br><span class="line"><span class="comment">## åªæ˜¾ç¤ºuid</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">id</span> -u root</span><br><span class="line">0</span><br><span class="line"><span class="comment">## åªæ˜¾ç¤ºgid</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">id</span> -g root</span><br><span class="line">0</span><br><span class="line">ç³»ç»Ÿåªè®¤uidï¼Œç”¨æˆ·åæ˜¯ç»™è¿ç»´äººå‘˜çœ‹çš„</span><br><span class="line">åœ¨Linuxç³»ç»Ÿä¸­ï¼Œuidä¸º0çš„ç”¨æˆ·æ‰æ˜¯è¶…çº§ç”¨æˆ·</span><br><span class="line"><span class="comment">## æŸ¥çœ‹ç”¨æˆ·ç™»å½•å“ªä¸ªç»ˆç«¯ï¼Œç™»å½•æ—¶é—´   who</span></span><br><span class="line">root     tty1         2024-04-09 14:54</span><br><span class="line">root     pts/0        2024-04-09 11:09 (10.0.0.1)</span><br><span class="line">root     pts/1        2024-04-09 11:33 (10.0.0.1)</span><br><span class="line"><span class="built_in">tty</span>ä»£è¡¨çš„æ˜¯æœåŠ¡å™¨ç»ˆç«¯ç™»å½•</span><br><span class="line">ptsä»£è¡¨çš„æ˜¯è¿œç¨‹é“¾æ¥å·¥å…·ç™»å½•</span><br><span class="line">[root@localhost ~]# <span class="built_in">whoami</span><span class="comment">## æŸ¥çœ‹å½“å‰ç™»å½•çš„ç”¨æˆ·å</span></span><br><span class="line">root</span><br><span class="line"><span class="comment">## æŸ¥çœ‹ç”¨æˆ·ä¿¡æ¯æ–‡ä»¶</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> /etc/passwd</span><br></pre></td></tr></table></figure><h4 id="â‘¡-etc-passwd">â‘¡ /etc/passwd</h4><p><img src="https://cos.lukme.top/Pic/image-20240409145743758.png" alt="image-20240409145743758"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## ä»¥å†’å·ä¸ºåˆ†éš”ç¬¦çš„æƒ…å†µä¸‹ï¼Œæ–‡ä»¶è¢«åˆ†ä¸º7åˆ—</span></span><br><span class="line">[root@lb02 ~]# <span class="built_in">cat</span> /etc/passwd</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"><span class="built_in">sync</span>:x:5:0:<span class="built_in">sync</span>:/sbin:/bin/sync</span><br><span class="line"></span><br><span class="line">[zls@localhost ~]# useradd wyl -c <span class="string">&#x27;abc&#x27;</span>  æ·»åŠ å¤‡æ³¨</span><br><span class="line"></span><br><span class="line">ç¬¬ä¸€åˆ—ï¼šç”¨æˆ·å</span><br><span class="line">ç¬¬äºŒåˆ—ï¼šå¯†ç å ä½ç¬¦</span><br><span class="line">ç¬¬ä¸‰åˆ—ï¼šç”¨æˆ·çš„uid</span><br><span class="line">ç¬¬å››åˆ—ï¼šç”¨æˆ·æ‰€åœ¨ç»„çš„gid</span><br><span class="line">ç¬¬äº”åˆ—ï¼šç”¨æˆ·çš„æè¿°ä¿¡æ¯ï¼ˆå¤‡æ³¨ã€æ³¨é‡Šï¼‰</span><br><span class="line">ç¬¬å…­åˆ—ï¼šç”¨æˆ·å®¶ç›®å½•æ‰€åœ¨è·¯å¾„</span><br><span class="line">ç¬¬ä¸ƒåˆ—ï¼šç”¨æˆ·ç™»å½•ä½¿ç”¨çš„bash</span><br><span class="line"><span class="comment">##  /sbin/nologin ä¸å…è®¸ç™»å½•çš„ç”¨æˆ· bash</span></span><br></pre></td></tr></table></figure><h4 id="â‘¢-etc-shadow">â‘¢ etc/shadow</h4><p><img src="https://cos.lukme.top/Pic/image-20240409150039322.png" alt="image-20240409150039322"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">daemon:*:17834:0:99999:7:2:6627567:</span><br><span class="line">ç¬¬ä¸€åˆ—ï¼šç”¨æˆ·å</span><br><span class="line">ç¬¬äºŒåˆ—ï¼šå¯†ç    *å’Œ!! ä»£è¡¨æ²¡æœ‰å¯†ç </span><br><span class="line">ç¬¬ä¸‰åˆ—ï¼šå¯†ç ä¿®æ”¹çš„æ—¶é—´ ä»1970å¹´å¼€å§‹è®¡ç®—åˆ°ä¸Šä¸€æ¬¡å˜æ›´å¯†ç çš„æ—¶é—´è¿‡äº†å¤šå°‘å¤©</span><br><span class="line">ç¬¬å››åˆ—ï¼šå¯†ç æœ€å°‘ä½¿ç”¨å¤©æ•° 0ä»£è¡¨æ— é™åˆ¶</span><br><span class="line">ç¬¬äº”åˆ—ï¼šå¯†ç æœ€é•¿ä½¿ç”¨å¤©æ•° 99999ä»£è¡¨æ— é™åˆ¶</span><br><span class="line">ç¬¬å…­åˆ—ï¼šå¯†ç åˆ°æœŸä¹‹å‰å¤šå°‘å¤©å¼€å§‹æé†’ æå‰7å¤©æé†’éœ€è¦æ”¹å¯†ç äº†</span><br><span class="line">ç¬¬ä¸ƒåˆ—ï¼šå¯†ç è¿‡æœŸåNå¤©å¼ºåˆ¶å˜æ›´å¯†ç  å¯†ç è¿‡æœŸå2å¤©ï¼Œå¼ºåˆ¶æ”¹å¯†ç </span><br><span class="line">ç¬¬å…«åˆ—ï¼šè´¦æˆ·å¤±æ•ˆæ—¶é—´ï¼Œä»1970å¹´å¼€å§‹è®¡ç®—å¤šå°‘å¤©</span><br><span class="line">ç¬¬ä¹åˆ—ï¼šç©º ä¿ç•™åˆ—</span><br></pre></td></tr></table></figure><h3 id="2-ç”¨æˆ·ç®¡ç†">2.ç”¨æˆ·ç®¡ç†</h3><h4 id="â‘ -åˆ›å»ºç”¨æˆ·æ¡ˆä¾‹">â‘  åˆ›å»ºç”¨æˆ·æ¡ˆä¾‹</h4><p>ç»ƒä¹ åˆ›å»º1000ä¸ªç”¨æˆ·ï¼Œå¯†ç éƒ½ä¸º1</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;1&#x27;</span> |passwd --stdin lgj</span><br><span class="line"></span><br><span class="line">ï¼›åˆ†å·å¯ä»¥è¡”æ¥å¤šä¸ªå‘½ä»¤æ‰§è¡Œï¼Œ</span><br><span class="line">&amp;&amp;è¡”æ¥å¤šä¸ªå‘½ä»¤ï¼Œä½†æ˜¯éœ€è¦åˆ¤æ–­å‰é¢çš„å‘½ä»¤æ‰§è¡ŒæˆåŠŸåï¼Œå†æ‰§è¡Œåé¢çš„å‘½ä»¤</span><br><span class="line"><span class="comment">#è¡”æ¥å‘½ä»¤</span></span><br><span class="line">useradd lgj1;<span class="built_in">echo</span> <span class="string">&quot;1&quot;</span> | passwd --stdin lgj1  ==&gt;;åˆ†å·ä¸¤è¾¹åˆ†åˆ«æ‰§è¡Œç»“æœ</span><br><span class="line"></span><br><span class="line">[root@lb01 ~]# <span class="built_in">seq</span> 1000|awk <span class="string">&#x27;&#123;print &quot;useradd lgj&quot;$1&quot;;echo 1|passwd --stdin lgj&quot;$1&#125;&#x27;</span>|bash</span><br><span class="line"></span><br><span class="line"><span class="comment">#è„šæœ¬</span></span><br><span class="line">vim useradd.sh</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..1000&#125;; <span class="keyword">do</span></span><br><span class="line">  username=<span class="string">&quot;lgj<span class="variable">$i</span>&quot;</span></span><br><span class="line">  useradd <span class="variable">$username</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;1&quot;</span> | passwd --stdin <span class="variable">$username</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">è¿è¡Œshæ–‡ä»¶</span><br><span class="line">sh useradd.sh &gt; /dev/null</span><br></pre></td></tr></table></figure><h4 id="â‘¡-ç”¨æˆ·çº¦å®šå’Œè§„èŒƒ">â‘¡ ç”¨æˆ·çº¦å®šå’Œè§„èŒƒ</h4><p><strong>==Linuxé‡Œç”¨æˆ·è§„èŒƒ==</strong></p><table><thead><tr><th style="text-align:center"></th><th style="text-align:center">centOS7</th><th style="text-align:center"></th><th style="text-align:center">centOS7</th></tr></thead><tbody><tr><td style="text-align:center">ç”¨æˆ·UID</td><td style="text-align:center">ä½œç”¨</td><td style="text-align:center">ç”¨æˆ·UID</td><td style="text-align:center">ä½œç”¨</td></tr><tr><td style="text-align:center">0</td><td style="text-align:center">ç³»ç»Ÿç®¡ç†å‘˜ï¼ˆè¶…çº§ç”¨æˆ·ï¼‰</td><td style="text-align:center">0</td><td style="text-align:center">ç³»ç»Ÿç®¡ç†å‘˜ï¼ˆè¶…çº§ç”¨æˆ·ï¼‰</td></tr><tr><td style="text-align:center">1-200</td><td style="text-align:center">ç³»ç»Ÿç”¨æˆ·ï¼Œç”±ç³»ç»Ÿåˆ†é…ç»™è¿›ç¨‹ä½¿ç”¨</td><td style="text-align:center">1-500</td><td style="text-align:center">ç³»ç»Ÿç”¨æˆ·ï¼Œç”±ç³»ç»Ÿåˆ†é…ç»™è¿›ç¨‹ä½¿ç”¨è¿è¡ŒæœåŠ¡ï¼Œä¸éœ€è¦ç™»å½•ç³»ç»Ÿ</td></tr><tr><td style="text-align:center">201-999</td><td style="text-align:center">ç³»ç»Ÿç”¨æˆ·ï¼Œè¿è¡ŒæœåŠ¡ï¼Œä¸éœ€è¦ç™»å½•ç³»ç»Ÿ</td><td style="text-align:center">500+</td><td style="text-align:center">å¸¸è§„çš„æ™®é€šç”¨æˆ·</td></tr><tr><td style="text-align:center">1000+</td><td style="text-align:center">å¸¸è§„çš„æ™®é€šç”¨æˆ·</td><td style="text-align:center"><strong>/</strong></td><td style="text-align:center"><strong>/</strong></td></tr></tbody></table><h4 id="â‘¢-ä¿®æ”¹å¯†ç -chage">â‘¢ ä¿®æ”¹å¯†ç  chage</h4><p><strong>==äº†è§£==</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">bin:*:17834:0:99999:7:10::</span><br><span class="line">-d //è®¾ç½®æœ€è¿‘ä¸€æ¬¡æ›´æ”¹å¯†ç æ—¶é—´, 0ä¸‹æ¬¡ç™»é™†ç³»ç»Ÿå¼ºåˆ¶ä¿®æ”¹å¯†ç  // /etc/shadow ç¬¬ä¸‰åˆ—</span><br><span class="line">-m //è®¾ç½®ç”¨æˆ·ä¸¤æ¬¡æ”¹å˜å¯†ç ä¹‹é—´ä½¿ç”¨<span class="string">&quot;æœ€å°å¤©æ•°&quot;</span> // /etc/shadow ç¬¬å››åˆ—</span><br><span class="line">-M //è®¾ç½®ç”¨æˆ·ä¸¤æ¬¡æ”¹å˜å¯†ç ä¹‹é—´ä½¿ç”¨<span class="string">&quot;æœ€å¤§å¤©æ•°&quot;</span> // /etc/shadow ç¬¬äº”åˆ—</span><br><span class="line">-W //è®¾ç½®å¯†ç æ›´æ”¹è­¦å‘Šæ—¶é—´ å°†è¿‡æœŸè­¦å‘Šå¤©æ•°è®¾ä¸ºâ€œè­¦å‘Šå¤©æ•°â€ // /etc/shadow ç¬¬å…­åˆ—</span><br><span class="line">-I //è®¾ç½®å¯†ç è¿‡æœŸå¤©æ•°å, å¯†ç ä¸ºå¤±æ•ˆçŠ¶æ€ // /etc/shadow ç¬¬ä¸ƒåˆ—</span><br><span class="line">-E //è®¾ç½®ç”¨æˆ·è¿‡æœŸæ—¶é—´, è´¦æˆ·å¤±æ•ˆåæ— æ³•ç™»é™† // /etc/shadow ç¬¬å…«åˆ—</span><br><span class="line">-l //æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯</span><br><span class="line">[root@lgj ~]# chage -l lgj</span><br><span class="line">Last password change : Sep 01, 2014    //æœ€è¿‘ä¸€æ¬¡æ›´æ”¹å¯†ç æ—¶é—´</span><br><span class="line">Password expires : Sep 16, 2014    //å¯†ç è¿‡æœŸæ—¶é—´</span><br><span class="line">Password inactive : Sep 21, 2014    //å¯†ç å¤±æ•ˆæ—¶é—´</span><br><span class="line">Account expires : Aug 31, 2015   //ç”¨æˆ·å¤±æ•ˆæ—¶é—´</span><br><span class="line">Minimum number of days between password change : 2 //å¯†ç æœ€çŸ­ä½¿ç”¨æ—¶é—´</span><br><span class="line">Maximum number of days between password change : 15 //å¯†ç æœ€é•¿ä½¿ç”¨æ—¶é—´</span><br><span class="line">Number of days of warning before password expires : 7 //å¯†ç è¿‡æœŸå‰è­¦å‘Šå¤©æ•°</span><br></pre></td></tr></table></figure><h4 id="â‘£-åˆ›å»ºç”¨æˆ·ï¼ˆå¢ï¼‰">â‘£ åˆ›å»ºç”¨æˆ·ï¼ˆå¢ï¼‰</h4><table><thead><tr><th style="text-align:center">é€‰é¡¹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td style="text-align:center">-u</td><td>æŒ‡å®šuid</td></tr><tr><td style="text-align:center">-g</td><td>æŒ‡å®šgidï¼ˆå¿…é¡»æŒ‡å®šä¸€ä¸ªå·²å­˜åœ¨çš„ç»„ï¼‰</td></tr><tr><td style="text-align:center">-c</td><td>æŒ‡å®šç”¨æˆ·çš„å¤‡æ³¨ï¼ˆæ³¨é‡Šï¼‰</td></tr><tr><td style="text-align:center">-d</td><td>æŒ‡å®šç”¨æˆ·çš„å®¶ç›®å½•</td></tr><tr><td style="text-align:center">-M</td><td>ä¸åˆ›å»ºå®¶ç›®å½•</td></tr><tr><td style="text-align:center">-s</td><td>æŒ‡å®šç”¨æˆ·ç™»å½•çš„shell</td></tr><tr><td style="text-align:center">-G</td><td>æŒ‡å®šé™„åŠ ç»„</td></tr><tr><td style="text-align:center">-r</td><td>åˆ›å»ºä¸€ä¸ªç”¨æˆ·uidåœ¨200 - 999ä¹‹é—´</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨useraddåˆ›å»ºç”¨æˆ·å°†å½±å“åˆ°å››ä¸ªæ–‡ä»¶</span><br><span class="line">/etc/passwdå­˜æ”¾ç”¨æˆ·åç­‰ä¿¡æ¯</span><br><span class="line">/etc/shadowå­˜æ”¾å¯†ç ç­‰ä¿¡æ¯</span><br><span class="line">/etc/groupå­˜æ”¾ç»„ä¿¡æ¯</span><br><span class="line">/etc/gshadowå­˜æ”¾ç»„å¯†ç ä¿¡æ¯</span><br><span class="line"></span><br><span class="line">å¦‚æœæ‰‹åŠ¨åˆ›å»ºç”¨æˆ·ä¸ä½¿ç”¨å‘½ä»¤ï¼Œéœ€è¦åˆ†åˆ«åœ¨1./etc/passwd  2./etc/shadow  3./etc/group  4./etc/gshadowåˆ›å»ºç”¨æˆ·åç»„ç­‰ä¿¡æ¯ï¼Œ5.åˆ›å»ºç”¨æˆ·åçš„å®¶ç›®å½•6.æ‹·è´ç¯å¢ƒå˜é‡æ–‡ä»¶<span class="built_in">cp</span> /etc/skel/.bash* /home/abc111/</span><br><span class="line"></span><br><span class="line"><span class="comment">##åˆ›å»ºç”¨æˆ·å‘½ä»¤ useradd</span></span><br><span class="line">useradd [é€‰é¡¹]... ç”¨æˆ·å</span><br><span class="line"></span><br><span class="line">åˆ›å»ºç”¨æˆ·åæ˜¯lgj2 uid1004 ç”¨æˆ·ç»„1001 å¤‡æ³¨-cæ˜¯é«˜æ°å¤§å¤§   <span class="comment">#//å…¶ä¸­-gæŒ‡å®šgidéœ€è¦æŒ‡å®šå·²ç»å­˜åœ¨çš„uid</span></span><br><span class="line">[root@lb01 ~]# useradd -u 1004 -g 1001 -c é«˜æ°å¤§å¤§ lgj2</span><br><span class="line"></span><br><span class="line">-dåˆ›å»ºç”¨æˆ·lgj6å¹¶æŒ‡å®šå®¶ç›®å½•ï¼ˆå¦‚æœæŒ‡å®šçš„å®¶ç›®å½•å·²ç»å­˜åœ¨ï¼Œå¦‚æŒ‡å®šaaaï¼ˆå­˜åœ¨ï¼‰ä¸ºå®¶ç›®å½•ï¼Œä¼šæŠ¥é”™ç›®å½•å®¶ç›®å½•å·²ç»å­˜åœ¨ï¼Œä½†æ˜¯è¿˜æ˜¯ä¼šåˆ›å»ºæœ‰lgj6ç”¨æˆ·ï¼Œä½†æ˜¯æ²¡æœ‰ç¯å¢ƒå˜é‡ï¼‰</span><br><span class="line">[root@lb01 ~]# useradd lgj6 -d /root/aaa/lgj666</span><br><span class="line">[root@lb01 ~]# useradd lgj7 -M   ä¸åˆ›å»ºå®¶ç›®å½•</span><br><span class="line"></span><br><span class="line"><span class="comment">## æŒ‡å®šç”¨æˆ·é™„åŠ ç»„</span></span><br><span class="line">[root@lb01 ~]# useradd lgj7 -G 1001,1005</span><br><span class="line">[root@lb01 ~]# useradd lgj8 -G lgj,lgj5    åŒæ ·æŒ‡å®šçš„ç»„éœ€è¦å·²å­˜åœ¨</span><br><span class="line">[root@lb01 ~]# <span class="built_in">id</span> lgj7</span><br><span class="line">uid=1007(lgj7) gid=1007(lgj7) <span class="built_in">groups</span>=1007(lgj7),1001(lgj),1005(lgj5)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="â‘¤-ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯-æ”¹ï¼‰">â‘¤ ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯(æ”¹ï¼‰</h4><table><thead><tr><th>ç”¨æˆ·</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>-u</td><td>æŒ‡å®šç”¨æˆ·çš„uid</td></tr><tr><td>-g</td><td>æŒ‡å®šç”¨æˆ·çš„gidï¼Œæ›´æ¢ç”¨æˆ·æ‰€åœ¨çš„ä¸»ç»„ï¼ˆæŒ‡å®šçš„ç»„å¿…é¡»å­˜åœ¨ï¼‰</td></tr><tr><td>-c</td><td>ä¿®æ”¹å¤‡æ³¨ä¿¡æ¯</td></tr><tr><td>-d</td><td>ä¿®æ”¹ç”¨æˆ·å®¶ç›®å½•ï¼Œä¿®æ”¹/etc/passwdæ–‡ä»¶å†…å®¹</td></tr><tr><td>-m</td><td>é…åˆ-dé€‰é¡¹ï¼Œä¿®æ”¹å®Œå®¶ç›®å½•åï¼Œè¿ç§»å®¶ç›®å½•</td></tr><tr><td>-s</td><td>ä¿®æ”¹ç”¨æˆ·ç™»å½•çš„shell</td></tr><tr><td>-G</td><td>ä¿®æ”¹ç”¨æˆ·çš„é™„åŠ ç»„ï¼Œä¼šæ›¿æ¢åŸæ¥çš„é™„åŠ ç»„</td></tr><tr><td>-a</td><td>ä¿®æ”¹ç”¨æˆ·çš„é™„åŠ ç»„ï¼Œé…åˆ-Gä½¿ç”¨ï¼Œè¿½åŠ é™„åŠ ç»„</td></tr><tr><td>-L</td><td>é”å®šç”¨æˆ·ï¼ˆå°å·ï¼‰</td></tr><tr><td>-U</td><td>è§£é”ç”¨æˆ·ï¼ˆè§£å°ï¼‰</td></tr><tr><td>-l</td><td>ä¿®æ”¹ç”¨æˆ·å</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## user modify</span></span><br><span class="line">usermod [é€‰é¡¹]... ç”¨æˆ·å</span><br><span class="line"></span><br><span class="line">ä¿®æ”¹ç”¨æˆ·lgj2çš„uidä¸º1002ï¼Œgidä¸º1000ï¼Œå¤‡æ³¨ä¿¡æ¯æ˜¯ä½ å¥½   <span class="comment">#æŒ‡å®šçš„gidéœ€è¦å·²å­˜åœ¨</span></span><br><span class="line">[root@lb01 ~]# usermod  lgj2 -u 1002 -g 1000 -c ä½ å¥½ </span><br><span class="line"></span><br><span class="line"><span class="comment">## ä¿®æ”¹ç”¨æˆ·å®¶ç›®å½• æ³¨æ„ï¼šä¸èƒ½åªä½¿ç”¨-d</span></span><br><span class="line">[root@localhost ~]# usermod zls000 -d /home/zls000å®¶ç›®å½•ä¸‹çš„ç¯å¢ƒå˜é‡ä¸ä¼šè¿ç§»è¿‡å»</span><br><span class="line">[root@localhost ~]# usermod zls66 -m -d /opt/zls666   éœ€è¦é…åˆ-mä½¿ç”¨</span><br><span class="line"></span><br><span class="line">å¦‚æœlgj2ä¸»è¦ç»„ä¸åœ¨lgj2é‡Œï¼ˆé€šè¿‡usermodä¿®æ”¹äº†ï¼‰ï¼Œé‚£ä¹ˆä½¿ç”¨userdelåˆ é™¤ç”¨æˆ·çš„æ—¶å€™lgj2ç”¨æˆ·ç»„ä¸ä¼šè¢«åˆ é™¤ï¼Œä¼šæé†’lgj2ç”¨æˆ·çš„ç°åœ¨ç”¨æˆ·ç»„ä¸æ˜¯lgj2çš„ä¸»è¦ç»„</span><br><span class="line"></span><br><span class="line">[root@lb01 ~]# usermod lgj -G 0   ä¿®æ”¹lgjçš„é™„åŠ ç»„ï¼ˆè¦†ç›–åŸæœ‰çš„ï¼‰</span><br><span class="line">[root@lb01 ~]# usermod lgj -aG 100ï¼Œ110   ä¿®æ”¹lgjçš„é™„åŠ ç»„ï¼ˆè¿½åŠ ç”¨æˆ·ç»„ï¼‰</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¿®æ”¹ç”¨æˆ·ç™»å½•çš„shell</span></span><br><span class="line">[root@lb01 ~]# usermod lgj -s /sbin/nologin</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¿®æ”¹ç”¨æˆ·å</span></span><br><span class="line">[root@lb01 ~]# usermod lgj1 -l lgj2  </span><br><span class="line">å¦‚æœä¿®æ”¹å®Œå°†æé†’æ—§çš„é‚®ç®±lgj1å°†ä¸å±äºlgj1ç”¨æˆ·äº†ï¼Œvar/spool/mail/</span><br></pre></td></tr></table></figure><h4 id="â‘¥-åˆ é™¤ç”¨æˆ·ï¼ˆåˆ ï¼‰">â‘¥ åˆ é™¤ç”¨æˆ·ï¼ˆåˆ ï¼‰</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># user delete</span></span><br><span class="line">userdel [é€‰é¡¹]... ç”¨æˆ·å</span><br><span class="line"><span class="comment">## ç›´æ¥åˆ é™¤ç”¨æˆ·ï¼Œç±»ä¼¼äºåœ¨/etc/passwdæ–‡ä»¶ä¸­æŠŠè¯¥ç”¨æˆ·è¡Œä¿¡æ¯åˆ é™¤ï¼ˆå®¶ç›®å½•è¿˜åœ¨å’Œæ‰€æœ‰ç”¨æˆ·ç›¸å…³æ–‡ä»¶éƒ½åœ¨ï¼‰</span></span><br><span class="line">[root@localhost ~]# userdel abd</span><br><span class="line"><span class="comment">## é€’å½’åˆ é™¤ç”¨æˆ·åŠç”¨æˆ·æ‰€æœ‰ç›¸å…³æ–‡ä»¶</span></span><br><span class="line">[root@localhost ~]# userdel -r wyl</span><br><span class="line"></span><br><span class="line"><span class="comment">## å› ä¸ºç”¨æˆ·åˆ›å»ºæ—¶æ²¡æœ‰åˆ›å»ºå®¶ç›®å½•ï¼Œæ‰€ä»¥ä¼šæœ‰æç¤ºï¼Œä½†æ˜¯ç”¨æˆ·å®é™…ä¸Šè¿˜æ˜¯è¢«åˆ é™¤äº†</span></span><br><span class="line">[root@localhost ~]# userdel -r zls888</span><br><span class="line">userdel: zls888 home directory (/home/zls888) not found</span><br></pre></td></tr></table></figure><hr><h4 id="â‘¦-ç”¨æˆ·æ‰©å±•çŸ¥è¯†">â‘¦ ç”¨æˆ·æ‰©å±•çŸ¥è¯†</h4><p>åˆ›å»ºç”¨æˆ·æ—¶å€™ä¼šä»¥ä¸‹ä¸¤ä¸ªæ–‡ä»¶ä½œä¸ºå‚ç…§ç‰©</p><p>/etc/login.defs</p><p>/etc/defaults/useradd</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## åˆ›å»ºç”¨æˆ·æ—¶ï¼Œuseraddå‘½ä»¤éœ€è¦è¯»å–çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">è¿‡æ»¤ä¸éœ€è¦çš„ç©ºè¡Œ</span><br><span class="line">[root@localhost ~]# grep -i <span class="string">&#x27;^[a-z]&#x27;</span> /etc/login.defs </span><br><span class="line">[root@localhost ~]# grep -Ev <span class="string">&#x27;^$|^#&#x27;</span> /etc/login.defs</span><br><span class="line"><span class="comment">## ç”¨æˆ·å­˜æ”¾é‚®ä»¶çš„ç›®å½•</span></span><br><span class="line">MAIL_DIR/var/spool/mail</span><br><span class="line"><span class="comment">## ç”¨æˆ·é»˜è®¤å¯†ç æœ€é•¿ä½¿ç”¨å¤©æ•°</span></span><br><span class="line">PASS_MAX_DAYS 99999</span><br><span class="line"><span class="comment">## ç”¨æˆ·é»˜è®¤å¯†ç æœ€çŸ­ä½¿ç”¨å¤©æ•°</span></span><br><span class="line">PASS_MIN_DAYS 0</span><br><span class="line"><span class="comment">## å¯†ç æœ€å°é•¿åº¦5ä½æ•°</span></span><br><span class="line">PASS_MIN_LEN 5</span><br><span class="line"><span class="comment">## å¯†ç å¿«è¿‡æœŸåï¼Œæå‰7å¤©æé†’</span></span><br><span class="line">PASS_WARN_AGE 7</span><br><span class="line"><span class="comment">## æ™®é€šç”¨æˆ·æœ€å°UID</span></span><br><span class="line">UID_MIN 1000</span><br><span class="line"><span class="comment">## æ™®é€šç”¨æˆ·æœ€å¤§UID</span></span><br><span class="line">UID_MAX 60000</span><br><span class="line"><span class="comment">## ç³»ç»Ÿç”¨æˆ·æœ€å°UID</span></span><br><span class="line">SYS_UID_MIN 201</span><br><span class="line"><span class="comment">## ç³»ç»Ÿç”¨æˆ·æœ€å¤§UID</span></span><br><span class="line">SYS_UID_MAX 999</span><br><span class="line"><span class="comment">## ç»„æœ€å°ID</span></span><br><span class="line">GID_MIN 1000</span><br><span class="line"><span class="comment">## ç»„æœ€å¤§ID</span></span><br><span class="line">GID_MAX 60000</span><br><span class="line"><span class="comment">## ç³»ç»Ÿç»„æœ€å°ID</span></span><br><span class="line">SYS_GID_MIN 201</span><br><span class="line"><span class="comment">## ç³»ç»Ÿç»„æœ€å¤§ID</span></span><br><span class="line">SYS_GID_MAX 999</span><br><span class="line"><span class="comment">## é»˜è®¤æƒ…å†µä¸‹ï¼Œåˆ›å»ºç”¨æˆ·ä¼šåˆ›å»ºè¯¥ç”¨æˆ·çš„å®¶ç›®å½•</span></span><br><span class="line">CREATE_HOME <span class="built_in">yes</span></span><br><span class="line"><span class="comment">## åˆ›å»ºç”¨æˆ·å®¶ç›®å½•æ—¶ï¼Œæƒé™çš„umaskä¸º077ï¼Œä¹Ÿå°±æ˜¯ç”¨æˆ·å®¶ç›®å½•çš„ç›®å½•æƒé™ä¸º700</span></span><br><span class="line">UMASK 077</span><br><span class="line"><span class="comment">## åˆ›å»ºç”¨æˆ·æ—¶ï¼Œæ˜¯å¦åˆ›å»ºå‡ºç”¨æˆ·çš„åŒåç»„ yesï¼šåˆ›å»º noï¼šä¸åˆ›å»º</span></span><br><span class="line">USERGROUPS_ENAB <span class="built_in">yes</span></span><br><span class="line"><span class="comment">## ç”¨æˆ·å¯†ç çš„åŠ å¯†ç®—æ³•</span></span><br><span class="line">ENCRYPT_METHOD SHA512</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## åˆ›å»ºç”¨æˆ·æ—¶ï¼Œuseraddå‘½ä»¤éœ€è¦è¯»å–çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@localhost ~] <span class="built_in">cat</span> /etc/default/useradd</span><br><span class="line"><span class="comment">## å¦‚æœ/etc/login.defs ä¸­çš„USERGROUPS_ENABæ˜¯yesï¼Œé‚£å°±ä¸è¯»å–æ”¹è¡Œé…ç½®</span></span><br><span class="line"><span class="comment">## å¦‚æœ/etc/login.defs ä¸­çš„USERGROUPS_ENABæ˜¯noï¼Œé‚£å°±èµ°è¯¥è¡Œé…ç½®ï¼ŒæŠŠåˆ›å»ºçš„ç”¨æˆ·åŠ å…¥gidä¸º100çš„ç»„</span></span><br><span class="line">GROUP=100</span><br><span class="line"><span class="comment">## åˆ›å»ºç”¨æˆ·æ—¶ï¼Œé»˜è®¤ç”¨æˆ·å®¶ç›®å½•æ”¾åœ¨/homeä¸‹</span></span><br><span class="line">HOME=/home</span><br><span class="line"><span class="comment">## ç”¨æˆ·è´¦æˆ·æœ‰æ²¡æœ‰æœŸé™ -1è¡¨ç¤ºä¸å¯ç”¨</span></span><br><span class="line">INACTIVE=-1</span><br><span class="line"><span class="comment">## è´¦å·ç»ˆæ­¢æ—¥æœŸï¼Œä¸è®¾ç½®è¡¨ç¤ºä¸å¯ç”¨</span></span><br><span class="line">EXPIRE=</span><br><span class="line"><span class="comment">## ç”¨æˆ·ç™»å½•æ—¶çš„shell</span></span><br><span class="line">SHELL=/bin/bash</span><br><span class="line"><span class="comment">## ç”¨æˆ·å®¶ç›®å½•ä¸‹çš„ç¯å¢ƒå˜é‡æ–‡ä»¶å­˜æ”¾åŸå§‹ç›®å½•</span></span><br><span class="line">SKEL=/etc/skel</span><br><span class="line"><span class="comment">## åˆ›å»ºç”¨æˆ·æ˜¯å¦åŒæ—¶åˆ›å»ºé‚®ç®±</span></span><br><span class="line">CREATE_MAIL_SPOOL=<span class="built_in">yes</span></span><br></pre></td></tr></table></figure><h4 id="â‘§ç”¨æˆ·å¯†ç ç®¡ç†">â‘§ç”¨æˆ·å¯†ç ç®¡ç†</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">passwd ç”¨æˆ·å</span><br><span class="line"><span class="comment">## é»˜è®¤ä¿®æ”¹å½“å‰ç™»å½•ç”¨æˆ·çš„å¯†ç </span></span><br><span class="line">[root@localhost ~]# passwd</span><br><span class="line"></span><br><span class="line"><span class="comment">## è¯¥å‘½ä»¤åªæœ‰è¶…çº§ç”¨æˆ·å¯ä»¥æ‰§è¡Œ</span></span><br><span class="line">[root@localhost ~]# passwd zls</span><br><span class="line"></span><br><span class="line"><span class="comment">## æ™®é€šç”¨æˆ·åªèƒ½ä¿®æ”¹è‡ªå·±çš„å¯†ç </span></span><br><span class="line">[zls@localhost ~]$ passwd</span><br><span class="line">Changing password <span class="keyword">for</span> user zls.</span><br><span class="line">Changing password <span class="keyword">for</span> zls.</span><br><span class="line">(current) UNIX password:</span><br><span class="line">åŸå¯†ç ï¼š</span><br><span class="line">æ–°å¯†ç ï¼š</span><br><span class="line">ç¡®è®¤å¯†ç ï¼š</span><br><span class="line"></span><br><span class="line"><span class="comment">## å…äº¤äº’æ”¹å¯†ç </span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;å¯†ç &#x27;</span>|passwd --stdin ç”¨æˆ·å</span><br><span class="line">CMDBï¼šèµ„äº§ç®¡ç†ç³»ç»Ÿ</span><br><span class="line"></span><br><span class="line"><span class="comment">## ç”Ÿæˆéšæœºå¯†ç </span></span><br><span class="line">[root@localhost ~]# <span class="built_in">echo</span> <span class="variable">$RANDOM</span>|<span class="built_in">md5sum</span>|<span class="built_in">cut</span> -c <span class="string">&#x27;1-10&#x27;</span></span><br><span class="line">be1e4bbb9b</span><br><span class="line">md5ï¼šæ ¡éªŒæ–‡ä»¶å®Œæ•´æ€§</span><br><span class="line"><span class="built_in">md5sum</span>ï¼šå¯ä»¥ç»™ä¸€ä¸ªå­—ç¬¦ä¸²ç”Ÿæˆä¸€æ®µåŠ å¯†åçš„å­—ç¬¦ä¸²</span><br><span class="line"><span class="comment"># -lï¼šæŒ‡å®šå¯†ç æ€»é•¿åº¦</span></span><br><span class="line"><span class="comment"># -dï¼šæŒ‡å®šæ•°å­—çš„ä¸ªæ•°</span></span><br><span class="line"><span class="comment"># -cï¼šæŒ‡å®šå°å†™å­—æ¯ä¸ªæ•°</span></span><br><span class="line"><span class="comment"># -Cï¼šæŒ‡å®šå¤§å†™å­—æ¯ä¸ªæ•°</span></span><br><span class="line"><span class="comment"># -sï¼šæŒ‡å®šç‰¹æ®Šç¬¦å·ä¸ªæ•°</span></span><br><span class="line">[root@localhost ~]# mkpasswd -l 24 -d 3 -c 6 -C 7 -s 8</span><br><span class="line">%t[.xl5&amp;74<span class="string">&quot;LP&#x27;inQPr+_PWY</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure><h3 id="3-ç”¨æˆ·ç»„ç®¡ç†">3.ç”¨æˆ·ç»„ç®¡ç†</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##ç›¸å…³æ–‡ä»¶</span></span><br><span class="line">/etc/group</span><br><span class="line">/etc/gshadow</span><br><span class="line"><span class="comment">#groupæ¯åˆ—ä½œç”¨</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">head</span> -1 /etc/group</span><br><span class="line">root:x:0:zls444444,zls666</span><br><span class="line">ç¬¬ä¸€åˆ—ï¼šç»„å</span><br><span class="line">ç¬¬äºŒåˆ—ï¼šç»„å¯†ç å ä½ç¬¦</span><br><span class="line">ç¬¬ä¸‰åˆ—ï¼šç»„GID</span><br><span class="line">ç¬¬å››åˆ—ï¼šç»„ä¸­çš„é™„åŠ æˆå‘˜</span><br><span class="line"></span><br><span class="line"><span class="comment">#gshadowæ¯åˆ—ä½œç”¨</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">head</span> -1 /etc/gshadow</span><br><span class="line">root:::zls444444,zls666</span><br><span class="line">root:$6<span class="variable">$q0sHS</span>/5GA2D/ARX<span class="variable">$KlEkprHkTddlN9tTej7</span>/ONeMswVmIFASVnhTQMfwN.ue2hDTmqlqXhiM</span><br><span class="line">b6oBz8vDCQ/zBzDU2gS88j3pNoIXO.::zls444444,zls666</span><br><span class="line">ç¬¬ä¸€åˆ—ï¼šç»„å</span><br><span class="line">ç¬¬äºŒåˆ—ï¼šç»„å¯†ç </span><br><span class="line">ç¬¬ä¸‰åˆ—ï¼šç»„ç®¡ç†å‘˜</span><br><span class="line">ç¬¬å››åˆ—ï¼šç»„ä¸­çš„é™„åŠ æˆå‘˜</span><br></pre></td></tr></table></figure><h4 id="ç»„ç›¸å…³å‘½ä»¤">ç»„ç›¸å…³å‘½ä»¤</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å¢</span></span><br><span class="line">groupadd [é€‰é¡¹] ç»„å</span><br><span class="line"><span class="comment">## åˆ›å»ºç»„</span></span><br><span class="line">[root@localhost ~]# groupadd ooo</span><br><span class="line"><span class="comment">## åˆ›å»ºç»„å¹¶æŒ‡å®šGID</span></span><br><span class="line">[root@localhost ~]# groupadd ppp -g 666</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ”¹</span></span><br><span class="line"><span class="comment">## ä¿®æ”¹ç»„çš„gid</span></span><br><span class="line">[root@localhost ~]# groupmod ooo -g 888</span><br><span class="line"><span class="comment">## ä¿®æ”¹ç»„å</span></span><br><span class="line">[root@localhost ~]# groupmod ooo -n xxx</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ </span></span><br><span class="line">[root@localhost ~]# groupdel xxx</span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾ç½®ç»„å¯†ç </span></span><br><span class="line">[root@localhost ~]# gpasswd ppp</span><br><span class="line">Changing the password <span class="keyword">for</span> group ppp</span><br><span class="line">New Password</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ‡æ¢ç»„èº«ä»½</span></span><br><span class="line">[root@localhost ~]# newgrp ç»„å</span><br></pre></td></tr></table></figure><h3 id="4-ç”¨æˆ·åˆ‡æ¢-ææƒ">4.ç”¨æˆ·åˆ‡æ¢ &amp; ææƒ</h3><h4 id="â‘ ç”¨æˆ·åˆ‡æ¢">â‘ ç”¨æˆ·åˆ‡æ¢</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">su åˆ‡æ¢ç”¨æˆ·ï¼Œä½¿ç”¨æ™®é€šç”¨æˆ·ç™»å½•ï¼Œç„¶åä½¿ç”¨suå‘½ä»¤åˆ‡æ¢åˆ°rootã€‚</span><br><span class="line">ä¼˜ç‚¹ï¼šç®€å•ï¼Œæ–¹ä¾¿</span><br><span class="line">ç¼ºç‚¹ï¼šéœ€è¦çŸ¥é“rootå¯†ç ,ä¸å®‰å…¨ï¼Œåˆ‡æ¢åˆ°rootæ²¡æœ‰æ—¥å¿—å®¡è®¡åŠŸèƒ½</span><br><span class="line"></span><br><span class="line">su - ç”¨æˆ·å -c <span class="string">&#x27;å‘½ä»¤&#x27;</span>ï¼ˆ<span class="string">&#x27;touch 1.txt&#x27;</span>ï¼‰ å¯ä»¥ä¸åˆ‡æ¢ç”¨æˆ·ä½†æ˜¯ä»¥æ™®é€šç”¨æˆ·æ‰§è¡Œå‘½ä»¤</span><br><span class="line"></span><br><span class="line">su - ç”¨æˆ·åsu ç”¨æˆ·åï¼Œä¼šå°‘åŠ è½½ä¸€ä¸ªprofileçš„å…¨å±€å˜é‡</span><br><span class="line"><span class="comment">## ä»rootç”¨æˆ·åˆ‡æ¢åˆ°å…¶ä»–ç”¨æˆ·ï¼Œä¸éœ€è¦è¾“å…¥å¯†ç </span></span><br><span class="line"><span class="comment">## æ™®é€šç”¨æˆ·åˆ‡æ¢åˆ°å…¶ä»–ç”¨æˆ·ï¼Œéœ€è¦è¾“å…¥å¯†ç </span></span><br><span class="line"><span class="comment">## åŠ è½½é¡ºåº</span></span><br><span class="line">/etc/profile &gt; /etc/profile.d/1.sh &gt; /root/.bashrc &gt; /etc/bashrc</span><br><span class="line">/etc/profile</span><br><span class="line">/etc/profile.d/1.sh</span><br><span class="line">.bash_profile</span><br><span class="line">/root/.bashrc</span><br><span class="line">/etc/bashrc</span><br><span class="line">ä¸ªäººé…ç½®æ–‡ä»¶ï¼š ~/.bash_profile ~/.bashrc</span><br><span class="line">å…¨å±€é…ç½®æ–‡ä»¶ï¼š/etc/profile /etc/profile.d/*.sh /etc/bashrc</span><br></pre></td></tr></table></figure><h4 id="â‘¡ç”¨æˆ·èº«ä»½ææƒ">â‘¡ç”¨æˆ·èº«ä»½ææƒ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> ææƒï¼Œå½“éœ€è¦ä½¿ç”¨rootæƒé™æ—¶ï¼Œè¿›è¡Œææƒï¼Œè€Œæ— éœ€åˆ‡æ¢è‡³rootç”¨æˆ·ã€‚</span><br><span class="line">ä¼˜ç‚¹ï¼šå®‰å…¨ï¼Œæ–¹ä¾¿</span><br><span class="line">ç¼ºç‚¹ï¼šå¤æ‚</span><br><span class="line"></span><br><span class="line"><span class="comment">## ææƒæ‰§è¡Œå‘½ä»¤</span></span><br><span class="line">[zls@localhost ~]$ <span class="built_in">sudo</span> <span class="built_in">mkdir</span> /opt/abc</span><br><span class="line">We trust you have received the usual lecture from the <span class="built_in">local</span> System</span><br><span class="line">Administrator. It usually boils down to these three things:</span><br><span class="line"><span class="comment">#1) Respect the privacy of others.</span></span><br><span class="line"><span class="comment">#2) Think before you type.</span></span><br><span class="line"><span class="comment">#3) With great power comes great responsibility.</span></span><br><span class="line">[<span class="built_in">sudo</span>] password <span class="keyword">for</span> zls:</span><br><span class="line">zls is not <span class="keyword">in</span> the sudoers file. This incident will be reported.</span><br><span class="line"></span><br><span class="line"><span class="comment">## é¢å‘åœ£æ—¨ï¼ˆææƒé…ç½®æ–‡ä»¶ï¼‰</span></span><br><span class="line">[root@localhost ~]# vim /etc/sudoers</span><br><span class="line">åœ¨é‡Œé¢æ·»åŠ lgjç”¨æˆ·æƒé™</span><br><span class="line">æˆ–è€…visudoå‘½ä»¤æ·»åŠ ï¼Œä¾‹å¦‚</span><br><span class="line"><span class="comment">## Allow root to run any commands anywhere</span></span><br><span class="line">root    ALL=(ALL)       ALL</span><br><span class="line">lgj     ALL=(ALL)       ALL</span><br><span class="line"></span><br><span class="line">ä¸Šé¢æ³¨é‡Šçš„æœ‰åˆ«åï¼Œå†™ä¸Šåˆ«åå°±å¯ä»¥è®¾ç½®æƒé™ï¼Œæˆ–è€…è‡ªå·±å†™æŸä¸ªå‘½ä»¤çš„ç›®å½•</span><br><span class="line">root    ALL=(ALL)       ALL</span><br><span class="line">lgj     ALL=(ALL)/usr/bin/mkdirï¼ˆè¿™é‡Œä¹Ÿå¯ä¹ŸæŠŠä¸Šé¢æŸä¸ªåˆ«åæ³¨é‡Šå»æ‰ï¼Œå†™ä¸Šåˆ«åå³å¯ä½¿ç”¨é‚£ä¸ªæƒé™ï¼‰</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## è®¾ç½®å‘½ä»¤åˆ«å</span></span><br><span class="line">Cmnd_Alias CREATE = /bin/mkdir,/bin/touch</span><br><span class="line"><span class="comment">## ç”¨æˆ·ææƒæ–¹æ³•ï¼š</span></span><br><span class="line">æ–¹æ³•ä¸€ï¼š</span><br><span class="line"><span class="comment">### visudoä¸è®¾ç½®ç”¨æˆ·å¯†ç </span></span><br><span class="line">[root@localhost ~]# visudo</span><br><span class="line"></span><br><span class="line"><span class="comment">## Allow root to run any commands anywhere</span></span><br><span class="line">root ALL=(ALL) ALL</span><br><span class="line">zls ALL=(ALL) CREATE</span><br><span class="line">cls1 ALL=(ALL) NOPASSWD: ALL</span><br><span class="line"></span><br><span class="line">æ–¹æ³•äºŒï¼šåªè¦ç»™ç”¨æˆ·åŠ å…¥wheelç»„ä¸­ï¼Œå°±æœ‰<span class="built_in">sudo</span>æƒé™</span><br><span class="line"><span class="comment">## Allows people in group wheel to run all commands</span></span><br><span class="line">%wheel ALL=(ALL) ALL</span><br><span class="line">%lgj ALL=(ALL) NOPASSWD: ALL</span><br><span class="line">[root@localhost ~]# useradd lhq1 -G wheel</span><br><span class="line"></span><br><span class="line"><span class="comment">## åˆ‡æ¢æˆæ™®é€šç”¨æˆ·å¯ä»¥æŸ¥çœ‹æˆ‘è¿™ä¸ªç”¨æˆ·èƒ½æ‰§è¡Œå“ªäº›å‘½ä»¤</span></span><br><span class="line">[lhq2@localhost ~]$ <span class="built_in">sudo</span> -l</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ã€4ã€‘æƒé™ç®¡ç†">ã€4ã€‘æƒé™ç®¡ç†</h2><h3 id="1-åŸºæœ¬æƒé™">1.åŸºæœ¬æƒé™</h3><p><img src="https://cos.lukme.top/Pic/image-20240413153515306.png" alt="image-20240413153515306"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">User</span><br><span class="line">Group</span><br><span class="line">Other</span><br><span class="line"><span class="comment">## æ‰€å±ç”¨æˆ·ï¼šå±ä¸»</span></span><br><span class="line"><span class="comment">## æ‰€å±ç”¨æˆ·ç»„ï¼šå±ç»„</span></span><br><span class="line"><span class="comment">## ugoæƒé™</span></span><br><span class="line">//ç”¨æˆ·å¯¹èµ„æºæ¥è¯´, æœ‰ä¸‰ç§è§’è‰²</span><br><span class="line">User(u): å±ä¸»ç”¨æˆ·(æ–‡ä»¶æ‰€æœ‰è€…)</span><br><span class="line">Group(g): å±ç»„ç”¨æˆ·(åŒ…å«ç»„æˆå‘˜)</span><br><span class="line">Other(o): å…¶ä»–ç”¨æˆ·</span><br></pre></td></tr></table></figure><table><thead><tr><th>å­—æ¯</th><th>å«ä¹‰</th><th>å¯¹åº”æƒé™</th></tr></thead><tbody><tr><td>r(read)</td><td>è¯»å–æƒé™</td><td>4</td></tr><tr><td>w(write)</td><td>å†™å…¥æƒé™</td><td>2</td></tr><tr><td>x(execute)</td><td>æ‰§è¡Œæƒé™</td><td>1</td></tr><tr><td>-(æ²¡æœ‰æƒé™)</td><td>æ²¡æœ‰æƒé™</td><td>0</td></tr></tbody></table><h4 id="â‘ -ä¿®æ”¹æƒé™å‘½ä»¤">â‘  ä¿®æ”¹æƒé™å‘½ä»¤</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># change mode</span></span><br><span class="line"><span class="built_in">chmod</span> [é€‰é¡¹] æƒé™ æ–‡ä»¶å</span><br><span class="line"><span class="comment">## æ•°å­—ä¿®æ”¹æ–¹å¼</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> 777 test1.txt</span><br><span class="line">[root@localhost ~]# ll test1.txt</span><br><span class="line">-rwxrwxrwx. 1 root root 0 Apr 12 17:01 test1.txt</span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> 700 test1.txt</span><br><span class="line">[root@localhost ~]# ll test1.txt</span><br><span class="line">-rwx------. 1 root root 0 Apr 12 17:01 test1.txt</span><br><span class="line"><span class="comment">## ugoä¿®æ”¹æ–¹å¼</span></span><br><span class="line"><span class="comment"># åŠ æƒé™</span></span><br><span class="line"><span class="comment">## u+æƒé™ rwx</span></span><br><span class="line"><span class="comment">## g+æƒé™ w</span></span><br><span class="line"><span class="comment">## o+æƒé™ x</span></span><br><span class="line"><span class="comment">## a+æƒé™ å³aæ˜¯all   å¯çœç•¥a +x +r +w +rw +rx +rwx +wx</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> g+xw test1.txt</span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> +x test1.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¿®æ”¹ugoä¸‰ä¸ªæƒé™</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> u=rwx,g=w,o=x test1.txt ä¸å¦‚ç›´æ¥ä¿®æ”¹æ•°å­—æ–¹å¼</span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> 721 test1.txt</span><br><span class="line"><span class="comment">## é€’å½’ä¿®æ”¹ç›®å½•æƒé™</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> -R 222 zls121</span><br><span class="line">[root@localhost ~]# ll -d zls121/</span><br><span class="line">d-w--w--w-. 3 zls121 zls121 139 Apr 12 18:31 zls121/</span><br><span class="line">[root@localhost ~]# ll zls121/</span><br><span class="line">total 0</span><br><span class="line">--w--w--w-. 1 root root 0 Apr 12 18:30 1.txt</span><br><span class="line">--w--w--w-. 1 root root 0 Apr 12 18:30 2.txt</span><br><span class="line">--w--w--w-. 1 root root 0 Apr 12 18:30 3.txt</span><br><span class="line">--w--w--w-. 1 root root 0 Apr 12 18:30 4.txt</span><br><span class="line">[root@localhost ~]# ll zls121/zls1/</span><br><span class="line">total 0</span><br><span class="line">--w--w--w-. 1 root root 0 Apr 12 18:31 1.txt</span><br></pre></td></tr></table></figure><h4 id="â‘¡-æƒé™å¯¹æ–‡ä»¶çš„å½±å“">â‘¡ æƒé™å¯¹æ–‡ä»¶çš„å½±å“</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">å½“æ–‡ä»¶åªæœ‰ræƒé™æ—¶ï¼Œå¯ä»¥æŸ¥çœ‹å†…å®¹ï¼Œä¸èƒ½å†™å…¥ï¼ˆæ–‡ä»¶æ‰€å±ç”¨æˆ·å¯ä»¥ä½¿ç”¨viå¼ºåˆ¶ä¿å­˜ï¼‰ï¼Œä¸èƒ½æ‰§è¡Œ</span><br><span class="line">å½“æ–‡ä»¶åªæœ‰wæƒé™æ—¶ï¼Œä¸èƒ½æŸ¥çœ‹ï¼Œåªèƒ½å†™å…¥ï¼ˆä½¿ç”¨viä¼šè¦†ç›–æ–‡ä»¶å†…å®¹ï¼Œä½¿ç”¨<span class="built_in">echo</span> &gt;&gt;å¯ä»¥è¿½åŠ ï¼‰ï¼Œä¸èƒ½æ‰§è¡Œ</span><br><span class="line">å½“æ–‡ä»¶åªæœ‰xæƒé™æ—¶ï¼Œä¸èƒ½æŸ¥çœ‹ï¼Œä¸èƒ½å†™å…¥ï¼Œä¸èƒ½æ‰§è¡Œ(éƒ½çœ‹ä¸äº†æ— æ³•æ‰§è¡Œ)</span><br><span class="line"></span><br><span class="line">å½“æ–‡ä»¶åªæœ‰rwæƒé™æ—¶ï¼Œå¯ä»¥æŸ¥çœ‹ï¼Œå¯ä»¥å†™å…¥ï¼Œä¸èƒ½æ‰§è¡Œ</span><br><span class="line">å½“æ–‡ä»¶åªæœ‰rxæƒé™æ—¶ï¼Œå¯ä»¥æŸ¥çœ‹ï¼Œä¸èƒ½å†™å…¥ï¼Œå¯ä»¥æ‰§è¡Œ</span><br><span class="line">å½“æ–‡ä»¶åªæœ‰wxæƒé™æ—¶ï¼Œä¸èƒ½çœ‹ï¼Œèƒ½å†™å…¥ï¼Œä¸èƒ½æ‰§è¡Œ</span><br><span class="line"></span><br><span class="line">å½“æ–‡ä»¶æœ‰rwxæƒé™æ—¶ï¼Œå¯ä»¥æŸ¥çœ‹ï¼Œå¯ä»¥å†™å…¥ï¼Œå¯ä»¥æ‰§è¡Œ</span><br><span class="line"></span><br><span class="line"><span class="comment">##æ€»ç»“ï¼šxæƒé™ä¸èƒ½å•ç‹¬å‡ºç°ï¼Œéœ€è¦é…åˆræƒé™ä½¿ç”¨ï¼Œä¹Ÿä¸èƒ½é…åˆwï¼ˆå› ä¸ºæ²¡æœ‰è¯»å–æƒé™ï¼Œå°±ä¸çŸ¥é“æ–‡ä»¶å†…å®¹ï¼Œæ‰€ä»¥æ²¡æ³•æ‰§è¡Œï¼‰</span></span><br></pre></td></tr></table></figure><h4 id="â‘¢-æƒé™å¯¹ç›®å½•çš„å½±å“">â‘¢ æƒé™å¯¹ç›®å½•çš„å½±å“</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[zls@localhost ~]$ ll /opt/</span><br><span class="line"><span class="built_in">ls</span>: cannot open directory /opt/: Permission denied</span><br><span class="line">[zls@localhost ~]$ <span class="built_in">mkdir</span> /opt/zls</span><br><span class="line"><span class="built_in">mkdir</span>: cannot create directory â€˜/opt/zlsâ€™: Permission denied</span><br><span class="line">[zls@localhost ~]$ ./opt</span><br><span class="line">-bash: ./opt: No such file or directory</span><br><span class="line">å½“ç›®å½•æƒé™ä¸º---æ—¶ï¼Œä¸èƒ½æŸ¥çœ‹ï¼Œä¸èƒ½è¿›å…¥ï¼Œä¸èƒ½æ‹·è´ï¼Œä¸èƒ½ç§»åŠ¨ï¼Œä¸èƒ½åˆ›å»ºï¼Œä¸èƒ½åˆ é™¤</span><br><span class="line">å½“ç›®å½•æƒé™ä¸ºræ—¶ï¼Œèƒ½æŸ¥çœ‹ç›®å½•ä¸‹çš„æ–‡ä»¶åï¼ˆçœ‹ä¸åˆ°æ–‡ä»¶å±æ€§ï¼‰ï¼Œä¸èƒ½è¿›å…¥ï¼Œä¸èƒ½æ‹·è´ï¼Œä¸èƒ½ç§»åŠ¨ï¼Œä¸èƒ½åˆ›å»ºï¼Œä¸èƒ½åˆ é™¤</span><br><span class="line">å½“ç›®å½•æƒé™ä¸ºwæ—¶ï¼Œä¸èƒ½æŸ¥çœ‹ï¼Œä¸èƒ½è¿›å…¥ï¼Œä¸èƒ½æ‹·è´ï¼Œä¸èƒ½ç§»åŠ¨ï¼Œä¸èƒ½åˆ›å»ºï¼Œä¸èƒ½åˆ é™¤</span><br><span class="line">å½“ç›®å½•æƒé™ä¸ºxæ—¶ï¼Œä¸èƒ½æŸ¥çœ‹ï¼Œèƒ½è¿›å…¥ï¼Œä¸èƒ½æ‹·è´ï¼Œä¸èƒ½ç§»åŠ¨ï¼Œä¸èƒ½åˆ›å»ºï¼Œä¸èƒ½åˆ é™¤</span><br><span class="line"></span><br><span class="line">å½“ç›®å½•æƒé™ä¸ºrwæ—¶ï¼Œèƒ½æŸ¥çœ‹ç›®å½•ä¸‹çš„æ–‡ä»¶åï¼ˆçœ‹ä¸åˆ°æ–‡ä»¶å±æ€§ï¼‰ï¼Œä¸èƒ½è¿›å…¥ï¼Œä¸èƒ½æ‹·è´ï¼Œä¸èƒ½ç§»åŠ¨ï¼Œä¸èƒ½åˆ›å»ºï¼Œä¸èƒ½åˆ é™¤</span><br><span class="line">å½“ç›®å½•æƒé™ä¸ºrxæ—¶ï¼Œå¯ä»¥æŸ¥çœ‹ï¼Œèƒ½è¿›å…¥ï¼Œèƒ½æ‹·è´ï¼Œä¸èƒ½ç§»åŠ¨ï¼Œä¸èƒ½åˆ›å»ºï¼Œä¸èƒ½åˆ é™¤</span><br><span class="line">å½“ç›®å½•æƒé™ä¸ºwxæ—¶ï¼Œä¸èƒ½æŸ¥çœ‹ï¼Œèƒ½è¿›å…¥ï¼Œèƒ½æ‹·è´ï¼Œèƒ½ç§»åŠ¨ï¼Œèƒ½åˆ›å»ºï¼Œèƒ½åˆ é™¤</span><br><span class="line"><span class="comment">## åªæœ‰xæƒé™æ‰èƒ½cdè¿›å…¥</span></span><br><span class="line"><span class="comment">## ç›®å½•æƒé™ï¼Œå¿…é¡»ä¸¤ä¸¤ç»„åˆä½¿ç”¨</span></span><br><span class="line"><span class="comment">## ç›®å½•æƒé™ï¼Œå¿…é¡»ç»„åˆxæƒé™ä½¿ç”¨</span></span><br><span class="line"><span class="comment">## ç›®å½•æƒé™ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ™®é€šç”¨æˆ·ï¼Œåªç»™rxï¼Œè¶…çº§ç”¨æˆ· rwx</span></span><br></pre></td></tr></table></figure><h3 id="2-ç‰¹æ®Šæƒé™">2.ç‰¹æ®Šæƒé™</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ™®é€šç”¨æˆ·å¯ä»¥ä¿®æ”¹è‡ªå·±çš„å¯†ç ï¼Œåœ¨äºpasswdå‘½ä»¤ï¼Œè¯¥å‘½ä»¤æ‹¥æœ‰ç‰¹æ®Šæƒé™ï¼ŒSetUIDï¼Œä¹Ÿå°±æ˜¯å’±ä»¬çœ‹åˆ°çš„ï¼Œåœ¨å±ä¸»çš„æƒé™ä½çš„æ‰§è¡Œæƒé™ä¸Šæ˜¯ s.å½“...æ™®é€šç”¨æˆ·ä½¿ç”¨passwdå‘½ä»¤æ¥æ›´æ”¹è‡ªå·±çš„å¯†ç æ—¶ï¼Œå®é™…ä¸Šæ˜¯åœ¨ç”¨passwdå‘½ä»¤çš„æ‰€æœ‰è€…ï¼Œæ‰€æœ‰è€…æ˜¯è°ï¼Ÿå°±æ˜¯rootçš„èº«ä»½åœ¨æ‰§è¡Œpasswdå‘½ä»¤</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œæœ‰ä¸‰ç§ç‰¹æ®Šæƒé™ï¼Œåˆ†åˆ«æ˜¯ SUID æƒé™ã€SGID æƒé™å’Œ SBIT æƒé™ï¼š</span><br><span class="line"><span class="comment">#sUID æƒé™ï¼ˆSet User IDï¼‰ï¼š</span></span><br><span class="line">å…è®¸ç”¨æˆ·åœ¨æ‰§è¡Œå¯æ‰§è¡Œæ–‡ä»¶æ—¶ä»¥æ–‡ä»¶æ‰€æœ‰è€…çš„èº«ä»½è¿è¡Œã€‚å…·æœ‰ SUID æƒé™çš„æ–‡ä»¶åœ¨æ‰§è¡Œæ—¶å°†ç»§æ‰¿æ–‡ä»¶æ‰€æœ‰è€…çš„æƒé™ï¼Œè€Œä¸æ˜¯æ‰§è¡Œè€…è‡ªå·±çš„æƒé™ã€‚è¿™å¯¹äºéœ€è¦ç‰¹å®šæƒé™æ‰èƒ½æ‰§è¡Œçš„ç¨‹åºéå¸¸æœ‰ç”¨ã€‚</span><br><span class="line"></span><br><span class="line"><span class="comment">#SGID æƒé™ï¼ˆSet Group IDï¼‰ï¼š</span></span><br><span class="line">SGID æƒé™ç±»ä¼¼äº SUID æƒé™ï¼Œä½†æ˜¯å®ƒæ˜¯é’ˆå¯¹ç¾¤ç»„è€Œä¸æ˜¯ç”¨æˆ·ã€‚å…·æœ‰ SGID æƒé™çš„æ–‡ä»¶åœ¨æ‰§è¡Œæ—¶å°†ç»§æ‰¿æ–‡ä»¶æ‰€å±ç¾¤ç»„çš„æƒé™ï¼Œè€Œä¸æ˜¯æ‰§è¡Œè€…æ‰€å±ç¾¤ç»„çš„æƒé™ã€‚</span><br><span class="line"></span><br><span class="line"><span class="comment">#SBIT æƒé™ï¼ˆSticky Bitï¼‰ï¼š</span></span><br><span class="line">ä¸»è¦ç”¨äºç›®å½•ã€‚å½“ç›®å½•å…·æœ‰ SBIT æƒé™æ—¶ï¼Œåªæœ‰ç›®å½•æ‰€æœ‰è€…ã€æ–‡ä»¶æ‰€æœ‰è€…å’Œ root ç”¨æˆ·æ‰èƒ½åˆ é™¤æˆ–ç§»åŠ¨è¯¥ç›®å½•ä¸­çš„æ–‡ä»¶ã€‚è¿™å¯ä»¥é˜²æ­¢å…¶ä»–ç”¨æˆ·æ„å¤–åˆ é™¤æˆ–ç§»åŠ¨ä»–äººçš„æ–‡ä»¶</span><br></pre></td></tr></table></figure><h4 id="SUID">SUID</h4><p><img src="https://cos.lukme.top/Pic/image-20240415143350501.png" alt="image-20240415143350501"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## ä¿®æ”¹å¯†ç çš„å‘½ä»¤</span></span><br><span class="line">[root@localhost ~]# passwd</span><br><span class="line"><span class="comment">## ä¿®æ”¹å¯†ç çš„å‘½ä»¤ä½ç½®</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">which</span> passwd</span><br><span class="line">/usr/bin/passwd</span><br><span class="line"><span class="comment">## ç”¨æˆ·å¯†ç ä¿¡æ¯å­˜æ”¾æ–‡ä»¶</span></span><br><span class="line">[root@localhost ~]# ll /etc/shadow</span><br><span class="line">----------. 1 root root 641 Apr 12 19:50 /etc/shadow</span><br><span class="line"><span class="comment">## ç”¨æˆ·å¯†ç ä¿¡æ¯å­˜æ”¾æ–‡ä»¶</span></span><br><span class="line">æ–‡ä»¶æƒé™ï¼š000</span><br><span class="line">æ‰€æœ‰ç”¨æˆ·ï¼Œæ²¡æœ‰è¯»å–æƒé™ï¼Œå†™å…¥æƒé™ï¼Œæ‰§è¡Œæƒé™</span><br><span class="line"><span class="comment">## ä¸€ä¸ªæ™®é€šç”¨æˆ·ï¼Œæ˜¯å¦å¯ä»¥ä¿®æ”¹å¯†ç ï¼Ÿ</span></span><br><span class="line">åªèƒ½ä¿®æ”¹è‡ªå·±çš„å¯†ç </span><br><span class="line"><span class="comment">## é—®é¢˜ï¼šä¸ºä»€ä¹ˆä¸€ä¸ªæ™®é€šç”¨æˆ·ï¼Œå¯¹/etc/shadowæ–‡ä»¶æ²¡æœ‰ä»»ä½•æ“ä½œæƒé™ï¼Œå´å¯ä»¥ä¿®æ”¹è‡ªå·±çš„å¯†ç ï¼Ÿ</span></span><br><span class="line"><span class="comment">## åŸå› ï¼šå› ä¸ºpasswdå‘½ä»¤ï¼Œå±ä¸»æƒé™ä½ä¸Šæœ‰ä¸ªsæƒé™</span></span><br><span class="line">[zls@localhost ~]$ ll /usr/bin/passwd</span><br><span class="line">-rwsr-xr-x. 1 root root 27832 Jun 10 2014 /usr/bin/passwd</span><br><span class="line">suidæˆæƒæ–¹å¼</span><br><span class="line">ç‰¹æ®Šæƒé™â€”â€”setgid</span><br><span class="line">æˆæƒæ–¹å¼</span><br><span class="line">å¦‚æœåœ¨ä¸€ä¸ªæ–‡ä»¶çš„å±ä¸»æƒé™ä½ä¸Šï¼Œå‡ºç°sæƒé™ï¼Œä»£è¡¨ï¼Œè¯¥æ–‡ä»¶å…·æœ‰<span class="built_in">set</span> uidæƒé™</span><br><span class="line"><span class="built_in">set</span> uidï¼ˆsuidï¼‰æƒé™ä½œç”¨ï¼šè®©ä½¿ç”¨è¯¥æ–‡ä»¶çš„ç”¨æˆ·ï¼Œä»¥è¯¥æ–‡ä»¶çš„å±ä¸»èº«ä»½æ‰§è¡Œ</span><br><span class="line"><span class="comment">## å› ä¸ºpasswdå‘½ä»¤æœ‰suidæƒé™ï¼Œé‚£ä¹ˆæ™®é€šç”¨æˆ·å¯ä»¥ä»¥rootèº«ä»½æ‰§è¡Œè¯¥å‘½ä»¤ï¼Œä½†æ˜¯ä¸ºå•¥ä¸èƒ½ä¿®æ”¹å…¶ä»–ç”¨æˆ·å¯†ç </span></span><br><span class="line">åŸå› ï¼šæ™®é€šç”¨æˆ·åœ¨æ‰§è¡Œpasswdå‘½ä»¤æ—¶ï¼Œæœ‰ä¸ªåˆ¤æ–­ï¼Œå°±æ˜¯è¯¥å‘½ä»¤åé¢ä¸èƒ½åŠ ä»»ä½•å‚æ•°</span><br></pre></td></tr></table></figure><p><strong>==suidæˆæƒæ–¹å¼==</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">suidæ•°å­—æƒé™ï¼š4000</span><br><span class="line"><span class="comment">## æ•°å­—æƒé™æˆæƒ</span></span><br><span class="line"><span class="built_in">chmod</span> 4xxx æ–‡ä»¶å</span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> 4644 cheak_student.sh</span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> 4755 /bin/passwd</span><br><span class="line"><span class="comment">## ugoæ–¹å¼</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> u+s student.txt</span><br><span class="line">sï¼šä»£è¡¨è¯¥æ–‡ä»¶çš„å±ä¸»æƒé™ä½ä¸Šï¼Œæœ¬èº«æœ‰xï¼ˆæ‰§è¡Œï¼‰æƒé™</span><br><span class="line">Sï¼šä»£è¡¨è¯¥æ–‡ä»¶çš„å±ä¸»æƒé™ä½ä¸Šï¼Œæœ¬èº«æ²¡æœ‰xï¼ˆæ‰§è¡Œï¼‰æƒé™</span><br><span class="line"><span class="comment">## æ€»ç»“ï¼š</span></span><br><span class="line">1.è®©æ™®é€šç”¨æˆ·å¯¹å¯æ‰§è¡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¸´æ—¶æ‹¥æœ‰äºŒè¿›åˆ¶æ–‡ä»¶çš„æ‰€å±æƒé™</span><br><span class="line">2.å¦‚æœè®¾ç½®çš„äºŒè¿›åˆ¶æ–‡ä»¶æ²¡æœ‰æ‰§è¡Œæƒé™ï¼Œé‚£ä¹ˆsuidçš„æƒé™æ˜¾ç¤ºå°±æ˜¯S</span><br><span class="line">3.ç‰¹æ®Šæƒé™suidä»…å¯¹äºŒè¿›åˆ¶å¯æ‰§è¡Œç¨‹åºæœ‰æ•ˆï¼Œå…¶ä»–æ–‡ä»¶æˆ–ç›®å½•åˆ™æ— æ•ˆ</span><br><span class="line">æ³¨æ„ï¼šsuidæå…¶å±é™©ï¼Œä¸ä¿¡å¯ä»¥å°è¯•å¯¹vimæˆ–è€…<span class="built_in">rm</span>å‘½ä»¤è¿›è¡Œè®¾å®šsuid</span><br></pre></td></tr></table></figure><h4 id="SGID">SGID</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">å°†ç›®å½•è®¾ç½®ä¸ºSGIDåï¼Œå¦‚æœåœ¨è¯¥ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶ï¼Œéƒ½å°†ä¸è¯¥ç›®å½•çš„æ‰€å±ç»„ä¿æŒä¸€è‡´</span><br><span class="line"><span class="comment">## åœ¨æ–‡ä»¶çš„å±ç»„æƒé™ä½ä¸Šå‡ºç°sæƒé™</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">mkdir</span> /opt/test</span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> g+s /opt/test/</span><br><span class="line">[root@localhost ~]# ll /opt/test/ -d</span><br><span class="line">drwxr-sr-x. 2 root root 6 Apr 15 18:40 /opt/test/</span><br></pre></td></tr></table></figure><p><strong>==æˆæƒæ–¹å¼==</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">sgidæ•°å­—æƒé™ï¼š2000</span><br><span class="line"><span class="comment">## æ•°å­—æƒé™æˆæƒ</span></span><br><span class="line"><span class="built_in">chmod</span> 2xxx æ–‡ä»¶å</span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> 2644 dir1</span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> 2755 dir1</span><br><span class="line">å°ç»ƒä¹ </span><br><span class="line"><span class="comment">## ugoæ–¹å¼</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> g+s dir1</span><br><span class="line">sï¼šä»£è¡¨è¯¥æ–‡ä»¶çš„å±ç»„æƒé™ä½ä¸Šï¼Œæœ¬èº«æœ‰xï¼ˆæ‰§è¡Œï¼‰æƒé™</span><br><span class="line">Sï¼šä»£è¡¨è¯¥æ–‡ä»¶çš„å±ç»„æƒé™ä½ä¸Šï¼Œæœ¬èº«æ²¡æœ‰xï¼ˆæ‰§è¡Œï¼‰æƒé™</span><br><span class="line"><span class="comment">## æ€»ç»“ï¼š</span></span><br><span class="line">1.é’ˆå¯¹ç”¨æˆ·ç»„æƒé™ä½ä¿®æ”¹ï¼Œç”¨æˆ·åˆ›å»ºçš„ç›®å½•æˆ–æ–‡ä»¶æ‰€å±ç»„å’Œè¯¥ç›®å½•çš„æ‰€å±ç»„ä¸€è‡´ã€‚</span><br><span class="line">2.å½“æŸä¸ªç›®å½•è®¾ç½®äº†sgidåï¼Œåœ¨è¯¥ç›®å½•ä¸­æ–°å»ºçš„æ–‡ä»¶ä¸åœ¨æ˜¯åˆ›å»ºè¯¥æ–‡ä»¶çš„é»˜è®¤æ‰€å±ç»„</span><br><span class="line">3.ä½¿ç”¨sgidå¯ä»¥ä½¿å¾—å¤šä¸ªç”¨æˆ·ä¹‹é—´å…±äº«ä¸€ä¸ªç›®å½•çš„æ‰€æœ‰æ–‡ä»¶å˜å¾—ç®€å•ã€‚</span><br></pre></td></tr></table></figure><h4 id="SBIT">SBIT</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">stickyï¼ˆSI TI KIï¼‰ç²˜æ»ï¼Œç›®å‰åªå¯¹ç›®å½•æœ‰æ•ˆï¼Œä½œç”¨å¦‚ä¸‹ï¼š</span><br><span class="line">æ™®é€šç”¨æˆ·å¯¹è¯¥ç›®å½•æ‹¥æœ‰wå’Œxæƒé™ï¼Œå³æ™®é€šç”¨æˆ·å¯ä»¥åœ¨æ­¤ç›®å½•ä¸­æ‹¥æœ‰å†™å…¥æƒé™ï¼Œå¦‚æœæ²¡æœ‰ç²˜æ»ä½ï¼Œé‚£ä¹ˆæ™®é€šç”¨æˆ·æ‹¥æœ‰wæƒé™ï¼Œå°±å¯ä»¥åˆ é™¤æ­¤ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼ŒåŒ…æ‹¬å…¶ä»–ç”¨æˆ·ç®€å†çš„æ–‡ä»¶ã€‚ä½†æ˜¯ä¸€æ—¦è¢«èµ‹äºˆäº†ç²˜æ»ä½ï¼Œé™¤äº†rootå¯ä»¥åˆ é™¤æ‰€æœ‰æ–‡ä»¶ï¼Œæ™®é€šç”¨æˆ·å°±ç®—æœ‰wæƒé™ä¹Ÿåªèƒ½åˆ é™¤è‡ªå·±å»ºç«‹çš„æ–‡ä»¶ï¼Œè€Œä¸èƒ½åˆ é™¤å…¶ä»–ç”¨æˆ·ç®€å†çš„æ–‡ä»¶ã€‚ç³»ç»Ÿä¸­å­˜åœ¨çš„/tmpç›®å½•æ˜¯ç»å…¸çš„ç²˜æ»ä½ç›®å½•ï¼Œè°éƒ½æœ‰å†™æƒé™ï¼Œå› æ­¤å®‰å…¨æˆé—®é¢˜ï¼Œå¸¸å¸¸æ˜¯æœ¨é©¬ç¬¬ä¸€æ‰‹è·³æ¿ã€‚</span><br></pre></td></tr></table></figure><p><strong>==æˆæƒæ–¹å¼==</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">SBITæ•°å­—æƒé™ï¼š1000</span><br><span class="line">suid=4000</span><br><span class="line">sgid=2000</span><br><span class="line">sbit=1000</span><br><span class="line">r=4</span><br><span class="line">w=2</span><br><span class="line">x=1</span><br><span class="line">-=0</span><br><span class="line"><span class="comment">## æ•°å­—æƒé™æˆæƒ</span></span><br><span class="line"><span class="built_in">chmod</span> 1xxx æ–‡ä»¶å</span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> 1644 dir1</span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> 1755 dir1</span><br><span class="line"><span class="comment">## ugoæ–¹å¼</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> o+t dir1</span><br><span class="line">tï¼šä»£è¡¨è¯¥æ–‡ä»¶çš„å…¶ä»–ç”¨æˆ·æƒé™ä½ä¸Šï¼Œæœ¬èº«æœ‰xï¼ˆæ‰§è¡Œï¼‰æƒé™</span><br><span class="line">Tï¼šä»£è¡¨è¯¥æ–‡ä»¶çš„å…¶ä»–ç”¨æˆ·æƒé™ä½ä¸Šï¼Œæœ¬èº«æ²¡æœ‰xï¼ˆæ‰§è¡Œï¼‰æƒé™</span><br><span class="line"><span class="comment">## æ€»ç»“ï¼š</span></span><br><span class="line">1.è®©å¤šä¸ªç”¨æˆ·éƒ½å…·æœ‰å†™æƒé™çš„ç›®å½•ï¼Œå¹¶è®©æ¯ä¸ªç”¨æˆ·åªèƒ½åˆ è‡ªå·±çš„æ–‡ä»¶ï¼ˆrooté™¤å¤–ï¼‰ã€‚</span><br><span class="line">2.ç‰¹æ®Šstickyç›®å½•è¡¨ç°åœ¨othersçš„xä½ï¼Œç”¨å°tè¡¨ç¤ºï¼Œå¦‚æœæ²¡æœ‰æ‰§è¡Œæƒé™æ˜¯T</span><br><span class="line">3.ä¸€ä¸ªç›®å½•å³ä½¿å®ƒçš„æƒé™ä¸º<span class="string">&quot;777&quot;</span>å¦‚æœæ˜¯è®¾ç½®äº†ç²˜æ»ä½ï¼Œé™¤äº†ç›®å½•çš„å±ä¸»å’Œ<span class="string">&quot;root&quot;</span>ç”¨æˆ·æœ‰æƒé™åˆ é™¤ï¼Œé™¤æ­¤ä¹‹</span><br><span class="line">å¤–å…¶ä»–ç”¨æˆ·éƒ½ä¸å…è®¸åˆ é™¤è¯¥ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶</span><br></pre></td></tr></table></figure><h4 id="chattræƒé™">chattræƒé™</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">chattråªæœ‰rootç”¨æˆ·å¯ä»¥ä½¿ç”¨ï¼Œç”¨æ¥ä¿®æ”¹æ–‡ä»¶ç³»ç»Ÿçš„æƒé™å±æ€§ï¼Œå»ºç«‹å‡Œé©¾äºrwxåŸºç¡€æƒé™ä¹‹ä¸Šçš„æˆæƒ</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹æœ‰æ²¡æœ‰åŠ chattræƒé™</span></span><br><span class="line">lsattr /etc/passwd </span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆæƒæ–¹å¼</span></span><br><span class="line">[root@localhost ~]# chattr +i /etc/passwd</span><br><span class="line">chattrå‘½ä»¤æ ¼å¼ï¼šchattr [+-=][é€‰é¡¹] æ–‡ä»¶åæˆ–ç›®å½•å</span><br><span class="line"><span class="comment">#iï¼šä¸å¾—ä»»æ„æ›´åŠ¨æ–‡ä»¶æˆ–ç›®å½•</span></span><br><span class="line"><span class="comment">#aï¼šappendå¯ä»¥è¿½åŠ ï¼Œä½†æ— æ³•æ›´æ”¹æ–‡ä»¶å†…å®¹</span></span><br><span class="line">[root@localhost ~]# chattr +a /etc/passwd /etc/shadow /etc/group /etc/gshadow</span><br></pre></td></tr></table></figure><h3 id="3-è¿›ç¨‹æ©ç umask">3.è¿›ç¨‹æ©ç umask</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">ç³»ç»Ÿé»˜è®¤<span class="built_in">umask</span>ä¸º022ï¼Œé‚£ä¹ˆå½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç›®å½•æ—¶ï¼Œæ­£å¸¸æƒ…å†µä¸‹ç›®å½•çš„æƒé™åº”è¯¥æ˜¯777ï¼Œä½†æ˜¯<span class="built_in">umask</span>è¡¨ç¤ºè¦å‡</span><br><span class="line">å»çš„å€¼ï¼Œæ‰€ä»¥æ–°ç›®å½•æ–‡ä»¶çš„æƒé™åº”è¯¥æ˜¯777-022=755ã€‚è‡³äºæ–‡ä»¶çš„æƒé™ä¹Ÿä¾æ¬¡ç±»æ¨ï¼š666-022=644</span><br><span class="line"><span class="comment">## æŸ¥çœ‹ç³»ç»Ÿé»˜è®¤umask</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">umask</span></span><br><span class="line">0022</span><br><span class="line"><span class="comment">## ç›®å½•æƒé™ä½¿ç”¨777-umask</span></span><br><span class="line"><span class="comment">## æ–‡ä»¶æƒé™ä½¿ç”¨666-umask</span></span><br><span class="line">ä½†æ˜¯å½“<span class="built_in">umask</span>å‡ºç°å¥‡æ•°ä½æ—¶ï¼Œéœ€è¦åœ¨è¯¥ä½ä¸Šå¾—åˆ°ç»“æœå+1</span><br><span class="line"><span class="comment">## umask 147</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">umask</span> 147</span><br><span class="line">[root@localhost ~]# <span class="built_in">mkdir</span> zls789 // 630</span><br><span class="line">[root@localhost ~]# <span class="built_in">touch</span> zls456 // 620</span><br><span class="line"><span class="comment">## æ¡ä»¶</span></span><br><span class="line">[root@localhost ~]# <span class="comment"># 1.uid &gt; 199</span></span><br><span class="line">[root@localhost ~]# <span class="comment"># 2.uid name = gid name</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cat</span> /etc/profile</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$UID</span> -gt 199 ] &amp;&amp; [ <span class="string">&quot;`/usr/bin/id -gn`&quot;</span> = <span class="string">&quot;`/usr/bin/id -un`&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line"><span class="built_in">umask</span> 002</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">umask</span> 022</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment"># UIDå¤§äº199 å¹¶ä¸” ç”¨æˆ·åå’Œç»„åå­ä¸€æ · æ­¤æ—¶ ï¼š umask=002    (å¹³å°ç”¨æˆ·)</span></span><br><span class="line"><span class="comment"># UIDå°äº199æ—¶ æ­¤æ—¶ umask=022ï¼ˆrootç”¨æˆ·ï¼‰</span></span><br><span class="line"><span class="comment"># ç”¨æˆ·åå’Œç»„åä¸ä¸€æ ·æ—¶ æ­¤æ—¶umask=022</span></span><br><span class="line"></span><br><span class="line">ç”¨æˆ·å®¶ç›®å½•<span class="built_in">umask</span> 077</span><br><span class="line">[root@lb01 ~]# <span class="built_in">cat</span> /etc/login.defs  </span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹æ–‡ä»¶çš„æ•°å­—æƒé™</span></span><br><span class="line"><span class="built_in">stat</span> -c a% æ–‡ä»¶   </span><br><span class="line"><span class="built_in">stat</span> æ–‡ä»¶</span><br></pre></td></tr></table></figure><h3 id="4-æ–‡ä»¶å±ä¸»å±ç»„ä¿®æ”¹">4.æ–‡ä»¶å±ä¸»å±ç»„ä¿®æ”¹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## change owner</span></span><br><span class="line"><span class="built_in">chown</span> [é€‰é¡¹] å±ä¸»:å±ç»„ æ–‡ä»¶å</span><br><span class="line"><span class="comment">## ä¿®æ”¹å±ä¸»å’Œå±ç»„</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">chown</span> zls:zls student.txt</span><br><span class="line">[root@localhost ~]# <span class="built_in">chown</span> root.root student.txt</span><br><span class="line"><span class="comment">## å±ä¸»ä¸å˜ï¼Œä¿®æ”¹å±ç»„</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">chown</span> :tls student.txt</span><br><span class="line"><span class="comment">## å±ç»„ä¸å˜ï¼Œä¿®æ”¹å±ä¸»  åªåŠ ä¸€ä¸ªé»˜è®¤å°±æ˜¯ä¿®æ”¹å±ä¸»</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">chown</span> zls student.txt    </span><br><span class="line"></span><br><span class="line">ä¸€ä¸ªç”¨æˆ·ï¼Œåˆ›å»ºå‡ºæ¥çš„æ–‡ä»¶ï¼Œä¸ä¸€å®šæƒé™å±äºä»–çš„ä¸»ç»„ï¼Œnewgrpåªè¦åˆ‡æ¢è¿‡ç»„ï¼Œåœ¨å“ªä¸ªç»„å·¥ä½œï¼Œåˆ›å»ºå‡ºçš„æ–‡ä»¶å±ç»„å°±å±äºå“ªä¸ªç»„</span><br><span class="line"><span class="comment">## ä¿®æ”¹ç›®å½•å±ä¸»å’Œå±ç»„ä¸‹é¢æ–‡ä»¶æƒé™ä¸å˜</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">chown</span> www.www /code/</span><br><span class="line"><span class="comment">## é€’å½’ä¿®æ”¹ç›®å½•çš„å±ä¸»å’Œå±ç»„</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">chown</span> -R www.www /code/</span><br></pre></td></tr></table></figure><h2 id="ã€5ã€‘é‡å®šå‘">ã€5ã€‘é‡å®šå‘</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å°†åŸæœ¬è¦è¾“å‡ºåˆ°å±å¹•çš„æ•°æ®ä¿¡æ¯ï¼Œé‡æ–°å®šå‘åˆ°æŒ‡å®šçš„æ–‡ä»¶ä¸­ã€‚</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä½¿ç”¨é‡å®šå‘åœºæ™¯</span></span><br><span class="line">1.å½“å±å¹•è¾“å‡ºçš„ä¿¡æ¯å¾ˆé‡è¦ï¼Œè€Œä¸”å¸Œæœ›ä¿å­˜é‡è¦çš„ä¿¡æ¯æ—¶ã€‚</span><br><span class="line">2.åå°æ‰§è¡Œä¸­çš„ç¨‹åºï¼Œä¸å¸Œæœ›ä»–å¹²æ‰°å±å¹•æ­£å¸¸çš„è¾“å‡ºç»“æœæ—¶ã€‚</span><br><span class="line">3.ç³»ç»Ÿçš„ä¾‹è¡Œå‘½ä»¤ï¼Œä¾‹å¦‚å®šæ—¶ä»»åŠ¡çš„æ‰§è¡Œç»“æœï¼Œå¸Œæœ›ä»–å¯ä»¥å­˜ä¸‹æ¥æ—¶ã€‚</span><br><span class="line">4.ä¸€äº›æ‰§è¡Œå‘½ä»¤ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ä»–å¯èƒ½å‡ºç°é”™è¯¯ä¿¡æ¯ï¼Œæƒ³å°†ä»–ç›´æ¥ä¸¢å¼ƒæ—¶ã€‚</span><br><span class="line">5.æ‰§è¡Œä¸€ä¸ªå‘½ä»¤ï¼Œå¯èƒ½æŠ¥é”™å’Œæ­£ç¡®çš„è¾“å‡ºå¹¶å­˜ï¼Œç±»ä¼¼é”™è¯¯æ—¥å¿—ä¸æ ‡å‡†æ­£ç¡®æ—¥å¿—éœ€è¦åˆ†åˆ«è¾“å‡ºè‡³ä¸åŒçš„æ–‡ä»¶ã€‚</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä¸€ä¸ªshellç¨‹åºæ—¶é€šå¸¸ä¼šè‡ªåŠ¨æ‰“å¼€ä¸‰ä¸ªæ–‡ä»¶æè¿°ç¬¦</p><table><thead><tr><th style="text-align:center">åç§°</th><th style="text-align:center">æ–‡ä»¶æè¿°ç¬¦</th><th style="text-align:center">ä½œç”¨</th></tr></thead><tbody><tr><td style="text-align:center">æ ‡å‡†è¾“å…¥ (stdin)</td><td style="text-align:center">0</td><td style="text-align:center">é€šå¸¸æ˜¯é”®ç›˜ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶ä»–æ–‡ä»¶æˆ–è€…å‘½ä»¤çš„è¾“å‡ºçš„å†…å®¹å¯ä»¥ä½œä¸ºæ ‡å‡†è¾“å…¥</td></tr><tr><td style="text-align:center">æ ‡å‡†è¾“å‡º (stdout)</td><td style="text-align:center">1</td><td style="text-align:center">é»˜è®¤è¾“å‡ºåˆ°å±å¹•</td></tr><tr><td style="text-align:center">é”™è¯¯è¾“å‡º (stderr)</td><td style="text-align:center">2</td><td style="text-align:center">é»˜è®¤è¾“å‡ºåˆ°å±å¹•</td></tr><tr><td style="text-align:center">æ–‡ä»¶åç§° (filename)</td><td style="text-align:center">3+</td><td style="text-align:center"></td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">æ ‡å‡†è¾“å…¥ï¼šstdin</span><br><span class="line">æ ‡å‡†è¾“å‡ºï¼šstdout</span><br><span class="line">é”™è¯¯è¾“å‡ºï¼šstderr</span><br><span class="line">[root@localhost ~]# ll /dev/std*</span><br><span class="line">lrwxrwxrwx. 1 root root 15 Apr 16 15:52 /dev/stderr -&gt; /proc/self/fd/2</span><br><span class="line">lrwxrwxrwx. 1 root root 15 Apr 16 15:52 /dev/stdin -&gt; /proc/self/fd/0</span><br><span class="line">lrwxrwxrwx. 1 root root 15 Apr 16 15:52 /dev/stdout -&gt; /proc/self/fd/1</span><br><span class="line">æ–‡ä»¶æè¿°ç¬¦fdï¼šä¸€ä¸ªå‘½ä»¤æˆ–è€…ç¨‹åºåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œè‡³å°‘è¦æ‰“å¼€4ä¸ªæ–‡ä»¶æè¿°ç¬¦</span><br><span class="line">æ–‡ä»¶æè¿°ç¬¦0ï¼šæ ‡å‡†è¾“å…¥</span><br><span class="line">æ–‡ä»¶æè¿°ç¬¦1ï¼šæ ‡å‡†è¾“å‡º</span><br><span class="line">æ–‡ä»¶æè¿°ç¬¦2ï¼šé”™è¯¯è¾“å‡º</span><br><span class="line">æ–‡ä»¶æè¿°ç¬¦3+ï¼šæ–‡ä»¶å</span><br><span class="line"></span><br></pre></td></tr></table></figure><table><thead><tr><th>è¾“å…¥è¾“å‡º</th><th>ç¬¦å·</th></tr></thead><tbody><tr><td>æ ‡å‡†è¾“å…¥é‡å®šå‘</td><td>&lt; æˆ– 0&lt;</td></tr><tr><td>æ ‡å‡†è¾“å‡ºé‡å®šå‘</td><td>&gt; æˆ– 1&gt;</td></tr><tr><td>é”™è¯¯è¾“å‡ºé‡å®šå‘</td><td>2&gt;</td></tr></tbody></table><p>æŸ¥çœ‹æ ‡å‡†è¾“å…¥è¾“å‡ºè®¾å¤‡</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@lb01 ~]# ll /dev/std*</span><br><span class="line">lrwxrwxrwx. 1 root root 15 Apr 16 08:16 /dev/stderr -&gt; /proc/self/fd/2é”™è¯¯è¾“å‡º</span><br><span class="line">lrwxrwxrwx. 1 root root 15 Apr 16 08:16 /dev/stdin -&gt; /proc/self/fd/0æ ‡å‡†è¾“å…¥</span><br><span class="line">lrwxrwxrwx. 1 root root 15 Apr 16 08:16 /dev/stdout -&gt; /proc/self/fd/1æ ‡å‡†è¾“å‡º</span><br></pre></td></tr></table></figure><table><thead><tr><th>ç±»å‹</th><th>æ“ä½œç¬¦</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td>æ ‡å‡†è¦†ç›–è¾“å‡ºé‡å®šå‘</td><td>1&gt;æˆ–&gt;</td><td>å°†å‘½ä»¤çš„æ‰§è¡Œç»“æœè¾“å‡ºåˆ°æŒ‡å®šçš„æ–‡ä»¶ä¸­, è€Œä¸æ˜¯ç›´æ¥æ˜¾ç¤ºåœ¨å±å¹•ä¸Š</td></tr><tr><td>æ ‡å‡†è¿½åŠ è¾“å‡ºé‡å®šå‘</td><td>&gt;&gt;1æˆ–1&gt;&gt;</td><td>å°†å‘½ä»¤æ‰§è¡Œçš„ç»“æœè¿½åŠ è¾“å‡ºåˆ°æŒ‡å®šæ–‡ä»¶</td></tr><tr><td>é”™è¯¯è¦†ç›–è¾“å‡ºé‡å®šå‘</td><td>2&gt;</td><td>å°†ç¨‹åºçš„é”™è¯¯ç»“æœè¾“å‡ºåˆ°æ‰§è¡Œçš„æ–‡ä»¶ä¸­ï¼Œä¼šè¦†ç›–æºæ–‡ä»¶å†…å®¹</td></tr><tr><td>é”™è¯¯è¿½åŠ è¾“å‡ºé‡å®šå‘</td><td>2&gt;&gt;</td><td>å°†ç¨‹åºè¾“å‡ºçš„é”™è¯¯ç»“æœä»¥è¿½åŠ çš„æ–¹å¼è¾“å‡ºåˆ°æŒ‡å®šæ–‡ä»¶ä¸­ï¼Œä¸ä¼šè¦†ç›–æºæ–‡ä»¶</td></tr><tr><td>æ ‡å‡†è¾“å…¥é‡å®šå‘</td><td>&lt;&lt;</td><td>å°†å‘½ä»¤ä¸­æ¥æ”¶è¾“å…¥çš„é€”å¾„ç”±é»˜è®¤çš„é”®ç›˜æ›´æ”¹ä¸ºæŒ‡å®šçš„æ–‡ä»¶</td></tr></tbody></table><h3 id="1-é‡å®šå‘ä½¿ç”¨">1.é‡å®šå‘ä½¿ç”¨</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">æ ‡å‡†è¾“å‡ºè¿½åŠ é‡å®šå‘</span><br><span class="line">[root@lb01 ~]# <span class="built_in">echo</span> <span class="string">&quot;111&quot;</span> &gt;&gt;1.txt</span><br><span class="line">æ ‡å‡†è¾“å‡ºè¦†ç›–é‡å®šå‘</span><br><span class="line">[root@lb01 ~]# <span class="built_in">echo</span> <span class="string">&quot;111&quot;</span> &gt;1.txt</span><br><span class="line">é”™è¯¯è¾“å‡ºè¦†ç›–é‡å®šå‘</span><br><span class="line">[root@lb01 ~]# nginx -V 2&gt;&gt; 1.txt</span><br><span class="line">é”™è¯¯è¾“å‡ºè¿½åŠ é‡å®šå‘</span><br><span class="line">[root@lb01 ~]# nginx -V 2&gt; 1.txt</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>==1.é”™è¯¯è¾“å‡ºå’Œæ­£ç¡®è¾“å‡ºï¼Œéƒ½è¾“å‡ºåˆ°åŒä¸€ä¸ªæ–‡ä»¶ä¸­==</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## æ–¹æ³•ä¸€ï¼š</span></span><br><span class="line">[root@lb01 ~]# find /etc/ -<span class="built_in">type</span> d &gt; /tmp/1.<span class="built_in">log</span> 2&gt;/tmp/1.<span class="built_in">log</span></span><br><span class="line"><span class="comment">## æ–¹æ³•äºŒï¼š</span></span><br><span class="line">æ ‡å‡†è¾“å‡ºåˆ°2.<span class="built_in">log</span>æ–‡ä»¶é‡Œï¼Œé”™è¯¯è¾“å‡ºåˆ°å’Œæ ‡å‡†è¾“å‡ºä¸€æ ·ä½ç½®</span><br><span class="line">[root@lb01 ~]# find /etc/ -<span class="built_in">type</span> d 1&gt; /tmp/2.<span class="built_in">log</span> 2&gt;&amp;1</span><br><span class="line">å’Œä¸Šé¢ç›¸å</span><br><span class="line">[root@lb01 ~]# find /etc/ -<span class="built_in">type</span> d 2&gt; /tmp/6.<span class="built_in">log</span> 1&gt;&amp;2</span><br><span class="line"><span class="comment">## æ–¹æ³•ä¸‰ï¼š</span></span><br><span class="line">[root@lb01 ~]# find /etc/ -<span class="built_in">type</span> d &amp;&gt; /tmp/11.<span class="built_in">log</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#å°†å‘½ä»¤ç»“æœé‡å®šå‘åˆ°é»‘æ´</span></span><br><span class="line">[zls@localhost ~]$ find /etc/ -<span class="built_in">type</span> d 1&gt; /tmp/6.<span class="built_in">log</span> 2&gt;/dev/null æ ‡å‡†è¾“å‡ºåˆ°6.<span class="built_in">log</span>ï¼Œé”™è¯¯è¾“å‡ºåˆ°é»‘æ´</span><br><span class="line">[zls@localhost ~]$ find /etc/ -<span class="built_in">type</span> d &amp;&gt;/dev/null  æ‰€æœ‰è¾“å‡ºç»“æœåˆ°é»‘æ´</span><br></pre></td></tr></table></figure><p><strong>==2.æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯è¾“å‡ºåˆ°ä¸¤ä¸ªæ–‡ä»¶==</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /etc -name <span class="string">&quot;*.conf&quot;</span> 1&gt;a 2&gt;b</span><br></pre></td></tr></table></figure><p><strong>==3.å°†æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯è¾“å‡ºé‡å®šå‘åˆ°åŒä¸€ä¸ªæ–‡ä»¶, æ··åˆè¾“å‡º==</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[zls@zls ~]$ find /etc -name <span class="string">&quot;*.conf&quot;</span> &amp;&gt;ab </span><br><span class="line">[zls@zls ~]$ find /etc -name <span class="string">&quot;*.conf&quot;</span> &gt;ab 2&amp;&gt;1</span><br><span class="line">[zls@zls ~]$ find /etc -name <span class="string">&quot;*.conf&quot;</span> &gt;ab 2&gt;&amp;1</span><br><span class="line">åˆå¹¶ä¸¤ä¸ªæ–‡ä»¶åˆ°ä¸€ä¸ªæ–‡ä»¶</span><br><span class="line"><span class="built_in">cat</span> 1 2 &gt;3</span><br></pre></td></tr></table></figure><h3 id="2-è¾“å…¥é‡å®šå‘">2.è¾“å…¥é‡å®šå‘</h3><p>è¾“å…¥é‡å®šå‘ï¼Œå³åŸæœ¬ä»é”®ç›˜ç­‰è®¾å¤‡ä¸Šè·å¾—çš„è¾“å…¥ä¿¡æ¯ï¼Œé‡å®šå‘ç”±å‘½ä»¤çš„è¾“å‡ºä½œä¸ºè¾“å…¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# cat &gt;1.txtç­‰å¾…é”®ç›˜è¾“å…¥é‡å®šå‘åˆ°1.txtï¼ŒCtrl+cç»ˆæ­¢è¾“å…¥</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# cat &lt;&lt;EOF &gt; 1.txt   ç­‰å¾…é”®ç›˜è¾“å…¥ï¼Œé‡åˆ°Eofç»“æŸé‡å®šå‘åˆ°1.txt</span><br><span class="line">111</span><br><span class="line">222</span><br><span class="line">333</span><br><span class="line">EOF</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-ä¸¤æ¡å‘½ä»¤é‡å®šå‘">3.ä¸¤æ¡å‘½ä»¤é‡å®šå‘</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# (<span class="built_in">ls</span>;ifconfig) &gt; /tmp/1.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">## å°†å†…å®¹è¾“å‡ºåˆ°æ–‡ä»¶ï¼Œç„¶åæ”¾åå°æ‰§è¡Œ åŠ ä¸ª&amp;</span></span><br><span class="line">[root@localhost ~]# ping baidu.com &amp;&gt;/tmp/a.log &amp;</span><br><span class="line"></span><br><span class="line">æ‰©å±•ç‚¹: subshell</span><br><span class="line">[root@zls ~]# <span class="built_in">cd</span> /boot; <span class="built_in">ls</span></span><br><span class="line"><span class="comment">#subshell ä¸­æ‰§è¡Œ</span></span><br><span class="line">[root@zls ~]# (<span class="built_in">cd</span> /boot; <span class="built_in">ls</span>)</span><br><span class="line"><span class="comment">#å¦‚æœä¸å¸Œæœ›æŸäº›å‘½ä»¤çš„æ‰§è¡Œå¯¹å½“å‰ shell ç¯å¢ƒäº§ç”Ÿå½±å“ï¼Œè¯·åœ¨subshellä¸­æ‰§è¡Œ</span></span><br></pre></td></tr></table></figure><h3 id="4-ç®¡é“æŠ€æœ¯">4.ç®¡é“æŠ€æœ¯</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ç®¡é“ç¬¦ä½œç”¨ï¼šå°†ç®¡é“ç¬¦å·¦è¾¹å‘½ä»¤çš„æ ‡å‡†è¾“å‡ºäº¤ç»™ç®¡é“ç¬¦å³è¾¹å‘½ä»¤çš„æ ‡å‡†è¾“å…¥æ¥å¤„ç†</span><br><span class="line">1ï¼‰å·¦è¾¹å‘½ä»¤ä»–å¾—æ˜¯æ ‡å‡†è¾“å‡º 1&gt;</span><br><span class="line">2ï¼‰å³è¾¹å‘½ä»¤å¿…é¡»æœ‰æ ‡å‡†è¾“å…¥</span><br></pre></td></tr></table></figure><p><strong>==teeç®¡é“æŠ€æœ¯==</strong></p><p><img src="https://cos.lukme.top/Pic/image-20240416145607541.png" alt="image-20240416145607541"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tee</span>ç›¸å½“äºå¼€ä¸ªä¾§é—¨è¾“å‡ºé‡å®šå‘åˆ°æŸä¸ªæ–‡ä»¶ï¼ŒåŸç†è§ä¸Šå›¾</span><br><span class="line">[root@localhost ~]# <span class="built_in">echo</span> <span class="variable">$RANDOM</span>|<span class="built_in">tee</span> /dev/pts/3|passwd --stdin zls</span><br><span class="line">[root@localhost ~]# <span class="built_in">echo</span> <span class="variable">$RANDOM</span>|<span class="built_in">tee</span> /tmp/pass.txt|passwd --stdin zls</span><br><span class="line"><span class="comment">## -aï¼šappend è¿½åŠ åˆ°æ–‡ä»¶ä¸­</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">echo</span> <span class="variable">$RANDOM</span>|<span class="built_in">tee</span> -a /tmp/pass.txt|passwd --stdin zls</span><br></pre></td></tr></table></figure><h3 id="5-xargsä¼ å‚">5.xargsä¼ å‚</h3><p><strong>xarasåé¢ä¸è¯†åˆ«åˆ«å</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">xargså°†ç®¡é“ç¬¦å‰é¢å‘½ä»¤çš„æ ‡å‡†è¾“å‡ºï¼Œå½“æˆç»“æœï¼Œæ”¾åˆ°ç®¡é“ç¬¦å³è¾¹xargsåé¢çš„å‘½ä»¤çš„åé¢æ‰§è¡Œ</span><br><span class="line">[root@localhost ~]# <span class="built_in">echo</span> &#123;1..10&#125;</span><br><span class="line">1 2 3 4 5 6 7 8 9 10</span><br><span class="line">[root@localhost ~]# <span class="built_in">echo</span> &#123;1..5&#125;|xargs -n1</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">[root@localhost ~]# <span class="built_in">echo</span> &#123;1..10&#125;|xargs -n2    -n2æ¯ä¸¤ä¸ªä¸€è¡Œ -n3æ¯ä¸‰ä¸ªæ‹ä¸€è¡Œ</span><br><span class="line">1 2</span><br><span class="line">3 4</span><br><span class="line">5 6</span><br><span class="line">7 8</span><br><span class="line">9 10</span><br><span class="line">[root@lb01 ~]# <span class="built_in">seq</span> 10|xargs -n3</span><br><span class="line">1 2 3</span><br><span class="line">4 5 6</span><br><span class="line">7 8 9</span><br><span class="line">10</span><br><span class="line"></span><br><span class="line"><span class="comment">## æ‰¾å‡ºæ¥çš„æ–‡ä»¶æ‹·è´åˆ°/tmp</span></span><br><span class="line">[root@localhost ~]# grep -rl <span class="string">&#x27;xxx&#x27;</span> ./|xargs <span class="built_in">cp</span> -t /tmp/</span><br><span class="line">[root@localhost ~]# grep -rl <span class="string">&#x27;xxx&#x27;</span> ./|xargs -I &#123;&#125; <span class="built_in">cp</span> &#123;&#125; /opt</span><br><span class="line"></span><br><span class="line">æ³¨æ„äº‹é¡¹:</span><br><span class="line">1.åœ¨ç®¡é“åé¢çš„å‘½ä»¤ï¼Œéƒ½ä¸åº”è¯¥åœ¨å†™æ–‡ä»¶å</span><br><span class="line">2.åœ¨ç®¡é“ä¸­åªæœ‰æ ‡å‡†è¾“å‡ºæ‰å¯ä»¥ä¼ é€’ä¸‹ä¸€ä¸ªå‘½ä»¤, æ ‡å‡†é”™è¯¯è¾“å‡ºä¼šç›´æ¥è¾“å‡ºç»ˆç«¯æ˜¾ç¤º, å»ºè®®åœ¨ä½¿ç”¨ç®¡</span><br><span class="line">é“å‰å°†æ ‡å‡†é”™è¯¯è¾“å‡ºé‡å®šå‘ã€‚</span><br><span class="line">ä¾‹å¦‚: find /etc -name <span class="string">&quot;*.conf&quot;</span> 2&gt;/dev/null | grep rc</span><br><span class="line">3.æœ‰äº›å‘½ä»¤ä¸æ”¯æŒç®¡é“æŠ€æœ¯, ä½†æ˜¯å¯ä»¥é€šè¿‡ xargs æ¥å®ç°ç®¡é“ä¼ é€’ã€‚</span><br><span class="line">ä¾‹å¦‚: <span class="built_in">which</span> <span class="built_in">cat</span>|xargs ls-l</span><br><span class="line">ä¾‹å¦‚: <span class="built_in">ls</span> |xargs <span class="built_in">rm</span> -rvf</span><br><span class="line">-I é€‰é¡¹ä½œç”¨æ˜¯å°†å‰é¢è¾“å‡ºç»“æœæ‰“åŒ…åˆ°&#123;&#125;å†…</span><br><span class="line">ä¾‹å¦‚: <span class="built_in">ls</span> |xargs <span class="built_in">cp</span> -rvft /tmp/ ==&gt; <span class="built_in">ls</span> | xargs -I &#123;&#125; <span class="built_in">cp</span> -rvf &#123;&#125; /tmp</span><br><span class="line">ä¾‹å¦‚: <span class="built_in">ls</span> |xargs <span class="built_in">mv</span> -t /tmp/ ==&gt; <span class="built_in">ls</span> | xargs -I &#123;&#125; <span class="built_in">mv</span> &#123;&#125; /tmp</span><br></pre></td></tr></table></figure><table><thead><tr><th>xargsé€‰é¡¹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>-a</td><td>è®¾ç½®ä»æ–‡ä»¶ä¸­è¯»å–æ•°æ®</td></tr><tr><td>-d</td><td>è®¾ç½®è‡ªå®šä¹‰å®šç•Œç¬¦</td></tr><tr><td>-l</td><td>è®¾ç½®æ›¿æ¢å­—ç¬¦ä¸²</td></tr><tr><td>-n</td><td>è®¾ç½®å¤šè¡Œè¾“å‡º</td></tr><tr><td>-p</td><td>æ‰§è¡Œå‘½ä»¤å‰è¯¢é—®ç”¨æˆ·æ˜¯å¦ç¡®è®¤</td></tr><tr><td>-r</td><td>å¦‚æœè¾“å…¥æ•°æ®ä¸ºç©ºï¼Œåˆ™ä¸æ‰§è¡Œ</td></tr><tr><td>-s</td><td>è®¾ç½®æ¯æ¡å‘½ä»¤æœ€å¤§å­—ç¬¦æ•°</td></tr><tr><td>-t</td><td>æ˜¾ç¤ºxargsæ‰§è¡Œçš„å‘½ä»¤</td></tr></tbody></table><h2 id="ã€6ã€‘æ–‡ä»¶è§£å‹ç¼©">ã€6ã€‘æ–‡ä»¶è§£å‹ç¼©</h2><h3 id="1-å¸¸è§å‹ç¼©åŒ…ç±»å‹">1.å¸¸è§å‹ç¼©åŒ…ç±»å‹</h3><table><thead><tr><th>æ ¼å¼</th><th>å‹ç¼©å·¥å…·</th></tr></thead><tbody><tr><td>.zip</td><td>zipå‹ç¼©å·¥å…·</td></tr><tr><td>.gz</td><td>gzipå‹ç¼©å·¥å…·ï¼Œåªèƒ½å‹ç¼©æ–‡ä»¶ï¼Œä¼šåˆ é™¤æºæ–‡ä»¶ï¼ˆé€šå¸¸é…åˆtarä½¿ç”¨ï¼‰</td></tr><tr><td>bz2</td><td>bzip2å‹ç¼©å·¥å…·ï¼Œåªèƒ½å‹ç¼©æ–‡ä»¶ï¼Œä¼šåˆ é™¤æºæ–‡ä»¶ï¼ˆé€šå¸¸é…åˆtarä½¿ç”¨ï¼‰</td></tr><tr><td>.tar.gz</td><td>å…ˆä½¿ç”¨tarå‘½ä»¤å½’æ¡£æ‰“åŒ…ï¼Œç„¶åä½¿ç”¨gzipå‹ç¼©</td></tr><tr><td>tar.bz2</td><td>å…ˆä½¿ç”¨tarå‘½ä»¤å½’æ¡£æ‰“åŒ…ï¼Œç„¶åä½¿ç”¨bzip2å‹ç¼©</td></tr></tbody></table><h3 id="2-å‹ç¼©è§£å‹å‘½ä»¤â€”gzip">2.å‹ç¼©è§£å‹å‘½ä»¤â€”gzip</h3><p>æ³¨æ„ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨æ‰“åŒ…å‹ç¼©å‘½ä»¤ï¼Œæœ€å¥½åˆ°éœ€è¦è¢«æ‰“åŒ…ç›®å½•çš„ä¸Šçº§ç›®å½•,</span><br><span class="line">è§£å‹æ—¶ï¼Œ-Cæœ€å¥½ä¸è¦æŒ‡å®š/ç›®å½• å¯èƒ½ä¼šè¦†ç›–/ä¸‹æŸäº›åŸæ–‡ä»¶</span><br><span class="line">[root@localhost ~]# tar xf mysql.tgz -C /  </span><br><span class="line">/etc/profile</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## å‹ç¼©æ–‡ä»¶</span></span><br><span class="line">è¯­æ³•ï¼šgzip æ–‡ä»¶å</span><br><span class="line">[root@localhost ~]# gzip file1</span><br><span class="line">[root@driver-zeng ~]# <span class="built_in">echo</span> 22222|gzip &gt; zls.txt.gz</span><br><span class="line"></span><br><span class="line"><span class="comment">## è§£å‹    -dï¼šè§£å‹æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">[root@localhost ~]# gzip -d file1.gz</span><br><span class="line"><span class="comment">## æŸ¥çœ‹æ–‡ä»¶ç±»å‹</span></span><br><span class="line">[root@localhost ~]# file file2.gz</span><br><span class="line">file2.gz: gzip compressed data, was <span class="string">&quot;file2&quot;</span>, from Unix, last modified: Thu Apr</span><br><span class="line">18 17:33:26 2024</span><br><span class="line"></span><br><span class="line"><span class="comment">## å¯ä»¥ç›´æ¥æŸ¥çœ‹å‹ç¼©åŒ…ä¸­æ–‡ä»¶çš„å†…å®¹</span></span><br><span class="line">[root@localhost ~]# zcat file4.gz</span><br><span class="line">xxx</span><br><span class="line"><span class="comment">## ç‰¹ç‚¹ï¼š</span></span><br><span class="line">1.å‹ç¼©åŒ…åç¼€.gz</span><br><span class="line">2.å‹ç¼©åæºæ–‡ä»¶ä¸å­˜åœ¨</span><br><span class="line">3.å‹ç¼©ç‡å¾ˆé«˜</span><br><span class="line">4.ç¼ºé™·å°±æ˜¯ï¼Œä¸èƒ½å‹ç¼©ç›®å½•ï¼Œä¸èƒ½å‹ç¼©å¤šä¸ªæ–‡ä»¶</span><br><span class="line">5.è§£å‹åï¼Œå‹ç¼©åŒ…ä¸åœ¨äº†ï¼Œæºæ–‡ä»¶å‡ºæ¥äº†</span><br><span class="line">6.å¯ä»¥ç›´æ¥ä½¿ç”¨å‘½ä»¤æŸ¥çœ‹å‹ç¼©åŒ…ä¸­æ–‡ä»¶çš„å†…å®¹</span><br></pre></td></tr></table></figure><h3 id="3-å‹ç¼©è§£å‹å‘½ä»¤â€”zip">3.å‹ç¼©è§£å‹å‘½ä»¤â€”zip</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## å®‰è£…</span></span><br><span class="line">[root@localhost ~]# yum install -y zip</span><br><span class="line"></span><br><span class="line"><span class="comment">## è¯­æ³•ï¼š</span></span><br><span class="line">zip åŒ…å æ–‡ä»¶å...</span><br><span class="line"></span><br><span class="line"><span class="comment">## å‹ç¼©æ–‡ä»¶</span></span><br><span class="line">[root@localhost ~]# zip file1.zip file1</span><br><span class="line"></span><br><span class="line"><span class="comment">## å‹ç¼©å¤šä¸ªæ–‡ä»¶</span></span><br><span class="line">[root@localhost ~]# zip file.zip file1 file10</span><br><span class="line"></span><br><span class="line"><span class="comment">## æŸ¥çœ‹æ–‡ä»¶ç±»å‹</span></span><br><span class="line">[root@localhost ~]# file file.zip</span><br><span class="line">file.zip: Zip archive data, at least v1.0 to extract</span><br><span class="line"></span><br><span class="line"><span class="comment">## å‹ç¼©ç›®å½•    -r åŒ…å«ç›®å½•å†…å®¹ä¸€èµ·å‹ç¼©</span></span><br><span class="line">[root@localhost ~]# zip -r dir1.zip dir1/</span><br><span class="line"></span><br><span class="line"><span class="comment">## æŒ‡å®šè·¯å¾„å‹ç¼©    å‹ç¼©testä¸‹æ‰€æœ‰æ–‡ä»¶åˆ°tmpä¸‹ï¼Œæ–‡ä»¶åæ˜¯test.zip</span></span><br><span class="line">[root@localhost ~]# zip -r /tmp/test.zip <span class="built_in">test</span>/</span><br><span class="line"></span><br><span class="line"><span class="comment">## è§£å‹</span></span><br><span class="line">[root@localhost ~]# yum install -y unzip</span><br><span class="line">[root@localhost opt]# unzip dir1.zip</span><br><span class="line">[root@localhost tmp]# unzip /opt/dir1.zipè§£å‹æŒ‡å®šç›®å½•æ–‡ä»¶</span><br><span class="line"><span class="comment">## æŸ¥çœ‹åŒ…é‡Œæœ‰å“ªäº›æ–‡ä»¶æˆ–ç›®å½•</span></span><br><span class="line">[root@localhost <span class="built_in">local</span>]# unzip -l /opt/dir1.zip</span><br><span class="line">Archive: /opt/dir1.zip</span><br><span class="line">Length Date Time Name</span><br><span class="line">--------- ---------- ----- ----</span><br><span class="line">0 04-18-2024 18:40 dir1/</span><br><span class="line">26 04-18-2024 18:40 dir1/file1.gz</span><br><span class="line">27 04-18-2024 18:40 dir1/file10.gz</span><br><span class="line">26 04-18-2024 18:40 dir1/file2.gz</span><br><span class="line">26 04-18-2024 18:40 dir1/file3.gz</span><br><span class="line">26 04-18-2024 18:40 dir1/file4.gz</span><br><span class="line">261 11 files</span><br><span class="line"><span class="comment">## ç‰¹ç‚¹ï¼š</span></span><br><span class="line">1.å‹ç¼©åŒ…åç¼€.zip</span><br><span class="line">2.å‹ç¼©åæºæ–‡ä»¶å­˜åœ¨</span><br><span class="line">3.å‹ç¼©ç‡å¾ˆé«˜</span><br><span class="line">4.é»˜è®¤æƒ…å†µä¸‹ä¸èƒ½å‹ç¼©ç›®å½•ï¼Œèƒ½å‹ç¼©å¤šä¸ªæ–‡ä»¶ï¼Œå‹ç¼©ç›®å½•éœ€è¦é€‰é¡¹</span><br><span class="line">5.å‹ç¼©æ—¶å¯ä»¥æŒ‡å®šå‹ç¼©åŒ…çš„è·¯å¾„</span><br><span class="line">6.è§£å‹åï¼Œå‹ç¼©åŒ…è¿˜åœ¨ï¼Œæºæ–‡ä»¶å‡ºæ¥äº†</span><br><span class="line">7.ä¸å¯ä»¥ç›´æ¥ä½¿ç”¨å‘½ä»¤æŸ¥çœ‹å‹ç¼©åŒ…ä¸­æ–‡ä»¶çš„å†…å®¹</span><br></pre></td></tr></table></figure><h3 id="4-å‹ç¼©è§£å‹å‘½ä»¤â€”tar">4.å‹ç¼©è§£å‹å‘½ä»¤â€”tar</h3><table><thead><tr><th>é€‰é¡¹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>c</td><td>åˆ›å»ºå½’æ¡£æ–‡ä»¶</td></tr><tr><td>f</td><td>æŒ‡å®šå½’æ¡£æ–‡ä»¶çš„åŒ…å</td></tr><tr><td>z</td><td>ä½¿ç”¨gzipæ¥å‹ç¼©å½’æ¡£åçš„æ–‡ä»¶ï¼Œxfè§£å‹.tar.gzåŒ…</td></tr><tr><td>x</td><td>å¯¹å½’æ¡£æ–‡ä»¶è¿›è¡Œè§£å‹</td></tr><tr><td>v</td><td>æ˜¾ç¤ºè¿‡ç¨‹</td></tr><tr><td>t</td><td>æŸ¥çœ‹å‹ç¼©åŒ…ä¸­çš„æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•</td></tr><tr><td>X</td><td>å¯ä»¥æ’é™¤å¤šä¸ªä¸æƒ³æ‰“åŒ…çš„æ–‡ä»¶ï¼ŒæŒ‡å®šæ–‡ä»¶å   (æŠŠä¸æƒ³æ‰“åŒ…çš„æ–‡ä»¶åå†™å…¥ä¸€ä¸ªæ–‡ä»¶ï¼ŒXæŒ‡å®šè¿™ä¸ªæ–‡ä»¶å°±è¡Œï¼Œè‹¥æ’é™¤çš„æ–‡ä»¶åœ¨åµŒå¥—ç›®å½•ï¼Œåˆ™æŠŠç›¸å¯¹è·¯å¾„å†™ä¸Šå³å¯)</td></tr><tr><td>h</td><td>æ‰“åŒ…è½¯é“¾æ¥çš„æºæ–‡ä»¶</td></tr><tr><td></td><td></td></tr><tr><td>J</td><td>ä½¿ç”¨xzå‹ç¼©å½’æ¡£åçš„æ–‡ä»¶ï¼Œxf è§£å‹.tar.xzåŒ…</td></tr><tr><td>-P</td><td>ä½¿ç”¨ç»å¯¹è·¯å¾„æ‰“åŒ…</td></tr><tr><td>j</td><td>ä½¿ç”¨bzip2å‹ç¼©å½’æ¡£åçš„æ–‡ä»¶ï¼Œxfè§£å‹ .tar.bz2åŒ…</td></tr><tr><td>-C</td><td>è§£å‹åˆ°æŒ‡å®šç›®å½•</td></tr><tr><td>â€“exclude</td><td>æ’é™¤ä¸æƒ³è¦çš„æ–‡ä»¶</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## tarå‘½ä»¤æœ¬èº«åªæ˜¯ä¸€ä¸ªå½’æ¡£å‘½ä»¤</span></span><br><span class="line"><span class="comment">## è¯­æ³•ï¼š</span></span><br><span class="line">tar [é€‰é¡¹] åŒ…å æ–‡ä»¶...</span><br><span class="line">[root@localhost ~]# file abc.tar</span><br><span class="line">abc.tar: POSIX tar archive (GNU)</span><br><span class="line">[root@localhost ~]# file nginx-1.22.1.tar.gz</span><br><span class="line">nginx-1.22.1.tar.gz: gzip compressed data, from Unix, last modified: Wed Oct 19</span><br><span class="line">16:02:28 2022</span><br><span class="line"><span class="comment">## æ–‡ä»¶å½’æ¡£</span></span><br><span class="line">[root@localhost ~]# tar cf dir1.tar dir1</span><br><span class="line"><span class="comment">## æ–‡ä»¶å½’æ¡£å¹¶æŒ‡å®šè·¯å¾„</span></span><br><span class="line">[root@localhost ~]# tar cf /tmp/dir1_xxx.tar dir1</span><br><span class="line"><span class="comment">## å‹ç¼©ç›®å½•</span></span><br><span class="line">[root@localhost ~]# tar zcf dir1.tgz dir1/</span><br><span class="line"><span class="comment">## å‹ç¼©å¹¶æ˜¾ç¤ºè¿‡ç¨‹</span></span><br><span class="line">[root@localhost ~]# tar zcvf dir1.tgz dir1/</span><br><span class="line"><span class="comment">## è§£å‹</span></span><br><span class="line">[root@localhost ~]# tar zxf dir1.tgz</span><br><span class="line"><span class="comment">## æŸ¥çœ‹</span></span><br><span class="line">[root@localhost ~]# tar tf nginx-1.22.1.tar.gz</span><br><span class="line"><span class="comment">## è§£å‹åˆ°æŒ‡å®šç›®å½•</span></span><br><span class="line">[root@localhost ~]# tar zxf nginx-1.22.1.tar.gz -C /tmp/</span><br><span class="line"><span class="comment">## æ‰“åŒ…æ—¶æ’é™¤ä¸æƒ³è¦çš„æ–‡ä»¶</span></span><br><span class="line">[root@localhost tmp]# tar zcf root2.tgz --exclude=file6 --exclude=file7 /root</span><br><span class="line">1.å½’æ¡£åŒ…åç¼€.tar</span><br><span class="line">2.å½’æ¡£åæºæ–‡ä»¶å­˜åœ¨</span><br><span class="line">3.æ²¡æœ‰å‹ç¼©ç‡</span><br><span class="line">4.é»˜è®¤æƒ…å†µä¸‹èƒ½å½’æ¡£ç›®å½•ï¼Œèƒ½å½’æ¡£å¤šä¸ªæ–‡ä»¶</span><br><span class="line">5.å½’æ¡£æ—¶å¯ä»¥æŒ‡å®šå½’æ¡£çš„è·¯å¾„</span><br><span class="line">6.è§£å‹åï¼Œå‹ç¼©åŒ…è¿˜åœ¨ï¼Œæºæ–‡ä»¶å‡ºæ¥äº†</span><br><span class="line">7.ä¸å¯ä»¥ç›´æ¥ä½¿ç”¨å‘½ä»¤æŸ¥çœ‹å‹ç¼©åŒ…ä¸­æ–‡ä»¶çš„å†…å®¹</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ç§»åŠ¨æµ·é‡å°æ–‡ä»¶ä½¿ç”¨tar</span></span><br><span class="line">[root@localhost abc]# tar czf - ./ | tar xzf - -C /tmp</span><br></pre></td></tr></table></figure><h2 id="ã€7ã€‘è½¯ä»¶å®‰è£…">ã€7ã€‘è½¯ä»¶å®‰è£…</h2><h3 id="1-rpmåŒ…">1.rpmåŒ…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># RPMå…¨ç§° RPM Package Manager ç¼©å†™ï¼Œç”±çº¢å¸½å¼€å‘ç”¨äºè½¯ä»¶åŒ…çš„å®‰è£…ï¼Œå‡çº§å¸è½½ä¸æŸ¥è¯¢</span></span><br></pre></td></tr></table></figure><p><strong>==RPMåŒ…å==</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tree-  1.6.0  -  10        . el7      .     x86_64    .rpm</span><br><span class="line">åŒ…å   ç‰ˆæœ¬å·   å‘å¸ƒäº†10æ¬¡   é€‚ç”¨äº7ç³»ç³»ç»Ÿ    ç³»ç»Ÿæ¶æ„   æ–‡ä»¶åç¼€</span><br></pre></td></tr></table></figure><table><thead><tr><th>åˆ†ç±»</th><th>å®‰è£…</th><th>ç‰ˆæœ¬</th></tr></thead><tbody><tr><td>rpmåŒ…ï¼ˆéœ€è¦å®‰è£…ï¼‰</td><td>é¢„å…ˆç¼–è¯‘æ‰“åŒ…,å®‰è£…ç®€å•</td><td>è½¯ä»¶ç‰ˆæœ¬åä½</td></tr><tr><td>æºç åŒ…ï¼ˆéœ€è¦ç¼–è¯‘ã€å®‰è£…ï¼‰</td><td>æ‰‹åŠ¨ç¼–è¯‘æ‰“åŒ…,å®‰è£…ç¹ç</td><td>è½¯ä»¶ç‰ˆæœ¬æœ€æ–°</td></tr><tr><td>äºŒè¿›åˆ¶åŒ…(ç»¿è‰²å…å®‰è£…è½¯ä»¶)</td><td>è§£å‹å³å¯ä½¿ç”¨, å®‰è£…ç®€å•</td><td>ç‰ˆæœ¬è·Ÿå®˜æ–¹ä¿æŒä¸€è‡´ï¼Œä¸èƒ½ä¿®æ”¹æºç </td></tr></tbody></table><p>##æ³¨æ„: ä¸ç®¡æ˜¯æºç åŒ…ï¼Œè¿˜æ˜¯rpmåŒ…,å®‰è£…æ—¶éƒ½å¯èƒ½ä¼šæœ‰ä¾èµ–å…³ç³»</p><h4 id="1-è·å–RPMåŒ…">1. è·å–RPMåŒ…</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">1.RedHatå…‰ç›˜æˆ–å®˜æ–¹ç½‘ç«™ ï¼ˆé€šè¿‡æŒ‚è½½çš„æ–¹å¼è®¿é—®ï¼‰</span><br><span class="line">[root@localhost ~]# mount /dev/cdrom /mnt    mountæŒ‚è½½è™šæ‹Ÿæœºè®¾ç½®é•œåƒä¿æŒè¿æ¥çŠ¶æ€</span><br><span class="line">mount: /dev/sr0 is write-protected, mounting read-only</span><br><span class="line">[root@localhost ~]# <span class="built_in">ls</span> -1 /mnt/Packages/|<span class="built_in">wc</span> -l     <span class="built_in">ls</span> -1æŸ¥çœ‹å†…å®¹ç«–å‘æ’åˆ—</span><br><span class="line">4022</span><br><span class="line"><span class="built_in">df</span> -h   å¯ä»¥æŸ¥çœ‹æŒ‚è½½æƒ…å†µ</span><br><span class="line">[root@lb01 ~]# <span class="built_in">df</span> -h</span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/sda3        19G  1.6G   18G   9% /</span><br><span class="line">devtmpfs        476M     0  476M   0% /dev</span><br><span class="line">tmpfs           487M     0  487M   0% /dev/shm</span><br><span class="line">tmpfs           487M  7.6M  479M   2% /run</span><br><span class="line">tmpfs           487M     0  487M   0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1       497M  120M  378M  25% /boot</span><br><span class="line">tmpfs            98M     0   98M   0% /run/user/0</span><br><span class="line">/dev/sr0        4.3G  4.3G     0 100% /mnt</span><br><span class="line"></span><br><span class="line">2.RPMåŒ…å®˜ç½‘ http://rpmfind.net/</span><br><span class="line">ä»¥åæŠ¥é”™ä¸­ï¼ŒlibCHARSET3-samba4.so .soç»“å°¾çš„æ–‡ä»¶ä¸å­˜åœ¨ï¼Œéœ€è¦å®‰è£…ï¼Œä¸çŸ¥é“è¾“å…¥å“ªä¸ªRPMåŒ…ï¼Œå»RPMå®˜ç½‘æŸ¥è¯¢å³å¯</span><br><span class="line"></span><br><span class="line"><span class="comment">## å„å¤§æœåŠ¡çš„å®˜ç½‘</span></span><br><span class="line">mysqlï¼šhttps://www.mysql.com/</span><br><span class="line">nginxï¼šhttps://www.nginx.org/</span><br><span class="line"></span><br><span class="line"><span class="comment"># å„å¤§é•œåƒç«™ï¼ˆyumä»“åº“ï¼Œyumæºï¼‰ï¼š</span></span><br><span class="line">é˜¿é‡Œäº‘ï¼šhttps://developer.aliyun.com/mirror/</span><br><span class="line">ç½‘æ˜“é•œåƒç«™ï¼šhttps://mirrors.163.com/</span><br><span class="line">åä¸ºæºï¼šhttps://mirrors.huaweicloud.com/</span><br><span class="line">æ¸…åæºï¼šhttps://mirrors.tuna.tsinghua.edu.cn/</span><br><span class="line">ä¸­ç§‘å¤§ï¼šhttps://mirrors.ustc.edu.cn/</span><br></pre></td></tr></table></figure><h4 id="2-RPMåŒ…ç®¡ç†">2.RPMåŒ…ç®¡ç†</h4><h5 id="â‘ -å®‰è£…">â‘  å®‰è£…</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## è¯­æ³•ï¼š</span></span><br><span class="line">rpm [é€‰é¡¹] å®‰è£…åŒ…å</span><br><span class="line">iï¼šinstall å®‰è£…</span><br><span class="line">vï¼šæ˜¾ç¤ºå®‰è£…è¿‡ç¨‹</span><br><span class="line">hï¼šæ˜¾ç¤ºè¿›åº¦æ¡</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--<span class="built_in">test</span>ï¼šæ£€æµ‹æ˜¯å¦èƒ½å®‰è£…æˆåŠŸ</span><br><span class="line">--forceï¼šå¼ºåˆ¶å®‰è£…</span><br><span class="line">--nodepsï¼šå¿½ç•¥ä¾èµ–å…³ç³»</span><br><span class="line"></span><br><span class="line"><span class="comment">## æœ¬åœ°å®‰è£…    éœ€è¦æŒ‚è½½é•œåƒè¿›å…¥åˆ°Packagesæ–‡ä»¶é‡Œ</span></span><br><span class="line">[root@localhost Packages]# rpm -i tree-1.6.0-10.el7.x86_64.rpm  </span><br><span class="line">[root@localhost ~]# rpm -ivh /mnt/Packages/unzip-6.0-19.el7.x86_64.rpm</span><br><span class="line"></span><br><span class="line"><span class="comment">## è¿œç¨‹å®‰è£…</span></span><br><span class="line">[root@localhost Packages]# rpm -i https://mirrors.aliyun.com/centos/7.9.2009/os/x86_64/Packages/tree-1.6.0-10.el7.x86_64.rpm</span><br><span class="line">[root@localhost Packages]# rpm -ivh https://mirrors.aliyun.com/centos/7.9.2009/os/x86_64/Packages/tree-1.6.0-10.el7.x86_64.rpm     </span><br><span class="line">æ˜¾ç¤ºè¿›åº¦æ¡å’Œå®‰è£…è¿‡ç¨‹</span><br></pre></td></tr></table></figure><h5 id="â‘¡-æŸ¥è¯¢">â‘¡ æŸ¥è¯¢</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">-qï¼š query æŸ¥è¯¢</span><br><span class="line">-qaï¼šæŸ¥è¯¢ç³»ç»Ÿå†…æ‰€æœ‰å®‰è£…è¿‡çš„åŒ…</span><br><span class="line">-qlï¼šæŸ¥è¯¢è½¯ä»¶åŒ…å®‰è£…å®Œåï¼Œé…ç½®æ–‡ä»¶ã€å¸®åŠ©æ–‡æ¡£ã€ç¨‹åº....çš„æ‰€åœ¨ç›®å½•ï¼ˆ[# rpm -ql nginxï¼‰</span><br><span class="line">-qcï¼šæŸ¥è¯¢è½¯ä»¶å®‰è£…åé…ç½®æ–‡ä»¶  confé…ç½®æ–‡ä»¶ï¼ˆ# rpm -qc nginxï¼‰</span><br><span class="line">-qfï¼šé€†å‘æŸ¥è¯¢ï¼Œæ ¹æ®æ–‡ä»¶åï¼Œå¯ä»¥æŸ¥å‡ºè¯¥æ–‡ä»¶æ˜¯å®‰è£…äº†å“ªä¸ªRPMåŒ…   ï¼ˆéœ€è¦å®Œæ•´ç›®å½•ï¼‰ï¼ˆ# rpm -qf /usr/sbin/nginxï¼‰</span><br><span class="line"><span class="comment">## è¿™ä¸ªæ–‡ä»¶/etc/redhat-releaseå±äºå“ªä¸ªRPMåŒ…ï¼Œè¯¥åŒ…çš„ç›¸å…³ä¿¡æ¯æ‰“å°å‡ºæ¥</span></span><br><span class="line">1.[root@localhost ~]# rpm -qi $(rpm -qf /etc/redhat-release)</span><br><span class="line">2.[root@localhost ~]# rpm -qf /etc/redhat-release|xargs rpm -qi</span><br><span class="line">3.[root@localhost ~]# rpm -qif /etc/redhat-release</span><br><span class="line"></span><br><span class="line">----</span><br><span class="line"><span class="comment">## -q --scripts æŸ¥è¯¢å®‰è£…æ—¶è¦æ‰§è¡Œçš„è„šæœ¬</span></span><br><span class="line">[root@localhost ~]# rpm -q --scripts nginx</span><br><span class="line">----</span><br><span class="line"></span><br><span class="line">-qiï¼šæŸ¥çœ‹å·²å®‰è£…å®‰è£…åŒ…çš„è¯¦ç»†ä¿¡æ¯   (åé¢è·ŸåŒ…å)</span><br><span class="line">-qdï¼šæŸ¥çœ‹å¸®åŠ©æ–‡æ¡£ä½ç½®</span><br><span class="line">-qipï¼šå¯ä»¥æŸ¥çœ‹æœªå®‰è£…çš„åŒ…è¯¦ç»†ä¿¡æ¯  å‰æï¼šå¾—æœ‰è¿™ä¸ªåŒ…</span><br><span class="line">[root@localhost ~]# rpm -qip /mnt/Packages/zip-3.0-11.el7.x86_64.rpm</span><br><span class="line">-qlpï¼šå¯ä»¥æŸ¥çœ‹æœªå®‰è£…çš„åŒ…ï¼Œå®‰è£…åä¼šäº§ç”Ÿå“ªäº›æ–‡ä»¶</span><br><span class="line">[root@localhost ~]# rpm -qlp /mnt/Packages/zip-3.0-11.el7.x86_64.rpm</span><br><span class="line">/usr/bin/zip</span><br><span class="line">/usr/bin/zipcloak</span><br><span class="line">/usr/bin/zipnote</span><br><span class="line">/usr/bin/zipsplit</span><br><span class="line">/usr/share/doc/zip-3.0</span><br><span class="line">/usr/share/doc/zip-3.0/CHANGES</span><br><span class="line">/usr/share/doc/zip-3.0/LICENSE</span><br><span class="line"></span><br><span class="line"><span class="comment">## -qåé¢æ¥åŒ…å</span></span><br><span class="line">[root@localhost ~]# rpm -q tree // å®‰è£…è¿‡äº†</span><br><span class="line">tree-1.6.0-10.el7.x86_64</span><br><span class="line">[root@localhost ~]# rpm -q tree // æ²¡æœ‰å®‰è£…</span><br><span class="line">package tree is not installed</span><br><span class="line"><span class="comment">## è¿‡æ»¤æŸ¥è¯¢æ˜¯å¦å®‰è£…</span></span><br><span class="line">[root@localhost ~]# rpm -qa|grep tree</span><br><span class="line">tree-1.6.0-10.el7.x86_64</span><br><span class="line">[root@localhost ~]# rpm -qa|grep mysql</span><br><span class="line">[root@localhost ~]# rpm -qa|grep nginx</span><br><span class="line"><span class="comment">## æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line">[root@localhost ~]# rpm -qi tree</span><br><span class="line">Name : tree</span><br><span class="line">Version : 1.6.0</span><br><span class="line">Release : 10.el7</span><br><span class="line">Architecture: x86_64</span><br><span class="line">Install Date: Fri 19 Apr 2024 08:05:31 PM CST</span><br><span class="line">Group : Applications/File</span><br><span class="line">Size : 89505</span><br><span class="line">License : GPLv2+</span><br><span class="line">Signature : RSA/SHA256, Fri 04 Jul 2014 01:36:46 PM CST, Key ID</span><br><span class="line">24c6a8a7f4a80eb5</span><br><span class="line">Source RPM : tree-1.6.0-10.el7.src.rpm</span><br><span class="line">Build Date : Tue 10 Jun 2014 03:28:53 AM CST</span><br><span class="line">Build Host : worker1.bsys.centos.org</span><br><span class="line">Relocations : (not relocatable)</span><br><span class="line">Packager : CentOS BuildSystem &lt;http://bugs.centos.org&gt;</span><br><span class="line">Vendor : CentOS</span><br><span class="line">URL : http://mama.indstate.edu/users/ice/tree/</span><br><span class="line">Summary : File system tree viewer</span><br><span class="line">Description :</span><br><span class="line">The tree utility recursively displays the contents of directories <span class="keyword">in</span> a</span><br><span class="line">tree-like format. Tree is basically a UNIX port of the DOS tree</span><br><span class="line">utility.</span><br><span class="line"><span class="comment">## æŸ¥æ‰¾å®‰è£…åç¨‹åºçš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@localhost ~]# rpm -qc nginx</span><br><span class="line">/etc/logrotate.d/nginx</span><br><span class="line">/etc/nginx/fastcgi.conf</span><br><span class="line">/etc/nginx/fastcgi.conf.default</span><br><span class="line">/etc/nginx/fastcgi_params</span><br><span class="line">/etc/nginx/fastcgi_params.default</span><br><span class="line">/etc/nginx/koi-utf</span><br><span class="line">/etc/nginx/koi-win</span><br><span class="line">/etc/nginx/mime.types</span><br><span class="line">/etc/nginx/mime.types.default</span><br><span class="line">/etc/nginx/nginx.conf</span><br><span class="line">/etc/nginx/nginx.conf.default</span><br><span class="line">/etc/nginx/scgi_params</span><br><span class="line">/etc/nginx/scgi_params.default</span><br><span class="line">/etc/nginx/uwsgi_params</span><br><span class="line">/etc/nginx/uwsgi_params.default</span><br><span class="line">/etc/nginx/win-utf</span><br><span class="line"><span class="comment">## é€†å‘æŸ¥è¯¢</span></span><br><span class="line">[root@localhost ~]# rpm -qf /etc/hosts</span><br><span class="line">setup-2.8.71-10.el7.noarch</span><br><span class="line">[root@localhost ~]# rpm -qf /usr/sbin/ifconfig</span><br><span class="line">net-tools-2.0-0.25.20131004git.el7.x86_64</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="â‘¢å¸è½½">â‘¢å¸è½½</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## å¸è½½</span></span><br><span class="line">[root@localhost ~]# rpm -e tree</span><br></pre></td></tr></table></figure><h5 id="â‘£å‡çº§RPMåŒ…">â‘£å‡çº§RPMåŒ…</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-U å¦‚æœè€ç‰ˆæœ¬ä¸å­˜åœ¨ï¼Œå°±å…¨æ–°å®‰è£…ï¼Œå¦‚æœå­˜åœ¨æœ‰æ–°ç‰ˆå³å‡çº§</span><br><span class="line">-f è€ç‰ˆæœ¬å¿…é¡»å­˜åœ¨</span><br><span class="line">[root@localhost ~]# rpm -fvh tree-1.8.0-2.mga8.x86_64.rpm</span><br><span class="line">[root@localhost ~]# rpm -Uvh tree-1.8.0-2.mga8.x86_64.rpm</span><br></pre></td></tr></table></figure><p><strong>==æ€»ç»“==</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ç¼ºé™·</span><br><span class="line">1.rpmåŒ…ç®¡ç†æ— æ³•è§£å†³åŒ…ä¸åŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»</span><br><span class="line">2.rpmåŒ…çš„æŸ¥è¯¢ï¼ŒåŸºæœ¬ä¸Šéƒ½éœ€è¦å·²ç»å®‰è£…è¿‡çš„åŒ…</span><br><span class="line"></span><br><span class="line">ä¼˜ç‚¹ï¼š</span><br><span class="line">1.ä¸éœ€è¦ç½‘ç»œå®‰è£…</span><br><span class="line">2.å®‰è£…é€Ÿåº¦å¿«</span><br></pre></td></tr></table></figure><h3 id="2-yumå·¥å…·">2.yumå·¥å…·</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">1.è”ç½‘è·å–è½¯ä»¶</span><br><span class="line">2.åŸºäºRPMç®¡ç†</span><br><span class="line">3.è‡ªåŠ¨è§£å†³ä¾èµ–ï¼ˆå‰æï¼š1.yumä»“åº“ä¸­å¿…é¡»æœ‰è¯¥ä¾èµ–åŒ… 2.ç‰ˆæœ¬è¦ä¸€è‡´ï¼‰</span><br><span class="line">4.å‘½ä»¤ç®€å•å¥½è®°</span><br><span class="line">5.ç”Ÿäº§æœ€ä½³å®è·µ</span><br><span class="line"></span><br><span class="line">yumæ˜¯RedHatä»¥åŠCentOSä¸­çš„è½¯ä»¶åŒ…ç®¡ç†å™¨ï¼Œèƒ½å¤Ÿé€šè¿‡äº’è”ç½‘ä¸‹è½½ä»¥rpmç»“å°¾çš„åŒ…ï¼Œå¹¶ä¸”å®‰è£…ï¼Œå¹¶å¯ä»¥è‡ªåŠ¨</span><br><span class="line">å¤„ç†ä¾èµ–æ€§å…³ç³»ï¼Œæ— éœ€ç¹ççš„ä¸€æ¬¡æ¬¡ä¸‹è½½å®‰è£…ã€‚</span><br><span class="line">yumä»“åº“ | yumæº</span><br><span class="line"><span class="comment"># CentOS7å’Œ7ä¹‹å‰æ‰€æœ‰ç‰ˆæœ¬ï¼šYUM</span></span><br><span class="line">yum install -y xx</span><br><span class="line"><span class="comment"># CentOS8ä»¥åï¼šdnf</span></span><br><span class="line">dnf install xxx</span><br><span class="line"><span class="comment">## ç³»ç»Ÿè‡ªå¸¦çš„åŸºç¡€åŒ…ä»“åº“</span></span><br><span class="line">Baseæº</span><br><span class="line"><span class="comment">## æ›´æ¢yumæºï¼Œä¸€å®šè¦è‡³å°‘æ¢ä¸¤ä¸ªæº</span></span><br><span class="line">- Baseæº åŸºç¡€åŒ…</span><br><span class="line">- epelæº æ‰©å±•åŒ…</span><br></pre></td></tr></table></figure><p><strong>==é…ç½®yumæº==</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">å„å¤§é•œåƒæºï¼š</span><br><span class="line">é˜¿é‡Œäº‘ï¼šhttps://opsx.alibaba.com/mirror</span><br><span class="line">æ¸…åæºï¼šhttps://mirrors.tuna.tsinghua.edu.cn/</span><br><span class="line">163æºï¼šhttp://mirrors.163.com/</span><br><span class="line">åä¸ºæºï¼šhttps://mirrors.huaweicloud.com/</span><br><span class="line">ç§‘å¤§æºï¼šhttp://mirrors.ustc.edu.cn/</span><br></pre></td></tr></table></figure><p><strong>==é…ç½®Baseæº==</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@lb01 ~]# ll /etc/yum.repos.d/    yumæºé…ç½®æ–‡ä»¶</span><br><span class="line"><span class="comment">## æ³¨æ„ï¼šæ‰€æœ‰çš„é…ç½®æ–‡ä»¶ï¼Œå¿…é¡»ä»¥repoç»“å°¾</span></span><br><span class="line">wget</span><br><span class="line">-Oï¼šæŒ‡å®šä¿å­˜çš„è·¯å¾„å’Œæ–‡ä»¶å</span><br><span class="line">https://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class="line">curl -o = wget -O</span><br><span class="line"><span class="comment">## æ¢æºæ­¥éª¤</span></span><br><span class="line">1ï¼‰æ¸…ç©º/etc/yum.repos.dä¸‹é¢æ‰€æœ‰æºé…ç½®æ–‡ä»¶ï¼ˆ<span class="built_in">mv</span> <span class="built_in">rm</span>ï¼‰</span><br><span class="line">[root@localhost ~]# <span class="built_in">mv</span> /etc/yum.repos.d/*.repo /tmp/</span><br><span class="line">[root@localhost ~]# gzip /etc/yum.repos.d/*</span><br><span class="line">2ï¼‰ä¸‹è½½å›½å†…å„å¤§é•œåƒç«™æº</span><br><span class="line">wget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class="line">curl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="â‘ -æ¢æº">â‘  æ¢æº</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##ä½¿ç”¨é•œåƒç«™æº</span></span><br><span class="line">wget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-vault-8.5.2111.repo</span><br><span class="line"></span><br><span class="line"><span class="comment">## å…¶ä»–é•œåƒç«™æ¢æºæ–¹å¼   ï¼ˆç¼ºé™·ï¼š1.éº»çƒ¦2.å¦‚æœä¸æ˜¯é»˜è®¤çš„å®˜æ–¹baseæºï¼Œè¿™ä¸ªæ›¿æ¢å°±ä¸æˆç«‹ï¼‰</span></span><br><span class="line">sed -e <span class="string">&#x27;s|^mirrorlist=|#mirrorlist=|g&#x27;</span> \</span><br><span class="line">    -e <span class="string">&#x27;s|^#baseurl=http://mirror.centos.org/centos|baseurl=https://mirrors.tuna.tsinghua.edu.cn/centos|g&#x27;</span> \</span><br><span class="line">    -i.bak \</span><br><span class="line">    /etc/yum.repos.d/CentOS-*.repo</span><br></pre></td></tr></table></figure><p><strong>==æ›´æ¢epelæº==</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# curl -o /etc/yum.repos.d/epel.repo https://mirrors.aliyun.com/repo/epel-7.repo</span><br><span class="line">[root@localhost ~]# ll /etc/yum.repos.d/</span><br><span class="line">total 8</span><br><span class="line">-rw-r--r--. 1 root root 1759 Apr 22 18:55 CentOS-Base.repo</span><br><span class="line">-rw-r--r--. 1 root root 664 Apr 22 19:08 epel.repo</span><br></pre></td></tr></table></figure><h4 id="â‘¡-yumç®¡ç†å‘½ä»¤">â‘¡ yumç®¡ç†å‘½ä»¤</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ ¹æ®å‘½ä»¤æœç´¢å¯¹åº”çš„åŒ…å</span></span><br><span class="line">[root@yum_repo ~]# yum provides pstree    æ³¨æ„ï¼šyum provideså‘½ä»¤åªèƒ½ç”¨äºå·²ç»å®‰è£…çš„è½¯ä»¶åŒ…</span><br><span class="line">[root@yum_repo ~]# yum search pstree</span><br><span class="line"></span><br><span class="line"><span class="comment">## æŸ¥çœ‹æˆ‘å½“å‰é…ç½®çš„æ‰€æœ‰ä»“åº“ä¸­çš„å¯ä»¥å®‰è£…çš„åŒ…</span></span><br><span class="line">[root@localhost ~]# yum list</span><br><span class="line">[root@localhost ~]# yum list|grep net-tools</span><br><span class="line"></span><br><span class="line"><span class="comment">## æŸ¥çœ‹ä»“åº“ä¸­æŒ‡å®šåŒ…çš„è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line">[root@localhost ~]# yum info åŒ…å</span><br><span class="line">[root@localhost ~]# yum info tree</span><br><span class="line"></span><br><span class="line"><span class="comment">## æŸ¥çœ‹å½“å‰æ‰€æœ‰å¯ç”¨ä»“åº“</span></span><br><span class="line">[root@lb01 yum.repos.d]# yum repolist</span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">Loading mirror speeds from cached hostfile</span><br><span class="line"><span class="comment">## ä»“åº“IDåå­— .repoæ–‡ä»¶ä¸­ [ä»“åº“ID]## ä»“åº“æè¿°ä¿¡æ¯ .repoæ–‡ä»¶ä¸­çš„name=## çŠ¶æ€ï¼šè¯¥ä»“åº“ä¸­æœ‰å¤šå°‘rpmåŒ…</span></span><br><span class="line">repo <span class="built_in">id</span>                               repo name                                                          status</span><br><span class="line">base/7/x86_64                         CentOS-7 - Base - mirrors.huaweicloud.com                          10,072</span><br><span class="line">extras/7/x86_64                       CentOS-7 - Extras - mirrors.huaweicloud.com                           526</span><br><span class="line">updates/7/x86_64                      CentOS-7 - Updates - mirrors.huaweicloud.com                        5,802</span><br><span class="line">repolist: 16,400</span><br><span class="line">repolist: 30,679<span class="comment">## æ‰€æœ‰å¯ç”¨ä»“åº“æ€»å…±åŒ…çš„æ•°é‡</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æ‰€æœ‰ä»“åº“ä¿¡æ¯ï¼Œå¯ç”¨å’Œä¸å¯ç”¨çš„éƒ½å±•ç¤ºå‡ºæ¥</span></span><br><span class="line">[root@localhost ~]# yum repolist all</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="â‘¢-yumå®‰è£…å‘½ä»¤">â‘¢ yumå®‰è£…å‘½ä»¤</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## å®‰è£…æŒ‡å®šè½¯ä»¶</span></span><br><span class="line">[root@localhost ~]# yum install åŒ…å</span><br><span class="line">[root@localhost ~]# yum install vim</span><br><span class="line">Is this ok [y/d/N]:</span><br><span class="line">è¾“å…¥yï¼š<span class="built_in">yes</span>å®‰è£…</span><br><span class="line">è¾“å…¥dï¼šdownload ä»…ä¸‹è½½ä¸å®‰è£…</span><br><span class="line">è¾“å…¥Nï¼šNoä¸å®‰è£…</span><br><span class="line"><span class="comment">## å…äº¤äº’å®‰è£…</span></span><br><span class="line">[root@localhost ~]# yum install vim -y</span><br><span class="line">[root@localhost ~]# yum -y install vim</span><br><span class="line">[root@localhost ~]# yum install -y vim</span><br><span class="line"><span class="comment">## yumå®‰è£…æ–¹å¼ï¼š</span></span><br><span class="line"><span class="comment"># æ–¹å¼ä¸€ï¼šå®‰è£…ä»“åº“ä¸­çš„åŒ…</span></span><br><span class="line">[root@localhost ~]# yum install vim</span><br><span class="line"><span class="comment"># æ–¹å¼äºŒï¼šå®‰è£…æœ¬åœ°çš„åŒ…</span></span><br><span class="line">[root@localhost Packages]# yum localinstall -y wget-1.14-18.el7.x86_64.rpm</span><br><span class="line"><span class="comment"># æ–¹å¼ä¸‰ï¼šè¿œç¨‹äº’è”ç½‘å®‰è£…</span></span><br><span class="line">[root@localhost Packages]# yum install -y http://test.driverzeng.com/MySQL_plugins/mha4mysql-node-0.56-0.el6.noarch.rpm</span><br><span class="line"></span><br><span class="line"><span class="comment">## æŒ‡å®šç›®å½•ä¸‹è½½</span></span><br><span class="line">[root@localhost ~]# yum install --downloadonly --downloaddir=/opt/ nginx</span><br></pre></td></tr></table></figure><h4 id="â‘£-yumé‡è£…-æ›´æ–°-åˆ é™¤">â‘£ yumé‡è£…/æ›´æ–°/åˆ é™¤</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## è¯¯åˆ é™¤æœåŠ¡çš„ç›¸å…³æ–‡ä»¶é‡è£…</span></span><br><span class="line">[root@localhost nginx]# yum reinstall -y nginx</span><br><span class="line"></span><br><span class="line"><span class="comment">## yumæŸ¥è¯¢å¯ä»¥æ›´æ–°çš„è½¯ä»¶</span></span><br><span class="line">[root@localhost nginx]# yum check-update</span><br><span class="line"><span class="comment">## æ›´æ–°æŒ‡å®šè½¯ä»¶</span></span><br><span class="line">[root@localhost nginx]# yum update acl -y</span><br><span class="line"><span class="comment">##å…¨éƒ¨è½¯ä»¶éƒ½æ›´æ–°ï¼ˆWaringï¼šæ…ç”¨ï¼‰</span></span><br><span class="line">[root@localhost nginx]# yum update -y</span><br><span class="line"></span><br><span class="line"><span class="comment">## åˆ é™¤æŒ‡å®šè½¯ä»¶</span></span><br><span class="line">[root@localhost nginx]# yum remove -y tree</span><br><span class="line">[root@localhost nginx]# yum erase -y tree</span><br></pre></td></tr></table></figure><h4 id="â‘£-yumé€†å‘æŸ¥è¯¢-ç¼“å­˜">â‘£ yumé€†å‘æŸ¥è¯¢/ç¼“å­˜</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŸ¥è¯¢æŸä¸ªå‘½ä»¤å±äºå“ªä¸ªåŒ…</span></span><br><span class="line">[root@localhost nginx]# yum provides */ifconfig</span><br><span class="line"></span><br><span class="line"><span class="comment">## åŠ è½½ç¼“å­˜</span></span><br><span class="line">[root@localhost nginx]# yum makecache</span><br><span class="line"><span class="comment">## æ¸…é™¤ç¼“å­˜</span></span><br><span class="line">[root@localhost nginx]# yum clean all</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="â‘¤-çˆ¬å–rpmåŒ…">â‘¤ çˆ¬å–rpmåŒ…</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/7/x86_64/?spm=a2c6h.25603864.0.0.239b5d4a bvLbEB</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">1.æŒ‡å®šä¸‹è½½ç›®å½•</span><br><span class="line">[root@lb01 ~]# curl -s https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/7/x86_64/?spm=a2c6h.25603864.0.0.239b5d4a bvLbEB|awk -F <span class="string">&#x27;&quot;&#x27;</span> <span class="string">&#x27;/rpm/&#123;print &quot;mkdir -p /repo/zabbix/;wget -O /repo/zabbix/&quot;$4&quot; https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/7/x86_64/&quot;$4&#125;&#x27;</span>|bash</span><br><span class="line"></span><br><span class="line">2.ä¸‹è½½åˆ°å½“å‰ç›®å½•</span><br><span class="line">[root@lb01 ~]# curl -s https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/7/x86_64|awk -F <span class="string">&#x27;&quot;&#x27;</span> <span class="string">&#x27;/rpm/&#123;print $4&#125;&#x27;</span>|sed <span class="string">&#x27;s#zabbix#https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/7/x86_64/zabbix#g&#x27;</span>|xargs wget</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1.curl ç½‘ç«™è·å–ç½‘é¡µå†…å®¹</span><br><span class="line">[root@lb01 ~]# curl -s https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/7/x86_64</span><br><span class="line">2.æˆªå–æ‰€æœ‰rpmåŒ…å</span><br><span class="line">[root@lb01 ~]# curl -s https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/7/x86_64|awk -F <span class="string">&#x27;&quot;&#x27;</span> <span class="string">&#x27;/rpm/&#123;print $4&#125;&#x27;</span></span><br><span class="line">zabbix-agent-5.0.0-1.el7.x86_64.rpm</span><br><span class="line">zabbix-agent-5.0.1-1.el7.x86_64.rpm</span><br><span class="line">zabbix-agent-5.0.10-1.el7.x86_64.rpm</span><br><span class="line">zabbix-agent-5.0.11-1.el7.x86_64.rpm</span><br><span class="line">3.è¡¥å…¨å…¬å…±ä¸‹è½½é“¾æ¥https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/7/x86_64/?spm=a2c6h.25603864.0.0.239b5d4a bvLbEB</span><br><span class="line">sed <span class="string">&#x27;s#zabbix#https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/7/x86_64/zabbix#g&#x27;</span></span><br><span class="line">4.æ‹¼æ¥å‘½ä»¤äº¤ç»™wget</span><br><span class="line">[root@lb01 ~]# curl -s https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/7/x86_64|awk -F <span class="string">&#x27;&quot;&#x27;</span> <span class="string">&#x27;/rpm/&#123;print $4&#125;&#x27;</span>|sed <span class="string">&#x27;s#zabbix#https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/7/x86_64/zabbix#g&#x27;</span>|xargs wget</span><br></pre></td></tr></table></figure><h3 id="3-yumæ–‡ä»¶-å‘½ä»¤">3.yumæ–‡ä»¶&amp;å‘½ä»¤</h3><h4 id="â‘ -yumç¨‹åºçš„é…ç½®æ–‡ä»¶">â‘  yumç¨‹åºçš„é…ç½®æ–‡ä»¶</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# <span class="built_in">cat</span> /etc/yum.conf</span><br><span class="line">cachedir=/var/cache/yum/<span class="variable">$basearch</span>/<span class="variable">$releasever</span> //ç¼“å­˜ç›®å½•</span><br><span class="line">keepcache=0   //ç¼“å­˜è½¯ä»¶åŒ…, 1å¯åŠ¨ 0 å…³é—­</span><br><span class="line">debuglevel=2   //è°ƒè¯•çº§åˆ«</span><br><span class="line">logfile=/var/log/yum.log //æ—¥å¿—è®°å½•ä½ç½®</span><br><span class="line">exactarch=1 //æ£€æŸ¥å¹³å°æ˜¯å¦å…¼å®¹</span><br><span class="line">obsoletes=1 //æ£€æŸ¥åŒ…æ˜¯å¦åºŸå¼ƒ</span><br><span class="line">gpgcheck=1 //æ£€æŸ¥æ¥æºæ˜¯å¦åˆæ³•,éœ€è¦æœ‰åˆ¶ä½œè€…çš„å…¬é’¥ä¿¡æ¯</span><br><span class="line">plugins=1 //æ˜¯å¦å¯ç”¨æŸ¥è¯¢</span><br><span class="line">installonly_limit=5</span><br><span class="line">bugtracker_url</span><br><span class="line"><span class="comment"># metadata_expire=90m //æ¯å°æ—¶æ‰‹åŠ¨æ£€æŸ¥å…ƒæ•°æ®</span></span><br><span class="line"><span class="comment"># in /etc/yum.repos.d //åŒ…å«repos.dç›®å½•</span></span><br></pre></td></tr></table></figure><h4 id="â‘¡yumç»„å‘½ä»¤">â‘¡yumç»„å‘½ä»¤</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹æœ‰å“ªäº›åŒ…ç»„</span></span><br><span class="line">[root@localhost ~]# yum <span class="built_in">groups</span> list</span><br><span class="line"><span class="comment"># å®‰è£…æŒ‡å®šåŒ…ç»„</span></span><br><span class="line">[root@localhost ~]# yum <span class="built_in">groups</span> install Development tools Compatibility libraries</span><br><span class="line">Base Debugging Tools</span><br><span class="line"><span class="comment"># åˆ é™¤æŒ‡å®šåŒ…ç»„</span></span><br><span class="line">[root@localhost ~]# yum <span class="built_in">groups</span> remove -y Base</span><br></pre></td></tr></table></figure><h4 id="â‘¢-yumå†å²å‘½ä»¤">â‘¢ yumå†å²å‘½ä»¤</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## æŸ¥çœ‹yumæ‰§è¡Œçš„å†å²</span></span><br><span class="line">[root@localhost ~]# yum <span class="built_in">history</span></span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">ID | Login user | Date and time | Action(s) | Altered</span><br><span class="line">-------------------------------------------------------------------------------</span><br><span class="line">6 | root &lt;root&gt; | 2024-04-23 18:05 | Install | 1</span><br><span class="line">5 | root &lt;root&gt; | 2024-04-23 17:09 | Update | 2</span><br><span class="line">4 | root &lt;root&gt; | 2024-03-26 17:36 | Install | 1</span><br><span class="line">3 | root &lt;root&gt; | 2024-03-26 17:31 | Install | 1</span><br><span class="line">2 | root &lt;root&gt; | 2024-03-22 15:55 | Install | 1</span><br><span class="line">1 | System &lt;<span class="built_in">unset</span>&gt; | 2024-03-21 20:50 | Install | 308</span><br><span class="line"><span class="comment">## æŸ¥çœ‹æŒ‡å®šå†å²è®°å½•çš„è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line">[root@localhost ~]# yum <span class="built_in">history</span> info 6</span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">Transaction ID : 6</span><br><span class="line">Begin time : Tue Apr 23 18:05:41 2024</span><br><span class="line">Begin rpmdb : 311:bc74a8339d5853ce2035d376bffbbeeb40d44ae3</span><br><span class="line">End time : 18:05:42 2024 (1 seconds)</span><br><span class="line">End rpmdb : 312:44280ba9419b586ea77d5fa483785725fe7e9758</span><br><span class="line">User : root &lt;root&gt;</span><br><span class="line">Return-Code : Success</span><br><span class="line">Command Line : install -y tree</span><br><span class="line">Transaction performed with:</span><br><span class="line">Installed rpm-4.11.3-35.el7.x86_64 @anaconda</span><br><span class="line">Installed yum-3.4.3-161.el7.centos.noarch @anaconda</span><br><span class="line">Installed yum-plugin-fastestmirror-1.1.31-50.el7.noarch @anaconda</span><br><span class="line">Packages Altered:</span><br><span class="line">Install tree-1.6.0-10.el7.x86_64 @base</span><br><span class="line"><span class="built_in">history</span> info</span><br><span class="line"><span class="comment">## å›æ»šæŒ‡å®šæ“ä½œ</span></span><br><span class="line">[root@localhost ~]# yum <span class="built_in">history</span> undo 6 -y</span><br></pre></td></tr></table></figure><h3 id="4-åˆ¶ä½œyumä»“åº“">4.åˆ¶ä½œyumä»“åº“</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">æ¡ä»¶ï¼š</span><br><span class="line">1.åˆ¶ä½œä»“åº“ï¼Œä¸€å®šè¦æœ‰å­˜æ”¾rpmåŒ…çš„ç›®å½•</span><br><span class="line">2.ä¼šé…ç½®repoä»“åº“æ–‡ä»¶</span><br><span class="line"><span class="comment">## repoé…ç½®æ–‡ä»¶å†…å®¹è§£æ</span></span><br><span class="line"><span class="comment"># ä»“åº“å</span></span><br><span class="line">[base]</span><br><span class="line"><span class="comment"># æè¿°ä¿¡æ¯</span></span><br><span class="line">name=CentOS-<span class="variable">$releasever</span> - Base - mirrors.aliyun.com</span><br><span class="line"><span class="comment"># ä»“åº“åœ°å€</span></span><br><span class="line">baseurl=http://mirrors.aliyun.com/centos/<span class="variable">$releasever</span>/os/<span class="variable">$basearch</span>/</span><br><span class="line"><span class="comment"># æ˜¯å¦å¼€å¯yumä»“åº“ç­¾åæœºåˆ¶æ£€æµ‹</span></span><br><span class="line">gpgcheck=1 // 0 ä»£è¡¨å…³é—­ï¼Œä¸æ£€æµ‹ 1 ä»£è¡¨å¼€å¯ï¼Œæ£€æµ‹</span><br><span class="line"><span class="comment"># gpgé’¥åŒ™çš„åœ°å€</span></span><br><span class="line">gpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7</span><br><span class="line"><span class="comment">## æ˜¯å¦å¼€å¯yumä»“åº“</span></span><br><span class="line">enabled=0 // æ˜¯å¦å¼€å¯è¯¥ä»“åº“ï¼Œ0ä»£è¡¨å…³é—­ 1ä»£è¡¨å¼€å¯</span><br><span class="line"><span class="comment">## å¯†é’¥å¯¹</span></span><br><span class="line">é’¥åŒ™</span><br><span class="line">é”</span><br><span class="line"><span class="comment">## ä»“åº“åœ°å€æ”¯æŒçš„åè®®ï¼š</span></span><br><span class="line">- http:// è¿œç¨‹åè®®</span><br><span class="line">- https:// è¿œç¨‹åè®®</span><br><span class="line">- ftp:// è¿œç¨‹åè®®</span><br><span class="line">- file:// æœ¬åœ°åè®®ï¼Œåªèƒ½è®¿é—®æœ¬æœº</span><br></pre></td></tr></table></figure><h4 id="â‘ -åˆ¶ä½œæœ¬åœ°yumä»“åº“">â‘  åˆ¶ä½œæœ¬åœ°yumä»“åº“</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.å®‰è£…createrepoå‘½ä»¤</span></span><br><span class="line">[root@localhost ~]# yum install -y createrepo</span><br><span class="line"><span class="comment"># 2.è®©ç›®å½•ç¼–ç¨‹yumä»“åº“ createrepo</span></span><br><span class="line">[root@localhost ~]# createrepo /repo/zabbix/</span><br><span class="line">Spawning worker 0 with 475 pkgs</span><br><span class="line"><span class="comment"># 3.é…ç½®ä»“åº“æ–‡ä»¶</span></span><br><span class="line">[root@localhost yum.repos.d]# vim zls.repo</span><br><span class="line">[zls_repo]</span><br><span class="line">name=zls<span class="string">&#x27;s yum repository xxxx</span></span><br><span class="line"><span class="string">baseurl=file:///repo/zabbix/</span></span><br><span class="line"><span class="string">gpgcheck=0</span></span><br><span class="line"><span class="string">enabled=1</span></span><br></pre></td></tr></table></figure><p><strong>==å¦‚ä½•åœ¨ä»“åº“ä¸­æ–°åŠ RPMåŒ…==</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.å°†rpmæ”¾å…¥ä»“åº“</span></span><br><span class="line">wget <span class="built_in">cp</span> <span class="built_in">mv</span> ...</span><br><span class="line"><span class="comment"># 2.é‡æ–°æ›´æ–°ä»“åº“</span></span><br><span class="line">[root@localhost repo]# createrepo --update /repo</span><br><span class="line"><span class="comment"># 3.ç”¨æˆ·ä½¿ç”¨ä»“åº“æ—¶ï¼Œéœ€è¦é‡æ–°åŠ è½½ç¼“å­˜</span></span><br><span class="line">[root@localhost ~]# yum makecache</span><br></pre></td></tr></table></figure><p><strong>éœ€æ±‚ï¼šå°†/dev/cdromä¸­çš„rpmåŒ…ï¼Œæ‹·è´åˆ° /zls/baseç›®å½•ä¸‹ï¼Œç„¶åå°†è¯¥ç›®å½•åˆ¶ä½œæˆæœ¬åœ°çš„yumä»“åº“</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.åˆ›å»ºç›®å½•</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">mkdir</span> -p /zls/base</span><br><span class="line"><span class="comment"># 2.æŒ‚è½½é•œåƒ</span></span><br><span class="line">[root@localhost ~]# mount /dev/cdrom /mnt</span><br><span class="line"><span class="comment"># 3.æ‹·è´rpmåŒ…</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cp</span> /mnt/Packages/*.rpm /zls/base/</span><br><span class="line"><span class="comment"># 4.åˆ¶ä½œä»“åº“</span></span><br><span class="line">[root@localhost ~]# createrepo /zls/base/</span><br><span class="line"><span class="comment"># 5.ç¼–å†™repoæ–‡ä»¶</span></span><br><span class="line">[root@localhost ~]# vi /etc/yum.repos.d/zls.repo</span><br><span class="line">[zls_repo]</span><br><span class="line">name=zls<span class="string">&#x27;s yum repository xxxx</span></span><br><span class="line"><span class="string">baseurl=file:///repo/</span></span><br><span class="line"><span class="string">gpgcheck=0</span></span><br><span class="line"><span class="string">enabled=1</span></span><br></pre></td></tr></table></figure><h4 id="â‘¡-åˆ¶ä½œè¿œç¨‹yumä»“åº“">â‘¡ åˆ¶ä½œè¿œç¨‹yumä»“åº“</h4><p><strong>ç¯å¢ƒå‡†å¤‡</strong></p><table><thead><tr><th>ä¸»æœº</th><th>ip</th><th>è§’è‰²</th></tr></thead><tbody><tr><td>yum_repo</td><td>10.0.0.101</td><td>yumä»“åº“</td></tr><tr><td>web01</td><td>10.0.0.102</td><td>ä½¿ç”¨yumä»“åº“çš„æœºå™¨</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## å¯é€‰åè®®ï¼š</span></span><br><span class="line">- http:// è¿œç¨‹åè®®</span><br><span class="line">- https:// è¿œç¨‹åè®®ï¼ˆåˆ«è€ƒè™‘ï¼‰</span><br><span class="line">- ftp:// è¿œç¨‹åè®®</span><br><span class="line"><span class="comment">## å…‹éš†æ–°çš„ä¸»æœºä¿®æ”¹ä¸»æœºåå’ŒIP</span></span><br><span class="line"><span class="comment"># ä¿®æ”¹ä¸»æœºå</span></span><br><span class="line">[root@web01 ~]# hostnamectl set-hostname yum_repo</span><br><span class="line">[root@web01 ~]# hostnamectl set-hostname web01</span><br><span class="line"><span class="comment"># ä¿®æ”¹IP</span></span><br><span class="line"><span class="comment">## å…³é—­é˜²ç«å¢™</span></span><br><span class="line">[root@yum_repo ~]# systemctl stop firewalld</span><br><span class="line">[root@web01 ~]# systemctl stop firewalld</span><br><span class="line"><span class="comment">## å…³é—­selinux</span></span><br><span class="line">[root@web01 ~]# setenforce 0</span><br><span class="line">[root@web01 ~]# getenforce</span><br><span class="line">Permissive</span><br></pre></td></tr></table></figure><h5 id="ftpåˆ¶ä½œè¿œç¨‹ä»“åº“">ftpåˆ¶ä½œè¿œç¨‹ä»“åº“</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.å®‰è£…ftpåè®®çš„è½¯ä»¶</span></span><br><span class="line">[root@yum_repo ~]# yum install -y vsftpd</span><br><span class="line"><span class="comment"># 2.å¯åŠ¨vsftpd</span></span><br><span class="line">[root@yum_repo ~]# systemctl start vsftpd</span><br><span class="line">[root@yum_repo ~]# systemctl <span class="built_in">enable</span> vsftpd</span><br><span class="line"><span class="comment"># 3.æ‰“å¼€æµè§ˆå™¨è®¿é—® ftp://10.0.0.101</span></span><br><span class="line"><span class="comment"># 4.æŸ¥æ‰¾ftpçš„ç›®å½•æ‰€åœ¨</span></span><br><span class="line">[root@yum_repo pub]# rpm -ql vsftpd|grep pub</span><br><span class="line">/var/ftp/pub</span><br><span class="line"><span class="comment"># 5.pubç›®å½•å°±å¯ä»¥å½“åšyumä»“åº“</span></span><br><span class="line">[root@yum_repo pub]# mount /dev/cdrom /mnt/</span><br><span class="line">[root@yum_repo pub]# <span class="built_in">cp</span> /mnt/Packages/tree-1.6.0-10.el7.x86_64.rpm /mnt/Packages/wget-1.14-18.el7.x86_64.rpm base/</span><br><span class="line"><span class="comment"># 6.å®‰è£…åˆ¶ä½œä»“åº“çš„å‘½ä»¤</span></span><br><span class="line">[root@yum_repo ~]# yum install -y createrepo</span><br><span class="line"><span class="comment"># 7.åˆ¶ä½œyumä»“åº“</span></span><br><span class="line">[root@yum_repo ~]# createrepo /var/ftp/pub/base/</span><br><span class="line">Spawning worker 0 with 2 pkgs</span><br><span class="line">Workers Finished</span><br><span class="line">Saving Primary metadata</span><br><span class="line">Saving file lists metadata</span><br><span class="line">Saving other metadata</span><br><span class="line">Generating sqlite DBs</span><br><span class="line">Sqlite DBs complete</span><br><span class="line"><span class="comment"># 8.å‡†å¤‡repoæ–‡ä»¶</span></span><br><span class="line">[root@yum_repo base]# vim zls_base.repo</span><br><span class="line">[zls_base_repo]</span><br><span class="line">name=<span class="built_in">test</span></span><br><span class="line">baseurl=ftp://10.0.0.101/pub/base/</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br><span class="line"><span class="comment">## å…¶ä»–ç”¨æˆ·æƒ³è¦ä½¿ç”¨è¯¥yumæºï¼Œåªéœ€è¦ä¸‹è½½</span></span><br><span class="line">[root@web01 ~]# curl -o /etc/yum.repos.d/zls_base.repo</span><br><span class="line">ftp://10.0.0.101/pub/base/zls_base.repo</span><br><span class="line">[root@web01 ~]# vim /etc/yum.repos.d/xxx.repo</span><br><span class="line">[zls_base_repo]</span><br><span class="line">name=<span class="built_in">test</span></span><br><span class="line">baseurl=ftp://10.0.0.101/pub/base/</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br></pre></td></tr></table></figure><h5 id="nginxåˆ¶ä½œè¿œç¨‹ä»“åº“">nginxåˆ¶ä½œè¿œç¨‹ä»“åº“</h5><p><strong>ç¯å¢ƒå‡†å¤‡</strong></p><table><thead><tr><th>ä¸»æœº</th><th>ip</th><th>è§’è‰²</th></tr></thead><tbody><tr><td>yum_repo</td><td>10.0.0.101</td><td>yumä»“åº“</td></tr><tr><td>web01</td><td>10.0.0.102</td><td>ä½¿ç”¨yumä»“åº“çš„æœºå™¨</td></tr></tbody></table><p><strong>å‰æœŸå‡†å¤‡</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å…‹éš†è™šæ‹Ÿæœº</span></span><br><span class="line"><span class="comment"># å…‹éš†æ–°çš„ä¸»æœºä¿®æ”¹ä¸»æœºåå’ŒIP</span></span><br><span class="line">[root@web01 ~]# hostnamectl set-hostname yum_repo</span><br><span class="line">[root@web01 ~]# hostnamectl set-hostname web01</span><br><span class="line"><span class="comment"># ä¿®æ”¹IP</span></span><br><span class="line"><span class="comment">## å…³é—­é˜²ç«å¢™</span></span><br><span class="line">[root@yum_repo ~]# systemctl stop firewalld</span><br><span class="line">[root@web01 ~]# systemctl stop firewalld</span><br><span class="line"><span class="comment">## å…³é—­selinux</span></span><br><span class="line">[root@web01 ~]# setenforce 0</span><br><span class="line">[root@web01 ~]# getenforce</span><br><span class="line">Permissive</span><br></pre></td></tr></table></figure><p><strong>ä½¿ç”¨nginxåˆ¶ä½œyumä»“åº“</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.å®‰è£…nginx</span></span><br><span class="line">[root@yum_repo ~]# yum -y install nginx</span><br><span class="line"><span class="comment">#2.å¯åŠ¨nginx</span></span><br><span class="line">[root@yum_repo ~]# systemctl start nginx</span><br><span class="line">[root@yum_repo ~]# systemctl <span class="built_in">enable</span> nginx</span><br><span class="line"><span class="comment">#3.åˆ›å»ºbaseæºå’Œzabbixçš„yumåº“</span></span><br><span class="line">[root@yum_repo yum]# <span class="built_in">mkdir</span> /etc/repo/yum/&#123;base,zabbix&#125; -p</span><br><span class="line"></span><br><span class="line">[root@yum_repo yum]# <span class="built_in">mkdir</span> /etc/repo/yum/base/ -p</span><br><span class="line">[root@yum_repo yum]# <span class="built_in">mkdir</span> /etc/repo/yum/zabbix/ -p</span><br><span class="line"><span class="comment">#è·å–baseåŒ…</span></span><br><span class="line">[root@web01 ~]# mount /dev/cdrom /mnt/</span><br><span class="line">[root@yum_repo yum]# <span class="built_in">cp</span> /mnt/Packages/* /etc/repo/yum/base/</span><br><span class="line">æ‹·è´çˆ¬å–çš„zabbixçš„åŒ…åˆ°/etc/repo/yum/zabbixä¸‹</span><br><span class="line">[root@lb01 nginx]# <span class="built_in">cp</span> /repo/zabbix/* /etc/repo/yum/zabbix</span><br><span class="line"><span class="comment">#4.å®‰è£…åˆ¶ä½œä»“åº“çš„å‘½ä»¤</span></span><br><span class="line">[root@yum_repo ~]# yum install -y createrepo</span><br><span class="line"><span class="comment">#5.åˆ¶ä½œyumä»“åº“</span></span><br><span class="line">[root@yum_repo yum]# createrepo /etc/repo/yum/base/</span><br><span class="line">[root@yum_repo yum]# createrepo /etc/repo/yum/zabbix/</span><br><span class="line"><span class="comment">#6.ä¿®æ”¹ngingxé…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@yum_repo nginx]# vim /etc/nginx/nginx.conf</span><br><span class="line"></span><br><span class="line"><span class="comment">#åœ¨nginx.confpé…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼Œ</span></span><br><span class="line">location / &#123;</span><br><span class="line">    45        autoindex on;</span><br><span class="line">    46        root   /etc/repo/yum;<span class="comment">#æŒ‡å®šæœ¬åœ°yumä»“åº“ä½ç½®</span></span><br><span class="line">    47        &#125;</span><br><span class="line">    </span><br><span class="line">   <span class="comment"># æ·»åŠ ä½ç½®æ˜¯åœ¨server&#123;&#125;é‡Œå¦‚ä¸‹</span></span><br><span class="line">server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        listen       [::]:80;</span><br><span class="line">        server_name  _;</span><br><span class="line">       root         /usr/share/nginx/html;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">        autoindex on;</span><br><span class="line">        root   /etc/repo/yum;</span><br><span class="line">           &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line"><span class="comment">#æˆ–è€…[root@yum_repo ~]# cat /etc/nginx/conf.d/yum_repo.conf</span></span><br><span class="line">è¿™ä¸ªå‰ææ˜¯ï¼Œnginx.confpé…ç½®æ–‡ä»¶é‡Œæ²¡æœ‰server&#123; &#125;è¿™ä¸ªå†…å®¹ï¼Œç›¸å½“äºæŠŠè¿™æ®µå‘½ä»¤å†™åœ¨conf.dé…ç½®æ–‡ä»¶é‡Œ</span><br><span class="line">server&#123;</span><br><span class="line">listen 80;</span><br><span class="line">server_name _;</span><br><span class="line">location /&#123;</span><br><span class="line">autoindex on;</span><br><span class="line">root /yum_repo;</span><br><span class="line">index index.html;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ£€æµ‹è¯­æ³•æœ‰æ²¡æœ‰é—®é¢˜</span></span><br><span class="line">[root@yum_repo ~]# nginx -t</span><br><span class="line">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /etc/nginx/nginx.conf <span class="built_in">test</span> is successful</span><br><span class="line"></span><br><span class="line"><span class="comment">#é‡å¯nginx</span></span><br><span class="line"> [root@yum_repo ~]# systemctl restart nginx</span><br><span class="line"><span class="comment">#7.å‡†å¤‡repoæ–‡ä»¶</span></span><br><span class="line">[root@yum_repo base]# vim nginx.repo</span><br><span class="line">[nginx_repo]</span><br><span class="line">name=<span class="built_in">test</span></span><br><span class="line">baseurl=10.0.0.101/base/</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br><span class="line"></span><br><span class="line">[nginx_repo]</span><br><span class="line">name=<span class="built_in">test</span></span><br><span class="line">baseurl=10.0.0.101/zabbix/</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br><span class="line">å¯ä»¥å°†nginx.repoæ–‡ä»¶æ”¾åœ¨ /etc/repo/yum/ç›®å½•ä¸‹</span><br><span class="line"><span class="comment">#8.åˆ‡æ¢åˆ°web01å®¢æˆ·ç«¯</span></span><br><span class="line">ä¸‹è½½åˆ¶ä½œçš„nginx.repoæº</span><br><span class="line">[root@web01 ~]# wget -O /etc/yum.repos.d/ http://10.0.0.101/nginx.repo</span><br><span class="line">åˆ é™¤web01å®¢æˆ·ç«¯å…¶å®ƒæºï¼Œåªç•™nginx.repoæºï¼Œä½¿ç”¨å®‰è£…rpmåŒ…æµ‹è¯•æˆ‘ä»¬åˆ¶ä½œçš„yumæº</span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/image-20240423210955932.png" alt="image-20240423210955932"></p><h2 id="ã€8ã€‘è¿›ç¨‹ç®¡ç†">ã€8ã€‘è¿›ç¨‹ç®¡ç†</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ç¨‹åºï¼šå®ƒæ˜¯ä¸€ä¸ªé™æ€çš„æ¦‚å¿µï¼Œå¼€å‘äººå‘˜å†™å¥½çš„ä»£ç </span><br><span class="line">è¿›ç¨‹ï¼šå®ƒæ˜¯ä¸€ä¸ªåŠ¨æ€çš„æ¦‚å¿µï¼Œå°†ç¨‹åºè¿è¡Œèµ·æ¥çš„è¿‡ç¨‹ï¼Œå°±å«åšè¿›ç¨‹</span><br><span class="line">è¿è¡Œç¯å¢ƒï¼šèƒ½è®©ç¨‹åºæ­£å¸¸è¿è¡Œçš„ç¯å¢ƒï¼Œå¯¹åº”å¼€å‘è¯­è¨€å†™çš„ä»£ç ï¼Œéœ€è¦å¯¹åº”çš„ç¯å¢ƒæ¥è¿è¡Œ</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.å½“ç¨‹åºè¿è¡Œä¸ºè¿›ç¨‹åï¼Œç³»ç»Ÿä¼šä¸ºè¯¥è¿›ç¨‹åˆ†é…å†…å­˜ï¼Œä»¥åŠè¿è¡Œçš„èº«ä»½å’Œæƒé™ã€‚ </span><br><span class="line">2.åœ¨è¿›ç¨‹è¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼ŒæœåŠ¡å™¨ä¸Šä¼šæœ‰å„ç§çŠ¶æ€æ¥è¡¨ç¤ºå½“å‰è¿›ç¨‹çš„æŒ‡æ ‡ä¿¡æ¯ã€‚</span><br></pre></td></tr></table></figure><p><strong>è¿›ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ</strong></p><p><img src="https://cos.lukme.top/Pic/image-20240424145131410.png" alt="image-20240424145131410"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è¿›ç¨‹/çˆ¶è¿›ç¨‹ï¼š</span></span><br><span class="line">- ç­‰å¾…ï¼š</span><br><span class="line">1ï¼‰æœ‰æ²¡æœ‰ç”¨æˆ·çš„æ–°è¯·æ±‚æ¥</span><br><span class="line">2ï¼‰å­è¿›ç¨‹æ˜¯å¦å¤„ç†å®Œè¿”å›ç»“æœ</span><br><span class="line"><span class="comment">#çº¿ç¨‹/å­è¿›ç¨‹</span></span><br><span class="line">1ï¼‰å¤„ç†è¯·æ±‚</span><br><span class="line">2ï¼‰å°†ç»“æœè¿”å›ç»™çˆ¶è¿›ç¨‹</span><br><span class="line"><span class="comment">#è¿›ç¨‹çŠ¶æ€ï¼š</span></span><br><span class="line">1ï¼‰æ­£å¸¸ç»“æŸ</span><br><span class="line">2ï¼‰åƒµå°¸è¿›ç¨‹</span><br><span class="line">3ï¼‰å­¤å„¿è¿›ç¨‹</span><br><span class="line"><span class="comment">#åç¨‹ï¼špython</span></span><br></pre></td></tr></table></figure><p><strong>åƒµå°¸è¿›ç¨‹</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åƒµå°¸è¿›ç¨‹ï¼š</span></span><br><span class="line">å­è¿›ç¨‹æ¯”çˆ¶è¿›ç¨‹å…ˆç»“æŸ,çˆ¶è¿›ç¨‹æ²¡æœ‰å›æ”¶å­è¿›ç¨‹çš„èµ„æº,æ­¤æ—¶çš„å­è¿›ç¨‹å°±ç§°ä¸º<span class="string">&quot;åƒµå°¸è¿›ç¨‹&quot;</span></span><br><span class="line"><span class="comment">#äº§ç”ŸåŸå› ï¼š</span></span><br><span class="line">å­è¿›ç¨‹çš„ç»“æŸå’Œçˆ¶è¿›ç¨‹çš„è¿è¡Œæ˜¯å¼‚æ­¥çš„,çˆ¶è¿›ç¨‹æ°¸è¿œä¸çŸ¥é“å­è¿›ç¨‹ä»€ä¹ˆæ—¶å€™ç»“æŸ,å­è¿›ç¨‹åœ¨ç»“æŸæ—¶ï¼Œçˆ¶è¿›ç¨‹ç¹å¿™æ¥ä¸åŠWaitå­è¿›ç¨‹åˆ™ä¼šå¯¼è‡´ï¼Œå­è¿›ç¨‹å˜æˆ<span class="string">&quot;åƒµå°¸è¿›ç¨‹&quot;</span></span><br></pre></td></tr></table></figure><p><strong>å­¤å„¿è¿›ç¨‹</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å­¤å„¿è¿›ç¨‹ï¼š</span></span><br><span class="line">çˆ¶è¿›ç¨‹æ¯”å­è¿›ç¨‹å…ˆç»“æŸ,å­è¿›ç¨‹è¿˜åœ¨æ‰§è¡Œä»»åŠ¡ï¼Œæ²¡æœ‰çˆ¶è¿›ç¨‹ç®¡ç†,æ­¤æ—¶çš„å­è¿›ç¨‹å°±ç§°ä¸º<span class="string">&quot;å­¤å„¿è¿›ç¨‹&quot;</span></span><br><span class="line"><span class="comment">#äº§ç”ŸåŸå› ï¼š</span></span><br><span class="line">å­è¿›ç¨‹çš„ç»“æŸå’Œçˆ¶è¿›ç¨‹çš„è¿è¡Œæ˜¯å¼‚æ­¥çš„,çˆ¶è¿›ç¨‹æ°¸è¿œä¸çŸ¥é“å­è¿›ç¨‹ä»€ä¹ˆæ—¶å€™ç»“æŸ,å½“çˆ¶è¿›ç¨‹æ­£å¸¸å®Œæˆå·¥ä½œæˆ–å…¶ä»–åŸå› è¢«ç»ˆæ­¢,åˆ™ä¼šå¯¼è‡´ï¼Œå­è¿›ç¨‹å˜æˆ<span class="string">&quot;å­¤å„¿è¿›ç¨‹&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.å½“çˆ¶è¿›ç¨‹æ¥æ”¶åˆ°ä»»åŠ¡è°ƒåº¦æ—¶ï¼Œä¼šé€šè¿‡forkæ´¾ç”Ÿå­è¿›ç¨‹æ¥å¤„ç†ï¼Œé‚£ä¹ˆå­è¿›ç¨‹ä¼šé›†æˆçˆ¶è¿›ç¨‹çš„è¡£é’µã€‚</span><br><span class="line">2.å­è¿›ç¨‹åœ¨å¤„ç†ä»»åŠ¡ä»£ç æ—¶ï¼Œçˆ¶è¿›ç¨‹ä¼šè¿›å…¥ç­‰å¾…çš„çŠ¶æ€...</span><br><span class="line">3.å¦‚æœå­è¿›ç¨‹åœ¨å¤„ç†ä»»åŠ¡è¿‡ç¨‹ä¸­ï¼Œçˆ¶è¿›ç¨‹é€€å‡ºäº†ï¼Œå­è¿›ç¨‹æ²¡æœ‰é€€å‡ºï¼Œé‚£ä¹ˆè¿™äº›å­è¿›ç¨‹å°±æ²¡æœ‰çˆ¶è¿›ç¨‹æ¥ç®¡ç†äº†ï¼Œå°±å˜æˆäº†å­¤å„¿è¿›ç¨‹ã€‚</span><br><span class="line">4.æ¯ä¸ªè¿›ç¨‹éƒ½ä¼šæœ‰è‡ªå·±çš„PIDå·ï¼Œï¼ˆprocess <span class="built_in">id</span>ï¼‰å­è¿›ç¨‹åˆ™PPID</span><br></pre></td></tr></table></figure><h3 id="1-è¿›ç¨‹ç®¡ç†å‘½ä»¤">1.è¿›ç¨‹ç®¡ç†å‘½ä»¤</h3><blockquote><p>æ‹“å±•ï¼šæŸ¥çœ‹æœåŠ¡è¿›ç¨‹çŠ¶æ€ï¼Œå¯ç”¨äºè„šæœ¬ä¸­ï¼Œæ£€æŸ¥è¿›ç¨‹çŠ¶æ€<br>[root@web01 ~]# systemctl is-active nginx<br>active<br>[root@web01 ~]# systemctl is-enabled nginx<br>enabled</p></blockquote><h4 id="â‘ -pså‘½ä»¤ï¼ˆé™æ€ï¼‰">â‘  pså‘½ä»¤ï¼ˆé™æ€ï¼‰</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">[root@yum_repo ~]# ps aux[root@yum_repo ~]# ps -efä¹Ÿå¯ä»¥</span><br><span class="line">aï¼šæ˜¾ç¤ºç³»ç»Ÿä¸­æ‰€æœ‰å’Œç»ˆç«¯ç›¸å…³çš„è¿›ç¨‹</span><br><span class="line">uï¼šæ˜¾ç¤ºæ¯ä¸ªè¿›ç¨‹è¿è¡Œçš„ç”¨æˆ·</span><br><span class="line">xï¼šæ˜¾ç¤ºç³»ç»Ÿä¸­æ‰€æœ‰å’Œç»ˆç«¯æ— å…³çš„è¿›ç¨‹</span><br><span class="line">[root@yum_repo ~]# ps aux|<span class="built_in">head</span></span><br><span class="line">USER        PID %CPU %MEM    VSZ   RSS   TTY    STAT START   TIME   COMMAND</span><br><span class="line">root         1  0.0  0.6 127864  6500    ?      Ss   08:38   0:01   /usr/lib/systemd/systemd --switched-root --system --deserialize 22</span><br><span class="line">root         2  0.0  0.0      0     0    ?      S    08:38   0:00   [kthreadd]</span><br><span class="line">root         3  0.0  0.0      0     0    ?      S    08:38   0:00   [ksoftirqd/0]</span><br><span class="line">root         5  0.0  0.0      0     0    ?      S&lt;   08:38   0:00   [kworker/0:0H]</span><br><span class="line">root         6  0.0  0.0      0     0    ?      S    08:38   0:00   [kworker/u256:0]</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¸ªåˆ—ä»£ä¿¡æ¯è¡¨æ„æ€</span></span><br><span class="line">USERï¼šè¿è¡Œç¨‹åºçš„ç”¨æˆ·</span><br><span class="line">PIDï¼šæ¯ä¸ªè¿›ç¨‹è¿è¡Œèµ·æ¥åï¼Œéƒ½ä¼šæœ‰è‡ªå·±çš„ä¸€ä¸ªPIDå·ï¼Œè¿›ç¨‹å·Process ID</span><br><span class="line">%CPUï¼šè¯¥è¿›ç¨‹å ç”¨CPUçš„ç™¾åˆ†æ¯”</span><br><span class="line">%MEMï¼šè¯¥è¿›ç¨‹å ç”¨å†…å­˜çš„ç™¾åˆ†æ¯”</span><br><span class="line">VSZï¼šè¯¥è¿›ç¨‹å ç”¨è™šæ‹Ÿå†…å­˜çš„å¤§å°</span><br><span class="line">RSSï¼šè¯¥è¿›ç¨‹å ç”¨çœŸå®å†…å­˜çš„å¤§å°</span><br><span class="line">TTYï¼šç»ˆç«¯</span><br><span class="line">- ?ï¼šç”±å†…æ ¸å‘èµ·çš„ç»ˆç«¯</span><br><span class="line">- pts/0 pts/1ï¼šç”¨æˆ·çš„è™šæ‹Ÿç»ˆç«¯</span><br><span class="line">- tty1ï¼šç‰©ç†ç»ˆç«¯</span><br><span class="line">STATï¼šç¨‹åºè¿è¡ŒçŠ¶æ€</span><br><span class="line">STARTï¼šæœåŠ¡å¯åŠ¨çš„æ—¶é—´</span><br><span class="line">TIMEï¼šè¯¥è¿›ç¨‹å®é™…ä½¿ç”¨CPUçš„è¿è¡Œæ—¶é—´</span><br><span class="line">COMMANDï¼šæœåŠ¡è¿è¡Œèµ·æ¥çš„å‘½ä»¤</span><br><span class="line"></span><br><span class="line"><span class="comment">#STATï¼šçŠ¶æ€</span></span><br><span class="line">Dï¼šæ— æ³•ä¸­æ–­çš„ä¼‘çœ çŠ¶æ€ï¼ˆé€šIOçš„è¿›ç¨‹ï¼‰ ç£ç›˜IO Input/Output ååé‡ï¼ˆç£ç›˜æ—¢å†™å…¥åˆè¾“å‡ºï¼Œä¾‹å¦‚taræ‰“åŒ…æ•°æ®æ—¶å€™ï¼‰</span><br><span class="line">Rï¼šRunning æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹</span><br><span class="line">Sï¼šSleeping å¤„äºä¼‘çœ çŠ¶æ€çš„è¿›ç¨‹</span><br><span class="line">Tï¼šè¢«æš‚åœçš„è¿›ç¨‹çŠ¶æ€  ï¼ˆCtrl+zæš‚åœè¿›ç¨‹ï¼‰</span><br><span class="line">Z: åƒµå°¸è¿›ç¨‹</span><br><span class="line">&lt;ï¼šä¼˜å…ˆçº§è¾ƒé«˜çš„è¿›ç¨‹</span><br><span class="line">Nï¼šä¼˜å…ˆçº§è¾ƒä½çš„è¿›ç¨‹</span><br><span class="line">sï¼šçˆ¶è¿›ç¨‹ï¼ˆå¹¶ä¸”å®ƒä¸‹é¢æœ‰å­è¿›ç¨‹åœ¨è¿è¡Œï¼‰</span><br><span class="line">lï¼šä»¥çº¿ç¨‹çš„æ–¹å¼è¿è¡Œçš„è¿›ç¨‹</span><br><span class="line">|ï¼šå¤šè¿›ç¨‹</span><br><span class="line">+ï¼šåœ¨å‰å°è¿è¡Œçš„è¿›ç¨‹</span><br><span class="line">Lï¼šè¢«é”è¿›å†…å­˜é¡µçš„è¿›ç¨‹</span><br><span class="line">X:æ­»æ‰çš„è¿›ç¨‹ï¼ˆå°‘è§ï¼‰</span><br><span class="line">W:è¿›å…¥å†…å­˜äº¤æ¢ï¼ˆä»å†…æ ¸2.6å¼€å§‹æ— æ•ˆï¼‰</span><br></pre></td></tr></table></figure><h4 id="â‘¡-statå‘½ä»¤">â‘¡ statå‘½ä»¤</h4><p><strong>ä»‹ç»</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##statå‘½ä»¤æ¥è‡ªè‹±æ–‡å•è¯statusçš„ç¼©å†™ï¼Œå…¶åŠŸèƒ½æ˜¯æ˜¾ç¤ºæ–‡ä»¶çš„çŠ¶æ€ä¿¡æ¯ã€‚åœ¨Linuxç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªæ–‡ä»¶éƒ½æœ‰3ä¸ªâ€œå†å²æ—¶é—´â€â€”â€”æœ€åè®¿é—®æ—¶é—´ï¼ˆATIMEï¼‰ã€æœ€åä¿®æ”¹æ—¶é—´ï¼ˆMTIMEï¼‰ã€æœ€åæ›´æ”¹æ—¶é—´ï¼ˆCTIMEï¼‰ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨statå‘½ä»¤æŸ¥çœ‹åˆ°å®ƒä»¬ï¼Œè¿›è€Œåˆ¤åˆ«æœ‰æ²¡æœ‰å…¶ä»–äººä¿®æ”¹è¿‡æ–‡ä»¶å†…å®¹ã€‚</span></span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/image-20240505095811234.png" alt="image-20240505095811234"></p><p><strong>åº”ç”¨</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##[root@localhost ~]# stat /etc/passwd</span></span><br><span class="line">  File: â€˜/etc/passwdâ€™</span><br><span class="line">  Size: 945       Blocks: 8          IO Block: 4096   regular file</span><br><span class="line">Device: fd00h/64768dInode: 8902609     Links: 1</span><br><span class="line">Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)</span><br><span class="line">Context: system_u:object_r:passwd_file_t:s0</span><br><span class="line">Access: 2024-04-21 21:52:14.512000577 +0800</span><br><span class="line">Modify: 2024-04-20 13:49:48.339236224 +0800</span><br><span class="line">Change: 2024-04-20 13:49:48.341236224 +0800</span><br><span class="line"> Birth: -</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## -cç›´æ¥çœ‹æƒé™</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">stat</span> -c%a /etc/passwd</span><br><span class="line">644</span><br><span class="line">[root@localhost ~]# <span class="built_in">stat</span> -c%A /etc/passwd</span><br><span class="line">-rw-r--r--</span><br><span class="line"></span><br><span class="line"><span class="comment">##-cç›´æ¥çœ‹inodeç»“ç‚¹å·</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">stat</span> -c%i /etc/passwd</span><br><span class="line">8902609</span><br><span class="line"></span><br><span class="line"><span class="comment">##-cç›´æ¥çœ‹uidå’Œå±ä¸»</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">stat</span> -c%u /etc/passwd</span><br><span class="line">0</span><br><span class="line">[root@localhost ~]# <span class="built_in">stat</span> -c%U /etc/passwd</span><br><span class="line">root</span><br><span class="line"></span><br><span class="line"><span class="comment">##-cç›´æ¥çœ‹gidå’Œå±ç»„</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">stat</span> -c%g /etc/passwd</span><br><span class="line">0</span><br><span class="line">[root@localhost ~]# <span class="built_in">stat</span> -c%G /etc/passwd</span><br><span class="line">root</span><br><span class="line"></span><br><span class="line"><span class="comment">##-cç›´æ¥çœ‹æ–‡ä»¶å¤§å°</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">stat</span> -c%s /etc/passwd</span><br><span class="line">945</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## -f</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">stat</span> -f /etc/passwd</span><br><span class="line">  File: <span class="string">&quot;/etc/passwd&quot;</span></span><br><span class="line">    ID: fd0000000000 Namelen: 255     Type: xfs</span><br><span class="line">Block size: 4096       Fundamental block size: 4096</span><br><span class="line">Blocks: Total: 2361856    Free: 1896798    Available: 1896798</span><br><span class="line">Inodes: Total: 4728832    Free: 4664790</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-cåå¯ä»¥è·Ÿå“ªäº›å ä½ç¬¦</span><br><span class="line"><span class="built_in">stat</span> -c %a fileæ˜¾ç¤ºæ–‡ä»¶çš„å…«è¿›åˆ¶æƒé™</span><br><span class="line"><span class="built_in">stat</span> -c %N fileæ˜¾ç¤ºå®Œæ•´è·¯å¾„</span><br><span class="line"><span class="built_in">stat</span> -c %n fileæ˜¾ç¤ºæ–‡ä»¶åã€‚</span><br><span class="line"><span class="built_in">stat</span> -c %x fileæ˜¾ç¤ºæœ€åè®¿é—®æ—¶é—´</span><br><span class="line"><span class="built_in">stat</span> -c %y fileæ˜¾ç¤ºæœ€åä¿®æ”¹æ—¶é—´</span><br><span class="line"><span class="built_in">stat</span> -c <span class="string">&quot;%n %s %y&quot;</span> filename.txtè¿™å°†è¾“å‡ºæ–‡ä»¶åã€æ–‡ä»¶å¤§å°å’Œæœ€åä¿®æ”¹æ—¶é—´ã€‚</span><br></pre></td></tr></table></figure><h4 id="â‘¢-å†…å­˜-ç«¯å£">â‘¢ å†…å­˜/ç«¯å£</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># free æŸ¥çœ‹å†…å­˜ä¿¡æ¯</span></span><br><span class="line">free -h  ä»¥äººç±»å¯è¯»æ–¹å¼è¯»å–æ˜¾ç¤ºå†…å­˜ä¿¡æ¯</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç«¯å£ï¼š</span></span><br><span class="line">[root@localhost ~]# netstat -lntup</span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address Foreign Address State</span><br><span class="line">PID/Program name</span><br><span class="line">tcp 0 0 0.0.0.0:22 0.0.0.0:* LISTEN</span><br><span class="line">6866/sshd</span><br><span class="line">tcp 0 0 127.0.0.1:25 0.0.0.0:* LISTEN</span><br><span class="line">6950/master</span><br><span class="line">tcp6 0 0 :::22 :::* LISTEN</span><br><span class="line">6866/sshd</span><br><span class="line">tcp6 0 0 ::1:25 :::* LISTEN</span><br><span class="line">6950/master</span><br></pre></td></tr></table></figure><h4 id="â‘£-pså…¶ä»–é€‰é¡¹">â‘£ pså…¶ä»–é€‰é¡¹</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹æœ€å ç”¨å†…å­˜çš„è¿›ç¨‹</span></span><br><span class="line">[root@yum_repo ~]# ps aux|<span class="built_in">sort</span> -k 4 -nr</span><br><span class="line">[root@yum_repo ~]# ps aux --<span class="built_in">sort</span> %mem   (é»˜è®¤å æ¯”æœ€å°çš„æ˜¾ç¤ºæœ€å‰)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è‡ªå®šä¹‰åˆ—</span></span><br><span class="line">[root@yum_repo ~]# ps axo user,pid,ppid,%mem,<span class="built_in">command</span>,%cpu</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¦‚ä½•æ£€æµ‹æœåŠ¡æ˜¯å¦å¯åŠ¨æˆåŠŸï¼Ÿ</span></span><br><span class="line">1.å…ˆæŸ¥è¿˜æœ‰æ²¡æœ‰è¿™ä¸ªæœåŠ¡</span><br><span class="line">[root@localhost ~]# ps aux|grep nginx</span><br><span class="line">root 10021 0.0 0.0 39304 940 ? Ss 16:44 0:00 nginx: master</span><br><span class="line">process /usr/sbin/nginx</span><br><span class="line">nginx 10022 0.0 0.1 39692 1896 ? S 16:44 0:00 nginx: worker</span><br><span class="line">process</span><br><span class="line">2.ä½¿ç”¨ç«¯å£å·å‘½ä»¤æ¥æŸ¥çœ‹è¯¥ç«¯å£æ˜¯å¦è¢«ç›‘å¬ã€‚å¦‚æœç«¯å£å¤„äºç›‘å¬çŠ¶æ€ï¼Œåˆ™è¯´æ˜æœåŠ¡å·²ç»å¯åŠ¨ï¼ˆnginxé»˜è®¤80ç«¯å£ï¼Œhttpåè®®ï¼‰</span><br><span class="line"></span><br><span class="line">[root@lb01 ~]# netstat -lntup</span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    </span><br><span class="line">tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN      8752/nginx: master  </span><br><span class="line">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      6625/sshd           </span><br><span class="line">tcp        0      0 127.0.0.1:25            0.0.0.0:*               LISTEN      6708/master         </span><br><span class="line">tcp6       0      0 :::80                   :::*                    LISTEN      8752/nginx: master  </span><br><span class="line">tcp6       0      0 :::22                   :::*                    LISTEN      6625/sshd           </span><br><span class="line">tcp6       0      0 ::1:25                  :::*                    LISTEN      6708/master</span><br><span class="line">[root@lb01 ~]# netstat -tulun</span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State      </span><br><span class="line">tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN</span><br><span class="line"></span><br><span class="line"><span class="comment">## å†™è„šæœ¬ç”¨ï¼Œåˆ¤æ–­æœåŠ¡æ˜¯å¦å­˜æ´»</span></span><br><span class="line">[root@yum_repo ~]# ps aux |grep nginx|grep -v grep</span><br><span class="line">[root@yum_repo ~]# ps aux|grep nginx</span><br><span class="line">root 19740 0.0 0.1 39312 1044 ? Ss 12:00 0:00 nginx: master process /usr/sbin/nginx</span><br><span class="line">nginx 19741 0.0 0.1 39700 1816 ? S 12:00 0:00 nginx: worker process</span><br><span class="line">nginx 19742 0.0 0.1 39700 1816 ? S 12:00 0:00 nginx: worker process</span><br><span class="line">nginx 19759 0.0 0.1 39700 1816 ? S 12:00 0:00 nginx: worker process</span><br><span class="line">nginx 19760 0.0 0.1 39700 1556 ? S 12:00 0:00 nginx: worker process</span><br><span class="line">root 19823 0.0 0.0 112812 980 pts/2 R+ 12:05 0:00 grep -- color=auto nginx</span><br><span class="line"></span><br><span class="line">[root@yum_repo ~]# ps aux|grep [n]ginx grep nginx</span><br><span class="line">root 19823 0.0 0.0 112812 980 pts/2 R+ 12:05 0:00 grep --  color=auto [n]ginx</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ£€ç´¢pidå·ç  pgrep</span></span><br><span class="line"><span class="comment">#pgrepå¸¸ç”¨å‚æ•°, -l -a</span></span><br><span class="line">[root@zls ~]# pgrep sshd</span><br><span class="line">869</span><br><span class="line">1194</span><br><span class="line">1307</span><br><span class="line">1574</span><br><span class="line">[root@zls ~]# pgrep -l sshdæ˜¾ç¤ºè¿›ç¨‹ååŠID</span><br><span class="line">869 sshd</span><br><span class="line">1194 sshd</span><br><span class="line">1307 sshd</span><br><span class="line">1574 sshd</span><br><span class="line">[root@zls ~]# pgrep -l -a sshd</span><br><span class="line">869 /usr/sbin/sshd -D</span><br><span class="line">1194 sshd: root@pts/0</span><br><span class="line">1307 sshd: root@pts/1</span><br><span class="line">1574 sshd: root@pts/2</span><br><span class="line"><span class="comment">#æŸ¥çœ‹è¿›ç¨‹çš„pid</span></span><br><span class="line">[root@zls ~]# pidof sshd</span><br><span class="line">1574 1307 1194 869</span><br><span class="line"><span class="comment">## æ ‘çŠ¶å½¢å¼æ˜¾ç¤ºè¿›ç¨‹    éœ€è¦å®‰è£…psmiscæ”¯æŒpstree</span></span><br><span class="line">[root@yum_repo ~]# pstree</span><br><span class="line">systemdâ”€â”¬â”€NetworkManagerâ”€â”€â”€2*[&#123;NetworkManager&#125;]</span><br><span class="line">â”œâ”€VGAuthService</span><br><span class="line">â”œâ”€agetty</span><br><span class="line">â”œâ”€auditdâ”€â”€â”€&#123;auditd&#125;</span><br><span class="line">â”œâ”€crondâ”€â”€â”€crondâ”€â”€â”€shâ”€â”€â”€ntpdate</span><br><span class="line">â”œâ”€dbus-daemon</span><br><span class="line">â”œâ”€gssproxyâ”€â”€â”€5*[&#123;gssproxy&#125;]</span><br><span class="line">â”œâ”€nginxâ”€â”€â”€20*[nginx]</span><br><span class="line">â”œâ”€polkitdâ”€â”€â”€6*[&#123;polkitd&#125;]</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="â‘¤-topï¼ˆåŠ¨æ€å‘½ä»¤ï¼‰">â‘¤ topï¼ˆåŠ¨æ€å‘½ä»¤ï¼‰</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## ç¬¬ä¸€è¡Œ</span></span><br><span class="line">top - 14:41:23 up  3:38,  1 user,  load average: 0.00, 0.01, 0.05</span><br><span class="line">topï¼šå‘½ä»¤</span><br><span class="line">-ï¼šåˆ†éš”ç¬¦</span><br><span class="line">09:32:57 ï¼šå½“å‰ç³»ç»Ÿæ—¶é—´</span><br><span class="line">up 1:23 ï¼šæœåŠ¡å™¨è¿è¡Œæ—¶é—´</span><br><span class="line">1 user ï¼šå½“å‰ç™»å½•ç³»ç»Ÿçš„ç”¨æˆ·æ•°é‡</span><br><span class="line">load average: ç³»ç»Ÿè´Ÿè½½</span><br><span class="line">0.00ï¼š1åˆ†é’Ÿ</span><br><span class="line">0.01ï¼š5åˆ†é’Ÿ</span><br><span class="line">0.05ï¼š15åˆ†é’Ÿ</span><br><span class="line"><span class="comment"># ç¬¬äºŒè¡Œ</span></span><br><span class="line">Tasks:  98 total,   1 running,  97 sleeping,   0 stopped,   0 zombie</span><br><span class="line">Tasks: ä»»åŠ¡ï¼Œè¿›ç¨‹æ•°é‡</span><br><span class="line">116 total // è¿›ç¨‹æ€»é‡</span><br><span class="line">1 running // 1ä¸ªæ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ R</span><br><span class="line">115 sleeping // 115å¤„äºä¼‘çœ çŠ¶æ€çš„è¿›ç¨‹ S</span><br><span class="line">0 stopped // 0ä¸ªè¢«æš‚åœçŠ¶æ€çš„è¿›ç¨‹ T</span><br><span class="line">0 zombie // 0ä¸ªåƒµå°¸è¿›ç¨‹ Z</span><br><span class="line"><span class="comment"># ç¬¬ä¸‰è¡Œ</span></span><br><span class="line">%Cpu(s):  0.0 us,  0.3 sy,  0.0 ni, 99.7 <span class="built_in">id</span>,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st</span><br><span class="line">%Cpu(s):</span><br><span class="line">0.0 usï¼šuser ç”¨æˆ·æ€ ç”¨æˆ·ä½¿ç”¨ç¨‹åºå ç”¨CPUçš„ç™¾åˆ†æ¯”</span><br><span class="line">0.3 syï¼šsystem å†…æ ¸æ€ ç³»ç»Ÿä½¿ç”¨ç¨‹åºå ç”¨CPUçš„ç™¾åˆ†æ¯”</span><br><span class="line">0.0 niï¼š<span class="built_in">nice</span> ä¼˜å…ˆçº§ ä¼˜å…ˆçº§è°ƒåº¦çš„è¿›ç¨‹å ç”¨CPUçš„ç™¾åˆ†æ¯”</span><br><span class="line">99.7 <span class="built_in">id</span>ï¼šidle ç©ºé—² CPUçš„ç©ºé—²ç‡</span><br><span class="line">0.0 waï¼š <span class="built_in">wait</span> ç­‰å¾… å¤„äºç­‰å¾…çŠ¶æ€çš„è¿›ç¨‹å ç”¨CPUçš„ç™¾åˆ†æ¯”</span><br><span class="line">0.0 hiï¼š ç¡¬ä¸­æ–­ ç¡¬ä¸­æ–­å ç”¨CPUçš„ç™¾åˆ†æ¯”</span><br><span class="line">0.0 siï¼š è½¯ä¸­æ–­ è½¯ç»ˆç«¯å ç”¨CPUçš„ç™¾åˆ†æ¯”</span><br><span class="line">0.0 stï¼š è™šæ‹ŸåŒ– è™šæ‹ŸåŒ–å ç”¨CPUçš„ç™¾åˆ†æ¯”</span><br><span class="line"><span class="comment"># ç¬¬å››è¡Œ</span></span><br><span class="line">KiB Mem :   995896 total,   425312 free,   108804 used,   461780 buff/cache</span><br><span class="line">KiB Mem : å†…å­˜</span><br><span class="line">995896 totalï¼šæ€»å†…å­˜å¤§å°</span><br><span class="line">748564 freeï¼šç©ºé—²å†…å­˜å¤§å°</span><br><span class="line">107768 usedï¼šå·²ä½¿ç”¨å†…å­˜å¤§å°</span><br><span class="line">139564 buff/cacheï¼šç¼“å†²åŒº/ç¼“å­˜åŒºä½¿ç”¨å†…å­˜å¤§å°</span><br><span class="line"><span class="comment"># ç¬¬äº”è¡Œ</span></span><br><span class="line">KiB Swap:  1048572 total,  1048572 free,        0 used.   700372 avail Mem</span><br><span class="line">KiB Swap: äº¤æ¢åˆ†åŒºswap ï¼ˆè™šæ‹Ÿå†…å­˜ï¼‰</span><br><span class="line">1048572 totalï¼šè™šæ‹Ÿå†…å­˜æ€»å¤§å°</span><br><span class="line">1048572 freeï¼šè™šæ‹Ÿå†…å­˜ç©ºé—²å¤§å°</span><br><span class="line">0 usedï¼šè™šæ‹Ÿå†…å­˜ä½¿ç”¨å¤§å°</span><br><span class="line">729176 avail Memï¼šè™šæ‹Ÿå†…å­˜å¯ç”¨å¤§å°</span><br><span class="line">Windowsï¼šNTFSã€FAT32</span><br><span class="line">Linuxï¼š</span><br><span class="line">CentOS7ï¼šxfs file system</span><br><span class="line">CentOS6ï¼šext4</span><br><span class="line"><span class="comment"># ç¬¬å…­è¡Œ</span></span><br><span class="line">PID USER      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND</span><br><span class="line">PIDï¼šè¿›ç¨‹IDå·</span><br><span class="line">USERï¼šè¿›ç¨‹å¯åŠ¨ç”¨æˆ·</span><br><span class="line">PR NIï¼šæƒé‡ä¼˜å…ˆçº§ ä¸¤è€…ç›¸å·®20ï¼Œäº’æ–¥</span><br><span class="line">VIRTï¼šè™šæ‹Ÿå†…å­˜</span><br><span class="line">RESï¼šçœŸå®ç‰©ç†å†…å­˜</span><br><span class="line">SHRï¼šé—ªå­˜</span><br><span class="line">Sï¼šè¿›ç¨‹çŠ¶æ€</span><br><span class="line">%CPUï¼šCPUä½¿ç”¨ç‡</span><br><span class="line">%MEMï¼šå†…å­˜ä½¿ç”¨ç‡</span><br><span class="line">TIME+ ï¼šè¯¥è¿›ç¨‹åœ¨CPUå†…è¿è¡Œçš„æ—¶é—´</span><br><span class="line">COMMANDï¼šæœåŠ¡å¯åŠ¨çš„å‘½ä»¤</span><br></pre></td></tr></table></figure><h4 id="â‘¥-topå‘½ä»¤çš„ä½¿ç”¨">â‘¥ topå‘½ä»¤çš„ä½¿ç”¨</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">[root@yum_repo ~]# yum install -y htop</span><br><span class="line">[root@yum_repo ~]# yum install -y glances</span><br><span class="line">[root@yum_repo ~]# top</span><br><span class="line">[root@yum_repo ~]# htop</span><br><span class="line">[root@yum_repo ~]# glances</span><br><span class="line"><span class="comment"># -nï¼šæŒ‡å®šæŸ¥çœ‹å‡ æ¬¡ç»“æœ</span></span><br><span class="line">[root@yum_repo ~]# top -n 5</span><br><span class="line"><span class="comment"># -dï¼šæŒ‡å®šæ›´æ–°æ—¶é—´ï¼ˆé»˜è®¤3sæ›´æ–°ä¸€æ¬¡æ•°æ®ï¼‰</span></span><br><span class="line">[root@yum_repo ~]# top -d 1 -n 5</span><br><span class="line"><span class="comment"># -pï¼šæŒ‡å®šæƒ³æŸ¥çœ‹çš„è¿›ç¨‹PID</span></span><br><span class="line">[root@yum_repo ~]# top -p 1278</span><br><span class="line">[root@yum_repo ~]# top -p $(pidof nginx|<span class="built_in">tr</span> <span class="string">&#x27; &#x27;</span> <span class="string">&#x27;,&#x27;</span>)</span><br><span class="line"><span class="comment"># -bï¼šå°†å¤šæ¬¡ç»“æœä¿å­˜åˆ°æ–‡ä»¶ä¸­</span></span><br><span class="line">[root@yum_repo ~]# top -d 1 -n 3 -b &gt; /tmp/1.txt</span><br><span class="line"></span><br><span class="line">æ³¨æ„ï¼š#ä¸ä½¿ç”¨-bé€‰é¡¹ï¼Œåªèƒ½å†™å…¥æœ€åä¸€æ¬¡çš„ç»“æœã€‚topæ˜¯åŠ¨æ€çš„ï¼Œåªæœ‰ç»“æŸæ‰èƒ½å¤Ÿå†™å…¥1.txtï¼Œç»“æŸçš„æ—¶å€™å†™å…¥çš„ä¹Ÿåªæ˜¯æœ€åä¸€æ¬¡çš„ç»“æœ</span><br><span class="line">top -n 3 &gt;1.txt   </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#top å¸¸è§æŒ‡ä»¤</span></span><br><span class="line">h æŸ¥çœ‹å¸®å‡º</span><br><span class="line">z é«˜äº®æ˜¾ç¤º</span><br><span class="line">1 æ˜¾ç¤ºæ‰€æœ‰CPUçš„è´Ÿè½½</span><br><span class="line">s è®¾ç½®åˆ·æ–°æ—¶é—´</span><br><span class="line">b é«˜äº®ç°å®å¤„äºRçŠ¶æ€çš„è¿›ç¨‹</span><br><span class="line">M æŒ‰å†…å­˜ä½¿ç”¨ç™¾åˆ†æ¯”æ’åºè¾“å‡º</span><br><span class="line">P æŒ‰CPUä½¿ç”¨ç™¾åˆ†æ¯”æ’åºè¾“å‡º</span><br><span class="line">R å¯¹æ’åºè¿›è¡Œåè½¬</span><br><span class="line">f è‡ªå®šä¹‰æ˜¾ç¤ºå­—æ®µ</span><br><span class="line">k <span class="built_in">kill</span>æ‰æŒ‡å®šPIDè¿›ç¨‹</span><br><span class="line">W ä¿å­˜topç¯å¢ƒè®¾ç½® ~/.toprc</span><br><span class="line">q é€€å‡º</span><br></pre></td></tr></table></figure><h4 id="â‘¦-ä¸­æ–­">â‘¦ ä¸­æ–­</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ä¸­æ–­æ˜¯ç³»ç»Ÿç”¨æ¥å½±å“ç¡¬ä»¶è®¾å¤‡è¯·æ±‚çš„ä¸€ç§æœºåˆ¶ï¼Œå®ƒä¼šæ‰“æ–­è¿›ç¨‹çš„æ­£å¸¸è°ƒåº¦å’Œæ‰§è¡Œï¼Œç„¶åè°ƒç”¨å†…æ ¸ä¸­çš„ä¸­æ–­å¤„ç†ç¨‹åºæ¥å½±å“è®¾å¤‡çš„è¯·æ±‚</span><br><span class="line"><span class="comment">#ä¸­æ–­çš„ä½œç”¨ï¼š</span></span><br><span class="line">æ˜¯ä¸ºäº†è®©è®¡ç®—æœºå¯ä»¥å¤„ç†æ›´å¤šçš„è¯·æ±‚</span><br><span class="line"><span class="comment">#åªæœ‰ä¸­æ–­ï¼Œå­˜åœ¨çš„é—®é¢˜ï¼š</span></span><br><span class="line">ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±</span><br><span class="line"><span class="comment">#è§£å†³åŠæ³•ï¼š</span></span><br><span class="line">å°†ä¸­æ–­ï¼Œåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†</span><br><span class="line">ç¡¬ä¸­æ–­ï¼šå¿«é€Ÿå¤„ç†ä»»åŠ¡ï¼Œä¸´æ—¶ä¿å­˜åœ¨å†…å­˜é‡Œ</span><br><span class="line">è½¯ä¸­æ–­ï¼šå»¶è¿Ÿå¤„ç†æœªå®Œæˆçš„ä»»åŠ¡</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="â‘§-killä¿¡å·ç®¡ç†">â‘§ killä¿¡å·ç®¡ç†</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -l</span><br><span class="line">1) SIGHUP 2) SIGINT 3) SIGQUIT 4) SIGILL 5) SIGTRAP</span><br><span class="line">6) SIGABRT 7) SIGBUS 8) SIGFPE 9) SIGKILL 10) SIGUSR1</span><br><span class="line">11) SIGSEGV 12) SIGUSR2 13) SIGPIPE 14) SIGALRM 15) SIGTERM</span><br><span class="line">16) SIGSTKFLT 17) SIGCHLD 18) SIGCONT 19) SIGSTOP 20) SIGTSTP</span><br><span class="line">21) SIGTTIN 22) SIGTTOU 23) SIGURG 24) SIGXCPU 25) SIGXFSZ</span><br><span class="line">26) SIGVTALRM 27) SIGPROF 28) SIGWINCH 29) SIGIO 30) SIGPWR</span><br><span class="line">31) SIGSYS 34) SIGRTMIN 35) SIGRTMIN+1 36) SIGRTMIN+2 37) SIGRTMIN+3</span><br><span class="line">38) SIGRTMIN+4 39) SIGRTMIN+5 40) SIGRTMIN+6 41) SIGRTMIN+7 42) SIGRTMIN+8</span><br><span class="line">43) SIGRTMIN+9 44) SIGRTMIN+10 45) SIGRTMIN+11 46) SIGRTMIN+12 47) SIGRTMIN+13</span><br><span class="line">48) SIGRTMIN+14 49) SIGRTMIN+15 50) SIGRTMAX-14 51) SIGRTMAX-13 52) SIGRTMAX-12</span><br><span class="line">53) SIGRTMAX-11 54) SIGRTMAX-10 55) SIGRTMAX-9 56) SIGRTMAX-8 57) SIGRTMAX-7</span><br><span class="line">58) SIGRTMAX-6 59) SIGRTMAX-5 60) SIGRTMAX-4 61) SIGRTMAX-3 62) SIGRTMAX-2</span><br><span class="line">63) SIGRTMAX-1 64) SIGRTMAX</span><br><span class="line"></span><br><span class="line"><span class="comment">## é‡å¯ restart</span></span><br><span class="line">å…ˆå…³é—­æœåŠ¡ï¼Œå†å¼€å¯æœåŠ¡</span><br><span class="line"><span class="comment">## é‡æ–°åŠ è½½ reload</span></span><br><span class="line">åªé‡æ–°è¯»å–é…ç½®æ–‡ä»¶ï¼Œä¸ä¼šåœæ­¢æœåŠ¡</span><br><span class="line"></span><br><span class="line"><span class="comment">## é‡æ–°åŠ è½½æœåŠ¡é…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -1 8582</span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -HUP 8582</span><br><span class="line"></span><br><span class="line"><span class="comment">## ä¸­æ–­ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ç¨‹åº Ctrl + c</span></span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -2 8779</span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -INT 8779</span><br><span class="line"><span class="comment">## é€€å‡ºç¨‹åº</span></span><br><span class="line">[root@yum_repo ~]# systemctl stop nginx</span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -3 8582</span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -QUIT 8582</span><br><span class="line"><span class="comment">## å¼ºåˆ¶ç»“æŸç¨‹åºï¼Œè¯¥ä¿¡å·ä¸èƒ½è¢«æ•è·</span></span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -9 8847</span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -KILL 8847</span><br><span class="line"><span class="comment">## é»˜è®¤é€€å‡ºä¿¡å·</span></span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> 1122</span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -15 1122</span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -TERM 1122</span><br><span class="line"><span class="comment">## è®©è¢«æš‚åœçš„ç¨‹åºæ¢å¤è¿è¡Œ</span></span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -18 8870</span><br><span class="line"><span class="comment">## è®©ç¨‹åºæš‚åœ Ctrl + z</span></span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -19 8884</span><br><span class="line">[root@yum_repo ~]# <span class="built_in">kill</span> -20 8896</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-ä¼˜å…ˆçº§-è´Ÿè½½">2.ä¼˜å…ˆçº§&amp;è´Ÿè½½</h3><h4 id="1-è¿›ç¨‹ä¼˜å…ˆçº§">1.è¿›ç¨‹ä¼˜å…ˆçº§</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ä½œç”¨ï¼šå¯ä»¥è®©ä¼˜å…ˆçº§é«˜çš„è¿›ç¨‹ï¼Œä¼˜å…ˆä½¿ç”¨ç³»ç»Ÿèµ„æºï¼Œå†…å­˜ã€CPUã€ç£ç›˜ã€æ–‡ä»¶æè¿°ç¬¦...</span><br><span class="line"></span><br><span class="line"><span class="built_in">nice</span>å€¼è¶Šé«˜ï¼šè¡¨ç¤ºä¼˜å…ˆçº§è¶Šä½ï¼Œä¾‹å¦‚19ï¼Œè¯¥è¿›ç¨‹å®¹æ˜“å°†CPUä½¿ç”¨é‡è®©ç»™å…¶ä»–è¿›ç¨‹ã€‚</span><br><span class="line"><span class="built_in">nice</span>å€¼è¶Šä½ï¼šè¡¨ç¤ºä¼˜å…ˆçº§è¶Šé«˜ï¼Œä¾‹å¦‚-20ï¼Œè¯¥è¿›ç¨‹æ›´ä¸å€¾å‘äºè®©å‡ºCPUã€‚</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## æŸ¥çœ‹ä¼˜å…ˆçº§</span></span><br><span class="line">[root@localhost ~]# top -n 1 -p 6884</span><br><span class="line">[root@localhost ~]# ps axo pid,user,<span class="built_in">nice</span>,<span class="built_in">command</span>|grep sshd</span><br><span class="line"><span class="comment">## é…ç½®ä¼˜å…ˆçº§</span></span><br><span class="line"><span class="comment"># åœ¨è¿›ç¨‹å¯åŠ¨å‘½ä»¤ä¹‹å‰ï¼ŒåŠ ä¸Šnice</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">nice</span> -n ä¼˜å…ˆçº§ï¼ˆ-20 ~ 20ï¼‰ ç¨‹åºå¯åŠ¨å‘½ä»¤ï¼ˆsystemctlä¸è¡Œï¼‰</span><br><span class="line"><span class="comment">## é…ç½®nginxä¼˜å…ˆçº§</span></span><br><span class="line"><span class="comment"># 1.æ­£å¸¸å¯åŠ¨nginxæ‰¾åˆ°å¯åŠ¨å‘½ä»¤</span></span><br><span class="line">[root@localhost ~]# systemctl start nginx</span><br><span class="line">[root@localhost ~]# ps -ef|grep nginx</span><br><span class="line">root 10691 1 0 18:08 ? 00:00:00 nginx: master process</span><br><span class="line">/usr/sbin/nginx</span><br><span class="line"><span class="comment"># 2.å…ˆåœæ­¢æœåŠ¡</span></span><br><span class="line">[root@localhost ~]# systemctl stop nginx</span><br><span class="line"><span class="comment"># 3.é…ç½®ä¼˜å…ˆçº§å¯åŠ¨</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">nice</span> -n -15 /usr/sbin/nginx</span><br><span class="line"><span class="comment"># 4.æ£€æŸ¥æ˜¯å¦å¯åŠ¨æˆåŠŸ</span></span><br><span class="line">[root@localhost ~]# ps -ef|grep nginx</span><br><span class="line">[root@localhost ~]# netstat -lntup|grep nginx</span><br><span class="line">tcp 0 0 0.0.0.0:80 0.0.0.0:* LISTEN</span><br><span class="line">10770/nginx: master</span><br><span class="line">tcp6 0 0 :::80 :::* LISTEN</span><br><span class="line">10770/nginx: master</span><br><span class="line"><span class="comment"># 5.æ£€æŸ¥ä¼˜å…ˆçº§</span></span><br><span class="line">[root@localhost ~]# top -p 10770</span><br><span class="line">PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND</span><br><span class="line">10770 root 5 -15</span><br><span class="line">39304 1068 124 S 0.0 0.1 0:00.00 nginx</span><br></pre></td></tr></table></figure><p><strong>Linuxå‡æ­»</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ping é€šä¸€å°æœºå™¨ï¼Œä¸€å®šèƒ½sshè¿ä¸Šè¿™å°æœºå™¨å—ï¼Ÿ</span></span><br><span class="line">ä¸ä¸€å®š pingåè®®ï¼šicmp</span><br><span class="line">åŸå› ï¼šping é€šï¼Œåªèƒ½èƒ½è¯´æ˜icmpåè®®æ˜¯é€šçš„ï¼Œä¸èƒ½è¯´æ˜sshåè®®æ˜¯é€šçš„</span><br><span class="line"><span class="comment">#ping ä¸é€šä¸€å°æœºå™¨ï¼Œä¸€å®šsshè¿ä¸ä¸Šè¿™å°æœºå™¨å—ï¼Ÿ</span></span><br><span class="line">ä¸ä¸€å®š pingåè®®ï¼šicmp</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="2-Linuxåå°è¿›ç¨‹ç®¡ç†">2.Linuxåå°è¿›ç¨‹ç®¡ç†</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¦‚ä½•å°†è¿›ç¨‹æ”¾å…¥åå°è¿è¡Œ</span></span><br><span class="line"><span class="comment"># 1.æ–¹æ³•ä¸€ï¼šåœ¨æƒ³è¦æ‰§è¡Œçš„å‘½ä»¤åé¢åŠ ä¸Š&amp;</span></span><br><span class="line">[root@localhost ~]# ping baidu.com &amp;</span><br><span class="line">[root@localhost ~]# ping baidu.com &gt;&gt; /tmp/1.txt &amp;</span><br><span class="line"><span class="comment"># 2.æ–¹æ³•äºŒï¼šåœ¨éœ€è¦æ”¾å…¥åå°çš„å‘½ä»¤å‰é¢åŠ ä¸Šnohup åé¢åŠ ä¸Š &amp;</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">nohup</span> ping baidu.com &amp; // åœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªnohup.outæ–‡ä»¶ï¼Œ</span><br><span class="line">æ‰€æœ‰è¾“å‡ºç»“æœä¼šæ”¾å…¥è¯¥æ–‡ä»¶</span><br><span class="line"><span class="comment"># 3.æ–¹æ³•ä¸‰ï¼šå°†è¿›ç¨‹å…ˆæš‚åœåˆ°åå° è¾“å…¥ï¼šbg å°†ç¨‹åºæ”¾å…¥åå°è¿è¡Œï¼ˆbackgroundï¼‰</span></span><br><span class="line">[root@localhost ~]# ping baidu.com</span><br><span class="line">Ctrl + Z // å°†ç¨‹åºæš‚åœåˆ°åå°</span><br><span class="line"><span class="built_in">bg</span> // å°†æš‚åœçš„ç¨‹åºæ”¾å…¥åå°è¿è¡Œ</span><br><span class="line"><span class="built_in">fg</span> // å°†æš‚åœçš„ç¨‹åºè°ƒåˆ°å‰å°è¿è¡Œ æ ¹æ®ç¼–å·ï¼Œè°ƒç”¨æŒ‡å®šçš„è¿›ç¨‹åˆ°å‰å°</span><br><span class="line"><span class="built_in">jobs</span> // æŸ¥çœ‹åå°æš‚åœçš„ç¨‹åºæœ‰å“ªäº›</span><br><span class="line"><span class="comment"># 4.æ–¹æ³•å››ï¼šä½¿ç”¨screenï¼Œå¼€å¯æ–°å±å¹•</span></span><br><span class="line">[root@localhost ~]# yum install -y screen</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## æŸ¥çœ‹screenåå°è¿è¡Œä»»åŠ¡</span></span><br><span class="line">[root@localhost ~]# screen -<span class="built_in">ls</span></span><br><span class="line">[root@localhost ~]# screen -list</span><br><span class="line">There are screens on:</span><br><span class="line">11050.sina (Detached)</span><br><span class="line"><span class="comment">## åˆ›å»ºå·è½´</span></span><br><span class="line">[root@localhost ~]# screen // æ²¡æœ‰å‘½åçš„å·è½´</span><br><span class="line">[root@localhost ~]# screen -S baidu // æŒ‡å®šåå­—</span><br><span class="line"><span class="comment">## å°å° å›åˆ°å‰å°ç•Œé¢</span></span><br><span class="line">Ctrl + a + d</span><br><span class="line"><span class="comment">## åˆ é™¤çª—å£</span></span><br><span class="line">[root@localhost ~]# screen -S sina -X quit</span><br></pre></td></tr></table></figure><h4 id="3-ç³»ç»Ÿå¹³å‡è´Ÿè½½">3.ç³»ç»Ÿå¹³å‡è´Ÿè½½</h4><p>æ¯æ¬¡å‘ç°ç³»ç»Ÿå˜æ…¢æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸åšçš„ç¬¬ä¸€ä»¶äº‹ï¼Œå°±æ˜¯æ‰§è¡Œtopæˆ–è€…uptimeå‘½ä»¤ï¼Œæ¥äº†è§£ç³»ç»Ÿçš„è´Ÿè½½æƒ…å†µã€‚å¹³å‡è´Ÿè½½ä¸CPUä½¿ç”¨ç‡å¹¶æ²¡æœ‰ç›´æ¥å…³ç³»ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## æŸ¥çœ‹ç³»ç»Ÿè´Ÿè½½æƒ…å†µ</span></span><br><span class="line">[root@localhost ~]# w</span><br><span class="line">19:36:06 up 3:36, 3 <span class="built_in">users</span>, load average: 0.00, 0.01, 0.05</span><br><span class="line">[root@localhost ~]# <span class="built_in">uptime</span></span><br><span class="line">19:36:10 up 3:36, 3 <span class="built_in">users</span>, load average: 0.00, 0.01, 0.05</span><br><span class="line">[root@localhost ~]# top -n 1</span><br><span class="line">top - 19:36:15 up 3:36, 3 <span class="built_in">users</span>, load average: 0.00, 0.01, 0.05</span><br></pre></td></tr></table></figure><p><font color='red'><strong>å¹³å‡è´Ÿè½½æ˜¯æŒ‡ï¼Œå•ä½æ—¶é—´å†…ï¼Œç³»ç»Ÿå¤„äºå¯è¿è¡ŒçŠ¶æ€å’Œä¸å¯ä¸­æ–­çŠ¶æ€çš„å¹³å‡è¿›ç¨‹æ•°ï¼Œä¹Ÿå°±æ˜¯å¹³å‡æ´»è·ƒè¿›ç¨‹æ•°</strong></font></p><p><strong>å¯è¿è¡ŒçŠ¶æ€å’Œä¸å¯ä¸­æ–­çŠ¶æ€æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.å¯è¿è¡ŒçŠ¶æ€è¿›ç¨‹ï¼Œæ˜¯æŒ‡æ­£åœ¨ä½¿ç”¨CPUæˆ–è€…æ­£åœ¨ç­‰å¾…CPUçš„è¿›ç¨‹ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç”¨PSå‘½ä»¤çœ‹çš„å¤„äºRçŠ¶æ€çš„è¿›ç¨‹</span><br><span class="line">2.ä¸å¯ä¸­æ–­è¿›ç¨‹ï¼Œï¼ˆä½ åœ¨åšä»€ä¹ˆäº‹æƒ…çš„æ—¶å€™æ˜¯ä¸èƒ½è¢«æ‰“æ–­çš„å‘¢ï¼Ÿ...ä¸å¯æè¿°ï¼‰ç³»ç»Ÿä¸­æœ€å¸¸è§çš„æ˜¯ç­‰å¾…ç¡¬ä»¶è®¾å¤‡çš„IOç›¸åº”ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬PSå‘½ä»¤ä¸­çœ‹åˆ°çš„DçŠ¶æ€ï¼ˆä¹Ÿæˆä¸ºDisk Sleepï¼‰çš„è¿›ç¨‹ã€‚å¹³å‡è´Ÿè½½å…¶å®å°±æ˜¯å•ä½æ—¶é—´å†…çš„æ´»è·ƒè¿›ç¨‹æ•°</span><br></pre></td></tr></table></figure><p><strong>å¹³å‡è´Ÿè½½å¤šå°‘æ—¶åˆç†ï¼Ÿ</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">æœ€ç†æƒ³çš„çŠ¶æ€æ˜¯æ¯ä¸ªCPUä¸Šéƒ½åˆšè¿˜è¿è¡Œç€ä¸€ä¸ªè¿›ç¨‹ï¼Œè¿™æ ·æ¯ä¸ªCPUéƒ½å¾—åˆ°äº†å……åˆ†åˆ©ç”¨ã€‚</span><br><span class="line">æ‰€ä»¥åœ¨è¯„åˆ¤è´Ÿè½½æ—¶ï¼Œé¦–å…ˆä½ è¦çŸ¥é“ç³»ç»Ÿæœ‰å‡ ä¸ªCPUï¼Œè¿™å¯ä»¥é€šè¿‡topå‘½ä»¤è·å–ï¼Œæˆ–grep <span class="string">&#x27;model name&#x27;</span></span><br><span class="line">/proc/cpuinfo</span><br><span class="line"><span class="comment">## å¦‚ä½•æŸ¥çœ‹å½“å‰ç³»ç»ŸCPUæ ¸å¿ƒæ•°</span></span><br><span class="line">[root@localhost ~]# top</span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> /proc/cpuinfo</span><br><span class="line">[root@localhost ~]# lscpu</span><br><span class="line">å‡è®¾ç°åœ¨åœ¨4ï¼Œ2ï¼Œ1æ ¸çš„CPUä¸Šï¼Œå¦‚æœå¹³å‡è´Ÿè½½ä¸º2æ—¶ï¼Œæ„å‘³ç€ä»€ä¹ˆå‘¢ï¼Ÿ</span><br><span class="line">1.åœ¨4ä¸ªCPUçš„ç³»ç»Ÿä¸Šï¼Œæ„å‘³ç€CPUæœ‰50%ç©ºé—²ã€‚</span><br><span class="line">2.åœ¨2ä¸ªCPUçš„ç³»ç»Ÿä¸Šï¼Œä»¥ä¸ºè¿™æ‰€æœ‰çš„CPUéƒ½åˆšå¥½å®Œå…¨è¢«å ç”¨ã€‚</span><br><span class="line">3.åœ¨1ä¸ªCPUçš„ç³»ç»Ÿä¸Šï¼Œåˆ™æ„å‘³ç€æœ‰ä¸€åŠçš„è¿›ç¨‹ç«äº‰ä¸åˆ°CPUã€‚</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¸‰ä¸ªå€¼å…³æ³¨å“ªä¸ªåˆç†</span></span><br><span class="line">1ï¼‰ä¸‰ä¸ªå€¼ï¼Œä¸èƒ½åªå…³æ³¨å…¶ä¸­ä¸€ä¸ªå€¼ï¼ˆä¸‰ä¸ªéƒ½è¦çœ‹ï¼‰</span><br><span class="line">2ï¼‰ä¸èƒ½æ ¹æ®1åˆ†é’Ÿè´Ÿè½½ä½æƒ…å†µæ¥åˆ¤æ–­ï¼Œå½“å‰è´Ÿè½½å¤„äºä¸‹é™çŠ¶æ€ï¼ˆä¸å…³æ³¨æœåŠ¡å™¨çš„é—®é¢˜ï¼‰</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¡ç®—æ–¹å¼</span></span><br><span class="line">å‡è®¾æˆ‘ä»¬åœ¨æœ‰2ä¸ªCPUç³»ç»Ÿä¸Šçœ‹åˆ°å¹³å‡è´Ÿè½½ä¸º2.73ï¼Œ6.90ï¼Œ12.98é‚£ä¹ˆè¯´æ˜åœ¨è¿‡å»1åˆ†é’Ÿå†…ï¼Œç³»ç»Ÿæœ‰136%çš„è¶…è½½</span><br><span class="line">1åˆ†é’Ÿï¼šï¼ˆ2.73/2*100%=136%ï¼‰</span><br><span class="line">5åˆ†é’Ÿï¼šï¼ˆ6.90/2*100%=345%ï¼‰</span><br><span class="line">15åˆ†é’Ÿï¼š(12.98/2*100%=649%)</span><br><span class="line">è®¡ç®—å…¬å¼ï¼šï¼ˆè´Ÿè½½/æ ¸å¿ƒæ•°ï¼‰*100%</span><br></pre></td></tr></table></figure><p><strong>è´Ÿè½½è¿‡é«˜æ’æŸ¥</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">web01æœºå™¨å¾ˆå¡ï¼Œæ‰¾å‡ºåŸå› </span><br><span class="line"><span class="comment">### å‹æµ‹å‘½ä»¤</span></span><br><span class="line">stress ï¼ˆK8Sï¼‰æ˜¯Linuxç³»ç»Ÿå‹åŠ›æµ‹è¯•å·¥å…·ï¼Œè¿™é‡Œæˆ‘ä»¬ç”¨ä½œå¼‚å¸¸è¿›ç¨‹æ¨¡æ‹Ÿå¹³å‡è´Ÿè½½å‡é«˜çš„åœºæ™¯</span><br><span class="line"><span class="comment">##################################################################</span></span><br><span class="line"><span class="comment">### æ’æŸ¥å·¥å…·</span></span><br><span class="line">mpstatæ˜¯å¤šæ ¸CPUæ€§èƒ½åˆ†æå·¥å…·ï¼Œç”¨æ¥å®æ—¶æ£€æŸ¥æ¯ä¸ªCPUçš„æ€§èƒ½æŒ‡æ ‡ï¼Œä»¥åŠæ‰€æœ‰CPUçš„å¹³å‡æŒ‡æ ‡ã€‚</span><br><span class="line">pidstatæ˜¯ä¸€ä¸ªå¸¸ç”¨çš„è¿›ç¨‹æ€§èƒ½åˆ†æå·¥å…·ï¼Œç”¨æ¥å®æ—¶æŸ¥çœ‹è¿›ç¨‹çš„CPUï¼Œå†…å­˜ï¼ŒIOï¼Œä»¥åŠä¸Šä¸‹æ–‡åˆ‡æ¢ç­‰æ€§èƒ½æŒ‡æ ‡ã€‚</span><br></pre></td></tr></table></figure><h4 id="4-CPUå¯¹è´Ÿè½½å½±å“">4.CPUå¯¹è´Ÿè½½å½±å“</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# yum intall -y sysstat</span><br><span class="line"><span class="comment">## åˆ†æCPU</span></span><br><span class="line">[root@localhost ~]# mpstat -P ALL 1</span><br><span class="line">[root@localhost ~]# top</span><br><span class="line">%Cpu0 : 99.2 us, 0.0 sy, 0.0 ni, 0.0 <span class="built_in">id</span>, 0.0 wa, 0.0 hi, 0.8 si, 0.0 st</span><br><span class="line">%Cpu1 :100.0 us, 0.0 sy, 0.0 ni, 0.0 <span class="built_in">id</span>, 0.0 wa, 0.0 hi, 0.0 si, 0.0 st</span><br><span class="line">%Cpu2 : 0.0 us, 0.0 sy, 0.0 ni, 99.0 <span class="built_in">id</span>, 0.0 wa, 0.0 hi, 1.0 si, 0.0 st</span><br><span class="line">%Cpu3 :100.0 us, 0.0 sy, 0.0 ni, 0.0 <span class="built_in">id</span>, 0.0 wa, 0.0 hi, 0.0 si, 0.0 st</span><br><span class="line">[root@localhost ~]# pidstat -u 5 1</span><br><span class="line">Linux 3.10.0-957.el7.x86_64 (localhost.localdomain) 04/26/2024 _x86_64_(4 CPU)</span><br><span class="line">08:21:50 PM UID PID %usr %system %guest %CPU CPU Command</span><br><span class="line">08:21:55 PM 0 9 0.00 0.20 0.00 0.20 0 rcu_sched</span><br><span class="line">08:21:55 PM 0 60 0.00 0.20 0.00 0.20 0 kworker/0:1</span><br><span class="line">08:21:55 PM 0 6618 0.00 0.20 0.00 0.20 0 sshd</span><br><span class="line">08:21:55 PM 0 6803 99.60 0.20 0.00 99.80 3 java</span><br><span class="line">08:21:55 PM 0 6804 99.40 0.40 0.00 99.80 2 java</span><br><span class="line">08:21:55 PM 0 6805 99.60 0.40 0.00 100.00 1 java</span><br><span class="line">08:21:55 PM 0 6815 0.00 0.20 0.00 0.20 0 pidstat</span><br><span class="line">Average: UID PID %usr %system %guest %CPU CPU Command</span><br><span class="line">Average: 0 9 0.00 0.20 0.00 0.20 - rcu_sched</span><br><span class="line">Average: 0 60 0.00 0.20 0.00 0.20 - kworker/0:1</span><br><span class="line">Average: 0 6618 0.00 0.20 0.00 0.20 - sshd</span><br><span class="line">Average: 0 6803 99.60 0.20 0.00 99.80 - java</span><br><span class="line">Average: 0 6804 99.40 0.40 0.00 99.80 - java</span><br><span class="line">Average: 0 6805 99.60 0.40 0.00 100.00 - java</span><br><span class="line">Average: 0 6815 0.00 0.20 0.00 0.20 - pidstat</span><br><span class="line"><span class="comment">## æŸ¥æ‰¾å¯¹åº”ç¨‹åºçš„æ—¥å¿—</span></span><br><span class="line"><span class="built_in">tail</span> -f /var/log/nginx/access.log</span><br><span class="line">tial -f /var/log/java/xxxx.log</span><br><span class="line">errorï¼šæ‰¾åˆ°æŠ¥é”™</span><br><span class="line"><span class="comment">## å°†æ—¥å¿—äº¤ç»™å¼€å‘å¤„ç†/åˆ†æ</span></span><br></pre></td></tr></table></figure><h4 id="5-ç£ç›˜IOå¯¹è´Ÿè½½å½±å“">5.ç£ç›˜IOå¯¹è´Ÿè½½å½±å“</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## IOå¯¹CPUçš„å½±å“</span></span><br><span class="line">[root@localhost ~]# mpstat -P ALL 3</span><br><span class="line">Linux 3.10.0-957.el7.x86_64 (localhost.localdomain) 04/26/2024 _x86_64_(4 CPU)</span><br><span class="line">08:29:48 PM CPU %usr %<span class="built_in">nice</span> %sys %iowait %irq %soft %steal %guest %gnice %idle</span><br><span class="line">08:29:51 PM all 0.17 0.00 73.85 0.00 0.00 0.00 0.00 0.00 0.00 25.98</span><br><span class="line">08:29:51 PM 0 0.00 0.00 66.93 0.00 0.00 0.00 0.00 0.00 0.00 33.07</span><br><span class="line">08:29:51 PM 1 0.00 0.00 68.15 0.00 0.00 0.00 0.00 0.00 0.00 31.85</span><br><span class="line">08:29:51 PM 2 0.00 0.00 79.87 0.00 0.00 0.00 0.00 0.00 0.00 20.13</span><br><span class="line">08:29:51 PM 3 0.00 0.00 78.92 0.00 0.00 0.00 0.00 0.00 0.00 21.08</span><br><span class="line"><span class="comment">## iostat æŸ¥çœ‹ç£ç›˜IOä¿¡æ¯</span></span><br><span class="line">[root@localhost ~]# iostat</span><br><span class="line">Linux 3.10.0-957.el7.x86_64 (localhost.localdomain) 04/26/2024 _x86_64_(4 CPU)</span><br><span class="line">avg-cpu: %user %<span class="built_in">nice</span> %system %iowait %steal %idle</span><br><span class="line">16.40 0.00 3.49 0.01 0.00 80.10</span><br><span class="line">Device: tps kB_read/s kB_wrtn/s kB_read kB_wrtn</span><br><span class="line">scd0 0.01 0.53 0.00 1028 0</span><br><span class="line">sda 6.23 283.56 8.79 548598 17015</span><br><span class="line">[root@localhost ~]# pidstat -u 5 1</span><br><span class="line">08:30:36 PM 0 6831 0.40 76.74 0.00 77.14 3 stress</span><br><span class="line">08:30:36 PM 0 6832 0.00 78.13 0.00 78.13 1 stress</span><br><span class="line">08:30:36 PM 0 6833 0.00 74.55 0.00 74.55 3 stress</span><br></pre></td></tr></table></figure><h4 id="6-å¤šè¿›ç¨‹å¯¹è´Ÿè½½å½±å“">6.å¤šè¿›ç¨‹å¯¹è´Ÿè½½å½±å“</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# mpstat -P ALL 3</span><br><span class="line">Linux 3.10.0-957.el7.x86_64 (localhost.localdomain) 04/26/2024 _x86_64_(4 CPU)</span><br><span class="line">08:33:45 PM CPU %usr %<span class="built_in">nice</span> %sys %iowait %irq %soft %steal %guest %gnice %idle</span><br><span class="line">08:33:48 PM all 53.94 0.00 0.25 0.00 0.00 0.25 0.00 0.00 0.00 45.57</span><br><span class="line">08:33:48 PM 0 53.00 0.00 0.50 0.00 0.00 0.00 0.00 0.00 0.00 46.50</span><br><span class="line">08:33:48 PM 1 54.41 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 45.59</span><br><span class="line">08:33:48 PM 2 52.50 0.00 0.50 0.00 0.00 0.50 0.00 0.00 0.00 46.50</span><br><span class="line">08:33:48 PM 3 55.02 0.00 0.00 0.00 0.00 0.48 0.00 0.00 0.00 44.50</span><br><span class="line">[root@localhost ~]# pidstat -u 5 1</span><br><span class="line">08:30:36 PM 0 6831 0.40 76.74 0.00 77.14 3 stress</span><br><span class="line">08:30:36 PM 0 6832 0.00 78.13 0.00 78.13 1 stress</span><br><span class="line">08:30:36 PM 0 6833 0.00 74.55 0.00 74.55 3 stress</span><br><span class="line"><span class="comment"># æ€»ç»“ï¼š</span></span><br><span class="line">1.å¹³å‡è´Ÿè½½é«˜æœ‰å¯èƒ½æ˜¯CPUå¯†é›†å‹è¿›ç¨‹å¯¼è‡´çš„</span><br><span class="line">2.å¹³å‡è´Ÿè½½é«˜å¹¶ä¸ä¸€å®šä»£è¡¨CPUçš„ä½¿ç”¨ç‡å°±ä¸€å®šé«˜ï¼Œè¿˜æœ‰å¯èƒ½æ˜¯I/Oç¹å¿™</span><br><span class="line">3.å½“å‘ç°è´Ÿè½½é«˜æ—¶ï¼Œå¯ä»¥ä½¿ç”¨mpstatã€pidstatç­‰å·¥å…·ï¼Œå¿«é€Ÿå®šä½åˆ°ï¼Œè´Ÿè½½é«˜çš„åŸå› ï¼Œä»è€Œåšå‡ºå¤„ç†</span><br></pre></td></tr></table></figure><p><strong>è´Ÿè½½è¾¾åˆ°å¤šå°‘æ—¶å€™éœ€è¦æ³¨æ„</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å½“å¹³å‡è´Ÿè½½é«˜äºCPUæ•°é‡70%çš„æ—¶å€™ï¼Œä½ å°±åº”è¯¥åˆ†ææ’æŸ¥è´Ÿè½½é«˜çš„é—®é¢˜äº†ï¼Œä¸€æ—¦è´Ÿè½½è¿‡é«˜ï¼Œå°±å¯èƒ½å¯¼è‡´è¿›ç¨‹ç›¸åº”å˜æ…¢ï¼Œè¿›è€Œå½±å“æœåŠ¡çš„æ­£å¸¸åŠŸèƒ½ã€‚</span><br><span class="line">ä½†70%è¿™ä¸ªæ•°å­—å¹¶ä¸æ˜¯ç»å¯¹çš„ï¼Œæœ€æ¨èçš„æ–¹æ³•ï¼Œè¿˜æ˜¯æŠŠç³»ç»Ÿçš„å¹³å‡è´Ÿè½½ç›‘æ§èµ·æ¥ï¼Œç„¶åæ ¹æ®æ›´å¤šçš„å†å²æ•°æ®ï¼Œåˆ¤æ–­è´Ÿè½½çš„å˜åŒ–è¶‹åŠ¿ï¼Œå½“å‘ç°è´Ÿè½½æœ‰æ˜æ˜¾å‡é«˜çš„è¶‹åŠ¿æ—¶ï¼Œæ¯”å¦‚è¯´è´Ÿè½½ç¿»å€äº†ï¼Œä½ å†å»åšåˆ†æå’Œè°ƒæŸ¥ã€‚</span><br></pre></td></tr></table></figure><h3 id="3-ç³»ç»Ÿå¯åŠ¨æµç¨‹">3.ç³»ç»Ÿå¯åŠ¨æµç¨‹</h3><h4 id="1-Centos6å¯åŠ¨æµç¨‹">1.Centos6å¯åŠ¨æµç¨‹</h4><p><strong>==1.åŠ ç”µè‡ªæ£€==</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Centos6</span><br><span class="line">1.BIOSåŠ ç”µè‡ªæ£€</span><br><span class="line">2.å†…æ ¸å¼•å¯¼</span><br><span class="line">3.è¯»å–GRUBèœå•</span><br><span class="line">4.è¿è¡Œinitï¼Œè¯»å–/etc/inittabé»˜è®¤è¿è¡Œçº§åˆ«</span><br><span class="line">5.æŒ‰é¡ºåºå¯åŠ¨å…¶ä»–æœåŠ¡/etc/rcN.d  </span><br><span class="line">6.å»ºç«‹ç»ˆç«¯</span><br><span class="line">7.ç”¨æˆ·ç™»å½•</span><br></pre></td></tr></table></figure><p><strong>==2.å†…æ ¸å¼•å¯¼==</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">æ‰“å¼€ç”µæºï¼ŒBiOSåŠ ç”µè‡ªæ£€</span><br><span class="line">æ£€æµ‹ç¡¬ä»¶æ˜¯å¦æŸåï¼šCPUã€å†…å­˜ã€ç£ç›˜</span><br><span class="line">è¯»å–/bootç›®å½•ä¸‹çš„æ–‡ä»¶ï¼ŒåŠ è½½å¯åŠ¨æ–‡ä»¶ï¼ŒGRUBèœå•</span><br><span class="line">GRUBèœå•æä¾›å·²å®‰è£…ç³»ç»Ÿçš„é€‰é¡¹ï¼Œå¦‚æœæ˜¯å¤šç³»ç»Ÿï¼Œé€‰æ‹©è¦è¿›å…¥çš„ç³»ç»Ÿ</span><br></pre></td></tr></table></figure><p><strong>==3.è¿è¡Œinit==</strong></p><p>initè¿è¡Œçº§åˆ« init åœ¨CentOSä¸­ï¼Œæ˜¯ç³»ç»Ÿæ‰€æœ‰è¿›ç¨‹çš„èµ·ç‚¹ï¼Œå¦‚æœè¿›ç¨‹æƒ³å¯åŠ¨ï¼Œé‚£å¿…é¡»æœ‰initï¼Œå¦‚æœæ²¡æœ‰initï¼Œç³»ç»Ÿä¸­çš„ä»» ä½•è¿›ç¨‹éƒ½ä¸ä¼šå¯åŠ¨ï¼Œé‚£å°±ç›¸å½“äºè¿™ä¸ªç³»ç»Ÿæ‰“ä¸å¼€</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">initæ˜¯CentOS6ä¸­PIDä¸º0çš„è¿›ç¨‹ï¼Œæ˜¯æ‰€æœ‰è¿›ç¨‹å¯åŠ¨çš„èµ·ç‚¹</span><br><span class="line">[root@localhost ~]# pstree</span><br><span class="line">initâ”€â”¬â”€abrtd</span><br><span class="line">     â”œâ”€acpid</span><br><span class="line">     â”œâ”€atd</span><br><span class="line">     â”œâ”€auditdâ”€â”€â”€&#123;auditd&#125;</span><br><span class="line">     â”œâ”€console-kit-daeâ”€â”€â”€63*[&#123;console-kit-da&#125;]</span><br><span class="line">     â”œâ”€sshdâ”€â”€â”€sshdâ”€â”€â”€bashâ”€â”€â”€pstree</span><br><span class="line">     â””â”€udevdâ”€â”€â”€2*[udevd]</span><br><span class="line">    </span><br></pre></td></tr></table></figure><p><strong>==è¿è¡Œçº§åˆ«==</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">initç¨‹åºé¦–å…ˆæ˜¯éœ€è¦è¯»å–é…ç½®æ–‡ä»¶/etc/inittab</span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> /etc/inittab</span><br><span class="line"><span class="comment"># Default runlevel. The runlevels used are:</span></span><br><span class="line"><span class="comment"># 0 - halt (Do NOT set initdefault to this)</span></span><br><span class="line"><span class="comment"># 1 - Single user mode</span></span><br><span class="line"><span class="comment"># 2 - Multiuser, without NFS (The same as 3, if you do not have networking)</span></span><br><span class="line"><span class="comment"># 3 - Full multiuser mode</span></span><br><span class="line"><span class="comment"># 4 - unused</span></span><br><span class="line"><span class="comment"># 5 - X11</span></span><br><span class="line"><span class="comment"># 6 - reboot (Do NOT set initdefault to this)</span></span><br><span class="line"><span class="built_in">id</span>:3:initdefault:  <span class="comment">#è®¾ç½®è¿è¡Œçº§åˆ«ä¸º3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿è¡Œçº§åˆ«ï¼š</span></span><br><span class="line">0ï¼šå…³æœºè¿è¡Œçº§åˆ« <span class="comment">#å¼€æœºå³å…³æœº</span></span><br><span class="line">1ï¼šå•ç”¨æˆ·æ¨¡å¼è¿è¡Œçº§åˆ«</span><br><span class="line">2ï¼šå¤šç”¨æˆ·æ¨¡å¼ï¼Œä½†æ˜¯æ²¡æœ‰æ–‡ä»¶ç³»ç»Ÿï¼Œæ²¡æœ‰ç½‘ç»œ</span><br><span class="line">3ï¼šå®Œæ•´çš„å¤šç”¨æˆ·æ¨¡å¼ï¼Œæœ‰æ–‡ä»¶ç³»ç»Ÿï¼Œæœ‰ç½‘ç»œ</span><br><span class="line">4ï¼šæœªè¢«ä½¿ç”¨çš„è¿è¡Œçº§åˆ«</span><br><span class="line">5ï¼šå›¾å½¢åŒ–è¿è¡Œçº§åˆ«</span><br><span class="line">6ï¼šé‡å¯è¿è¡Œçº§åˆ« <span class="comment">#é»˜è®¤è¿è¡Œçº§åˆ«ä¸èƒ½è®¾ä¸º6ï¼Œå¦åˆ™ä¸èƒ½æ­£å¸¸å¯åŠ¨</span></span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/image-20240429154944112.png" alt="image-20240429154944112"></p><p><strong>==æŸ¥çœ‹å½“å‰è¿è¡Œçº§åˆ«==</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# runlevel</span><br><span class="line">N 3</span><br><span class="line"><span class="comment">#ä¸´æ—¶åˆ‡æ¢è¿è¡Œçº§åˆ«</span></span><br><span class="line">[root@localhost ~]# init 5</span><br><span class="line"><span class="comment">#æ°¸ä¹…åˆ‡æ¢è¿è¡Œçº§åˆ«</span></span><br><span class="line">[rootezls ~]vim /etc/inittab</span><br><span class="line"><span class="built_in">id</span>:3:initdefault</span><br></pre></td></tr></table></figure><p><strong>è¯»å–å®Œé…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ°å¯¹åº”çš„è¿è¡Œçº§åˆ« 3</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">æŸ¥è¯¢æ“ä½œç³»ç»Ÿåœ¨æ¯ä¸€ä¸ªæ‰§è¡Œç­‰çº§ä¸­ä¼šæ‰§è¡Œå“ªäº›ç³»ç»ŸæœåŠ¡ï¼Œå…¶ä¸­åŒ…æ‹¬å„ç±»å¸¸é©»æœåŠ¡ã€‚</span><br><span class="line">[root@localhost ~]# chkconfig</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# chkconfig |grep <span class="string">&#x27;3:on&#x27;</span></span><br><span class="line">auditd 0:off 1:off 2:on 3:on 4:on 5:on 6:off</span><br><span class="line">crond 0:off 1:off 2:on 3:on 4:on 5:on 6:off</span><br><span class="line">ip6tables 0:off 1:off 2:on 3:on 4:on 5:on 6:off</span><br><span class="line">iptables 0:off 1:off 2:on 3:on 4:on 5:on 6:off</span><br><span class="line">kdump 0:off 1:off 2:off 3:on 4:on 5:on 6:off</span><br><span class="line">mdmonitor 0:off 1:off 2:on 3:on 4:on 5:on 6:off</span><br><span class="line">netfs 0:off 1:off 2:off 3:on 4:on 5:on 6:off</span><br><span class="line">network 0:off 1:off 2:on 3:on 4:on 5:on 6:off</span><br><span class="line">postfix 0:off 1:off 2:on 3:on 4:on 5:on 6:off</span><br><span class="line">rsyslog 0:off 1:off 2:on 3:on 4:on 5:on 6:off</span><br><span class="line">sshd 0:off 1:off 2:on 3:on 4:on 5:on 6:off</span><br><span class="line">udev-post 0:off 1:on 2:on 3:on 4:on 5:on 6:off</span><br></pre></td></tr></table></figure><p><strong>==5.ç³»ç»Ÿåˆå§‹åŒ–==</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## è¯»å–3è¿è¡Œçº§åˆ«çš„æœåŠ¡å¯åŠ¨é¡ºåº</span></span><br><span class="line"><span class="comment">##Så¼€å¤´çš„æ˜¯å…³æœºæœåŠ¡åœæ­¢é¡ºåº</span></span><br><span class="line">[root@localhost ~]# ll /etc/rc3.d/</span><br><span class="line">total 0</span><br><span class="line">lrwxrwxrwx. 1 root root 19 Apr 29 17:06 K10saslauthd -&gt; ../init.d/saslauthd</span><br><span class="line">lrwxrwxrwx. 1 root root 21 Apr 29 17:06 K87restorecond -&gt; ../init.d/restorecond</span><br><span class="line">lrwxrwxrwx. 1 root root 20 Apr 29 17:06 K89netconsole -&gt; ../init.d/netconsole</span><br><span class="line">lrwxrwxrwx. 1 root root 15 Apr 29 17:06 K89rdisc -&gt; ../init.d/rdisc</span><br><span class="line">lrwxrwxrwx. 1 root root 19 Apr 29 17:06 S08ip6tables -&gt; ../init.d/ip6tables</span><br><span class="line">lrwxrwxrwx. 1 root root 18 Apr 29 17:06 S08iptables -&gt; ../init.d/iptables</span><br><span class="line">lrwxrwxrwx. 1 root root 17 Apr 29 17:06 S10network -&gt; ../init.d/network</span><br><span class="line">lrwxrwxrwx. 1 root root 16 Apr 29 17:07 S11auditd -&gt; ../init.d/auditd</span><br><span class="line">lrwxrwxrwx. 1 root root 17 Apr 29 17:06 S12rsyslog -&gt; ../init.d/rsyslog</span><br><span class="line">lrwxrwxrwx. 1 root root 19 Apr 29 17:06 S15mdmonitor -&gt; ../init.d/mdmonitor</span><br><span class="line">lrwxrwxrwx. 1 root root 15 Apr 29 17:06 S25netfs -&gt; ../init.d/netfs</span><br><span class="line">lrwxrwxrwx. 1 root root 19 Apr 29 17:06 S26udev-post -&gt; ../init.d/udev-post</span><br><span class="line">lrwxrwxrwx. 1 root root 15 Apr 29 17:07 S50kdump -&gt; ../init.d/kdump</span><br><span class="line">lrwxrwxrwx. 1 root root 14 Apr 29 17:07 S55sshd -&gt; ../init.d/sshd</span><br><span class="line">lrwxrwxrwx. 1 root root 17 Apr 29 17:06 S80postfix -&gt; ../init.d/postfix</span><br><span class="line">lrwxrwxrwx. 1 root root 15 Apr 29 17:06 S90crond -&gt; ../init.d/crond</span><br><span class="line">lrwxrwxrwx. 1 root root 11 Apr 29 17:06 S99local -&gt; ../rc.local</span><br><span class="line"><span class="comment"># chkconfig: 2345 55 25</span></span><br><span class="line"><span class="comment"># CentOS6ä¸­æ‰€æœ‰è„šæœ¬éƒ½æ˜¯shellè„šæœ¬</span></span><br><span class="line">[root@localhost ~]# ll /etc/init.d/      æŸ¥çœ‹æ‰€æœ‰ç¨‹åºçš„å¯åŠ¨è„šæœ¬</span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> /etc/init.d/sshd</span><br><span class="line"><span class="comment"># chkconfig: 2345 55 25</span></span><br><span class="line">åœ¨2345è¿è¡Œçº§åˆ«ä¸Šï¼Œé»˜è®¤å¼€æœºè‡ªå¯</span><br><span class="line">55ï¼šå¼€æœºç¬¬55ä¸ªå¯åŠ¨</span><br><span class="line">25ï¼šå…³æœºç¬¬25ä¸ªå…³é—­</span><br></pre></td></tr></table></figure><p><strong>==6.å»ºç«‹ç»ˆç«¯==</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">rcæ‰§è¡Œå®Œæ¯•åï¼Œè¿”å›initã€‚è¿™æ—¶åŸºæœ¬ç³»ç»Ÿç¯å¢ƒå·²ç»è®¾ç½®å¥½äº†ï¼Œå„ç§å®ˆæŠ¤è¿›ç¨‹ä¹Ÿå·²ç»å¯åŠ¨äº†ã€‚ initæ¥ä¸‹æ¥ä¼šæ‰“å¼€6ä¸ªç»ˆç«¯ï¼Œä»¥ä¾¿ç”¨æˆ·ç™»å½•ç³»ç»Ÿã€‚åœ¨inittabä¸­çš„ä»¥ä¸‹6è¡Œå°±æ˜¯å®šä¹‰äº†6ä¸ªç»ˆç«¯ï¼š</span><br><span class="line">1:2345:respawn:/sbin/mingetty tty1</span><br><span class="line">2:2345:respawn:/sbin/mingetty tty2</span><br><span class="line">3:2345:respawn:/sbin/mingetty tty3</span><br><span class="line">4:2345:respawn:/sbin/mingetty tty4</span><br><span class="line">5:2345:respawn:/sbin/mingetty tty5</span><br><span class="line">6:2345:respawn:/sbin/mingetty tty6</span><br><span class="line"></span><br><span class="line">è¿œç¨‹è¿æ¥å·¥å…·</span><br><span class="line">pts/0</span><br></pre></td></tr></table></figure><p><strong>==7.ç”¨æˆ·ç™»å½•ç³»ç»Ÿ==</strong></p><p>ä¸€èˆ¬æ¥è¯´ï¼Œç”¨æˆ·çš„ç™»å½•æ–¹å¼æœ‰ä¸‰ç§ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ï¼ˆ1ï¼‰å‘½ä»¤è¡Œç™»å½•</span><br><span class="line">ï¼ˆ2ï¼‰sshç™»å½•</span><br><span class="line">ï¼ˆ3ï¼‰å›¾å½¢ç•Œé¢ç™»å½•</span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/image-20240429161712973.png" alt="image-20240429161712973"></p><h4 id="2-ç³»ç»Ÿå…³æœºå‘½ä»¤">2.ç³»ç»Ÿå…³æœºå‘½ä»¤</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## å…³æœº</span></span><br><span class="line">halt</span><br><span class="line">shutdown -h now</span><br><span class="line">poweroff</span><br><span class="line"></span><br><span class="line"><span class="built_in">sync</span> å°†æ•°æ®ç”±å†…å­˜åŒæ­¥åˆ°ç¡¬ç›˜ä¸­ã€‚</span><br><span class="line">shutdown å…³æœºæŒ‡ä»¤</span><br><span class="line">shutdown â€“h 10      <span class="comment">#è®¡ç®—æœºå°†åœ¨10åˆ†é’Ÿåå…³æœºï¼Œå¹¶ä¸”ä¼šæ˜¾ç¤ºåœ¨ç™»é™†ç”¨æˆ·çš„å½“å‰å±å¹•ä¸­ã€‚</span></span><br><span class="line">shutdown â€“h now      <span class="comment">#ç«‹é©¬å…³æœº</span></span><br><span class="line">shutdown â€“h 20:25  <span class="comment">#ç³»ç»Ÿä¼šåœ¨ä»Šå¤©20:25å…³æœº</span></span><br><span class="line">shutdown â€“h +10      <span class="comment">#ååˆ†é’Ÿåå…³æœº</span></span><br><span class="line">shutdown â€“r now  <span class="comment">#ç³»ç»Ÿç«‹é©¬é‡å¯</span></span><br><span class="line">shutdown â€“r +10  <span class="comment">#ç³»ç»Ÿååˆ†é’Ÿåé‡å¯</span></span><br><span class="line">reboot     <span class="comment">#å°±æ˜¯é‡å¯ï¼Œç­‰åŒäº shutdown â€“r now</span></span><br><span class="line">halt     <span class="comment">#å…³é—­ç³»ç»Ÿï¼Œç­‰åŒäºshutdown â€“h now å’Œ poweroff</span></span><br><span class="line"><span class="comment">## é‡å¯</span></span><br><span class="line">reboot</span><br><span class="line">init 6</span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/image-20240429162103002.png" alt="image-20240429162103002"></p><h4 id="3-å•ç”¨æˆ·æ¨¡å¼">3.å•ç”¨æˆ·æ¨¡å¼</h4><p><strong>==å¿˜è®°å¯†ç è¿›å…¥å•ç”¨æˆ·æ¨¡å¼æ”¹å¯†ç ==</strong></p><p><strong>1ï¼‰é‡å¯ç³»ç»Ÿï¼Œåˆ°grubèœå•ç•Œé¢</strong></p><p><img src="https://cos.lukme.top/Pic/image-20240429164346037.png" alt="image-20240429164346037"></p><p><img src="https://cos.lukme.top/Pic/image-20240429164633863.png" alt="image-20240429164633863"></p><p><img src="https://cos.lukme.top/Pic/image-20240429165101506.png" alt="image-20240429165101506"></p><p><strong>2ï¼‰å›è½¦è¿”å›å†…æ ¸èœå•</strong></p><p><img src="https://cos.lukme.top/Pic/image-20240429164943845.png" alt="image-20240429164943845"></p><p><strong>3ï¼‰è¿›å…¥åå°±å¯ä»¥é‡æ–°è®¾ç½®å¯†ç äº†</strong></p><p><img src="https://cos.lukme.top/Pic/image-20240429165410448.png" alt="image-20240429165410448"></p><p>å¯†ç è®¾ç½®å¥½é‡å¯å°±OKäº†</p><p>reboot   init6</p><h4 id="4-CentOS7å¯åŠ¨é¡ºåº">4.CentOS7å¯åŠ¨é¡ºåº</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># C7</span></span><br><span class="line">1.BIOS(å¼€æœºè‡ªæ£€)</span><br><span class="line">2.MBR ( Master Boot Record ä¸»å¼•å¯¼è®°å½•)</span><br><span class="line">3.GRUB2 Bootloaderï¼ˆå¼•å¯¼èœå•ï¼‰</span><br><span class="line">4.Kernelï¼ˆå†…æ ¸å¼•å¯¼ï¼‰</span><br><span class="line">5.Systemd ï¼ˆä¸å†ä½¿ç”¨initï¼Œæ”¹æˆäº†systemdï¼‰</span><br><span class="line">6.æŒ‰é¡ºåºå¯åŠ¨å…¶ä»–æœåŠ¡ systemctl list-unit-files</span><br><span class="line">[root@lb01 ~]# systemctl list-unit-files</span><br><span class="line">UNIT FILE                                     STATE   </span><br><span class="line">proc-sys-fs-binfmt_misc.automount             static  </span><br><span class="line">dev-hugepages.mount                           static  </span><br><span class="line">dev-mqueue.mount                              static  </span><br><span class="line">proc-sys-fs-binfmt_misc.mount                 static  </span><br><span class="line">sys-fs-fuse-connections.mount                 static  </span><br><span class="line">sys-kernel-config.mount                       static  </span><br><span class="line">sys-kernel-debug.mount                        static</span><br><span class="line">7.å»ºç«‹ç»ˆç«¯</span><br><span class="line">8.ç”¨æˆ·ç™»å½•</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿è¡Œçº§åˆ«ï¼š</span></span><br><span class="line">/usr/lib/systemd/system/runlevel0.target -&gt; poweroff.target</span><br><span class="line">/usr/lib/systemd/system/runlevel1.target -&gt; rescue.target</span><br><span class="line">/usr/lib/systemd/system/runlevel2.target -&gt; multi-user.target</span><br><span class="line">/usr/lib/systemd/system/runlevel3.target -&gt; multi-user.target</span><br><span class="line">/usr/lib/systemd/system/runlevel4.target -&gt; multi-user.target</span><br><span class="line">/usr/lib/systemd/system/runlevel5.target -&gt; graphical.target</span><br><span class="line">/usr/lib/systemd/system/runlevel6.target -&gt; reboot.target</span><br><span class="line">0ï¼šå…³æœºè¿è¡Œçº§åˆ« (Do NOT <span class="built_in">set</span> initdefault to this)</span><br><span class="line">1ï¼šå•ç”¨æˆ·æ¨¡å¼è¿è¡Œçº§åˆ«</span><br><span class="line">2ï¼Œ3ï¼Œ4ï¼šå®Œæ•´çš„å¤šç”¨æˆ·æ¨¡å¼ï¼Œæœ‰æ–‡ä»¶ç³»ç»Ÿï¼Œæœ‰ç½‘ç»œ</span><br><span class="line">5ï¼šå›¾å½¢åŒ–è¿è¡Œçº§åˆ«</span><br><span class="line">6ï¼šé‡å¯è¿è¡Œçº§åˆ« (Do NOT <span class="built_in">set</span> initdefault to this)</span><br><span class="line"><span class="comment">#æŸ¥çœ‹å½“å‰è¿è¡Œçº§åˆ«ï¼š</span></span><br><span class="line">[root@yum_repo ~]# systemctl get-default</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# systemctl list-unit-files|grep <span class="string">&#x27;enabled&#x27;</span></span><br><span class="line"><span class="comment">## CentOS7ä¸­å¯åŠ¨æœåŠ¡ï¼Œæ‰€æœ‰æœåŠ¡çš„å¯åŠ¨è„šæœ¬</span></span><br><span class="line">/usr/lib/systemd/system/</span><br><span class="line"><span class="comment">#ä¿®æ”¹è¿è¡Œçº§åˆ«</span></span><br><span class="line">[root@yum_repo ~]# systemctl set-default multi-user.target    </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³¨æ„ï¼šcentos7ä¸­æ‰€æœ‰æœåŠ¡çš„å¯åŠ¨è„šæœ¬ï¼Œéƒ½ä¸æ˜¯shellä¸”å¿…é¡»ä»¥.serviceç»“å°¾</span></span><br><span class="line"><span class="comment">## å¼€æœºè‡ªå¯åŠ¨æœåŠ¡</span></span><br><span class="line">[root@localhost ~]# ll /etc/systemd/system/multi-user.target.wants/</span><br><span class="line">auditd.service -&gt; /usr/lib/systemd/system/auditd.service</span><br><span class="line">nginx.service -&gt; /usr/lib/systemd/system/nginx.service</span><br><span class="line">firewalld.service -&gt; /usr/lib/systemd/system/firewalld.service</span><br><span class="line">irqbalance.service -&gt; /usr/lib/systemd/system/irqbalance.service</span><br><span class="line">NetworkManager.service -&gt; /usr/lib/systemd/system/NetworkManager.service</span><br><span class="line">postfix.service -&gt; /usr/lib/systemd/system/postfix.service</span><br><span class="line">remote-fs.target -&gt; /usr/lib/systemd/system/remote-fs.target</span><br><span class="line">rhel-configure.service -&gt; /usr/lib/systemd/system/rhel-configure.service</span><br><span class="line">rsyslog.service -&gt; /usr/lib/systemd/system/rsyslog.service</span><br><span class="line">sshd.service -&gt; /usr/lib/systemd/system/sshd.service</span><br><span class="line">tuned.service -&gt; /usr/lib/systemd/system/tuned.service</span><br><span class="line">vmtoolsd.service -&gt; /usr/lib/systemd/system/vmtoolsd.service</span><br></pre></td></tr></table></figure><h4 id="5-CentOS7å•ç”¨æˆ·æ¨¡å¼">5.CentOS7å•ç”¨æˆ·æ¨¡å¼</h4><p><strong>1.é‡å¯ç³»ç»Ÿ</strong></p><p><img src="https://cos.lukme.top/Pic/image-20240429170437706.png" alt="image-20240429170437706"></p><p><strong>2.è¿›å…¥grub2èœå•</strong></p><p><img src="https://cos.lukme.top/Pic/image-20240429170649081.png" alt="image-20240429170649081"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨linux16è¡Œçš„æœ«å°¾è¾“å…¥,ç„¶åæŒ‰ä¸‹   Ctrl+Xå¼•å¯¼   ç»„åˆé”®æ¥è¿è¡Œä¿®æ”¹è¿‡çš„å†…æ ¸ç¨‹åº</span></span><br><span class="line">enforcing=0 init=/bin/bash</span><br><span class="line">enforcing=0   å…³é—­selinuxï¼ˆä¸´æ—¶çš„ï¼‰ï¼Œè¿›å…¥å•ç”¨æˆ·åé…ç½®æ–‡ä»¶é‡Œå…³é—­selinuxï¼Œå¦åˆ™é‡æ–°å¼€æœºåå¯†ç å°±ä¸ç”Ÿæ•ˆäº†</span><br></pre></td></tr></table></figure><p><strong>ä¸æŒ‚è½½æ–¹å¼</strong></p><p><img src="https://cos.lukme.top/Pic/image-20240429173119985.png" alt="image-20240429173119985"></p><p><strong>3.è¿›å…¥å•ç”¨æˆ·æ¨¡å¼</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.é‡æ–°æŒ‚è½½/ç›®å½•</span></span><br><span class="line">mount -o rw,remount /</span><br><span class="line"><span class="comment"># 2.ä¿®æ”¹å¯†ç </span></span><br><span class="line">passwd root</span><br><span class="line"><span class="comment"># 3.é‡æ–°å¼•å¯¼ç³»ç»Ÿ</span></span><br><span class="line"><span class="built_in">exec</span> /sbin/init</span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/image-20240429171621119.png" alt="image-20240429171621119"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">è¿›å…¥é…ç½®æ–‡ä»¶æ°¸ä¹…å…³é—­selinux</span><br><span class="line">[root@lb01 ~]# vi /etc/selinux/config</span><br><span class="line">SELINUX=disabled    å°†permissiveæ”¹ä¸ºdisabled</span><br><span class="line">SELINUXTYPE=targeted</span><br><span class="line"></span><br><span class="line">æŸ¥çœ‹selinuxå¼€å¯çŠ¶æ€</span><br><span class="line">[root@lb01 ~]# getenforce</span><br><span class="line">Disabled</span><br></pre></td></tr></table></figure><h4 id="6-ä¿®æ”¹é»˜è®¤è¿è¡Œçº§åˆ«">6.ä¿®æ”¹é»˜è®¤è¿è¡Œçº§åˆ«</h4><p><strong>å¦‚æœcentos7è¢«è®¾ç½®ä¸ºè¿è¡Œçº§åˆ«6ï¼Œå¯¼è‡´æ— é™é‡å¯æ€ä¹ˆè§£å†³ï¼Ÿ</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## æŸ¥çœ‹</span></span><br><span class="line">[root@yum_repo ~]# systemctl get-default</span><br><span class="line">multi-user.target    <span class="comment">#å®Œæ•´å¤šç”¨æˆ·æ¨¡å¼</span></span><br><span class="line"><span class="comment">## ä¿®æ”¹</span></span><br><span class="line">[root@yum_repo ~]# systemctl set-default reboot.target     <span class="comment">#è®¾ç½®è¿è¡Œçº§åˆ«6é‡å¯ï¼ˆæ— é™é‡å¯ï¼‰</span></span><br></pre></td></tr></table></figure><p><strong>è§£å†³åŠæ³•</strong></p><p>1.è¿›å…¥ç¼–è¾‘æ¨¡å¼</p><p><img src="https://cos.lukme.top/Pic/image-20240429173139767.png" alt="image-20240429173139767"></p><p>2.#åœ¨linux16è¡Œçš„æœ«å°¾è¾“å…¥,ç„¶åæŒ‰ä¸‹   Ctrl+X   ç»„åˆé”®æ¥è¿è¡Œä¿®æ”¹è¿‡çš„å†…æ ¸ç¨‹åº</p><p><img src="https://cos.lukme.top/Pic/image-20240429175105690.png" alt="image-20240429175105690"></p><p><img src="https://cos.lukme.top/Pic/image-20240429180423234.png" alt="image-20240429180423234"></p><p>exité€€å‡ºï¼Œrebooté‡å¯</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.é‡æ–°æŒ‚è½½/sysrootç›®å½•</span></span><br><span class="line">mount -o rw,remount /sysroot</span><br><span class="line"><span class="comment"># 2.è·å–rootæƒé™</span></span><br><span class="line"><span class="built_in">chroot</span> /sysroot</span><br><span class="line"><span class="comment"># 3.ä¿®æ”¹å¯†ç </span></span><br><span class="line">passwd root</span><br><span class="line"><span class="comment"># 4.ä¿®æ”¹è¿è¡Œçº§åˆ«</span></span><br><span class="line">systemctl set-default multi-user.target</span><br><span class="line"><span class="comment"># 5.é€€å‡º</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"><span class="comment"># 6.é‡å¯</span></span><br><span class="line">reboot</span><br><span class="line"><span class="comment">## å…³é—­selinux</span></span><br><span class="line"><span class="comment"># ä¸´æ—¶å…³é—­</span></span><br><span class="line">[root@yum_repo ~]# setenforce 0</span><br><span class="line"><span class="comment"># æ°¸ä¹…å…³é—­ï¼ˆé‡å¯ç³»ç»Ÿç”Ÿæ•ˆï¼‰</span></span><br><span class="line">[root@yum_repo ~]# vi /etc/sysconfig/selinux</span><br><span class="line">SELINUX=disabled</span><br><span class="line"><span class="comment">## ä¸¤ç§è¿›å…¥å•ç”¨æˆ·æ–¹æ³•</span></span><br><span class="line">1ï¼‰enforcing=0 init=/bin/bash // ä¿®æ”¹å¯†ç </span><br><span class="line">2ï¼‰rd.break // ä¿®æ”¹è¿è¡Œçº§åˆ«</span><br></pre></td></tr></table></figure><h3 id="4-æ•‘æ´æ¨¡å¼">4.æ•‘æ´æ¨¡å¼</h3><p>å‰æï¼šè™šæ‹Ÿæœºè®¾ç½®å·²ç»æŒ‚è½½isoé•œåƒ</p><h4 id="1-MBRå¼•å¯¼è¢«ç ´åè§£å†³">1.MBRå¼•å¯¼è¢«ç ´åè§£å†³</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ³¨ï¼šä»…æ¼”ç¤ºæ•‘æ´æ¨¡å¼æ¸…ç©ºMBRï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼</span></span><br><span class="line"><span class="built_in">dd</span> &lt; /dev/zero &gt;/dev/sda bs=1 count=446</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è§£å†³åŠæ³•</span></span><br><span class="line"><span class="comment"># 1.è·å–rootç¯å¢ƒ</span></span><br><span class="line"><span class="built_in">chroot</span> /mnt/sysimage</span><br><span class="line"><span class="comment"># 2.ä¿®å¤MBR</span></span><br><span class="line">grub2-install /dev/sda</span><br><span class="line"><span class="comment"># 3.é€€å‡º</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"><span class="comment"># 4.é‡å¯</span></span><br><span class="line">reboo</span><br><span class="line">è¿‡ç¨‹å¦‚ä¸‹â†“</span><br></pre></td></tr></table></figure><p><strong>MBRç ´ååå¯åŠ¨è‡ªåŠ¨è·³åˆ°è¿™é‡Œ</strong></p><p><img src="https://cos.lukme.top/Pic/image-20240501105112668.png" alt="image-20240501105112668"></p><p>è¿›å…¥æ•‘æ´æ¨¡å¼å‰è¿›å…¥BISO,ä¿®æ”¹ä¼˜å…ˆCD-ROMå¯åŠ¨åŠ è½½</p><p><img src="https://cos.lukme.top/Pic/image-20240501102743250.png" alt="image-20240501102743250"></p><p><img src="https://cos.lukme.top/Pic/image-20240501094910948.png" alt="image-20240501094910948"></p><p><img src="https://cos.lukme.top/Pic/image-20240501105511762.png" alt="image-20240501105511762"></p><p><img src="https://cos.lukme.top/Pic/image-20240501105829470.png" alt="image-20240501105829470"></p><p><img src="https://cos.lukme.top/Pic/image-20240501111423160.png" alt="image-20240501111423160"></p><h4 id="2-grubèœå•è¯¯åˆ è§£å†³">2.grubèœå•è¯¯åˆ è§£å†³</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä»…åšæ¼”ç¤ºåˆ é™¤gruubèœå•ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼</span></span><br><span class="line">[root@lb01 ~]# <span class="built_in">rm</span> -fr /boot/grub2</span><br><span class="line">[root@lb01 ~]# reboot</span><br></pre></td></tr></table></figure><p><strong>è§£å†³è¿‡ç¨‹</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.è·å–rootç¯å¢ƒ</span></span><br><span class="line"><span class="built_in">chroot</span> /mnt/sysimage</span><br><span class="line"><span class="comment"># 2.ä¿®å¤ç£ç›˜MBR</span></span><br><span class="line">grub2-install /dev/sda</span><br><span class="line"><span class="comment"># 3.ä¿®å¤grubèœå•é…ç½®æ–‡ä»¶</span></span><br><span class="line">grub2-mkconfig -o /boot/grub2/grub.cfg</span><br><span class="line"><span class="comment"># 4.é€€å‡º</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"><span class="comment"># 5.é‡å¯</span></span><br><span class="line">reboot</span><br><span class="line">è¿‡ç¨‹å›¾å¦‚ä¸‹</span><br></pre></td></tr></table></figure><p><strong>grubèœå•è¢«åˆ å¯åŠ¨ç•Œé¢</strong></p><p><img src="https://cos.lukme.top/Pic/image-20240501112106766.png" alt="image-20240501112106766"></p><p><strong>åŒæ ·è¿›å…¥æ•‘æ´æ¨¡å¼</strong></p><p><img src="https://cos.lukme.top/Pic/image-20240501113156619.png" alt="image-20240501113156619"></p><h4 id="3-ç³»ç»ŸæŸåæ‹·è´æ–‡ä»¶">3.ç³»ç»ŸæŸåæ‹·è´æ–‡ä»¶</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bash-4.2# mkfs.xfs -f /dev/sdc</span><br><span class="line">bash-4.2# <span class="built_in">mkdir</span> /data</span><br><span class="line">bash-4.2# mount /dev/sdc /data</span><br><span class="line">bash-4.2# <span class="built_in">cp</span> -a /raid0 /data</span><br><span class="line">bash-4.2# umount /dev/sdb</span><br></pre></td></tr></table></figure><h3 id="5-Systemd-è¿›ç¨‹ç®¡ç†">5.Systemd è¿›ç¨‹ç®¡ç†</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemdå³ä¸ºsystem daemonå®ˆæŠ¤è¿›ç¨‹ï¼Œsystemdä¸»è¦è§£å†³ä¸Šæ–‡çš„é—®é¢˜è€Œè¯ç”Ÿï¼Œsystemdçš„ç›®æ ‡æ˜¯ï¼Œä¸ºç³»ç»Ÿçš„å¯åŠ¨å’Œç®¡ç†æä¾›ä¸€å¥—å®Œæ•´çš„è§£å†³æ–¹æ¡ˆã€‚</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#CentOS6å¯åŠ¨</span></span><br><span class="line">1.å¯åŠ¨æ—¶é—´é•¿ï¼Œinitè¿›ç¨‹æ˜¯ä¸²è¡Œå¯åŠ¨ï¼Œåªæœ‰å‰ä¸€ä¸ªè¿›ç¨‹å¯åŠ¨å®Œï¼Œæ‰ä¼šå¯åŠ¨ä¸‹ä¸€ä¸ªè¿›ç¨‹ã€‚</span><br><span class="line">2.å¯åŠ¨è„šæœ¬å¤æ‚ï¼Œåˆå§‹åŒ–å®Œæˆåï¼Œç³»ç»Ÿä¼šåŠ è½½å¾ˆå¤šè„šæœ¬ï¼Œè„šæœ¬éƒ½ä¼šå¤„ç†å„è‡ªçš„æƒ…å†µï¼Œè¿™å›è®©è„šæœ¬å¤šè€Œå¤æ‚ã€‚</span><br><span class="line"><span class="comment">#CentOS7å¯åŠ¨</span></span><br><span class="line">CtOS7æ‰€æœ‰è¿›ç¨‹æ— è®ºæœ‰æ— ä¾èµ–å…³ç³»ï¼Œéƒ½å¹¶è¡Œå¯åŠ¨ï¼Œå½“ç„¶æœ‰å¾ˆå¤šæ—¶å€™è¿›ç¨‹å¹¶æ²¡æœ‰çœŸæ­£çš„å¯åŠ¨è€Œæ˜¯åªæœ‰ä¸€ä¸ªä¿¡å·æˆ–è€…è¯´æ˜¯æ ‡è®°ï¼Œåœ¨çœŸæ­£åˆ©ç”¨çš„æ—¶å€™ï¼Œæ‰ä¼šçœŸæ­£å¯åŠ¨</span><br></pre></td></tr></table></figure><p><img src="https://cos.lukme.top/Pic/image-20240501114955720.png" alt="image-20240501114955720"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#systemdä¼˜åŠ¿</span></span><br><span class="line">1.æœ€æ–°ç³»ç»Ÿéƒ½é‡‡ç”¨systemdç®¡ç†ï¼ˆRedHat7ï¼ŒCentOS7ï¼ŒUbuntu15...ï¼‰</span><br><span class="line">2.CentOS7 æ”¯æŒå¼€æœºå¹¶è¡Œå¯åŠ¨æœåŠ¡,æ˜¾è‘—æé«˜å¼€æœºå¯åŠ¨æ•ˆç‡</span><br><span class="line">3.CentOS7å…³æœºåªå…³é—­æ­£åœ¨è¿è¡Œçš„æœåŠ¡ï¼Œè€ŒCentOS6ï¼Œå…¨éƒ¨éƒ½å…³é—­ä¸€æ¬¡ã€‚</span><br><span class="line">4.CentOS7æœåŠ¡çš„å¯åŠ¨ä¸åœæ­¢ä¸åœ¨ä½¿ç”¨è„šæœ¬è¿›è¡Œç®¡ç†ï¼Œä¹Ÿå°±æ˜¯/etc/init.dä¸‹ä¸åœ¨æœ‰è„šæœ¬ã€‚</span><br><span class="line">5.CentOS7ä½¿ç”¨systemdè§£å†³åŸæœ‰æ¨¡å¼ç¼ºé™·ï¼Œæ¯”å¦‚åŸæœ‰serviceä¸ä¼šå…³é—­ç¨‹åºäº§ç”Ÿçš„å­è¿›ç¨‹ã€‚</span><br></pre></td></tr></table></figure><table><thead><tr><th>ç›¸å…³é…ç½®æ–‡ä»¶</th><th>CentOS6</th><th>CentOS7</th></tr></thead><tbody><tr><td>æœåŠ¡å¯åŠ¨è„šæœ¬</td><td>/etc/init.d/</td><td>/usr/lib/systemd/system/</td></tr><tr><td>å¼€æœºå¯åŠ¨æœåŠ¡</td><td>/etc/rcN.d/</td><td>/etc/systemd/system/</td></tr></tbody></table><h4 id="systemdç›¸å…³å‘½ä»¤">systemdç›¸å…³å‘½ä»¤</h4><p><strong>å¯åŠ¨é‡å¯æœåŠ¡</strong></p><table><thead><tr><th>System V initï¼ˆ6ç³»ç»Ÿï¼‰</th><th>systemctlå‘½ä»¤ï¼ˆ7ç³»ç»Ÿï¼‰</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>service nginx start <br />/etc/init.d/nginx start</td><td>systemctl start nginx.service</td><td>å¯åŠ¨æœåŠ¡</td></tr><tr><td>service nginx stop <br />/etc/init.d/nginx stop</td><td>systemctl stop nginx.service</td><td>åœæ­¢æœåŠ¡</td></tr><tr><td>service nginx restart <br />/etc/init.d/nginx restart</td><td>systemctl restart nginx.service</td><td>é‡å¯æœåŠ¡</td></tr><tr><td>service nginx reload <br />/etc/init.d/nginx reload</td><td>systemctl reload nginx.service</td><td>é‡æ–°åŠ è½½é…ç½®(ä¸ç»ˆæ­¢æœåŠ¡)</td></tr><tr><td>service nginx status <br />/etc/init.d/nginx status</td><td>systemctl status nginx.servre</td><td>æŸ¥çœ‹æœåŠ¡è¿è¡ŒçŠ¶æ€</td></tr><tr><td></td><td>systemctl is-active sshd.service</td><td>æŸ¥çœ‹æœåŠ¡æ˜¯å¦åœ¨è¿è¡Œä¸­</td></tr><tr><td></td><td>systemctl mask nginx.servre</td><td>ç¦æ­¢æœåŠ¡è¿è¡Œ</td></tr><tr><td></td><td>systemctl unmask nginx.servre</td><td>å–æ¶ˆç¦æ­¢æœåŠ¡è¿è¡Œ</td></tr></tbody></table><p><strong>è®¾ç½®æœåŠ¡å¼€æœºè‡ªå¯ï¼ŒæŸ¥çœ‹å„çº§åˆ«ä¸‹æœåŠ¡å¯åŠ¨çŠ¶æ€</strong></p><table><thead><tr><th>System V initï¼ˆ6ç³» ç»Ÿï¼‰</th><th>systemctlå‘½ä»¤ï¼ˆ7ç³»ç»Ÿï¼‰</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>chkconfig nginx on</td><td>systemctl enable nginx.service</td><td>å¼€æœºè‡ªåŠ¨å¯åŠ¨</td></tr><tr><td>chkconfig nginx off</td><td>systemctl disable nginx.service</td><td>å¼€æœºä¸è‡ªåŠ¨å¯åŠ¨</td></tr><tr><td>chkconfig --list</td><td>systemctl list-unit-files</td><td>æŸ¥çœ‹å„ä¸ªçº§åˆ«ä¸‹æœåŠ¡çš„å¯åŠ¨ä¸ç¦ ç”¨</td></tr><tr><td>chkconfig --list nginx</td><td>systemctl is-enabled nginx.service</td><td>æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ˜¯å¦ä¸ºå¼€æœºè‡ªå¯åŠ¨</td></tr><tr><td>chkconfigâ€“add nginx</td><td>systemctl daemon-reload</td><td>åˆ›å»ºæ–°æœåŠ¡æ–‡ä»¶æˆ–è€…å˜æ›´è®¾ç½®</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">è®¾ç½®å¼€æœºè‡ªå¯ç›¸å½“äºç»™å¯åŠ¨è„šæœ¬åšä¸ªè½¯é“¾æ¥</span><br><span class="line"><span class="comment"># CentOS7ä¸­å¼€æœºè‡ªå¯</span></span><br><span class="line">[root@localhost ~]# systemctl <span class="built_in">enable</span> sshd</span><br><span class="line"><span class="built_in">ln</span> -s /usr/lib/systemd/system/sshd.service /etc/systemd/system/multiuser.target.wants/</span><br><span class="line"><span class="comment"># å–æ¶ˆå¼€æœºè‡ªå¯</span></span><br><span class="line">[root@localhost ~]# systemctl <span class="built_in">disable</span> sshd</span><br><span class="line">Removed symlink /etc/systemd/system/multi-user.target.wants/sshd.service</span><br><span class="line"><span class="built_in">rm</span> -f /etc/systemd/system/multi-user.target.wants/sshd.service</span><br></pre></td></tr></table></figure><p><strong>systemctlæœåŠ¡çŠ¶æ€è¯´æ˜</strong></p><table><thead><tr><th>æœåŠ¡çŠ¶æ€</th><th>çŠ¶æ€è¯´æ˜</th></tr></thead><tbody><tr><td>loaded</td><td>æœåŠ¡å•å…ƒçš„é…ç½®æ–‡ä»¶å·²ç»è¢«å¤„ç†</td></tr><tr><td>active(running)</td><td>æœåŠ¡çš„ä¸€ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹åœ¨è¿è¡Œä¸­</td></tr><tr><td>active(exited)</td><td>ä¸€æ¬¡æ€§è¿è¡Œçš„æœåŠ¡æˆåŠŸè¢«æ‰§è¡Œå¹¶é€€å‡º(æœåŠ¡è¿è¡Œåå®Œæˆä»»åŠ¡,ç›¸å…³è¿›ç¨‹ä¼šè‡ªåŠ¨é€€å‡º)</td></tr><tr><td>active(waiting)</td><td>æœåŠ¡å·²ç»è¿è¡Œä½†åœ¨ç­‰å¾…æŸä¸ªäº‹ä»¶</td></tr><tr><td>inactive</td><td>æœåŠ¡æ²¡æœ‰åœ¨è¿è¡Œ</td></tr><tr><td>enable</td><td>æœåŠ¡è®¾å®šä¸ºå¼€æœºè¿è¡Œ</td></tr><tr><td>disabled</td><td>æœåŠ¡è®¾å®šä¸ºå¼€æœºä¸è¿è¡Œ</td></tr><tr><td>static</td><td>æœåŠ¡ä¸èƒ½è¢«è®¾å®šå¼€æœºå¯åŠ¨,ä½†å¯ä»¥ç”±å…¶ä»–æœåŠ¡å¯åŠ¨è¯¥æœåŠ¡</td></tr></tbody></table><h3 id="6-å®šæ—¶ä»»åŠ¡">6.å®šæ—¶ä»»åŠ¡</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä»€ä¹ˆæ˜¯crond</span></span><br><span class="line">crondå°±æ˜¯è®¡åˆ’ä»»åŠ¡ï¼Œç±»ä¼¼äºæˆ‘ä»¬å¹³æ—¶ç”Ÿæ´»ä¸­çš„é—¹é’Ÿï¼Œå®šç‚¹æ‰§è¡Œã€‚</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# ps aux|grep crond</span><br><span class="line">root 6349 0.0 0.1 126284 1612 ? Ss 16:00 0:00 /usr/sbin/crond -n</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#free æŸ¥çœ‹å†…å­˜æƒ…å†µ</span></span><br><span class="line">[root@lb01 ~]# free -mï¼ˆä»¥mæ˜¾ç¤ºå†…å­˜å¤šå°‘ï¼‰</span><br><span class="line">æ€»å†…å­˜ å·²ä½¿ç”¨ç©ºé—²å¯ä½¿ç”¨å†…å­˜</span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:            972          89         760           7         123         737</span><br><span class="line">Swap:          1023           0        1023</span><br><span class="line"></span><br><span class="line"><span class="comment">#Centos6å¯ä½¿ç”¨å†…å­˜</span></span><br><span class="line">[root@localhost ~]# free</span><br><span class="line">æ€»å†…å­˜ å·²ä½¿ç”¨ç©ºé—²</span><br><span class="line">             total       used       free     shared    buffers     cached</span><br><span class="line">Mem:       1004768     170984     833784        220      13336      48440</span><br><span class="line">-/+ buffers/cache:     109208     895560(å¯ä½¿ç”¨å†…å­˜) </span><br><span class="line">Swap:      1048572          0    1048572</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æˆªå–éœ€è¦çš„å†…å­˜ä¿¡æ¯</span></span><br><span class="line">æ€»å†…å­˜ï¼šfree -m|awk <span class="string">&#x27;/^Mem/&#123;print $2&#125;&#x27;</span></span><br><span class="line">å·²ä½¿ç”¨å†…å­˜ï¼šfree -m|awk <span class="string">&#x27;/^Mem/&#123;print $3&#125;&#x27;</span></span><br><span class="line">å¯ç”¨å†…å­˜ï¼šfree -m|awk <span class="string">&#x27;/^Mem/&#123;print $NF&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å†™è¿›è„šæœ¬</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line">mem_total=`free -m|awk <span class="string">&#x27;/^Mem/&#123;print $2&#125;&#x27;</span>`</span><br><span class="line">mem_used=`free -m|awk <span class="string">&#x27;/^Mem/&#123;print $3&#125;&#x27;</span>`</span><br><span class="line">mem_ava=`free -m|awk <span class="string">&#x27;/^Mem/&#123;print $NF&#125;&#x27;</span>`</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;------ å†…å­˜ä¿¡æ¯ ------&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;æ€»å†…å­˜ï¼š<span class="variable">$&#123;mem_total&#125;</span>M&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;å·²ä½¿ç”¨å†…å­˜ï¼š<span class="variable">$&#123;mem_used&#125;</span>M&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;å¯ç”¨å†…å­˜ï¼š<span class="variable">$&#123;mem_ava&#125;</span>M&quot;</span></span><br></pre></td></tr></table></figure><h4 id="1-å®šæ—¶ä»»åŠ¡è¯­æ³•">1.å®šæ—¶ä»»åŠ¡è¯­æ³•</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ï¼ï¼å®šæ—¶ä»»åŠ¡æœ€å°åªèƒ½è¾¾åˆ°åˆ†é’Ÿçº§</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## å®šæ—¶ä»»åŠ¡é…ç½®æ–‡ä»¶</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">cat</span> /etc/crontab</span><br><span class="line"><span class="comment">## å®šæ—¶ä»»åŠ¡ç¼–å†™çš„è¯­æ³•</span></span><br><span class="line">SHELL=/bin/bash</span><br><span class="line"><span class="comment">## å¯ç›´æ¥æ‰§è¡Œçš„å‘½ä»¤ï¼ˆä»¥åå†™åœ¨å®šæ—¶ä»»åŠ¡ä¸­çš„å‘½ä»¤ï¼Œæœ€å¥½åŠ ä¸Šç»å¯¹è·¯å¾„ï¼‰</span></span><br><span class="line">PATH=/sbin:/bin:/usr/sbin:/usr/bin</span><br><span class="line"><span class="comment">## å®šæ—¶ä»»åŠ¡è¾“å‡ºçš„å†…å®¹ï¼Œä¼šä»¥é‚®ä»¶çš„å½¢å¼å‘ç»™rootç”¨æˆ·</span></span><br><span class="line">MAILTO=root</span><br><span class="line"><span class="comment"># For details see man 4 crontabs</span></span><br><span class="line"><span class="comment"># Example of job definition:</span></span><br><span class="line"><span class="comment"># .---------------- minute (0 - 59)</span></span><br><span class="line"><span class="comment"># | .------------- hour (0 - 23)</span></span><br><span class="line"><span class="comment"># | | .---------- day of month (1 - 31)</span></span><br><span class="line"><span class="comment"># | | | .------- month (1 - 12) OR jan,feb,mar,apr ...</span></span><br><span class="line"><span class="comment"># | | | | .---- day of week (0 - 6) (Sunday=0 or 7) OR</span></span><br><span class="line">sun,mon,tue,wed,thu,fri,sat</span><br><span class="line"><span class="comment"># | | | | |</span></span><br><span class="line"><span class="comment"># * * * * * user-name command to be executed</span></span><br><span class="line"><span class="comment"># PATHçš„ä½œç”¨ï¼šæ˜¯ä¸€ä¸ªç¯å¢ƒå˜é‡ï¼Œæ‰€æœ‰çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¯ä»¥ä¸åŠ è·¯å¾„ç›´æ¥æ‰§è¡Œ</span></span><br><span class="line">[root@localhost ~]# <span class="built_in">echo</span> <span class="variable">$PATH</span></span><br><span class="line">/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin</span><br><span class="line">* * * * * [ç”¨æˆ·] å¯æ‰§è¡Œçš„å‘½ä»¤</span><br><span class="line"></span><br><span class="line">åˆ† æ—¶ æ—¥ æœˆ å‘¨</span><br><span class="line">00 02 * * * <span class="built_in">ls</span> <span class="comment"># æ¯å¤©å‡Œæ™¨ä¸¤ç‚¹æ•´æ‰§è¡Œ ls å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">00 02 1 * * <span class="built_in">ls</span> <span class="comment"># æ¯æœˆçš„1å·å‡Œæ™¨ä¸¤ç‚¹æ‰§è¡Œ ls å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">00 02 14 2 * <span class="built_in">ls</span> <span class="comment"># æ¯å¹´çš„2æœˆ14å·å‡Œæ™¨2ç‚¹æ‰§è¡Œ ls å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">00 02 * * 7 <span class="built_in">ls</span> <span class="comment"># æ¯å‘¨å‘¨æ—¥å‡Œæ™¨2ç‚¹æ‰§è¡Œ ls å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">00 02 * 6 5 <span class="built_in">ls</span> <span class="comment"># æ¯ä¸ª6æœˆä»½çš„å‘¨äº”å‡Œæ™¨2ç‚¹æ‰§è¡Œ ls å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">00 02 14 * 7 <span class="built_in">ls</span> <span class="comment"># æ¯ä¸ªæœˆçš„14å·æ°å·§æ˜¯å‘¨æ—¥æ—¶å‡Œæ™¨2ç‚¹æ‰§è¡Œ ls å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">00 02 14 2 7 <span class="built_in">ls</span> <span class="comment"># æ¯å¹´2æœˆ14æ—¥æ°å·§æ˜¯å‘¨æ—¥çš„å‡Œæ™¨2ç‚¹æ‰§è¡Œ ls å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">*/10 02 * * * <span class="built_in">ls</span> <span class="comment"># æ¯å¤©å‡Œæ™¨2ç‚¹å¼€å§‹æ¯éš”10åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ ls å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">* * * * * <span class="built_in">ls</span> <span class="comment"># æ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡lså‘½ä»¤</span></span><br><span class="line">*/1 * * * * <span class="built_in">ls</span> <span class="comment"># æ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡lså‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">00 00 14 2 * <span class="built_in">ls</span> <span class="comment"># æ¯ä¸ª2æœˆ14æ—¥é›¶ç‚¹æ‰§è¡Œä¸€æ¬¡ ls å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">*/5 * * * * <span class="built_in">ls</span> <span class="comment"># æ¯éš”äº”åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ ls å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">00 02 * 1,5,8 * <span class="built_in">ls</span> <span class="comment"># æ¯å¹´çš„1æœˆ5æœˆ8æœˆçš„æ¯å¤©å‡Œæ™¨2ç‚¹æ‰§è¡Œä¸€æ¬¡ ls å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">00 02 1-8 * * <span class="built_in">ls</span> <span class="comment"># æ¯ä¸ªæœˆçš„1å·åˆ°8å·çš„å‡Œæ™¨2ç‚¹æ‰§è¡Œä¸€æ¬¡ ls å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">0 21 * * * <span class="built_in">ls</span> <span class="comment"># æ¯å¤©æ™šä¸Š9ç‚¹æ‰§è¡Œä¸€æ¬¡ ls å‘½ä»¤</span></span><br><span class="line">* 21 * * * <span class="built_in">ls</span> <span class="comment"># æ¯å¤©æ™šä¸Š9ç‚¹å¼€å§‹æ¯ä¸€åˆ†é’Ÿéƒ½æ‰§è¡Œä¸€æ¬¡ ls å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">45 4 1,10,22 * * <span class="built_in">ls</span> <span class="comment"># æ¯ä¸ªæœˆçš„1å· 10å· 22å·çš„å‡Œæ™¨4ç‚¹45åˆ†æ‰§è¡Œä¸€æ¬¡ ls å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">45 4 1-10 * * <span class="built_in">ls</span> <span class="comment"># æ¯ä¸ªæœˆçš„1å·åˆ°10å·çš„å‡Œæ™¨4ç‚¹45åˆ†æ‰§è¡Œä¸€æ¬¡ ls å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">3,15 8-11 */2 * * <span class="built_in">ls</span> <span class="comment"># æ¯éš”ä¸¤å¤©çš„8ç‚¹03 8ç‚¹15 ... 11ç‚¹03 11ç‚¹15æ‰§è¡Œä¸€æ¬¡ ls å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">0 23-7/1 * * * <span class="built_in">ls</span> <span class="comment"># æ¯å¤©çš„0ç‚¹åˆ°7ç‚¹å’Œ23ç‚¹åˆ°0ç‚¹æ•´æ‰§è¡Œä¸€æ¬¡ ls å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">15 21 * * 1-5 <span class="built_in">ls</span> <span class="comment"># æ¯å‘¨ä¸€åˆ°å‘¨äº”æ™šä¸Š9ç‚¹15åˆ†æ‰§è¡Œä¸€æ¬¡ ls å‘½ä»¤</span></span><br></pre></td></tr></table></figure><h4 id="2-crontabå‘½ä»¤é€‰é¡¹">2.crontabå‘½ä»¤é€‰é¡¹</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">-eï¼šedit ç¼–è¾‘</span><br><span class="line">-lï¼šæŸ¥çœ‹å½“å‰ç™»å½•ç”¨æˆ·éƒ½æœ‰å“ªäº›å®šæ—¶ä»»åŠ¡</span><br><span class="line">-uï¼šæŒ‡å®šç”¨æˆ·æŸ¥çœ‹å®šæ—¶ä»»åŠ¡</span><br><span class="line">-rï¼šæ¸…ç©ºæ‰€æœ‰å®šæ—¶ä»»åŠ¡</span><br><span class="line"><span class="comment">## æ¯åˆ†é’Ÿï¼ŒåŒæ­¥ä¸€ä¸‹ç³»ç»Ÿæ—¶é—´</span></span><br><span class="line">[root@localhost ~]# crontab -e</span><br><span class="line"><span class="comment"># By: zls Date: 2024-05-06 Name: sync system time</span></span><br><span class="line">* * * * * /usr/sbin/ntpdate ntp1.aliyun.com &amp;&gt;/dev/null</span><br><span class="line"><span class="comment"># æ³¨æ„ï¼š</span></span><br><span class="line">1ï¼‰å‘½ä»¤ç»å¯¹è·¯å¾„</span><br><span class="line">2ï¼‰è¾“å‡ºå®šå‘åˆ°ç©º</span><br><span class="line">3ï¼‰å®šæ—¶ä»»åŠ¡åŠ æ³¨é‡Š</span><br><span class="line"><span class="comment">## æ¯å¤©åšå¤‡ä»½ï¼Œå°†/etcç›®å½•æ‰“åŒ…ä¸ºï¼š2024-05-06_hostname_etc.tar.gz</span></span><br><span class="line">[root@web01 /]# <span class="built_in">cd</span> / &amp;&amp; tar zcf /tmp/$(<span class="built_in">date</span> +%F)_$(hostname -s)_etc.tar.gz etc</span><br><span class="line">[root@web01 ~]# vi /opt/backup.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="built_in">cd</span> / &amp;&amp; tar zcf /tmp/$(<span class="built_in">date</span> +%F)_$(hostname -s)_etc.tar.gz etc</span><br><span class="line"></span><br><span class="line"><span class="comment">#å®æ—¶æŸ¥çœ‹å®šæ—¶ä»»åŠ¡æ‰§è¡Œç»“æœ</span></span><br><span class="line">[root@lb01 ~]# <span class="built_in">tail</span> -f /var/log/cron</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ—¶é—´æ ¼å¼åŒ–è¾“å‡ºï¼š</span></span><br><span class="line"></span><br><span class="line">[root@localhost ~]# <span class="built_in">date</span> +%F-%H:%M:%S</span><br><span class="line">2024-05-13-17:35:25</span><br><span class="line"></span><br><span class="line">%Fï¼šå¹´æœˆæ—¥</span><br><span class="line">%Yï¼šyear å¹´</span><br><span class="line">%mï¼šmouth æœˆ</span><br><span class="line">%dï¼šday æ—¥</span><br><span class="line">%Hï¼šhouræ—¶</span><br><span class="line">%Mï¼šminuteåˆ†</span><br><span class="line">%Sï¼šsecondsç§’</span><br><span class="line">%A:æ˜ŸæœŸ</span><br><span class="line">%wï¼šæ˜ŸæœŸï¼ˆé˜¿æ‹‰ä¼¯æ•°å­—æ˜¾ç¤ºï¼‰</span><br></pre></td></tr></table></figure><h4 id="3-crontabæ³¨æ„äº‹é¡¹">3.crontabæ³¨æ„äº‹é¡¹</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1) ç»™å®šæ—¶ä»»åŠ¡æ³¨é‡Š</span><br><span class="line">2) å°†éœ€è¦å®šæœŸæ‰§è¡Œçš„ä»»åŠ¡å†™å…¥Shellè„šæœ¬ä¸­ï¼Œé¿å…ç›´æ¥ä½¿ç”¨å‘½ä»¤æ— æ³•æ‰§è¡Œçš„æƒ…å†µtar <span class="built_in">date</span></span><br><span class="line">3) å®šæ—¶ä»»åŠ¡çš„ç»“å°¾ä¸€å®šè¦æœ‰&amp;&gt;/dev/nullæˆ–è€…å°†ç»“æœè¿½åŠ é‡å®šå‘&gt;&gt;/tmp/date.logæ–‡ä»¶</span><br><span class="line">4) æ³¨æ„æœ‰äº›å‘½ä»¤æ˜¯æ— æ³•æˆåŠŸæ‰§è¡Œçš„ <span class="built_in">echo</span> <span class="string">&quot;123&quot;</span> &gt;&gt;/tmp/test.log &amp;&gt;/dev/null</span><br><span class="line">5.å¦‚æœä¸€å®šè¦æ˜¯ç”¨å‘½ä»¤ï¼Œå‘½ä»¤å¿…é¡»ä½¿ç”¨ç»å¯¹è·¯å¾„</span><br></pre></td></tr></table></figure><h4 id="4-å®šæ—¶ä»»åŠ¡â€”åšå¤‡ä»½">4.å®šæ—¶ä»»åŠ¡â€”åšå¤‡ä»½</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@web01 ~]# ll /var/spool/cron/</span><br><span class="line">total 8</span><br><span class="line">-rw------- 1 root root 165 May 6 11:32 root</span><br><span class="line">-rw------- 1 zls zls 27 May 6 2024 zls</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ‹’ç»ç”¨æˆ·ä½¿ç”¨å®šæ—¶ä»»åŠ¡</span></span><br><span class="line">[root@web01 ~]# <span class="built_in">echo</span> <span class="string">&#x27;username&#x27;</span> &gt; /etc/cron.deny</span><br></pre></td></tr></table></figure><h4 id="5-è®¡åˆ’ä»»åŠ¡è°ƒè¯•æ€è·¯">5.è®¡åˆ’ä»»åŠ¡è°ƒè¯•æ€è·¯</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">1.crondè°ƒè¯•</span><br><span class="line">1) è°ƒæ•´ä»»åŠ¡æ¯åˆ†é’Ÿæ‰§è¡Œçš„é¢‘ç‡, ä»¥ä¾¿åšåç»­çš„è°ƒè¯•ã€‚</span><br><span class="line">2) å¦‚æœä½¿ç”¨cronè¿è¡Œè„šæœ¬ï¼Œè¯·å°†è„šæœ¬æ‰§è¡Œçš„ç»“æœå†™å…¥æŒ‡å®šæ—¥å¿—æ–‡ä»¶, è§‚å¯Ÿæ—¥å¿—å†…å®¹æ˜¯å¦æ­£å¸¸ã€‚</span><br><span class="line">3) å‘½ä»¤ä½¿ç”¨ç»å¯¹è·¯å¾„, é˜²æ­¢æ— æ³•æ‰¾åˆ°å‘½ä»¤å¯¼è‡´å®šæ—¶ä»»åŠ¡æ‰§è¡Œäº§ç”Ÿæ•…éšœã€‚</span><br><span class="line">4) é€šè¿‡æŸ¥çœ‹/var/log/cronæ—¥å¿—ï¼Œä»¥ä¾¿æ£€æŸ¥æˆ‘ä»¬æ‰§è¡Œçš„ç»“æœï¼Œæ–¹ä¾¿è¿›è¡Œè°ƒè¯•ã€‚</span><br><span class="line">2.crondç¼–å†™æ€è·¯</span><br><span class="line">1.æ‰‹åŠ¨æ‰§è¡Œå‘½ä»¤ï¼Œç„¶åä¿ç•™æ‰§è¡ŒæˆåŠŸçš„ç»“æœã€‚</span><br><span class="line">2.ç¼–å†™è„šæœ¬</span><br><span class="line">è„šæœ¬éœ€è¦ç»Ÿä¸€è·¯å¾„/scripts</span><br><span class="line">è„šæœ¬å†…å®¹å¤åˆ¶æ‰§è¡ŒæˆåŠŸçš„å‘½ä»¤(å‡å°‘æ¯ä¸ªç¯èŠ‚å‡ºé”™å‡ ç‡)</span><br><span class="line">è„šæœ¬å†…å®¹å°½å¯èƒ½çš„ä¼˜åŒ–, ä½¿ç”¨ä¸€äº›å˜é‡æˆ–ä½¿ç”¨ç®€å•çš„åˆ¤æ–­è¯­å¥</span><br><span class="line">è„šæœ¬æ‰§è¡Œçš„è¾“å‡ºä¿¡æ¯å¯ä»¥é‡å®šå‘è‡³å…¶ä»–ä½ç½®ä¿ç•™æˆ–å†™å…¥/dev/null</span><br><span class="line">3.æ‰§è¡Œè„šæœ¬</span><br><span class="line">ä½¿ç”¨bashå‘½ä»¤æ‰§è¡Œ, é˜²æ­¢è„šæœ¬æ²¡æœ‰å¢åŠ æ‰§è¡Œæƒé™(/usr/bin/bash)</span><br><span class="line">æ‰§è¡Œè„šæœ¬æˆåŠŸåï¼Œå¤åˆ¶è¯¥æ‰§è¡Œçš„å‘½ä»¤ï¼Œä»¥ä¾¿å†™å…¥cron</span><br><span class="line">4.ç¼–å†™è®¡åˆ’ä»»åŠ¡</span><br><span class="line">åŠ ä¸Šå¿…è¦çš„æ³¨é‡Šä¿¡æ¯, äººã€æ—¶é—´ã€ä»»åŠ¡</span><br><span class="line">è®¾å®šè®¡åˆ’ä»»åŠ¡æ‰§è¡Œçš„å‘¨æœŸ</span><br><span class="line">ç²˜è´´æ‰§è¡Œè„šæœ¬çš„å‘½ä»¤(ä¸è¦æ‰‹æ•²)</span><br><span class="line">5.è°ƒè¯•è®¡åˆ’ä»»åŠ¡</span><br><span class="line">å¢åŠ ä»»åŠ¡é¢‘ç‡æµ‹è¯•</span><br><span class="line">æ£€æŸ¥ç¯å¢ƒå˜é‡é—®é¢˜</span><br><span class="line">æ£€æŸ¥crondæœåŠ¡æ—¥å¿—</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="6-ä½¿ç”¨å®šæ—¶ä»»åŠ¡å‘é‚®ä»¶">6.ä½¿ç”¨å®šæ—¶ä»»åŠ¡å‘é‚®ä»¶</h4><p><strong>é…ç½®é‚®ç®±</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.å®‰è£…å‘é€é‚®ä»¶çš„å·¥å…·</span></span><br><span class="line"></span><br><span class="line">[root@web01 ~]# yum install -y mailx</span><br><span class="line"><span class="comment"># 2.é…ç½®é‚®ç®±</span></span><br><span class="line">[root@web01 ~]# vi /etc/mail.rc</span><br><span class="line"><span class="built_in">set</span> from=é‚®ç®±<span class="comment">#å‘ä»¶äºº</span></span><br><span class="line"><span class="built_in">set</span> smtp=smtps://smtp.qq.com:465    <span class="comment">#é‚®ç®±åè®®ï¼Œç«¯å£</span></span><br><span class="line"><span class="built_in">set</span> smtp-auth-user=é‚®ç®± <span class="comment">#ç™»å½•é‚®ç®±è´¦å·</span></span><br><span class="line"><span class="built_in">set</span> smtp-auth-password=å®¢æˆ·ç«¯æˆæƒç    <span class="comment">#é‚®ç®±æˆæƒç </span></span><br><span class="line"><span class="built_in">set</span> smtp-auth=login</span><br><span class="line"><span class="built_in">set</span> ssl-verify=ignore</span><br><span class="line"><span class="built_in">set</span> nss-config-dir=/etc/pki/nssdb/</span><br></pre></td></tr></table></figure><p><strong>é‚®ç®±ç”Ÿæˆæˆæƒç </strong></p><p><img src="https://cos.lukme.top/Pic/image-20240506170025656.png" alt="image-20240506170025656"></p><p><strong>å‘é‚®ä»¶</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@web01 ~]# <span class="built_in">echo</span> <span class="string">&#x27;é‚®ä»¶å†…å®¹&#x27;</span> |mail -s <span class="string">&#x27;é‚®ä»¶æ ‡é¢˜&#x27;</span> 3078155561@qq.com</span><br><span class="line">[root@web01 ~]# <span class="built_in">cat</span> /etc/passwd|mail -s <span class="string">&#x27;test&#x27;</span> 3078155561@qq.com</span><br><span class="line"><span class="built_in">cat</span> /root/backup.log.txt|mail -s <span class="string">&#x27;å¤‡ä»½æ–‡ä»¶&#x27;</span> 3078155561@qq.com</span><br></pre></td></tr></table></figure><h4 id="7-å®šæ—¶ä»»åŠ¡å®ä¾‹">7.å®šæ—¶ä»»åŠ¡å®ä¾‹</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">éœ€æ±‚ï¼šå°†å¤‡ä»½å‘½ä»¤å†™å…¥ä¸€ä¸ªè„šæœ¬ä¸­ </span><br><span class="line">1.æ¯å¤©å¤‡ä»½æ–‡ä»¶åè¦æ±‚æ ¼å¼ï¼š2018-0220_hostname_etc.tar.gz </span><br><span class="line">2.å­˜æ”¾å¤‡ä»½å†…å®¹çš„ç›®å½•è¦æ±‚åªä¿ç•™3å¤©çš„æ•°æ® </span><br><span class="line">3.åœ¨æ‰§è¡Œè®¡åˆ’ä»»åŠ¡æ—¶ï¼Œä¸è¦è¾“å‡ºä»»åŠ¡ä¿¡æ¯ </span><br><span class="line">4.å¤‡ä»½æ˜¯å¦æˆåŠŸç»“æœï¼Œå‘é€é‚®ä»¶ </span><br><span class="line"><span class="comment">## é‚®ä»¶å†…å®¹ï¼š</span></span><br><span class="line">å¤‡ä»½æ—¶é—´ï¼šç²¾ç¡®åˆ°ç§’</span><br><span class="line">å¤‡ä»½æ–‡ä»¶åï¼š2024-05-06_web01_etc.tar.gz </span><br><span class="line">å¤‡ä»½è·¯å¾„ï¼š/tmp </span><br><span class="line">æ˜¯å¦æˆåŠŸï¼š</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">vim backup.sh</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment">#æ‰¾åˆ°æœ€è¿‘ä¸‰å¤©æ–‡ä»¶å¹¶æ‰“åŒ…</span></span><br><span class="line">find /etc/* -<span class="built_in">type</span> d -mtime -3|xargs tar zcf /tmp/$(<span class="built_in">date</span> +%F)_$(hostname -s)_etc.tar.gz</span><br><span class="line"><span class="comment">#echo &#x27;Backup Success!!!!&#x27;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;å¤‡ä»½æ—¶é—´ï¼š<span class="subst">$(date +%Y/%m/%d\ %H:%M:%S)</span>&quot;</span> &gt;&gt;backuplog.txt</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;å¤‡ä»½æ–‡ä»¶åï¼š<span class="subst">$(date +%F)</span>_<span class="subst">$(hostname -s)</span>_etc.tar.gz&quot;</span> &gt;&gt;backuplog.txt</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;å¤‡ä»½è·¯å¾„ï¼š/tmp&quot;</span> &gt;&gt;backuplog.txt</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;æ˜¯å¦å¤‡ä»½æˆåŠŸï¼šæ˜¯&quot;</span> &gt;&gt;backuplog.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ›å»ºå®šæ—¶ä»»åŠ¡å¹¶å‘é‚®ä»¶</span></span><br><span class="line">[root@lb01 ~]# crontab -e</span><br><span class="line"><span class="comment"># By: lgj Date: 2024-05-06 Name:Backup</span></span><br><span class="line"></span><br><span class="line">0 23 * * * /usr/bin/sh backup.sh  &amp;&gt;/dev/null</span><br><span class="line">0 00 * * * /usr/bin/cat /root/backup.log.txt|mail -s <span class="string">&#x27;å¤‡ä»½æ–‡ä»¶&#x27;</span> 3078155561@qq.com</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">éœ€æ±‚ï¼šå°†å¤‡ä»½å‘½ä»¤å†™å…¥ä¸€ä¸ªè„šæœ¬ä¸­</span><br><span class="line">ä»»åŠ¡ï¼š</span><br><span class="line">1.æ¯å¤©å¤‡ä»½æ–‡ä»¶åè¦æ±‚æ ¼å¼ï¼š2018-02-20_hostname_etc.tar.gz</span><br><span class="line">2.å­˜æ”¾å¤‡ä»½å†…å®¹çš„ç›®å½•è¦æ±‚åªä¿ç•™3å¤©çš„æ•°æ®</span><br><span class="line">3.åœ¨æ‰§è¡Œè®¡åˆ’ä»»åŠ¡æ—¶ï¼Œä¸è¦è¾“å‡ºä»»åŠ¡ä¿¡æ¯</span><br><span class="line">4.å¤‡ä»½æ˜¯å¦æˆåŠŸç»“æœï¼Œå‘é€é‚®ä»¶</span><br><span class="line"><span class="comment">## é‚®ä»¶å†…å®¹ï¼š</span></span><br><span class="line">å¤‡ä»½æ–‡ä»¶åï¼š2024-05-06_web01_etc.tar.gz</span><br><span class="line">å¤‡ä»½è·¯å¾„ï¼š/tmp</span><br><span class="line">æ˜¯å¦æˆåŠŸï¼š</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> / &amp;&amp; tar zcf $(<span class="built_in">date</span> +%F)_$(hostname -s)_etc.tar.gz</span><br><span class="line"></span><br><span class="line">find /etc/* -<span class="built_in">type</span> d -mtime -3</span><br><span class="line"></span><br><span class="line">tar zcf /tmp/$(<span class="built_in">date</span> +%F)_$(hostname -s)_etc.tar.gz /etc/*</span><br><span class="line"></span><br><span class="line">find /etc/* -<span class="built_in">type</span> d -mtime -3|xargs tar zcf /tmp/$(<span class="built_in">date</span> +%F)_$(hostname -s)_etc.tar.gz</span><br></pre></td></tr></table></figure><h3 id="7-ä¿®æ”¹ç½‘å¡å">7.ä¿®æ”¹ç½‘å¡å</h3><p><img src="https://cos.lukme.top/Pic/image-20240501114139869.png" alt="image-20240501114139869"></p><p><img src="https://cos.lukme.top/Pic/image-20240501114157577.png" alt="image-20240501114157577"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">biosdevname=0 net.ifnames=0</span><br><span class="line">net.ifnames=0<span class="comment">#ä¸æ˜¯dellç‰©ç†æœºç¯å¢ƒ</span></span><br></pre></td></tr></table></figure><h2 id="ã€9ã€‘ä¸‰å‰‘å®¢">ã€9ã€‘ä¸‰å‰‘å®¢</h2><h3 id="æ­£åˆ™è¡¨è¾¾å¼">æ­£åˆ™è¡¨è¾¾å¼</h3><h4 id="1-æ­£åˆ™ç¬¦å·">1. æ­£åˆ™ç¬¦å·</h4><table><thead><tr><th>åˆ†ç±»</th><th></th></tr></thead><tbody><tr><td>åŸºç¡€æ­£åˆ™  Basic RE (BRE)</td><td>^   $   ^$  .   *  .*   [a-z]   [^abc  ]</td></tr><tr><td>æ‰©å±•æ­£åˆ™ Extended RE (ERE)</td><td>+   |    ()     ?</td></tr></tbody></table><h4 id="æ‰©å±•æ­£åˆ™">æ‰©å±•æ­£åˆ™</h4><table><thead><tr><th>ç¬¦å·</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>+</td><td>å‰ä¸€ä¸ªå­—è¿ç»­å‡ºç°1æ¬¡æˆ–è€…1æ¬¡ä»¥ä¸Š</td></tr><tr><td>|</td><td>è¡¨ç¤ºæˆ–è€…</td></tr><tr><td>()</td><td>ï¼ˆï¼‰é‡Œé¢çš„å†…å®¹å¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªæ•´ä½“</td></tr><tr><td>{}</td><td>æŒ‡å®šå‡ºç°çš„æ¬¡æ•°</td></tr><tr><td>ï¼Ÿ</td><td>å‰ä¸€ä¸ªå­—ç¬¦å‡ºç°äº†0æ¬¡æˆ–1æ¬¡</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[a-z]+   åŒ¹é…è¿ç»­å‡ºç°çš„å•è¯ï¼Œè´ªå©ªåŒ¹é…</span><br><span class="line">[0-9]+   åŒ¹é…è¿ç»­å‡ºç°çš„æ•°å­—ï¼Œè´ªå©ªåŒ¹é…</span><br><span class="line"><span class="comment">#ï¼ˆï¼‰</span></span><br><span class="line">è¿‡æ»¤å‡ºoldboyæˆ–è€…oldbey</span><br><span class="line">[root@lb01 ~s]#egrep <span class="string">&#x27;oldb(o|e)y&#x27;</span> oldboy.txt</span><br><span class="line">[root@lb01 ~s]#egrep <span class="string">&#x27;oldb[oe]y&#x27;</span> oldboy.txt</span><br><span class="line"><span class="comment">#&#123;&#125;</span></span><br><span class="line">0&#123;m,n&#125;  0è‡³å°‘å‡ºç°mæ¬¡ï¼Œè‡³å¤šå‡ºç°næ¬¡ </span><br><span class="line">0&#123;3&#125;0å‡ºç°äº†3æ¬¡</span><br><span class="line">0&#123;m,&#125;0è‡³å°‘å‡ºç°mæ¬¡ï¼Œæœ€å¤šå‡ºç°æ¬¡æ•°ä¸é™</span><br><span class="line">0&#123;,n&#125;0è‡³å¤šå‡ºç°næ¬¡ï¼Œæœ€å°‘å‡ºç°æ¬¡æ•°ä¸é™</span><br><span class="line"><span class="comment">#?</span></span><br><span class="line">[root@lb01 ~s]#egrep <span class="string">&#x27;go?d&#x27;</span> oldboy.txt</span><br><span class="line">god</span><br><span class="line">gd</span><br></pre></td></tr></table></figure><h4 id="2-æ­£åˆ™-é€šé…ç¬¦">2.æ­£åˆ™&amp;é€šé…ç¬¦</h4><table><thead><tr><th>åˆ†ç±»</th><th>ç”¨é€”</th><th>æ”¯æŒçš„å‘½ä»¤</th></tr></thead><tbody><tr><td>æ­£åˆ™(re)</td><td>ä¸‰å‰‘å®¢ï¼Œé«˜çº§è¯­è¨€ï¼Œè¿›è¡Œè¿‡æ»¤ï¼ˆåŒ¹é…å­—ç¬¦ï¼‰</td><td>ä¸‰å‰‘å®¢grep sedï¼Œawkï¼Œfindï¼Œrenameï¼Œexpr</td></tr><tr><td>é€šé…ç¬¦(pathname extension æˆ– glob)</td><td>åŒ¹é…æ–‡ä»¶/æ–‡ä»¶å   *.txt</td><td>linuxä¸‹å¤§éƒ¨åˆ†éƒ½æ”¯æŒ</td></tr></tbody></table><h3 id="ä¸‰å‰‘å®¢">ä¸‰å‰‘å®¢</h3><table><thead><tr><th>å‘½ä»¤</th><th>ç‰¹ç‚¹</th><th>åœºæ™¯</th></tr></thead><tbody><tr><td>grep</td><td>è¿‡æ»¤</td><td>grepå‘½ä»¤è¿‡æ»¤é€Ÿåº¦æ˜¯æœ€å¿«çš„</td></tr><tr><td>sed</td><td>æ›¿æ¢ï¼Œä¿®æ”¹æ–‡ä»¶å†…å®¹ï¼Œå–è¡Œ</td><td>å¦‚æœè¦è¿›è¡Œæ›¿æ¢/ä¿®æ”¹æ–‡ä»¶å†…å®¹å–<br />å–å‡ºæŸä¸ªèŒƒå›´çš„å†…å®¹(ä»æ—©ä¸Š10:00åˆ°11:00)</td></tr><tr><td>awk</td><td>å–åˆ—ï¼Œç»Ÿè®¡</td><td>å–åˆ—ï¼Œå¯¹æ¯”ï¼Œæ¯”è¾ƒ<br />ç»Ÿè®¡ï¼Œè®¡ç®—</td></tr></tbody></table><h4 id="grepä¸“åŒº">grepä¸“åŒº</h4><table><thead><tr><th>é€‰é¡¹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>-n</td><td>æ˜¾ç¤ºè¡Œå·</td></tr><tr><td>-A</td><td>After è¿‡æ»¤å…³é”®å­—å¹¶æ‰“å°å‡ºåNè¡Œ</td></tr><tr><td>-B</td><td>Before è¿‡æ»¤å…³é”®å­—å¹¶æ‰“å°å‡ºå‰Nè¡Œ</td></tr><tr><td>-C</td><td>Center è¿‡æ»¤å…³é”®å­—å¹¶æ‰“å°å‡ºå‰åNè¡Œ</td></tr><tr><td>-v</td><td>å–å</td></tr><tr><td>-o</td><td>åªæ˜¾ç¤ºå…³é”®å­—å†…å®¹</td></tr><tr><td>-i</td><td>å¿½ç•¥å¤§å°å†™</td></tr><tr><td>-w</td><td>ç²¾ç¡®åŒ¹é…</td></tr><tr><td>-c</td><td>ç›¸å½“äºcountï¼Œç”¨äºç»Ÿè®¡è¡Œæ•°</td></tr><tr><td>-r/-R</td><td>é€’å½’æœç´¢ç›®å½•åŠç›®å½•ä¸‹å¾—æ–‡ä»¶</td></tr></tbody></table><h5 id="å­—ç¬¦">å­—ç¬¦</h5><table><thead><tr><th>å…³é”®å­—å¯ä»¥ä½¿ç”¨çš„ç¬¦å·</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>^</td><td>ä»¥â€¦å¼€å¤´    [^ abc]è¡¨ç¤ºéabcçš„å†…å®¹</td></tr><tr><td>$</td><td>ä»¥â€¦ç»“å°¾     ^$å¯ä»¥è¡¨ç¤ºç©ºè¡Œ</td></tr><tr><td>.</td><td>ä»»æ„ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td>*</td><td>*å·å‰é¢çš„å•ä¸ªå­—ç¬¦åŒ¹é…0æ¬¡æˆ–å¤šæ¬¡</td></tr><tr><td>|</td><td>æ­£åˆ™è¡¨è¾¾å¼é‡Œé¢æˆ–è€…æ„æ€ï¼Œgrepé»˜è®¤ä¸æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ï¼Œéœ€è¦ç”¨-E</td></tr><tr><td>\b</td><td>è¾¹ç•Œç¬¦  ä¾‹:\boldboy\b</td></tr><tr><td>æ³¨æ„:[]é‡Œçš„å†…å®¹ä¸€èˆ¬éƒ½ä¼šå»æ‰ç‰¹æ®Šå«ä¹‰ï¼Œåšè‡ªå·±</td><td></td></tr></tbody></table><blockquote><p>è½¬ä¹‰å­—ç¬¦  \</p><p>\n  å›è½¦æ¢è¡Œ</p><p>\t  tabé”®</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;/K.*D/ &#123;print $6&#125;&#x27;</span>  /K.*D/è¿™æ˜¯æœç´¢Aå¼€å¤´Då¼€å¤´çš„å­—ç¬¦</span><br><span class="line">å¦‚æœæœç´¢å†…å®¹é‡Œé¢å«æœ‰/ï¼Œéœ€è¦ä½¿ç”¨è½¬ä¹‰ç¬¦ï¼Œä¾‹å¦‚awk <span class="string">&#x27;/\/sbin\/nologin/ &#123;print $6&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line">grep -ré€çº§æœç´¢</span><br><span class="line">[root@lb01 ~]# grep -r <span class="string">&#x27;K.*D&#x27;</span> /root</span><br><span class="line">/root/11.txt:47 Oct 3ZL1998 LPSX 43.00 KVM9D 512</span><br><span class="line">/root/11.txt:483 may 5PA1998 USP 37.00 KVM9D 644</span><br><span class="line"></span><br><span class="line">grep -rlåªæ˜¾ç¤ºæ–‡ä»¶å</span><br><span class="line">[root@lb01 ~]# grep -rl <span class="string">&#x27;K.*D&#x27;</span> /root</span><br><span class="line">/root/anaconda-ks.cfg</span><br><span class="line">/root/11.txt</span><br></pre></td></tr></table></figure><p><strong>grepä¸“åŒº</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">KabcD  è¿‡æ»¤Kå¼€å¤´Dç»“å°¾çš„å†…å®¹  .*ä»£è¡¨ä»»æ„å­—ç¬¦</span><br><span class="line">[root@lb02 ~]# grep <span class="string">&#x27;K.*D&#x27;</span> 1.txt </span><br><span class="line"></span><br><span class="line">è¿‡æ»¤è‡³å°‘ä»¥ä¸€ä¸ªç©ºç™½å­—ç¬¦å¼€å¤´çš„è¡Œï¼Œ+ä»£è¡¨è´ªå©ªåŒ¹é…</span><br><span class="line">[root@lb02 ~]# grep -E <span class="string">&#x27;^[ ]+&#x27;</span> 1.txt</span><br><span class="line"><span class="comment"># ^&amp;å¯ä»¥è¡¨ç¤ºç©ºè¡Œ</span></span><br><span class="line"></span><br><span class="line">è¿‡æ»¤ä»¥aæˆ–è€…bå¼€å¤´çš„è¡Œ</span><br><span class="line">1.[root@lb02 ~]# grep <span class="string">&#x27;^[ab]&#x27;</span> 1.txt </span><br><span class="line">2.[root@lb02 ~]# grep -E <span class="string">&#x27;^(a|b)&#x27;</span> 1.txt    grep -E <span class="string">&#x27;^a|^b&#x27;</span> 1.txt </span><br><span class="line"></span><br><span class="line">è¿‡æ»¤a11abç±»å‹çš„å†…å®¹ï¼ˆå­—æ¯ æ•°å­— æ•°å­— å­—æ¯ å­—æ¯ï¼‰</span><br><span class="line">[root@lb02 ~]# grep -E <span class="string">&#x27;[a-z][0-9][0-9][a-z][a-z]&#x27;</span> 1.txt</span><br><span class="line">[root@lb02 ~]# grep -E <span class="string">&#x27;[a-z][0-9]&#123;2&#125;[a-z]&#123;2&#125;&#x27;</span> 1.txt &#123;2&#125;è¡¨ç¤ºå‰é¢çš„å‡ºç°äº†2æ¬¡</span><br><span class="line"></span><br><span class="line">è¿‡æ»¤ å­—æ¯å¼€å¤´ä¸”åé¢è·Ÿè‡³å°‘2ä¸ªåˆ°4ä¸ªæ•°å­—çš„å†…å®¹</span><br><span class="line">[root@lb02 ~]# grep -Eo <span class="string">&#x27;^[a-z][0-9]&#123;2,4&#125;&#x27;</span> 1.txt </span><br><span class="line">a11</span><br><span class="line">b1232</span><br><span class="line"><span class="comment">##åˆ©ç”¨æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼åˆ†åˆ«è¡¨ç¤º</span></span><br><span class="line">0-9ã€   10-99ã€      100-199ã€    200-249ã€    250-255</span><br><span class="line">[0-9]  [1-9][0-9]   1[0-9][0-9]   2[0-4][0-9]  25[0-5]</span><br><span class="line">è¿‡æ»¤éå­—æ¯å¼€å¤´çš„å†…å®¹</span><br><span class="line">[root@lb02 ~]# grep <span class="string">&#x27;^[^a-zA-Z]&#x27;</span> 1.txt</span><br></pre></td></tr></table></figure><h5 id="å’Œ-è¡¨æˆ–è€…çš„åŒºåˆ«">| å’Œ[ ]è¡¨æˆ–è€…çš„åŒºåˆ«</h5><table><thead><tr><th>ç¬¦åˆ</th><th>åŒºåˆ«</th></tr></thead><tbody><tr><td>|</td><td>1æ¬¡åŒ¹é…1ä¸ªå­—ç¬¦    [abc] ==&gt; æˆ–è€…aæˆ–è€…bæˆ–è€…c</td></tr><tr><td>[ ]</td><td>åŒ¹é…1ä¸ªæˆ–å¤šä¸ªå­—ç¬¦  a|b|c    abc|bcd</td></tr></tbody></table><h5 id="ä½¿ç”¨">( )ä½¿ç”¨</h5><ul><li>è¢«æ‹¬èµ·æ¥çš„å†…å®¹ï¼Œè¡¨ç¤ºä¸€ä¸ªæ•´ä½“ï¼ˆä¸€ä¸ªå­—ç¬¦ï¼‰</li><li>åå‘å¼•ç”¨ï¼ˆåå‘å¼•ç”¨sedï¼‰</li></ul><h4 id="sedå‘½ä»¤">sedå‘½ä»¤</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ä½œç”¨:</span><br><span class="line">1.æ¨¡ç³Šè¿‡æ»¤æ–‡ä»¶çš„å†…å®¹</span><br><span class="line">2.æŸ¥æ‰¾æŒ‡å®šçš„è¡Œ</span><br><span class="line">3.å¯¹æ–‡ä»¶è¿›è¡Œå¢åˆ æ”¹æŸ¥</span><br><span class="line">4.æ›¿æ¢</span><br><span class="line">5.æ ¼å¼åŒ–è¾“å‡ºå†…å®¹,åå‘å¼•ç”¨</span><br><span class="line">sed è¯­æ³•æ ¼å¼:</span><br><span class="line">grep <span class="string">&#x27;è¿‡æ»¤å†…å®¹&#x27;</span> æ–‡ä»¶</span><br><span class="line">sed <span class="string">&#x27;/è¿‡æ»¤å†…å®¹/&#x27;</span> æ–‡ä»¶</span><br><span class="line">sed <span class="string">&#x27;æ¨¡å¼ åŠ¨ä½œ&#x27;</span> æ–‡ä»¶</span><br><span class="line">sed <span class="string">&#x27;æ‰¾è° å¹²å•¥&#x27;</span> æ–‡ä»¶</span><br></pre></td></tr></table></figure><table><thead><tr><th>åŠŸèƒ½</th><th></th></tr></thead><tbody><tr><td>s</td><td>æ›¿æ¢substitute</td></tr><tr><td>p</td><td>æ˜¾ç¤ºprint</td></tr><tr><td>d</td><td>åˆ é™¤delete</td></tr><tr><td>cai</td><td>å¢åŠ c/a/i</td></tr></tbody></table><h5 id="sed-æŸ¥æ‰¾p">sed-æŸ¥æ‰¾p</h5><table><thead><tr><th>â€˜2pâ€™</th><th>æŒ‡å®šè¡Œå·è¿›è¡ŒæŸ¥æ‰¾</th></tr></thead><tbody><tr><td>â€˜1,5pâ€™</td><td>æŒ‡å®šè¡Œå·èŒƒå›´æŸ¥æ‰¾</td></tr><tr><td>â€˜/oldboy/pâ€™</td><td>ç±»ä¼¼äºgrepè¿‡æ»¤ï¼Œ//é‡Œé¢å¯ä»¥å†™æ­£åˆ™</td></tr><tr><td>â€˜/10:00/,/11:00/pâ€™</td><td>è¡¨ç¤ºèŒƒå›´çš„è¿‡æ»¤</td></tr></tbody></table><p><strong>==æŸ¥æ‰¾æ˜¾ç¤º==</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">è¯­æ³•æ ¼å¼ï¼š</span><br><span class="line">sed -n <span class="string">&#x27;3p&#x27;</span> æ–‡ä»¶ <span class="comment"># print æ‰“å°è¾“å‡º</span></span><br><span class="line"><span class="built_in">cat</span> æ–‡ä»¶|sed -n <span class="string">&#x27;3p&#x27;</span></span><br><span class="line">[root@db01 ~]# <span class="built_in">head</span> -5 /etc/passwd &gt; test.txt</span><br><span class="line">[root@db01 ~]# sed -n <span class="string">&#x27;3p&#x27;</span> test.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ˜¾ç¤ºæ–‡ä»¶çš„æœ€åä¸€è¡Œ:</span></span><br><span class="line">[root@db01 ~]# sed -n <span class="string">&#x27;$p&#x27;</span> test.txt</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"></span><br><span class="line"><span class="comment">#è¿‡æ»¤æ–‡ä»¶çš„2-4è¡Œ</span></span><br><span class="line">[root@db01 ~]# sed -n <span class="string">&#x27;2,4p&#x27;</span> test.txt</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ˜¾ç¤ºæ–‡ä»¶çš„ç¬¬2è¡Œåˆ°æœ€åä¸€è¡Œ</span></span><br><span class="line">[root@db01 ~]# sed -n <span class="string">&#x27;2,$p&#x27;</span> test.txt</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¤„ç†å±å¹•ä¸Šæ˜¾ç¤ºçš„å†…å®¹</span></span><br><span class="line">[root@db01 ~]# ifconfig eth0|sed -n <span class="string">&#x27;2p&#x27;</span></span><br><span class="line">inet 10.0.0.200 netmask 255.255.255.0 broadcast 10.0.0.255</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>==è¿‡æ»¤==</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">è¯­æ³•ç»“æ„: sed -n <span class="string">&#x27;/è¿‡æ»¤çš„å†…å®¹/p&#x27;</span> file</span><br><span class="line">[root@db01 ~]# sed -n <span class="string">&#x27;/root/p&#x27;</span> test.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line"></span><br><span class="line">ä½¿ç”¨æ­£åˆ™:</span><br><span class="line">[root@db01 ~]# sed -n <span class="string">&#x27;/^r/p&#x27;</span> test.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line"></span><br><span class="line">è¿‡æ»¤ä»¥aæˆ–bæˆ–cå¼€å¤´çš„è¡Œ</span><br><span class="line">[root@db01 ~]# sed -n <span class="string">&#x27;/^[a-c]/p&#x27;</span> test.txt</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line"></span><br><span class="line">è¿‡æ»¤ä»¥ä»€ä¹ˆç»“å°¾çš„è¡Œ</span><br><span class="line">[root@db01 ~]# sed -n <span class="string">&#x27;/h$/p&#x27;</span> test.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# sed -n <span class="string">&#x27;/n$/p&#x27;</span> test.txt</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"></span><br><span class="line">è¿‡æ»¤åŒºé—´èŒƒå›´:</span><br><span class="line">sed -n <span class="string">&#x27;//,//p&#x27;</span> æ–‡ä»¶</span><br><span class="line">sed -n <span class="string">&#x27;2,4p&#x27;</span> æ–‡ä»¶</span><br><span class="line">è¿‡æ»¤å­—ç¬¦ä¸²åŒºé—´èŒƒå›´:</span><br><span class="line">[root@db01 ~]# sed -n <span class="string">&#x27;/^bin/,/^a/p&#x27;</span> test.txt</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line"></span><br><span class="line">æ¡ˆä¾‹: è¿‡æ»¤æ—¶é—´ ç»Ÿè®¡ä¸Šåˆ8ç‚¹åˆ°ä¸­åˆ12ç‚¹ä¸­é—´æ•°æ®</span><br><span class="line">[root@linuxnc ~]# sed -n <span class="string">&#x27;/2024:08:00:15/,/2024:09:30:42/p&#x27;</span> /var/log/nginx/access.log</span><br><span class="line"></span><br><span class="line">æ³¨æ„åŒ¹é…æ–¹å¼:</span><br><span class="line">[root@db01 ~]# <span class="built_in">cat</span> a.txt</span><br><span class="line">aaa</span><br><span class="line">bbb</span><br><span class="line">ccc</span><br><span class="line">bbb</span><br><span class="line">uuu</span><br><span class="line">ddd</span><br><span class="line">eee</span><br><span class="line">fff</span><br><span class="line">ddd</span><br><span class="line">xxx</span><br><span class="line">[root@db01 ~]# sed -n <span class="string">&#x27;/bbb/,/ddd/p&#x27;</span> a.txt</span><br><span class="line">bbb</span><br><span class="line">ccc</span><br><span class="line">bbb</span><br><span class="line">uuu</span><br><span class="line">ddd</span><br></pre></td></tr></table></figure><h5 id="sed-åˆ é™¤d">sed-åˆ é™¤d</h5><table><thead><tr><th>â€˜1,5dâ€™</th><th>æŒ‡å®šè¡Œå·èŒƒå›´æŸ¥æ‰¾</th></tr></thead><tbody><tr><td>â€˜/oldboy/dâ€™</td><td>ç±»ä¼¼äºgrepè¿‡æ»¤ï¼Œ//é‡Œé¢å¯ä»¥å†™æ­£åˆ™</td></tr><tr><td>â€˜2dâ€™</td><td>æŒ‡å®šè¡Œå·è¿›è¡ŒæŸ¥æ‰¾</td></tr><tr><td>â€˜/10:00/,/11:00/dâ€™</td><td>è¡¨ç¤ºèŒƒå›´çš„è¿‡æ»¤</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">æŒ‡å®šè¡Œåˆ é™¤:</span><br><span class="line">è¯­æ³•æ ¼å¼: sed <span class="string">&#x27;3d&#x27;</span> file <span class="comment"># é»˜è®¤ä¸ä¼šä¿®æ”¹æºæ–‡ä»¶</span></span><br><span class="line">ä¿®æ”¹æºæ–‡ä»¶ sed -i <span class="string">&#x27;3d&#x27;</span> file</span><br><span class="line"></span><br><span class="line">æ¡ˆä¾‹1.åˆ é™¤æ–‡ä»¶çš„ç¬¬3è¡Œ</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;3d&#x27;</span> test.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"></span><br><span class="line">æ¡ˆä¾‹2.åˆ é™¤2åˆ°4è¡Œ</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;2,4d&#x27;</span> test.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line"></span><br><span class="line">æ¡ˆä¾‹3.åˆ é™¤2åˆ°æœ€åä¸€è¡Œ</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;2,$d&#x27;</span> test.txt</span><br><span class="line"></span><br><span class="line">æ¨¡ç³Šè¿‡æ»¤å†…å®¹ï¼Œç„¶ååˆ é™¤</span><br><span class="line">è¯­æ³•ç»“æ„: sed <span class="string">&#x27;/å­—ç¬¦ä¸²/d&#x27;</span> file</span><br><span class="line">åˆ é™¤åŒ…å«rootçš„è¡Œ</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;/root/d&#x27;</span> test.txt</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"></span><br><span class="line">åˆ é™¤bå¼€å¤´çš„è¡Œ</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;/^b/d&#x27;</span> test.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"></span><br><span class="line">-r æ”¯æŒæ‰©å±•æ­£åˆ™ |æˆ–è€…çš„æ„æ€</span><br><span class="line">[root@db01 ~]# sed -rn <span class="string">&#x27;/^bin|^p/p&#x27;</span> test.txt</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">p:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"></span><br><span class="line">åˆ é™¤binå¼€å¤´æˆ–è€…lpå¼€å¤´çš„è¡Œ</span><br><span class="line">[root@db01 ~]# sed -r <span class="string">&#x27;/^bin|^lp/d&#x27;</span> test.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line"></span><br><span class="line">åŒ¹é…åŒºé—´èŒƒå›´è¿›è¡Œåˆ é™¤:</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;/^bin/,/^adm/d&#x27;</span> test.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"></span><br><span class="line"><span class="comment"># !å¦™ç”¨</span></span><br><span class="line">sed -nr <span class="string">&#x27;/^&amp;|#/!p&#x27;</span> /etc/ssh/sshd_config   é‡åˆ°ç©ºè¡Œå’Œ#è¡Œä¸æ˜¾ç¤º</span><br></pre></td></tr></table></figure><h5 id="sed-å¢åŠ ">sed-å¢åŠ </h5><table><thead><tr><th>åŠŸèƒ½</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>c</td><td>replaceæ›¿ä»£è¿™ä¸€è¡Œ</td></tr><tr><td>a</td><td>appendè¿½åŠ ï¼Œå‘æŒ‡å®šçš„è¡Œæˆ–æ¯ä¸€è¡Œæ’å…¥å†…å®¹ï¼ˆè¡Œåï¼‰</td></tr><tr><td>i</td><td>insertæ’å…¥ï¼Œå‘æŒ‡å®šçš„è¡Œæˆ–æ¯ä¸€è¡Œæ’å…¥å†…å®¹ï¼ˆè¡Œå‰ï¼‰</td></tr><tr><td>w</td><td>å°†æ‰¾åˆ°çš„å†…å®¹ä¿å­˜åˆ°æ–°æ–‡ä»¶å†…</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">&#x27;3a root&#x27;</span> /text.txt    <span class="comment">#å‘ç¬¬ä¸‰è¡Œåé¢è¿½åŠ rootè¿™ä¸€è¡Œ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å‘æ–‡ä»¶æœ€åä¸€è¡Œä¸­è¿½å†…å®¹</span></span><br><span class="line">1.</span><br><span class="line"><span class="built_in">cat</span> &gt;&gt;test.txt&lt;&lt;<span class="string">&#x27;EOF&#x27;</span></span><br><span class="line">abc</span><br><span class="line">cdf</span><br><span class="line">EOF</span><br><span class="line">2.</span><br><span class="line">sed <span class="string">&#x27;$a abc\nsdf&#x27;</span> test.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä½¿ç”¨æ–¹æ³•</span></span><br><span class="line">1. i æ’å…¥ åœ¨ç¬¬3è¡Œå‰å†™å…¥aaa</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;3i aaa&#x27;</span> test.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">aaa</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"></span><br><span class="line">2. aè¿½åŠ  åœ¨ç¬¬3è¡Œçš„ä¸‹ä¸€è¡Œ åœ¨ç¬¬4è¡Œå†™å…¥aaa</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;3a aaa&#x27;</span> test.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">aaa</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"></span><br><span class="line">3. cæ›¿æ¢ æ›¿æ¢æ•´è¡Œå†…å®¹</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;3c aaa&#x27;</span> test.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">aaa</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"></span><br><span class="line">æ›¿æ¢ç¬¬7è¡Œçš„å†…å®¹å…³é—­selinux</span><br><span class="line">[root@db01 ~]# sed -i <span class="string">&#x27;7c SELINUX=disabled&#x27;</span> /etc/selinux/config</span><br><span class="line"></span><br><span class="line">4. w ä¿å­˜ å°†æ‰¾åˆ°çš„è¡Œä¿å­˜åˆ°æ–°çš„æ–‡ä»¶ä¸­</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;4w new.txt&#x27;</span> test.txt</span><br><span class="line">ä¿å­˜2åˆ°4è¡Œçš„å†…å®¹åˆ°new.txt</span><br><span class="line">[root@db01 ~]# sed -n <span class="string">&#x27;2,4w new.txt&#x27;</span> test.txt</span><br><span class="line">[root@db01 ~]# <span class="built_in">cat</span> new.txt</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="sed-æ›¿æ¢s">sed-æ›¿æ¢s</h5><ul><li><p>s --&gt; sub substitute æ›¿æ¢</p></li><li><p>g --&gt; global å…¨å±€æ›¿æ¢ï¼Œæ›¿æ¢æ‰€æœ‰çš„åŒ¹é…çš„sedé»˜è®¤åªæ›¿æ¢æ¯è¡Œç¬¬ä¸€ä¸ªåŒ¹é…çš„</p></li><li><p><code>sedä¸­   \uè¡¨ç¤ºå¤§å†™     \lè¡¨ç¤ºå°å†™</code></p></li></ul><blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1. æŠŠæ¯ä¸ªå•è¯çš„ç¬¬ä¸€ä¸ªå°å†™å­—æ¯å˜å¤§å†™ï¼š</span><br><span class="line">sed <span class="string">&#x27;s/\b[a-z]/\u&amp;/g&#x27;</span> filename</span><br><span class="line"></span><br><span class="line">2. æŠŠæ‰€æœ‰å°å†™å˜å¤§å†™ï¼š</span><br><span class="line">sed <span class="string">&#x27;s/[a-z]/\u&amp;/g&#x27;</span> filename</span><br><span class="line"></span><br><span class="line">3. å¤§å†™å˜å°å†™ï¼š</span><br><span class="line">sed <span class="string">&#x27;s/[A-Z]/\l&amp;/g&#x27;</span> filename</span><br></pre></td></tr></table></figure></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">è¯­æ³•ç»“æ„ï¼š</span><br><span class="line">sed <span class="string">&#x27;s#å°†è°#æ›¿æ¢æˆè°#g&#x27;</span> æ–‡ä»¶</span><br><span class="line">sed <span class="string">&#x27;s@@@g&#x27;</span> æ–‡ä»¶</span><br><span class="line">sed <span class="string">&#x27;s///g&#x27;</span> æ–‡ä»¶</span><br><span class="line">æ¡ˆä¾‹: åªæ›¿æ¢æ¯è¡Œçš„ç¬¬ä¸€ä¸ªå•è¯ rootä¸ºoldboy</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;s#root#oldboy#&#x27;</span> test.txt</span><br><span class="line">oldboy:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line"></span><br><span class="line">æ¡ˆä¾‹: æ›¿æ¢æ‰€æœ‰çš„rootä¸ºoldboy</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;s#root#oldboy#g&#x27;</span> test.txt</span><br><span class="line">oldboy:x:0:0:oldboy:/oldboy:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line"></span><br><span class="line">æ¡ˆä¾‹: å°†rootæ›¿æ¢æˆç©º</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;s#root##g&#x27;</span> test.txt</span><br><span class="line">:x:0:0::/:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line"></span><br><span class="line">æ¡ˆä¾‹: åˆ é™¤æ‰€æœ‰çš„æ•°å­—</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;s#[0-9]##g&#x27;</span> test.txt</span><br><span class="line">root:x:::root:/root:/bin/bash</span><br><span class="line">bin:x:::bin:/bin:/sbin/nologin</span><br><span class="line"></span><br><span class="line">æ¡ˆä¾‹: åˆ é™¤æ‰€æœ‰çš„å­—ç¬¦ä¸²</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;s#[a-z]##g&#x27;</span> test.txt</span><br><span class="line">::0:0::/://</span><br><span class="line">::1:1::/://</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;s#[0-z]##g&#x27;</span> test.txt</span><br><span class="line">:::::/://</span><br><span class="line">:::::/://</span><br><span class="line"></span><br><span class="line">æ¡ˆä¾‹: ç»Ÿè®¡passwdä¸­æ¯ä¸ªå•è¯å‡ºç°çš„æ¬¡æ•° top10</span><br><span class="line">å°†ç‰¹æ®Šç¬¦å·æ›¿æ¢æˆç©º</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;s#[:/0-9x]# #g&#x27;</span> test.txt</span><br><span class="line">root root root bin bash</span><br><span class="line">bin bin bin sbin nologin</span><br><span class="line">daemon daemon sbin sbin nologin</span><br><span class="line">adm adm var adm sbin nologin</span><br><span class="line">root root root bin bash</span><br><span class="line">lp lp var spool lpd sbin nologin</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;s#[:/0-9x]# #g&#x27;</span> test.txt |xargs -n1|<span class="built_in">sort</span> |<span class="built_in">uniq</span> -c|<span class="built_in">sort</span> -rn|<span class="built_in">head</span></span><br><span class="line">6 root</span><br><span class="line">5 sbin</span><br><span class="line">5 bin</span><br><span class="line">4 nologin</span><br><span class="line">3 adm</span><br><span class="line">2 var</span><br><span class="line">2 lp</span><br><span class="line">2 daemon</span><br><span class="line">2 bash</span><br><span class="line">1 spool</span><br><span class="line"></span><br><span class="line">è¾¹ç•Œç¬¦:</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;s#\bbin\b#oldboy#g&#x27;</span> test.txt</span><br><span class="line">æˆ–è€…:</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;s#\&lt;bin\&gt;#oldboy#g&#x27;</span> test.txt</span><br><span class="line">root:x:0:0:root:/root:/oldboy/bash</span><br><span class="line">oldboy:x:1:1:oldboy:/oldboy:/sbin/nologin</span><br><span class="line"></span><br><span class="line">æ³¨æ„: è¯­æ³•å†²çªéœ€è¦ä½¿ç”¨æ’¬æ£\ æˆ–è€…æ¢ä¸ªè¯­æ³•</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;s/\/root/\/oldboy/g&#x27;</span> test.txt</span><br><span class="line">æˆ–è€…</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;s#/root#/oldboy#g&#x27;</span> test.txt</span><br><span class="line"></span><br><span class="line">åŠ¨ä½œ:</span><br><span class="line">sed -n <span class="string">&#x27;3p&#x27;</span> æ–‡ä»¶</span><br><span class="line">sed <span class="string">&#x27;s###g&#x27;</span> æ–‡ä»¶</span><br><span class="line">æ¨¡å¼+åŠ¨ä½œ</span><br><span class="line">æ¨¡å¼: æ‰¾è°ï¼Œå¦‚ä½•æ‰¾</span><br><span class="line">sed -n <span class="string">&#x27;3p&#x27;</span> <span class="comment"># æ‰¾ç¬¬3è¡Œ</span></span><br><span class="line">æ¼”å˜: å°†pè¾“å‡ºåŠ¨ä½œ ä¿®æ”¹ä¸ºæ›¿æ¢åŠ¨ä½œ</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;3s#sbin#oldboy#g&#x27;</span> test.txt <span class="comment"># å°†ç¬¬3è¡Œçš„sbinæ›¿æ¢æˆoldboy</span></span><br><span class="line"></span><br><span class="line">æ¡ˆä¾‹: å°†2åˆ°4è¡Œçš„nologinæ›¿æ¢æˆoldboy</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;2,4s#nologin#oldboy#g&#x27;</span> test.txt</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/oldboy</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/oldboy</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/oldboy</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;/adm/s#adm#oldboy#g&#x27;</span> test.txt</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/oldboy</span><br><span class="line">â†“          â†˜         â†˜</span><br><span class="line">oldboy:x:3:4:oldboy:/var/oldboy:/sbin/nologin</span><br><span class="line"></span><br><span class="line">åŒºé—´èŒƒå›´:</span><br><span class="line">[root@db01 ~]# sed <span class="string">&#x27;/adm/,/lp/s#[a-z]##g&#x27;</span> test.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">::3:4:://://</span><br><span class="line">::0:0::/://</span><br><span class="line">::4:7::///://</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="sed-åå‘å¼•ç”¨">sed-åå‘å¼•ç”¨</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">sedåå‘å¼•ç”¨:</span><br><span class="line">è¯­æ³•ç»“æ„: sed s#()()()#\1\2\3#g     -ræ”¯æŒæ‰©å±•æ­£åˆ™</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# <span class="built_in">echo</span> oldboy|sed -r <span class="string">&#x27;s#(.*)#\1#g&#x27;</span></span><br><span class="line">oldboy</span><br><span class="line">[root@db01 ~]#</span><br><span class="line">[root@db01 ~]# <span class="built_in">echo</span> oldboy|sed -r <span class="string">&#x27;s#ol(.*)oy#\1#g&#x27;</span></span><br><span class="line">db</span><br><span class="line">[root@db01 ~]# <span class="built_in">echo</span> oldboy|sed -r <span class="string">&#x27;s#ol(.*)(oy)#\2#g&#x27;</span></span><br><span class="line">oy</span><br><span class="line">[root@db01 ~]# <span class="built_in">echo</span> oldboy|sed -r <span class="string">&#x27;s#(ol)(.*)(oy)#\1#g&#x27;</span></span><br><span class="line">ol</span><br><span class="line">[root@db01 ~]# <span class="built_in">echo</span> oldboy <span class="built_in">test</span>|sed -r <span class="string">&#x27;s#(.*)#\1#g&#x27;</span></span><br><span class="line">oldboy <span class="built_in">test</span></span><br><span class="line">[root@db01 ~]# <span class="built_in">echo</span> oldboy <span class="built_in">test</span>|sed -r <span class="string">&#x27;s#(.*) test#\1#g&#x27;</span></span><br><span class="line">oldboy</span><br><span class="line"></span><br><span class="line">æ¡ˆä¾‹: å–å‡ºIPåœ°å€</span><br><span class="line">[root@db01 ~]# ifconfig eth0|sed -n <span class="string">&#x27;2p&#x27;</span>|sed -r <span class="string">&#x27;s#^.*t (.*)  netm.*$#\1#g&#x27;</span></span><br><span class="line">10.0.0.200</span><br><span class="line"></span><br><span class="line">ç¬¬äºŒç§ç”¨æ³•: å‘½ä»¤æ‹¼æ¥åäº¤ç»™bashæ‰§è¡Œ</span><br><span class="line">[root@db01 ~]# <span class="built_in">seq</span> 5|sed -r <span class="string">&#x27;s#(.*)#touch \1.txt#g&#x27;</span></span><br><span class="line"><span class="built_in">touch</span> 1.txt</span><br><span class="line"><span class="built_in">touch</span> 2.txt</span><br><span class="line"><span class="built_in">touch</span> 3.txt</span><br><span class="line"><span class="built_in">touch</span> 4.txt</span><br><span class="line"><span class="built_in">touch</span> 5.txt</span><br><span class="line">[root@db01 ~]# <span class="built_in">seq</span> 5|sed -r <span class="string">&#x27;s#(.*)#touch \1.txt#g&#x27;</span>|bash</span><br><span class="line">-rw-r--r-- 1 root root 18 Mar 18 11:46 1.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar 18 11:46 2.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar 18 11:46 3.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar 18 11:46 4.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Mar 18 11:46 5.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰¹é‡åˆ›å»ºç”¨æˆ·</span></span><br><span class="line">[root@db01 ~]# <span class="built_in">echo</span> <span class="built_in">test</span>&#123;1..3&#125;</span><br><span class="line">test1 test2 test3</span><br><span class="line">[root@db01 ~]# <span class="built_in">echo</span> <span class="built_in">test</span>&#123;1..3&#125;|xargs -n1</span><br><span class="line">test1</span><br><span class="line">test2 </span><br><span class="line">test3</span><br><span class="line">[root@db01 ~]# <span class="built_in">echo</span> <span class="built_in">test</span>&#123;1..3&#125;|xargs -n1|sed -r <span class="string">&#x27;s#(.*)#\1#g&#x27;</span></span><br><span class="line">test1</span><br><span class="line">test2</span><br><span class="line">test3</span><br><span class="line">[root@db01 ~]# <span class="built_in">echo</span> <span class="built_in">test</span>&#123;1..3&#125;|xargs -n1|sed -r <span class="string">&#x27;s#(.*)#useradd \1#g&#x27;</span></span><br><span class="line">useradd test1</span><br><span class="line">useradd test2</span><br><span class="line">useradd test3</span><br><span class="line">[root@db01 ~]# <span class="built_in">echo</span> <span class="built_in">test</span>&#123;1..3&#125;|xargs -n1|sed -r <span class="string">&#x27;s#(.*)#useradd \1#g&#x27;</span>|bash</span><br><span class="line"></span><br><span class="line"><span class="comment">#å–å‡º/etc/passwdæ–‡ä»¶æƒé™</span></span><br><span class="line"><span class="built_in">stat</span> /etc/passwd|sed -n <span class="string">&#x27;4p&#x27;</span>|sed -r <span class="string">&#x27;s#^.*(\(0)(.*)/-.*$#\2#g&#x27;</span></span><br><span class="line">æˆ–è€…</span><br><span class="line"><span class="built_in">stat</span> /etc/passwd|sed -nr <span class="string">&#x27;4s#^.*(\(0)(.*)/-.*$#\2#pg&#x27;</span></span><br><span class="line">644</span><br></pre></td></tr></table></figure><h3 id="awkå‘½ä»¤">awkå‘½ä»¤</h3><table><thead><tr><th>å†…ç½®å˜é‡</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td>NR</td><td>Number of Recordè®°å½•è¡Œå·</td></tr><tr><td>NF</td><td>Number of Fieldæ¯è¡Œæœ‰å¤šå°‘å­å­—æ®µï¼ˆåˆ—ï¼‰$NFè¡¨ç¤ºæœ€åä¸€åˆ—</td></tr><tr><td>FS</td><td>-Fï¼šå­—æ®µåˆ†éš”ç¬¦ï¼Œæ¯ä¸ªå­—æ®µç»“æŸæ ‡è®°</td></tr><tr><td>OFS</td><td>Output Field Separator è¾“å‡ºå­—æ®µåˆ†éš”ç¬¦ï¼ˆawkæ˜¾ç¤ºæ¯ä¸€åˆ—çš„æ—¶å€™é€šè¿‡ä»€ä¹ˆæ¥åˆ†å‰²ï¼Œé»˜è®¤æ˜¯ç©ºæ ¼ï¼‰</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">awk: ç¼–ç¨‹è¯­è¨€ GNU/awk</span><br><span class="line">ä½œç”¨:</span><br><span class="line">1.å–è¡Œ</span><br><span class="line">2.å–åˆ—</span><br><span class="line">3.æ¨¡ç³Šè¿‡æ»¤</span><br><span class="line">4.æ•°æ®ç»Ÿè®¡ æ•°æ®è¿ç®—</span><br><span class="line">5.æ”¯æŒ<span class="keyword">for</span>å¾ªç¯ <span class="keyword">if</span>åˆ¤æ–­ æ•°ç»„..</span><br><span class="line">6.æ ¼å¼åŒ–è¾“å‡º sedåå‘å¼•ç”¨</span><br><span class="line">è¯­æ³•ç»“æ„:</span><br><span class="line">awk <span class="string">&#x27;æ¨¡å¼&#x27;</span> file <span class="comment"># ä¸åŠ ä»»ä½•åŠ¨ä½œï¼Œé»˜è®¤ä¸ºè¾“å‡ºçš„åŠ¨ä½œ</span></span><br><span class="line">awk <span class="string">&#x27;æ¨¡å¼&#123;print&#125;&#x27;</span> file <span class="comment"># æ¨¡å¼+åŠ¨ä½œ</span></span><br><span class="line">å…¶ä»–çš„å‘½ä»¤è¾“å‡º|awk <span class="string">&#x27;æ¨¡å¼&#x27;</span></span><br><span class="line">æ¨¡å¼: æ‰¾è°ï¼Œæ€ä¹ˆæ‰¾</span><br><span class="line">æŒ‡å®šè¡Œï¼ŒæŒ‡å®šåˆ—æ‰¾ï¼Œæ¨¡ç³Šè¿‡æ»¤çš„æ‰¾</span><br><span class="line"></span><br><span class="line"><span class="comment">#OFSæŒ‡å®šåˆ†éš”ç¬¦  -v OFS=:   æˆ–è€…OFS=:    (-vä¿®æ”¹å‚æ•°)</span></span><br><span class="line">[root@web01 ~]# awk -F: <span class="string">&#x27;&#123;print $1,$3,$4&#125;&#x27;</span> OFS=:  /etc/passwd</span><br><span class="line">root:0:0</span><br><span class="line">bin:1:1</span><br></pre></td></tr></table></figure><h4 id="1-æŸ¥æ‰¾-è¿‡æ»¤">1.æŸ¥æ‰¾/è¿‡æ»¤</h4><p><strong>==1.awkæŒ‰ç…§è¡Œè¿›è¡ŒæŸ¥æ‰¾==</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ­£åˆ™æœç´¢æŸä¸€åˆ—</span></span><br><span class="line">//</span><br><span class="line"><span class="variable">$1</span> ~//  åŒ¹é…ç¬¬ä¸€åˆ—çš„å†…å®¹</span><br><span class="line"></span><br><span class="line">è¯­æ³•ç»“æ„:</span><br><span class="line">sed -n <span class="string">&#x27;3p&#x27;</span> file <span class="comment"># sed è¾“å‡ºæŒ‡å®šçš„è¡Œ</span></span><br><span class="line">awk <span class="string">&#x27;NR==3&#x27;</span> file <span class="comment"># awkè¾“å‡ºæŒ‡å®šçš„è¡Œ</span></span><br><span class="line">awkçš„å†…ç½®å˜é‡:</span><br><span class="line">NRå­˜æ”¾ç€æ–‡ä»¶ä¸­æ¯è¡Œçš„è¡Œå·</span><br><span class="line">NRçš„è¡¨è¾¾å¼:</span><br><span class="line">== ç­‰äºç¬¬å‡ è¡Œ</span><br><span class="line">&gt; å¤§äºç¬¬å‡ è¡Œ</span><br><span class="line">&lt; å°äºç¬¬å‡ è¡Œ</span><br><span class="line">&gt;= ç­‰äºç­‰äºç¬¬å‡ è¡Œ</span><br><span class="line">&lt;= å°äºç­‰äºç¬¬å‡ è¡Œ</span><br><span class="line">!= ä¸ç­‰äº</span><br><span class="line">&amp;&amp; å¹¶ä¸”</span><br><span class="line">|| æˆ–è€…</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# <span class="built_in">cat</span> 1.txt</span><br><span class="line">1 root:x:0:0:root:/root:/bin/bash</span><br><span class="line">2 bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">3 daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">4 adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">5 lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"></span><br><span class="line">åªæ˜¾ç¤ºæ–‡ä»¶çš„ç¬¬3è¡Œ</span><br><span class="line">[root@db01 ~]# awk <span class="string">&#x27;NR==3&#x27;</span> 1.txt</span><br><span class="line">3 daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¸ºä»€ä¹ˆè¦åŠ ä¸¤ä¸ªç­‰å·ï¼Ÿ</span></span><br><span class="line">ä¸€ä¸ªç­‰å·åœ¨ç³»ç»Ÿä¸­ç§°ä¸ºå®šä¹‰å˜é‡</span><br><span class="line"></span><br><span class="line">åªæ˜¾ç¤ºæ–‡ä»¶ä¸­å°äº3çš„è¡Œ</span><br><span class="line">[root@db01 ~]# awk <span class="string">&#x27;NR&lt;3&#x27;</span> 1.txt</span><br><span class="line">1 root:x:0:0:root:/root:/bin/bash</span><br><span class="line">2 bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line"></span><br><span class="line">åªæ˜¾ç¤ºæ–‡ä»¶ä¸­å¤§äº3çš„è¡Œ</span><br><span class="line">[root@db01 ~]# awk <span class="string">&#x27;NR&gt;3&#x27;</span> 1.txt</span><br><span class="line">4 adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">5 lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# awk <span class="string">&#x27;NR&lt;=3&#x27;</span> 1.txt</span><br><span class="line">1 root:x:0:0:root:/root:/bin/bash</span><br><span class="line">2 bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">3 daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line"></span><br><span class="line">æ˜¾ç¤ºæ–‡ä»¶ä¸­ä¸ç­‰äº3çš„è¡Œ</span><br><span class="line">[root@db01 ~]# awk <span class="string">&#x27;NR!=3&#x27;</span> 1.txt</span><br><span class="line">1 root:x:0:0:root:/root:/bin/bash</span><br><span class="line">2 bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">4 adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">5 lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"></span><br><span class="line">å¹¶ä¸”å’Œæˆ–è€…:</span><br><span class="line">&amp;&amp; å¹¶ä¸”</span><br><span class="line">æ¡ˆä¾‹: æŸ¥æ‰¾å¤§äºç¬¬2è¡Œ å¹¶ä¸”å°äº5çš„è¡Œ</span><br><span class="line">[root@db01 ~]# awk <span class="string">&#x27;NR&gt;2&amp;&amp;NR&lt;5&#x27;</span> 1.txt</span><br><span class="line">3 daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">4 adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line"></span><br><span class="line">|| æˆ–è€…</span><br><span class="line">æ¡ˆä¾‹: æŸ¥æ‰¾å°äºç¬¬2è¡Œï¼Œæˆ–è€…å¤§äºç¬¬4è¡Œ</span><br><span class="line">[root@db01 ~]# awk <span class="string">&#x27;NR&lt;2||NR&gt;4&#x27;</span> 1.txt</span><br><span class="line">1 root:x:0:0:root:/root:/bin/bash</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>==2.æ¨¡ç³Šè¿‡æ»¤æ–‡ä»¶å†…å®¹==</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">è¯­æ³•ç»“æ„:</span><br><span class="line">grep <span class="string">&#x27;&#x27;</span> æ–‡ä»¶</span><br><span class="line">sed -n <span class="string">&#x27;/å†…å®¹/p&#x27;</span> æ–‡ä»¶</span><br><span class="line">awk <span class="string">&#x27;/å†…å®¹/&#x27;</span> æ–‡ä»¶</span><br><span class="line">awk <span class="string">&#x27;//,//&#x27;</span> æ–‡ä»¶</span><br><span class="line"></span><br><span class="line"><span class="comment">#awkè¡¨ç¤ºèŒƒå›´</span></span><br><span class="line">awk <span class="string">&#x27;/10:00/,/11:00/&#x27;</span> access.log</span><br><span class="line"></span><br><span class="line">æ¡ˆä¾‹1.æŸ¥æ‰¾åŒ…å«rootçš„è¡Œ</span><br><span class="line">[root@db01 ~]# awk <span class="string">&#x27;/root/&#x27;</span> 1.txt</span><br><span class="line">1 root:x:0:0:root:/root:/bin/bash</span><br><span class="line"></span><br><span class="line">æ¡ˆä¾‹2.æŸ¥æ‰¾ä»¥1å¼€å¤´çš„è¡Œ</span><br><span class="line">[root@db01 ~]# awk <span class="string">&#x27;/^r/&#x27;</span> 1.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# awk <span class="string">&#x27;/h$/&#x27;</span> 1.txt</span><br><span class="line">1 root:x:0:0:root:/root:/bin/bash</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# awk <span class="string">&#x27;/^[1-3]/&#x27;</span> 1.txt</span><br><span class="line">1 root:x:0:0:root:/root:/bin/bash</span><br><span class="line">2 bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">3 daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line"></span><br><span class="line">æ¡ˆä¾‹3.åŒºé—´èŒƒå›´ å·¥ä½œä¸­å–æ—¶é—´èŒƒå›´è¾ƒå¤š</span><br><span class="line">[root@db01 ~]# awk <span class="string">&#x27;/^2/,/^4/&#x27;</span> 1.txt</span><br><span class="line">2 bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">3 daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">4 adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">æ³¨æ„: ä¸‰å‰‘å®¢æ”¯æŒæ‰©å±•æ­£åˆ™å†™æ³•</span><br><span class="line">grep -E æˆ–è€…egrep</span><br><span class="line">sed -r</span><br><span class="line">awk é»˜è®¤æ”¯æŒæ‰©å±•æ­£åˆ™</span><br></pre></td></tr></table></figure><h4 id="2-awkå–åˆ—">2.awkå–åˆ—</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br></pre></td><td class="code"><pre><span class="line">è¯­æ³•ç»“æ„:</span><br><span class="line">awk <span class="string">&#x27;&#123;print $n&#125;&#x27;</span> file</span><br><span class="line"><span class="variable">$0</span> awkçš„å†…ç½®å˜é‡é‡Œé¢å­˜æ”¾ç€æ¯è¡Œçš„å†…å®¹,(å¯ä»¥åˆ¤æ–­awkæ‰§è¡Œçš„å“ªäº›è¡Œå†…å®¹)</span><br><span class="line"><span class="variable">$1</span> è¡¨ç¤ºç¬¬1åˆ— é»˜è®¤ä»¥ç©ºæ ¼å’Œtabé”®ä¸ºåˆ†éš”ç¬¦ï¼Œå¦‚æœæ–‡ä»¶ä¸­æ²¡æœ‰ç©ºæ ¼å’Œtabé”®åˆ™æ–‡ä»¶å†…å®¹è¢«å½“åšç¬¬ä¸€åˆ—</span><br><span class="line"><span class="variable">$2</span> è¡¨ç¤ºç¬¬2åˆ—</span><br><span class="line">ï¼Œé€—å· å†…ç½®å˜é‡ï¼Œè¡¨ç¤ºç©ºæ ¼</span><br><span class="line">NF è¡¨ç¤ºæœ€åä¸€åˆ—çš„åˆ—å·</span><br><span class="line"><span class="variable">$NF</span> è¡¨ç¤ºæœ€åä¸€åˆ—çš„å†…å®¹</span><br><span class="line">æ³¨æ„: æ‰€æœ‰çš„å­—ç¬¦ä¸²åœ¨awkä¸­è¢«è¯†åˆ«ä¸ºå˜é‡ï¼Œæ‰€ä»¥è¾“å‡ºå­—ç¬¦ä¸²å¿…é¡»åŠ åŒå¼•å·</span><br><span class="line"></span><br><span class="line">awkæŒ‡å®šåˆ†éš”ç¬¦: é»˜è®¤ä»¥tabé”®æˆ–ç©ºæ ¼åˆ†éš”</span><br><span class="line">-F</span><br><span class="line">awk -F: <span class="comment"># æ–¹æ³•1</span></span><br><span class="line">awk -F <span class="string">&quot;:&quot;</span> <span class="comment"># æ–¹æ³•2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#$0ç”¨æ³•ï¼ŒåŠ ä¸Š$0å°±å¯ä»¥çœ‹awkå–çš„æ˜¯å“ªäº›å†…å®¹</span></span><br><span class="line">[root@web01 zzz]# <span class="built_in">cat</span> /etc/passwd|awk -F <span class="string">&#x27;[ :]+&#x27;</span> <span class="string">&#x27;NR&gt;5&amp;&amp;NR&lt;8&#123;print $1,$2&#125;&#x27;</span></span><br><span class="line"><span class="built_in">sync</span> x</span><br><span class="line">shutdown x</span><br><span class="line">[root@web01 zzz]# <span class="built_in">cat</span> /etc/passwd|awk -F <span class="string">&#x27;[ :]+&#x27;</span> <span class="string">&#x27;NR&gt;5&amp;&amp;NR&lt;8&#123;print $1,$2,$0&#125;&#x27;</span></span><br><span class="line"><span class="built_in">sync</span> x <span class="built_in">sync</span>:x:5:0:<span class="built_in">sync</span>:/sbin:/bin/sync</span><br><span class="line">shutdown x shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#å¦‚ä½•æŸ¥çœ‹æ¯ä¸€è¡Œæœ‰å¤šå°‘åˆ—</span></span><br><span class="line">[root@web01 zzz]# awk -F: <span class="string">&#x27;&#123;print NF&#125;&#x27;</span> 1.txt </span><br><span class="line">7</span><br><span class="line">7</span><br><span class="line">7</span><br><span class="line">7</span><br><span class="line"></span><br><span class="line">æ¡ˆä¾‹1.æ˜¾ç¤ºæ–‡ä»¶çš„ç¬¬ä¸€åˆ—</span><br><span class="line">[root@db01 ~]# <span class="built_in">cat</span> 1.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"><span class="built_in">sync</span>:x:5:0:<span class="built_in">sync</span>:/sbin:/bin/sync</span><br><span class="line"></span><br><span class="line">æ¡ˆä¾‹1.æ‰“å°å‡ºç¬¬ä¸€åˆ—</span><br><span class="line">[root@db01 ~]# awk -F: <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> 1.txt</span><br><span class="line">root</span><br><span class="line">bin</span><br><span class="line">daemon</span><br><span class="line">adm</span><br><span class="line">lp</span><br><span class="line"><span class="built_in">sync</span></span><br><span class="line"></span><br><span class="line">æ¡ˆä¾‹2.æ˜¾ç¤ºæ–‡ä»¶çš„ç¬¬1åˆ—å’Œç¬¬3åˆ—</span><br><span class="line">[root@db01 ~]# awk -F: <span class="string">&#x27;&#123;print $1,$3&#125;&#x27;</span> 1.txt</span><br><span class="line">root 0</span><br><span class="line">bin 1</span><br><span class="line">daemon 2</span><br><span class="line">adm 3</span><br><span class="line">lp 4</span><br><span class="line"><span class="built_in">sync</span> 5</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# awk -F: <span class="string">&#x27;&#123;print $1&quot;---&quot;$3&#125;&#x27;</span> 1.txt</span><br><span class="line">root---0</span><br><span class="line">bin---1</span><br><span class="line">daemon---2</span><br><span class="line">adm---3</span><br><span class="line">lp---4</span><br><span class="line">sync---5</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æ¡ˆä¾‹.å…ˆè¾“å‡ºç¬¬3åˆ— åé¢è¾“å‡ºç¬¬1åˆ—</span><br><span class="line">[root@db01 ~]# awk -F: <span class="string">&#x27;&#123;print $3&quot; &quot;$1&#125;&#x27;</span> 1.txt</span><br><span class="line">0 root</span><br><span class="line">1 bin</span><br><span class="line">2 daemon</span><br><span class="line">3 adm</span><br><span class="line">4 lp</span><br><span class="line">5 <span class="built_in">sync</span></span><br><span class="line"></span><br><span class="line">æ¡ˆä¾‹: å–å‡ºæœ€åä¸€åˆ—çš„å†…å®¹:</span><br><span class="line">[root@db01 ~]# awk -F: <span class="string">&#x27;&#123;print $NF&#125;&#x27;</span> 1.txt</span><br><span class="line">/bin/bash</span><br><span class="line">/sbin/nologin</span><br><span class="line">/sbin/nologin</span><br><span class="line">/sbin/nologin</span><br><span class="line">/sbin/nologin</span><br><span class="line">/bin/sync</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@web01 zzz]# <span class="built_in">df</span> -h</span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/sda3        19G  1.9G   17G  11% /</span><br><span class="line">devtmpfs        476M     0  476M   0% /dev</span><br><span class="line">tmpfs           487M     0  487M   0% /dev/shm</span><br><span class="line">tmpfs           487M   20M  467M   5% /run</span><br><span class="line">tmpfs           487M     0  487M   0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1       497M  120M  378M  25% /boot</span><br><span class="line">tmpfs            98M     0   98M   0% /run/user/0</span><br><span class="line"></span><br><span class="line">æ¡ˆä¾‹: å–å‡ºç£ç›˜ä¸­çš„ç¬¬5åˆ—</span><br><span class="line">[root@db01 ~]# <span class="built_in">df</span> -h|awk <span class="string">&#x27;&#123;print $5&#125;&#x27;</span></span><br><span class="line">Use%</span><br><span class="line">11%</span><br><span class="line">0%</span><br><span class="line">0%</span><br><span class="line">5%</span><br><span class="line">0%</span><br><span class="line">25%</span><br><span class="line">0%</span><br><span class="line"></span><br><span class="line">æ¡ˆä¾‹: å–å‡ºsda3çš„è¡Œçš„æ–¹æ³•</span><br><span class="line">[root@db01 ~]# <span class="built_in">df</span> -h|grep <span class="string">&#x27;/$&#x27;</span></span><br><span class="line">/dev/sda3        19G  1.9G   17G  11% /</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# <span class="built_in">df</span> -h|grep <span class="string">&#x27;sda3&#x27;</span></span><br><span class="line">/dev/sda3        19G  1.9G   17G  11% /</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# <span class="built_in">df</span> -h|sed -n <span class="string">&#x27;2p&#x27;</span></span><br><span class="line">/dev/sda3        19G  1.9G   17G  11% /</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# <span class="built_in">df</span> -h|sed -n <span class="string">&#x27;/sda3/p&#x27;</span></span><br><span class="line">/dev/sda3        19G  1.9G   17G  11% /</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# <span class="built_in">df</span> -h|sed -n <span class="string">&#x27;/\/$/p&#x27;</span></span><br><span class="line">/dev/sda3        19G  1.9G   17G  11% /</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# <span class="built_in">df</span> -h|awk <span class="string">&#x27;NR==2&#x27;</span></span><br><span class="line">/dev/sda3        19G  1.9G   17G  11% /</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# <span class="built_in">df</span> -h|awk <span class="string">&#x27;/\/$/&#x27;</span></span><br><span class="line">/dev/sda3        19G  1.9G   17G  11% /</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# <span class="built_in">df</span> -h|awk <span class="string">&#x27;/sda3/&#x27;</span></span><br><span class="line">/dev/sda3        19G  1.9G   17G  11% /</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ¡ˆä¾‹ï¼šå–å‡ºå€’æ•°ç¬¬äºŒåˆ—</span></span><br><span class="line">[root@db01 ~]# <span class="built_in">df</span> -h|awk <span class="string">&#x27;&#123;print $(NF-1)&#125;&#x27;</span></span><br><span class="line">Mounted</span><br><span class="line">11%</span><br><span class="line">0%</span><br><span class="line">0%</span><br><span class="line">5%</span><br><span class="line">0%</span><br><span class="line">25%</span><br><span class="line">0%</span><br><span class="line"></span><br><span class="line">å–å‡ºæ¯è¡Œçš„å€’æ•°ç¬¬2åˆ—çš„å†…å®¹</span><br><span class="line">[root@db01 ~]# <span class="built_in">cat</span> 1.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"><span class="built_in">sync</span>:x:5:0:<span class="built_in">sync</span>:/sbin:/bin/sync</span><br><span class="line"></span><br><span class="line">[root@web01 zzz]# awk -F: <span class="string">&#x27;&#123;print $(NF-1)&#125;&#x27;</span> 1.txt</span><br><span class="line">/root</span><br><span class="line">/bin</span><br><span class="line">/sbin</span><br><span class="line">/var/adm</span><br><span class="line">/var/spool/lpd</span><br><span class="line">/sbin</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æ¡ˆä¾‹.æŒ‡å®šå¤šåˆ†éš”ç¬¦</span><br><span class="line">[root@db01 ~]# <span class="built_in">cat</span> 2.txt</span><br><span class="line">root:x:0:0:root:/oldboy:/bin/bash</span><br><span class="line">[root@db01 ~]# awk -F <span class="string">&quot;:/&quot;</span> <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> 2.txt</span><br><span class="line">oldboy</span><br><span class="line"></span><br><span class="line">æ¡ˆä¾‹.å–å‡º<span class="built_in">test</span>å’Œoldboy</span><br><span class="line">æ¡ˆä¾‹.+è¿ç»­å‡ºç°1æ¬¡åŠ1æ¬¡ä»¥ä¸Šçš„ä½œä¸º1ä¸ªæ•´ä½“</span><br><span class="line">[root@db01 ~]# <span class="built_in">cat</span> 2.txt</span><br><span class="line">root:x:0:0:<span class="built_in">test</span>:/oldboy:/bin/bash</span><br><span class="line">[root@db01 ~]# awk -F <span class="string">&quot;[:/]+&quot;</span> <span class="string">&#x27;&#123;print $5,$6&#125;&#x27;</span> 2.txt</span><br><span class="line"><span class="built_in">test</span> oldboy</span><br><span class="line"></span><br><span class="line">ç†è§£æ­£åˆ™è¡¨è¾¾å¼+</span><br><span class="line">[root@db01 ~]# <span class="built_in">echo</span> ---<span class="built_in">test</span>-+oldboy++::|awk -F <span class="string">&quot;-&quot;</span> <span class="string">&#x27;&#123;print $4&#125;&#x27;</span></span><br><span class="line"><span class="built_in">test</span></span><br><span class="line">[root@db01 ~]# <span class="built_in">echo</span> ---<span class="built_in">test</span>-+oldboy++::|awk -F <span class="string">&quot;[-]+&quot;</span> <span class="string">&#x27;&#123;print $2&#125;&#x27;</span></span><br><span class="line"><span class="built_in">test</span></span><br><span class="line"></span><br><span class="line">[root@db01 ~]# <span class="built_in">echo</span> ---<span class="built_in">test</span>-+oldboy++::|awk -F <span class="string">&quot;[-+]&quot;</span> <span class="string">&#x27;&#123;print $6&#125;&#x27;</span></span><br><span class="line">oldboy</span><br><span class="line">[root@db01 ~]# <span class="built_in">echo</span> ---<span class="built_in">test</span>-+oldboy++::|awk -F <span class="string">&quot;[-+]+&quot;</span> <span class="string">&#x27;&#123;print $3&#125;&#x27;</span></span><br><span class="line">oldboy</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¸åŠ +ä¸ä¼šè´ªå©ªåŒ¹é…ï¼Œè¦æ•°åˆ†éš”ç¬¦ï¼ˆå­—ç¬¦ä¸²åè·Ÿçš„ç¬¬ä¸€ä¸ªåˆ†éš”ç¬¦ä¸æ•°é‡ï¼Œå†æœ‰åˆ†éš”ç¬¦è¦æ•°ï¼‰</span></span><br><span class="line">[root@web01 ~]# <span class="built_in">echo</span> ---<span class="built_in">test</span>-+--oldboy++::|awk -F <span class="string">&quot;[-+]&quot;</span> <span class="string">&#x27;&#123;print $4&#125;&#x27;</span></span><br><span class="line"><span class="built_in">test</span></span><br><span class="line">[root@web01 ~]# <span class="built_in">echo</span> ---<span class="built_in">test</span>-+--oldboy++::|awk -F <span class="string">&quot;[-+]&quot;</span> <span class="string">&#x27;&#123;print $8&#125;&#x27;</span></span><br><span class="line">oldboy</span><br><span class="line">[root@web01 ~]# <span class="built_in">echo</span> ---<span class="built_in">test</span>-+--oldboy++::|awk -F <span class="string">&quot;[-+]&quot;</span> <span class="string">&#x27;&#123;print $10&#125;&#x27;</span></span><br><span class="line">::</span><br><span class="line">[root@web01 ~]# <span class="built_in">echo</span> ---<span class="built_in">test</span>-+--oldboy++::|awk -F <span class="string">&quot;[-+]+&quot;</span> <span class="string">&#x27;&#123;print $2,$3,$4&#125;&#x27;</span></span><br><span class="line"><span class="built_in">test</span> oldboy ::</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æ‰©å±•ï¼šè®©å–å‡ºçš„åˆ—æ’åˆ—æ•´é½  column -t</span><br><span class="line">[root@web01 ~]# awk -F: <span class="string">&#x27;&#123;print $1,$3&#125;&#x27;</span>  /etc/passwd|column -t</span><br><span class="line">root             0</span><br><span class="line">bin              1</span><br><span class="line">daemon           2</span><br><span class="line">adm              3</span><br><span class="line">lp               4</span><br><span class="line"><span class="built_in">sync</span>             5</span><br><span class="line">shutdown         6</span><br></pre></td></tr></table></figure><h4 id="3-awkæ¨¡å¼-åŠ¨ä½œ">3.awkæ¨¡å¼+åŠ¨ä½œ</h4><ul><li>print</li><li>gsub</li><li>å˜é‡èµ‹å€¼</li><li>ç»Ÿè®¡è®¡ç®—</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ç»Ÿè®¡ /etc/servicesæœ‰å¤šå°‘è¡Œ</span></span><br><span class="line">[root@web01 ~]# <span class="built_in">cat</span> /etc/services |<span class="built_in">wc</span> -l</span><br><span class="line">11176</span><br><span class="line"></span><br><span class="line">[root@web01 ~]# awk <span class="string">&#x27;&#123;i++&#125;END&#123;print i&#125;&#x27;</span> /etc/services </span><br><span class="line">11176</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">[root@db01 ~]# <span class="built_in">cat</span> 1.txt</span><br><span class="line">1 root:x:0:0:root:/root:/bin/bash</span><br><span class="line">2 bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">3 daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">4 adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">:5 lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# awk <span class="string">&#x27;NR==3&#x27;</span> 1.txt</span><br><span class="line">3 daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">[root@db01 ~]# awk -F: <span class="string">&#x27;NR==3&#123;print $3 &#125;&#x27;</span> 1.txt</span><br><span class="line">2</span><br><span class="line"></span><br><span class="line">æ¡ˆä¾‹2.å–å‡ºç”¨æˆ·åå’Œæœ€åä¸€åˆ—</span><br><span class="line">[root@db01 ~]# <span class="built_in">cat</span> 1.txt</span><br><span class="line">1 root:x:0:0:root:/root:/bin/bash</span><br><span class="line">2 bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">3 daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">4 adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">5 lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# awk -F <span class="string">&quot;[ :]&quot;</span> <span class="string">&#x27;&#123;print $2,$NF &#125;&#x27;</span> 1.txt</span><br><span class="line">root /bin/bash</span><br><span class="line">bin /sbin/nologin</span><br><span class="line">daemon /sbin/nologin</span><br><span class="line">adm /sbin/nologin</span><br><span class="line">lp /sbin/nologin</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# awk -F <span class="string">&quot;[ :]&quot;</span> <span class="string">&#x27;&#123;print $2&quot;\t&quot;$NF &#125;&#x27;</span> 1.txt</span><br><span class="line">root /bin/bash</span><br><span class="line">bin /sbin/nologin</span><br><span class="line">daemon /sbin/nologin</span><br><span class="line">adm /sbin/nologin</span><br><span class="line">lp /sbin/nologin</span><br><span class="line"></span><br><span class="line">æ¡ˆä¾‹.å–å‡º/ç£ç›˜ä½¿ç”¨è¡Œçš„ ç¬¬4åˆ—</span><br><span class="line">æŒ‡å®šè¡Œ+åŠ¨ä½œ</span><br><span class="line">[root@web01 zzz]# <span class="built_in">df</span> -h</span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/sda3        19G  1.9G   17G  11% /</span><br><span class="line">devtmpfs        476M     0  476M   0% /dev</span><br><span class="line">tmpfs           487M     0  487M   0% /dev/shm</span><br><span class="line">tmpfs           487M   20M  467M   5% /run</span><br><span class="line">tmpfs           487M     0  487M   0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1       497M  120M  378M  25% /boot</span><br><span class="line">tmpfs            98M     0   98M   0% /run/user/0</span><br><span class="line"></span><br><span class="line">[root@web01 zzz]# <span class="built_in">df</span> -h|awk <span class="string">&#x27;NR==2&#x27;</span></span><br><span class="line">/dev/sda3        19G  1.9G   17G  11% /</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æ¨¡ç³Šè¿‡æ»¤+åŠ¨ä½œ</span><br><span class="line">[root@db01 ~]# <span class="built_in">df</span> -h|awk <span class="string">&#x27;/\/$/&#123;print $4,$1&#125;&#x27;</span></span><br><span class="line">17G /dev/sda3</span><br><span class="line">[root@db01 ~]# <span class="built_in">df</span> -h|awk <span class="string">&#x27;/sda3/&#123;print $4,$1&#125;&#x27;</span></span><br><span class="line">17G /dev/sda3</span><br><span class="line"></span><br><span class="line">æ¡ˆä¾‹.å–å‡ºdevç›¸å…³çš„è¡Œçš„ç¬¬1è¡Œå’Œç¬¬2è¡Œ</span><br><span class="line">[root@web01 zzz]# <span class="built_in">df</span> -h|awk <span class="string">&#x27;/sda3/,/devtmpfs/&#x27;</span></span><br><span class="line">/dev/sda3        19G  1.9G   17G  11% /</span><br><span class="line">devtmpfs        476M     0  476M   0% /dev</span><br><span class="line"></span><br><span class="line"><span class="comment">#å–å‡ºç¬¬6åˆ—å’Œç¬¬7åˆ—</span></span><br><span class="line"><span class="built_in">cat</span> -n /etc/passwd|awk <span class="string">&#x27;NR&gt;5&amp;&amp;NR&lt;8&#x27;</span></span><br><span class="line">     6  <span class="built_in">sync</span>:x:5:0:<span class="built_in">sync</span>:/sbin:/bin/sync</span><br><span class="line">     7  shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line"></span><br><span class="line"><span class="comment">#å–å‡ºç¬¬6è¡Œå’Œç¬¬ä¸ƒè¡Œçš„ ç¬¬1åˆ—å’Œç¬¬2åˆ—</span></span><br><span class="line">[root@web01 zzz]# <span class="built_in">cat</span> /etc/passwd|awk -F <span class="string">&#x27;[ :]+&#x27;</span> <span class="string">&#x27;NR&gt;5&amp;&amp;NR&lt;8&#123;print $1,$2&#125;&#x27;</span></span><br><span class="line"><span class="built_in">sync</span> x</span><br><span class="line">shutdown x</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="4-å­—ç¬¦ä¸²å¯¹æ¯”">4.å­—ç¬¦ä¸²å¯¹æ¯”</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">æ‰©å±•: å­—ç¬¦ä¸²æ¯”å¯¹</span><br><span class="line">[root@db01 ~]# <span class="built_in">cat</span> 1.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">root:hehe:xx</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# awk -F: <span class="string">&#x27;$NF==&quot;/bin/bash&quot;&#x27;</span> 1.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line"></span><br><span class="line">æŸ¥æ‰¾å‡ºä»¥roå¼€å¤´çš„è¡Œ</span><br><span class="line">[root@db01 ~]# awk -F: <span class="string">&#x27;/^ro/&#x27;</span> 1.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">root:hehe:xx</span><br><span class="line"></span><br><span class="line"><span class="comment">#åŒ¹é…ç¬¬5åˆ—æ˜¯rå¼€å¤´çš„å†…å®¹</span></span><br><span class="line">[root@web01 zzz]# awk -F: <span class="string">&#x27;$5 ~ /^r/&#x27;</span> 1.txt </span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line"></span><br><span class="line"><span class="comment">#åŒ¹é…ç¬¬5åˆ—æ˜¯tç»“å°¾çš„å†…å®¹</span></span><br><span class="line">[root@web01 zzz]# awk -F: <span class="string">&#x27;$5 ~ /t$/&#x27;</span> 1.txt </span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line"></span><br><span class="line">æ•°å­—æ¯”è¾ƒ:</span><br><span class="line">[root@db01 ~]# awk -F: <span class="string">&#x27;$3&gt;0&#x27;</span> 1.txt</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# awk -F: <span class="string">&#x27;$3&lt;2&#x27;</span> 1.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line"></span><br><span class="line">[root@db01 ~]# awk -F: <span class="string">&#x27;$3&lt;=2&#x27;</span> 1.txt</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line"></span><br><span class="line">[root@db01 ~]#</span><br><span class="line">æˆç»©å•ç»Ÿè®¡:ï¼ˆå‡å®šç¬¬äºŒåˆ—æ˜¯æˆç»©ï¼‰</span><br><span class="line">æ¡ˆä¾‹ã€‚å¤§äºç­‰äº90çš„äººæ•°</span><br><span class="line">[root@db01 ~]# awk <span class="string">&#x27;$2&gt;=90&#x27;</span> 1.txt|<span class="built_in">wc</span> -l</span><br><span class="line">16</span><br><span class="line">æ¡ˆä¾‹. å¤§äºç­‰äº80å¹¶ä¸”å°äº90çš„äººæ•°</span><br><span class="line">[root@db01 ~]# awk <span class="string">&#x27;$2&gt;=80&amp;&amp;$2&lt;90&#x27;</span> 1.txt |<span class="built_in">wc</span> -l</span><br><span class="line">29</span><br><span class="line">æ¡ˆä¾‹.å°äº60åˆ†çš„äººæ•°</span><br><span class="line">[root@db01 ~]# awk <span class="string">&#x27;$2&lt;60&#x27;</span> 1.txt|<span class="built_in">wc</span> -l</span><br></pre></td></tr></table></figure><h4 id="5-awkæ›¿æ¢">5.awkæ›¿æ¢</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åªæ›¿æ¢åŒ¹é…åˆ°ä»¥ä¸€ä¸ªå†…å®¹</span></span><br><span class="line">awk <span class="string">&#x27;&#123; sub(/apple/, &quot;pear&quot;, $1); print &#125;&#x27;</span> file.txt</span><br><span class="line"><span class="comment">#å…¨å±€æ›¿æ¢</span></span><br><span class="line">awk <span class="string">&#x27;&#123; gsub(/apple/, &quot;pear&quot;, $1); print &#125;&#x27;</span> file.txt</span><br><span class="line"><span class="comment">#æ›¿æ¢å®Œæ¯•ä¹‹åä¿å­˜åˆ°æ–°æ–‡ä»¶</span></span><br><span class="line">awk <span class="string">&#x27;&#123; sub(/apple/, &quot;pear&quot;, $1); print &#125;&#x27;</span> file.txt &gt; new_file.txt</span><br></pre></td></tr></table></figure><h4 id="æ€»ç»“">==æ€»ç»“==</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">1.awkå–è¡Œ</span><br><span class="line">awk <span class="string">&#x27;NR==3&#x27;</span> file</span><br><span class="line">NR==</span><br><span class="line">NR!=</span><br><span class="line">NR&gt;=</span><br><span class="line">NR&lt;=</span><br><span class="line">NR&gt;</span><br><span class="line">NR&lt;</span><br><span class="line">&amp;&amp;</span><br><span class="line">||</span><br><span class="line">2.awkæ¨¡ç³Šè¿‡æ»¤</span><br><span class="line">awk <span class="string">&#x27;/è¿‡æ»¤çš„å†…å®¹/&#x27;</span> file</span><br><span class="line">awk <span class="string">&#x27;//,//&#x27;</span> file</span><br><span class="line">æ”¯æŒæ­£åˆ™</span><br><span class="line">3.awkå–åˆ—</span><br><span class="line">awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> file</span><br><span class="line">awk <span class="string">&#x27;&#123;print $NF&#125;&#x27;</span> file æœ€åä¸€åˆ—</span><br><span class="line">4.awkæŒ‡å®šåˆ†éš”ç¬¦</span><br><span class="line">awk -F:</span><br><span class="line">awk -F <span class="string">&quot;:&quot;</span></span><br><span class="line">awk -F <span class="string">&quot;[:/]+&quot;</span></span><br><span class="line">5.awkæ¨¡å¼+åŠ¨ä½œ</span><br><span class="line">awk <span class="string">&#x27;NR==6&#123;print $3&#125;&#x27;</span></span><br><span class="line">awk <span class="string">&#x27;//&#123;print $3&#125;&#x27;</span></span><br><span class="line">6.å­—ç¬¦ä¸²æ¯”è¾ƒ</span><br><span class="line">awk <span class="string">&#x27;$3==&quot;root&quot;&#x27;</span> file</span><br><span class="line">awk <span class="string">&#x27;$3!=&quot;root&quot;&#x27;</span> file ä¸ç­‰äº</span><br><span class="line">7.awkæ•°å€¼æ¯”è¾ƒ</span><br><span class="line">awk <span class="string">&#x27;$3==0&#x27;</span> file</span><br><span class="line">awk <span class="string">&#x27;$3&gt;90&#x27;</span> file</span><br><span class="line">awk <span class="string">&#x27;$3&gt;80&amp;&amp;$3&lt;90&#x27;</span> file</span><br><span class="line">|| æˆ–è€…</span><br></pre></td></tr></table></figure><h4 id="å¾ªç¯-åˆ¤æ–­">å¾ªç¯&amp;åˆ¤æ–­</h4><p><strong>==forå¾ªç¯==</strong></p><blockquote><p>for i in 1 2 3</p><p>do</p><p>echo $i</p><p>done</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#shellç¼–ç¨‹cè¯­è¨€forå¾ªç¯</span></span><br><span class="line"><span class="keyword">for</span>(i=1;i&lt;10;i++)</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#awk forå¾ªç¯  ,  ç”¨æ¥å¾ªç¯æ¯ä¸ªå­—æ®µ</span></span><br><span class="line"><span class="keyword">for</span>(i=1;i&lt;10;i++)</span><br><span class="line"><span class="built_in">print</span> i</span><br><span class="line"></span><br><span class="line">æ¡ˆä¾‹ 1+...+100</span><br><span class="line">[root@web01 zzz]# awk <span class="string">&#x27;BEGIN&#123;for(i=1;i&lt;=100;i++)sum+=i;print sum&#125;&#x27;</span></span><br><span class="line">5050</span><br><span class="line"></span><br><span class="line">awk <span class="string">&#x27;BEGIN&#123;</span></span><br><span class="line"><span class="string">for(i=1;i&lt;=100;i++)</span></span><br><span class="line"><span class="string">  sum+=i;</span></span><br><span class="line"><span class="string">print sum</span></span><br><span class="line"><span class="string">&#125;&#x27;</span></span><br></pre></td></tr></table></figure><p><strong>==ifåˆ¤æ–­==</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#shell if åˆ¤æ–­</span></span><br><span class="line"><span class="keyword">if</span> &#123; $? -eq 0 &#125;;<span class="keyword">then</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;æ­£å¸¸&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;å‘½ä»¤æ‰§è¡Œé”™è¯¯&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment">#awk if åˆ¤æ–­</span></span><br><span class="line"><span class="keyword">if</span>(æ¡ä»¶)</span><br><span class="line">  <span class="built_in">print</span> <span class="string">&quot;abc&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="built_in">print</span> <span class="string">&quot;cc&quot;</span></span><br><span class="line">awk -F: <span class="string">&#x27;&#123; if ($3 &gt; 100) &#123; print &quot;å¤§äº100: &quot; $0 &#125; else &#123; print &quot;å°äºç­‰äº100: &quot; $0 &#125; &#125;&#x27;</span> /etc/passwd</span><br></pre></td></tr></table></figure><h4 id="awkæ­£åˆ™">awkæ­£åˆ™</h4><ul><li>æ”¯æŒæ‰©å±•æ­£åˆ™</li><li>awkå¯ä»¥ç²¾ç¡®åˆ°æŸä¸€åˆ— ï¼ŒæŸä¸€åˆ—åŒ…å«çš„å†…å®¹/ä¸åŒ…å«çš„å†…å®¹</li><li>~ åŒ…å«</li><li>!~ä¸åŒ…å«</li></ul><table><thead><tr><th>æ­£åˆ™</th><th>awkæ­£åˆ™</th></tr></thead><tbody><tr><td>^è¡¨ç¤ºä»¥â€¦å¼€å¤´çš„è¡Œ</td><td>æŸä¸€åˆ—å¼€çš„è¡Œ $3~/^root/</td></tr><tr><td>$è¡¨ç¤ºä»¥â€¦ç»“å°¾çš„è¡Œ</td><td>æŸä¸€åˆ—å¼€çš„è¡Œ $3~/bash$/</td></tr><tr><td>^$è¡¨ç¤ºç©ºè¡Œ</td><td></td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ‰¾å‡ºç¬¬ä¸€åˆ—ä»¥rootå¼€å¤´çš„è¡Œ</span></span><br><span class="line">[root@web01 ~]# awk -F: <span class="string">&#x27;$1~/^root/&#x27;</span> /etc/passwd</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line"><span class="comment">#æ‰¾å‡ºç¬¬ä¸€åˆ—ä»¥rootå¼€å¤´çš„è¡Œï¼Œå¹¶è¾“å‡ºç¬¬1åˆ—ï¼Œç¬¬3åˆ—ï¼Œç¬¬5åˆ—</span></span><br><span class="line">[root@web01 ~]# awk -F: <span class="string">&#x27;$1~/root/&#123;print $1,$3,$5&#125;&#x27;</span> /etc/passwd</span><br><span class="line">root 0 root</span><br><span class="line"><span class="comment">#æ‰¾å‡ºç¬¬3åˆ—ä»¥1æˆ–è€…3å¼€å¤´çš„è¡Œï¼Œ</span></span><br><span class="line">[root@web01 ~]# awk -F: <span class="string">&#x27;$3~/^[13]/&#x27;</span> /etc/passwd</span><br><span class="line">[root@web01 ~]# awk -F: <span class="string">&#x27;$3~/^(1|3)/&#x27;</span> /etc/passwd</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">operator:x:11:0:operator:/root:/sbin/nologin</span><br></pre></td></tr></table></figure><h4 id="ç‰¹æ®Šæ¨¡å¼BEGIN-END">ç‰¹æ®Šæ¨¡å¼BEGIN{} END{}</h4><table><thead><tr><th>æ¨¡å¼</th><th>å«ä¹‰</th><th>åº”ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>BEGIN{}</td><td>é‡Œé¢å†…å®¹ä¼šåœ¨awk<strong>è¯»å–æ–‡ä»¶ä¹‹å‰</strong>æ‰§è¡Œ</td><td>1)è¿›è¡Œç®€å•ç»Ÿè®¡ï¼Œä¸æ¶‰åŠè¯»å–æ–‡ä»¶<br />2)ç”¨æ¥å¤„ç†æ–‡ä»¶ä¹‹å‰ï¼Œæ·»åŠ ä¸ªè¡¨å¤´<br />3)ç”¨æ¥å®šä¹‰awkå˜é‡</td></tr><tr><td>END{}</td><td>é‡Œé¢å†…å®¹ä¼šåœ¨awk<strong>è¯»å–æ–‡ä»¶ä¹‹å</strong>æ‰§è¡Œ</td><td>1)awkè¿›è¡Œç»Ÿè®¡ï¼Œ<font color=red>ä¸€èˆ¬è¿‡ç¨‹ï¼Œå…ˆè¿›è¡Œè®¡ç®—ï¼Œæœ€åENDé‡Œé¢è¾“å‡º</font>&gt;ç»“æœ<br />3)awkä½¿ç”¨æ•°ç»„ï¼Œç”¨æ¥è¾“å‡ºæ•°ç»„ç»“æœ</td></tr></tbody></table><table><thead><tr><th>ç»Ÿè®¡æ–¹æ³•</th><th>ç®€å†™</th><th>åº”ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>i=i+1</td><td>i++</td><td>è®¡æ•°ï¼Œç»Ÿè®¡æ¬¡æ•°</td></tr><tr><td>sum=sum+i</td><td>sum+=i</td><td>æ±‚å’Œï¼Œç´¯åŠ </td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä½¿ç”¨awkç»Ÿè®¡æœ‰å¤šå°‘ç©ºè¡Œ</span></span><br><span class="line">[root@web01 ~]# awk <span class="string">&#x27;/^$/&#123;i++&#125;END&#123;print i&#125;&#x27;</span> /etc/services</span><br><span class="line">17</span><br></pre></td></tr></table></figure><h4 id="awkæ•°ç»„">awkæ•°ç»„</h4><table><thead><tr><th></th><th>shellæ•°ç»„</th><th>awkæ•°ç»„</th></tr></thead><tbody><tr><td>å½¢å¼</td><td>array[0]=oldboy array[1]=996</td><td>array[0]=oldboy array[1]=996</td></tr><tr><td>ä½¿ç”¨</td><td>echo $array[0]   $array[1]</td><td>print $array[0]   $array[1]</td></tr><tr><td>æ‰¹é‡è¾“å‡ºæ•°ç»„å†…å®¹</td><td>for i in ${array[*]}<br />do<br />  echo $i<br />done</td><td>for(i in array)<br />print array[i]</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">awkæ•°ç»„ä¸“ç”¨å¾ªç¯ï¼Œå˜é‡è·å–åˆ°çš„æ˜¯æ•°ç»„çš„ä¸‹æ ‡ï¼Œæƒ³è¦è·å–æ•°ç»„å†…å®¹ï¼Œarray[i]</span><br><span class="line">[root@web01 ~]# awk <span class="string">&#x27;BEGIN&#123;a[0]=123;a[1]=&quot;creat&quot;; for(i in a) print i,a[i]&#125;&#x27;</span></span><br><span class="line">0 123</span><br><span class="line">1 creat</span><br><span class="line"></span><br><span class="line">[root@web01 ~]# <span class="built_in">cat</span> 1.txt</span><br><span class="line">http://www.driverzeng.com/index.html</span><br><span class="line">http://www.driverzeng.com/1.html</span><br><span class="line">http://post.driverzeng.com/index.html</span><br><span class="line">http://mp3.driverzeng.com/index.html</span><br><span class="line">http://www.driverzeng.com/3.html</span><br><span class="line">http://post.driverzeng.com/2.html</span><br><span class="line"></span><br><span class="line">[root@web01 ~]# awk -F <span class="string">&#x27;[./]+&#x27;</span> <span class="string">&#x27;&#123;array[$2]++&#125;END&#123;for(i in array)print i,array[i]&#x27;</span> 1.txt </span><br><span class="line">www 3</span><br><span class="line">mp3 1</span><br><span class="line">post 2</span><br><span class="line"><span class="comment">####</span></span><br><span class="line">array[<span class="variable">$2</span>]++  ==&gt;[ ]é‡Œæ˜¯æ•°ç»„æƒ³è¦ç»Ÿè®¡çš„å†…å®¹</span><br><span class="line">&#123;<span class="keyword">for</span>(i <span class="keyword">in</span> array) ==&gt;å¾ªç¯æ•°ç»„</span><br><span class="line"><span class="built_in">print</span> i  ==&gt;è¿™é‡Œçš„iæ˜¯[ ]é‡Œçš„å†…å®¹</span><br><span class="line">array[i] ==&gt;æ•°ç»„+ä¸‹æ ‡è¡¨ç¤ºçš„æ˜¯å†…å®¹ï¼Œè¿™é‡Œçš„å†…å®¹è¡¨ç¤ºçš„æ˜¯æ¬¡æ•°</span><br><span class="line"></span><br><span class="line">[root@web02 ~]# awk <span class="string">&#x27;&#123;array[$10]++&#125;END&#123;for(i in array)print $1,i,array[i]&#125;&#x27;</span> access.log|<span class="built_in">sort</span> -nrk3</span><br><span class="line">115.223.23.182 200 710</span><br><span class="line">115.223.23.182 304 250</span><br><span class="line">115.223.23.182 302 223</span><br><span class="line">115.223.23.182 404 186</span><br><span class="line">115.223.23.182 301 65</span><br><span class="line">115.223.23.182 403 45</span><br><span class="line">115.223.23.182 503 4</span><br></pre></td></tr></table></figure><p><strong>==æ¡ˆä¾‹==</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">[root@web01 ~]# <span class="built_in">cat</span> 123.txt </span><br><span class="line">Zeng Laoshi       133411023        :110:100:75</span><br><span class="line">Deng Ziqi            44002231        :250:10:88</span><br><span class="line">Zhang Xinyu      877623568      :120:300:200</span><br><span class="line">Gu Linazha         11029987         :120:30:79</span><br><span class="line">Di Lireba             253097001      :220:100:200</span><br><span class="line">Jiang Shuying    535432779       :309:10:2</span><br><span class="line">Ju Jingyi             68005178         :130:280:385</span><br><span class="line">Zhang Yuqi         376788757       :500:290:33</span><br><span class="line">Wen Zhang         259872003      :100:200:300</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ‰¾å‡ºæ‰€æœ‰å§“Zhangçš„äººï¼Œæ˜¾ç¤ºä»–ä»¬çš„åå­—è¿˜æœ‰ç¬¬äºŒæ¬¡ææ¬¾æ•°</span></span><br><span class="line">[root@web01 ~]# awk -F <span class="string">&#x27;[ :]+&#x27;</span> <span class="string">&#x27;/^Zhang/&#123;print $1,$2&quot; ç¬¬äºŒæ¬¡ææ¬¾ï¼š&quot;$5&#125;&#x27;</span> 123.txt </span><br><span class="line">Zhang Xinyu ç¬¬äºŒæ¬¡ææ¬¾ï¼š300</span><br><span class="line">Zhang Yuqi ç¬¬äºŒæ¬¡ææ¬¾ï¼š290</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ‰¾å‡ºæ‰€æœ‰25å¼€å¤´çš„è”ç³»æ–¹å¼ï¼Œå¹¶ä¸”è¾“å‡ºä»–ä»¬çš„å§“å</span></span><br><span class="line">[root@web01 ~]# awk <span class="string">&#x27;$3~ /^25/&#123;print $1,$2,$3&#125;&#x27;</span> 123.txt </span><br><span class="line">Di Lireba 253097001</span><br><span class="line">Wen Zhang 259872003</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ˜¾ç¤ºQQå·æ˜¯1æˆ–3ç»“å°¾çš„å§“åå’ŒQQå·</span></span><br><span class="line">[root@web01 ~]# awk <span class="string">&#x27;$3~ /(1|3)$/&#123;print $1,$2,$3&#125;&#x27;</span> 123.txt </span><br><span class="line">Zeng Laoshi 133411023</span><br><span class="line">Deng Ziqi 44002231</span><br><span class="line">Di Lireba 253097001</span><br><span class="line">Wen Zhang 259872003</span><br><span class="line"></span><br><span class="line"><span class="comment">#ææ¬¾æ•°æ˜¾ç¤ºä»¥$ä¸ºåˆ†å‰²</span></span><br><span class="line">[root@web01 ~]# awk <span class="string">&#x27;&#123;gsub(&quot;:&quot;,&quot;$&quot;);print $0 &#125;&#x27;</span> 123.txt </span><br><span class="line">Zeng Laoshi       133411023        $110$100<span class="variable">$75</span></span><br><span class="line">Deng Ziqi            44002231        $250$10<span class="variable">$88</span></span><br><span class="line">Zhang Xinyu      877623568      $120$300<span class="variable">$200</span></span><br><span class="line">Gu Linazha         11029987         $120$30<span class="variable">$79</span></span><br><span class="line">Di Lireba             253097001      $220$100<span class="variable">$200</span></span><br><span class="line">Jiang Shuying    535432779       $309$10<span class="variable">$2</span></span><br><span class="line">Ju Jingyi             68005178         $130$280<span class="variable">$385</span></span><br><span class="line">Zhang Yuqi         376788757       $500$290<span class="variable">$33</span></span><br><span class="line">Wen Zhang         259872003      $100$200<span class="variable">$300</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linuxæ•²é—¨ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Markdownè¯­æ³•ä¸å¤–æŒ‚æ ‡ç­¾å†™æ³•æ±‡æ€»</title>
      <link href="/posts/2013454d.html"/>
      <url>/posts/2013454d.html</url>
      
        <content type="html"><![CDATA[<h1>1.Markdownè¯­æ³•è‡ªå¸¦æ ¼å¼</h1><div class="note info flat"><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/u014061630/article/details/81359144">Markdownè¯­æ³•å›¾æ–‡å…¨é¢è¯¦è§£(10åˆ†é’Ÿå­¦ä¼š)</a></p></div><div class="note warning flat"><p>æ³¨æ„ï¼šæ­¤é¡µé¢å¶å°”ä¼šå­˜åœ¨CSSå†²çªé—®é¢˜!</p></div><h2 id="1-1-ä»£ç å—">1.1 ä»£ç å—</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">\```shell</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">VSCodeç»ˆç«¯</span></span><br><span class="line">hexo clean; hexo s</span><br><span class="line">hexo clean; hexo g; hexo d</span><br><span class="line">git add .; git commit -m &quot;npm publish&quot;; npm version patch; </span><br><span class="line">git push</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Cmderç»ˆç«¯</span></span><br><span class="line">hexo clean &amp;&amp; hexo s</span><br><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</span><br><span class="line">git add . &amp;&amp; git commit -m &quot;npm publish&quot; &amp;&amp; npm version patch</span><br><span class="line">git push</span><br><span class="line">\```</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">VSCodeç»ˆç«¯</span></span><br><span class="line">hexo clean; hexo s</span><br><span class="line">hexo clean; hexo g; hexo d</span><br><span class="line">git add .; git commit -m &quot;npm publish&quot;; npm version patch; </span><br><span class="line">git push</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Cmderç»ˆç«¯</span></span><br><span class="line">hexo clean &amp;&amp; hexo s</span><br><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</span><br><span class="line">git add . &amp;&amp; git commit -m &quot;npm publish&quot; &amp;&amp; npm version patch</span><br><span class="line">git push</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="1-2-å¤šçº§æ ‡é¢˜">1.2 å¤šçº§æ ‡é¢˜</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># H1</span></span><br><span class="line"><span class="section">## H2</span></span><br><span class="line"><span class="section">### H3</span></span><br><span class="line"><span class="section">#### H4</span></span><br><span class="line"><span class="section">##### H5</span></span><br><span class="line"><span class="section">###### H6</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><p>è§æœ¬æ–‡ç« æ ‡é¢˜!</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="1-3-æ–‡å­—æ ·å¼">1.3 æ–‡å­—æ ·å¼</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">u</span>&gt;</span></span>ä¸‹åˆ’çº¿æ¼”ç¤º<span class="language-xml"><span class="tag">&lt;/<span class="name">u</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">æ–‡å­—<span class="strong">**åŠ ç²—**</span>æ¼”ç¤º</span><br><span class="line"></span><br><span class="line">æ–‡å­—<span class="emphasis">*æ–œä½“*</span>æ¼”ç¤º</span><br><span class="line"></span><br><span class="line">æ–‡æœ¬<span class="code">`é«˜äº®`</span>æ¼”ç¤º</span><br><span class="line"></span><br><span class="line">æ–‡æœ¬~~åˆ é™¤~~çº¿æ¼”ç¤º</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">size</span> = <span class="string">5</span>&gt;</span></span>5å·å­—<span class="language-xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">face</span>=<span class="string">&quot;é»‘ä½“&quot;</span>&gt;</span></span>é»‘ä½“<span class="language-xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">blue</span>&gt;</span></span>è“è‰²<span class="language-xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">MistyRose</span>&gt;</span></span>è¿™é‡Œçš„èƒŒæ™¯è‰²æ˜¯ï¼šMistyRosenï¼Œæ­¤å¤„è¾“å…¥ä»»æ„æƒ³è¾“å…¥çš„å†…å®¹<span class="language-xml"><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><p><u>ä¸‹åˆ’çº¿æ¼”ç¤º</u></p><p>æ–‡å­—<strong>åŠ ç²—</strong>æ¼”ç¤º</p><p>æ–‡å­—<em>æ–œä½“</em>æ¼”ç¤º</p><p>æ–‡æœ¬<code>é«˜äº®</code>æ¼”ç¤º</p><p>æ–‡æœ¬<s>åˆ é™¤</s>çº¿æ¼”ç¤º</p><p><font size = 5>5å·å­—</font><br><font face="é»‘ä½“">é»‘ä½“</font><br><font color=blue>è“è‰²</font></p><table><tr><td bgcolor=MistyRose>è¿™é‡Œçš„èƒŒæ™¯è‰²æ˜¯ï¼šMistyRosenï¼Œæ­¤å¤„è¾“å…¥ä»»æ„æƒ³è¾“å…¥çš„å†…å®¹</td></tr></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><div class="note info flat"><p>ä¸Šè¿°è¦ç‚¹å¯å‚è€ƒ:<a href="https://blog.csdn.net/qq_43732429/article/details/108034518">ã€Markdownè¯­æ³•ã€‘å­—ä½“é¢œè‰²å¤§å°åŠæ–‡å­—åº•è‰²è®¾ç½®</a></p></div><h2 id="1-4-å¼•ç”¨">1.4 å¼•ç”¨</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="quote">&gt;  Java</span></span><br><span class="line"><span class="quote">&gt; äºŒçº§å¼•ç”¨æ¼”ç¤º</span></span><br><span class="line"><span class="quote">&gt; MySQL</span></span><br><span class="line"><span class="quote">&gt; &gt;å¤–é”®</span></span><br><span class="line"><span class="quote">&gt; &gt;</span></span><br><span class="line"><span class="quote">&gt; &gt;äº‹åŠ¡</span></span><br><span class="line"><span class="quote">&gt; &gt;</span></span><br><span class="line"><span class="quote">&gt; &gt;<span class="strong">**è¡Œçº§é”**</span>(å¼•ç”¨å†…éƒ¨ä¸€æ ·å¯ä»¥ç”¨æ ¼å¼)</span></span><br><span class="line"><span class="quote">&gt; </span></span><br><span class="line"><span class="quote">&gt; ....</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><blockquote><p>Java<br>äºŒçº§å¼•ç”¨æ¼”ç¤º<br>MySQL</p><blockquote><p>å¤–é”®</p><p>äº‹åŠ¡</p><p><strong>è¡Œçº§é”</strong>(å¼•ç”¨å†…éƒ¨ä¸€æ ·å¯ä»¥ç”¨æ ¼å¼)</p></blockquote><p>â€¦</p></blockquote><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="1-5-åˆ†å‰²çº¿">1.5 åˆ†å‰²çº¿</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line"><span class="strong">**<span class="emphasis">*</span></span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><hr><hr><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="1-6-åˆ—è¡¨-è·Ÿç©ºæ ¼éƒ½å¯ä»¥">1.6 åˆ—è¡¨(*,+,-è·Ÿç©ºæ ¼éƒ½å¯ä»¥)</h2><h3 id="1-6-1-æ— åºåˆ—è¡¨">1.6.1 æ— åºåˆ—è¡¨</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">*</span> Java</span><br><span class="line"><span class="bullet">*</span> Python</span><br><span class="line"><span class="bullet">*</span> ...</span><br><span class="line"></span><br><span class="line"><span class="bullet">+</span> Java</span><br><span class="line"><span class="bullet">+</span> Python</span><br><span class="line"><span class="bullet">+</span> ...</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> Java</span><br><span class="line"><span class="bullet">-</span> Python</span><br><span class="line"><span class="bullet">-</span> ...</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ul><li>Java</li><li>Python</li><li>â€¦</li></ul><ul><li>Java</li><li>Python</li><li>â€¦</li></ul><ul><li>Java</li><li>Python</li><li>â€¦</li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="1-6-2-æœ‰åºåˆ—è¡¨">1.6.2 æœ‰åºåˆ—è¡¨</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># æ³¨æ„åé¢æœ‰ç©ºæ ¼</span></span><br><span class="line"><span class="bullet">1.</span> </span><br><span class="line"><span class="bullet">2.</span> </span><br><span class="line"><span class="bullet">3.</span> </span><br><span class="line"><span class="bullet">4.</span> </span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li></li><li></li><li></li><li></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="1-7-å›¾ç‰‡">1.7 å›¾ç‰‡</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># æœ¬åœ°å›¾ç‰‡</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;/assets/pusheencode.webp&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;ç¤ºä¾‹å›¾ç‰‡&quot;</span> <span class="attr">style</span>=<span class="string">&quot;zoom:50%;&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="section"># åœ¨çº¿å›¾ç‰‡</span></span><br><span class="line">![<span class="string">code</span>](<span class="link">https://cdn.jsdelivr.net/gh/fomalhaut1998/markdown_pic/img/code.png</span>)</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><p>æœ¬åœ°å›¾ç‰‡:<br><img src="/assets/pusheencode.webp" alt="ç¤ºä¾‹å›¾ç‰‡" style="zoom:50%;" /><br>åœ¨çº¿å›¾ç‰‡:<br><img src="https://cdn.jsdelivr.net/gh/fomalhaut1998/markdown_pic/img/code.png" alt="code"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="1-8-è¡¨æ ¼">1.8 è¡¨æ ¼</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">| é¡¹ç›®æ ‡å· | èµ„é‡‘     | å¤‡æ³¨ |</span><br><span class="line">| -------- | -------- | ---- |</span><br><span class="line">| 1        | 100ï¼Œ000 | æ—    |</span><br><span class="line">| 2        | 200ï¼Œ000 | æ—    |</span><br><span class="line">| 3        | 300,600  | é‡è¦ |</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><table><thead><tr><th>é¡¹ç›®æ ‡å·</th><th>èµ„é‡‘</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>1</td><td>100ï¼Œ000</td><td>æ— </td></tr><tr><td>2</td><td>200ï¼Œ000</td><td>æ— </td></tr><tr><td>3</td><td>300,600</td><td>é‡è¦</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="1-9-å…¬å¼">1.9 å…¬å¼</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$$</span><br><span class="line">\Gamma(z)=\int<span class="emphasis">_0^\infty t^&#123;z-1&#125;e^&#123;-t&#125;dt.</span></span><br><span class="line"><span class="emphasis">$$</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><p>$$<br>\Gamma(z)=\int_0^\infty t^{z-1}e^{-t}dt.<br>$$</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1>2.Butterflyå¤–æŒ‚æ ‡ç­¾</h1><div class="note info flat"><p>è¿™éƒ¨åˆ†å‚è€ƒå®‰çŸ¥é±¼:<a href="https://anzhiy.cn/posts/7d58.html">åŸºäºButterflyçš„å¤–æŒ‚æ ‡ç­¾å¼•å…¥</a></p></div><h2 id="2-1-è¡Œå†…æ–‡æœ¬æ ·å¼-text">2.1 è¡Œå†…æ–‡æœ¬æ ·å¼ text</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;% u æ–‡æœ¬å†…å®¹ %&#125;</span><br><span class="line">&#123;% emp æ–‡æœ¬å†…å®¹ %&#125;</span><br><span class="line">&#123;% wavy æ–‡æœ¬å†…å®¹ %&#125;</span><br><span class="line">&#123;% del æ–‡æœ¬å†…å®¹ %&#125;</span><br><span class="line">&#123;% kbd æ–‡æœ¬å†…å®¹ %&#125;</span><br><span class="line">&#123;% psw æ–‡æœ¬å†…å®¹ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1.</span> å¸¦ &#123;% u ä¸‹åˆ’çº¿ %&#125; çš„æ–‡æœ¬</span><br><span class="line"><span class="bullet">2.</span> å¸¦ &#123;% emp ç€é‡å· %&#125; çš„æ–‡æœ¬</span><br><span class="line"><span class="bullet">3.</span> å¸¦ &#123;% wavy æ³¢æµªçº¿ %&#125; çš„æ–‡æœ¬</span><br><span class="line"><span class="bullet">4.</span> å¸¦ &#123;% del åˆ é™¤çº¿ %&#125; çš„æ–‡æœ¬</span><br><span class="line"><span class="bullet">5.</span> é”®ç›˜æ ·å¼çš„æ–‡æœ¬ &#123;% kbd command %&#125; + &#123;% kbd D %&#125;</span><br><span class="line"><span class="bullet">6.</span> å¯†ç æ ·å¼çš„æ–‡æœ¬ï¼š&#123;% psw è¿™é‡Œæ²¡æœ‰éªŒè¯ç  %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><ol><li>å¸¦ <u>ä¸‹åˆ’çº¿</u> çš„æ–‡æœ¬</li><li>å¸¦ <emp>ç€é‡å·</emp> çš„æ–‡æœ¬</li><li>å¸¦ <wavy>æ³¢æµªçº¿</wavy> çš„æ–‡æœ¬</li><li>å¸¦ <del>åˆ é™¤çº¿</del> çš„æ–‡æœ¬</li><li>é”®ç›˜æ ·å¼çš„æ–‡æœ¬ <kbd>command</kbd> + <kbd>D</kbd></li><li>å¯†ç æ ·å¼çš„æ–‡æœ¬ï¼š<psw>è¿™é‡Œæ²¡æœ‰éªŒè¯ç </psw></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-2-è¡Œå†…æ–‡æœ¬-span">2.2 è¡Œå†…æ–‡æœ¬ span</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% span æ ·å¼å‚æ•°(å‚æ•°ä»¥ç©ºæ ¼åˆ’åˆ†), æ–‡æœ¬å†…å®¹ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>å­—ä½“</code>: logo, code</li><li><code>é¢œè‰²</code>: red,yellow,green,cyan,blue,gray</li><li><code>å¤§å°</code>: small, h4, h3, h2, h1, large, huge, ultra</li><li><code>å¯¹é½æ–¹å‘</code>: left, center, right</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> å½©è‰²æ–‡å­—</span><br><span class="line">åœ¨ä¸€æ®µè¯ä¸­æ–¹ä¾¿æ’å…¥å„ç§é¢œè‰²çš„æ ‡ç­¾ï¼ŒåŒ…æ‹¬ï¼š&#123;% span red, çº¢è‰² %&#125;ã€&#123;% span yellow, é»„è‰² %&#125;ã€&#123;% span green, ç»¿è‰² %&#125;ã€&#123;% span cyan, é’è‰² %&#125;ã€&#123;% span blue, è“è‰² %&#125;ã€&#123;% span gray, ç°è‰² %&#125;ã€‚</span><br><span class="line"><span class="bullet">-</span> è¶…å¤§å·æ–‡å­—</span><br><span class="line">æ–‡æ¡£ã€Œå¼€å§‹ã€é¡µé¢ä¸­çš„æ ‡é¢˜éƒ¨åˆ†å°±æ˜¯è¶…å¤§å·æ–‡å­—ã€‚</span><br><span class="line">&#123;% span center logo large, Volantis %&#125;</span><br><span class="line">&#123;% span center small, A Wonderful Theme for Hexo %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><ul><li>å½©è‰²æ–‡å­—<br>åœ¨ä¸€æ®µè¯ä¸­æ–¹ä¾¿æ’å…¥å„ç§é¢œè‰²çš„æ ‡ç­¾ï¼ŒåŒ…æ‹¬ï¼š<span class='p red'>çº¢è‰²</span>ã€<span class='p yellow'>é»„è‰²</span>ã€<span class='p green'>ç»¿è‰²</span>ã€<span class='p cyan'>é’è‰²</span>ã€<span class='p blue'>è“è‰²</span>ã€<span class='p gray'>ç°è‰²</span>ã€‚</li><li>è¶…å¤§å·æ–‡å­—<br>æ–‡æ¡£ã€Œå¼€å§‹ã€é¡µé¢ä¸­çš„æ ‡é¢˜éƒ¨åˆ†å°±æ˜¯è¶…å¤§å·æ–‡å­—ã€‚<br><span class='p center logo large'>Volantis</span><br><span class='p center small'>A Wonderful Theme for Hexo</span></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-3-æ®µè½æ–‡æœ¬-p">2.3 æ®µè½æ–‡æœ¬ p</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% p æ ·å¼å‚æ•°(å‚æ•°ä»¥ç©ºæ ¼åˆ’åˆ†), æ–‡æœ¬å†…å®¹ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>å­—ä½“</code>: logo, code</li><li><code>é¢œè‰²</code>: red,yellow,green,cyan,blue,gray</li><li><code>å¤§å°</code>: small, h4, h3, h2, h1, large, huge, ultra</li><li><code>å¯¹é½æ–¹å‘</code>: left, center, right</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> å½©è‰²æ–‡å­—</span><br><span class="line">åœ¨ä¸€æ®µè¯ä¸­æ–¹ä¾¿æ’å…¥å„ç§é¢œè‰²çš„æ ‡ç­¾ï¼ŒåŒ…æ‹¬ï¼š&#123;% p red, çº¢è‰² %&#125;ã€&#123;% p yellow, é»„è‰² %&#125;ã€&#123;% p green, ç»¿è‰² %&#125;ã€&#123;% p cyan, é’è‰² %&#125;ã€&#123;% p blue, è“è‰² %&#125;ã€&#123;% p gray, ç°è‰² %&#125;ã€‚</span><br><span class="line"><span class="bullet">-</span> è¶…å¤§å·æ–‡å­—</span><br><span class="line">æ–‡æ¡£ã€Œå¼€å§‹ã€é¡µé¢ä¸­çš„æ ‡é¢˜éƒ¨åˆ†å°±æ˜¯è¶…å¤§å·æ–‡å­—ã€‚</span><br><span class="line">&#123;% p center logo large, Volantis %&#125;</span><br><span class="line">&#123;% p center small, A Wonderful Theme for Hexo %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><ul><li>å½©è‰²æ–‡å­—<br>åœ¨ä¸€æ®µè¯ä¸­æ–¹ä¾¿æ’å…¥å„ç§é¢œè‰²çš„æ ‡ç­¾ï¼ŒåŒ…æ‹¬ï¼š<p class='p red'>çº¢è‰²</p>ã€<p class='p yellow'>é»„è‰²</p>ã€<p class='p green'>ç»¿è‰²</p>ã€<p class='p cyan'>é’è‰²</p>ã€<p class='p blue'>è“è‰²</p>ã€<p class='p gray'>ç°è‰²</p>ã€‚</li><li>è¶…å¤§å·æ–‡å­—<br>æ–‡æ¡£ã€Œå¼€å§‹ã€é¡µé¢ä¸­çš„æ ‡é¢˜éƒ¨åˆ†å°±æ˜¯è¶…å¤§å·æ–‡å­—ã€‚</li></ul><p class='p center logo large'>Volantis</p><p class='p center small'>A Wonderful Theme for Hexo</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-4-å¼•ç”¨note">2.4 å¼•ç”¨note</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">é€šç”¨é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">è¯­æ³•æ ¼å¼</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -5">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">note:</span><br><span class="line">  # Note tag style values:</span><br><span class="line">  #  - simple    bs-callout old alert style. Default.</span><br><span class="line">  #  - modern    bs-callout new (v2-v3) alert style.</span><br><span class="line">  #  - flat      flat callout style with background, like on Mozilla or StackOverflow.</span><br><span class="line">  #  - disabled  disable all CSS styles import of note tag.</span><br><span class="line">  style: simple</span><br><span class="line">  icons: false</span><br><span class="line">  border<span class="emphasis">_radius: 3</span></span><br><span class="line"><span class="emphasis">  # Offset lighter of background in % for modern and flat styles (modern: -12 | 12; flat: -18 | 6).</span></span><br><span class="line"><span class="emphasis">  # Offset also applied to label tag variables. This option can work with disabled note tag.</span></span><br><span class="line"><span class="emphasis">  light_</span>bg<span class="emphasis">_offset: 0</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># è‡ªå¸¦icon</span></span><br><span class="line">&#123;% note [class] [no-icon] [style] %&#125;</span><br><span class="line">Any content (support inline tags too.io).</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"><span class="section"># å¤–éƒ¨icon</span></span><br><span class="line">&#123;% note [color] [icon] [style] %&#125;</span><br><span class="line">Any content (support inline tags too.io).</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.è‡ªå¸¦icon</p><table><thead><tr><th>å‚æ•°</th><th style="text-align:center">ç”¨æ³•</th></tr></thead><tbody><tr><td>class</td><td style="text-align:center">ã€å¯é€‰ã€‘æ ‡è¯†ï¼Œä¸åŒçš„æ ‡è¯†æœ‰ä¸åŒçš„é…è‰² ï¼ˆ default / primary / success / info / warning / danger ï¼‰</td></tr><tr><td>no-icon</td><td style="text-align:center">ã€å¯é€‰ã€‘ä¸æ˜¾ç¤º icon</td></tr><tr><td>style</td><td style="text-align:center">ã€å¯é€‰ã€‘å¯ä»¥è¦†ç›–é…ç½®ä¸­çš„ style ï¼ˆsimple/modern/flat/disabledï¼‰</td></tr></tbody></table><p>2.å¤–éƒ¨icon</p><table><thead><tr><th>å‚æ•°</th><th style="text-align:center">ç”¨æ³•</th></tr></thead><tbody><tr><td>class</td><td style="text-align:center">ã€å¯é€‰ã€‘æ ‡è¯†ï¼Œä¸åŒçš„æ ‡è¯†æœ‰ä¸åŒçš„é…è‰² ï¼ˆ default / blue / pink / red / purple / orange / green ï¼‰</td></tr><tr><td>no-icon</td><td style="text-align:center">ã€å¯é€‰ã€‘å¯é…ç½®è‡ªå®šä¹‰ icon (åªæ”¯æŒ fontawesome å›¾æ ‡, ä¹Ÿå¯ä»¥é…ç½® no-icon )</td></tr><tr><td>style</td><td style="text-align:center">ã€å¯é€‰ã€‘å¯ä»¥è¦†ç›–é…ç½®ä¸­çš„ style ï¼ˆsimple/modern/flat/disabledï¼‰</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><details class="folding-tag" blue><summary> 1.è‡ªå¸¦icon </summary>              <div class='content'>              <p>1.<code>simple</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note simple %&#125;é»˜è®¤ æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default simple %&#125;default æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary simple %&#125;primary æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success simple %&#125;success æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info simple %&#125;info æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning simple %&#125;warning æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger simple %&#125;danger æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>2.<code>modern</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note modern %&#125;é»˜è®¤ æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default modern %&#125;default æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary modern %&#125;primary æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success modern %&#125;success æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info modern %&#125;info æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning modern %&#125;warning æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger modern %&#125;danger æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>3.<code>flat</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note flat %&#125;é»˜è®¤ æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default flat %&#125;default æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary flat %&#125;primary æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success flat %&#125;success æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info flat %&#125;info æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning flat %&#125;warning æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger flat %&#125;danger æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>4.<code>disabled</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note disabled %&#125;é»˜è®¤ æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default disabled %&#125;default æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary disabled %&#125;primary æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success disabled %&#125;success æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info disabled %&#125;info æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning disabled %&#125;warning æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger disabled %&#125;danger æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>5.<code>no-icon</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note no-icon %&#125;é»˜è®¤ æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default no-icon %&#125;default æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary no-icon %&#125;primary æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success no-icon %&#125;success æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info no-icon %&#125;info æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning no-icon %&#125;warning æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger no-icon %&#125;danger æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><details class="folding-tag" blue><summary> 2.å¤–éƒ¨icon </summary>              <div class='content'>              <p>1.<code>simple</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; simple %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; simple %&#125;2021å¹´å¿«åˆ°äº†....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; simple %&#125;å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; simple%&#125;è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; simple %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; simple %&#125;å‰ªåˆ€çŸ³å¤´å¸ƒ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; simple %&#125;å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>2.<code>modern</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; modern %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; modern %&#125;2021å¹´å¿«åˆ°äº†....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; modern %&#125;å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; modern%&#125;è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; modern %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; modern %&#125;å‰ªåˆ€çŸ³å¤´å¸ƒ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; modern %&#125;å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>3.<code>flat</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; flat %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; flat %&#125;2021å¹´å¿«åˆ°äº†....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; flat %&#125;å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; flat%&#125;è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; flat %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; flat %&#125;å‰ªåˆ€çŸ³å¤´å¸ƒ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; flat %&#125;å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>4.<code>disabled</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; disabled %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; disabled %&#125;2021å¹´å¿«åˆ°äº†....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; disabled %&#125;å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; disabled %&#125;è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; disabled %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; disabled %&#125;å‰ªåˆ€çŸ³å¤´å¸ƒ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; disabled %&#125;å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>5.<code>no-icon</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note no-icon %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue no-icon %&#125;2021å¹´å¿«åˆ°äº†....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink no-icon %&#125;å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red no-icon %&#125;è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange no-icon %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple no-icon %&#125;å‰ªåˆ€çŸ³å¤´å¸ƒ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green no-icon %&#125;å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -5"><details class="folding-tag" blue><summary> 1.è‡ªå¸¦icon </summary>              <div class='content'>              <p>1.<code>simple</code>æ ·å¼</p><div class="note simple"><p>é»˜è®¤ æç¤ºå—æ ‡ç­¾</p></div><div class="note default simple"><p>default æç¤ºå—æ ‡ç­¾</p></div><div class="note primary simple"><p>primary æç¤ºå—æ ‡ç­¾</p></div><div class="note success simple"><p>success æç¤ºå—æ ‡ç­¾</p></div><div class="note info simple"><p>info æç¤ºå—æ ‡ç­¾</p></div><div class="note warning simple"><p>warning æç¤ºå—æ ‡ç­¾</p></div><div class="note danger simple"><p>danger æç¤ºå—æ ‡ç­¾</p></div>2.`modern`æ ·å¼<div class="note modern"><p>é»˜è®¤ æç¤ºå—æ ‡ç­¾</p></div><div class="note default modern"><p>default æç¤ºå—æ ‡ç­¾</p></div><div class="note primary modern"><p>primary æç¤ºå—æ ‡ç­¾</p></div><div class="note success modern"><p>success æç¤ºå—æ ‡ç­¾</p></div><div class="note info modern"><p>info æç¤ºå—æ ‡ç­¾</p></div><div class="note warning modern"><p>warning æç¤ºå—æ ‡ç­¾</p></div><div class="note danger modern"><p>danger æç¤ºå—æ ‡ç­¾</p></div><p>3.<code>flat</code>æ ·å¼</p><div class="note flat"><p>é»˜è®¤ æç¤ºå—æ ‡ç­¾</p></div><div class="note default flat"><p>default æç¤ºå—æ ‡ç­¾</p></div><div class="note primary flat"><p>primary æç¤ºå—æ ‡ç­¾</p></div><div class="note success flat"><p>success æç¤ºå—æ ‡ç­¾</p></div><div class="note info flat"><p>info æç¤ºå—æ ‡ç­¾</p></div><div class="note warning flat"><p>warning æç¤ºå—æ ‡ç­¾</p></div><div class="note danger flat"><p>danger æç¤ºå—æ ‡ç­¾</p></div><p>4.<code>disabled</code>æ ·å¼</p><div class="note disabled"><p>é»˜è®¤ æç¤ºå—æ ‡ç­¾</p></div><div class="note default disabled"><p>default æç¤ºå—æ ‡ç­¾</p></div><div class="note primary disabled"><p>primary æç¤ºå—æ ‡ç­¾</p></div><div class="note success disabled"><p>success æç¤ºå—æ ‡ç­¾</p></div><div class="note info disabled"><p>info æç¤ºå—æ ‡ç­¾</p></div><div class="note warning disabled"><p>warning æç¤ºå—æ ‡ç­¾</p></div><div class="note danger disabled"><p>danger æç¤ºå—æ ‡ç­¾</p></div><p>5.<code>no-icon</code>æ ·å¼</p><div class="note no-icon flat"><p>é»˜è®¤ æç¤ºå—æ ‡ç­¾</p></div><div class="note default no-icon flat"><p>default æç¤ºå—æ ‡ç­¾</p></div><div class="note primary no-icon flat"><p>primary æç¤ºå—æ ‡ç­¾</p></div><div class="note success no-icon flat"><p>success æç¤ºå—æ ‡ç­¾</p></div><div class="note info no-icon flat"><p>info æç¤ºå—æ ‡ç­¾</p></div><div class="note warning no-icon flat"><p>warning æç¤ºå—æ ‡ç­¾</p></div><div class="note danger no-icon flat"><p>danger æç¤ºå—æ ‡ç­¾</p></div>              </div>            </details><details class="folding-tag" blue><summary> 2.å¤–éƒ¨icon </summary>              <div class='content'>              <p>1.<code>simple</code>æ ·å¼</p><div class="note icon-padding simple"><i class="note-icon fab fa-cc-visa"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note blue icon-padding simple"><i class="note-icon fas fa-bullhorn"></i><p>2021å¹´å¿«åˆ°äº†â€¦</p></div><div class="note pink icon-padding simple"><i class="note-icon fas fa-car-crash"></i><p>å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</p></div><div class="note red icon-padding simple"><i class="note-icon fas fa-fan"></i><p>è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</p></div><div class="note orange icon-padding simple"><i class="note-icon fas fa-battery-half"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note purple icon-padding simple"><i class="note-icon far fa-hand-scissors"></i><p>å‰ªåˆ€çŸ³å¤´å¸ƒ</p></div><div class="note green icon-padding simple"><i class="note-icon fab fa-internet-explorer"></i><p>å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</p></div><p>2.<code>modern</code>æ ·å¼</p><div class="note icon-padding modern"><i class="note-icon fab fa-cc-visa"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p>2021å¹´å¿«åˆ°äº†â€¦</p></div><div class="note pink icon-padding modern"><i class="note-icon fas fa-car-crash"></i><p>å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</p></div><div class="note red icon-padding modern"><i class="note-icon fas fa-fan"></i><p>è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</p></div><div class="note orange icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note purple icon-padding modern"><i class="note-icon far fa-hand-scissors"></i><p>å‰ªåˆ€çŸ³å¤´å¸ƒ</p></div><div class="note green icon-padding modern"><i class="note-icon fab fa-internet-explorer"></i><p>å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</p></div><p>3.<code>flat</code>æ ·å¼</p><div class="note icon-padding flat"><i class="note-icon fab fa-cc-visa"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note blue icon-padding flat"><i class="note-icon fas fa-bullhorn"></i><p>2021å¹´å¿«åˆ°äº†â€¦</p></div><div class="note pink icon-padding flat"><i class="note-icon fas fa-car-crash"></i><p>å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</p></div><div class="note red icon-padding flat"><i class="note-icon fas fa-fan"></i><p>è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</p></div><div class="note orange icon-padding flat"><i class="note-icon fas fa-battery-half"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note purple icon-padding flat"><i class="note-icon far fa-hand-scissors"></i><p>å‰ªåˆ€çŸ³å¤´å¸ƒ</p></div><div class="note green icon-padding flat"><i class="note-icon fab fa-internet-explorer"></i><p>å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</p></div><p>4.<code>disabled</code>æ ·å¼</p><div class="note icon-padding disabled"><i class="note-icon fab fa-cc-visa"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note blue icon-padding disabled"><i class="note-icon fas fa-bullhorn"></i><p>2021å¹´å¿«åˆ°äº†â€¦</p></div><div class="note pink icon-padding disabled"><i class="note-icon fas fa-car-crash"></i><p>å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</p></div><div class="note red icon-padding disabled"><i class="note-icon fas fa-fan"></i><p>è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</p></div><div class="note orange icon-padding disabled"><i class="note-icon fas fa-battery-half"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note purple icon-padding disabled"><i class="note-icon far fa-hand-scissors"></i><p>å‰ªåˆ€çŸ³å¤´å¸ƒ</p></div><div class="note green icon-padding disabled"><i class="note-icon fab fa-internet-explorer"></i><p>å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</p></div><p>5.<code>no-icon</code>æ ·å¼</p><div class="note no-icon flat"><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note blue no-icon flat"><p>2021å¹´å¿«åˆ°äº†â€¦</p></div><div class="note pink no-icon flat"><p>å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</p></div><div class="note red no-icon flat"><p>è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</p></div><div class="note orange no-icon flat"><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note purple no-icon flat"><p>å‰ªåˆ€çŸ³å¤´å¸ƒ</p></div><div class="note green no-icon flat"><p>å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</p></div>              </div>            </details><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-5-ä¸Šæ ‡æ ‡ç­¾-tip">2.5 ä¸Šæ ‡æ ‡ç­¾ tip</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip [å‚æ•°ï¼Œå¯é€‰] %&#125;æ–‡æœ¬å†…å®¹&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>æ ·å¼</code>: success,error,warning,bolt,ban,home,sync,cogs,key,bell</li><li><code>è‡ªå®šä¹‰å›¾æ ‡</code>: æ”¯æŒfontawesomeã€‚</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip %&#125;default&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip info %&#125;info&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip success %&#125;success&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip error %&#125;error&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip warning %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip bolt %&#125;bolt&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban %&#125;ban&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip home %&#125;home&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip sync %&#125;sync&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip cogs %&#125;cogs&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip key %&#125;key&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip bell %&#125;bell&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip fa-atom %&#125;è‡ªå®šä¹‰font awesomeå›¾æ ‡&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><div class="tip "><p>default</p></div><div class="tip info"><p>info</p></div><div class="tip success"><p>success</p></div><div class="tip error"><p>error</p></div><div class="tip warning"><p>warning</p></div><div class="tip bolt"><p>bolt</p></div><div class="tip ban"><p>ban</p></div><div class="tip home"><p>home</p></div><div class="tip sync"><p>sync</p></div><div class="tip cogs"><p>cogs</p></div><div class="tip key"><p>key</p></div><div class="tip bell"><p>bell</p></div><div class="tip fa-atom"><p>è‡ªå®šä¹‰font awesomeå›¾æ ‡</p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-6-åŠ¨æ€æ ‡ç­¾-anima">2.6 åŠ¨æ€æ ‡ç­¾ anima</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip [å‚æ•°ï¼Œå¯é€‰] %&#125;æ–‡æœ¬å†…å®¹&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><div class="note info flat"><ol><li>å°†æ‰€éœ€çš„CSSç±»æ·»åŠ åˆ°å›¾æ ‡ï¼ˆæˆ–DOMä¸­çš„ä»»ä½•å…ƒç´ ï¼‰ã€‚</li><li>å¯¹äºçˆ¶çº§æ‚¬åœæ ·å¼ï¼Œéœ€è¦ç»™ç›®æ ‡å…ƒç´ æ·»åŠ æŒ‡å®šCSSç±»ï¼ŒåŒæ—¶è¿˜è¦ç»™ç›®æ ‡å…ƒç´ çš„çˆ¶çº§å…ƒç´ æ·»åŠ CSSç±»<code>faa-parent animated-hover</code>ã€‚ï¼ˆè¯¦æƒ…è§ç¤ºä¾‹åŠç¤ºä¾‹æºç ï¼‰<br>You can regulate the speed of the animation by adding the CSS class or . faa-fastfaa-slow</li><li>å¯ä»¥é€šè¿‡ç»™ç›®æ ‡å…ƒç´ æ·»åŠ CSSç±»<code>faa-fast</code>æˆ–<code>faa-slow</code>æ¥æ§åˆ¶åŠ¨ç”»å¿«æ…¢ã€‚</li></ol></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.On DOM loadï¼ˆå½“é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºåŠ¨ç”»ï¼‰</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip warning faa-horizontal animated %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-flash animated %&#125;ban&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><p>2.è°ƒæ•´åŠ¨ç”»é€Ÿåº¦</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip warning faa-horizontal animated faa-fast %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-flash animated faa-slow %&#125;ban&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><p>3.On hoverï¼ˆå½“é¼ æ ‡æ‚¬åœæ—¶æ˜¾ç¤ºåŠ¨ç”»ï¼‰</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip warning faa-horizontal animated-hover %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-flash animated-hover %&#125;ban&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><p>4.On parent hoverï¼ˆå½“é¼ æ ‡æ‚¬åœåœ¨çˆ¶çº§å…ƒç´ æ—¶æ˜¾ç¤ºåŠ¨ç”»ï¼‰</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip warning faa-parent animated-hover %&#125;<span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;faa-horizontal&quot;</span>&gt;</span></span>warning<span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-parent animated-hover %&#125;<span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;faa-flash&quot;</span>&gt;</span></span>ban<span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>1.On DOM loadï¼ˆå½“é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºåŠ¨ç”»ï¼‰</p><div class="tip warning faa-horizontal animated"><p>warning</p></div><div class="tip ban faa-flash animated"><p>ban</p></div>2.è°ƒæ•´åŠ¨ç”»é€Ÿåº¦<div class="tip warning faa-horizontal animated faa-fast"><p>warning</p></div><div class="tip ban faa-flash animated faa-slow"><p>ban</p></div>3.On hoverï¼ˆå½“é¼ æ ‡æ‚¬åœæ—¶æ˜¾ç¤ºåŠ¨ç”»ï¼‰<div class="tip warning faa-horizontal animated-hover"><p>warning</p></div><div class="tip ban faa-flash animated-hover"><p>ban</p></div>4.On parent hoverï¼ˆå½“é¼ æ ‡æ‚¬åœåœ¨çˆ¶çº§å…ƒç´ æ—¶æ˜¾ç¤ºåŠ¨ç”»ï¼‰<div class="tip warning faa-parent animated-hover"><p class="faa-horizontal">warning</p></div><div class="tip ban faa-parent animated-hover"><p class="faa-flash">ban</p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-7-å¤é€‰åˆ—è¡¨-checkbox">2.7 å¤é€‰åˆ—è¡¨ checkbox</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% checkbox æ ·å¼å‚æ•°ï¼ˆå¯é€‰ï¼‰, æ–‡æœ¬ï¼ˆæ”¯æŒç®€å•mdï¼‰ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>æ ·å¼</code>: plus, minus, times</li><li><code>é¢œè‰²</code>: red,yellow,green,cyan,blue,gray</li><li><code>é€‰ä¸­çŠ¶æ€</code>: checked</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;% checkbox çº¯æ–‡æœ¬æµ‹è¯• %&#125;</span><br><span class="line">&#123;% checkbox checked, æ”¯æŒç®€å•çš„ [<span class="string">markdown</span>](<span class="link">https://guides.github.com/features/mastering-markdown/</span>) è¯­æ³• %&#125;</span><br><span class="line">&#123;% checkbox red, æ”¯æŒè‡ªå®šä¹‰é¢œè‰² %&#125;</span><br><span class="line">&#123;% checkbox green checked, ç»¿è‰² + é»˜è®¤é€‰ä¸­ %&#125;</span><br><span class="line">&#123;% checkbox yellow checked, é»„è‰² + é»˜è®¤é€‰ä¸­ %&#125;</span><br><span class="line">&#123;% checkbox cyan checked, é’è‰² + é»˜è®¤é€‰ä¸­ %&#125;</span><br><span class="line">&#123;% checkbox blue checked, è“è‰² + é»˜è®¤é€‰ä¸­ %&#125;</span><br><span class="line">&#123;% checkbox plus green checked, å¢åŠ  %&#125;</span><br><span class="line">&#123;% checkbox minus yellow checked, å‡å°‘ %&#125;</span><br><span class="line">&#123;% checkbox times red checked, å‰ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><div class='checkbox'><input type="checkbox" />            <p>çº¯æ–‡æœ¬æµ‹è¯•</p>            </div><div class='checkbox checked'><input type="checkbox" checked="checked"/>            <p>æ”¯æŒç®€å•çš„ <a href="https://guides.github.com/features/mastering-markdown/">markdown</a> è¯­æ³•</p>            </div><div class='checkbox red'><input type="checkbox" />            <p>æ”¯æŒè‡ªå®šä¹‰é¢œè‰²</p>            </div><div class='checkbox green checked'><input type="checkbox" checked="checked"/>            <p>ç»¿è‰² + é»˜è®¤é€‰ä¸­</p>            </div><div class='checkbox yellow checked'><input type="checkbox" checked="checked"/>            <p>é»„è‰² + é»˜è®¤é€‰ä¸­</p>            </div><div class='checkbox cyan checked'><input type="checkbox" checked="checked"/>            <p>é’è‰² + é»˜è®¤é€‰ä¸­</p>            </div><div class='checkbox blue checked'><input type="checkbox" checked="checked"/>            <p>è“è‰² + é»˜è®¤é€‰ä¸­</p>            </div><div class='checkbox plus green checked'><input type="checkbox" checked="checked"/>            <p>å¢åŠ </p>            </div><div class='checkbox minus yellow checked'><input type="checkbox" checked="checked"/>            <p>å‡å°‘</p>            </div><div class='checkbox times red checked'><input type="checkbox" checked="checked"/>            <p>å‰</p>            </div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-8-å•é€‰åˆ—è¡¨-radio">2.8 å•é€‰åˆ—è¡¨ radio</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% radio æ ·å¼å‚æ•°ï¼ˆå¯é€‰ï¼‰, æ–‡æœ¬ï¼ˆæ”¯æŒç®€å•mdï¼‰ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>é¢œè‰²</code>: red,yellow,green,cyan,blue,gray</li><li><code>é€‰ä¸­çŠ¶æ€</code>: checked</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;% radio çº¯æ–‡æœ¬æµ‹è¯• %&#125;</span><br><span class="line">&#123;% radio checked, æ”¯æŒç®€å•çš„ [<span class="string">markdown</span>](<span class="link">https://guides.github.com/features/mastering-markdown/</span>) è¯­æ³• %&#125;</span><br><span class="line">&#123;% radio red, æ”¯æŒè‡ªå®šä¹‰é¢œè‰² %&#125;</span><br><span class="line">&#123;% radio green, ç»¿è‰² %&#125;</span><br><span class="line">&#123;% radio yellow, é»„è‰² %&#125;</span><br><span class="line">&#123;% radio cyan, é’è‰² %&#125;</span><br><span class="line">&#123;% radio blue, è“è‰² %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><div class='checkbox'><input type="radio" />            <p>çº¯æ–‡æœ¬æµ‹è¯•</p>            </div><div class='checkbox checked'><input type="radio" checked="checked"/>            <p>æ”¯æŒç®€å•çš„ <a href="https://guides.github.com/features/mastering-markdown/">markdown</a> è¯­æ³•</p>            </div><div class='checkbox red'><input type="radio" />            <p>æ”¯æŒè‡ªå®šä¹‰é¢œè‰²</p>            </div><div class='checkbox green'><input type="radio" />            <p>ç»¿è‰²</p>            </div><div class='checkbox yellow'><input type="radio" />            <p>é»„è‰²</p>            </div><div class='checkbox cyan'><input type="radio" />            <p>é’è‰²</p>            </div><div class='checkbox blue'><input type="radio" />            <p>è“è‰²</p>            </div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-9-æ—¶é—´è½´-timeline">2.9 æ—¶é—´è½´ timeline</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;% timeline æ—¶é—´çº¿æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰[,color] %&#125;</span><br><span class="line">&lt;!-- timeline æ—¶é—´èŠ‚ç‚¹ï¼ˆæ ‡é¢˜ï¼‰ --&gt;</span><br><span class="line">æ­£æ–‡å†…å®¹</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&lt;!-- timeline æ—¶é—´èŠ‚ç‚¹ï¼ˆæ ‡é¢˜ï¼‰ --&gt;</span><br><span class="line">æ­£æ–‡å†…å®¹</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>title</code>:æ ‡é¢˜/æ—¶é—´çº¿</li><li><code>color</code>:<code>timeline</code>é¢œè‰²:default(ç•™ç©º) / blue / pink / red / purple / orange / green</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;% timeline æ—¶é—´è½´æ ·å¼,blue %&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- timeline 2020-07-24 [<span class="string">2.6.6 -&gt; 3.0</span>](<span class="link">https://github.com/volantis-x/hexo-theme-volantis/releases</span>) --&gt;</span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> å¦‚æœæœ‰ <span class="code">`hexo-lazyload-image`</span> æ’ä»¶ï¼Œéœ€è¦åˆ é™¤å¹¶é‡æ–°å®‰è£…æœ€æ–°ç‰ˆæœ¬ï¼Œè®¾ç½® <span class="code">`lazyload.isSPA: true`</span>ã€‚</span><br><span class="line"><span class="bullet">2.</span> 2.x ç‰ˆæœ¬çš„ css å’Œ js ä¸é€‚ç”¨äº 3.x ç‰ˆæœ¬ï¼Œå¦‚æœä½¿ç”¨äº† <span class="code">`use_cdn: true`</span> åˆ™éœ€è¦åˆ é™¤ã€‚</span><br><span class="line"><span class="bullet">3.</span> 2.x ç‰ˆæœ¬çš„ fancybox æ ‡ç­¾åœ¨ 3.x ç‰ˆæœ¬ä¸­è¢«é‡å‘½åä¸º gallery ã€‚</span><br><span class="line"><span class="bullet">4.</span> 2.x ç‰ˆæœ¬çš„ç½®é¡¶ <span class="code">`top: true`</span> æ”¹ä¸ºäº† <span class="code">`pin: true`</span>ï¼Œå¹¶ä¸”åŒæ ·é€‚ç”¨äº <span class="code">`layout: page`</span> çš„é¡µé¢ã€‚</span><br><span class="line"><span class="bullet">5.</span> å¦‚æœä½¿ç”¨äº† <span class="code">`hexo-offline`</span> æ’ä»¶ï¼Œå»ºè®®å¸è½½ï¼Œ3.0 ç‰ˆæœ¬é»˜è®¤å¼€å¯äº† pjax æœåŠ¡ã€‚</span><br><span class="line"></span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- timeline 2020-05-15 [<span class="string">2.6.3 -&gt; 2.6.6</span>](<span class="link">https://github.com/volantis-x/hexo-theme-volantis/releases/tag/2.6.6</span>) --&gt;</span><br><span class="line"></span><br><span class="line">ä¸éœ€è¦é¢å¤–å¤„ç†ã€‚</span><br><span class="line"></span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- timeline 2020-04-20 [<span class="string">2.6.2 -&gt; 2.6.3</span>](<span class="link">https://github.com/volantis-x/hexo-theme-volantis/releases/tag/2.6.3</span>) --&gt;</span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> å…¨å±€æœç´¢ <span class="code">`seotitle`</span> å¹¶æ›¿æ¢ä¸º <span class="code">`seo_title`</span>ã€‚</span><br><span class="line"><span class="bullet">2.</span> group ç»„ä»¶çš„ç´¢å¼•è§„åˆ™æœ‰å˜ï¼Œä½¿ç”¨ group ç»„ä»¶çš„æ–‡ç« å†…ï¼Œ<span class="code">`group: group_name`</span> å¯¹åº”çš„ç»„ä»¶åå¿…é¡»æ˜¯ <span class="code">`group_name`</span>ã€‚</span><br><span class="line"><span class="bullet">2.</span> group ç»„ä»¶çš„åˆ—è¡¨åä¼˜å…ˆæ˜¾ç¤ºæ–‡ç« çš„ <span class="code">`short_title`</span> å…¶æ¬¡æ˜¯ <span class="code">`title`</span>ã€‚</span><br><span class="line"></span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line"></span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><div class="timeline blue"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>æ—¶é—´è½´æ ·å¼</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2020-07-24 <a href="https://github.com/volantis-x/hexo-theme-volantis/releases">2.6.6 -&gt; 3.0</a></p></div></div><div class='timeline-item-content'><ol><li>å¦‚æœæœ‰ <code>hexo-lazyload-image</code> æ’ä»¶ï¼Œéœ€è¦åˆ é™¤å¹¶é‡æ–°å®‰è£…æœ€æ–°ç‰ˆæœ¬ï¼Œè®¾ç½® <code>lazyload.isSPA: true</code>ã€‚</li><li>2.x ç‰ˆæœ¬çš„ css å’Œ js ä¸é€‚ç”¨äº 3.x ç‰ˆæœ¬ï¼Œå¦‚æœä½¿ç”¨äº† <code>use_cdn: true</code> åˆ™éœ€è¦åˆ é™¤ã€‚</li><li>2.x ç‰ˆæœ¬çš„ fancybox æ ‡ç­¾åœ¨ 3.x ç‰ˆæœ¬ä¸­è¢«é‡å‘½åä¸º gallery ã€‚</li><li>2.x ç‰ˆæœ¬çš„ç½®é¡¶ <code>top: true</code> æ”¹ä¸ºäº† <code>pin: true</code>ï¼Œå¹¶ä¸”åŒæ ·é€‚ç”¨äº <code>layout: page</code> çš„é¡µé¢ã€‚</li><li>å¦‚æœä½¿ç”¨äº† <code>hexo-offline</code> æ’ä»¶ï¼Œå»ºè®®å¸è½½ï¼Œ3.0 ç‰ˆæœ¬é»˜è®¤å¼€å¯äº† pjax æœåŠ¡ã€‚</li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2020-05-15 <a href="https://github.com/volantis-x/hexo-theme-volantis/releases/tag/2.6.6">2.6.3 -&gt; 2.6.6</a></p></div></div><div class='timeline-item-content'><p>ä¸éœ€è¦é¢å¤–å¤„ç†ã€‚</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2020-04-20 <a href="https://github.com/volantis-x/hexo-theme-volantis/releases/tag/2.6.3">2.6.2 -&gt; 2.6.3</a></p></div></div><div class='timeline-item-content'><ol><li>å…¨å±€æœç´¢ <code>seotitle</code> å¹¶æ›¿æ¢ä¸º <code>seo_title</code>ã€‚</li><li>group ç»„ä»¶çš„ç´¢å¼•è§„åˆ™æœ‰å˜ï¼Œä½¿ç”¨ group ç»„ä»¶çš„æ–‡ç« å†…ï¼Œ<code>group: group_name</code> å¯¹åº”çš„ç»„ä»¶åå¿…é¡»æ˜¯ <code>group_name</code>ã€‚</li><li>group ç»„ä»¶çš„åˆ—è¡¨åä¼˜å…ˆæ˜¾ç¤ºæ–‡ç« çš„ <code>short_title</code> å…¶æ¬¡æ˜¯ <code>title</code>ã€‚</li></ol></div></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-10-é“¾æ¥å¡ç‰‡-link">2.10 é“¾æ¥å¡ç‰‡ link</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% link æ ‡é¢˜, é“¾æ¥, å›¾ç‰‡é“¾æ¥ï¼ˆå¯é€‰ï¼‰ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% link ç³–æœå±‹æ•™ç¨‹è´´, https://akilar.top/posts/615e2dec/, https://cdn.cbd.int/akilar-candyassets@1.0.36/image/siteicon/favicon.ico %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><div class="tag link"><a class="link-card" title="ç³–æœå±‹æ•™ç¨‹è´´" href="https://akilar.top/posts/615e2dec/"><div class="left"><img src="https://cdn.cbd.int/akilar-candyassets@1.0.36/image/siteicon/favicon.ico"/></div><div class="right"><p class="text">ç³–æœå±‹æ•™ç¨‹è´´</p><p class="url">https://akilar.top/posts/615e2dec/</p></div></a></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-11-æŒ‰é’®-btns">2.11 æŒ‰é’® btns</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btns æ ·å¼å‚æ•° %&#125;</span><br><span class="line">&#123;% cell æ ‡é¢˜, é“¾æ¥, å›¾ç‰‡æˆ–è€…å›¾æ ‡ %&#125;</span><br><span class="line">&#123;% cell æ ‡é¢˜, é“¾æ¥, å›¾ç‰‡æˆ–è€…å›¾æ ‡ %&#125;</span><br><span class="line">&#123;% endbtns %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li>åœ†è§’æ ·å¼ï¼šrounded, circle</li><li>å¢åŠ æ–‡å­—æ ·å¼ï¼šå¯ä»¥åœ¨å®¹å™¨å†…å¢åŠ  <code>&lt;b&gt;</code>æ ‡é¢˜<code>&lt;/b&gt;</code>å’Œ<code>&lt;p&gt;</code>æè¿°æ–‡å­—<code>&lt;/p&gt;</code></li><li>å¸ƒå±€æ–¹å¼ï¼š<br>é»˜è®¤ä¸ºè‡ªåŠ¨å®½åº¦ï¼Œé€‚åˆè§†é‡å†…åªæœ‰ä¸€ä¸¤ä¸ªçš„æƒ…å†µã€‚</li></ol><table><thead><tr><th>å‚æ•°</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>wide</td><td>å®½ä¸€ç‚¹çš„æŒ‰é’®</td></tr><tr><td>fill</td><td>å¡«å……å¸ƒå±€ï¼Œè‡ªåŠ¨é“ºæ»¡è‡³å°‘ä¸€è¡Œï¼Œå¤šäº†ä¼šæ¢è¡Œ</td></tr><tr><td>center</td><td>å±…ä¸­ï¼ŒæŒ‰é’®ä¹‹é—´æ˜¯å›ºå®šé—´è·</td></tr><tr><td>around</td><td>å±…ä¸­åˆ†æ•£</td></tr><tr><td>grid2</td><td>ç­‰å®½æœ€å¤š2åˆ—ï¼Œå±å¹•å˜çª„ä¼šé€‚å½“å‡å°‘åˆ—æ•°</td></tr><tr><td>grid3</td><td>ç­‰å®½æœ€å¤š3åˆ—ï¼Œå±å¹•å˜çª„ä¼šé€‚å½“å‡å°‘åˆ—æ•°</td></tr><tr><td>grid4</td><td>ç­‰å®½æœ€å¤š4åˆ—ï¼Œå±å¹•å˜çª„ä¼šé€‚å½“å‡å°‘åˆ—æ•°</td></tr><tr><td>grid5</td><td>ç­‰å®½æœ€å¤š5åˆ—ï¼Œå±å¹•å˜çª„ä¼šé€‚å½“å‡å°‘åˆ—æ•°</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.å¦‚æœéœ€è¦æ˜¾ç¤ºç±»ä¼¼ã€Œå›¢é˜Ÿæˆå‘˜ã€ä¹‹ç±»çš„ä¸€ç»„å«æœ‰å¤´åƒçš„é“¾æ¥</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btns circle grid5 %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% endbtns %&#125;</span><br></pre></td></tr></table></figure><p>2.æˆ–è€…å«æœ‰å›¾æ ‡çš„æŒ‰é’®</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btns rounded grid5 %&#125;</span><br><span class="line">&#123;% cell ä¸‹è½½æºç , /, fas fa-download %&#125;</span><br><span class="line">&#123;% cell æŸ¥çœ‹æ–‡æ¡£, /, fas fa-book-open %&#125;</span><br><span class="line">&#123;% endbtns %&#125;</span><br></pre></td></tr></table></figure><p>3.åœ†å½¢å›¾æ ‡ + æ ‡é¢˜ + æè¿° + å›¾ç‰‡ + ç½‘æ ¼5åˆ— + å±…ä¸­</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btns circle center grid5 %&#125;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#x27;https://apps.apple.com/cn/app/heart-mate-pro-hrm-utility/id1463348922?ls=1&#x27;</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&#x27;fab fa-apple&#x27;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">b</span>&gt;</span></span>å¿ƒç‡ç®¡å®¶<span class="language-xml"><span class="tag">&lt;/<span class="name">b</span>&gt;</span></span></span><br><span class="line">  &#123;% p red, ä¸“ä¸šç‰ˆ %&#125;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#x27;https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/qrcode/heartmate_pro.png&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#x27;https://apps.apple.com/cn/app/heart-mate-lite-hrm-utility/id1475747930?ls=1&#x27;</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&#x27;fab fa-apple&#x27;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">b</span>&gt;</span></span>å¿ƒç‡ç®¡å®¶<span class="language-xml"><span class="tag">&lt;/<span class="name">b</span>&gt;</span></span></span><br><span class="line">  &#123;% p green, å…è´¹ç‰ˆ %&#125;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#x27;https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/qrcode/heartmate_lite.png&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line">&#123;% endbtns %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>1.å¦‚æœéœ€è¦æ˜¾ç¤ºç±»ä¼¼ã€Œå›¢é˜Ÿæˆå‘˜ã€ä¹‹ç±»çš„ä¸€ç»„å«æœ‰å¤´åƒçš„é“¾æ¥</p><div class="btns circle grid5">            <a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a><a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a><a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a><a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a><a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a>          </div>2.æˆ–è€…å«æœ‰å›¾æ ‡çš„æŒ‰é’®<div class="btns rounded grid5">            <a class="button" href='/' title='ä¸‹è½½æºç '><i class='fas fa-download'></i>ä¸‹è½½æºç </a><a class="button" href='/' title='æŸ¥çœ‹æ–‡æ¡£'><i class='fas fa-book-open'></i>æŸ¥çœ‹æ–‡æ¡£</a>          </div>3.åœ†å½¢å›¾æ ‡ + æ ‡é¢˜ + æè¿° + å›¾ç‰‡ + ç½‘æ ¼5åˆ— + å±…ä¸­<div class="btns circle center grid5">            <a href='https://apps.apple.com/cn/app/heart-mate-pro-hrm-utility/id1463348922?ls=1'>  <i class='fab fa-apple'></i>  <b>å¿ƒç‡ç®¡å®¶</b>  <p class='p red'>ä¸“ä¸šç‰ˆ</p>  <img src='https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/qrcode/heartmate_pro.png'></a><a href='https://apps.apple.com/cn/app/heart-mate-lite-hrm-utility/id1475747930?ls=1'>  <i class='fab fa-apple'></i>  <b>å¿ƒç‡ç®¡å®¶</b>  <p class='p green'>å…è´¹ç‰ˆ</p>  <img src='https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/qrcode/heartmate_lite.png'></a>          </div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-12-githubå¡ç‰‡-ghcard">2.12 githubå¡ç‰‡ ghcard</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% ghcard ç”¨æˆ·å, å…¶å®ƒå‚æ•°ï¼ˆå¯é€‰ï¼‰ %&#125;</span><br><span class="line">&#123;% ghcard ç”¨æˆ·å/ä»“åº“, å…¶å®ƒå‚æ•°ï¼ˆå¯é€‰ï¼‰ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><p>ä½¿ç”¨<code>,</code>åˆ†å‰²å„ä¸ªå‚æ•°ã€‚å†™æ³•ä¸ºï¼š<code>å‚æ•°å=å‚æ•°å€¼</code><br>ä»¥ä¸‹åªå†™å‡ ä¸ªå¸¸ç”¨å‚æ•°å€¼ã€‚</p><table><thead><tr><th><strong>å‚æ•°å</strong></th><th>å–å€¼</th><th>é‡Šä¹‰</th></tr></thead><tbody><tr><td>hide</td><td>stars,commits,prs,issues,contribs</td><td>éšè—æŒ‡å®šç»Ÿè®¡</td></tr><tr><td>count_private</td><td>true</td><td>å°†ç§äººé¡¹ç›®è´¡çŒ®æ·»åŠ åˆ°æ€»æäº¤è®¡æ•°ä¸­</td></tr><tr><td>show_icons</td><td>true</td><td>æ˜¾ç¤ºå›¾æ ‡</td></tr><tr><td>theme</td><td>æŸ¥é˜…:<a href="https://github.com/anuraghazra/github-readme-stats/blob/master/themes/README.md">Available Themes</a></td><td>ä¸»é¢˜</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.ç”¨æˆ·ä¿¡æ¯å¡ç‰‡</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">| &#123;% ghcard fomalhaut1998 %&#125; | &#123;% ghcard fomalhaut1998, theme=vue %&#125; |</span><br><span class="line">| -- | -- |</span><br><span class="line">| &#123;% ghcard fomalhaut1998, theme=buefy %&#125; | &#123;% ghcard fomalhaut1998, theme=solarized-light %&#125; |</span><br><span class="line">| &#123;% ghcard fomalhaut1998, theme=onedark %&#125; | &#123;% ghcard fomalhaut1998, theme=solarized-dark %&#125; |</span><br><span class="line">| &#123;% ghcard fomalhaut1998, theme=algolia %&#125; | &#123;% ghcard fomalhaut1998, theme=calm %&#125; |</span><br></pre></td></tr></table></figure><p>2.ä»“åº“ä¿¡æ¯å¡ç‰‡</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">| &#123;% ghcard volantis-x/hexo-theme-volantis %&#125; | &#123;% ghcard volantis-x/hexo-theme-volantis, theme=vue %&#125; |</span><br><span class="line">| -- | -- |</span><br><span class="line">| &#123;% ghcard volantis-x/hexo-theme-volantis, theme=buefy %&#125; | &#123;% ghcard volantis-x/hexo-theme-volantis, theme=solarized-light %&#125; |</span><br><span class="line">| &#123;% ghcard volantis-x/hexo-theme-volantis, theme=onedark %&#125; | &#123;% ghcard volantis-x/hexo-theme-volantis, theme=solarized-dark %&#125; |</span><br><span class="line">| &#123;% ghcard volantis-x/hexo-theme-volantis, theme=algolia %&#125; | &#123;% ghcard volantis-x/hexo-theme-volantis, theme=calm %&#125; |</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>1.ç”¨æˆ·ä¿¡æ¯å¡ç‰‡</p><table><thead><tr><th><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&show_owner=true"/></a></th><th><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=vue&show_owner=true"/></a></th></tr></thead><tbody><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=buefy&show_owner=true"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=solarized-light&show_owner=true"/></a></td></tr><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=onedark&show_owner=true"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=solarized-dark&show_owner=true"/></a></td></tr><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=algolia&show_owner=true"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=calm&show_owner=true"/></a></td></tr></tbody></table><p>2.ä»“åº“ä¿¡æ¯å¡ç‰‡</p><table><thead><tr><th><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&show_owner=true"/></a></th><th><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=vue&show_owner=true"/></a></th></tr></thead><tbody><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=buefy&show_owner=true"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=solarized-light&show_owner=true"/></a></td></tr><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=onedark&show_owner=true"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=solarized-dark&show_owner=true"/></a></td></tr><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=algolia&show_owner=true"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=calm&show_owner=true"/></a></td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-13-githubå¾½æ ‡-ghbdage">2.13 githubå¾½æ ‡ ghbdage</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% bdage [right],[left],[logo]||[color],[link],[title]||[option] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>left</code>ï¼šå¾½æ ‡å·¦è¾¹çš„ä¿¡æ¯ï¼Œå¿…é€‰å‚æ•°ã€‚</li><li><code>right</code>: å¾½æ ‡å³è¾¹çš„ä¿¡æ¯ï¼Œå¿…é€‰å‚æ•°ï¼Œ</li><li><code>logo</code>ï¼šå¾½æ ‡å›¾æ ‡ï¼Œå›¾æ ‡åç§°è¯¦è§<a href="https://simpleicons.org/">simpleicons</a>ï¼Œå¯é€‰å‚æ•°ã€‚</li><li><code>color</code>ï¼šå¾½æ ‡å³è¾¹çš„é¢œè‰²ï¼Œå¯é€‰å‚æ•°ã€‚</li><li><code>link</code>ï¼šæŒ‡å‘çš„é“¾æ¥ï¼Œå¯é€‰å‚æ•°ã€‚</li><li><code>title</code>ï¼šå¾½æ ‡çš„é¢å¤–ä¿¡æ¯ï¼Œå¯é€‰å‚æ•°ã€‚ä¸»è¦ç”¨äºä¼˜åŒ–SEOï¼Œä½†<code>object</code>æ ‡ç­¾ä¸ä¼šåƒ<code>a</code>æ ‡ç­¾ä¸€æ ·åœ¨é¼ æ ‡æ‚¬åœæ˜¾ç¤º<code>title</code>ä¿¡æ¯ã€‚</li><li><code>option</code>ï¼šè‡ªå®šä¹‰å‚æ•°ï¼Œæ”¯æŒ<a href="https://shields.io/">shields.io</a>çš„å…¨éƒ¨APIå‚æ•°æ”¯æŒï¼Œå…·ä½“å‚æ•°å¯ä»¥å‚çœ‹ä¸Šæ–‡ä¸­çš„æ‹“å±•å†™æ³•ç¤ºä¾‹ã€‚å½¢å¼ä¸º<code>name1=value2&amp;name2=value2</code>ã€‚</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.åŸºæœ¬å‚æ•°,å®šä¹‰å¾½æ ‡å·¦å³æ–‡å­—å’Œå›¾æ ‡</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% bdage Theme,Butterfly %&#125;</span><br><span class="line">&#123;% bdage Frame,Hexo,hexo %&#125;</span><br></pre></td></tr></table></figure><p>2.ä¿¡æ¯å‚æ•°ï¼Œå®šä¹‰å¾½æ ‡å³ä¾§å†…å®¹èƒŒæ™¯è‰²ï¼ŒæŒ‡å‘é“¾æ¥</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% bdage CDN,JsDelivr,jsDelivr||abcdef,https://metroui.org.ua/index.html,æœ¬ç«™ä½¿ç”¨JsDelivrä¸ºé™æ€èµ„æºæä¾›CDNåŠ é€Ÿ %&#125;</span><br><span class="line">//å¦‚æœæ˜¯è·¨é¡ºåºçœç•¥å¯é€‰å‚æ•°ï¼Œä»ç„¶éœ€è¦å†™ä¸ªé€—å·,ç”¨ä½œåˆ†å‰²</span><br><span class="line">&#123;% bdage Source,GitHub,GitHub||,https://github.com/ %&#125;</span><br></pre></td></tr></table></figure><p>3.æ‹“å±•å‚æ•°ï¼Œæ”¯æŒshieldsçš„APIçš„å…¨éƒ¨å‚æ•°å†…å®¹</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% bdage Hosted,Vercel,Vercel||brightgreen,https://vercel.com/,æœ¬ç«™é‡‡ç”¨åŒçº¿éƒ¨ç½²ï¼Œé»˜è®¤çº¿è·¯æ‰˜ç®¡äºVercel||style=social&amp;logoWidth=20 %&#125;</span><br><span class="line">//å¦‚æœæ˜¯è·¨é¡ºåºçœç•¥å¯é€‰å‚æ•°ç»„ï¼Œä»ç„¶éœ€è¦å†™åŒç«–çº¿||ç”¨ä½œåˆ†å‰²</span><br><span class="line">&#123;% bdage Hosted,Vercel,Vercel||||style=social&amp;logoWidth=20&amp;logoColor=violet %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>1.åŸºæœ¬å‚æ•°,å®šä¹‰å¾½æ ‡å·¦å³æ–‡å­—å’Œå›¾æ ‡</p><p><object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/Butterfly-Theme-orange?logo=&color=orange&link=&"></object><br><object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/Hexo-Frame-orange?logo=hexo&color=orange&link=&"></object></p><p>2.ä¿¡æ¯å‚æ•°ï¼Œå®šä¹‰å¾½æ ‡å³ä¾§å†…å®¹èƒŒæ™¯è‰²ï¼ŒæŒ‡å‘é“¾æ¥</p><p><object class="ghbdage" style="margin-inline:5px" title="æœ¬ç«™ä½¿ç”¨JsDelivrä¸ºé™æ€èµ„æºæä¾›CDNåŠ é€Ÿ" standby="loading..." data="https://img.shields.io/badge/JsDelivr-CDN-orange?logo=jsDelivr&color=abcdef&link=https://metroui.org.ua/index.html&"></object><br>//å¦‚æœæ˜¯è·¨é¡ºåºçœç•¥å¯é€‰å‚æ•°ï¼Œä»ç„¶éœ€è¦å†™ä¸ªé€—å·,ç”¨ä½œåˆ†å‰²<br><object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/GitHub-Source-orange?logo=GitHub&color=orange&link=https://github.com/&"></object></p><p>3.æ‹“å±•å‚æ•°ï¼Œæ”¯æŒshieldsçš„APIçš„å…¨éƒ¨å‚æ•°å†…å®¹</p><p><object class="ghbdage" style="margin-inline:5px" title="æœ¬ç«™é‡‡ç”¨åŒçº¿éƒ¨ç½²ï¼Œé»˜è®¤çº¿è·¯æ‰˜ç®¡äºVercel" standby="loading..." data="https://img.shields.io/badge/Vercel-Hosted-orange?logo=Vercel&color=brightgreen&link=https://vercel.com/&style=social&logoWidth=20"></object><br>//å¦‚æœæ˜¯è·¨é¡ºåºçœç•¥å¯é€‰å‚æ•°ç»„ï¼Œä»ç„¶éœ€è¦å†™åŒç«–çº¿||ç”¨ä½œåˆ†å‰²<br><object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/Vercel-Hosted-orange?logo=Vercel&color=orange&link=&style=social&logoWidth=20&logoColor=violet"></object></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-14-ç½‘ç«™å¡ç‰‡-sites">2.14 ç½‘ç«™å¡ç‰‡ sites</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% sitegroup %&#125;</span><br><span class="line">&#123;% site æ ‡é¢˜, url=é“¾æ¥, screenshot=æˆªå›¾é“¾æ¥, avatar=å¤´åƒé“¾æ¥ï¼ˆå¯é€‰ï¼‰, description=æè¿°ï¼ˆå¯é€‰ï¼‰ %&#125;</span><br><span class="line">&#123;% site æ ‡é¢˜, url=é“¾æ¥, screenshot=æˆªå›¾é“¾æ¥, avatar=å¤´åƒé“¾æ¥ï¼ˆå¯é€‰ï¼‰, description=æè¿°ï¼ˆå¯é€‰ï¼‰ %&#125;</span><br><span class="line">&#123;% endsitegroup %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;% sitegroup %&#125;</span><br><span class="line">&#123;% site xaoxuu, url=https://xaoxuu.com, screenshot=https://i.loli.net/2020/08/21/VuSwWZ1xAeUHEBC.jpg, avatar=https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/avatar/avatar.png, description=ç®€çº¦é£æ ¼ %&#125;</span><br><span class="line">&#123;% site inkss, url=https://inkss.cn, screenshot=https://i.loli.net/2020/08/21/Vzbu3i8fXs6Nh5Y.jpg, avatar=https://cdn.jsdelivr.net/gh/inkss/common@master/static/web/avatar.jpg, description=è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­— %&#125;</span><br><span class="line">&#123;% site MHuiG, url=https://blog.mhuig.top, screenshot=https://i.loli.net/2020/08/22/d24zpPlhLYWX6D1.png, avatar=https://cdn.jsdelivr.net/gh/MHuiG/imgbed@master/data/p.png, description=è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­— %&#125;</span><br><span class="line">&#123;% site Colsrch, url=https://colsrch.top, screenshot=https://i.loli.net/2020/08/22/dFRWXm52OVu8qfK.png, avatar=https://cdn.jsdelivr.net/gh/Colsrch/images/Colsrch/avatar.jpg, description=è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­— %&#125;</span><br><span class="line">&#123;% site Linhk1606, url=https://linhk1606.github.io, screenshot=https://i.loli.net/2020/08/21/3PmGLCKicnfow1x.png, avatar=https://i.loli.net/2020/02/09/PN7I5RJfFtA93r2.png, description=è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­— %&#125;</span><br><span class="line">&#123;% endsitegroup %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><div class="site-card-group"><a class="site-card" href="https://fomalhaut1998.com"><div class="img"><img src="https://i.loli.net/2020/08/21/VuSwWZ1xAeUHEBC.jpg"/></div><div class="info"><img src="https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/avatar/avatar.png"/><span class="title">fomalhaut1998</span><span class="desc">ç®€çº¦é£æ ¼</span></div></a><a class="site-card" href="https://inkss.cn"><div class="img"><img src="https://i.loli.net/2020/08/21/Vzbu3i8fXs6Nh5Y.jpg"/></div><div class="info"><img src="https://cdn.jsdelivr.net/gh/inkss/common@master/static/web/avatar.jpg"/><span class="title">inkss</span><span class="desc">è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­—</span></div></a><a class="site-card" href="https://blog.mhuig.top"><div class="img"><img src="https://i.loli.net/2020/08/22/d24zpPlhLYWX6D1.png"/></div><div class="info"><img src="https://cdn.jsdelivr.net/gh/MHuiG/imgbed@master/data/p.png"/><span class="title">MHuiG</span><span class="desc">è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­—</span></div></a><a class="site-card" href="https://colsrch.top"><div class="img"><img src="https://i.loli.net/2020/08/22/dFRWXm52OVu8qfK.png"/></div><div class="info"><img src="https://cdn.jsdelivr.net/gh/Colsrch/images/Colsrch/avatar.jpg"/><span class="title">Colsrch</span><span class="desc">è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­—</span></div></a><a class="site-card" href="https://linhk1606.github.io"><div class="img"><img src="https://i.loli.net/2020/08/21/3PmGLCKicnfow1x.png"/></div><div class="info"><img src="https://i.loli.net/2020/02/09/PN7I5RJfFtA93r2.png"/><span class="title">Linhk1606</span><span class="desc">è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­—</span></div></a></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-15-è¡Œå†…å›¾ç‰‡-inlineimage">2.15 è¡Œå†…å›¾ç‰‡ inlineimage</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% inlineimage å›¾ç‰‡é“¾æ¥, height=é«˜åº¦ï¼ˆå¯é€‰ï¼‰ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>é«˜åº¦</code>ï¼šheight=20px</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¿™æ˜¯ &#123;% inlineimage https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/aru-l/0000.gif %&#125; ä¸€æ®µè¯ã€‚</span><br><span class="line"></span><br><span class="line">è¿™åˆæ˜¯ &#123;% inlineimage https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/aru-l/5150.gif, height=40px %&#125; ä¸€æ®µè¯ã€‚</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>è¿™æ˜¯ <img no-lazy class="inline" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/aru-l/0000.gif" style="height:1.5em"/> ä¸€æ®µè¯ã€‚</p><p>è¿™åˆæ˜¯ <img no-lazy class="inline" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/aru-l/5150.gif" style="height:40px;"/> ä¸€æ®µè¯ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-16-å•å¼ å›¾ç‰‡-image">2.16 å•å¼ å›¾ç‰‡ image</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% image é“¾æ¥, width=å®½åº¦ï¼ˆå¯é€‰ï¼‰, height=é«˜åº¦ï¼ˆå¯é€‰ï¼‰, alt=æè¿°ï¼ˆå¯é€‰ï¼‰, bg=å ä½é¢œè‰²ï¼ˆå¯é€‰ï¼‰ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li>å›¾ç‰‡å®½åº¦é«˜åº¦ï¼šwidth=300px, height=32px</li><li>å›¾ç‰‡æè¿°ï¼šalt=å›¾ç‰‡æè¿°ï¼ˆbutterflyéœ€è¦åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­å¼€å¯å›¾ç‰‡æè¿°ï¼‰</li><li>å ä½èƒŒæ™¯è‰²ï¼šbg=#f2f2f2</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.æ·»åŠ æè¿°ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% image https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg, alt=æ¯å¤©ä¸‹è¯¾å›å®¿èˆçš„è·¯ï¼Œæ²¡æœ‰ä»€ä¹ˆæ•…äº‹ã€‚ %&#125;</span><br></pre></td></tr></table></figure><p>2.æŒ‡å®šå®½åº¦</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% image https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg, width=400px %&#125;</span><br></pre></td></tr></table></figure><p>3.æŒ‡å®šå®½åº¦å¹¶æ·»åŠ æè¿°ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% image https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg, width=400px, alt=æ¯å¤©ä¸‹è¯¾å›å®¿èˆçš„è·¯ï¼Œæ²¡æœ‰ä»€ä¹ˆæ•…äº‹ã€‚ %&#125;</span><br></pre></td></tr></table></figure><p>4.è®¾ç½®å ä½èƒŒæ™¯è‰²ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% image https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg, width=400px, bg=#1D0C04, alt=ä¼˜åŒ–ä¸åŒå®½åº¦æµè§ˆçš„è§‚æ„Ÿ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>1.æ·»åŠ æè¿°ï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg" alt="æ¯å¤©ä¸‹è¯¾å›å®¿èˆçš„è·¯ï¼Œæ²¡æœ‰ä»€ä¹ˆæ•…äº‹ã€‚"/></div><span class="image-caption">æ¯å¤©ä¸‹è¯¾å›å®¿èˆçš„è·¯ï¼Œæ²¡æœ‰ä»€ä¹ˆæ•…äº‹ã€‚</span></div>2..æŒ‡å®šå®½åº¦<div class="img-wrap"><div class="img-bg"><img class="img" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg" style="width:400px;"/></div></div>3.æŒ‡å®šå®½åº¦å¹¶æ·»åŠ æè¿°ï¼š<div class="img-wrap"><div class="img-bg"><img class="img" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg" alt="æ¯å¤©ä¸‹è¯¾å›å®¿èˆçš„è·¯ï¼Œæ²¡æœ‰ä»€ä¹ˆæ•…äº‹ã€‚" style="width:400px;"/></div><span class="image-caption">æ¯å¤©ä¸‹è¯¾å›å®¿èˆçš„è·¯ï¼Œæ²¡æœ‰ä»€ä¹ˆæ•…äº‹ã€‚</span></div>4.è®¾ç½®å ä½èƒŒæ™¯è‰²ï¼š<div class="img-wrap"><div class="img-bg" style="background:#1D0C04"><img class="img" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg" alt="ä¼˜åŒ–ä¸åŒå®½åº¦æµè§ˆçš„è§‚æ„Ÿ" style="width:400px;"/></div><span class="image-caption">ä¼˜åŒ–ä¸åŒå®½åº¦æµè§ˆçš„è§‚æ„Ÿ</span></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-17-éŸ³é¢‘-audio">2.17 éŸ³é¢‘ audio</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% audio éŸ³é¢‘é“¾æ¥ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% audio https://github.com/volantis-x/volantis-docs/releases/download/assets/Lumia1020.mp3 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><div class="audio"><audio controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/Lumia1020.mp3' type='audio/mp3'>Your browser does not support the audio tag.</audio></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-18-è§†é¢‘-video">2.18 è§†é¢‘ video</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% video è§†é¢‘é“¾æ¥ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>å¯¹é½æ–¹å‘</code>ï¼šleft, center, right</li><li><code>åˆ—æ•°</code>ï¼šé€—å·åé¢ç›´æ¥å†™åˆ—æ•°ï¼Œæ”¯æŒ 1 ï½ 4 åˆ—ã€‚</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.100%å®½åº¦</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br></pre></td></tr></table></figure><p>2.50%å®½åº¦</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;% videos, 2 %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% endvideos %&#125;</span><br></pre></td></tr></table></figure><p>3.25%å®½åº¦</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;% videos, 4 %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% endvideos %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>1.100%å®½åº¦</p><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div>2.50%å®½åº¦<div class="videos" col='2'><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div></div>3.25%å®½åº¦<div class="videos" col='4'><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-19-ç›¸å†Œ-gallery">2.19 ç›¸å†Œ gallery</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><p>1.gallerygroup ç›¸å†Œå›¾åº“</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;gallery-group-main&quot;</span>&gt;</span></span></span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>2.gallery ç›¸å†Œ</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% gallery %&#125;</span><br><span class="line">markdown åœ–ç‰‡æ ¼å¼</span><br><span class="line">&#123;% endgallery %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ul><li>gallerygroup ç›¸å†Œå›¾åº“</li></ul><table><thead><tr><th>å‚æ•°å</th><th>é‡Šä¹‰</th></tr></thead><tbody><tr><td>name</td><td>å›¾åº“åå­—</td></tr><tr><td>description</td><td>å›¾åº“æè¿°</td></tr><tr><td>link</td><td>é“¾æ¥åˆ°å¯¹åº”ç›¸å†Œçš„åœ°å€</td></tr><tr><td>img-url</td><td>å›¾åº“å°é¢</td></tr></tbody></table><ul><li><p>gallery ç›¸å†Œ</p><p>åŒºåˆ«äºæ—§ç‰ˆçš„Galleryç›¸å†Œ,æ–°çš„Galleryç›¸å†Œä¼šè‡ªåŠ¨æ ¹æ®å›¾ç‰‡é•¿åº¦è¿›è¡Œæ’ç‰ˆï¼Œä¹¦å†™ä¹Ÿæ›´åŠ æ–¹ä¾¿ï¼Œä¸markdownæ ¼å¼ä¸€æ ·ã€‚å¯æ ¹æ®éœ€è¦æ’å…¥åˆ°ç›¸åº”çš„mdã€‚æ— éœ€å†è‡ªå·±é…ç½®é•¿å®½ã€‚<strong>å»ºè®®åœ¨ç²˜è´´æ—¶æ•…æ„ä½¿ç”¨é•¿çŸ­ã€å¤§å°ã€æ¨ªç«–ä¸ä¸€çš„å›¾ç‰‡</strong>ï¼Œä¼šæœ‰æ›´å¥½çš„æ•ˆæœã€‚ï¼ˆå°ºå¯¸å®Œå…¨ç›¸åŒçš„å›¾ç‰‡åªä¼šå¹³é“ºè¾“å‡ºï¼Œæ•ˆæœå¾ˆç³Ÿç³•ï¼‰</p></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.gallerygroup ç›¸å†Œå›¾åº“</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;gallery-group-main&quot;</span>&gt;</span></span></span><br><span class="line">&#123;% galleryGroup MC åœ¨Rikkaã®å…­èŠ±æœåŠ¡å™¨é‡Œç•™ä¸‹çš„è¶³è¿¹ &#x27;/gallery/MC/&#x27; https://cdn.cbd.int/akilar-candyassets@1.0.36/image/1.jpg %&#125;</span><br><span class="line">&#123;% galleryGroup Gundam å“¦å’§å“‡gundamå“’ï¼ &#x27;/gallery/Gundam/&#x27; https://cdn.cbd.int/akilar-candyassets@1.0.36/image/20200907110508327.png %&#125;</span><br><span class="line">&#123;% galleryGroup I-am-Akilar æŸç§æ„ä¹‰ä¸Šä¹Ÿç®—è‡ªæ‹å§ &#x27;/gallery/I-am-Akilar/&#x27; https://cdn.cbd.int/akilar-candyassets@1.0.36/image/20200907113116651.png %&#125;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>2.gallery ç›¸å†Œ</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% gallery %&#125;</span><br><span class="line">![](<span class="link">https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg</span>)</span><br><span class="line">![](<span class="link">https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg</span>)</span><br><span class="line">&#123;% endgallery %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>1.gallerygroup ç›¸å†Œå›¾åº“</p><div class="gallery-group-main">  <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://cdn.cbd.int/akilar-candyassets@1.0.36/image/1.jpg' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">MC</div>  <p>åœ¨Rikkaã®å…­èŠ±æœåŠ¡å™¨é‡Œç•™ä¸‹çš„è¶³è¿¹</p>  <a href='/gallery/MC/'></a>  </figcaption>  </figure>  <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://cdn.cbd.int/akilar-candyassets@1.0.36/image/20200907110508327.png' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">Gundam</div>  <p>å“¦å’§å“‡gundamå“’ï¼</p>  <a href='/gallery/Gundam/'></a>  </figcaption>  </figure>  <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://cdn.cbd.int/akilar-candyassets@1.0.36/image/20200907113116651.png' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">I-am-Akilar</div>  <p>æŸç§æ„ä¹‰ä¸Šä¹Ÿç®—è‡ªæ‹å§</p>  <a href='/gallery/I-am-Akilar/'></a>  </figcaption>  </figure></div>2.gallery ç›¸å†Œ<div class="fj-gallery"><p><img src="https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg" alt=""></p>          </div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-20-æŠ˜å æ¡†-folding">2.20 æŠ˜å æ¡† folding</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><p>1.gallerygroup ç›¸å†Œå›¾åº“</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% folding å‚æ•°ï¼ˆå¯é€‰ï¼‰, æ ‡é¢˜ %&#125;</span><br><span class="line">![](<span class="link">https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper/abstract/41F215B9-261F-48B4-80B5-4E86E165259E.jpeg</span>)</span><br><span class="line">&#123;% endfolding %&#125;</span><br></pre></td></tr></table></figure><!-- tab å‚æ•°é…ç½® --><ol><li><p><code>é¢œè‰²</code>ï¼šblue, cyan, green, yellow, red</p></li><li><p><code>çŠ¶æ€</code>ï¼šçŠ¶æ€å¡«å†™ open ä»£è¡¨é»˜è®¤æ‰“å¼€ã€‚</p></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&#123;% folding æŸ¥çœ‹å›¾ç‰‡æµ‹è¯• %&#125;</span><br><span class="line"></span><br><span class="line">![](<span class="link">https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper/abstract/41F215B9-261F-48B4-80B5-4E86E165259E.jpeg</span>)</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding cyan open, æŸ¥çœ‹é»˜è®¤æ‰“å¼€çš„æŠ˜å æ¡† %&#125;</span><br><span class="line"></span><br><span class="line">è¿™æ˜¯ä¸€ä¸ªé»˜è®¤æ‰“å¼€çš„æŠ˜å æ¡†ã€‚</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding green, æŸ¥çœ‹ä»£ç æµ‹è¯• %&#125;</span><br><span class="line">å‡è£…è¿™é‡Œæœ‰ä»£ç å—ï¼ˆä»£ç å—æ²¡æ³•åµŒå¥—ä»£ç å—ï¼‰</span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding yellow, æŸ¥çœ‹åˆ—è¡¨æµ‹è¯• %&#125;</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> haha</span><br><span class="line"><span class="bullet">-</span> hehe</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding red, æŸ¥çœ‹åµŒå¥—æµ‹è¯• %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding blue, æŸ¥çœ‹åµŒå¥—æµ‹è¯•2 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding æŸ¥çœ‹åµŒå¥—æµ‹è¯•3 %&#125;</span><br><span class="line"></span><br><span class="line">hahaha <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#x27;https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/tieba/%E6%BB%91%E7%A8%BD.png&#x27;</span> <span class="attr">style</span>=<span class="string">&#x27;height:24px&#x27;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><details class="folding-tag" ><summary> æŸ¥çœ‹å›¾ç‰‡æµ‹è¯• </summary>              <div class='content'>              <p><img src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper/abstract/41F215B9-261F-48B4-80B5-4E86E165259E.jpeg" alt=""></p>              </div>            </details><details class="folding-tag" cyan open><summary> æŸ¥çœ‹é»˜è®¤æ‰“å¼€çš„æŠ˜å æ¡† </summary>              <div class='content'>              <p>è¿™æ˜¯ä¸€ä¸ªé»˜è®¤æ‰“å¼€çš„æŠ˜å æ¡†ã€‚</p>              </div>            </details><details class="folding-tag" green><summary> æŸ¥çœ‹ä»£ç æµ‹è¯• </summary>              <div class='content'>              <p>å‡è£…è¿™é‡Œæœ‰ä»£ç å—ï¼ˆä»£ç å—æ²¡æ³•åµŒå¥—ä»£ç å—ï¼‰</p>              </div>            </details><details class="folding-tag" yellow><summary> æŸ¥çœ‹åˆ—è¡¨æµ‹è¯• </summary>              <div class='content'>              <ul><li>haha</li><li>hehe</li></ul>              </div>            </details><details class="folding-tag" red><summary> æŸ¥çœ‹åµŒå¥—æµ‹è¯• </summary>              <div class='content'>              <details class="folding-tag" blue><summary> æŸ¥çœ‹åµŒå¥—æµ‹è¯•2 </summary>              <div class='content'>              <details class="folding-tag" ><summary> æŸ¥çœ‹åµŒå¥—æµ‹è¯•3 </summary>              <div class='content'>              <p>hahaha <span><img src='https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/tieba/%E6%BB%91%E7%A8%BD.png' style='height:24px'></span></p>              </div>            </details>              </div>            </details>              </div>            </details><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-21-åˆ†æ -tab">2.21 åˆ†æ  tab</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs Unique name, [index] %&#125;</span><br><span class="line">&lt;!-- tab [Tab caption] [@icon] --&gt;</span><br><span class="line">Any content (support inline tags too).</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><p>Unique name :</p><ul><li><p>é€‰é¡¹å¡å—æ ‡ç­¾çš„å”¯ä¸€åç§°ï¼Œä¸å¸¦é€—å·ã€‚</p></li><li><p>å°†åœ¨#idä¸­ç”¨ä½œæ¯ä¸ªæ ‡ç­¾åŠå…¶ç´¢å¼•å·çš„å‰ç¼€ã€‚</p></li><li><p>å¦‚æœåç§°ä¸­åŒ…å«ç©ºæ ¼ï¼Œåˆ™å¯¹äºç”Ÿæˆ#idï¼Œæ‰€æœ‰ç©ºæ ¼å°†ç”±ç ´æŠ˜å·ä»£æ›¿ã€‚</p></li><li><p>ä»…å½“å‰å¸–å­/é¡µé¢çš„URLå¿…é¡»æ˜¯å”¯ä¸€çš„ï¼</p></li></ul></li><li><p>[index]:</p><ul><li><p>æ´»åŠ¨é€‰é¡¹å¡çš„ç´¢å¼•å·ã€‚</p></li><li><p>å¦‚æœæœªæŒ‡å®šï¼Œå°†é€‰æ‹©ç¬¬ä¸€ä¸ªæ ‡ç­¾ï¼ˆ1ï¼‰ã€‚</p></li><li><p>å¦‚æœindexä¸º-1ï¼Œåˆ™ä¸ä¼šé€‰æ‹©ä»»ä½•é€‰é¡¹å¡ã€‚</p></li><li><p>å¯é€‰å‚æ•°ã€‚</p></li></ul></li><li><p>[Tab caption]:</p><ul><li><p>å½“å‰é€‰é¡¹å¡çš„æ ‡é¢˜ã€‚</p></li><li><p>å¦‚æœæœªæŒ‡å®šæ ‡é¢˜ï¼Œåˆ™å¸¦æœ‰åˆ¶è¡¨ç¬¦ç´¢å¼•åç¼€çš„å”¯ä¸€åç§°å°†ç”¨ä½œåˆ¶è¡¨ç¬¦çš„æ ‡é¢˜ã€‚</p></li><li><p>å¦‚æœæœªæŒ‡å®šæ ‡é¢˜ï¼Œä½†æŒ‡å®šäº†å›¾æ ‡ï¼Œåˆ™æ ‡é¢˜å°†ä¸ºç©ºã€‚</p></li><li><p>å¯é€‰å‚æ•°ã€‚</p></li></ul></li><li><p>[@icon]:</p><ul><li><p>FontAwesomeå›¾æ ‡åç§°ï¼ˆå…¨åï¼Œçœ‹èµ·æ¥åƒâ€œ fas fa-fontâ€ï¼‰</p></li><li><p>å¯ä»¥æŒ‡å®šå¸¦ç©ºæ ¼æˆ–ä¸å¸¦ç©ºæ ¼ï¼›</p></li><li><p>ä¾‹å¦‚â€™Tab caption @iconâ€™ å’Œ â€˜Tab caption@iconâ€™.</p></li><li><p>å¯é€‰å‚æ•°ã€‚</p></li></ul></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.Demo 1 - é¢„è®¾é€‰æ‹©ç¬¬ä¸€ä¸ªã€é»˜è®¤ã€‘</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test1 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 1.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 2.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 3.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><p>2.Demo 2 - é¢„è®¾é€‰æ‹©tabs</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test2, 3 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 1.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 2.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 3.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><p>3.Demo 3 - æ²¡æœ‰é¢„è®¾å€¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test3, -1 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 1.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 2.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 3.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><p>4.Demo 4 - è‡ªå®šä¹‰Tabå + åªæœ‰icon + iconå’ŒTabå</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test4 %&#125;</span><br><span class="line">&lt;!-- tab ç¬¬ä¸€ä¸ªTab --&gt;</span><br><span class="line"><span class="strong">**tabåå­—ä¸ºç¬¬ä¸€ä¸ªTab**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab @fab fa-apple-pay --&gt;</span><br><span class="line"><span class="strong">**åªæœ‰å›¾æ ‡ æ²¡æœ‰Tabåå­—**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab ç‚¸å¼¹@fas fa-bomb --&gt;</span><br><span class="line"><span class="strong">**åå­—+icon**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>1.Demo 1 - é¢„è®¾é€‰æ‹©ç¬¬ä¸€ä¸ªã€é»˜è®¤ã€‘</p><div class="tabs" id="test1"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test1-1">test1 1</button></li><li class="tab"><button type="button" data-href="#test1-2">test1 2</button></li><li class="tab"><button type="button" data-href="#test1-3">test1 3</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test1-1"><p><strong>This is Tab 1.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-2"><p><strong>This is Tab 2.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-3"><p><strong>This is Tab 3.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>2.Demo 2 - é¢„è®¾é€‰æ‹©tabs</p><div class="tabs" id="test2"><ul class="nav-tabs"><li class="tab"><button type="button" data-href="#test2-1">test2 1</button></li><li class="tab"><button type="button" data-href="#test2-2">test2 2</button></li><li class="tab active"><button type="button" data-href="#test2-3">test2 3</button></li></ul><div class="tab-contents"><div class="tab-item-content" id="test2-1"><p><strong>This is Tab 1.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test2-2"><p><strong>This is Tab 2.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content active" id="test2-3"><p><strong>This is Tab 3.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>3.Demo 3 - æ²¡æœ‰é¢„è®¾å€¼</p><div class="tabs" id="test3"><ul class="nav-tabs"><li class="tab"><button type="button" data-href="#test3-1">test3 1</button></li><li class="tab"><button type="button" data-href="#test3-2">test3 2</button></li><li class="tab"><button type="button" data-href="#test3-3">test3 3</button></li></ul><div class="tab-contents"><div class="tab-item-content" id="test3-1"><p><strong>This is Tab 1.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test3-2"><p><strong>This is Tab 2.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test3-3"><p><strong>This is Tab 3.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>4.Demo 4 - è‡ªå®šä¹‰Tabå + åªæœ‰icon + iconå’ŒTabå</p><div class="tabs" id="test4"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test4-1">ç¬¬ä¸€ä¸ªTab</button></li><li class="tab"><button type="button" data-href="#test4-2"><i class="fab fa-apple-pay" style="text-align: center;"></i></button></li><li class="tab"><button type="button" data-href="#test4-3"><i class="fas fa-bomb"></i>ç‚¸å¼¹</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test4-1"><p><strong>tabåå­—ä¸ºç¬¬ä¸€ä¸ªTab</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-2"><p><strong>åªæœ‰å›¾æ ‡ æ²¡æœ‰Tabåå­—</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-3"><p><strong>åå­—+icon</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-22-è¯—è¯æ ‡ç­¾-poem">2.22 è¯—è¯æ ‡ç­¾ poem</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><ol><li><code>title</code>ï¼šè¯—è¯æ ‡é¢˜</li><li><code>author</code>ï¼šä½œè€…ï¼Œå¯ä»¥ä¸å†™</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;% poem æ°´è°ƒæ­Œå¤´,è‹è½¼ %&#125;</span><br><span class="line">ä¸™è¾°ä¸­ç§‹ï¼Œæ¬¢é¥®è¾¾æ—¦ï¼Œå¤§é†‰ï¼Œä½œæ­¤ç¯‡ï¼Œå…¼æ€€å­ç”±ã€‚</span><br><span class="line">æ˜æœˆå‡ æ—¶æœ‰ï¼ŸæŠŠé…’é—®é’å¤©ã€‚</span><br><span class="line">ä¸çŸ¥å¤©ä¸Šå®«é˜™ï¼Œä»Šå¤•æ˜¯ä½•å¹´ï¼Ÿ</span><br><span class="line">æˆ‘æ¬²ä¹˜é£å½’å»ï¼Œåˆæç¼æ¥¼ç‰å®‡ï¼Œé«˜å¤„ä¸èƒœå¯’ã€‚</span><br><span class="line">èµ·èˆå¼„æ¸…å½±ï¼Œä½•ä¼¼åœ¨äººé—´ï¼Ÿ</span><br><span class="line"></span><br><span class="line">è½¬æœ±é˜ï¼Œä½ç»®æˆ·ï¼Œç…§æ— çœ ã€‚</span><br><span class="line">ä¸åº”æœ‰æ¨ï¼Œä½•äº‹é•¿å‘åˆ«æ—¶åœ†ï¼Ÿ</span><br><span class="line">äººæœ‰æ‚²æ¬¢ç¦»åˆï¼Œæœˆæœ‰é˜´æ™´åœ†ç¼ºï¼Œæ­¤äº‹å¤éš¾å…¨ã€‚</span><br><span class="line">ä½†æ„¿äººé•¿ä¹…ï¼Œåƒé‡Œå…±å©µå¨Ÿã€‚</span><br><span class="line">&#123;% endpoem %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><div class='poem'><div class='poem-title'>æ°´è°ƒæ­Œå¤´</div><div class='poem-author'>è‹è½¼</div><p>ä¸™è¾°ä¸­ç§‹ï¼Œæ¬¢é¥®è¾¾æ—¦ï¼Œå¤§é†‰ï¼Œä½œæ­¤ç¯‡ï¼Œå…¼æ€€å­ç”±ã€‚<br>æ˜æœˆå‡ æ—¶æœ‰ï¼ŸæŠŠé…’é—®é’å¤©ã€‚<br>ä¸çŸ¥å¤©ä¸Šå®«é˜™ï¼Œä»Šå¤•æ˜¯ä½•å¹´ï¼Ÿ<br>æˆ‘æ¬²ä¹˜é£å½’å»ï¼Œåˆæç¼æ¥¼ç‰å®‡ï¼Œé«˜å¤„ä¸èƒœå¯’ã€‚<br>èµ·èˆå¼„æ¸…å½±ï¼Œä½•ä¼¼åœ¨äººé—´ï¼Ÿ</p><p>è½¬æœ±é˜ï¼Œä½ç»®æˆ·ï¼Œç…§æ— çœ ã€‚<br>ä¸åº”æœ‰æ¨ï¼Œä½•äº‹é•¿å‘åˆ«æ—¶åœ†ï¼Ÿ<br>äººæœ‰æ‚²æ¬¢ç¦»åˆï¼Œæœˆæœ‰é˜´æ™´åœ†ç¼ºï¼Œæ­¤äº‹å¤éš¾å…¨ã€‚<br>ä½†æ„¿äººé•¿ä¹…ï¼Œåƒé‡Œå…±å©µå¨Ÿã€‚</p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-23-é˜¿é‡Œå›¾æ ‡-icon">2.23 é˜¿é‡Œå›¾æ ‡ icon</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% icon [icon-xxxx],[font-size] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>icon-xxxx</code>ï¼šè¡¨ç¤ºå›¾æ ‡<code>font-class</code>,å¯ä»¥åœ¨è‡ªå·±çš„é˜¿é‡ŒçŸ¢é‡å›¾æ ‡åº“é¡¹ç›®çš„<code>font-class</code>å¼•ç”¨æ–¹æ¡ˆå†…æŸ¥è¯¢å¹¶å¤åˆ¶ã€‚</li><li><code>font-size</code>ï¼šè¡¨ç¤ºå›¾æ ‡å¤§å°ï¼Œç›´æ¥å¡«å†™æ•°å­—å³å¯ï¼Œå•ä½ä¸º<code>em</code>ã€‚å›¾æ ‡å¤§å°é»˜è®¤å€¼ä¸º<code>1em</code>ã€‚</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;% icon icon-rat<span class="emphasis">_zi %&#125;&#123;% icon icon-rat,2 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-ox_</span>chou,3 %&#125;&#123;% icon icon-ox,4 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-tiger<span class="emphasis">_yin,5 %&#125;&#123;% icon icon-tiger,6 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-rabbit_</span>mao,1 %&#125;&#123;% icon icon-rabbit,2 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-dragon<span class="emphasis">_chen,3 %&#125;&#123;% icon icon-dragon,4 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-snake_</span>si,5 %&#125;&#123;% icon icon-snake,6 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-horse<span class="emphasis">_wu %&#125;&#123;% icon icon-horse,2 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-goat_</span>wei,3 %&#125;&#123;% icon icon-goat,4 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-monkey<span class="emphasis">_shen,5 %&#125;&#123;% icon icon-monkey,6 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-rooster_</span>you %&#125;&#123;% icon icon-rooster,2 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-dog<span class="emphasis">_xu,3 %&#125;&#123;% icon icon-dog,4 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-boar_</span>hai,5 %&#125;&#123;% icon icon-boar,6 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p><svg class="icon" style="width:1em; height:1em" aria-hidden="true"><use xlink:href="#icon-rat_zi"></use></svg><svg class="icon" style="width:2em; height:2em" aria-hidden="true"><use xlink:href="#icon-rat"></use></svg></p><p><svg class="icon" style="width:3em; height:3em" aria-hidden="true"><use xlink:href="#icon-ox_chou"></use></svg><svg class="icon" style="width:4em; height:4em" aria-hidden="true"><use xlink:href="#icon-ox"></use></svg></p><p><svg class="icon" style="width:5em; height:5em" aria-hidden="true"><use xlink:href="#icon-tiger_yin"></use></svg><svg class="icon" style="width:6em; height:6em" aria-hidden="true"><use xlink:href="#icon-tiger"></use></svg></p><p><svg class="icon" style="width:1em; height:1em" aria-hidden="true"><use xlink:href="#icon-rabbit_mao"></use></svg><svg class="icon" style="width:2em; height:2em" aria-hidden="true"><use xlink:href="#icon-rabbit"></use></svg></p><p><svg class="icon" style="width:3em; height:3em" aria-hidden="true"><use xlink:href="#icon-dragon_chen"></use></svg><svg class="icon" style="width:4em; height:4em" aria-hidden="true"><use xlink:href="#icon-dragon"></use></svg></p><p><svg class="icon" style="width:5em; height:5em" aria-hidden="true"><use xlink:href="#icon-snake_si"></use></svg><svg class="icon" style="width:6em; height:6em" aria-hidden="true"><use xlink:href="#icon-snake"></use></svg></p><p><svg class="icon" style="width:1em; height:1em" aria-hidden="true"><use xlink:href="#icon-horse_wu"></use></svg><svg class="icon" style="width:2em; height:2em" aria-hidden="true"><use xlink:href="#icon-horse"></use></svg></p><p><svg class="icon" style="width:3em; height:3em" aria-hidden="true"><use xlink:href="#icon-goat_wei"></use></svg><svg class="icon" style="width:4em; height:4em" aria-hidden="true"><use xlink:href="#icon-goat"></use></svg></p><p><svg class="icon" style="width:5em; height:5em" aria-hidden="true"><use xlink:href="#icon-monkey_shen"></use></svg><svg class="icon" style="width:6em; height:6em" aria-hidden="true"><use xlink:href="#icon-monkey"></use></svg></p><p><svg class="icon" style="width:1em; height:1em" aria-hidden="true"><use xlink:href="#icon-rooster_you"></use></svg><svg class="icon" style="width:2em; height:2em" aria-hidden="true"><use xlink:href="#icon-rooster"></use></svg></p><p><svg class="icon" style="width:3em; height:3em" aria-hidden="true"><use xlink:href="#icon-dog_xu"></use></svg><svg class="icon" style="width:4em; height:4em" aria-hidden="true"><use xlink:href="#icon-dog"></use></svg></p><p><svg class="icon" style="width:5em; height:5em" aria-hidden="true"><use xlink:href="#icon-boar_hai"></use></svg><svg class="icon" style="width:6em; height:6em" aria-hidden="true"><use xlink:href="#icon-boar"></use></svg></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-24-ç‰¹æ•ˆæ ‡ç­¾wow">2.24 ç‰¹æ•ˆæ ‡ç­¾wow</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow [animete],[duration],[delay],[offset],[iteration] %&#125;</span><br><span class="line">å†…å®¹</span><br><span class="line">&#123;% endwow %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>animate</code>: åŠ¨ç”»æ ·å¼ï¼Œæ•ˆæœè¯¦è§<a href="https://animate.style/">animate.csså‚è€ƒæ–‡æ¡£</a></li><li><code>duration</code>: é€‰å¡«é¡¹ï¼ŒåŠ¨ç”»æŒç»­æ—¶é—´ï¼Œå•ä½å¯ä»¥æ˜¯<code>ms</code>ä¹Ÿå¯ä»¥æ˜¯<code>s</code>ã€‚ä¾‹å¦‚<code>3s</code>ï¼Œ<code>700ms</code>ã€‚</li><li><code>delay</code>: é€‰å¡«é¡¹ï¼ŒåŠ¨ç”»å¼€å§‹çš„å»¶è¿Ÿæ—¶é—´ï¼Œå•ä½å¯ä»¥æ˜¯<code>ms</code>ä¹Ÿå¯ä»¥æ˜¯<code>s</code>ã€‚ä¾‹å¦‚<code>3s</code>ï¼Œ<code>700ms</code>ã€‚</li><li><code>offset</code>: é€‰å¡«é¡¹ï¼Œå¼€å§‹åŠ¨ç”»çš„è·ç¦»ï¼ˆç›¸å¯¹æµè§ˆå™¨åº•éƒ¨ï¼‰</li><li><code>iteration</code>: é€‰å¡«é¡¹ï¼ŒåŠ¨ç”»é‡å¤çš„æ¬¡æ•°</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.flipåŠ¨ç”»æ•ˆæœã€‚</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow animate<span class="strong">__zoomIn,5s,5s,100,10 %&#125;</span></span><br><span class="line"><span class="strong">&#123;% note blue &#x27;fas fa-bullhorn&#x27; modern%&#125;</span></span><br><span class="line"><span class="strong">`zoomIn`åŠ¨ç”»æ•ˆæœï¼ŒæŒç»­`5s`ï¼Œå»¶æ—¶`5s`ï¼Œç¦»åº•éƒ¨`100`è·ç¦»æ—¶å¯åŠ¨ï¼Œé‡å¤`10`æ¬¡</span></span><br><span class="line"><span class="strong">&#123;% endnote %&#125;</span></span><br><span class="line"><span class="strong">&#123;% endwow %&#125;</span></span><br></pre></td></tr></table></figure><p>2.zoomInåŠ¨ç”»æ•ˆæœï¼ŒæŒç»­5sï¼Œå»¶æ—¶5sï¼Œç¦»åº•éƒ¨100è·ç¦»æ—¶å¯åŠ¨ï¼Œé‡å¤10æ¬¡</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow animate<span class="strong">__zoomIn,5s,5s,100,10 %&#125;</span></span><br><span class="line"><span class="strong">&#123;% note blue &#x27;fas fa-bullhorn&#x27; modern%&#125;</span></span><br><span class="line"><span class="strong">`zoomIn`åŠ¨ç”»æ•ˆæœï¼ŒæŒç»­`5s`ï¼Œå»¶æ—¶`5s`ï¼Œç¦»åº•éƒ¨`100`è·ç¦»æ—¶å¯åŠ¨ï¼Œé‡å¤`10`æ¬¡</span></span><br><span class="line"><span class="strong">&#123;% endnote %&#125;</span></span><br><span class="line"><span class="strong">&#123;% endwow %&#125;</span></span><br></pre></td></tr></table></figure><p>3.slideInRightåŠ¨ç”»æ•ˆæœï¼ŒæŒç»­5sï¼Œå»¶æ—¶5s</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow animate<span class="strong">__slideInRight,5s,5s %&#125;</span></span><br><span class="line"><span class="strong">&#123;% note orange &#x27;fas fa-car&#x27; modern%&#125;</span></span><br><span class="line"><span class="strong">`slideInRight`åŠ¨ç”»æ•ˆæœï¼ŒæŒç»­`5s`ï¼Œå»¶æ—¶`5s`ã€‚</span></span><br><span class="line"><span class="strong">&#123;% endnote %&#125;</span></span><br><span class="line"><span class="strong">&#123;% endwow %&#125;</span></span><br></pre></td></tr></table></figure><p>4.heartBeatåŠ¨ç”»æ•ˆæœï¼Œå»¶æ—¶5sï¼Œé‡å¤10æ¬¡ã€‚æ­¤å¤„æ³¨æ„ä¸ç”¨çš„å‚æ•°ä½ç½®è¦ç•™ç©ºï¼Œç”¨é€—å·é—´éš”ã€‚</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow animate<span class="strong">__heartBeat,,5s,,10 %&#125;</span></span><br><span class="line"><span class="strong">&#123;% note red &#x27;fas fa-battery-half&#x27; modern%&#125;</span></span><br><span class="line"><span class="strong">`heartBeat`åŠ¨ç”»æ•ˆæœï¼Œå»¶æ—¶`5s`ï¼Œé‡å¤`10`æ¬¡ã€‚</span></span><br><span class="line"><span class="strong">&#123;% endnote %&#125;</span></span><br><span class="line"><span class="strong">&#123;% endwow %&#125;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>1.flipåŠ¨ç”»æ•ˆæœã€‚</p><div class='wow animate__zoomIn' data-wow-duration='5s' data-wow-delay='5s' data-wow-offset='100'  data-wow-iteration='10' ><div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><code>zoomIn</code>åŠ¨ç”»æ•ˆæœï¼ŒæŒç»­<code>5s</code>ï¼Œå»¶æ—¶<code>5s</code>ï¼Œç¦»åº•éƒ¨<code>100</code>è·ç¦»æ—¶å¯åŠ¨ï¼Œé‡å¤<code>10</code>æ¬¡</p></div></div><p>2.zoomInåŠ¨ç”»æ•ˆæœï¼ŒæŒç»­5sï¼Œå»¶æ—¶5sï¼Œç¦»åº•éƒ¨100è·ç¦»æ—¶å¯åŠ¨ï¼Œé‡å¤10æ¬¡</p><div class='wow animate__zoomIn' data-wow-duration='5s' data-wow-delay='5s' data-wow-offset='100'  data-wow-iteration='10' ><div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><code>zoomIn</code>åŠ¨ç”»æ•ˆæœï¼ŒæŒç»­<code>5s</code>ï¼Œå»¶æ—¶<code>5s</code>ï¼Œç¦»åº•éƒ¨<code>100</code>è·ç¦»æ—¶å¯åŠ¨ï¼Œé‡å¤<code>10</code>æ¬¡</p></div></div><p>3.slideInRightåŠ¨ç”»æ•ˆæœï¼ŒæŒç»­5sï¼Œå»¶æ—¶5s</p><div class='wow animate__slideInRight' data-wow-duration='5s' data-wow-delay='5s' data-wow-offset=''  data-wow-iteration='' ><div class="note orange icon-padding modern"><i class="note-icon fas fa-car"></i><p><code>slideInRight</code>åŠ¨ç”»æ•ˆæœï¼ŒæŒç»­<code>5s</code>ï¼Œå»¶æ—¶<code>5s</code>ã€‚</p></div></div><p>4.heartBeatåŠ¨ç”»æ•ˆæœï¼Œå»¶æ—¶5sï¼Œé‡å¤10æ¬¡ã€‚æ­¤å¤„æ³¨æ„ä¸ç”¨çš„å‚æ•°ä½ç½®è¦ç•™ç©ºï¼Œç”¨é€—å·é—´éš”ã€‚</p><div class='wow animate__heartBeat' data-wow-duration='' data-wow-delay='5s' data-wow-offset=''  data-wow-iteration='10' ><div class="note red icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p><code>heartBeat</code>åŠ¨ç”»æ•ˆæœï¼Œå»¶æ—¶<code>5s</code>ï¼Œé‡å¤<code>10</code>æ¬¡ã€‚</p></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-25-è¿›åº¦æ¡-progress">2.25  è¿›åº¦æ¡ progress</h2><div class="note info flat"><p>è¿›åº¦æ¡æ ‡ç­¾å‚è€ƒ<a href="https://rongbuqiu.com/jdt.html">æ²‚ä½°å­œçŒ«-ç»™HEXOæ–‡ç« æ·»åŠ å½©è‰²è¿›åº¦æ¡</a>ã€‚<br>æºæ ·å¼æå–è‡ª<a href="https://zwying0814.gitbook.io/cuteen/">Cuteen</a>ä¸»é¢˜ã€‚</p></div><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% progress [width] [color] [text] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>width</code>: 0åˆ°100çš„é˜¿æ‹‰ä¼¯æ•°å­—</li><li><code>color</code>: é¢œè‰²ï¼Œå–å€¼æœ‰red,yellow,green,cyan,blue,gray</li><li><code>text</code>:è¿›åº¦æ¡ä¸Šçš„æ–‡å­—å†…å®¹</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;% progress 10 red è¿›åº¦æ¡æ ·å¼é¢„è§ˆ %&#125;</span><br><span class="line">&#123;% progress 30 yellow è¿›åº¦æ¡æ ·å¼é¢„è§ˆ %&#125;</span><br><span class="line">&#123;% progress 50 green è¿›åº¦æ¡æ ·å¼é¢„è§ˆ %&#125;</span><br><span class="line">&#123;% progress 70 cyan è¿›åº¦æ¡æ ·å¼é¢„è§ˆ %&#125;</span><br><span class="line">&#123;% progress 90 blue è¿›åº¦æ¡æ ·å¼é¢„è§ˆ %&#125;</span><br><span class="line">&#123;% progress 100 gray è¿›åº¦æ¡æ ·å¼é¢„è§ˆ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-red"  style="width: 10%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æ ·å¼é¢„è§ˆ</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-yellow"  style="width: 30%" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æ ·å¼é¢„è§ˆ</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-green"  style="width: 50%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æ ·å¼é¢„è§ˆ</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-cyan"  style="width: 70%" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æ ·å¼é¢„è§ˆ</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-blue"  style="width: 90%" aria-valuenow="90" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æ ·å¼é¢„è§ˆ</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-gray"  style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æ ·å¼é¢„è§ˆ</p></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-26-æ³¨é‡Š-notation">2.26 æ³¨é‡Š notation</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% nota [label] , [text] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><p><code>label</code>: æ³¨é‡Šè¯æ±‡</p></li><li><p><code>text</code>: æ‚¬åœæ˜¾ç¤ºçš„æ³¨è§£å†…å®¹</p></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% nota æŠŠé¼ æ ‡ç§»åŠ¨åˆ°æˆ‘ä¸Šé¢è¯•è¯• ,å¯ä»¥çœ‹åˆ°æ³¨è§£å†…å®¹å‡ºç°åœ¨é¡¶æ  %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p><span class='nota' data-nota='å¯ä»¥çœ‹åˆ°æ³¨è§£å†…å®¹å‡ºç°åœ¨é¡¶æ '>æŠŠé¼ æ ‡ç§»åŠ¨åˆ°æˆ‘ä¸Šé¢è¯•è¯•</span></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-27-æ°”æ³¡æ³¨é‡Š-bubble">2.27 æ°”æ³¡æ³¨é‡Š bubble</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% bubble [content] , [notation] ,[background-color] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>content</code>: æ³¨é‡Šè¯æ±‡</li><li><code>notation</code>: æ‚¬åœæ˜¾ç¤ºçš„æ³¨è§£å†…å®¹</li><li><code>background-color</code>: å¯é€‰ï¼Œæ°”æ³¡èƒŒæ™¯è‰²ã€‚é»˜è®¤ä¸ºâ€œ#71a4e3â€</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æœ€è¿‘æˆ‘å­¦åˆ°äº†ä¸å°‘æ–°ç©æ„å„¿ï¼ˆè™½ç„¶å¯¹å¾ˆå¤šå¤§ä½¬æ¥è¯´è¿™äº›å·²ç»æ˜¯æ—§æŠ€æœ¯äº†ï¼‰ï¼Œæ¯”å¦‚CSSçš„&#123;% bubble å…„å¼Ÿç›¸é‚»é€‰æ‹©å™¨,&quot;ä¾‹å¦‚ h1 + p &#123;margin-top:50px;&#125;&quot; %&#125;ï¼Œ&#123;% bubble flexå¸ƒå±€,&quot;Flex æ˜¯ Flexible Box çš„ç¼©å†™ï¼Œæ„ä¸º&quot;å¼¹æ€§å¸ƒå±€&quot;ï¼Œç”¨æ¥ä¸ºç›’çŠ¶æ¨¡å‹æä¾›æœ€å¤§çš„çµæ´»æ€§&quot;,&quot;#ec5830&quot; %&#125;ï¼Œ&#123;% bubble transformå˜æ¢,&quot;transform å±æ€§å‘å…ƒç´ åº”ç”¨ 2D æˆ– 3D è½¬æ¢ã€‚è¯¥å±æ€§å…è®¸æˆ‘ä»¬å¯¹å…ƒç´ è¿›è¡Œæ—‹è½¬ã€ç¼©æ”¾ã€ç§»åŠ¨æˆ–å€¾æ–œã€‚&quot;,&quot;#1db675&quot; %&#125;ï¼Œanimationçš„&#123;% bubble è´å¡å°”é€Ÿåº¦æ›²çº¿,&quot;è´å¡å°”æ›²çº¿(BÃ©zier curve)ï¼Œåˆç§°è´å…¹æ›²çº¿æˆ–è´æµåŸƒæ›²çº¿ï¼Œæ˜¯åº”ç”¨äºäºŒç»´å›¾å½¢åº”ç”¨ç¨‹åºçš„æ•°å­¦æ›²çº¿ã€‚ä¸€èˆ¬çš„çŸ¢é‡å›¾å½¢è½¯ä»¶é€šè¿‡å®ƒæ¥ç²¾ç¡®ç”»å‡ºæ›²çº¿ï¼Œè´å…¹æ›²çº¿ç”±çº¿æ®µä¸èŠ‚ç‚¹ç»„æˆï¼ŒèŠ‚ç‚¹æ˜¯å¯æ‹–åŠ¨çš„æ”¯ç‚¹ï¼Œçº¿æ®µåƒå¯ä¼¸ç¼©çš„çš®ç­‹&quot;,&quot;#de4489&quot; %&#125;å†™æ³•ï¼Œè¿˜æœ‰ä»Šå¤©åˆšçœ‹åˆ°çš„&#123;% bubble clip-path,&quot;clip-pathå±æ€§ä½¿ç”¨è£å‰ªæ–¹å¼åˆ›å»ºå…ƒç´ çš„å¯æ˜¾ç¤ºåŒºåŸŸã€‚åŒºåŸŸå†…çš„éƒ¨åˆ†æ˜¾ç¤ºï¼ŒåŒºåŸŸå¤–çš„éšè—ã€‚&quot;,&quot;#868fd7&quot; %&#125;å±æ€§ã€‚è¿™äº›å¯¹æˆ‘æ¥è¯´å¾ˆæ–°é¢–çš„æ¦‚å¿µç‹ ç‹ çš„å†²å‡»ç€æˆ‘ä»¥å‰ç§¯ç´¯èµ·æ¥çš„è®¾è®¡æ€è·¯ã€‚</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>æœ€è¿‘æˆ‘å­¦åˆ°äº†ä¸å°‘æ–°ç©æ„å„¿ï¼ˆè™½ç„¶å¯¹å¾ˆå¤šå¤§ä½¬æ¥è¯´è¿™äº›å·²ç»æ˜¯æ—§æŠ€æœ¯äº†ï¼‰ï¼Œæ¯”å¦‚CSSçš„<span class="bubble-content">å…„å¼Ÿç›¸é‚»é€‰æ‹©å™¨</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#71a4e3;">ä¾‹å¦‚ h1 + p {margin-top:50px;}</span></span>ï¼Œ<span class="bubble-content">flexå¸ƒå±€</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#ec5830;">Flex æ˜¯ Flexible Box çš„ç¼©å†™ï¼Œæ„ä¸ºå¼¹æ€§å¸ƒå±€&quot;ï¼Œç”¨æ¥ä¸ºç›’çŠ¶æ¨¡å‹æä¾›æœ€å¤§çš„çµæ´»æ€§&quot;</span></span>ï¼Œ<span class="bubble-content">transformå˜æ¢</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#1db675;">transform å±æ€§å‘å…ƒç´ åº”ç”¨ 2D æˆ– 3D è½¬æ¢ã€‚è¯¥å±æ€§å…è®¸æˆ‘ä»¬å¯¹å…ƒç´ è¿›è¡Œæ—‹è½¬ã€ç¼©æ”¾ã€ç§»åŠ¨æˆ–å€¾æ–œã€‚</span></span>ï¼Œanimationçš„<span class="bubble-content">è´å¡å°”é€Ÿåº¦æ›²çº¿</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#de4489;">è´å¡å°”æ›²çº¿(BÃ©zier curve)ï¼Œåˆç§°è´å…¹æ›²çº¿æˆ–è´æµåŸƒæ›²çº¿ï¼Œæ˜¯åº”ç”¨äºäºŒç»´å›¾å½¢åº”ç”¨ç¨‹åºçš„æ•°å­¦æ›²çº¿ã€‚ä¸€èˆ¬çš„çŸ¢é‡å›¾å½¢è½¯ä»¶é€šè¿‡å®ƒæ¥ç²¾ç¡®ç”»å‡ºæ›²çº¿ï¼Œè´å…¹æ›²çº¿ç”±çº¿æ®µä¸èŠ‚ç‚¹ç»„æˆï¼ŒèŠ‚ç‚¹æ˜¯å¯æ‹–åŠ¨çš„æ”¯ç‚¹ï¼Œçº¿æ®µåƒå¯ä¼¸ç¼©çš„çš®ç­‹</span></span>å†™æ³•ï¼Œè¿˜æœ‰ä»Šå¤©åˆšçœ‹åˆ°çš„<span class="bubble-content">clip-path</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#868fd7;">clip-pathå±æ€§ä½¿ç”¨è£å‰ªæ–¹å¼åˆ›å»ºå…ƒç´ çš„å¯æ˜¾ç¤ºåŒºåŸŸã€‚åŒºåŸŸå†…çš„éƒ¨åˆ†æ˜¾ç¤ºï¼ŒåŒºåŸŸå¤–çš„éšè—ã€‚</span></span>å±æ€§ã€‚è¿™äº›å¯¹æˆ‘æ¥è¯´å¾ˆæ–°é¢–çš„æ¦‚å¿µç‹ ç‹ çš„å†²å‡»ç€æˆ‘ä»¥å‰ç§¯ç´¯èµ·æ¥çš„è®¾è®¡æ€è·¯ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-28-å¼•ç”¨æ–‡çŒ®-reference">2.28 å¼•ç”¨æ–‡çŒ® reference</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% referto [id] , [literature] %&#125;</span><br><span class="line">&#123;% referfrom [id] , [literature] , [url] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><p>referto å¼•ç”¨ä¸Šæ ‡</p><ul><li><p><code>id</code>: ä¸Šæ ‡åºå·å†…å®¹ï¼Œéœ€ä¸referfromæ ‡ç­¾çš„idå¯¹åº”æ‰èƒ½å®ç°è·³è½¬</p></li><li><p><code>literature</code>: å¼•ç”¨çš„å‚è€ƒæ–‡çŒ®åç§°</p></li></ul></li><li><p>referfrom å¼•ç”¨å‡ºå¤„</p><ul><li><p><code>id</code>: åºå·å†…å®¹ï¼Œéœ€ä¸refertoæ ‡ç­¾çš„idå¯¹åº”æ‰èƒ½å®ç° è·³è½¬</p></li><li><p><code>literature</code>: å¼•ç”¨çš„å‚è€ƒæ–‡çŒ®åç§°</p></li><li><p><code>url</code>: å¼•ç”¨çš„å‚è€ƒæ–‡çŒ®é“¾æ¥ï¼Œå¯çœç•¥</p></li></ul></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Akilarã®ç³–æœå±‹(akilar.top)æ˜¯ä¸€ä¸ªç§äººæ€§è´¨çš„åšå®¢&#123;% referto &#x27;[1]&#x27;,&#x27;Akilarã®ç³–æœå±‹ç¾¤èŠç®€ä»‹&#x27; %&#125;ï¼Œä»å„ç±»æ•™ç¨‹è‡³ç”Ÿæ´»ç‚¹æ»´ï¼Œæ— è¯ä¸è°ˆã€‚å»ºç¾¤çš„ç›®çš„æ˜¯æä¾›ä¸€ä¸ªé—²èŠçš„åœºæ‰€ã€‚åšå®¢é‡‡ç”¨Hexoæ¡†æ¶&#123;% referto &#x27;[2]&#x27;,&#x27;Hexoä¸­æ–‡æ–‡æ¡£&#x27; %&#125;ï¼ŒButterflyä¸»é¢˜&#123;% referto &#x27;[3]&#x27;,&#x27;Butterfly å®‰è£…æ–‡æ¡£(ä¸€) å¿«é€Ÿå¼€å§‹&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">æœ¬é¡¹ç›®å‚è€ƒäº†Volantis&#123;% referto &#x27;[4]&#x27;,&#x27;hexo-theme-volantis æ ‡ç­¾æ’ä»¶&#x27; %&#125;çš„æ ‡ç­¾æ ·å¼ã€‚å¼•å…¥<span class="code">`[tag].js`</span>ï¼Œå¹¶é’ˆå¯¹<span class="code">`butterfly`</span>ä¸»é¢˜ä¿®æ”¹äº†ç›¸åº”çš„<span class="code">`[tag].styl`</span>ã€‚åœ¨æ­¤é¸£è°¢<span class="code">`Volantis`</span>ä¸»é¢˜ä¼—å¼€å‘è€…ã€‚</span><br><span class="line">ä¸»è¦å‚è€ƒå†…å®¹åŒ…æ‹¬å„ä¸ªvolantisçš„å†…ç½®æ ‡ç­¾æ’ä»¶æ–‡æ¡£&#123;% referto &#x27;[5]&#x27;,&#x27;Volantisæ–‡æ¡£:å†…ç½®æ ‡ç­¾æ’ä»¶&#x27; %&#125;</span><br><span class="line">Butterflyä¸»é¢˜çš„å„ä¸ªè¡ç”Ÿé­”æ”¹&#123;% referto &#x27;[6]&#x27;,&#x27;Butterfly å®‰è£…æ–‡æ¡£:æ ‡ç­¾å¤–æŒ‚ï¼ˆTag Plugins&#x27; %&#125;&#123;% referto &#x27;[7]&#x27;,&#x27;å°å¼‹ã®ç”Ÿæ´»é¦†å…¨æ ·å¼é¢„è§ˆ&#x27; %&#125;&#123;% referto &#x27;[8]&#x27;,&#x27;l-lin-font-awesome-animation&#x27; %&#125;&#123;% referto &#x27;[9]&#x27;,&#x27;å°åº·çš„butterflyä¸»é¢˜ä½¿ç”¨æ–‡æ¡£&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% referfrom &#x27;[1]&#x27;,&#x27;Akilarã®ç³–æœå±‹ç¾¤èŠç®€ä»‹&#x27;,&#x27;https://jq.qq.com/?<span class="emphasis">_wv=1027&amp;k=pGLB2C0N&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[2]&#x27;,&#x27;Hexoä¸­æ–‡æ–‡æ¡£&#x27;,&#x27;https://hexo.io/zh-cn/docs/&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[3]&#x27;,&#x27;Butterfly å®‰è£…æ–‡æ¡£(ä¸€) å¿«é€Ÿå¼€å§‹&#x27;,&#x27;https://butterfly.js.org/posts/21cfbf15/&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[4]&#x27;,&#x27;hexo-theme-volantis æ ‡ç­¾æ’ä»¶&#x27;,&#x27;https://volantis.js.org/v5/tag-plugins/&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[5]&#x27;,&#x27;Volantisæ–‡æ¡£:å†…ç½®æ ‡ç­¾æ’ä»¶&#x27;,&#x27;https://volantis.js.org/tag-plugins/&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[6]&#x27;,&#x27;Butterfly å®‰è£…æ–‡æ¡£:æ ‡ç­¾å¤–æŒ‚ï¼ˆTag Plugins&#x27;,&#x27;https://butterfly.js.org/posts/4aa8abbe/#%E6%A8%99%E7%B1%A4%E5%A4%96%E6%8E%9B%EF%BC%88Tag-Plugins%EF%BC%89&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[7]&#x27;,&#x27;å°å¼‹ã®ç”Ÿæ´»é¦†å…¨æ ·å¼é¢„è§ˆ&#x27;,&#x27;https://lovelijunyi.gitee.io/posts/c898.html&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[8]&#x27;,&#x27;l-lin-font-awesome-animation&#x27;,&#x27;https://github.com/l-lin/font-awesome-animation&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[9]&#x27;,&#x27;å°åº·çš„butterflyä¸»é¢˜ä½¿ç”¨æ–‡æ¡£&#x27;,&#x27;https://www.antmoe.com/posts/3b43914f/&#x27; %&#125;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>Akilarã®ç³–æœå±‹(akilar.top)æ˜¯ä¸€ä¸ªç§äººæ€§è´¨çš„åšå®¢<span class="hidden-anchor" id="referto_[1]"></span><sup class="reference"><a href="#referfrom_[1]">[1]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Akilarã®ç³–æœå±‹ç¾¤èŠç®€ä»‹</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span>ï¼Œä»å„ç±»æ•™ç¨‹è‡³ç”Ÿæ´»ç‚¹æ»´ï¼Œæ— è¯ä¸è°ˆã€‚å»ºç¾¤çš„ç›®çš„æ˜¯æä¾›ä¸€ä¸ªé—²èŠçš„åœºæ‰€ã€‚åšå®¢é‡‡ç”¨Hexoæ¡†æ¶<span class="hidden-anchor" id="referto_[2]"></span><sup class="reference"><a href="#referfrom_[2]">[2]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Hexoä¸­æ–‡æ–‡æ¡£</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span>ï¼ŒButterflyä¸»é¢˜<span class="hidden-anchor" id="referto_[3]"></span><sup class="reference"><a href="#referfrom_[3]">[3]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Butterfly å®‰è£…æ–‡æ¡£(ä¸€) å¿«é€Ÿå¼€å§‹</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span></p><p>æœ¬é¡¹ç›®å‚è€ƒäº†Volantis<span class="hidden-anchor" id="referto_[4]"></span><sup class="reference"><a href="#referfrom_[4]">[4]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">hexo-theme-volantis æ ‡ç­¾æ’ä»¶</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span>çš„æ ‡ç­¾æ ·å¼ã€‚å¼•å…¥<code>[tag].js</code>ï¼Œå¹¶é’ˆå¯¹<code>butterfly</code>ä¸»é¢˜ä¿®æ”¹äº†ç›¸åº”çš„<code>[tag].styl</code>ã€‚åœ¨æ­¤é¸£è°¢<code>Volantis</code>ä¸»é¢˜ä¼—å¼€å‘è€…ã€‚<br>ä¸»è¦å‚è€ƒå†…å®¹åŒ…æ‹¬å„ä¸ªvolantisçš„å†…ç½®æ ‡ç­¾æ’ä»¶æ–‡æ¡£<span class="hidden-anchor" id="referto_[5]"></span><sup class="reference"><a href="#referfrom_[5]">[5]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Volantisæ–‡æ¡£:å†…ç½®æ ‡ç­¾æ’ä»¶</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span><br>Butterflyä¸»é¢˜çš„å„ä¸ªè¡ç”Ÿé­”æ”¹<span class="hidden-anchor" id="referto_[6]"></span><sup class="reference"><a href="#referfrom_[6]">[6]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Butterfly å®‰è£…æ–‡æ¡£:æ ‡ç­¾å¤–æŒ‚ï¼ˆTag Plugins</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span><span class="hidden-anchor" id="referto_[7]"></span><sup class="reference"><a href="#referfrom_[7]">[7]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">å°å¼‹ã®ç”Ÿæ´»é¦†å…¨æ ·å¼é¢„è§ˆ</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span><span class="hidden-anchor" id="referto_[8]"></span><sup class="reference"><a href="#referfrom_[8]">[8]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">l-lin-font-awesome-animation</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span><span class="hidden-anchor" id="referto_[9]"></span><sup class="reference"><a href="#referfrom_[9]">[9]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">å°åº·çš„butterflyä¸»é¢˜ä½¿ç”¨æ–‡æ¡£</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span></p><div class="reference-source"><span class="hidden-anchor" id="referfrom_[1]"></span><a class="reference-anchor" href="#referto_[1]">[1]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://jq.qq.com/?_wv=1027&k=pGLB2C0N">Akilarã®ç³–æœå±‹ç¾¤èŠç®€ä»‹</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[2]"></span><a class="reference-anchor" href="#referto_[2]">[2]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://hexo.io/zh-cn/docs/">Hexoä¸­æ–‡æ–‡æ¡£</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[3]"></span><a class="reference-anchor" href="#referto_[3]">[3]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://butterfly.js.org/posts/21cfbf15/">Butterfly å®‰è£…æ–‡æ¡£(ä¸€) å¿«é€Ÿå¼€å§‹</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[4]"></span><a class="reference-anchor" href="#referto_[4]">[4]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://volantis.js.org/v5/tag-plugins/">hexo-theme-volantis æ ‡ç­¾æ’ä»¶</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[5]"></span><a class="reference-anchor" href="#referto_[5]">[5]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://volantis.js.org/tag-plugins/">Volantisæ–‡æ¡£:å†…ç½®æ ‡ç­¾æ’ä»¶</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[6]"></span><a class="reference-anchor" href="#referto_[6]">[6]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://butterfly.js.org/posts/4aa8abbe/#%E6%A8%99%E7%B1%A4%E5%A4%96%E6%8E%9B%EF%BC%88Tag-Plugins%EF%BC%89">Butterfly å®‰è£…æ–‡æ¡£:æ ‡ç­¾å¤–æŒ‚ï¼ˆTag Plugins</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[7]"></span><a class="reference-anchor" href="#referto_[7]">[7]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://lovelijunyi.gitee.io/posts/c898.html">å°å¼‹ã®ç”Ÿæ´»é¦†å…¨æ ·å¼é¢„è§ˆ</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[8]"></span><a class="reference-anchor" href="#referto_[8]">[8]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://github.com/l-lin/font-awesome-animation">l-lin-font-awesome-animation</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[9]"></span><a class="reference-anchor" href="#referto_[9]">[9]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://www.antmoe.com/posts/3b43914f/">å°åº·çš„butterflyä¸»é¢˜ä½¿ç”¨æ–‡æ¡£</a></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-29-PDFå±•ç¤º">2.29 PDFå±•ç¤º</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% pdf æ–‡ä»¶è·¯å¾„ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>æ–‡ä»¶è·¯å¾„</code>: å¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„æˆ–è€…æ˜¯åœ¨çº¿é“¾æ¥</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 1.æœ¬åœ°æ–‡ä»¶:åœ¨mdæ–‡ä»¶è·¯å¾„ä¸‹åˆ›å»ºä¸€ä¸ªåŒåæ–‡ä»¶å¤¹ï¼Œå…¶å†…æ”¾pdfæ–‡ä»¶åä¸ºxxx.pdfçš„æ–‡ä»¶</span></span><br><span class="line">&#123;% pdf xxx.pdf %&#125;</span><br><span class="line"><span class="section"># 2.åœ¨çº¿é“¾æ¥</span></span><br><span class="line">&#123;% pdf https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/pdf/å°ä½œæ–‡è®²ä¹‰.pdf %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>2.åœ¨çº¿é“¾æ¥(è¦æ”¾åˆ°æœ€å¤–å±‚æ‰èƒ½èµ·ä½œç”¨)</p><pre><code>&lt;div class=&quot;row&quot;&gt;&lt;embed src=&quot;https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/pdf/å°ä½œæ–‡è®²ä¹‰.pdf&quot; width=&quot;100%&quot; height=&quot;550&quot; type=&quot;application/pdf&quot;&gt;&lt;/div&gt;</code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-30-Hexo-tag-map-æ’ä»¶">2.30 Hexo-tag-map æ’ä»¶</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% + æ ‡ç­¾å€¼ + ç»åº¦ + çº¬åº¦ + æ–‡æœ¬ + ç¼©æ”¾ç­‰çº§ + å®½ + é«˜ + é»˜è®¤å›¾å±‚ + %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><table><thead><tr><th style="text-align:center">åœ°å›¾å</th><th style="text-align:center">æ ‡ç­¾å€¼ &lt;å¿…å¡«&gt;</th><th style="text-align:center">å®½ (é»˜è®¤ 100%) / é«˜ (é»˜è®¤ 360px)</th><th style="text-align:center">ç¼©æ”¾ç­‰çº§ (é»˜è®¤ 14)</th><th style="text-align:center">å®½ (é»˜è®¤ 100%) / é«˜ (é»˜è®¤ 360px)</th><th style="text-align:center">é»˜è®¤å›¾å±‚ (é»˜è®¤ 1)</th></tr></thead><tbody><tr><td style="text-align:center">æ··åˆåœ°å›¾</td><td style="text-align:center">map</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 3~18</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 1~7</td></tr><tr><td style="text-align:center">è°·æ­Œåœ°å›¾</td><td style="text-align:center">googleMap</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 1~20</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 1~3</td></tr><tr><td style="text-align:center">é«˜å¾·åœ°å›¾</td><td style="text-align:center">gaodeMap</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 3~18</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 1~3</td></tr><tr><td style="text-align:center">ç™¾åº¦åœ°å›¾</td><td style="text-align:center">baiduMap</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 4~18</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 1~2</td></tr><tr><td style="text-align:center">Geoq åœ°å›¾</td><td style="text-align:center">geoqMap</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 1~18</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 1~5</td></tr><tr><td style="text-align:center">openstreet åœ°å›¾</td><td style="text-align:center">openstreetMap</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 1~18</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">ä¸æ”¯æŒæ­¤å‚æ•°</td></tr></tbody></table><ol><li>å‚æ•°ä¹‹é—´ï¼Œç”¨è‹±æ–‡é€—å·ç›¸éš”</li><li>å‚æ•°å¿…é¡»æŒ‰ä¸Šè¿°äº‹ä¾‹é¡ºåºè¾“å…¥ï¼Œä¸å¾—ä¸ºç©º</li><li>åŒä¸€ä¸ªé¡µé¢ï¼ŒåŒä¸€ç»„ç»çº¬åº¦å€¼ï¼Œåªèƒ½æ’å…¥ä¸€ä¸ªç›¸åŒæ ‡ç­¾å€¼çš„åœ°å›¾ (è‹¥æœ‰éœ€è¦ï¼Œå¯ä»¥å°†ç¬¬äºŒä¸ªåœ°å›¾ä¸Šï¼Œç»åº¦æˆ–çº¬åº¦æœ«å°¾åˆ é™¤ä¸€ä¸¤ä¸ªæ•°)</li><li>å‚æ•°å–å€¼å¿…é¡»åœ¨ä¸Šè¿°èŒƒå›´å†…</li><li>é»˜è®¤å›¾å±‚ï¼šå³åœ°å›¾å åŠ å±‚çš„å€¼ï¼Œé»˜è®¤å¸¸è§„åœ°å›¾è¿˜æ˜¯å«æ˜Ÿåœ°å›¾ï¼Œå¯æŒ‰åœ°å›¾æ˜¾ç¤ºé¡ºåºå–å€¼</li><li>ç¼©æ”¾ç­‰çº§ï¼Œæ•°å­—è¶Šå¤§ï¼Œåœ°å›¾æ¯”ä¾‹å°ºè¶Šå°ï¼Œæ˜¾ç¤ºçš„è¶Šç²¾ç»†</li><li>é™¤æ ‡ç­¾å€¼å¤–ï¼Œå…¶ä»–å‚æ•°é€‰å¡«ï¼Œä½† æ¯ä¸ªå‚æ•°çš„å·¦è¾¹çš„å‚æ•°å¿…å¡«</li><li>è°·æ­Œåœ°å›¾éœ€è¦å¤–ç½‘æ‰èƒ½åŠ è½½æŸ¥çœ‹</li></ol><p>åæ ‡è·å–ï¼š<a href="https://lbs.amap.com/tools/picker">é«˜å¾·åœ°å›¾åæ ‡æ‹¾å–ç³»ç»Ÿ</a> ã€<a href="https://api.map.baidu.com/lbsapi/getpoint/index.html">ç™¾åº¦åœ°å›¾åæ ‡æ‹¾å–ç³»ç»Ÿ</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% map 120.101101,30.239119 %&#125;</span><br><span class="line">&#123;% googleMap 120.101101,30.239119, è¿™é‡Œæ˜¯è¥¿æ¹–çµéšå¯ºï¼Œæ®è¯´æ±‚å§»ç¼˜å¾ˆçµéªŒå“¦ï¼ %&#125;</span><br><span class="line">&#123;% geoqMap 120.101101,30.239119, è¿™é‡Œæ˜¯è¥¿æ¹–çµéšå¯ºï¼Œæ®è¯´æ±‚å§»ç¼˜å¾ˆçµéªŒå“¦ï¼, 13, 90%, 320px, 3 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><link rel="stylesheet" href="//unpkg.com/hexo-tag-map/lib/leaflet@1.7.1.css"><script data-pjax src="//unpkg.com/hexo-tag-map/lib/leaflet@1.7.1.js"></script><script data-pjax src="//unpkg.com/hexo-tag-map/lib/leaflet.ChineseTmsProviders@1.0.4.js"></script><div class="map-box" style="margin: 0.8rem 0 1.6rem 0;"><div id="map-120.101101-30.239119" style="max-width:100%; height:360px;display: block;margin:0 auto;z-index:1;border-radius: 5px;"></div></div><script type="text/javascript">var normalm=L.tileLayer.chinaProvider('GaoDe.Normal.Map',{maxZoom:20,minZoom:1,attribution:'é«˜å¾·åœ°å›¾'});var imgm=L.tileLayer.chinaProvider('GaoDe.Satellite.Map',{maxZoom:20,minZoom:1,attribution:'é«˜å¾·åœ°å›¾'});var imga=L.tileLayer.chinaProvider('GaoDe.Satellite.Annotion',{maxZoom:20,minZoom:1,attribution:'é«˜å¾·åœ°å›¾'});var normalMap=L.tileLayer.chinaProvider('Google.Normal.Map',{maxZoom:20,minZoom:1,attribution:'Google Maps'}),satelliteMap=L.tileLayer.chinaProvider('Google.Satellite.Map',{maxZoom:21,minZoom:1,attribution:'Google Maps'});routeMap=L.tileLayer.chinaProvider('Google.Satellite.Annotion',{maxZoom:21,minZoom:1});var normalMap=L.tileLayer.chinaProvider('Google.Normal.Map',{maxZoom:21,minZoom:1,attribution:'Google Maps'}),satelliteMap=L.tileLayer.chinaProvider('Google.Satellite.Map',{maxZoom:21,minZoom:1,attribution:'Google Maps'}),routeMap=L.tileLayer.chinaProvider('Google.Satellite.Annotion',{maxZoom:21,minZoom:1,attribution:'Google Maps'});var normalm1=L.tileLayer.chinaProvider('Geoq.Normal.Map',{maxZoom:21,minZoom:1,attribution:'GeoQ'});var normal=L.layerGroup([normalm]),image=L.layerGroup([imgm,imga]);var baseLayers={"é«˜å¾·åœ°å›¾":normal,"æ™ºå›¾åœ°å›¾":normalm1,"è°·æ­Œåœ°å›¾":normalMap,"é«˜å¾·å«æ˜Ÿåœ°å›¾":imgm,"è°·æ­Œå«æ˜Ÿåœ°å›¾":satelliteMap,"é«˜å¾·å«æ˜Ÿæ ‡æ³¨":image,"è°·æ­Œå«æ˜Ÿæ ‡æ³¨":routeMap};var mymap=L.map('map-120.101101-30.239119',{center:[30.239119,120.101101],zoom:14,layers:[normal],zoomControl:false});L.control.layers(baseLayers,null).addTo(mymap);L.control.zoom({zoomInTitle:'æ”¾å¤§',zoomOutTitle:'ç¼©å°'}).addTo(mymap);</script><br><link rel="stylesheet" href="//unpkg.com/hexo-tag-map/lib/leaflet@1.7.1.css"><script data-pjax src="//unpkg.com/hexo-tag-map/lib/leaflet@1.7.1.js"></script><script data-pjax src="//unpkg.com/hexo-tag-map/lib/leaflet.ChineseTmsProviders@1.0.4.js"></script><div id="googleMap-120.101101-30.239119" style="max-width:100%; height:360px;display: block;margin:0 auto;z-index:1;border-radius: 5px;"></div><script type="text/javascript">var normalMap=L.tileLayer.chinaProvider('Google.Normal.Map',{maxZoom:22,minZoom:1,attribution:'Google Maps'}),satelliteMap=L.tileLayer.chinaProvider('Google.Satellite.Map',{maxZoom:22,minZoom:1,attribution:'Google Maps'}),routeMap=L.tileLayer.chinaProvider('Google.Satellite.Annotion',{maxZoom:22,minZoom:1,attribution:'Google Maps'});var baseLayers={"è°·æ­Œåœ°å›¾":normalMap,"è°·æ­Œå«æ˜Ÿå›¾":satelliteMap,"è°·æ­Œå«æ˜Ÿæ ‡æ³¨": routeMap};var overlayLayers={};var mymap=L.map("googleMap-120.101101-30.239119",{center:[30.239119,120.101101],zoom:14,layers:[normalMap],zoomControl:false});L.control.layers(baseLayers,null).addTo(mymap);L.control.zoom({zoomInTitle:'æ”¾å¤§',zoomOutTitle:'ç¼©å°'}).addTo(mymap);var marker = L.marker(['30.239119','120.101101']).addTo(mymap);marker.bindPopup("è¿™é‡Œæ˜¯è¥¿æ¹–çµéšå¯ºï¼Œæ®è¯´æ±‚å§»ç¼˜å¾ˆçµéªŒå“¦ï¼").openPopup();</script><br><link rel="stylesheet" href="//unpkg.com/hexo-tag-map/lib/leaflet@1.7.1.css"><script data-pjax src="//unpkg.com/hexo-tag-map/lib/leaflet@1.7.1.js"></script><script data-pjax src="//unpkg.com/hexo-tag-map/lib/leaflet.ChineseTmsProviders@1.0.4.js"></script><div id="geoqMap-120.101101-30.239119" style="max-width:90%; height:320px;display: block;margin:0 auto;z-index:1;border-radius: 5px;"></div><script type="text/javascript">var normalm1=L.tileLayer.chinaProvider('Geoq.Normal.Map',{maxZoom:20,minZoom:1,attribution:'GeoQ'});var normalm2=L.tileLayer.chinaProvider('Geoq.Normal.PurplishBlue',{maxZoom:20,minZoom:1,attribution:'GeoQ'});var normalm3=L.tileLayer.chinaProvider('Geoq.Normal.Gray',{maxZoom:20,minZoom:1,attribution:'GeoQ'});var normalm4=L.tileLayer.chinaProvider('Geoq.Normal.Warm',{maxZoom:20,minZoom:1,attribution:'GeoQ'});var normalm5=L.tileLayer.chinaProvider('Geoq.Theme.Hydro',{maxZoom:20,minZoom:1,attribution:'GeoQ'});var normal=L.layerGroup([normalm1,normalm2,normalm3,normalm4,normalm5]);var baseLayers={"æ™ºå›¾åœ°å›¾":normalm1,"åˆå¤œè“":normalm2,"ç°è‰²":normalm3,"æš–è‰²":normalm4,"æ°´ç³»":normalm5};var mymap=L.map("geoqMap-120.101101-30.239119",{center:[30.239119,120.101101],zoom:13,layers:[normalm3],zoomControl:false});L.control.layers(baseLayers,null).addTo(mymap);L.control.zoom({zoomInTitle:'æ”¾å¤§',zoomOutTitle:'ç¼©å°'}).addTo(mymap);var marker = L.marker(['30.239119','120.101101']).addTo(mymap);marker.bindPopup("è¿™é‡Œæ˜¯è¥¿æ¹–çµéšå¯ºï¼Œæ®è¯´æ±‚å§»ç¼˜å¾ˆçµéªŒå“¦ï¼").openPopup();</script><br><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-31-éšè—å—">2.31 éšè—å—</h2><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% hideBlock display,bg,color %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endhideBlock %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li>contentï¼šè¦éšè—çš„å†…å®¹</li><li>displayï¼šå±•ç¤ºå‰æŒ‰é’®æ˜¾ç¤ºçš„æ–‡å­—ï¼ˆå¯é€‰ï¼‰</li><li>bgï¼šæŒ‰é’®çš„èƒŒæ™¯é¢œè‰²ï¼ˆå¯é€‰ï¼‰</li><li>colorï¼šæŒ‰é’®æ˜¾ç¤ºçš„æ–‡å­—çš„é¢œè‰²ï¼ˆå¯é€‰ï¼‰</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% hideBlock ç‚¹æˆ‘é¢„è§ˆ, blue %&#125;</span><br><span class="line">è¿™é‡Œæœ‰å¼ å›¾ç‰‡ï¼š</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://s1.vika.cn/space/2022/10/30/b35fce448bc9404a8d65c3ce1e6e46eb&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;image (1)&quot;</span> <span class="attr">style</span>=<span class="string">&quot;zoom:67%;&quot;</span> /&gt;</span></span></span><br><span class="line">&#123;% endhideBlock %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><div class="hide-block"><button type="button" class="hide-button" style="background-color:  blue;">ç‚¹æˆ‘é¢„è§ˆ    </button><div class="hide-content"><p>è¿™é‡Œæœ‰å¼ å›¾ç‰‡ï¼š<br><img src="https://s1.vika.cn/space/2022/10/30/b35fce448bc9404a8d65c3ce1e6e46eb" alt="image (1)" style="zoom:67%;" /></p></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>]]></content>
      
      
      <categories>
          
          <category> æ¼”ç¤º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Markdown </tag>
            
            <tag> å¤–æŒ‚æ ‡ç­¾ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
